# Comparing `tmp/odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2-py3-none-any.whl.zip` & `tmp/odoo_addon_stock_move_packaging_qty-16.0.1.2.0-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,24 +1,27 @@
-Zip file size: 27000 bytes, number of entries: 22
--rw-r--r--  2.0 unx     3302 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/README.rst
--rw-r--r--  2.0 unx       21 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/__init__.py
--rw-r--r--  2.0 unx      668 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/__manifest__.py
--rw-r--r--  2.0 unx     1120 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/i18n/es.po
--rw-r--r--  2.0 unx     1131 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/i18n/it.po
--rw-r--r--  2.0 unx      854 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/i18n/stock_move_packaging_qty.pot
--rw-r--r--  2.0 unx      659 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/migrations/15.0.0/pre-migrate.py
--rw-r--r--  2.0 unx       25 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/models/__init__.py
--rw-r--r--  2.0 unx     2330 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/models/stock_move.py
--rw-r--r--  2.0 unx      137 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/readme/CONTRIBUTORS.rst
--rw-r--r--  2.0 unx       59 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/readme/DESCRIPTION.rst
--rw-r--r--  2.0 unx     9455 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/static/description/icon.png
--rw-r--r--  2.0 unx    12722 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/static/description/index.html
--rw-r--r--  2.0 unx       44 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/tests/__init__.py
--rw-r--r--  2.0 unx     2787 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/tests/test_stock_move_packaging_qty.py
--rw-r--r--  2.0 unx     1702 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/views/report_stock_picking.xml
--rw-r--r--  2.0 unx      947 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/views/stock_move_tree_view.xml
--rw-r--r--  2.0 unx     1140 b- defN 24-Mar-20 06:33 odoo/addons/stock_move_packaging_qty/views/stock_picking_form_view.xml
--rw-r--r--  2.0 unx     3884 b- defN 24-Mar-20 06:34 odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 24-Mar-20 06:34 odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/WHEEL
--rw-r--r--  2.0 unx        5 b- defN 24-Mar-20 06:34 odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/top_level.txt
--rw-rw-r--  2.0 unx     2525 b- defN 24-Mar-20 06:34 odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/RECORD
-22 files, 45609 bytes uncompressed, 22622 bytes compressed:  50.4%
+Zip file size: 31074 bytes, number of entries: 25
+-rw-r--r--  2.0 unx     3600 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/README.rst
+-rw-r--r--  2.0 unx       21 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/__init__.py
+-rw-r--r--  2.0 unx      705 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/__manifest__.py
+-rw-r--r--  2.0 unx     1120 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/i18n/es.po
+-rw-r--r--  2.0 unx     1131 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/i18n/it.po
+-rw-r--r--  2.0 unx     2671 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/i18n/stock_move_packaging_qty.pot
+-rw-r--r--  2.0 unx      659 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/migrations/15.0.0/pre-migrate.py
+-rw-r--r--  2.0 unx       55 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/models/__init__.py
+-rw-r--r--  2.0 unx     5003 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/models/stock_move.py
+-rw-r--r--  2.0 unx     2158 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/models/stock_move_line.py
+-rw-r--r--  2.0 unx      137 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/readme/CONTRIBUTORS.rst
+-rw-r--r--  2.0 unx       72 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/readme/DESCRIPTION.rst
+-rw-r--r--  2.0 unx      237 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/readme/ROADMAP.rst
+-rw-r--r--  2.0 unx     9455 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/static/description/icon.png
+-rw-r--r--  2.0 unx    13253 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/static/description/index.html
+-rw-r--r--  2.0 unx       44 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/tests/__init__.py
+-rw-r--r--  2.0 unx     3643 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/tests/test_stock_move_packaging_qty.py
+-rw-r--r--  2.0 unx     4101 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/views/report_stock_picking.xml
+-rw-r--r--  2.0 unx     2739 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/views/stock_move_line_view.xml
+-rw-r--r--  2.0 unx     3178 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/views/stock_move_view.xml
+-rw-r--r--  2.0 unx     1422 b- defN 24-Apr-12 09:05 odoo/addons/stock_move_packaging_qty/views/stock_picking_form_view.xml
+-rw-r--r--  2.0 unx     4180 b- defN 24-Apr-12 09:05 odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 24-Apr-12 09:05 odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/WHEEL
+-rw-r--r--  2.0 unx        5 b- defN 24-Apr-12 09:05 odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/top_level.txt
+-rw-rw-r--  2.0 unx     2868 b- defN 24-Apr-12 09:05 odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/RECORD
+25 files, 62549 bytes uncompressed, 26126 bytes compressed:  58.2%
```

## zipnote {}

```diff
@@ -21,20 +21,26 @@
 
 Filename: odoo/addons/stock_move_packaging_qty/models/__init__.py
 Comment: 
 
 Filename: odoo/addons/stock_move_packaging_qty/models/stock_move.py
 Comment: 
 
+Filename: odoo/addons/stock_move_packaging_qty/models/stock_move_line.py
+Comment: 
+
 Filename: odoo/addons/stock_move_packaging_qty/readme/CONTRIBUTORS.rst
 Comment: 
 
 Filename: odoo/addons/stock_move_packaging_qty/readme/DESCRIPTION.rst
 Comment: 
 
+Filename: odoo/addons/stock_move_packaging_qty/readme/ROADMAP.rst
+Comment: 
+
 Filename: odoo/addons/stock_move_packaging_qty/static/description/icon.png
 Comment: 
 
 Filename: odoo/addons/stock_move_packaging_qty/static/description/index.html
 Comment: 
 
 Filename: odoo/addons/stock_move_packaging_qty/tests/__init__.py
@@ -42,26 +48,29 @@
 
 Filename: odoo/addons/stock_move_packaging_qty/tests/test_stock_move_packaging_qty.py
 Comment: 
 
 Filename: odoo/addons/stock_move_packaging_qty/views/report_stock_picking.xml
 Comment: 
 
-Filename: odoo/addons/stock_move_packaging_qty/views/stock_move_tree_view.xml
+Filename: odoo/addons/stock_move_packaging_qty/views/stock_move_line_view.xml
+Comment: 
+
+Filename: odoo/addons/stock_move_packaging_qty/views/stock_move_view.xml
 Comment: 
 
 Filename: odoo/addons/stock_move_packaging_qty/views/stock_picking_form_view.xml
 Comment: 
 
-Filename: odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/METADATA
+Filename: odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/METADATA
 Comment: 
 
-Filename: odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/WHEEL
+Filename: odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/WHEEL
 Comment: 
 
-Filename: odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/top_level.txt
+Filename: odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/top_level.txt
 Comment: 
 
-Filename: odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/RECORD
+Filename: odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## odoo/addons/stock_move_packaging_qty/README.rst

```diff
@@ -3,15 +3,15 @@
 ===================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:ac3969cedf86da72ca20a93812053d6d9054a9f5d8e0c896eab57fe2b835eefc
+   !! source digest: sha256:044e4631a8df264973ca2f2fa5b7e70fba5ddb61469340eda6628a868f7c58e0
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-LGPL--3-blue.png
     :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
@@ -24,21 +24,30 @@
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
     :target: https://runboat.odoo-community.org/builds?repo=OCA/stock-logistics-warehouse&target_branch=16.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-Add packaging fields in the stock moves and their reports.
+Add packaging fields in the stock moves, their lines and their reports.
 
 **Table of contents**
 
 .. contents::
    :local:
 
+Known issues / Roadmap
+======================
+
+* Maybe we should track also reserved packaging quantities?
+
+* Since we store done product packaging quantities in the stock move lines, we
+  should be able to use this information in quants to provide real
+  packaging-based stock data.
+
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/stock-logistics-warehouse/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
 `feedback <https://github.com/OCA/stock-logistics-warehouse/issues/new?body=module:%20stock_move_packaging_qty%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
```

## odoo/addons/stock_move_packaging_qty/__manifest__.py

```diff
@@ -1,19 +1,20 @@
 # Copyright 2021 ForgeFlow S.L. (https://www.forgeflow.com)
 # License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl.html).
 {
     "name": "Stock Packaging Qty",
     "summary": "Add packaging fields in the stock moves",
-    "version": "16.0.1.1.1",
+    "version": "16.0.1.2.0",
     "author": "ForgeFlow, Odoo Community Association (OCA)",
     "website": "https://github.com/OCA/stock-logistics-warehouse",
     "category": "Warehouse",
     "depends": ["stock"],
     "data": [
         "views/report_stock_picking.xml",
-        "views/stock_move_tree_view.xml",
+        "views/stock_move_line_view.xml",
+        "views/stock_move_view.xml",
         "views/stock_picking_form_view.xml",
     ],
     "license": "LGPL-3",
     "installable": True,
     "maintainers": ["yajo"],
 }
```

## odoo/addons/stock_move_packaging_qty/i18n/stock_move_packaging_qty.pot

```diff
@@ -10,20 +10,74 @@
 "Language-Team: \n"
 "MIME-Version: 1.0\n"
 "Content-Type: text/plain; charset=UTF-8\n"
 "Content-Transfer-Encoding: \n"
 "Plural-Forms: \n"
 
 #. module: stock_move_packaging_qty
+#: model_terms:ir.ui.view,arch_db:stock_move_packaging_qty.view_stock_move_operations
+msgid "<span> / </span>"
+msgstr ""
+
+#. module: stock_move_packaging_qty
 #: model:ir.model.fields,help:stock_move_packaging_qty.field_stock_move__product_packaging_qty
-msgid "Amount of packages demanded."
+msgid "Amount of product packagings demanded."
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model:ir.model.fields,help:stock_move_packaging_qty.field_stock_move__product_packaging_qty_done
+msgid "Amount of product packagings done."
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model:ir.model.fields,field_description:stock_move_packaging_qty.field_stock_move_line__product_packaging_qty_done
+msgid "Done Pkg. Qty."
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model:ir.model.fields,field_description:stock_move_packaging_qty.field_stock_move_line__product_packaging_id
+msgid "Packaging"
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model_terms:ir.ui.view,arch_db:stock_move_packaging_qty.view_stock_move_operations
+msgid "Packagings demanded"
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model_terms:ir.ui.view,arch_db:stock_move_packaging_qty.view_stock_move_operations
+msgid "Packagings done"
 msgstr ""
 
 #. module: stock_move_packaging_qty
 #: model:ir.model.fields,field_description:stock_move_packaging_qty.field_stock_move__product_packaging_qty
-msgid "Pkg. Qty."
+msgid "Pkgs. Demand"
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model:ir.model.fields,field_description:stock_move_packaging_qty.field_stock_move__product_packaging_qty_done
+msgid "Pkgs. Done"
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model:ir.model,name:stock_move_packaging_qty.model_stock_move_line
+msgid "Product Moves (Stock Move Line)"
+msgstr ""
+
+#. module: stock_move_packaging_qty
+#: model:ir.model.fields,help:stock_move_packaging_qty.field_stock_move_line__product_packaging_qty_done
+msgid "Product packaging quantity done."
 msgstr ""
 
 #. module: stock_move_packaging_qty
 #: model:ir.model,name:stock_move_packaging_qty.model_stock_move
 msgid "Stock Move"
 msgstr ""
+
+#. module: stock_move_packaging_qty
+#. odoo-python
+#: code:addons/stock_move_packaging_qty/models/stock_move.py:0
+#, python-format
+msgid ""
+"There are %d move lines involved. Please set their product packaging done "
+"qty directly."
+msgstr ""
```

## odoo/addons/stock_move_packaging_qty/models/__init__.py

```diff
@@ -1 +1,2 @@
 from . import stock_move
+from . import stock_move_line
```

## odoo/addons/stock_move_packaging_qty/models/stock_move.py

```diff
@@ -1,21 +1,28 @@
 # Copyright 2020 Camptocamp SA
 # Copyright 2021 ForgeFlow, S.L.
-# License AGPL-3.0 or later (https://www.gnu.org/licenses/agpl)
-from odoo import api, fields, models
+# License LGPL-3.0 or later (https://www.gnu.org/licenses/lgpl).
+from odoo import _, api, exceptions, fields, models
+from odoo.tools import float_compare
 
 
-class StockPicking(models.Model):
+class StockMove(models.Model):
     _inherit = "stock.move"
 
     product_packaging_qty = fields.Float(
-        string="Pkg. Qty.",
+        string="Pkgs. Demand",
         compute="_compute_product_packaging_qty",
         inverse="_inverse_product_packaging_qty",
-        help="Amount of packages demanded.",
+        help="Amount of product packagings demanded.",
+    )
+    product_packaging_qty_done = fields.Float(
+        string="Pkgs. Done",
+        compute="_compute_product_packaging_qty_done",
+        inverse="_inverse_product_packaging_qty_done",
+        help="Amount of product packagings done.",
     )
 
     @api.depends(
         "product_qty", "product_uom", "product_packaging_id", "product_packaging_id.qty"
     )
     def _compute_product_packaging_qty(self):
         for move in self:
@@ -27,26 +34,55 @@
                 move.product_packaging_qty = 0
                 continue
             # Consider uom
             move.product_packaging_qty = (
                 move.product_uom_qty / move._get_single_package_uom_qty()
             )
 
+    @api.depends(
+        "move_line_ids.product_packaging_qty_done",
+        "move_line_nosuggest_ids.product_packaging_qty_done",
+    )
+    def _compute_product_packaging_qty_done(self):
+        """Get the sum of done packaging qtys from move lines."""
+        for move in self:
+            lines = move._get_move_lines()
+            move.product_packaging_qty_done = sum(
+                lines.mapped("product_packaging_qty_done")
+            )
+
     @api.onchange("product_packaging_qty")
     def _inverse_product_packaging_qty(self):
         """Store the quantity in the product's UoM.
 
         This inverse is also an onchange because otherwise changes are not
         reflected live.
         """
         for move in self:
             if move.product_packaging_id and move.product_packaging_qty:
                 uom_factor = move._get_single_package_uom_qty()
                 move.product_uom_qty = move.product_packaging_qty * uom_factor
 
+    def _inverse_product_packaging_qty_done(self):
+        """Store the done packaging dqty in the move line if there's just one."""
+        for move in self:
+            lines = move._get_move_lines()
+            # Setting 0 done pkgs with no lines? Nothing to do
+            if not lines and not move.product_packaging_qty_done:
+                continue
+            if len(lines) != 1:
+                raise exceptions.UserError(
+                    _(
+                        "There are %d move lines involved. "
+                        "Please set their product packaging done qty directly.",
+                        len(lines),
+                    )
+                )
+            lines.product_packaging_qty_done = move.product_packaging_qty_done
+
     @api.onchange("product_packaging_id")
     def _onchange_product_packaging(self):
         """Add a default qty if the packaging has an invalid value."""
         if not self.product_packaging_id:
             self.product_packaging_qty = 0
             return
         self.product_uom_qty = (
@@ -58,7 +94,36 @@
         """Return the quantity of a single package in the move's UoM."""
         self.ensure_one()
         if not self.product_packaging_id:
             return 0
         return self.product_packaging_id.product_uom_id._compute_quantity(
             self.product_packaging_id.qty, self.product_uom
         )
+
+    def _set_quantities_to_reservation(self):
+        """Add packaging qtys when clicking on "Set Quantities"."""
+        result = super()._set_quantities_to_reservation()
+        digits = self.env["stock.move.line"].fields_get(["qty_done"], ["digits"])[
+            "qty_done"
+        ]["digits"][1]
+        for line in self.move_line_ids:
+            if float_compare(line.qty_done, line.reserved_uom_qty, digits):
+                continue
+            if not line.product_packaging_id:
+                line.product_packaging_qty_done = 0
+                continue
+            line.product_packaging_qty_done = (
+                line.product_packaging_id._check_qty(
+                    line.qty_done, line.product_uom_id, "DOWN"
+                )
+                / line.product_packaging_id.qty
+            )
+        return result
+
+    def _clear_quantities_to_zero(self):
+        """Clear packaging qtys when clicking on "Clear Quantities"."""
+        result = super()._clear_quantities_to_zero()
+        for line in self.move_line_ids:
+            if line.qty_done:
+                continue
+            line.product_packaging_qty_done = 0
+        return result
```

## odoo/addons/stock_move_packaging_qty/readme/DESCRIPTION.rst

```diff
@@ -1 +1 @@
-Add packaging fields in the stock moves and their reports.
+Add packaging fields in the stock moves, their lines and their reports.
```

## odoo/addons/stock_move_packaging_qty/static/description/index.html

```diff
@@ -362,56 +362,66 @@
 <div class="document" id="stock-packaging-qty">
 <h1 class="title">Stock Packaging Qty</h1>
 
 <!-- !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 !! This file is generated by oca-gen-addon-readme !!
 !! changes will be overwritten.                   !!
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-!! source digest: sha256:ac3969cedf86da72ca20a93812053d6d9054a9f5d8e0c896eab57fe2b835eefc
+!! source digest: sha256:044e4631a8df264973ca2f2fa5b7e70fba5ddb61469340eda6628a868f7c58e0
 !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
 <p><a class="reference external image-reference" href="https://odoo-community.org/page/development-status"><img alt="Beta" src="https://img.shields.io/badge/maturity-Beta-yellow.png" /></a> <a class="reference external image-reference" href="http://www.gnu.org/licenses/lgpl-3.0-standalone.html"><img alt="License: LGPL-3" src="https://img.shields.io/badge/licence-LGPL--3-blue.png" /></a> <a class="reference external image-reference" href="https://github.com/OCA/stock-logistics-warehouse/tree/16.0/stock_move_packaging_qty"><img alt="OCA/stock-logistics-warehouse" src="https://img.shields.io/badge/github-OCA%2Fstock--logistics--warehouse-lightgray.png?logo=github" /></a> <a class="reference external image-reference" href="https://translation.odoo-community.org/projects/stock-logistics-warehouse-16-0/stock-logistics-warehouse-16-0-stock_move_packaging_qty"><img alt="Translate me on Weblate" src="https://img.shields.io/badge/weblate-Translate%20me-F47D42.png" /></a> <a class="reference external image-reference" href="https://runboat.odoo-community.org/builds?repo=OCA/stock-logistics-warehouse&amp;target_branch=16.0"><img alt="Try me on Runboat" src="https://img.shields.io/badge/runboat-Try%20me-875A7B.png" /></a></p>
-<p>Add packaging fields in the stock moves and their reports.</p>
+<p>Add packaging fields in the stock moves, their lines and their reports.</p>
 <p><strong>Table of contents</strong></p>
 <div class="contents local topic" id="contents">
 <ul class="simple">
-<li><a class="reference internal" href="#bug-tracker" id="toc-entry-1">Bug Tracker</a></li>
-<li><a class="reference internal" href="#credits" id="toc-entry-2">Credits</a><ul>
-<li><a class="reference internal" href="#authors" id="toc-entry-3">Authors</a></li>
-<li><a class="reference internal" href="#contributors" id="toc-entry-4">Contributors</a></li>
-<li><a class="reference internal" href="#maintainers" id="toc-entry-5">Maintainers</a></li>
+<li><a class="reference internal" href="#known-issues-roadmap" id="toc-entry-1">Known issues / Roadmap</a></li>
+<li><a class="reference internal" href="#bug-tracker" id="toc-entry-2">Bug Tracker</a></li>
+<li><a class="reference internal" href="#credits" id="toc-entry-3">Credits</a><ul>
+<li><a class="reference internal" href="#authors" id="toc-entry-4">Authors</a></li>
+<li><a class="reference internal" href="#contributors" id="toc-entry-5">Contributors</a></li>
+<li><a class="reference internal" href="#maintainers" id="toc-entry-6">Maintainers</a></li>
 </ul>
 </li>
 </ul>
 </div>
+<div class="section" id="known-issues-roadmap">
+<h1><a class="toc-backref" href="#toc-entry-1">Known issues / Roadmap</a></h1>
+<ul class="simple">
+<li>Maybe we should track also reserved packaging quantities?</li>
+<li>Since we store done product packaging quantities in the stock move lines, we
+should be able to use this information in quants to provide real
+packaging-based stock data.</li>
+</ul>
+</div>
 <div class="section" id="bug-tracker">
-<h1><a class="toc-backref" href="#toc-entry-1">Bug Tracker</a></h1>
+<h1><a class="toc-backref" href="#toc-entry-2">Bug Tracker</a></h1>
 <p>Bugs are tracked on <a class="reference external" href="https://github.com/OCA/stock-logistics-warehouse/issues">GitHub Issues</a>.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
 <a class="reference external" href="https://github.com/OCA/stock-logistics-warehouse/issues/new?body=module:%20stock_move_packaging_qty%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**">feedback</a>.</p>
 <p>Do not contact contributors directly about support or help with technical issues.</p>
 </div>
 <div class="section" id="credits">
-<h1><a class="toc-backref" href="#toc-entry-2">Credits</a></h1>
+<h1><a class="toc-backref" href="#toc-entry-3">Credits</a></h1>
 <div class="section" id="authors">
-<h2><a class="toc-backref" href="#toc-entry-3">Authors</a></h2>
+<h2><a class="toc-backref" href="#toc-entry-4">Authors</a></h2>
 <ul class="simple">
 <li>ForgeFlow</li>
 </ul>
 </div>
 <div class="section" id="contributors">
-<h2><a class="toc-backref" href="#toc-entry-4">Contributors</a></h2>
+<h2><a class="toc-backref" href="#toc-entry-5">Contributors</a></h2>
 <ul class="simple">
 <li>Mateu Griful &lt;<a class="reference external" href="mailto:mateu.griful&#64;forgeflow.com">mateu.griful&#64;forgeflow.com</a>&gt;</li>
 <li>Lois Rilo &lt;<a class="reference external" href="mailto:lois.rilo&#64;forgeflow.com">lois.rilo&#64;forgeflow.com</a>&gt;</li>
 <li>Jairo Llopis (<a class="reference external" href="https://www.moduon.team/">Moduon</a>)</li>
 </ul>
 </div>
 <div class="section" id="maintainers">
-<h2><a class="toc-backref" href="#toc-entry-5">Maintainers</a></h2>
+<h2><a class="toc-backref" href="#toc-entry-6">Maintainers</a></h2>
 <p>This module is maintained by the OCA.</p>
 <a class="reference external image-reference" href="https://odoo-community.org"><img alt="Odoo Community Association" src="https://odoo-community.org/logo.png" /></a>
 <p>OCA, or the Odoo Community Association, is a nonprofit organization whose
 mission is to support the collaborative development of Odoo features and
 promote its widespread use.</p>
 <p>Current <a class="reference external" href="https://odoo-community.org/page/maintainer-role">maintainer</a>:</p>
 <p><a class="reference external image-reference" href="https://github.com/yajo"><img alt="yajo" src="https://github.com/yajo.png?size=40px" /></a></p>
```

### html2text {}

```diff
@@ -1,17 +1,23 @@
 ************ SSttoocckk PPaacckkaaggiinngg QQttyy ************
 _[_B_e_t_a_]_[_L_i_c_e_n_s_e_:_ _L_G_P_L_-_3_]_[_O_C_A_/_s_t_o_c_k_-_l_o_g_i_s_t_i_c_s_-_w_a_r_e_h_o_u_s_e_]_[_T_r_a_n_s_l_a_t_e_ _m_e_ _o_n_ _W_e_b_l_a_t_e_]
 _[_T_r_y_ _m_e_ _o_n_ _R_u_n_b_o_a_t_]
-Add packaging fields in the stock moves and their reports.
+Add packaging fields in the stock moves, their lines and their reports.
 TTaabbllee ooff ccoonntteennttss
+    * _K_n_o_w_n_ _i_s_s_u_e_s_ _/_ _R_o_a_d_m_a_p
     * _B_u_g_ _T_r_a_c_k_e_r
     * _C_r_e_d_i_t_s
           o _A_u_t_h_o_r_s
           o _C_o_n_t_r_i_b_u_t_o_r_s
           o _M_a_i_n_t_a_i_n_e_r_s
+************ _KK_nn_oo_ww_nn_ _ii_ss_ss_uu_ee_ss_ _//_ _RR_oo_aa_dd_mm_aa_pp ************
+    * Maybe we should track also reserved packaging quantities?
+    * Since we store done product packaging quantities in the stock move lines,
+      we should be able to use this information in quants to provide real
+      packaging-based stock data.
 ************ _BB_uu_gg_ _TT_rr_aa_cc_kk_ee_rr ************
 Bugs are tracked on _G_i_t_H_u_b_ _I_s_s_u_e_s. In case of trouble, please check there if
 your issue has already been reported. If you spotted it first, help us to smash
 it by providing a detailed and welcomed _f_e_e_d_b_a_c_k.
 Do not contact contributors directly about support or help with technical
 issues.
 ************ _CC_rr_ee_dd_ii_tt_ss ************
```

## odoo/addons/stock_move_packaging_qty/tests/test_stock_move_packaging_qty.py

```diff
@@ -8,15 +8,22 @@
 class TestStockMovePackagingQty(TransactionCase):
     @classmethod
     def setUpClass(cls):
         super().setUpClass()
         cls.env = cls.env(context=dict(cls.env.context, tracking_disable=True))
         cls.env.user.groups_id |= cls.env.ref("product.group_stock_packaging")
         cls.partner = cls.env.ref("base.res_partner_12")
-        cls.product = cls.env.ref("product.product_product_9")
+        cls.product = cls.env["product.product"].create(
+            {
+                "name": "Test product",
+                "type": "consu",
+                "uom_id": cls.env.ref("uom.product_uom_unit").id,
+                "uom_po_id": cls.env.ref("uom.product_uom_unit").id,
+            }
+        )
         cls.packaging = cls.env["product.packaging"].create(
             {"name": "Test packaging", "product_id": cls.product.id, "qty": 5.0}
         )
         cls.wh = cls.env["stock.warehouse"].create(
             {"name": "Base Warehouse", "code": "TESTWH"}
         )
         cls.categ_unit = cls.env.ref("uom.product_uom_categ_unit")
@@ -55,7 +62,24 @@
             move_f.product_id = self.product
             self.assertEqual(move_f.product_uom_qty, 1)
             self.assertEqual(move_f.product_packaging_qty, 0)
             self.assertFalse(move_f.product_packaging_id)
             move_f.product_packaging_id = self.packaging
             self.assertEqual(move_f.product_uom_qty, 5)
             self.assertEqual(move_f.product_packaging_qty, 1)
+        picking = picking_f.save()
+        self.assertEqual(picking.state, "draft")
+        picking.action_assign()
+        picking.action_set_quantities_to_reservation()
+        self.assertRecordValues(
+            picking.move_ids_without_package,
+            [
+                {
+                    "product_id": self.product.id,
+                    "product_packaging_id": self.packaging.id,
+                    "product_packaging_qty_done": 1,
+                    "product_packaging_qty": 1,
+                    "product_uom_qty": 5,
+                }
+            ],
+        )
+        picking.button_validate()
```

## odoo/addons/stock_move_packaging_qty/views/report_stock_picking.xml

### odoo/addons/stock_move_packaging_qty/views/report_stock_picking.xml

```diff
@@ -17,9 +17,41 @@
     <xpath expr="//table[@name='stock_move_table']/tbody//td[                 1 + count(                     //table[@name='stock_move_table']                     //th[@name='th_sm_ordered']                     /preceding-sibling::*                 )             ]" position="inside">
       <div t-if="move.product_packaging_id" class="text-secondary" groups="product.group_stock_packaging">
         <span t-field="move.product_packaging_id"/>
         :
         <span t-field="move.product_packaging_qty"/>
       </div>
     </xpath>
+    <xpath expr="//table[@name='stock_move_table']/tbody//td[                 1 + count(                     //table[@name='stock_move_table']                     //th[@name='th_sm_quantity']                     /preceding-sibling::*                 )             ]" position="inside">
+      <div t-if="move.product_packaging_id" class="text-secondary" groups="product.group_stock_packaging">
+        <span t-field="move.product_packaging_id"/>
+        :
+        <span t-field="move.product_packaging_qty_done"/>
+      </div>
+    </xpath>
+  </template>
+  <template id="stock_report_delivery_aggregated_move_lines" inherit_id="stock.stock_report_delivery_aggregated_move_lines">
+    <xpath expr="//td[@name='move_line_aggregated_qty_ordered']">
+      <div t-if="aggregated_lines[line]['product_packaging']" class="text-secondary" groups="product.group_stock_packaging">
+        <span t-esc="aggregated_lines[line]['product_packaging'].display_name"/>
+        :
+        <span t-esc="aggregated_lines[line]['product_packaging_qty']"/>
+      </div>
+    </xpath>
+    <xpath expr="//td[@name='move_line_aggregated_qty_done']">
+      <div t-if="aggregated_lines[line]['product_packaging']" class="text-secondary" groups="product.group_stock_packaging">
+        <span t-esc="aggregated_lines[line]['product_packaging'].display_name"/>
+        :
+        <span t-esc="aggregated_lines[line]['product_packaging_qty_done']"/>
+      </div>
+    </xpath>
+  </template>
+  <template id="stock_report_delivery_has_serial_move_line" inherit_id="stock.stock_report_delivery_has_serial_move_line">
+    <xpath expr="//td[@name='move_line_lot_qty_done']">
+      <div t-if="ml.product_packaging_id" class="text-secondary" groups="product.group_stock_packaging">
+        <span t-field="ml.product_packaging_id"/>
+        :
+        <span t-field="ml.product_packaging_qty_done"/>
+      </div>
+    </xpath>
   </template>
 </data>
```

## odoo/addons/stock_move_packaging_qty/views/stock_picking_form_view.xml

### odoo/addons/stock_move_packaging_qty/views/stock_picking_form_view.xml

```diff
@@ -2,12 +2,15 @@
 <data>
   <record id="stock_picking_view_form_packaging" model="ir.ui.view">
     <field name="name">stock.picking.form</field>
     <field name="model">stock.picking</field>
     <field name="inherit_id" ref="stock.view_picking_form"/>
     <field name="arch" type="xml">
       <xpath expr="//field[@name='move_ids_without_package']/tree/field[@name='product_packaging_id']" position="after">
-        <field name="product_packaging_qty" groups="product.group_stock_packaging" attrs="{                         'column_invisible': [                             ('parent.immediate_transfer', '=', True),                         ],                         'readonly': [                             '|',                             ('product_packaging_id', '=', False),                             ('is_initial_demand_editable', '=', False),                         ],                     }"/>
+        <field name="product_packaging_qty" groups="product.group_stock_packaging" attrs="{                         'readonly': [                             '|',                             ('product_packaging_id', '=', False),                             ('is_initial_demand_editable', '=', False),                         ],                     }"/>
+      </xpath>
+      <xpath expr="//field[@name='move_ids_without_package']/tree/field[@name='quantity_done']" position="before">
+        <field name="product_packaging_qty_done" groups="product.group_stock_packaging" attrs="{'invisible': [('product_packaging_id', '=', False)]}"/>
       </xpath>
     </field>
   </record>
 </data>
```

## Comparing `odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/METADATA` & `odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/METADATA`

 * *Files 4% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: odoo-addon-stock-move-packaging-qty
-Version: 16.0.1.1.1.2
+Version: 16.0.1.2.0
 Summary: Add packaging fields in the stock moves
 Home-page: https://github.com/OCA/stock-logistics-warehouse
 Author: ForgeFlow, Odoo Community Association (OCA)
 Author-email: support@odoo-community.org
 License: LGPL-3
 Platform: UNKNOWN
 Classifier: Programming Language :: Python
@@ -19,15 +19,15 @@
 ===================
 
 .. 
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
    !! This file is generated by oca-gen-addon-readme !!
    !! changes will be overwritten.                   !!
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
-   !! source digest: sha256:ac3969cedf86da72ca20a93812053d6d9054a9f5d8e0c896eab57fe2b835eefc
+   !! source digest: sha256:044e4631a8df264973ca2f2fa5b7e70fba5ddb61469340eda6628a868f7c58e0
    !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
 
 .. |badge1| image:: https://img.shields.io/badge/maturity-Beta-yellow.png
     :target: https://odoo-community.org/page/development-status
     :alt: Beta
 .. |badge2| image:: https://img.shields.io/badge/licence-LGPL--3-blue.png
     :target: http://www.gnu.org/licenses/lgpl-3.0-standalone.html
@@ -40,21 +40,30 @@
     :alt: Translate me on Weblate
 .. |badge5| image:: https://img.shields.io/badge/runboat-Try%20me-875A7B.png
     :target: https://runboat.odoo-community.org/builds?repo=OCA/stock-logistics-warehouse&target_branch=16.0
     :alt: Try me on Runboat
 
 |badge1| |badge2| |badge3| |badge4| |badge5|
 
-Add packaging fields in the stock moves and their reports.
+Add packaging fields in the stock moves, their lines and their reports.
 
 **Table of contents**
 
 .. contents::
    :local:
 
+Known issues / Roadmap
+======================
+
+* Maybe we should track also reserved packaging quantities?
+
+* Since we store done product packaging quantities in the stock move lines, we
+  should be able to use this information in quants to provide real
+  packaging-based stock data.
+
 Bug Tracker
 ===========
 
 Bugs are tracked on `GitHub Issues <https://github.com/OCA/stock-logistics-warehouse/issues>`_.
 In case of trouble, please check there if your issue has already been reported.
 If you spotted it first, help us to smash it by providing a detailed and welcomed
 `feedback <https://github.com/OCA/stock-logistics-warehouse/issues/new?body=module:%20stock_move_packaging_qty%0Aversion:%2016.0%0A%0A**Steps%20to%20reproduce**%0A-%20...%0A%0A**Current%20behavior**%0A%0A**Expected%20behavior**>`_.
```

## Comparing `odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/RECORD` & `odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/RECORD`

 * *Files 13% similar despite different names*

```diff
@@ -1,22 +1,25 @@
-odoo/addons/stock_move_packaging_qty/README.rst,sha256=LmRzdJhsJXAYpwRkzgjpsM-uEn1hHRh0j0kl0a0q8Uc,3302
+odoo/addons/stock_move_packaging_qty/README.rst,sha256=gDP3aKdWqFBjaa5T8RPWs0Z__OPM3caiMDiAGWGcjsA,3600
 odoo/addons/stock_move_packaging_qty/__init__.py,sha256=X9EJGOE2GtZbS0G82PtSXmWSZ_R8jEM0rlJTDliQjp4,21
-odoo/addons/stock_move_packaging_qty/__manifest__.py,sha256=4Cj7BiSc_2C3B2X2mOtLoqcXjEIFDRqcM9MZn_nEmj0,668
+odoo/addons/stock_move_packaging_qty/__manifest__.py,sha256=nPDeOlFZHrglEvOqKncyie09SPUykpZYI2rrdayOEsE,705
 odoo/addons/stock_move_packaging_qty/i18n/es.po,sha256=upA-9MMIr0zKaDmH89OuqvE8aDCEj0Ls19SS_fHmHlU,1120
 odoo/addons/stock_move_packaging_qty/i18n/it.po,sha256=KAxyerPWGaM7oO9IVrCl9sqecE1nQvbM-L6NBoEC1u8,1131
-odoo/addons/stock_move_packaging_qty/i18n/stock_move_packaging_qty.pot,sha256=AHjphxlfehB1JDO_u95ZhR_PyJ8IRUhPe8HxAEuszPU,854
+odoo/addons/stock_move_packaging_qty/i18n/stock_move_packaging_qty.pot,sha256=8bpT7WzF-ezgmolKlLyn60pswwb4hIKZ8FvXrh5C6KE,2671
 odoo/addons/stock_move_packaging_qty/migrations/15.0.0/pre-migrate.py,sha256=acA7iJh8_7x0PBMh5lXOleL8Ukz6qUicttrD16dyROw,659
-odoo/addons/stock_move_packaging_qty/models/__init__.py,sha256=JKM5aPOIm-dfz_sqkWHanPuPoSBKjGtEp6aHsgkacuQ,25
-odoo/addons/stock_move_packaging_qty/models/stock_move.py,sha256=frqJbl9PEWYQjy979G1I9NBnzi_MkQvApppp2z6H6e4,2330
+odoo/addons/stock_move_packaging_qty/models/__init__.py,sha256=7oN8BTrFbjHJhXxnvmHz3uUZg12wkNqwjbr49s2l5mk,55
+odoo/addons/stock_move_packaging_qty/models/stock_move.py,sha256=833EAc5cvlAtffnpi74CkpAXNt98Wnh6cCsIFVn6Rk8,5003
+odoo/addons/stock_move_packaging_qty/models/stock_move_line.py,sha256=B46HahZ3C4UyKhWjh9PnYdW19Z9QnnzPsyEfiPcPTIA,2158
 odoo/addons/stock_move_packaging_qty/readme/CONTRIBUTORS.rst,sha256=2y4t0zwve22AevqeRIEYcQmmZAXGNsspY9n3Cn8GaN8,137
-odoo/addons/stock_move_packaging_qty/readme/DESCRIPTION.rst,sha256=IK2vym6Dd68ZTWvFBfMetsLIRRt5ZXJeCuHclPUfCzQ,59
+odoo/addons/stock_move_packaging_qty/readme/DESCRIPTION.rst,sha256=mqR6_2S4So8qz5njvqMYcZKpkcefRMAgM3E8Y44K3Ag,72
+odoo/addons/stock_move_packaging_qty/readme/ROADMAP.rst,sha256=ABtO57KZat_kHLeo9cPNaqxTOcDmsKCPIlo8ho77Tao,237
 odoo/addons/stock_move_packaging_qty/static/description/icon.png,sha256=6xBPJauaFOF0KDHfHgQopSc28kKvxMaeoQFQWZtfZDo,9455
-odoo/addons/stock_move_packaging_qty/static/description/index.html,sha256=2oQ5kZTlkaRYapS559pGSBj38rGmzgL4NbiWG46A8f4,12722
+odoo/addons/stock_move_packaging_qty/static/description/index.html,sha256=lkHwMbCVvUu5VTXIgb3zfPj2mF7GvH17V5mJa5SmbLY,13253
 odoo/addons/stock_move_packaging_qty/tests/__init__.py,sha256=ndHmGR6Ce3xVIlSHGPNXXs_wB20hABVi99ClRh2NuiM,44
-odoo/addons/stock_move_packaging_qty/tests/test_stock_move_packaging_qty.py,sha256=1T7itH2PFlCgcgpV8fyKxEGQNlAHdccodvWWTCGpV9M,2787
-odoo/addons/stock_move_packaging_qty/views/report_stock_picking.xml,sha256=BUBeKv_0WeRPq62zLg3ehAiMiaRLH7ylb89aeGyaswI,1702
-odoo/addons/stock_move_packaging_qty/views/stock_move_tree_view.xml,sha256=6-FcXJKyVXwn_sXAKxi8F2sRMiVETFhoaJ6U3zT1OmA,947
-odoo/addons/stock_move_packaging_qty/views/stock_picking_form_view.xml,sha256=5JWZmiJEk1x_Jn3L2d946E_fDPagxEoxv7e5SRBsZmE,1140
-odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/METADATA,sha256=h7X6pFVHIH6vQDMbG-T6pEcgpwujxeNAuvUOxHPShUw,3884
-odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
-odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
-odoo_addon_stock_move_packaging_qty-16.0.1.1.1.2.dist-info/RECORD,,
+odoo/addons/stock_move_packaging_qty/tests/test_stock_move_packaging_qty.py,sha256=i9aumrNXZLQiK4hBuj6eNVr7talQHNh8qYT_0nQvbPk,3643
+odoo/addons/stock_move_packaging_qty/views/report_stock_picking.xml,sha256=ifVEXiJobh2RUDeehUPwdz4zq1kL7R3-WB8Rcc4cGak,4101
+odoo/addons/stock_move_packaging_qty/views/stock_move_line_view.xml,sha256=YSS0ho6aPd87se1mo0cCfzc5PpPGDSQCnP6h7p-72KI,2739
+odoo/addons/stock_move_packaging_qty/views/stock_move_view.xml,sha256=qCVkgx6DdQ9HcY3g8mRJIY_WaxsWk3WVmRxhM3eO6FI,3178
+odoo/addons/stock_move_packaging_qty/views/stock_picking_form_view.xml,sha256=P7Cxjzr77pi3h-d73YtspgtvEiYdTVwy0SK3zvJg034,1422
+odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/METADATA,sha256=wGVrr5uy2sBQyROwucqtrMqIlCjR3h1j8SsXKp8MNxk,4180
+odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/WHEEL,sha256=GJ7t_kWBFywbagK5eo9IoUwLW6oyOeTKmQ-9iHFVNxQ,92
+odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/top_level.txt,sha256=qBj40grFkGOfDZ2WDSw3y1RnDlgG0u8rP8pvGNdbz4w,5
+odoo_addon_stock_move_packaging_qty-16.0.1.2.0.dist-info/RECORD,,
```

