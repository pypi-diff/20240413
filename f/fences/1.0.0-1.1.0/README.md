# Comparing `tmp/fences-1.0.0.tar.gz` & `tmp/fences-1.1.0.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "fences-1.0.0.tar", last modified: Thu Mar 30 19:50:54 2023, max compression
+gzip compressed data, was "fences-1.1.0.tar", last modified: Sat Apr 13 15:51:35 2024, max compression
```

## Comparing `fences-1.0.0.tar` & `fences-1.1.0.tar`

### file list

```diff
@@ -1,39 +1,45 @@
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:54.605860 fences-1.0.0/
--rw-r--r--   0 runner    (1001) docker     (123)     1104 2023-03-30 19:50:38.000000 fences-1.0.0/LICENSE
--rw-r--r--   0 runner    (1001) docker     (123)     5489 2023-03-30 19:50:54.605860 fences-1.0.0/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (123)     3757 2023-03-30 19:50:38.000000 fences-1.0.0/README.md
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:54.601860 fences-1.0.0/fences/
--rw-r--r--   0 runner    (1001) docker     (123)      160 2023-03-30 19:50:38.000000 fences-1.0.0/fences/__init__.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:54.601860 fences-1.0.0/fences/core/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:38.000000 fences-1.0.0/fences/core/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     1830 2023-03-30 19:50:38.000000 fences-1.0.0/fences/core/debug.py
--rw-r--r--   0 runner    (1001) docker     (123)      710 2023-03-30 19:50:38.000000 fences-1.0.0/fences/core/exception.py
--rw-r--r--   0 runner    (1001) docker     (123)    13055 2023-03-30 19:50:38.000000 fences-1.0.0/fences/core/node.py
--rw-r--r--   0 runner    (1001) docker     (123)     1533 2023-03-30 19:50:38.000000 fences-1.0.0/fences/core/random.py
--rw-r--r--   0 runner    (1001) docker     (123)     1369 2023-03-30 19:50:38.000000 fences-1.0.0/fences/core/render.py
--rw-r--r--   0 runner    (1001) docker     (123)     2137 2023-03-30 19:50:38.000000 fences-1.0.0/fences/core/util.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:54.601860 fences-1.0.0/fences/json_schema/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:38.000000 fences-1.0.0/fences/json_schema/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      997 2023-03-30 19:50:38.000000 fences-1.0.0/fences/json_schema/config.py
--rw-r--r--   0 runner    (1001) docker     (123)      279 2023-03-30 19:50:38.000000 fences-1.0.0/fences/json_schema/exceptions.py
--rw-r--r--   0 runner    (1001) docker     (123)      568 2023-03-30 19:50:38.000000 fences-1.0.0/fences/json_schema/json_pointer.py
--rw-r--r--   0 runner    (1001) docker     (123)    14789 2023-03-30 19:50:38.000000 fences-1.0.0/fences/json_schema/parse.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:54.601860 fences-1.0.0/fences/regex/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:38.000000 fences-1.0.0/fences/regex/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)      154 2023-03-30 19:50:38.000000 fences-1.0.0/fences/regex/exception.py
--rw-r--r--   0 runner    (1001) docker     (123)   134067 2023-03-30 19:50:45.000000 fences-1.0.0/fences/regex/grammar.py
--rw-r--r--   0 runner    (1001) docker     (123)    11103 2023-03-30 19:50:38.000000 fences-1.0.0/fences/regex/parse.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:54.605860 fences-1.0.0/fences/xml_schema/
--rw-r--r--   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:38.000000 fences-1.0.0/fences/xml_schema/__init__.py
--rw-r--r--   0 runner    (1001) docker     (123)     2227 2023-03-30 19:50:38.000000 fences-1.0.0/fences/xml_schema/config.py
--rw-r--r--   0 runner    (1001) docker     (123)      271 2023-03-30 19:50:38.000000 fences-1.0.0/fences/xml_schema/exception.py
--rw-r--r--   0 runner    (1001) docker     (123)    18430 2023-03-30 19:50:38.000000 fences-1.0.0/fences/xml_schema/parse.py
--rw-r--r--   0 runner    (1001) docker     (123)     1121 2023-03-30 19:50:38.000000 fences-1.0.0/fences/xml_schema/xpath.py
-drwxr-xr-x   0 runner    (1001) docker     (123)        0 2023-03-30 19:50:54.601860 fences-1.0.0/fences.egg-info/
--rw-r--r--   0 runner    (1001) docker     (123)     5489 2023-03-30 19:50:54.000000 fences-1.0.0/fences.egg-info/PKG-INFO
--rw-r--r--   0 runner    (1001) docker     (123)      754 2023-03-30 19:50:54.000000 fences-1.0.0/fences.egg-info/SOURCES.txt
--rw-r--r--   0 runner    (1001) docker     (123)        1 2023-03-30 19:50:54.000000 fences-1.0.0/fences.egg-info/dependency_links.txt
--rw-r--r--   0 runner    (1001) docker     (123)       52 2023-03-30 19:50:54.000000 fences-1.0.0/fences.egg-info/entry_points.txt
--rw-r--r--   0 runner    (1001) docker     (123)        7 2023-03-30 19:50:54.000000 fences-1.0.0/fences.egg-info/top_level.txt
--rw-r--r--   0 runner    (1001) docker     (123)      624 2023-03-30 19:50:47.000000 fences-1.0.0/pyproject.toml
--rw-r--r--   0 runner    (1001) docker     (123)       38 2023-03-30 19:50:54.605860 fences-1.0.0/setup.cfg
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.731387 fences-1.1.0/
+-rw-r--r--   0 runner    (1001) docker     (127)     1104 2024-04-13 15:51:06.000000 fences-1.1.0/LICENSE
+-rw-r--r--   0 runner    (1001) docker     (127)     8482 2024-04-13 15:51:35.731387 fences-1.1.0/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)     6751 2024-04-13 15:51:06.000000 fences-1.1.0/README.md
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.727387 fences-1.1.0/fences/
+-rw-r--r--   0 runner    (1001) docker     (127)      214 2024-04-13 15:51:06.000000 fences-1.1.0/fences/__init__.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.727387 fences-1.1.0/fences/core/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:06.000000 fences-1.1.0/fences/core/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1830 2024-04-13 15:51:06.000000 fences-1.1.0/fences/core/debug.py
+-rw-r--r--   0 runner    (1001) docker     (127)      839 2024-04-13 15:51:06.000000 fences-1.1.0/fences/core/exception.py
+-rw-r--r--   0 runner    (1001) docker     (127)    14625 2024-04-13 15:51:06.000000 fences-1.1.0/fences/core/node.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2077 2024-04-13 15:51:06.000000 fences-1.1.0/fences/core/random.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1369 2024-04-13 15:51:06.000000 fences-1.1.0/fences/core/render.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2137 2024-04-13 15:51:06.000000 fences-1.1.0/fences/core/util.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.731387 fences-1.1.0/fences/grammar/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:06.000000 fences-1.1.0/fences/grammar/__ini__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     4173 2024-04-13 15:51:06.000000 fences-1.1.0/fences/grammar/convert.py
+-rw-r--r--   0 runner    (1001) docker     (127)      159 2024-04-13 15:51:06.000000 fences-1.1.0/fences/grammar/exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2752 2024-04-13 15:51:06.000000 fences-1.1.0/fences/grammar/types.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.731387 fences-1.1.0/fences/json_schema/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:06.000000 fences-1.1.0/fences/json_schema/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      442 2024-04-13 15:51:06.000000 fences-1.1.0/fences/json_schema/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)      279 2024-04-13 15:51:06.000000 fences-1.1.0/fences/json_schema/exceptions.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1988 2024-04-13 15:51:06.000000 fences-1.1.0/fences/json_schema/json_pointer.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18746 2024-04-13 15:51:06.000000 fences-1.1.0/fences/json_schema/normalize.py
+-rw-r--r--   0 runner    (1001) docker     (127)    17154 2024-04-13 15:51:06.000000 fences-1.1.0/fences/json_schema/parse.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.731387 fences-1.1.0/fences/regex/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:06.000000 fences-1.1.0/fences/regex/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)      154 2024-04-13 15:51:06.000000 fences-1.1.0/fences/regex/exception.py
+-rw-r--r--   0 runner    (1001) docker     (127)   143944 2024-04-13 15:51:14.000000 fences-1.1.0/fences/regex/grammar.py
+-rw-r--r--   0 runner    (1001) docker     (127)    11104 2024-04-13 15:51:06.000000 fences-1.1.0/fences/regex/parse.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.731387 fences-1.1.0/fences/xml_schema/
+-rw-r--r--   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:06.000000 fences-1.1.0/fences/xml_schema/__init__.py
+-rw-r--r--   0 runner    (1001) docker     (127)     2227 2024-04-13 15:51:06.000000 fences-1.1.0/fences/xml_schema/config.py
+-rw-r--r--   0 runner    (1001) docker     (127)      271 2024-04-13 15:51:06.000000 fences-1.1.0/fences/xml_schema/exception.py
+-rw-r--r--   0 runner    (1001) docker     (127)    18430 2024-04-13 15:51:06.000000 fences-1.1.0/fences/xml_schema/parse.py
+-rw-r--r--   0 runner    (1001) docker     (127)     1121 2024-04-13 15:51:06.000000 fences-1.1.0/fences/xml_schema/xpath.py
+drwxr-xr-x   0 runner    (1001) docker     (127)        0 2024-04-13 15:51:35.731387 fences-1.1.0/fences.egg-info/
+-rw-r--r--   0 runner    (1001) docker     (127)     8482 2024-04-13 15:51:35.000000 fences-1.1.0/fences.egg-info/PKG-INFO
+-rw-r--r--   0 runner    (1001) docker     (127)      891 2024-04-13 15:51:35.000000 fences-1.1.0/fences.egg-info/SOURCES.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        1 2024-04-13 15:51:35.000000 fences-1.1.0/fences.egg-info/dependency_links.txt
+-rw-r--r--   0 runner    (1001) docker     (127)       52 2024-04-13 15:51:35.000000 fences-1.1.0/fences.egg-info/entry_points.txt
+-rw-r--r--   0 runner    (1001) docker     (127)        7 2024-04-13 15:51:35.000000 fences-1.1.0/fences.egg-info/top_level.txt
+-rw-r--r--   0 runner    (1001) docker     (127)      624 2024-04-13 15:51:33.000000 fences-1.1.0/pyproject.toml
+-rw-r--r--   0 runner    (1001) docker     (127)       38 2024-04-13 15:51:35.731387 fences-1.1.0/setup.cfg
```

### Comparing `fences-1.0.0/LICENSE` & `fences-1.1.0/LICENSE`

 * *Files identical despite different names*

### Comparing `fences-1.0.0/fences/core/debug.py` & `fences-1.1.0/fences/core/debug.py`

 * *Files identical despite different names*

### Comparing `fences-1.0.0/fences/core/exception.py` & `fences-1.1.0/fences/core/exception.py`

 * *Files 19% similar despite different names*

```diff
@@ -1,31 +1,45 @@
 class FencesException(Exception):
     """
     Base class of all exceptions thrown by fences.
     """
     pass
 
+
 class ResolveReferenceException(FencesException):
     """
     Thrown by Node.resolve()
     """
+
     def __init__(self, message: str, node_id: str) -> None:
         super().__init__(message)
         self.node_id = node_id
 
+
 class ParseException(FencesException):
     """
     Base class for all exceptions occurring during schema parsing
     """
     pass
 
+
 class InternalException(FencesException):
     """
     Raised if fences reaches an invalid internal state.
     This hopefully never happens.
     """
     pass
 
+
 class ConfigException(FencesException):
     """
     All config related exceptions
-    """
+    """
+    pass
+
+
+class NormalizationException(FencesException):
+    pass
+
+
+class JsonPointerException(FencesException):
+    pass
```

### Comparing `fences-1.0.0/fences/core/node.py` & `fences-1.1.0/fences/core/node.py`

 * *Files 13% similar despite different names*

```diff
@@ -13,15 +13,16 @@
 
 
 class Node:
 
     def __init__(self, id: Optional[str] = None) -> None:
         self.id = id
         self.incoming_transitions: List["IncomingTransition"] = []
-        self._num_paths: int = 0
+        self._has_valid_successors: False
+        self._has_invalid_successors: False
 
     def apply(self, data: any) -> any:
         """
         Applies to node's operation to the given data
         (Meant to be overridden)
         """
         raise NotImplemented()  # pragma: no cover
@@ -59,15 +60,16 @@
         """
 
         # Collect references
         nodes_by_id: Dict[str, Node] = {}
 
         def insert(node: Node):
             if node.id and node.id in nodes_by_id:
-                raise ResolveReferenceException(f"id '{node.id}' exists multiple times", node.id)
+                raise ResolveReferenceException(
+                    f"id '{node.id}' exists multiple times", node.id)
             nodes_by_id[node.id] = node
         for node in nodes:
             for n in node.items():
                 insert(n)
         for n in self.items():
             insert(n)
 
@@ -91,145 +93,183 @@
                             IncomingTransition(node, idx)
                         )
                 for transition in node.outgoing_transitions:
                     _resolve(transition.target)
         _resolve(root)
         return root
 
-    def execute(self, path: Path, data = None) -> any:
+    def execute(self, path: Path, data=None) -> any:
         """
         Executes a path on the node
         """
         idx, result = self._execute(path, 0, data)
-        if idx != len(path): # pragma: no cover
+        if idx != len(path):  # pragma: no cover
             raise InternalException("Path not fully consumed")
         return result
 
     def _execute(self, path: Path, path_idx: int, data: any) -> Tuple[int, any]:
-        if path_idx > len(path): # pragma: no cover
-            raise InternalException(f"path_idx ({path_idx}) > len(path) ({len(path)})")
+        if path_idx > len(path):  # pragma: no cover
+            raise InternalException(
+                f"path_idx ({path_idx}) > len(path) ({len(path)})")
 
         data = self.apply(data)
 
         if not isinstance(self, Decision):
             return path_idx, data
 
         if self.all_transitions:
             result = None
             for transition in self.outgoing_transitions:
-                path_idx, result = transition.target._execute(path, path_idx, data)
+                path_idx, result = transition.target._execute(
+                    path, path_idx, data)
             # return the result of the last node
             return path_idx, result
         else:
             idx = path[path_idx]
             return self.outgoing_transitions[idx].target._execute(path, path_idx+1, data)
 
     def _generate(self, result_path: Path, already_reached: Set, on_valid_path: bool):
         already_reached.add(id(self))
-        self._num_paths += 1
 
         if isinstance(self, Leaf) and self.is_valid != on_valid_path:
             v = 'valid' if on_valid_path else 'invalid'
-            raise InternalException(f"Decision without {v} leaf detected! {self.description()}")
+            raise InternalException(
+                f"Decision without {v} leaf detected! {self.description()}")
 
         if not isinstance(self, Decision):
             return
         if not self.outgoing_transitions:
             return
 
         if self.all_transitions:
             for transition in self.outgoing_transitions:
                 v = not on_valid_path if transition.is_inverting else on_valid_path
+                transition._num_paths += 1
                 transition.target._generate(result_path, already_reached, v)
         else:
             selected = None
             min_paths = float('inf')
             for idx, transition in enumerate(self.outgoing_transitions):
                 target = transition.target
-                if target._num_paths < min_paths:
-                    if isinstance(target, Leaf):
-                        v = not on_valid_path if transition.is_inverting else on_valid_path
-                        if target.is_valid != v: continue
+                if transition._num_paths < min_paths:
+                    if on_valid_path and not target._has_valid_successors:
+                        continue
+                    if not on_valid_path and not target._has_invalid_successors:
+                        continue
                     selected = idx
-                    min_paths = target._num_paths
+                    min_paths = transition._num_paths
             if selected is None:
                 v = 'valid' if on_valid_path else 'invalid'
-                raise InternalException(f"Decision without {v} leaf detected!")
+                raise InternalException(
+                    f"Decision without {v} leaf detected ' (id={self.id})")
 
             result_path.append(selected)
-            v = not on_valid_path if self.outgoing_transitions[selected].is_inverting else on_valid_path
-            self.outgoing_transitions[selected].target._generate(result_path, already_reached, v)
+            transition = self.outgoing_transitions[selected]
+            transition._num_paths += 1
+            v = not on_valid_path if transition.is_inverting else on_valid_path
+            transition.target._generate(result_path, already_reached, v)
 
     def _backward(self, path: Path, already_reached: Set) -> Tuple[bool, "Node"]:
         already_reached.add(id(self))
-        self._num_paths += 1
 
         if not self.incoming_transitions:
             return False, self
 
         predecessor_transition = None
         min_paths = float('inf')
         for transition in self.incoming_transitions:
-            if transition.source._num_paths < min_paths:
-                min_paths = transition.source._num_paths
+            n = transition.outgoing_transition()._num_paths
+            if n < min_paths:
+                min_paths = n
                 predecessor_transition = transition
         path.append(predecessor_transition.outgoing_idx)
-        is_inverting, root = predecessor_transition.source._backward(path, already_reached)
+        predecessor_transition.outgoing_transition()._num_paths += 1
+        is_inverting, root = predecessor_transition.source._backward(
+            path, already_reached)
         if predecessor_transition.outgoing_transition().is_inverting:
             return not is_inverting, root
         else:
             return is_inverting, root
 
     def _forward(self, backward_path: Path, forward_path: Path, visited: Set, on_valid_path: bool):
-        if len(backward_path) == 0: return
+        if len(backward_path) == 0:
+            return
         assert isinstance(self, Decision)
         path_idx = backward_path.pop(-1)
         if self.all_transitions:
             for idx, transition in enumerate(self.outgoing_transitions):
                 v = not on_valid_path if transition.is_inverting else on_valid_path
                 if idx == path_idx:
-                    transition.target._forward(backward_path, forward_path, visited, v)
+                    transition.target._forward(
+                        backward_path, forward_path, visited, v)
                 else:
+                    transition._num_paths += 1
                     transition.target._generate(forward_path, visited, v)
         else:
-            v = not on_valid_path if self.outgoing_transitions[path_idx].is_inverting else on_valid_path
+            transition = self.outgoing_transitions[path_idx]
+            v = not on_valid_path if transition.is_inverting else on_valid_path
             forward_path.append(path_idx)
-            self.outgoing_transitions[path_idx].target._forward(backward_path, forward_path, visited, v)
+            transition._num_paths += 1
+            transition.target._forward(backward_path, forward_path, visited, v)
+
+    def _reset_stats(self, visited: Set[str]):
+        if id(self) in visited:
+            return
+        visited.add(id(self))
+
+        if isinstance(self, Leaf):
+            self._has_valid_successors = self.is_valid
+            self._has_invalid_successors = not self.is_valid
+        else:
+            assert isinstance(self, Decision)
+
+            self._has_valid_successors = False
+            self._has_invalid_successors = False
+            for i in self.outgoing_transitions:
+                i.target._reset_stats(visited)
+                self._has_valid_successors = self._has_valid_successors or i.target._has_valid_successors
+                self._has_invalid_successors = self._has_invalid_successors or i.target._has_invalid_successors
 
     def generate_paths(self) -> Generator[ResultEntry, None, None]:
         """
         Generates as many paths until all nodes in the graph are reached.
         Execute a path using execute().
         """
 
         valid_nodes: List[Leaf] = []
         invalid_nodes: List[Leaf] = []
 
         # Reset counter, collect leafs
         for node in self.items():
-            node._num_paths = 0
             if isinstance(node, Leaf):
                 if node.is_valid:
                     valid_nodes.append(node)
                 else:
                     invalid_nodes.append(node)
+            if isinstance(node, Decision):
+                for i in node.outgoing_transitions:
+                    i._num_paths = 0
 
         to_visit = valid_nodes + invalid_nodes
 
+        visited = set()
+        self._reset_stats(visited)
+
         while to_visit:
+            # print(f"{len(to_visit)} nodes remaining")
             next = to_visit[0]
 
             # Generate a path to the root
             backward_path: Path = []
             visited = set()
             is_inverting, root = next._backward(backward_path, visited)
 
             # Follow path to the target node
             forward_path = []
-            root._forward(backward_path, forward_path, visited, True )
+            root._forward(backward_path, forward_path, visited, True)
 
             # Yield
             is_valid = not next.is_valid if is_inverting else next.is_valid
             yield ResultEntry(next, forward_path, is_valid)
 
             # Remove the visited nodes
             path_idx = 0
@@ -252,37 +292,39 @@
         Raises a KeyError if the id does not exist.
         """
         for i in self.items():
             if i.id == id:
                 return i
         raise KeyError("No such id '{id}'")
 
+
 class Leaf(Node):
-    def __init__(self, id: str, is_valid: bool) -> None:
+    def __init__(self, id: str = None, is_valid: bool = True) -> None:
         super().__init__(id)
         self.is_valid = is_valid
 
 
 class OutgoingTransition:
     def __init__(self, target: Node, is_inverting: bool) -> None:
         self.target = target
         self.is_inverting = is_inverting
+        self._num_paths: int = 0
 
 
 class IncomingTransition:
     def __init__(self, source: "Decision", idx: int) -> None:
         self.source = source
         self.outgoing_idx = idx
 
     def outgoing_transition(self) -> OutgoingTransition:
         return self.source.outgoing_transitions[self.outgoing_idx]
 
 
 class Decision(Node):
-    def __init__(self, id: str, all_transitions: bool = False) -> None:
+    def __init__(self, id: str = None, all_transitions: bool = False) -> None:
         super().__init__(id)
         self.all_transitions = all_transitions
         self.outgoing_transitions: List[OutgoingTransition] = []
 
     def add_transition(self, target: Node, is_inverting: bool = False):
         target.incoming_transitions.append(
             IncomingTransition(self, len(self.outgoing_transitions))
@@ -300,25 +342,30 @@
             yield from transition.target._items(already_visited)
 
     def optimize(self):
         visited = set()
         self._optimize(visited)
 
     def _optimize(self, visited: Set):
-        if id(self) in visited: return
+        if id(self) in visited:
+            return
         visited.add(id(self))
 
         merge_with = self
         is_inverting = False
         while True:
-            if len(merge_with.outgoing_transitions) != 1: break
+            if len(merge_with.outgoing_transitions) != 1:
+                break
             successor = merge_with.outgoing_transitions[0].target
-            if len(successor.incoming_transitions) != 1: break
-            if not isinstance(successor, NoOpDecision): break
-            if id(successor) in visited: break
+            if len(successor.incoming_transitions) != 1:
+                break
+            if not isinstance(successor, NoOpDecision):
+                break
+            if id(successor) in visited:
+                break
             if merge_with.outgoing_transitions[0].is_inverting:
                 is_inverting = not is_inverting
             merge_with = successor
 
         if merge_with is not self:
             self.outgoing_transitions = merge_with.outgoing_transitions
             self.all_transitions = merge_with.all_transitions
@@ -330,32 +377,35 @@
                     if j.source is merge_with:
                         j.source = self
 
         for i in self.outgoing_transitions:
             if isinstance(i.target, Decision):
                 i.target._optimize(visited)
 
+
 class Reference(Node):
     def __init__(self, id: str, reference: str) -> None:
         super().__init__(id)
         self.reference = reference
 
     def target(self, nodes_by_id: Dict[str, "Node"]) -> Node:
         try:
             return nodes_by_id[self.reference].target(nodes_by_id)
         except KeyError as e:
-            raise ResolveReferenceException(f"Unknown reference '{self.reference}'", self.reference)
+            raise ResolveReferenceException(
+                f"Unknown reference '{self.reference}'", self.reference)
 
 
 class NoOpDecision(Decision):
     def apply(self, data: any) -> any:
         return data
 
     def description(self) -> Optional[str]:
         return "(Do nothing)"
 
+
 class NoOpLeaf(Leaf):
     def apply(self, data: any) -> any:
         return data
 
     def description(self) -> Optional[str]:
         return "(do nothing)"
```

### Comparing `fences-1.0.0/fences/core/random.py` & `fences-1.1.0/fences/core/random.py`

 * *Files 17% similar despite different names*

```diff
@@ -22,15 +22,15 @@
     else:
         graph = parse(str(properties.pattern))
         result = None
         for i in graph.generate_paths():
             if i.is_valid:
                 result = graph.execute(i.path)
                 break
-        if result is None: # pragma: no cover
+        if result is None:  # pragma: no cover
             raise InternalException(
                 f"Failed to generate string for '{properties.pattern}'")
         if properties.max_length is not None and len(result) > properties.max_length:
             raise InternalException(
                 f"Cannot generate a string for {properties.pattern} with is not longer than {properties.max_length}")
         padding = max(properties.min_length - len(result), 0)
         return "x" * padding + result
@@ -39,7 +39,23 @@
 def generate_random_number(min_value: Optional[int] = None, max_value: Optional[int] = None):
     if min_value is None:
         min_value = -1000
     if max_value is None:
         max_value = +1000
     assert min_value <= max_value
     return random.randint(min_value, max_value)
+
+
+def generate_random_format(format: str) -> str:
+    # From https://json-schema.org/understanding-json-schema/reference/string#built-in-formats
+    samples = {
+        "date-time": "2018-11-13T20:20:39+00:00",
+        "time": "20:20:39+00:00",
+        "date": "2018-11-13",
+        "duration": "P3D",
+        "email": "test@example.com",
+        "hostname": "example.com",
+        "ipv4": "127.0.0.1",
+        "ipv6": "2001:db8::8a2e:370:7334",
+        "uuid": "3e4666bf-d5e5-4aa7-b8ce-cefe41c7568a",
+    }
+    return samples.get(format, "")
```

### Comparing `fences-1.0.0/fences/core/render.py` & `fences-1.1.0/fences/core/render.py`

 * *Files identical despite different names*

### Comparing `fences-1.0.0/fences/core/util.py` & `fences-1.1.0/fences/core/util.py`

 * *Files identical despite different names*

### Comparing `fences-1.0.0/fences/json_schema/parse.py` & `fences-1.1.0/fences/json_schema/parse.py`

 * *Files 10% similar despite different names*

```diff
@@ -1,14 +1,14 @@
-import re
 from typing import Set, Dict, List, Optional, Union
 
 from .exceptions import JsonSchemaException
-from .config import Config, KeyHandler, StringGenerators, BoolValues
+from .config import Config
 from .json_pointer import JsonPointer
-from ..core.random import generate_random_string, StringProperties
+from ..core.random import generate_random_string, StringProperties, generate_random_format
+from .normalize import normalize
 
 from fences.core.node import Decision, Leaf, Node, Reference, NoOpLeaf, NoOpDecision
 
 from dataclasses import dataclass
 
 
 @dataclass
@@ -68,361 +68,414 @@
 
     def description(self) -> str:
         return "Append item"
 
 
 class CreateObjectNode(Decision):
     def apply(self, data: KeyReference) -> KeyReference:
-        # Needed to handle allOf properly
-        if data.has_value:
-            return data.ref[data.key]
         value = {}
         data.set(value)
         return value
 
     def description(self) -> str:
         return "Create empty dict"
 
+
 class CreateInputNode(Decision):
     def __init__(self) -> None:
         super().__init__(None, False)
 
     def apply(self, data: any) -> any:
         return KeyReference({}, '')
 
     def description(self) -> Optional[str]:
         return "Create input"
 
+
 class FetchOutputNode(Leaf):
     def __init__(self) -> None:
         super().__init__(None, True)
 
     def apply(self, data: KeyReference) -> any:
         return data.ref[data.key]
 
     def description(self) -> Optional[str]:
         return "Fetch output"
 
+
 def default_config():
     return Config(
-        key_handlers=[
-            KeyHandler('if', parse_if),
-            KeyHandler('allOf', parse_all_of),
-            KeyHandler('oneOf', parse_one_of),
-            KeyHandler('$ref', parse_reference),
-            KeyHandler('enum', parse_enum),
-            KeyHandler('type', parse_type),
-            KeyHandler('properties', parse_object),
-            KeyHandler('not', parse_not),
-            KeyHandler('const', parse_const),
-        ],
+        key_handlers={
+            'enum': parse_enum,
+            'NOT_enum': parse_not_enum,
+            '$ref': parse_reference,
+        },
         type_handlers={
             'object': parse_object,
             'string': parse_string,
             'array': parse_array,
             'boolean': parse_boolean,
+            'number': parse_number,
+            'null': parse_null,
+        },
+        default_samples={
+            'string': ["string"],
+            'number': [42],
+            'null': [None],
+            'boolean': [True, False],
+            'object': [{}],
+            'array': [[]]
         },
-        string_generators=StringGenerators(
-            valid=[
-                generate_random_string,
-            ],
-            invalid=[
-                lambda _: None,
-            ]
-        ),
-        bool_values=BoolValues(
-            valid=[
-                True,
-                False,
-            ],
-            invalid=[
-                42,
-                None,
-                'INVALID',
-            ]
-        ),
-        invalid_array_values=[
-            True,
-            False,
-            None,
-            {},
-            'INVALID'
-        ]
+        normalize=True,
     )
 
 
+_NO_DEFAULT = object()
+
+
 def _read_typesafe(data: dict, key: str, unparsed_keys: Set[str], type, typename, pointer: JsonPointer, default: any):
     if key not in data:
-        if default is None:
+        if default is _NO_DEFAULT:
             raise JsonSchemaException(f"'{key}' is missing at {pointer}", None)
         else:
             return default
     value = data[key]
     if not isinstance(value, type):
         raise JsonSchemaException(f"{value} is not a {typename} at {pointer}", None)
     unparsed_keys.remove(key)
     return value
 
 
-def _read_int(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=None) -> str:
-    return _read_typesafe(data, key, unparsed_keys, int, 'int', pointer, default)
+def _read_float(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=_NO_DEFAULT) -> str:
+    return _read_typesafe(data, key, unparsed_keys, (int, float), 'float', pointer, default)
+
+
+def _read_int(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=_NO_DEFAULT) -> str:
+    v = _read_typesafe(data, key, unparsed_keys, (int, float), 'int', pointer, default)
+    if v is default:
+        return v
+    if isinstance(v, float):
+        if int(v) != v:
+            raise JsonSchemaException(f"{v} is not a 'int' at {pointer}", None)
+        v = int(v)
+    return v
 
 
-def _read_string(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=None) -> str:
+def _read_string(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=_NO_DEFAULT) -> str:
     return _read_typesafe(data, key, unparsed_keys, str, 'string', pointer, default)
 
 
-def _read_dict(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=None) -> dict:
+def _read_dict(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=_NO_DEFAULT) -> dict:
     return _read_typesafe(data, key, unparsed_keys, dict, 'dict', pointer, default)
 
 
-def _read_list(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=None) -> list:
+def _read_list(data: dict, key: str, unparsed_keys: Set[str], pointer: JsonPointer, default=_NO_DEFAULT) -> list:
     return _read_typesafe(data, key, unparsed_keys, list, 'list', pointer, default)
 
-def parse_if(data, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    if_data = _read_dict(data, 'if', unparsed_keys, path)
-    if_node = parse_dict(if_data, config, path + 'if')
-    then_data = _read_dict(data, 'then', unparsed_keys, path)
-    then_node = parse_dict(then_data, config, path + 'then')
-    if 'else' in data:
-        else_data = _read_dict(data, 'else', unparsed_keys, path)
-        else_node = parse_dict(else_data, config, path + 'else')
-    else:
-        else_node = None
-    root = NoOpDecision(str(path), False)
-
-    # IF: valid, THEN: valid
-    sub_root_0 = NoOpDecision(None, True)
-    sub_root_0.add_transition(if_node)
-    sub_root_0.add_transition(then_node)
-    root.add_transition(sub_root_0)
-
-    # IF: invalid, THEN: invalid
-    sub_root_1 = NoOpDecision(None, True)
-    sub_root_1.add_transition(if_node, True)
-    sub_root_1.add_transition(then_node, True)
-    root.add_transition(sub_root_1)
-
-    if else_node:
-        # IF: valid ELSE: invalid
-        sub_root_2 = NoOpDecision(None, True)
-        sub_root_2.add_transition(if_node)
-        sub_root_2.add_transition(else_node, True)
-        root.add_transition(sub_root_2)
-
-        # IF: invalid ELSE: valid
-        sub_root_3 = NoOpDecision(None, True)
-        sub_root_3.add_transition(if_node, True)
-        sub_root_3.add_transition(else_node)
-        root.add_transition(sub_root_3)
-
-    return root
 
 def parse_const(data, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
     value = data['const']
     unparsed_keys.remove('const')
 
     root = NoOpDecision(str(path), False)
     root.add_transition(SetValueLeaf(None, True, value))
     root.add_transition(SetValueLeaf(None, False, f"{value}_INvALID"))
     return root
 
-def _parse_aggregation(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer, key: str,  all_transitions: bool) -> Node:
-    root = NoOpDecision(str(path))
-    root.all_transitions = all_transitions
-    items = _read_list(data, key, unparsed_keys, path)
-    # TODO: although 'type' does not make sense here, we need to skip it since many schemas use it
-    _read_string(data, 'type', unparsed_keys, path, '')
-    for idx, item in enumerate(items):
-        target = parse_dict(item, config, path + 'allOf' + idx)
-        root.add_transition(target)
-    return root
-
 
-def parse_one_of(data, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    return _parse_aggregation(data, config, unparsed_keys, path, 'oneOf', False)
-
-
-def parse_all_of(data, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    # TODO: this works for objects, but not for strings etc.
-    return _parse_aggregation(data, config, unparsed_keys, path, 'allOf', True)
+def parse_not_enum(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
+    values = _read_list(data, 'NOT_enum', unparsed_keys, path)
+    return _parse_enum(values, path, True)
 
 
 def parse_enum(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    # TODO: use type for something?
-    _read_string(data, 'type', unparsed_keys, path, '')
     values = _read_list(data, 'enum', unparsed_keys, path)
+    return _parse_enum(values, path, False)
+
+
+def _parse_enum(values: list, path: JsonPointer, invert: bool) -> Node:
     root = NoOpDecision(str(path), False)
     max_length = 0
     for value in values:
-        root.add_transition(SetValueLeaf(None, True, value))
+        root.add_transition(SetValueLeaf(None, not invert, value))
         max_length = max(max_length, len(str(value)))
     root.add_transition(SetValueLeaf(
-        None, False, "#" * (max_length+1)))
+        None, invert, "#" * (max_length+1)))
     return root
 
-def parse_not(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    d = _read_dict(data, 'not', unparsed_keys, path)
-    subroot = parse_dict(d, config, path + 'not')
-    root = NoOpDecision(str(path), False)
-    root.add_transition(subroot, True)
-    return root
 
 def parse_reference(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
     ref = _read_string(data, '$ref', unparsed_keys, path)
     return Reference(str(path), ref)
 
 
 def parse_object(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
     props = _read_dict(data, 'properties', unparsed_keys, path, {})
 
-    required: Set[str] = set()
-    for idx, token in enumerate(_read_list(data, 'required', unparsed_keys, path, [])):
+    additional_props = _read_dict(data, 'additionalProperties', unparsed_keys, path, {})
+    min_properties = _read_int(data, 'minProperties', unparsed_keys, path, 0)
+    max_properties = _read_int(data, 'maxProperties', unparsed_keys, path, 0)
+    pattern_properties = _read_dict(data, 'patternProperties', unparsed_keys, path, {})
+    property_names = _read_dict(data, 'propertyNames', unparsed_keys, path, {})
+    unevaluated_properties = _read_dict(data, 'unevaluatedProperties', unparsed_keys, path, {})
+    depended_required = _read_dict(data, 'dependentRequired', unparsed_keys, path, [])
+    dependent_schema = _read_dict(data, 'dependentSchemas', unparsed_keys, path, {})
+    required = _read_list(data, 'required', unparsed_keys, path, [])
+
+    required_props: Set[str] = set()
+    for idx, token in enumerate(required):
         sub_path = path + 'required' + idx
         if not isinstance(token, str):
             raise JsonSchemaException(f"'{token}' is not a string at ${sub_path}", sub_path)
-        if token in required:
+        if token in required_props:
             raise JsonSchemaException(f"Duplicate token '{token}' in ${sub_path}", sub_path)
-        if token not in props:
-            raise JsonSchemaException(f"Token '{token}' is not a property at ${sub_path}", sub_path)
-        required.add(token)
+        required_props.add(token)
 
-    root = CreateObjectNode(str(path))
-    root.all_transitions = True
+    super_root = NoOpDecision(f"{path}_OBJECT")
 
+    # Properties
+    root = CreateObjectNode(None, True)
+    super_root.add_transition(root)
     for key, value in props.items():
-        property_root = NoOpDecision(None, False)
+        sub_path = path + 'properties' + key
+
+        property_root = NoOpDecision(f"{sub_path}__PROP", False)
         root.add_transition(property_root)
 
         # Insert property (always valid)
-        sub_path = path + 'properties' + key
-        key_node = InsertKeyNode(None, key)
+        key_node = InsertKeyNode(f"{sub_path}__KEY", key)
         property_root.add_transition(key_node)
         value_node = parse_dict(value, config, sub_path)
         key_node.add_transition(value_node)
 
         # Omit property (valid if not required)
-        property_root.add_transition(NoOpLeaf(None, is_valid=key not in required))
+        if key in required_props:
+            property_root.add_transition(NoOpLeaf(None, is_valid=False))
+            required_props.remove(key)
+        else:
+            property_root.add_transition(NoOpLeaf(None, is_valid=True))
 
-    return root
+    # All remaining properties only mentioned in 'required'
+    for key in required_props:
+        sub_path = path + 'required' + key
+        property_root = NoOpDecision(f"{sub_path}__PROP", False)
+        root.add_transition(property_root)
+        key_node = InsertKeyNode(f"{sub_path}__KEY", key)
+        property_root.add_transition(key_node)
+        value_node = generate_default_samples(config)
+        key_node.add_transition(value_node)
+
+    if not root.outgoing_transitions:
+        root.add_transition(NoOpLeaf(None, True))
+
+    return super_root
 
 
 def parse_string(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    root = NoOpDecision(str(path))
+    root = NoOpDecision()
     pattern = _read_string(data, 'pattern', unparsed_keys, path, '')
+    content_media_type = _read_string(data, 'contentMediaType', unparsed_keys, path, '')
+    content_encoding = _read_string(data, 'contentEncoding', unparsed_keys, path, '')
+    content_schema = _read_dict(data, 'contentSchema', unparsed_keys, path, {})
     if pattern:
         regex = pattern
     else:
         regex = None
     # TODO: use format
-    format = _read_string(data, 'format', unparsed_keys, path, '')
-    properties = StringProperties(
-        min_length=_read_int(data, 'minLength', unparsed_keys, path, 0),
-        max_length=_read_int(data, 'maxLength', unparsed_keys, path, float("inf")),
-        pattern=regex,
-    )
-    for generator in config.string_generators.valid:
-        value = generator(properties)
-        root.add_transition(SetValueLeaf(None, True, value))
-    for generator in config.string_generators.invalid:
-        value = generator(properties)
-        root.add_transition(SetValueLeaf(None, False, value))
+    format = _read_string(data, 'format', unparsed_keys, path, None)
+    if format is None:
+        properties = StringProperties(
+            min_length=_read_int(data, 'minLength', unparsed_keys, path, 0),
+            max_length=_read_int(data, 'maxLength', unparsed_keys, path, float("inf")),
+            # pattern=regex,
+        )
+        value = generate_random_string(properties)
+    else:
+        value = generate_random_format(format)
+    root.add_transition(SetValueLeaf(None, True, value))
     return root
 
+def generate_default_samples(config: Config) -> Node:
+    items_node = NoOpDecision(None, False)
+    for samples in config.default_samples.values():
+        for sample in samples:
+            items_node.add_transition(SetValueLeaf(None, True, sample))
+    return items_node
+
+
+def parse_array(data: dict, config: Config, unparsed_keys: Set[str], pointer: JsonPointer) -> Node:
+    min_items = _read_int(data, 'minItems', unparsed_keys, pointer, 1)
+    max_items = _read_int(data, 'maxItems', unparsed_keys, pointer, None)
+    prefix_items = _read_list(data, 'prefixItems', unparsed_keys, pointer, {})
+    unique_items = _read_dict(data, 'uniqueItems', unparsed_keys, pointer, {})
+    contains = _read_dict(data, 'contains', unparsed_keys, pointer, None)
+    min_contains = _read_int(data, 'minContains', unparsed_keys, pointer, 1)
+    max_contains = _read_int(data, 'maxContains', unparsed_keys, pointer, None)
+
+    items = _read_dict(data, 'items', unparsed_keys, pointer, None)
+
+    root_node = CreateArrayNode(f"{pointer}_ARRAY", True)
+
+    # Prefix items
+    if prefix_items:
+        prefix_items_node = NoOpDecision(f"{pointer}_PREFIX", True)
+        root_node.add_transition(prefix_items_node)
+        for idx, item in enumerate(prefix_items):
+            node = parse_dict(item, config, pointer + 'prefixItems' + idx)
+            append_node = AppendArrayItemNode(None)
+            append_node.add_transition(node)
+            prefix_items_node.add_transition(append_node)
+
+    # Contained items
+    if min_contains and contains is not None:
+        contains_items_node = NoOpDecision(f"{pointer}_CONTAINS", True)
+        root_node.add_transition(contains_items_node)
+        node = parse_dict(contains, config, pointer + 'contains')
+        append_node = AppendArrayItemNode(None)
+        append_node.add_transition(node)
+        for _ in range(min_contains):
+            contains_items_node.add_transition(append_node)
+        min_items = max(0, min_items - min_contains)
+
+    # Items
+    if min_items:
+        all_items_node = NoOpDecision(f"{pointer}_ITEMS", True)
+        root_node.add_transition(all_items_node)
+        if items is None:
+            items_node = generate_default_samples(config)
+        else:
+            items_node = parse_dict(items, config, pointer + 'items')
 
-def parse_array(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    # TODO: use min items
-    min_items = _read_int(data, 'minItems', unparsed_keys, path, 0)
-    items = _read_dict(data, 'items', unparsed_keys, path)
-    items_path = path + 'items'
-    root_node = NoOpDecision(str(path))
-
-    # Valid
-    create_node = CreateArrayNode(None)
-    append_node = AppendArrayItemNode(None)
-    root_node.add_transition(create_node)
-    create_node.add_transition(append_node)
-    append_node.add_transition(parse_dict(items, config, items_path))
-
-    # Invalid
-    for value in config.invalid_array_values:
-        root_node.add_transition(SetValueLeaf(None, False, value))
+        for _ in range(min_items):
+            append_node = AppendArrayItemNode(None)
+            append_node.add_transition(items_node)
+            all_items_node.add_transition(append_node)
 
     return root_node
 
 
 def parse_boolean(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    root = NoOpDecision(str(path))
-    for value in config.bool_values.valid:
-        root.add_transition(SetValueLeaf(None, True, value))
-    for value in config.bool_values.invalid:
+    root = NoOpDecision(f"{path}_BOOLEAN")
+    root.add_transition(SetValueLeaf(None, True, value=True))
+    root.add_transition(SetValueLeaf(None, True, value=False))
+    return root
+
+def parse_number(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
+    minimum = _read_float(data, 'minimum', unparsed_keys, path, None)
+    minimum_exclusive = _read_float(data, 'exclusiveMinimum', unparsed_keys, path, None)
+    maximum = _read_float(data, 'maximum', unparsed_keys, path, None)
+    maximum_exclusive = _read_float(data, 'exclusiveMaximum', unparsed_keys, path, None)
+    multiple_of = _read_float(data, 'multipleOf', unparsed_keys, path, None)
+
+    if minimum_exclusive is not None:
+        minimum = minimum_exclusive + 1  # TODO: actually just add one bit (https://docs.python.org/3/tutorial/floatingpoint.html)
+    if maximum_exclusive is not None:
+        maximum = maximum_exclusive - 1  # TODO: actually just subtract one bit
+
+    invalid_values = []
+    if minimum is not None:
+        invalid_values.append(minimum - 1)
+    if maximum is not None:
+        invalid_values.append(maximum + 1)
+
+    valid_value = minimum or maximum or 0
+    if multiple_of is not None and abs(multiple_of) > 1e-5:
+        valid_value = (int(valid_value / multiple_of)) * multiple_of
+        if minimum is not None and valid_value < minimum:
+            valid_value += multiple_of
+
+    root = NoOpDecision(f"{path}_NUMBER")
+    root.add_transition(SetValueLeaf(None, True, valid_value))
+    for value in invalid_values:
         root.add_transition(SetValueLeaf(None, False, value))
+
     return root
 
 
-def parse_type(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
-    type = _read_string(data, 'type', unparsed_keys, path)
-    if type not in config.type_handlers:
-        raise JsonSchemaException(f"Invalid type '{type}' at {path}", path)
-    return config.type_handlers[type](data, config, unparsed_keys, path)
+def parse_null(data: dict, config: Config, unparsed_keys: Set[str], path: JsonPointer) -> Node:
+    root = NoOpDecision(f"{path}_NULL")
+    root.add_transition(SetValueLeaf(None, True, value=None))
+    return root
+
+
+def parse_any_of_entry(entry: dict, config: Config, pointer: JsonPointer) -> Node:
+    unparsed_keys = set(entry.keys())
+
+    # try special keys first
+    for key, handler in config.key_handlers.items():
+        if key in entry:
+            return handler(entry, config, unparsed_keys, pointer)
+
+    root = NoOpDecision(None, False)
+    if 'type' in entry:
+        types = entry['type']
+        if isinstance(types, str):
+            types = [types]
+        types = set(types)
+    else:
+        # Omitting 'type' basically allows all types
+        types = config.type_handlers.keys()
+
+    # Generate samples for all allowed types (valid + invalid)
+    for t in types:
+        try:
+            handler = config.type_handlers[t]
+        except KeyError:
+            raise JsonSchemaException(f"Unknown type '{t}'", pointer)
+        root.add_transition(handler(entry, config, unparsed_keys, pointer))
+
+    # Generate counter-examples for all forbidden types
+    for type, samples in config.default_samples.items():
+        if type not in types:
+            for sample in samples:
+                root.add_transition(SetValueLeaf(None, False, sample))
+
+    # if unparsed_keys:
+    #     raise JsonSchemaException(f"Unknown keys {unparsed_keys} at '{path}'", path)
+    return root
 
 
-def parse_dict(data: dict, config: Config, path: JsonPointer):
-    if not isinstance(data, dict):
-        raise JsonSchemaException(f"Expected dict, got {(data)} at {path}", path)
+def parse_dict(data: dict, config: Config, pointer: JsonPointer) -> Node:
+    root = NoOpDecision(str(pointer), False)
     unparsed_keys = set(data.keys())
-    for handler in config.key_handlers:
-        if handler.key in data:
-            result = handler.callback(data, config, unparsed_keys, path)
-            if unparsed_keys:
-                raise JsonSchemaException(f"Unknown keys {unparsed_keys} at '{path}'", path)
-            return result
-    raise JsonSchemaException(f"Cannot parse {data} at {path}", path)
+    any_of = _read_list(data, 'anyOf', unparsed_keys, pointer)
+
+    for idx, entry in enumerate(any_of):
+        root.add_transition(parse_any_of_entry(
+            entry, config, pointer + 'anyOf' + idx
+        ))
+
+    return root
 
 
 def parse(data: dict, config=None) -> Node:
     if config is None:
         config = default_config()
 
-    if not isinstance(data, dict):
-        raise JsonSchemaException(f"Expected dict, got {type(data)}", path)
+    if config.normalize:
+        data = normalize(data)
 
-    path = JsonPointer()
-
-    # Skip meta data
+    pointer = JsonPointer()
     unparsed_keys = set(data.keys())
-    _read_string(data, '$schema', unparsed_keys, path, '')
-    _read_string(data, 'title', unparsed_keys, path, '')
-    _read_string(data, '$id', unparsed_keys, path, '')
 
     # Read definitions
     all_nodes: List[Node] = []
-    definitions = _read_dict(data, 'definitions', unparsed_keys, path, {})
+    definitions = _read_dict(data, '$defs', unparsed_keys, pointer, {})
     for key, definition in definitions.items():
-        sub_path = path + 'definitions' + key
+        sub_path = pointer + '$defs' + key
         node = parse_dict(definition, config, sub_path)
         all_nodes.append(node)
 
     # Read root
-    root = None
-    for handler in config.key_handlers:
-        if handler.key in data:
-            result = handler.callback(data, config, unparsed_keys, path)
-            if unparsed_keys:
-                raise JsonSchemaException(f"Unknown keys {unparsed_keys} at '{path}'", path)
-            root = result
-            break
-    if not root:
-        raise JsonSchemaException(f"Cannot parse {data} at {path}", path)
-
+    root = parse_dict(data, config, pointer)
     root = root.resolve(all_nodes)
 
-    # root.optimize()
+    root.optimize()
 
     # prepend input / output nodes
     create_input = CreateInputNode()
     super_root = NoOpDecision(None, True)
     create_input.add_transition(super_root)
     super_root.add_transition(root)
     super_root.add_transition(FetchOutputNode())
-    
+
     return create_input
```

### Comparing `fences-1.0.0/fences/regex/grammar.py` & `fences-1.1.0/fences/regex/grammar.py`

 * *Files 4% similar despite different names*

```diff
@@ -1,12 +1,12 @@
 00000000: 2320 5468 6520 6669 6c65 2077 6173 2061  # The file was a
 00000010: 7574 6f6d 6174 6963 616c 6c79 2067 656e  utomatically gen
 00000020: 6572 6174 6564 2062 7920 4c61 726b 2076  erated by Lark v
-00000030: 312e 312e 350a 5f5f 7665 7273 696f 6e5f  1.1.5.__version_
-00000040: 5f20 3d20 2231 2e31 2e35 220a 0a23 0a23  _ = "1.1.5"..#.#
+00000030: 312e 312e 390a 5f5f 7665 7273 696f 6e5f  1.1.9.__version_
+00000040: 5f20 3d20 2231 2e31 2e39 220a 0a23 0a23  _ = "1.1.9"..#.#
 00000050: 0a23 2020 204c 6172 6b20 5374 616e 642d  .#   Lark Stand-
 00000060: 616c 6f6e 6520 4765 6e65 7261 746f 7220  alone Generator 
 00000070: 546f 6f6c 0a23 202d 2d2d 2d2d 2d2d 2d2d  Tool.# ---------
 00000080: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ----------------
 00000090: 2d2d 2d2d 2d2d 2d2d 2d0a 2320 4765 6e65  ---------.# Gene
 000000a0: 7261 7465 7320 6120 7374 616e 642d 616c  rates a stand-al
 000000b0: 6f6e 6520 4c41 4c52 2831 2920 7061 7273  one LALR(1) pars
@@ -45,8336 +45,8953 @@
 000002c0: 2e0a 230a 2320 2020 2049 6620 4d50 4c32  ..#.#    If MPL2
 000002d0: 2069 7320 696e 636f 6d70 6174 6962 6c65   is incompatible
 000002e0: 2077 6974 6820 796f 7572 2066 7265 6520   with your free 
 000002f0: 6f72 206f 7065 6e2d 736f 7572 6365 2070  or open-source p
 00000300: 726f 6a65 6374 2c0a 2320 2020 2063 6f6e  roject,.#    con
 00000310: 7461 6374 206d 6520 616e 6420 7765 276c  tact me and we'l
 00000320: 6c20 776f 726b 2069 7420 6f75 742e 0a23  l work it out..#
-00000330: 0a23 0a0a 6672 6f6d 2061 6263 2069 6d70  .#..from abc imp
-00000340: 6f72 7420 4142 432c 2061 6273 7472 6163  ort ABC, abstrac
-00000350: 746d 6574 686f 640a 6672 6f6d 2063 6f6c  tmethod.from col
-00000360: 6c65 6374 696f 6e73 2e61 6263 2069 6d70  lections.abc imp
-00000370: 6f72 7420 5365 7175 656e 6365 0a66 726f  ort Sequence.fro
-00000380: 6d20 7479 7065 7320 696d 706f 7274 204d  m types import M
-00000390: 6f64 756c 6554 7970 650a 6672 6f6d 2074  oduleType.from t
-000003a0: 7970 696e 6720 696d 706f 7274 2028 0a20  yping import (. 
-000003b0: 2020 2054 7970 6556 6172 2c20 4765 6e65     TypeVar, Gene
-000003c0: 7269 632c 2054 7970 652c 2054 7570 6c65  ric, Type, Tuple
-000003d0: 2c20 4c69 7374 2c20 4469 6374 2c20 4974  , List, Dict, It
-000003e0: 6572 6174 6f72 2c20 436f 6c6c 6563 7469  erator, Collecti
-000003f0: 6f6e 2c20 4361 6c6c 6162 6c65 2c20 4f70  on, Callable, Op
-00000400: 7469 6f6e 616c 2c20 4672 6f7a 656e 5365  tional, FrozenSe
-00000410: 742c 2041 6e79 2c0a 2020 2020 556e 696f  t, Any,.    Unio
-00000420: 6e2c 2049 7465 7261 626c 652c 2049 4f2c  n, Iterable, IO,
-00000430: 2054 5950 455f 4348 4543 4b49 4e47 2c20   TYPE_CHECKING, 
-00000440: 6f76 6572 6c6f 6164 2c0a 2020 2020 5061  overload,.    Pa
-00000450: 7474 6572 6e20 6173 2052 4550 6174 7465  ttern as REPatte
-00000460: 726e 2c20 436c 6173 7356 6172 2c20 5365  rn, ClassVar, Se
-00000470: 742c 204d 6170 7069 6e67 0a29 0a0a 0a63  t, Mapping.)...c
-00000480: 6c61 7373 204c 6172 6b45 7272 6f72 2845  lass LarkError(E
-00000490: 7863 6570 7469 6f6e 293a 0a20 2020 2070  xception):.    p
-000004a0: 6173 730a 0a0a 636c 6173 7320 436f 6e66  ass...class Conf
-000004b0: 6967 7572 6174 696f 6e45 7272 6f72 284c  igurationError(L
-000004c0: 6172 6b45 7272 6f72 2c20 5661 6c75 6545  arkError, ValueE
-000004d0: 7272 6f72 293a 0a20 2020 2070 6173 730a  rror):.    pass.
-000004e0: 0a0a 6465 6620 6173 7365 7274 5f63 6f6e  ..def assert_con
-000004f0: 6669 6728 7661 6c75 652c 206f 7074 696f  fig(value, optio
-00000500: 6e73 3a20 436f 6c6c 6563 7469 6f6e 2c20  ns: Collection, 
-00000510: 6d73 673d 2747 6f74 2025 722c 2065 7870  msg='Got %r, exp
-00000520: 6563 7465 6420 6f6e 6520 6f66 2025 7327  ected one of %s'
-00000530: 293a 0a20 2020 2069 6620 7661 6c75 6520  ):.    if value 
-00000540: 6e6f 7420 696e 206f 7074 696f 6e73 3a0a  not in options:.
-00000550: 2020 2020 2020 2020 7261 6973 6520 436f          raise Co
-00000560: 6e66 6967 7572 6174 696f 6e45 7272 6f72  nfigurationError
-00000570: 286d 7367 2025 2028 7661 6c75 652c 206f  (msg % (value, o
-00000580: 7074 696f 6e73 2929 0a0a 0a63 6c61 7373  ptions))...class
-00000590: 2047 7261 6d6d 6172 4572 726f 7228 4c61   GrammarError(La
-000005a0: 726b 4572 726f 7229 3a0a 2020 2020 7061  rkError):.    pa
-000005b0: 7373 0a0a 0a63 6c61 7373 2050 6172 7365  ss...class Parse
-000005c0: 4572 726f 7228 4c61 726b 4572 726f 7229  Error(LarkError)
-000005d0: 3a0a 2020 2020 7061 7373 0a0a 0a63 6c61  :.    pass...cla
-000005e0: 7373 204c 6578 4572 726f 7228 4c61 726b  ss LexError(Lark
-000005f0: 4572 726f 7229 3a0a 2020 2020 7061 7373  Error):.    pass
-00000600: 0a0a 5420 3d20 5479 7065 5661 7228 2754  ..T = TypeVar('T
-00000610: 2729 0a0a 636c 6173 7320 556e 6578 7065  ')..class Unexpe
-00000620: 6374 6564 496e 7075 7428 4c61 726b 4572  ctedInput(LarkEr
-00000630: 726f 7229 3a0a 2020 2020 232d 2d0a 2020  ror):.    #--.  
-00000640: 2020 6c69 6e65 3a20 696e 740a 2020 2020    line: int.    
-00000650: 636f 6c75 6d6e 3a20 696e 740a 2020 2020  column: int.    
-00000660: 706f 735f 696e 5f73 7472 6561 6d20 3d20  pos_in_stream = 
-00000670: 4e6f 6e65 0a20 2020 2073 7461 7465 3a20  None.    state: 
-00000680: 416e 790a 2020 2020 5f74 6572 6d69 6e61  Any.    _termina
-00000690: 6c73 5f62 795f 6e61 6d65 203d 204e 6f6e  ls_by_name = Non
-000006a0: 650a 0a20 2020 2064 6566 2067 6574 5f63  e..    def get_c
-000006b0: 6f6e 7465 7874 2873 656c 662c 2074 6578  ontext(self, tex
-000006c0: 743a 2073 7472 2c20 7370 616e 3a20 696e  t: str, span: in
-000006d0: 743d 3430 2920 2d3e 2073 7472 3a0a 2020  t=40) -> str:.  
-000006e0: 2020 2020 2020 232d 2d0a 2020 2020 2020        #--.      
-000006f0: 2020 6173 7365 7274 2073 656c 662e 706f    assert self.po
-00000700: 735f 696e 5f73 7472 6561 6d20 6973 206e  s_in_stream is n
-00000710: 6f74 204e 6f6e 652c 2073 656c 660a 2020  ot None, self.  
-00000720: 2020 2020 2020 706f 7320 3d20 7365 6c66        pos = self
-00000730: 2e70 6f73 5f69 6e5f 7374 7265 616d 0a20  .pos_in_stream. 
-00000740: 2020 2020 2020 2073 7461 7274 203d 206d         start = m
-00000750: 6178 2870 6f73 202d 2073 7061 6e2c 2030  ax(pos - span, 0
-00000760: 290a 2020 2020 2020 2020 656e 6420 3d20  ).        end = 
-00000770: 706f 7320 2b20 7370 616e 0a20 2020 2020  pos + span.     
-00000780: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
-00000790: 616e 6365 2874 6578 742c 2062 7974 6573  ance(text, bytes
-000007a0: 293a 0a20 2020 2020 2020 2020 2020 2062  ):.            b
-000007b0: 6566 6f72 6520 3d20 7465 7874 5b73 7461  efore = text[sta
-000007c0: 7274 3a70 6f73 5d2e 7273 706c 6974 2827  rt:pos].rsplit('
-000007d0: 5c6e 272c 2031 295b 2d31 5d0a 2020 2020  \n', 1)[-1].    
-000007e0: 2020 2020 2020 2020 6166 7465 7220 3d20          after = 
-000007f0: 7465 7874 5b70 6f73 3a65 6e64 5d2e 7370  text[pos:end].sp
-00000800: 6c69 7428 275c 6e27 2c20 3129 5b30 5d0a  lit('\n', 1)[0].
-00000810: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00000820: 726e 2062 6566 6f72 6520 2b20 6166 7465  rn before + afte
-00000830: 7220 2b20 275c 6e27 202b 2027 2027 202a  r + '\n' + ' ' *
-00000840: 206c 656e 2862 6566 6f72 652e 6578 7061   len(before.expa
-00000850: 6e64 7461 6273 2829 2920 2b20 275e 5c6e  ndtabs()) + '^\n
-00000860: 270a 2020 2020 2020 2020 656c 7365 3a0a  '.        else:.
-00000870: 2020 2020 2020 2020 2020 2020 6265 666f              befo
-00000880: 7265 203d 2074 6578 745b 7374 6172 743a  re = text[start:
-00000890: 706f 735d 2e72 7370 6c69 7428 6227 5c6e  pos].rsplit(b'\n
-000008a0: 272c 2031 295b 2d31 5d0a 2020 2020 2020  ', 1)[-1].      
-000008b0: 2020 2020 2020 6166 7465 7220 3d20 7465        after = te
-000008c0: 7874 5b70 6f73 3a65 6e64 5d2e 7370 6c69  xt[pos:end].spli
-000008d0: 7428 6227 5c6e 272c 2031 295b 305d 0a20  t(b'\n', 1)[0]. 
-000008e0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000008f0: 6e20 2862 6566 6f72 6520 2b20 6166 7465  n (before + afte
-00000900: 7220 2b20 6227 5c6e 2720 2b20 6227 2027  r + b'\n' + b' '
-00000910: 202a 206c 656e 2862 6566 6f72 652e 6578   * len(before.ex
-00000920: 7061 6e64 7461 6273 2829 2920 2b20 6227  pandtabs()) + b'
-00000930: 5e5c 6e27 292e 6465 636f 6465 2822 6173  ^\n').decode("as
-00000940: 6369 6922 2c20 2262 6163 6b73 6c61 7368  cii", "backslash
-00000950: 7265 706c 6163 6522 290a 0a20 2020 2064  replace")..    d
-00000960: 6566 206d 6174 6368 5f65 7861 6d70 6c65  ef match_example
-00000970: 7328 7365 6c66 2c20 7061 7273 655f 666e  s(self, parse_fn
-00000980: 3a20 2743 616c 6c61 626c 655b 5b73 7472  : 'Callable[[str
-00000990: 5d2c 2054 7265 655d 272c 0a20 2020 2020  ], Tree]',.     
-000009a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000009b0: 2020 2020 2020 2020 6578 616d 706c 6573          examples
-000009c0: 3a20 556e 696f 6e5b 4d61 7070 696e 675b  : Union[Mapping[
-000009d0: 542c 2049 7465 7261 626c 655b 7374 725d  T, Iterable[str]
-000009e0: 5d2c 2049 7465 7261 626c 655b 5475 706c  ], Iterable[Tupl
-000009f0: 655b 542c 2049 7465 7261 626c 655b 7374  e[T, Iterable[st
-00000a00: 725d 5d5d 5d2c 0a20 2020 2020 2020 2020  r]]]],.         
-00000a10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000a20: 2020 2020 746f 6b65 6e5f 7479 7065 5f6d      token_type_m
-00000a30: 6174 6368 5f66 616c 6c62 6163 6b3a 2062  atch_fallback: b
-00000a40: 6f6f 6c3d 4661 6c73 652c 0a20 2020 2020  ool=False,.     
-00000a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000a60: 2020 2020 2020 2020 7573 655f 6163 6365          use_acce
-00000a70: 7074 733a 2062 6f6f 6c3d 5472 7565 0a20  pts: bool=True. 
+00000330: 0a23 0a0a 6672 6f6d 2063 6f70 7920 696d  .#..from copy im
+00000340: 706f 7274 2064 6565 7063 6f70 790a 6672  port deepcopy.fr
+00000350: 6f6d 2061 6263 2069 6d70 6f72 7420 4142  om abc import AB
+00000360: 432c 2061 6273 7472 6163 746d 6574 686f  C, abstractmetho
+00000370: 640a 6672 6f6d 2074 7970 6573 2069 6d70  d.from types imp
+00000380: 6f72 7420 4d6f 6475 6c65 5479 7065 0a66  ort ModuleType.f
+00000390: 726f 6d20 7479 7069 6e67 2069 6d70 6f72  rom typing impor
+000003a0: 7420 280a 2020 2020 5479 7065 5661 722c  t (.    TypeVar,
+000003b0: 2047 656e 6572 6963 2c20 5479 7065 2c20   Generic, Type, 
+000003c0: 5475 706c 652c 204c 6973 742c 2044 6963  Tuple, List, Dic
+000003d0: 742c 2049 7465 7261 746f 722c 2043 6f6c  t, Iterator, Col
+000003e0: 6c65 6374 696f 6e2c 2043 616c 6c61 626c  lection, Callabl
+000003f0: 652c 204f 7074 696f 6e61 6c2c 2046 726f  e, Optional, Fro
+00000400: 7a65 6e53 6574 2c20 416e 792c 0a20 2020  zenSet, Any,.   
+00000410: 2055 6e69 6f6e 2c20 4974 6572 6162 6c65   Union, Iterable
+00000420: 2c20 494f 2c20 5459 5045 5f43 4845 434b  , IO, TYPE_CHECK
+00000430: 494e 472c 206f 7665 726c 6f61 642c 2053  ING, overload, S
+00000440: 6571 7565 6e63 652c 0a20 2020 2050 6174  equence,.    Pat
+00000450: 7465 726e 2061 7320 5245 5061 7474 6572  tern as REPatter
+00000460: 6e2c 2043 6c61 7373 5661 722c 2053 6574  n, ClassVar, Set
+00000470: 2c20 4d61 7070 696e 670a 290a 0a0a 636c  , Mapping.)...cl
+00000480: 6173 7320 4c61 726b 4572 726f 7228 4578  ass LarkError(Ex
+00000490: 6365 7074 696f 6e29 3a0a 2020 2020 7061  ception):.    pa
+000004a0: 7373 0a0a 0a63 6c61 7373 2043 6f6e 6669  ss...class Confi
+000004b0: 6775 7261 7469 6f6e 4572 726f 7228 4c61  gurationError(La
+000004c0: 726b 4572 726f 722c 2056 616c 7565 4572  rkError, ValueEr
+000004d0: 726f 7229 3a0a 2020 2020 7061 7373 0a0a  ror):.    pass..
+000004e0: 0a64 6566 2061 7373 6572 745f 636f 6e66  .def assert_conf
+000004f0: 6967 2876 616c 7565 2c20 6f70 7469 6f6e  ig(value, option
+00000500: 733a 2043 6f6c 6c65 6374 696f 6e2c 206d  s: Collection, m
+00000510: 7367 3d27 476f 7420 2572 2c20 6578 7065  sg='Got %r, expe
+00000520: 6374 6564 206f 6e65 206f 6620 2573 2729  cted one of %s')
+00000530: 3a0a 2020 2020 6966 2076 616c 7565 206e  :.    if value n
+00000540: 6f74 2069 6e20 6f70 7469 6f6e 733a 0a20  ot in options:. 
+00000550: 2020 2020 2020 2072 6169 7365 2043 6f6e         raise Con
+00000560: 6669 6775 7261 7469 6f6e 4572 726f 7228  figurationError(
+00000570: 6d73 6720 2520 2876 616c 7565 2c20 6f70  msg % (value, op
+00000580: 7469 6f6e 7329 290a 0a0a 636c 6173 7320  tions))...class 
+00000590: 4772 616d 6d61 7245 7272 6f72 284c 6172  GrammarError(Lar
+000005a0: 6b45 7272 6f72 293a 0a20 2020 2070 6173  kError):.    pas
+000005b0: 730a 0a0a 636c 6173 7320 5061 7273 6545  s...class ParseE
+000005c0: 7272 6f72 284c 6172 6b45 7272 6f72 293a  rror(LarkError):
+000005d0: 0a20 2020 2070 6173 730a 0a0a 636c 6173  .    pass...clas
+000005e0: 7320 4c65 7845 7272 6f72 284c 6172 6b45  s LexError(LarkE
+000005f0: 7272 6f72 293a 0a20 2020 2070 6173 730a  rror):.    pass.
+00000600: 0a54 203d 2054 7970 6556 6172 2827 5427  .T = TypeVar('T'
+00000610: 290a 0a63 6c61 7373 2055 6e65 7870 6563  )..class Unexpec
+00000620: 7465 6449 6e70 7574 284c 6172 6b45 7272  tedInput(LarkErr
+00000630: 6f72 293a 0a20 2020 2023 2d2d 0a20 2020  or):.    #--.   
+00000640: 206c 696e 653a 2069 6e74 0a20 2020 2063   line: int.    c
+00000650: 6f6c 756d 6e3a 2069 6e74 0a20 2020 2070  olumn: int.    p
+00000660: 6f73 5f69 6e5f 7374 7265 616d 203d 204e  os_in_stream = N
+00000670: 6f6e 650a 2020 2020 7374 6174 653a 2041  one.    state: A
+00000680: 6e79 0a20 2020 205f 7465 726d 696e 616c  ny.    _terminal
+00000690: 735f 6279 5f6e 616d 6520 3d20 4e6f 6e65  s_by_name = None
+000006a0: 0a20 2020 2069 6e74 6572 6163 7469 7665  .    interactive
+000006b0: 5f70 6172 7365 723a 2027 496e 7465 7261  _parser: 'Intera
+000006c0: 6374 6976 6550 6172 7365 7227 0a0a 2020  ctiveParser'..  
+000006d0: 2020 6465 6620 6765 745f 636f 6e74 6578    def get_contex
+000006e0: 7428 7365 6c66 2c20 7465 7874 3a20 7374  t(self, text: st
+000006f0: 722c 2073 7061 6e3a 2069 6e74 3d34 3029  r, span: int=40)
+00000700: 202d 3e20 7374 723a 0a20 2020 2020 2020   -> str:.       
+00000710: 2023 2d2d 0a20 2020 2020 2020 2061 7373   #--.        ass
+00000720: 6572 7420 7365 6c66 2e70 6f73 5f69 6e5f  ert self.pos_in_
+00000730: 7374 7265 616d 2069 7320 6e6f 7420 4e6f  stream is not No
+00000740: 6e65 2c20 7365 6c66 0a20 2020 2020 2020  ne, self.       
+00000750: 2070 6f73 203d 2073 656c 662e 706f 735f   pos = self.pos_
+00000760: 696e 5f73 7472 6561 6d0a 2020 2020 2020  in_stream.      
+00000770: 2020 7374 6172 7420 3d20 6d61 7828 706f    start = max(po
+00000780: 7320 2d20 7370 616e 2c20 3029 0a20 2020  s - span, 0).   
+00000790: 2020 2020 2065 6e64 203d 2070 6f73 202b       end = pos +
+000007a0: 2073 7061 6e0a 2020 2020 2020 2020 6966   span.        if
+000007b0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+000007c0: 7465 7874 2c20 6279 7465 7329 3a0a 2020  text, bytes):.  
+000007d0: 2020 2020 2020 2020 2020 6265 666f 7265            before
+000007e0: 203d 2074 6578 745b 7374 6172 743a 706f   = text[start:po
+000007f0: 735d 2e72 7370 6c69 7428 275c 6e27 2c20  s].rsplit('\n', 
+00000800: 3129 5b2d 315d 0a20 2020 2020 2020 2020  1)[-1].         
+00000810: 2020 2061 6674 6572 203d 2074 6578 745b     after = text[
+00000820: 706f 733a 656e 645d 2e73 706c 6974 2827  pos:end].split('
+00000830: 5c6e 272c 2031 295b 305d 0a20 2020 2020  \n', 1)[0].     
+00000840: 2020 2020 2020 2072 6574 7572 6e20 6265         return be
+00000850: 666f 7265 202b 2061 6674 6572 202b 2027  fore + after + '
+00000860: 5c6e 2720 2b20 2720 2720 2a20 6c65 6e28  \n' + ' ' * len(
+00000870: 6265 666f 7265 2e65 7870 616e 6474 6162  before.expandtab
+00000880: 7328 2929 202b 2027 5e5c 6e27 0a20 2020  s()) + '^\n'.   
+00000890: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+000008a0: 2020 2020 2020 2062 6566 6f72 6520 3d20         before = 
+000008b0: 7465 7874 5b73 7461 7274 3a70 6f73 5d2e  text[start:pos].
+000008c0: 7273 706c 6974 2862 275c 6e27 2c20 3129  rsplit(b'\n', 1)
+000008d0: 5b2d 315d 0a20 2020 2020 2020 2020 2020  [-1].           
+000008e0: 2061 6674 6572 203d 2074 6578 745b 706f   after = text[po
+000008f0: 733a 656e 645d 2e73 706c 6974 2862 275c  s:end].split(b'\
+00000900: 6e27 2c20 3129 5b30 5d0a 2020 2020 2020  n', 1)[0].      
+00000910: 2020 2020 2020 7265 7475 726e 2028 6265        return (be
+00000920: 666f 7265 202b 2061 6674 6572 202b 2062  fore + after + b
+00000930: 275c 6e27 202b 2062 2720 2720 2a20 6c65  '\n' + b' ' * le
+00000940: 6e28 6265 666f 7265 2e65 7870 616e 6474  n(before.expandt
+00000950: 6162 7328 2929 202b 2062 275e 5c6e 2729  abs()) + b'^\n')
+00000960: 2e64 6563 6f64 6528 2261 7363 6969 222c  .decode("ascii",
+00000970: 2022 6261 636b 736c 6173 6872 6570 6c61   "backslashrepla
+00000980: 6365 2229 0a0a 2020 2020 6465 6620 6d61  ce")..    def ma
+00000990: 7463 685f 6578 616d 706c 6573 2873 656c  tch_examples(sel
+000009a0: 662c 2070 6172 7365 5f66 6e3a 2027 4361  f, parse_fn: 'Ca
+000009b0: 6c6c 6162 6c65 5b5b 7374 725d 2c20 5472  llable[[str], Tr
+000009c0: 6565 5d27 2c0a 2020 2020 2020 2020 2020  ee]',.          
+000009d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000009e0: 2020 2065 7861 6d70 6c65 733a 2055 6e69     examples: Uni
+000009f0: 6f6e 5b4d 6170 7069 6e67 5b54 2c20 4974  on[Mapping[T, It
+00000a00: 6572 6162 6c65 5b73 7472 5d5d 2c20 4974  erable[str]], It
+00000a10: 6572 6162 6c65 5b54 7570 6c65 5b54 2c20  erable[Tuple[T, 
+00000a20: 4974 6572 6162 6c65 5b73 7472 5d5d 5d5d  Iterable[str]]]]
+00000a30: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00000a40: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00000a50: 6f6b 656e 5f74 7970 655f 6d61 7463 685f  oken_type_match_
+00000a60: 6661 6c6c 6261 636b 3a20 626f 6f6c 3d46  fallback: bool=F
+00000a70: 616c 7365 2c0a 2020 2020 2020 2020 2020  alse,.          
 00000a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000a90: 2020 2020 2020 2020 2920 2d3e 204f 7074          ) -> Opt
-00000aa0: 696f 6e61 6c5b 545d 3a0a 2020 2020 2020  ional[T]:.      
-00000ab0: 2020 232d 2d0a 2020 2020 2020 2020 6173    #--.        as
-00000ac0: 7365 7274 2073 656c 662e 7374 6174 6520  sert self.state 
-00000ad0: 6973 206e 6f74 204e 6f6e 652c 2022 4e6f  is not None, "No
-00000ae0: 7420 7375 7070 6f72 7465 6420 666f 7220  t supported for 
-00000af0: 7468 6973 2065 7863 6570 7469 6f6e 220a  this exception".
-00000b00: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00000b10: 7374 616e 6365 2865 7861 6d70 6c65 732c  stance(examples,
-00000b20: 204d 6170 7069 6e67 293a 0a20 2020 2020   Mapping):.     
-00000b30: 2020 2020 2020 2065 7861 6d70 6c65 7320         examples 
-00000b40: 3d20 6578 616d 706c 6573 2e69 7465 6d73  = examples.items
-00000b50: 2829 0a0a 2020 2020 2020 2020 6361 6e64  ()..        cand
-00000b60: 6964 6174 6520 3d20 284e 6f6e 652c 2046  idate = (None, F
-00000b70: 616c 7365 290a 2020 2020 2020 2020 666f  alse).        fo
-00000b80: 7220 692c 2028 6c61 6265 6c2c 2065 7861  r i, (label, exa
-00000b90: 6d70 6c65 2920 696e 2065 6e75 6d65 7261  mple) in enumera
-00000ba0: 7465 2865 7861 6d70 6c65 7329 3a0a 2020  te(examples):.  
-00000bb0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-00000bc0: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
-00000bd0: 6578 616d 706c 652c 2073 7472 292c 2022  example, str), "
-00000be0: 4578 7065 6374 696e 6720 6120 6c69 7374  Expecting a list
-00000bf0: 220a 0a20 2020 2020 2020 2020 2020 2066  "..            f
-00000c00: 6f72 206a 2c20 6d61 6c66 6f72 6d65 6420  or j, malformed 
-00000c10: 696e 2065 6e75 6d65 7261 7465 2865 7861  in enumerate(exa
-00000c20: 6d70 6c65 293a 0a20 2020 2020 2020 2020  mple):.         
-00000c30: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-00000c40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000c50: 7061 7273 655f 666e 286d 616c 666f 726d  parse_fn(malform
-00000c60: 6564 290a 2020 2020 2020 2020 2020 2020  ed).            
-00000c70: 2020 2020 6578 6365 7074 2055 6e65 7870      except Unexp
-00000c80: 6563 7465 6449 6e70 7574 2061 7320 7574  ectedInput as ut
-00000c90: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00000ca0: 2020 2020 2020 6966 2075 742e 7374 6174        if ut.stat
-00000cb0: 6520 3d3d 2073 656c 662e 7374 6174 653a  e == self.state:
-00000cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00000cd0: 2020 2020 2020 2020 2069 6620 280a 2020           if (.  
-00000ce0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000cf0: 2020 2020 2020 2020 2020 7573 655f 6163            use_ac
-00000d00: 6365 7074 730a 2020 2020 2020 2020 2020  cepts.          
+00000a90: 2020 2075 7365 5f61 6363 6570 7473 3a20     use_accepts: 
+00000aa0: 626f 6f6c 3d54 7275 650a 2020 2020 2020  bool=True.      
+00000ab0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ac0: 2020 2029 202d 3e20 4f70 7469 6f6e 616c     ) -> Optional
+00000ad0: 5b54 5d3a 0a20 2020 2020 2020 2023 2d2d  [T]:.        #--
+00000ae0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+00000af0: 7365 6c66 2e73 7461 7465 2069 7320 6e6f  self.state is no
+00000b00: 7420 4e6f 6e65 2c20 224e 6f74 2073 7570  t None, "Not sup
+00000b10: 706f 7274 6564 2066 6f72 2074 6869 7320  ported for this 
+00000b20: 6578 6365 7074 696f 6e22 0a0a 2020 2020  exception"..    
+00000b30: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+00000b40: 6528 6578 616d 706c 6573 2c20 4d61 7070  e(examples, Mapp
+00000b50: 696e 6729 3a0a 2020 2020 2020 2020 2020  ing):.          
+00000b60: 2020 6578 616d 706c 6573 203d 2065 7861    examples = exa
+00000b70: 6d70 6c65 732e 6974 656d 7328 290a 0a20  mples.items().. 
+00000b80: 2020 2020 2020 2063 616e 6469 6461 7465         candidate
+00000b90: 203d 2028 4e6f 6e65 2c20 4661 6c73 6529   = (None, False)
+00000ba0: 0a20 2020 2020 2020 2066 6f72 2069 2c20  .        for i, 
+00000bb0: 286c 6162 656c 2c20 6578 616d 706c 6529  (label, example)
+00000bc0: 2069 6e20 656e 756d 6572 6174 6528 6578   in enumerate(ex
+00000bd0: 616d 706c 6573 293a 0a20 2020 2020 2020  amples):.       
+00000be0: 2020 2020 2061 7373 6572 7420 6e6f 7420       assert not 
+00000bf0: 6973 696e 7374 616e 6365 2865 7861 6d70  isinstance(examp
+00000c00: 6c65 2c20 7374 7229 2c20 2245 7870 6563  le, str), "Expec
+00000c10: 7469 6e67 2061 206c 6973 7422 0a0a 2020  ting a list"..  
+00000c20: 2020 2020 2020 2020 2020 666f 7220 6a2c            for j,
+00000c30: 206d 616c 666f 726d 6564 2069 6e20 656e   malformed in en
+00000c40: 756d 6572 6174 6528 6578 616d 706c 6529  umerate(example)
+00000c50: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00000c60: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+00000c70: 2020 2020 2020 2020 2020 2070 6172 7365             parse
+00000c80: 5f66 6e28 6d61 6c66 6f72 6d65 6429 0a20  _fn(malformed). 
+00000c90: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00000ca0: 7863 6570 7420 556e 6578 7065 6374 6564  xcept Unexpected
+00000cb0: 496e 7075 7420 6173 2075 743a 0a20 2020  Input as ut:.   
+00000cc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000cd0: 2069 6620 7574 2e73 7461 7465 203d 3d20   if ut.state == 
+00000ce0: 7365 6c66 2e73 7461 7465 3a0a 2020 2020  self.state:.    
+00000cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000d00: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
 00000d10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000d20: 2020 616e 6420 6973 696e 7374 616e 6365    and isinstance
-00000d30: 2873 656c 662c 2055 6e65 7870 6563 7465  (self, Unexpecte
-00000d40: 6454 6f6b 656e 290a 2020 2020 2020 2020  dToken).        
-00000d50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000d60: 2020 2020 616e 6420 6973 696e 7374 616e      and isinstan
-00000d70: 6365 2875 742c 2055 6e65 7870 6563 7465  ce(ut, Unexpecte
-00000d80: 6454 6f6b 656e 290a 2020 2020 2020 2020  dToken).        
-00000d90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000da0: 2020 2020 616e 6420 7574 2e61 6363 6570      and ut.accep
-00000db0: 7473 2021 3d20 7365 6c66 2e61 6363 6570  ts != self.accep
-00000dc0: 7473 0a20 2020 2020 2020 2020 2020 2020  ts.             
-00000dd0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
-00000de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000df0: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
-00000e00: 2e64 6562 7567 2822 4469 6666 6572 656e  .debug("Differen
-00000e10: 7420 6163 6365 7074 7320 7769 7468 2073  t accepts with s
-00000e20: 616d 6520 7374 6174 655b 2564 5d3a 2025  ame state[%d]: %
-00000e30: 7320 213d 2025 7320 6174 2065 7861 6d70  s != %s at examp
-00000e40: 6c65 205b 2573 5d5b 2573 5d22 2025 0a20  le [%s][%s]" %. 
-00000e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000e70: 2020 2020 2020 2020 2873 656c 662e 7374          (self.st
-00000e80: 6174 652c 2073 656c 662e 6163 6365 7074  ate, self.accept
-00000e90: 732c 2075 742e 6163 6365 7074 732c 2069  s, ut.accepts, i
-00000ea0: 2c20 6a29 290a 2020 2020 2020 2020 2020  , j)).          
-00000eb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000ec0: 2020 636f 6e74 696e 7565 0a20 2020 2020    continue.     
-00000ed0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000ee0: 2020 2069 6620 280a 2020 2020 2020 2020     if (.        
-00000ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000f00: 2020 2020 6973 696e 7374 616e 6365 2873      isinstance(s
-00000f10: 656c 662c 2028 556e 6578 7065 6374 6564  elf, (Unexpected
-00000f20: 546f 6b65 6e2c 2055 6e65 7870 6563 7465  Token, Unexpecte
-00000f30: 6445 4f46 2929 0a20 2020 2020 2020 2020  dEOF)).         
-00000f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000f50: 2020 2061 6e64 2069 7369 6e73 7461 6e63     and isinstanc
-00000f60: 6528 7574 2c20 2855 6e65 7870 6563 7465  e(ut, (Unexpecte
-00000f70: 6454 6f6b 656e 2c20 556e 6578 7065 6374  dToken, Unexpect
-00000f80: 6564 454f 4629 290a 2020 2020 2020 2020  edEOF)).        
-00000f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000fa0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00000fb0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00000fc0: 6620 7574 2e74 6f6b 656e 203d 3d20 7365  f ut.token == se
-00000fd0: 6c66 2e74 6f6b 656e 3a20 2023 230a 0a20  lf.token:  ##.. 
-00000fe0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00000ff0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-00001000: 6f67 6765 722e 6465 6275 6728 2245 7861  ogger.debug("Exa
-00001010: 6374 204d 6174 6368 2061 7420 6578 616d  ct Match at exam
-00001020: 706c 6520 5b25 735d 5b25 735d 2220 2520  ple [%s][%s]" % 
-00001030: 2869 2c20 6a29 290a 2020 2020 2020 2020  (i, j)).        
-00001040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001050: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-00001060: 6162 656c 0a0a 2020 2020 2020 2020 2020  abel..          
+00000d20: 2020 2020 2075 7365 5f61 6363 6570 7473       use_accepts
+00000d30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000d40: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+00000d50: 2069 7369 6e73 7461 6e63 6528 7365 6c66   isinstance(self
+00000d60: 2c20 556e 6578 7065 6374 6564 546f 6b65  , UnexpectedToke
+00000d70: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
+00000d80: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00000d90: 6e64 2069 7369 6e73 7461 6e63 6528 7574  nd isinstance(ut
+00000da0: 2c20 556e 6578 7065 6374 6564 546f 6b65  , UnexpectedToke
+00000db0: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
+00000dc0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00000dd0: 6e64 2075 742e 6163 6365 7074 7320 213d  nd ut.accepts !=
+00000de0: 2073 656c 662e 6163 6365 7074 730a 2020   self.accepts.  
+00000df0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000e00: 2020 2020 2020 293a 0a20 2020 2020 2020        ):.       
+00000e10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000e20: 2020 2020 206c 6f67 6765 722e 6465 6275       logger.debu
+00000e30: 6728 2244 6966 6665 7265 6e74 2061 6363  g("Different acc
+00000e40: 6570 7473 2077 6974 6820 7361 6d65 2073  epts with same s
+00000e50: 7461 7465 5b25 645d 3a20 2573 2021 3d20  tate[%d]: %s != 
+00000e60: 2573 2061 7420 6578 616d 706c 6520 5b25  %s at example [%
+00000e70: 735d 5b25 735d 2220 250a 2020 2020 2020  s][%s]" %.      
+00000e80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000e90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000ea0: 2020 2028 7365 6c66 2e73 7461 7465 2c20     (self.state, 
+00000eb0: 7365 6c66 2e61 6363 6570 7473 2c20 7574  self.accepts, ut
+00000ec0: 2e61 6363 6570 7473 2c20 692c 206a 2929  .accepts, i, j))
+00000ed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00000ee0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00000ef0: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00000f00: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00000f10: 2028 0a20 2020 2020 2020 2020 2020 2020   (.             
+00000f20: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00000f30: 7369 6e73 7461 6e63 6528 7365 6c66 2c20  sinstance(self, 
+00000f40: 2855 6e65 7870 6563 7465 6454 6f6b 656e  (UnexpectedToken
+00000f50: 2c20 556e 6578 7065 6374 6564 454f 4629  , UnexpectedEOF)
+00000f60: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00000f70: 2020 2020 2020 2020 2020 2020 2020 616e                an
+00000f80: 6420 6973 696e 7374 616e 6365 2875 742c  d isinstance(ut,
+00000f90: 2028 556e 6578 7065 6374 6564 546f 6b65   (UnexpectedToke
+00000fa0: 6e2c 2055 6e65 7870 6563 7465 6445 4f46  n, UnexpectedEOF
+00000fb0: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
+00000fc0: 2020 2020 2020 2020 2020 2029 3a0a 2020             ):.  
+00000fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00000fe0: 2020 2020 2020 2020 2020 6966 2075 742e            if ut.
+00000ff0: 746f 6b65 6e20 3d3d 2073 656c 662e 746f  token == self.to
+00001000: 6b65 6e3a 2020 2323 0a0a 2020 2020 2020  ken:  ##..      
+00001010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001020: 2020 2020 2020 2020 2020 6c6f 6767 6572            logger
+00001030: 2e64 6562 7567 2822 4578 6163 7420 4d61  .debug("Exact Ma
+00001040: 7463 6820 6174 2065 7861 6d70 6c65 205b  tch at example [
+00001050: 2573 5d5b 2573 5d22 2025 2028 692c 206a  %s][%s]" % (i, j
+00001060: 2929 0a20 2020 2020 2020 2020 2020 2020  )).             
 00001070: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001080: 2020 6966 2074 6f6b 656e 5f74 7970 655f    if token_type_
-00001090: 6d61 7463 685f 6661 6c6c 6261 636b 3a0a  match_fallback:.
-000010a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000010b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000010c0: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
+00001080: 2020 2072 6574 7572 6e20 6c61 6265 6c0a     return label.
+00001090: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000010a0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+000010b0: 746f 6b65 6e5f 7479 7065 5f6d 6174 6368  token_type_match
+000010c0: 5f66 616c 6c62 6163 6b3a 0a20 2020 2020  _fallback:.     
 000010d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000010e0: 2020 2020 6966 2028 7574 2e74 6f6b 656e      if (ut.token
-000010f0: 2e74 7970 6520 3d3d 2073 656c 662e 746f  .type == self.to
-00001100: 6b65 6e2e 7479 7065 2920 616e 6420 6e6f  ken.type) and no
-00001110: 7420 6361 6e64 6964 6174 655b 2d31 5d3a  t candidate[-1]:
-00001120: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00001130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001140: 2020 2020 206c 6f67 6765 722e 6465 6275       logger.debu
-00001150: 6728 2254 6f6b 656e 2054 7970 6520 4661  g("Token Type Fa
-00001160: 6c6c 6261 636b 2061 7420 6578 616d 706c  llback at exampl
-00001170: 6520 5b25 735d 5b25 735d 2220 2520 2869  e [%s][%s]" % (i
-00001180: 2c20 6a29 290a 2020 2020 2020 2020 2020  , j)).          
-00001190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000011a0: 2020 2020 2020 2020 2020 6361 6e64 6964            candid
-000011b0: 6174 6520 3d20 6c61 6265 6c2c 2054 7275  ate = label, Tru
-000011c0: 650a 0a20 2020 2020 2020 2020 2020 2020  e..             
-000011d0: 2020 2020 2020 2020 2020 2069 6620 6361             if ca
-000011e0: 6e64 6964 6174 655b 305d 2069 7320 4e6f  ndidate[0] is No
-000011f0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-00001200: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001210: 6c6f 6767 6572 2e64 6562 7567 2822 5361  logger.debug("Sa
-00001220: 6d65 2053 7461 7465 206d 6174 6368 2061  me State match a
-00001230: 7420 6578 616d 706c 6520 5b25 735d 5b25  t example [%s][%
-00001240: 735d 2220 2520 2869 2c20 6a29 290a 2020  s]" % (i, j)).  
-00001250: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00001260: 2020 2020 2020 2020 2020 6361 6e64 6964            candid
-00001270: 6174 6520 3d20 6c61 6265 6c2c 2046 616c  ate = label, Fal
-00001280: 7365 0a0a 2020 2020 2020 2020 7265 7475  se..        retu
-00001290: 726e 2063 616e 6469 6461 7465 5b30 5d0a  rn candidate[0].
-000012a0: 0a20 2020 2064 6566 205f 666f 726d 6174  .    def _format
-000012b0: 5f65 7870 6563 7465 6428 7365 6c66 2c20  _expected(self, 
-000012c0: 6578 7065 6374 6564 293a 0a20 2020 2020  expected):.     
-000012d0: 2020 2069 6620 7365 6c66 2e5f 7465 726d     if self._term
-000012e0: 696e 616c 735f 6279 5f6e 616d 653a 0a20  inals_by_name:. 
-000012f0: 2020 2020 2020 2020 2020 2064 203d 2073             d = s
-00001300: 656c 662e 5f74 6572 6d69 6e61 6c73 5f62  elf._terminals_b
-00001310: 795f 6e61 6d65 0a20 2020 2020 2020 2020  y_name.         
-00001320: 2020 2065 7870 6563 7465 6420 3d20 5b64     expected = [d
-00001330: 5b74 5f6e 616d 655d 2e75 7365 725f 7265  [t_name].user_re
-00001340: 7072 2829 2069 6620 745f 6e61 6d65 2069  pr() if t_name i
-00001350: 6e20 6420 656c 7365 2074 5f6e 616d 6520  n d else t_name 
-00001360: 666f 7220 745f 6e61 6d65 2069 6e20 6578  for t_name in ex
-00001370: 7065 6374 6564 5d0a 2020 2020 2020 2020  pected].        
-00001380: 7265 7475 726e 2022 4578 7065 6374 6564  return "Expected
-00001390: 206f 6e65 206f 663a 205c 6e5c 742a 2025   one of: \n\t* %
-000013a0: 735c 6e22 2025 2027 5c6e 5c74 2a20 272e  s\n" % '\n\t* '.
-000013b0: 6a6f 696e 2865 7870 6563 7465 6429 0a0a  join(expected)..
-000013c0: 0a63 6c61 7373 2055 6e65 7870 6563 7465  .class Unexpecte
-000013d0: 6445 4f46 2850 6172 7365 4572 726f 722c  dEOF(ParseError,
-000013e0: 2055 6e65 7870 6563 7465 6449 6e70 7574   UnexpectedInput
-000013f0: 293a 0a20 2020 2023 2d2d 0a20 2020 2065  ):.    #--.    e
-00001400: 7870 6563 7465 643a 2027 4c69 7374 5b54  xpected: 'List[T
-00001410: 6f6b 656e 5d27 0a0a 2020 2020 6465 6620  oken]'..    def 
-00001420: 5f5f 696e 6974 5f5f 2873 656c 662c 2065  __init__(self, e
-00001430: 7870 6563 7465 642c 2073 7461 7465 3d4e  xpected, state=N
-00001440: 6f6e 652c 2074 6572 6d69 6e61 6c73 5f62  one, terminals_b
-00001450: 795f 6e61 6d65 3d4e 6f6e 6529 3a0a 2020  y_name=None):.  
-00001460: 2020 2020 2020 7375 7065 7228 556e 6578        super(Unex
-00001470: 7065 6374 6564 454f 462c 2073 656c 6629  pectedEOF, self)
-00001480: 2e5f 5f69 6e69 745f 5f28 290a 0a20 2020  .__init__()..   
-00001490: 2020 2020 2073 656c 662e 6578 7065 6374       self.expect
-000014a0: 6564 203d 2065 7870 6563 7465 640a 2020  ed = expected.  
-000014b0: 2020 2020 2020 7365 6c66 2e73 7461 7465        self.state
-000014c0: 203d 2073 7461 7465 0a20 2020 2020 2020   = state.       
-000014d0: 2066 726f 6d20 2e6c 6578 6572 2069 6d70   from .lexer imp
-000014e0: 6f72 7420 546f 6b65 6e0a 2020 2020 2020  ort Token.      
-000014f0: 2020 7365 6c66 2e74 6f6b 656e 203d 2054    self.token = T
-00001500: 6f6b 656e 2822 3c45 4f46 3e22 2c20 2222  oken("<EOF>", ""
-00001510: 2920 2023 230a 0a20 2020 2020 2020 2073  )  ##..        s
-00001520: 656c 662e 706f 735f 696e 5f73 7472 6561  elf.pos_in_strea
-00001530: 6d20 3d20 2d31 0a20 2020 2020 2020 2073  m = -1.        s
-00001540: 656c 662e 6c69 6e65 203d 202d 310a 2020  elf.line = -1.  
-00001550: 2020 2020 2020 7365 6c66 2e63 6f6c 756d        self.colum
-00001560: 6e20 3d20 2d31 0a20 2020 2020 2020 2073  n = -1.        s
-00001570: 656c 662e 5f74 6572 6d69 6e61 6c73 5f62  elf._terminals_b
-00001580: 795f 6e61 6d65 203d 2074 6572 6d69 6e61  y_name = termina
-00001590: 6c73 5f62 795f 6e61 6d65 0a0a 0a20 2020  ls_by_name...   
-000015a0: 2064 6566 205f 5f73 7472 5f5f 2873 656c   def __str__(sel
-000015b0: 6629 3a0a 2020 2020 2020 2020 6d65 7373  f):.        mess
-000015c0: 6167 6520 3d20 2255 6e65 7870 6563 7465  age = "Unexpecte
-000015d0: 6420 656e 642d 6f66 2d69 6e70 7574 2e20  d end-of-input. 
-000015e0: 220a 2020 2020 2020 2020 6d65 7373 6167  ".        messag
-000015f0: 6520 2b3d 2073 656c 662e 5f66 6f72 6d61  e += self._forma
-00001600: 745f 6578 7065 6374 6564 2873 656c 662e  t_expected(self.
-00001610: 6578 7065 6374 6564 290a 2020 2020 2020  expected).      
-00001620: 2020 7265 7475 726e 206d 6573 7361 6765    return message
-00001630: 0a0a 0a63 6c61 7373 2055 6e65 7870 6563  ...class Unexpec
-00001640: 7465 6443 6861 7261 6374 6572 7328 4c65  tedCharacters(Le
-00001650: 7845 7272 6f72 2c20 556e 6578 7065 6374  xError, Unexpect
-00001660: 6564 496e 7075 7429 3a0a 2020 2020 232d  edInput):.    #-
-00001670: 2d0a 0a20 2020 2061 6c6c 6f77 6564 3a20  -..    allowed: 
-00001680: 5365 745b 7374 725d 0a20 2020 2063 6f6e  Set[str].    con
-00001690: 7369 6465 7265 645f 746f 6b65 6e73 3a20  sidered_tokens: 
-000016a0: 5365 745b 416e 795d 0a0a 2020 2020 6465  Set[Any]..    de
-000016b0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-000016c0: 2073 6571 2c20 6c65 785f 706f 732c 206c   seq, lex_pos, l
-000016d0: 696e 652c 2063 6f6c 756d 6e2c 2061 6c6c  ine, column, all
-000016e0: 6f77 6564 3d4e 6f6e 652c 2063 6f6e 7369  owed=None, consi
-000016f0: 6465 7265 645f 746f 6b65 6e73 3d4e 6f6e  dered_tokens=Non
-00001700: 652c 2073 7461 7465 3d4e 6f6e 652c 2074  e, state=None, t
-00001710: 6f6b 656e 5f68 6973 746f 7279 3d4e 6f6e  oken_history=Non
-00001720: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00001730: 2020 2020 7465 726d 696e 616c 735f 6279      terminals_by
-00001740: 5f6e 616d 653d 4e6f 6e65 2c20 636f 6e73  _name=None, cons
-00001750: 6964 6572 6564 5f72 756c 6573 3d4e 6f6e  idered_rules=Non
-00001760: 6529 3a0a 2020 2020 2020 2020 7375 7065  e):.        supe
-00001770: 7228 556e 6578 7065 6374 6564 4368 6172  r(UnexpectedChar
-00001780: 6163 7465 7273 2c20 7365 6c66 292e 5f5f  acters, self).__
-00001790: 696e 6974 5f5f 2829 0a0a 2020 2020 2020  init__()..      
-000017a0: 2020 2323 0a0a 2020 2020 2020 2020 7365    ##..        se
-000017b0: 6c66 2e6c 696e 6520 3d20 6c69 6e65 0a20  lf.line = line. 
-000017c0: 2020 2020 2020 2073 656c 662e 636f 6c75         self.colu
-000017d0: 6d6e 203d 2063 6f6c 756d 6e0a 2020 2020  mn = column.    
-000017e0: 2020 2020 7365 6c66 2e70 6f73 5f69 6e5f      self.pos_in_
-000017f0: 7374 7265 616d 203d 206c 6578 5f70 6f73  stream = lex_pos
-00001800: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
-00001810: 6174 6520 3d20 7374 6174 650a 2020 2020  ate = state.    
-00001820: 2020 2020 7365 6c66 2e5f 7465 726d 696e      self._termin
-00001830: 616c 735f 6279 5f6e 616d 6520 3d20 7465  als_by_name = te
-00001840: 726d 696e 616c 735f 6279 5f6e 616d 650a  rminals_by_name.
-00001850: 0a20 2020 2020 2020 2073 656c 662e 616c  .        self.al
-00001860: 6c6f 7765 6420 3d20 616c 6c6f 7765 640a  lowed = allowed.
-00001870: 2020 2020 2020 2020 7365 6c66 2e63 6f6e          self.con
-00001880: 7369 6465 7265 645f 746f 6b65 6e73 203d  sidered_tokens =
-00001890: 2063 6f6e 7369 6465 7265 645f 746f 6b65   considered_toke
-000018a0: 6e73 0a20 2020 2020 2020 2073 656c 662e  ns.        self.
-000018b0: 636f 6e73 6964 6572 6564 5f72 756c 6573  considered_rules
-000018c0: 203d 2063 6f6e 7369 6465 7265 645f 7275   = considered_ru
-000018d0: 6c65 730a 2020 2020 2020 2020 7365 6c66  les.        self
-000018e0: 2e74 6f6b 656e 5f68 6973 746f 7279 203d  .token_history =
-000018f0: 2074 6f6b 656e 5f68 6973 746f 7279 0a0a   token_history..
-00001900: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00001910: 7461 6e63 6528 7365 712c 2062 7974 6573  tance(seq, bytes
-00001920: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00001930: 656c 662e 6368 6172 203d 2073 6571 5b6c  elf.char = seq[l
-00001940: 6578 5f70 6f73 3a6c 6578 5f70 6f73 202b  ex_pos:lex_pos +
-00001950: 2031 5d2e 6465 636f 6465 2822 6173 6369   1].decode("asci
-00001960: 6922 2c20 2262 6163 6b73 6c61 7368 7265  i", "backslashre
-00001970: 706c 6163 6522 290a 2020 2020 2020 2020  place").        
-00001980: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00001990: 2020 7365 6c66 2e63 6861 7220 3d20 7365    self.char = se
-000019a0: 715b 6c65 785f 706f 735d 0a20 2020 2020  q[lex_pos].     
-000019b0: 2020 2073 656c 662e 5f63 6f6e 7465 7874     self._context
-000019c0: 203d 2073 656c 662e 6765 745f 636f 6e74   = self.get_cont
-000019d0: 6578 7428 7365 7129 0a0a 0a20 2020 2064  ext(seq)...    d
-000019e0: 6566 205f 5f73 7472 5f5f 2873 656c 6629  ef __str__(self)
-000019f0: 3a0a 2020 2020 2020 2020 6d65 7373 6167  :.        messag
-00001a00: 6520 3d20 224e 6f20 7465 726d 696e 616c  e = "No terminal
-00001a10: 206d 6174 6368 6573 2027 2573 2720 696e   matches '%s' in
-00001a20: 2074 6865 2063 7572 7265 6e74 2070 6172   the current par
-00001a30: 7365 7220 636f 6e74 6578 742c 2061 7420  ser context, at 
-00001a40: 6c69 6e65 2025 6420 636f 6c20 2564 2220  line %d col %d" 
-00001a50: 2520 2873 656c 662e 6368 6172 2c20 7365  % (self.char, se
-00001a60: 6c66 2e6c 696e 652c 2073 656c 662e 636f  lf.line, self.co
-00001a70: 6c75 6d6e 290a 2020 2020 2020 2020 6d65  lumn).        me
-00001a80: 7373 6167 6520 2b3d 2027 5c6e 5c6e 2720  ssage += '\n\n' 
-00001a90: 2b20 7365 6c66 2e5f 636f 6e74 6578 740a  + self._context.
-00001aa0: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00001ab0: 616c 6c6f 7765 643a 0a20 2020 2020 2020  allowed:.       
-00001ac0: 2020 2020 206d 6573 7361 6765 202b 3d20       message += 
-00001ad0: 7365 6c66 2e5f 666f 726d 6174 5f65 7870  self._format_exp
-00001ae0: 6563 7465 6428 7365 6c66 2e61 6c6c 6f77  ected(self.allow
-00001af0: 6564 290a 2020 2020 2020 2020 6966 2073  ed).        if s
-00001b00: 656c 662e 746f 6b65 6e5f 6869 7374 6f72  elf.token_histor
-00001b10: 793a 0a20 2020 2020 2020 2020 2020 206d  y:.            m
-00001b20: 6573 7361 6765 202b 3d20 275c 6e50 7265  essage += '\nPre
-00001b30: 7669 6f75 7320 746f 6b65 6e73 3a20 2573  vious tokens: %s
-00001b40: 5c6e 2720 2520 272c 2027 2e6a 6f69 6e28  \n' % ', '.join(
-00001b50: 7265 7072 2874 2920 666f 7220 7420 696e  repr(t) for t in
-00001b60: 2073 656c 662e 746f 6b65 6e5f 6869 7374   self.token_hist
-00001b70: 6f72 7929 0a20 2020 2020 2020 2072 6574  ory).        ret
-00001b80: 7572 6e20 6d65 7373 6167 650a 0a0a 636c  urn message...cl
-00001b90: 6173 7320 556e 6578 7065 6374 6564 546f  ass UnexpectedTo
-00001ba0: 6b65 6e28 5061 7273 6545 7272 6f72 2c20  ken(ParseError, 
-00001bb0: 556e 6578 7065 6374 6564 496e 7075 7429  UnexpectedInput)
-00001bc0: 3a0a 2020 2020 232d 2d0a 0a20 2020 2065  :.    #--..    e
-00001bd0: 7870 6563 7465 643a 2053 6574 5b73 7472  xpected: Set[str
-00001be0: 5d0a 2020 2020 636f 6e73 6964 6572 6564  ].    considered
-00001bf0: 5f72 756c 6573 3a20 5365 745b 7374 725d  _rules: Set[str]
-00001c00: 0a20 2020 2069 6e74 6572 6163 7469 7665  .    interactive
-00001c10: 5f70 6172 7365 723a 2027 496e 7465 7261  _parser: 'Intera
-00001c20: 6374 6976 6550 6172 7365 7227 0a0a 2020  ctiveParser'..  
-00001c30: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-00001c40: 656c 662c 2074 6f6b 656e 2c20 6578 7065  elf, token, expe
-00001c50: 6374 6564 2c20 636f 6e73 6964 6572 6564  cted, considered
-00001c60: 5f72 756c 6573 3d4e 6f6e 652c 2073 7461  _rules=None, sta
-00001c70: 7465 3d4e 6f6e 652c 2069 6e74 6572 6163  te=None, interac
-00001c80: 7469 7665 5f70 6172 7365 723d 4e6f 6e65  tive_parser=None
-00001c90: 2c20 7465 726d 696e 616c 735f 6279 5f6e  , terminals_by_n
-00001ca0: 616d 653d 4e6f 6e65 2c20 746f 6b65 6e5f  ame=None, token_
-00001cb0: 6869 7374 6f72 793d 4e6f 6e65 293a 0a20  history=None):. 
-00001cc0: 2020 2020 2020 2073 7570 6572 2855 6e65         super(Une
-00001cd0: 7870 6563 7465 6454 6f6b 656e 2c20 7365  xpectedToken, se
-00001ce0: 6c66 292e 5f5f 696e 6974 5f5f 2829 0a0a  lf).__init__()..
-00001cf0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
-00001d00: 2020 2020 7365 6c66 2e6c 696e 6520 3d20      self.line = 
-00001d10: 6765 7461 7474 7228 746f 6b65 6e2c 2027  getattr(token, '
-00001d20: 6c69 6e65 272c 2027 3f27 290a 2020 2020  line', '?').    
-00001d30: 2020 2020 7365 6c66 2e63 6f6c 756d 6e20      self.column 
-00001d40: 3d20 6765 7461 7474 7228 746f 6b65 6e2c  = getattr(token,
-00001d50: 2027 636f 6c75 6d6e 272c 2027 3f27 290a   'column', '?').
-00001d60: 2020 2020 2020 2020 7365 6c66 2e70 6f73          self.pos
-00001d70: 5f69 6e5f 7374 7265 616d 203d 2067 6574  _in_stream = get
-00001d80: 6174 7472 2874 6f6b 656e 2c20 2773 7461  attr(token, 'sta
-00001d90: 7274 5f70 6f73 272c 204e 6f6e 6529 0a20  rt_pos', None). 
-00001da0: 2020 2020 2020 2073 656c 662e 7374 6174         self.stat
-00001db0: 6520 3d20 7374 6174 650a 0a20 2020 2020  e = state..     
-00001dc0: 2020 2073 656c 662e 746f 6b65 6e20 3d20     self.token = 
-00001dd0: 746f 6b65 6e0a 2020 2020 2020 2020 7365  token.        se
-00001de0: 6c66 2e65 7870 6563 7465 6420 3d20 6578  lf.expected = ex
-00001df0: 7065 6374 6564 2020 2323 0a0a 2020 2020  pected  ##..    
-00001e00: 2020 2020 7365 6c66 2e5f 6163 6365 7074      self._accept
-00001e10: 7320 3d20 4e4f 5f56 414c 5545 0a20 2020  s = NO_VALUE.   
-00001e20: 2020 2020 2073 656c 662e 636f 6e73 6964       self.consid
-00001e30: 6572 6564 5f72 756c 6573 203d 2063 6f6e  ered_rules = con
-00001e40: 7369 6465 7265 645f 7275 6c65 730a 2020  sidered_rules.  
-00001e50: 2020 2020 2020 7365 6c66 2e69 6e74 6572        self.inter
-00001e60: 6163 7469 7665 5f70 6172 7365 7220 3d20  active_parser = 
-00001e70: 696e 7465 7261 6374 6976 655f 7061 7273  interactive_pars
-00001e80: 6572 0a20 2020 2020 2020 2073 656c 662e  er.        self.
-00001e90: 5f74 6572 6d69 6e61 6c73 5f62 795f 6e61  _terminals_by_na
-00001ea0: 6d65 203d 2074 6572 6d69 6e61 6c73 5f62  me = terminals_b
-00001eb0: 795f 6e61 6d65 0a20 2020 2020 2020 2073  y_name.        s
-00001ec0: 656c 662e 746f 6b65 6e5f 6869 7374 6f72  elf.token_histor
-00001ed0: 7920 3d20 746f 6b65 6e5f 6869 7374 6f72  y = token_histor
-00001ee0: 790a 0a0a 2020 2020 4070 726f 7065 7274  y...    @propert
-00001ef0: 790a 2020 2020 6465 6620 6163 6365 7074  y.    def accept
-00001f00: 7328 7365 6c66 2920 2d3e 2053 6574 5b73  s(self) -> Set[s
-00001f10: 7472 5d3a 0a20 2020 2020 2020 2069 6620  tr]:.        if 
-00001f20: 7365 6c66 2e5f 6163 6365 7074 7320 6973  self._accepts is
-00001f30: 204e 4f5f 5641 4c55 453a 0a20 2020 2020   NO_VALUE:.     
-00001f40: 2020 2020 2020 2073 656c 662e 5f61 6363         self._acc
-00001f50: 6570 7473 203d 2073 656c 662e 696e 7465  epts = self.inte
-00001f60: 7261 6374 6976 655f 7061 7273 6572 2061  ractive_parser a
-00001f70: 6e64 2073 656c 662e 696e 7465 7261 6374  nd self.interact
-00001f80: 6976 655f 7061 7273 6572 2e61 6363 6570  ive_parser.accep
-00001f90: 7473 2829 0a20 2020 2020 2020 2072 6574  ts().        ret
-00001fa0: 7572 6e20 7365 6c66 2e5f 6163 6365 7074  urn self._accept
-00001fb0: 730a 0a20 2020 2064 6566 205f 5f73 7472  s..    def __str
-00001fc0: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
-00001fd0: 2020 6d65 7373 6167 6520 3d20 2822 556e    message = ("Un
-00001fe0: 6578 7065 6374 6564 2074 6f6b 656e 2025  expected token %
-00001ff0: 7220 6174 206c 696e 6520 2573 2c20 636f  r at line %s, co
-00002000: 6c75 6d6e 2025 732e 5c6e 2573 220a 2020  lumn %s.\n%s".  
+000010e0: 2020 2020 2020 2020 2020 2023 230a 0a20             ##.. 
+000010f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001100: 2020 2020 2020 2020 2020 2020 2020 2069                 i
+00001110: 6620 2875 742e 746f 6b65 6e2e 7479 7065  f (ut.token.type
+00001120: 203d 3d20 7365 6c66 2e74 6f6b 656e 2e74   == self.token.t
+00001130: 7970 6529 2061 6e64 206e 6f74 2063 616e  ype) and not can
+00001140: 6469 6461 7465 5b2d 315d 3a0a 2020 2020  didate[-1]:.    
+00001150: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001160: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001170: 6c6f 6767 6572 2e64 6562 7567 2822 546f  logger.debug("To
+00001180: 6b65 6e20 5479 7065 2046 616c 6c62 6163  ken Type Fallbac
+00001190: 6b20 6174 2065 7861 6d70 6c65 205b 2573  k at example [%s
+000011a0: 5d5b 2573 5d22 2025 2028 692c 206a 2929  ][%s]" % (i, j))
+000011b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000011c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000011d0: 2020 2020 2063 616e 6469 6461 7465 203d       candidate =
+000011e0: 206c 6162 656c 2c20 5472 7565 0a0a 2020   label, True..  
+000011f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001200: 2020 2020 2020 6966 2063 616e 6469 6461        if candida
+00001210: 7465 5b30 5d20 6973 204e 6f6e 653a 0a20  te[0] is None:. 
+00001220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001230: 2020 2020 2020 2020 2020 206c 6f67 6765             logge
+00001240: 722e 6465 6275 6728 2253 616d 6520 5374  r.debug("Same St
+00001250: 6174 6520 6d61 7463 6820 6174 2065 7861  ate match at exa
+00001260: 6d70 6c65 205b 2573 5d5b 2573 5d22 2025  mple [%s][%s]" %
+00001270: 2028 692c 206a 2929 0a20 2020 2020 2020   (i, j)).       
+00001280: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00001290: 2020 2020 2063 616e 6469 6461 7465 203d       candidate =
+000012a0: 206c 6162 656c 2c20 4661 6c73 650a 0a20   label, False.. 
+000012b0: 2020 2020 2020 2072 6574 7572 6e20 6361         return ca
+000012c0: 6e64 6964 6174 655b 305d 0a0a 2020 2020  ndidate[0]..    
+000012d0: 6465 6620 5f66 6f72 6d61 745f 6578 7065  def _format_expe
+000012e0: 6374 6564 2873 656c 662c 2065 7870 6563  cted(self, expec
+000012f0: 7465 6429 3a0a 2020 2020 2020 2020 6966  ted):.        if
+00001300: 2073 656c 662e 5f74 6572 6d69 6e61 6c73   self._terminals
+00001310: 5f62 795f 6e61 6d65 3a0a 2020 2020 2020  _by_name:.      
+00001320: 2020 2020 2020 6420 3d20 7365 6c66 2e5f        d = self._
+00001330: 7465 726d 696e 616c 735f 6279 5f6e 616d  terminals_by_nam
+00001340: 650a 2020 2020 2020 2020 2020 2020 6578  e.            ex
+00001350: 7065 6374 6564 203d 205b 645b 745f 6e61  pected = [d[t_na
+00001360: 6d65 5d2e 7573 6572 5f72 6570 7228 2920  me].user_repr() 
+00001370: 6966 2074 5f6e 616d 6520 696e 2064 2065  if t_name in d e
+00001380: 6c73 6520 745f 6e61 6d65 2066 6f72 2074  lse t_name for t
+00001390: 5f6e 616d 6520 696e 2065 7870 6563 7465  _name in expecte
+000013a0: 645d 0a20 2020 2020 2020 2072 6574 7572  d].        retur
+000013b0: 6e20 2245 7870 6563 7465 6420 6f6e 6520  n "Expected one 
+000013c0: 6f66 3a20 5c6e 5c74 2a20 2573 5c6e 2220  of: \n\t* %s\n" 
+000013d0: 2520 275c 6e5c 742a 2027 2e6a 6f69 6e28  % '\n\t* '.join(
+000013e0: 6578 7065 6374 6564 290a 0a0a 636c 6173  expected)...clas
+000013f0: 7320 556e 6578 7065 6374 6564 454f 4628  s UnexpectedEOF(
+00001400: 5061 7273 6545 7272 6f72 2c20 556e 6578  ParseError, Unex
+00001410: 7065 6374 6564 496e 7075 7429 3a0a 2020  pectedInput):.  
+00001420: 2020 232d 2d0a 2020 2020 6578 7065 6374    #--.    expect
+00001430: 6564 3a20 274c 6973 745b 546f 6b65 6e5d  ed: 'List[Token]
+00001440: 270a 0a20 2020 2064 6566 205f 5f69 6e69  '..    def __ini
+00001450: 745f 5f28 7365 6c66 2c20 6578 7065 6374  t__(self, expect
+00001460: 6564 2c20 7374 6174 653d 4e6f 6e65 2c20  ed, state=None, 
+00001470: 7465 726d 696e 616c 735f 6279 5f6e 616d  terminals_by_nam
+00001480: 653d 4e6f 6e65 293a 0a20 2020 2020 2020  e=None):.       
+00001490: 2073 7570 6572 2855 6e65 7870 6563 7465   super(Unexpecte
+000014a0: 6445 4f46 2c20 7365 6c66 292e 5f5f 696e  dEOF, self).__in
+000014b0: 6974 5f5f 2829 0a0a 2020 2020 2020 2020  it__()..        
+000014c0: 7365 6c66 2e65 7870 6563 7465 6420 3d20  self.expected = 
+000014d0: 6578 7065 6374 6564 0a20 2020 2020 2020  expected.       
+000014e0: 2073 656c 662e 7374 6174 6520 3d20 7374   self.state = st
+000014f0: 6174 650a 2020 2020 2020 2020 6672 6f6d  ate.        from
+00001500: 202e 6c65 7865 7220 696d 706f 7274 2054   .lexer import T
+00001510: 6f6b 656e 0a20 2020 2020 2020 2073 656c  oken.        sel
+00001520: 662e 746f 6b65 6e20 3d20 546f 6b65 6e28  f.token = Token(
+00001530: 223c 454f 463e 222c 2022 2229 2020 2323  "<EOF>", "")  ##
+00001540: 0a0a 2020 2020 2020 2020 7365 6c66 2e70  ..        self.p
+00001550: 6f73 5f69 6e5f 7374 7265 616d 203d 202d  os_in_stream = -
+00001560: 310a 2020 2020 2020 2020 7365 6c66 2e6c  1.        self.l
+00001570: 696e 6520 3d20 2d31 0a20 2020 2020 2020  ine = -1.       
+00001580: 2073 656c 662e 636f 6c75 6d6e 203d 202d   self.column = -
+00001590: 310a 2020 2020 2020 2020 7365 6c66 2e5f  1.        self._
+000015a0: 7465 726d 696e 616c 735f 6279 5f6e 616d  terminals_by_nam
+000015b0: 6520 3d20 7465 726d 696e 616c 735f 6279  e = terminals_by
+000015c0: 5f6e 616d 650a 0a0a 2020 2020 6465 6620  _name...    def 
+000015d0: 5f5f 7374 725f 5f28 7365 6c66 293a 0a20  __str__(self):. 
+000015e0: 2020 2020 2020 206d 6573 7361 6765 203d         message =
+000015f0: 2022 556e 6578 7065 6374 6564 2065 6e64   "Unexpected end
+00001600: 2d6f 662d 696e 7075 742e 2022 0a20 2020  -of-input. ".   
+00001610: 2020 2020 206d 6573 7361 6765 202b 3d20       message += 
+00001620: 7365 6c66 2e5f 666f 726d 6174 5f65 7870  self._format_exp
+00001630: 6563 7465 6428 7365 6c66 2e65 7870 6563  ected(self.expec
+00001640: 7465 6429 0a20 2020 2020 2020 2072 6574  ted).        ret
+00001650: 7572 6e20 6d65 7373 6167 650a 0a0a 636c  urn message...cl
+00001660: 6173 7320 556e 6578 7065 6374 6564 4368  ass UnexpectedCh
+00001670: 6172 6163 7465 7273 284c 6578 4572 726f  aracters(LexErro
+00001680: 722c 2055 6e65 7870 6563 7465 6449 6e70  r, UnexpectedInp
+00001690: 7574 293a 0a20 2020 2023 2d2d 0a0a 2020  ut):.    #--..  
+000016a0: 2020 616c 6c6f 7765 643a 2053 6574 5b73    allowed: Set[s
+000016b0: 7472 5d0a 2020 2020 636f 6e73 6964 6572  tr].    consider
+000016c0: 6564 5f74 6f6b 656e 733a 2053 6574 5b41  ed_tokens: Set[A
+000016d0: 6e79 5d0a 0a20 2020 2064 6566 205f 5f69  ny]..    def __i
+000016e0: 6e69 745f 5f28 7365 6c66 2c20 7365 712c  nit__(self, seq,
+000016f0: 206c 6578 5f70 6f73 2c20 6c69 6e65 2c20   lex_pos, line, 
+00001700: 636f 6c75 6d6e 2c20 616c 6c6f 7765 643d  column, allowed=
+00001710: 4e6f 6e65 2c20 636f 6e73 6964 6572 6564  None, considered
+00001720: 5f74 6f6b 656e 733d 4e6f 6e65 2c20 7374  _tokens=None, st
+00001730: 6174 653d 4e6f 6e65 2c20 746f 6b65 6e5f  ate=None, token_
+00001740: 6869 7374 6f72 793d 4e6f 6e65 2c0a 2020  history=None,.  
+00001750: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+00001760: 6572 6d69 6e61 6c73 5f62 795f 6e61 6d65  erminals_by_name
+00001770: 3d4e 6f6e 652c 2063 6f6e 7369 6465 7265  =None, considere
+00001780: 645f 7275 6c65 733d 4e6f 6e65 293a 0a20  d_rules=None):. 
+00001790: 2020 2020 2020 2073 7570 6572 2855 6e65         super(Une
+000017a0: 7870 6563 7465 6443 6861 7261 6374 6572  xpectedCharacter
+000017b0: 732c 2073 656c 6629 2e5f 5f69 6e69 745f  s, self).__init_
+000017c0: 5f28 290a 0a20 2020 2020 2020 2023 230a  _()..        ##.
+000017d0: 0a20 2020 2020 2020 2073 656c 662e 6c69  .        self.li
+000017e0: 6e65 203d 206c 696e 650a 2020 2020 2020  ne = line.      
+000017f0: 2020 7365 6c66 2e63 6f6c 756d 6e20 3d20    self.column = 
+00001800: 636f 6c75 6d6e 0a20 2020 2020 2020 2073  column.        s
+00001810: 656c 662e 706f 735f 696e 5f73 7472 6561  elf.pos_in_strea
+00001820: 6d20 3d20 6c65 785f 706f 730a 2020 2020  m = lex_pos.    
+00001830: 2020 2020 7365 6c66 2e73 7461 7465 203d      self.state =
+00001840: 2073 7461 7465 0a20 2020 2020 2020 2073   state.        s
+00001850: 656c 662e 5f74 6572 6d69 6e61 6c73 5f62  elf._terminals_b
+00001860: 795f 6e61 6d65 203d 2074 6572 6d69 6e61  y_name = termina
+00001870: 6c73 5f62 795f 6e61 6d65 0a0a 2020 2020  ls_by_name..    
+00001880: 2020 2020 7365 6c66 2e61 6c6c 6f77 6564      self.allowed
+00001890: 203d 2061 6c6c 6f77 6564 0a20 2020 2020   = allowed.     
+000018a0: 2020 2073 656c 662e 636f 6e73 6964 6572     self.consider
+000018b0: 6564 5f74 6f6b 656e 7320 3d20 636f 6e73  ed_tokens = cons
+000018c0: 6964 6572 6564 5f74 6f6b 656e 730a 2020  idered_tokens.  
+000018d0: 2020 2020 2020 7365 6c66 2e63 6f6e 7369        self.consi
+000018e0: 6465 7265 645f 7275 6c65 7320 3d20 636f  dered_rules = co
+000018f0: 6e73 6964 6572 6564 5f72 756c 6573 0a20  nsidered_rules. 
+00001900: 2020 2020 2020 2073 656c 662e 746f 6b65         self.toke
+00001910: 6e5f 6869 7374 6f72 7920 3d20 746f 6b65  n_history = toke
+00001920: 6e5f 6869 7374 6f72 790a 0a20 2020 2020  n_history..     
+00001930: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00001940: 2873 6571 2c20 6279 7465 7329 3a0a 2020  (seq, bytes):.  
+00001950: 2020 2020 2020 2020 2020 7365 6c66 2e63            self.c
+00001960: 6861 7220 3d20 7365 715b 6c65 785f 706f  har = seq[lex_po
+00001970: 733a 6c65 785f 706f 7320 2b20 315d 2e64  s:lex_pos + 1].d
+00001980: 6563 6f64 6528 2261 7363 6969 222c 2022  ecode("ascii", "
+00001990: 6261 636b 736c 6173 6872 6570 6c61 6365  backslashreplace
+000019a0: 2229 0a20 2020 2020 2020 2065 6c73 653a  ").        else:
+000019b0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+000019c0: 662e 6368 6172 203d 2073 6571 5b6c 6578  f.char = seq[lex
+000019d0: 5f70 6f73 5d0a 2020 2020 2020 2020 7365  _pos].        se
+000019e0: 6c66 2e5f 636f 6e74 6578 7420 3d20 7365  lf._context = se
+000019f0: 6c66 2e67 6574 5f63 6f6e 7465 7874 2873  lf.get_context(s
+00001a00: 6571 290a 0a0a 2020 2020 6465 6620 5f5f  eq)...    def __
+00001a10: 7374 725f 5f28 7365 6c66 293a 0a20 2020  str__(self):.   
+00001a20: 2020 2020 206d 6573 7361 6765 203d 2022       message = "
+00001a30: 4e6f 2074 6572 6d69 6e61 6c20 6d61 7463  No terminal matc
+00001a40: 6865 7320 2725 7327 2069 6e20 7468 6520  hes '%s' in the 
+00001a50: 6375 7272 656e 7420 7061 7273 6572 2063  current parser c
+00001a60: 6f6e 7465 7874 2c20 6174 206c 696e 6520  ontext, at line 
+00001a70: 2564 2063 6f6c 2025 6422 2025 2028 7365  %d col %d" % (se
+00001a80: 6c66 2e63 6861 722c 2073 656c 662e 6c69  lf.char, self.li
+00001a90: 6e65 2c20 7365 6c66 2e63 6f6c 756d 6e29  ne, self.column)
+00001aa0: 0a20 2020 2020 2020 206d 6573 7361 6765  .        message
+00001ab0: 202b 3d20 275c 6e5c 6e27 202b 2073 656c   += '\n\n' + sel
+00001ac0: 662e 5f63 6f6e 7465 7874 0a20 2020 2020  f._context.     
+00001ad0: 2020 2069 6620 7365 6c66 2e61 6c6c 6f77     if self.allow
+00001ae0: 6564 3a0a 2020 2020 2020 2020 2020 2020  ed:.            
+00001af0: 6d65 7373 6167 6520 2b3d 2073 656c 662e  message += self.
+00001b00: 5f66 6f72 6d61 745f 6578 7065 6374 6564  _format_expected
+00001b10: 2873 656c 662e 616c 6c6f 7765 6429 0a20  (self.allowed). 
+00001b20: 2020 2020 2020 2069 6620 7365 6c66 2e74         if self.t
+00001b30: 6f6b 656e 5f68 6973 746f 7279 3a0a 2020  oken_history:.  
+00001b40: 2020 2020 2020 2020 2020 6d65 7373 6167            messag
+00001b50: 6520 2b3d 2027 5c6e 5072 6576 696f 7573  e += '\nPrevious
+00001b60: 2074 6f6b 656e 733a 2025 735c 6e27 2025   tokens: %s\n' %
+00001b70: 2027 2c20 272e 6a6f 696e 2872 6570 7228   ', '.join(repr(
+00001b80: 7429 2066 6f72 2074 2069 6e20 7365 6c66  t) for t in self
+00001b90: 2e74 6f6b 656e 5f68 6973 746f 7279 290a  .token_history).
+00001ba0: 2020 2020 2020 2020 7265 7475 726e 206d          return m
+00001bb0: 6573 7361 6765 0a0a 0a63 6c61 7373 2055  essage...class U
+00001bc0: 6e65 7870 6563 7465 6454 6f6b 656e 2850  nexpectedToken(P
+00001bd0: 6172 7365 4572 726f 722c 2055 6e65 7870  arseError, Unexp
+00001be0: 6563 7465 6449 6e70 7574 293a 0a20 2020  ectedInput):.   
+00001bf0: 2023 2d2d 0a0a 2020 2020 6578 7065 6374   #--..    expect
+00001c00: 6564 3a20 5365 745b 7374 725d 0a20 2020  ed: Set[str].   
+00001c10: 2063 6f6e 7369 6465 7265 645f 7275 6c65   considered_rule
+00001c20: 733a 2053 6574 5b73 7472 5d0a 0a20 2020  s: Set[str]..   
+00001c30: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+00001c40: 6c66 2c20 746f 6b65 6e2c 2065 7870 6563  lf, token, expec
+00001c50: 7465 642c 2063 6f6e 7369 6465 7265 645f  ted, considered_
+00001c60: 7275 6c65 733d 4e6f 6e65 2c20 7374 6174  rules=None, stat
+00001c70: 653d 4e6f 6e65 2c20 696e 7465 7261 6374  e=None, interact
+00001c80: 6976 655f 7061 7273 6572 3d4e 6f6e 652c  ive_parser=None,
+00001c90: 2074 6572 6d69 6e61 6c73 5f62 795f 6e61   terminals_by_na
+00001ca0: 6d65 3d4e 6f6e 652c 2074 6f6b 656e 5f68  me=None, token_h
+00001cb0: 6973 746f 7279 3d4e 6f6e 6529 3a0a 2020  istory=None):.  
+00001cc0: 2020 2020 2020 7375 7065 7228 556e 6578        super(Unex
+00001cd0: 7065 6374 6564 546f 6b65 6e2c 2073 656c  pectedToken, sel
+00001ce0: 6629 2e5f 5f69 6e69 745f 5f28 290a 0a20  f).__init__().. 
+00001cf0: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
+00001d00: 2020 2073 656c 662e 6c69 6e65 203d 2067     self.line = g
+00001d10: 6574 6174 7472 2874 6f6b 656e 2c20 276c  etattr(token, 'l
+00001d20: 696e 6527 2c20 273f 2729 0a20 2020 2020  ine', '?').     
+00001d30: 2020 2073 656c 662e 636f 6c75 6d6e 203d     self.column =
+00001d40: 2067 6574 6174 7472 2874 6f6b 656e 2c20   getattr(token, 
+00001d50: 2763 6f6c 756d 6e27 2c20 273f 2729 0a20  'column', '?'). 
+00001d60: 2020 2020 2020 2073 656c 662e 706f 735f         self.pos_
+00001d70: 696e 5f73 7472 6561 6d20 3d20 6765 7461  in_stream = geta
+00001d80: 7474 7228 746f 6b65 6e2c 2027 7374 6172  ttr(token, 'star
+00001d90: 745f 706f 7327 2c20 4e6f 6e65 290a 2020  t_pos', None).  
+00001da0: 2020 2020 2020 7365 6c66 2e73 7461 7465        self.state
+00001db0: 203d 2073 7461 7465 0a0a 2020 2020 2020   = state..      
+00001dc0: 2020 7365 6c66 2e74 6f6b 656e 203d 2074    self.token = t
+00001dd0: 6f6b 656e 0a20 2020 2020 2020 2073 656c  oken.        sel
+00001de0: 662e 6578 7065 6374 6564 203d 2065 7870  f.expected = exp
+00001df0: 6563 7465 6420 2023 230a 0a20 2020 2020  ected  ##..     
+00001e00: 2020 2073 656c 662e 5f61 6363 6570 7473     self._accepts
+00001e10: 203d 204e 4f5f 5641 4c55 450a 2020 2020   = NO_VALUE.    
+00001e20: 2020 2020 7365 6c66 2e63 6f6e 7369 6465      self.conside
+00001e30: 7265 645f 7275 6c65 7320 3d20 636f 6e73  red_rules = cons
+00001e40: 6964 6572 6564 5f72 756c 6573 0a20 2020  idered_rules.   
+00001e50: 2020 2020 2073 656c 662e 696e 7465 7261       self.intera
+00001e60: 6374 6976 655f 7061 7273 6572 203d 2069  ctive_parser = i
+00001e70: 6e74 6572 6163 7469 7665 5f70 6172 7365  nteractive_parse
+00001e80: 720a 2020 2020 2020 2020 7365 6c66 2e5f  r.        self._
+00001e90: 7465 726d 696e 616c 735f 6279 5f6e 616d  terminals_by_nam
+00001ea0: 6520 3d20 7465 726d 696e 616c 735f 6279  e = terminals_by
+00001eb0: 5f6e 616d 650a 2020 2020 2020 2020 7365  _name.        se
+00001ec0: 6c66 2e74 6f6b 656e 5f68 6973 746f 7279  lf.token_history
+00001ed0: 203d 2074 6f6b 656e 5f68 6973 746f 7279   = token_history
+00001ee0: 0a0a 0a20 2020 2040 7072 6f70 6572 7479  ...    @property
+00001ef0: 0a20 2020 2064 6566 2061 6363 6570 7473  .    def accepts
+00001f00: 2873 656c 6629 202d 3e20 5365 745b 7374  (self) -> Set[st
+00001f10: 725d 3a0a 2020 2020 2020 2020 6966 2073  r]:.        if s
+00001f20: 656c 662e 5f61 6363 6570 7473 2069 7320  elf._accepts is 
+00001f30: 4e4f 5f56 414c 5545 3a0a 2020 2020 2020  NO_VALUE:.      
+00001f40: 2020 2020 2020 7365 6c66 2e5f 6163 6365        self._acce
+00001f50: 7074 7320 3d20 7365 6c66 2e69 6e74 6572  pts = self.inter
+00001f60: 6163 7469 7665 5f70 6172 7365 7220 616e  active_parser an
+00001f70: 6420 7365 6c66 2e69 6e74 6572 6163 7469  d self.interacti
+00001f80: 7665 5f70 6172 7365 722e 6163 6365 7074  ve_parser.accept
+00001f90: 7328 290a 2020 2020 2020 2020 7265 7475  s().        retu
+00001fa0: 726e 2073 656c 662e 5f61 6363 6570 7473  rn self._accepts
+00001fb0: 0a0a 2020 2020 6465 6620 5f5f 7374 725f  ..    def __str_
+00001fc0: 5f28 7365 6c66 293a 0a20 2020 2020 2020  _(self):.       
+00001fd0: 206d 6573 7361 6765 203d 2028 2255 6e65   message = ("Une
+00001fe0: 7870 6563 7465 6420 746f 6b65 6e20 2572  xpected token %r
+00001ff0: 2061 7420 6c69 6e65 2025 732c 2063 6f6c   at line %s, col
+00002000: 756d 6e20 2573 2e5c 6e25 7322 0a20 2020  umn %s.\n%s".   
 00002010: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00002020: 2025 2028 7365 6c66 2e74 6f6b 656e 2c20   % (self.token, 
-00002030: 7365 6c66 2e6c 696e 652c 2073 656c 662e  self.line, self.
-00002040: 636f 6c75 6d6e 2c20 7365 6c66 2e5f 666f  column, self._fo
-00002050: 726d 6174 5f65 7870 6563 7465 6428 7365  rmat_expected(se
-00002060: 6c66 2e61 6363 6570 7473 206f 7220 7365  lf.accepts or se
-00002070: 6c66 2e65 7870 6563 7465 6429 2929 0a20  lf.expected))). 
-00002080: 2020 2020 2020 2069 6620 7365 6c66 2e74         if self.t
-00002090: 6f6b 656e 5f68 6973 746f 7279 3a0a 2020  oken_history:.  
-000020a0: 2020 2020 2020 2020 2020 6d65 7373 6167            messag
-000020b0: 6520 2b3d 2022 5072 6576 696f 7573 2074  e += "Previous t
-000020c0: 6f6b 656e 733a 2025 725c 6e22 2025 2073  okens: %r\n" % s
-000020d0: 656c 662e 746f 6b65 6e5f 6869 7374 6f72  elf.token_histor
-000020e0: 790a 0a20 2020 2020 2020 2072 6574 7572  y..        retur
-000020f0: 6e20 6d65 7373 6167 650a 0a0a 0a63 6c61  n message....cla
-00002100: 7373 2056 6973 6974 4572 726f 7228 4c61  ss VisitError(La
-00002110: 726b 4572 726f 7229 3a0a 2020 2020 232d  rkError):.    #-
-00002120: 2d0a 0a20 2020 206f 626a 3a20 2755 6e69  -..    obj: 'Uni
-00002130: 6f6e 5b54 7265 652c 2054 6f6b 656e 5d27  on[Tree, Token]'
-00002140: 0a20 2020 206f 7269 675f 6578 633a 2045  .    orig_exc: E
-00002150: 7863 6570 7469 6f6e 0a0a 2020 2020 6465  xception..    de
-00002160: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-00002170: 2072 756c 652c 206f 626a 2c20 6f72 6967   rule, obj, orig
-00002180: 5f65 7863 293a 0a20 2020 2020 2020 206d  _exc):.        m
-00002190: 6573 7361 6765 203d 2027 4572 726f 7220  essage = 'Error 
-000021a0: 7472 7969 6e67 2074 6f20 7072 6f63 6573  trying to proces
-000021b0: 7320 7275 6c65 2022 2573 223a 5c6e 5c6e  s rule "%s":\n\n
-000021c0: 2573 2720 2520 2872 756c 652c 206f 7269  %s' % (rule, ori
-000021d0: 675f 6578 6329 0a20 2020 2020 2020 2073  g_exc).        s
-000021e0: 7570 6572 2856 6973 6974 4572 726f 722c  uper(VisitError,
-000021f0: 2073 656c 6629 2e5f 5f69 6e69 745f 5f28   self).__init__(
-00002200: 6d65 7373 6167 6529 0a0a 2020 2020 2020  message)..      
-00002210: 2020 7365 6c66 2e72 756c 6520 3d20 7275    self.rule = ru
-00002220: 6c65 0a20 2020 2020 2020 2073 656c 662e  le.        self.
-00002230: 6f62 6a20 3d20 6f62 6a0a 2020 2020 2020  obj = obj.      
-00002240: 2020 7365 6c66 2e6f 7269 675f 6578 6320    self.orig_exc 
-00002250: 3d20 6f72 6967 5f65 7863 0a0a 0a63 6c61  = orig_exc...cla
-00002260: 7373 204d 6973 7369 6e67 5661 7269 6162  ss MissingVariab
-00002270: 6c65 4572 726f 7228 4c61 726b 4572 726f  leError(LarkErro
-00002280: 7229 3a0a 2020 2020 7061 7373 0a0a 0a69  r):.    pass...i
-00002290: 6d70 6f72 7420 7379 732c 2072 650a 696d  mport sys, re.im
-000022a0: 706f 7274 206c 6f67 6769 6e67 0a0a 6c6f  port logging..lo
-000022b0: 6767 6572 3a20 6c6f 6767 696e 672e 4c6f  gger: logging.Lo
-000022c0: 6767 6572 203d 206c 6f67 6769 6e67 2e67  gger = logging.g
-000022d0: 6574 4c6f 6767 6572 2822 6c61 726b 2229  etLogger("lark")
-000022e0: 0a6c 6f67 6765 722e 6164 6448 616e 646c  .logger.addHandl
-000022f0: 6572 286c 6f67 6769 6e67 2e53 7472 6561  er(logging.Strea
-00002300: 6d48 616e 646c 6572 2829 290a 2323 0a0a  mHandler()).##..
-00002310: 2323 0a0a 6c6f 6767 6572 2e73 6574 4c65  ##..logger.setLe
-00002320: 7665 6c28 6c6f 6767 696e 672e 4352 4954  vel(logging.CRIT
-00002330: 4943 414c 290a 0a0a 4e4f 5f56 414c 5545  ICAL)...NO_VALUE
-00002340: 203d 206f 626a 6563 7428 290a 0a54 203d   = object()..T =
-00002350: 2054 7970 6556 6172 2822 5422 290a 0a0a   TypeVar("T")...
-00002360: 6465 6620 636c 6173 7369 6679 2873 6571  def classify(seq
-00002370: 3a20 5365 7175 656e 6365 2c20 6b65 793a  : Sequence, key:
-00002380: 204f 7074 696f 6e61 6c5b 4361 6c6c 6162   Optional[Callab
-00002390: 6c65 5d20 3d20 4e6f 6e65 2c20 7661 6c75  le] = None, valu
-000023a0: 653a 204f 7074 696f 6e61 6c5b 4361 6c6c  e: Optional[Call
-000023b0: 6162 6c65 5d20 3d20 4e6f 6e65 2920 2d3e  able] = None) ->
-000023c0: 2044 6963 743a 0a20 2020 2064 3a20 4469   Dict:.    d: Di
-000023d0: 6374 5b41 6e79 2c20 416e 795d 203d 207b  ct[Any, Any] = {
-000023e0: 7d0a 2020 2020 666f 7220 6974 656d 2069  }.    for item i
-000023f0: 6e20 7365 713a 0a20 2020 2020 2020 206b  n seq:.        k
-00002400: 203d 206b 6579 2869 7465 6d29 2069 6620   = key(item) if 
-00002410: 286b 6579 2069 7320 6e6f 7420 4e6f 6e65  (key is not None
-00002420: 2920 656c 7365 2069 7465 6d0a 2020 2020  ) else item.    
-00002430: 2020 2020 7620 3d20 7661 6c75 6528 6974      v = value(it
-00002440: 656d 2920 6966 2028 7661 6c75 6520 6973  em) if (value is
-00002450: 206e 6f74 204e 6f6e 6529 2065 6c73 6520   not None) else 
-00002460: 6974 656d 0a20 2020 2020 2020 2069 6620  item.        if 
-00002470: 6b20 696e 2064 3a0a 2020 2020 2020 2020  k in d:.        
-00002480: 2020 2020 645b 6b5d 2e61 7070 656e 6428      d[k].append(
-00002490: 7629 0a20 2020 2020 2020 2065 6c73 653a  v).        else:
-000024a0: 0a20 2020 2020 2020 2020 2020 2064 5b6b  .            d[k
-000024b0: 5d20 3d20 5b76 5d0a 2020 2020 7265 7475  ] = [v].    retu
-000024c0: 726e 2064 0a0a 0a64 6566 205f 6465 7365  rn d...def _dese
-000024d0: 7269 616c 697a 6528 6461 7461 3a20 416e  rialize(data: An
-000024e0: 792c 206e 616d 6573 7061 6365 3a20 4469  y, namespace: Di
-000024f0: 6374 5b73 7472 2c20 416e 795d 2c20 6d65  ct[str, Any], me
-00002500: 6d6f 3a20 4469 6374 2920 2d3e 2041 6e79  mo: Dict) -> Any
-00002510: 3a0a 2020 2020 6966 2069 7369 6e73 7461  :.    if isinsta
-00002520: 6e63 6528 6461 7461 2c20 6469 6374 293a  nce(data, dict):
-00002530: 0a20 2020 2020 2020 2069 6620 275f 5f74  .        if '__t
-00002540: 7970 655f 5f27 2069 6e20 6461 7461 3a20  ype__' in data: 
-00002550: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
-00002560: 2063 6c61 7373 5f20 3d20 6e61 6d65 7370   class_ = namesp
-00002570: 6163 655b 6461 7461 5b27 5f5f 7479 7065  ace[data['__type
-00002580: 5f5f 275d 5d0a 2020 2020 2020 2020 2020  __']].          
-00002590: 2020 7265 7475 726e 2063 6c61 7373 5f2e    return class_.
-000025a0: 6465 7365 7269 616c 697a 6528 6461 7461  deserialize(data
-000025b0: 2c20 6d65 6d6f 290a 2020 2020 2020 2020  , memo).        
-000025c0: 656c 6966 2027 4027 2069 6e20 6461 7461  elif '@' in data
-000025d0: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-000025e0: 7475 726e 206d 656d 6f5b 6461 7461 5b27  turn memo[data['
-000025f0: 4027 5d5d 0a20 2020 2020 2020 2072 6574  @']].        ret
-00002600: 7572 6e20 7b6b 6579 3a5f 6465 7365 7269  urn {key:_deseri
-00002610: 616c 697a 6528 7661 6c75 652c 206e 616d  alize(value, nam
-00002620: 6573 7061 6365 2c20 6d65 6d6f 2920 666f  espace, memo) fo
-00002630: 7220 6b65 792c 2076 616c 7565 2069 6e20  r key, value in 
-00002640: 6461 7461 2e69 7465 6d73 2829 7d0a 2020  data.items()}.  
-00002650: 2020 656c 6966 2069 7369 6e73 7461 6e63    elif isinstanc
-00002660: 6528 6461 7461 2c20 6c69 7374 293a 0a20  e(data, list):. 
-00002670: 2020 2020 2020 2072 6574 7572 6e20 5b5f         return [_
-00002680: 6465 7365 7269 616c 697a 6528 7661 6c75  deserialize(valu
-00002690: 652c 206e 616d 6573 7061 6365 2c20 6d65  e, namespace, me
-000026a0: 6d6f 2920 666f 7220 7661 6c75 6520 696e  mo) for value in
-000026b0: 2064 6174 615d 0a20 2020 2072 6574 7572   data].    retur
-000026c0: 6e20 6461 7461 0a0a 0a5f 5420 3d20 5479  n data..._T = Ty
-000026d0: 7065 5661 7228 225f 5422 2c20 626f 756e  peVar("_T", boun
-000026e0: 643d 2253 6572 6961 6c69 7a65 2229 0a0a  d="Serialize")..
-000026f0: 636c 6173 7320 5365 7269 616c 697a 653a  class Serialize:
-00002700: 0a20 2020 2023 2d2d 0a0a 2020 2020 6465  .    #--..    de
-00002710: 6620 6d65 6d6f 5f73 6572 6961 6c69 7a65  f memo_serialize
-00002720: 2873 656c 662c 2074 7970 6573 5f74 6f5f  (self, types_to_
-00002730: 6d65 6d6f 697a 653a 204c 6973 7429 202d  memoize: List) -
-00002740: 3e20 416e 793a 0a20 2020 2020 2020 206d  > Any:.        m
-00002750: 656d 6f20 3d20 5365 7269 616c 697a 654d  emo = SerializeM
-00002760: 656d 6f69 7a65 7228 7479 7065 735f 746f  emoizer(types_to
-00002770: 5f6d 656d 6f69 7a65 290a 2020 2020 2020  _memoize).      
-00002780: 2020 7265 7475 726e 2073 656c 662e 7365    return self.se
-00002790: 7269 616c 697a 6528 6d65 6d6f 292c 206d  rialize(memo), m
-000027a0: 656d 6f2e 7365 7269 616c 697a 6528 290a  emo.serialize().
-000027b0: 0a20 2020 2064 6566 2073 6572 6961 6c69  .    def seriali
-000027c0: 7a65 2873 656c 662c 206d 656d 6f20 3d20  ze(self, memo = 
-000027d0: 4e6f 6e65 2920 2d3e 2044 6963 745b 7374  None) -> Dict[st
-000027e0: 722c 2041 6e79 5d3a 0a20 2020 2020 2020  r, Any]:.       
-000027f0: 2069 6620 6d65 6d6f 2061 6e64 206d 656d   if memo and mem
-00002800: 6f2e 696e 5f74 7970 6573 2873 656c 6629  o.in_types(self)
-00002810: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00002820: 7475 726e 207b 2740 273a 206d 656d 6f2e  turn {'@': memo.
-00002830: 6d65 6d6f 697a 6564 2e67 6574 2873 656c  memoized.get(sel
-00002840: 6629 7d0a 0a20 2020 2020 2020 2066 6965  f)}..        fie
-00002850: 6c64 7320 3d20 6765 7461 7474 7228 7365  lds = getattr(se
-00002860: 6c66 2c20 275f 5f73 6572 6961 6c69 7a65  lf, '__serialize
-00002870: 5f66 6965 6c64 735f 5f27 290a 2020 2020  _fields__').    
-00002880: 2020 2020 7265 7320 3d20 7b66 3a20 5f73      res = {f: _s
-00002890: 6572 6961 6c69 7a65 2867 6574 6174 7472  erialize(getattr
-000028a0: 2873 656c 662c 2066 292c 206d 656d 6f29  (self, f), memo)
-000028b0: 2066 6f72 2066 2069 6e20 6669 656c 6473   for f in fields
-000028c0: 7d0a 2020 2020 2020 2020 7265 735b 275f  }.        res['_
-000028d0: 5f74 7970 655f 5f27 5d20 3d20 7479 7065  _type__'] = type
-000028e0: 2873 656c 6629 2e5f 5f6e 616d 655f 5f0a  (self).__name__.
-000028f0: 2020 2020 2020 2020 6966 2068 6173 6174          if hasat
-00002900: 7472 2873 656c 662c 2027 5f73 6572 6961  tr(self, '_seria
-00002910: 6c69 7a65 2729 3a0a 2020 2020 2020 2020  lize'):.        
-00002920: 2020 2020 7365 6c66 2e5f 7365 7269 616c      self._serial
-00002930: 697a 6528 7265 732c 206d 656d 6f29 2020  ize(res, memo)  
-00002940: 2323 0a0a 2020 2020 2020 2020 7265 7475  ##..        retu
-00002950: 726e 2072 6573 0a0a 2020 2020 4063 6c61  rn res..    @cla
-00002960: 7373 6d65 7468 6f64 0a20 2020 2064 6566  ssmethod.    def
-00002970: 2064 6573 6572 6961 6c69 7a65 2863 6c73   deserialize(cls
-00002980: 3a20 5479 7065 5b5f 545d 2c20 6461 7461  : Type[_T], data
-00002990: 3a20 4469 6374 5b73 7472 2c20 416e 795d  : Dict[str, Any]
-000029a0: 2c20 6d65 6d6f 3a20 4469 6374 5b69 6e74  , memo: Dict[int
-000029b0: 2c20 416e 795d 2920 2d3e 205f 543a 0a20  , Any]) -> _T:. 
-000029c0: 2020 2020 2020 206e 616d 6573 7061 6365         namespace
-000029d0: 203d 2067 6574 6174 7472 2863 6c73 2c20   = getattr(cls, 
-000029e0: 275f 5f73 6572 6961 6c69 7a65 5f6e 616d  '__serialize_nam
-000029f0: 6573 7061 6365 5f5f 272c 205b 5d29 0a20  espace__', []). 
-00002a00: 2020 2020 2020 206e 616d 6573 7061 6365         namespace
-00002a10: 203d 207b 632e 5f5f 6e61 6d65 5f5f 3a63   = {c.__name__:c
-00002a20: 2066 6f72 2063 2069 6e20 6e61 6d65 7370   for c in namesp
-00002a30: 6163 657d 0a0a 2020 2020 2020 2020 6669  ace}..        fi
-00002a40: 656c 6473 203d 2067 6574 6174 7472 2863  elds = getattr(c
-00002a50: 6c73 2c20 275f 5f73 6572 6961 6c69 7a65  ls, '__serialize
-00002a60: 5f66 6965 6c64 735f 5f27 290a 0a20 2020  _fields__')..   
-00002a70: 2020 2020 2069 6620 2740 2720 696e 2064       if '@' in d
-00002a80: 6174 613a 0a20 2020 2020 2020 2020 2020  ata:.           
-00002a90: 2072 6574 7572 6e20 6d65 6d6f 5b64 6174   return memo[dat
-00002aa0: 615b 2740 275d 5d0a 0a20 2020 2020 2020  a['@']]..       
-00002ab0: 2069 6e73 7420 3d20 636c 732e 5f5f 6e65   inst = cls.__ne
-00002ac0: 775f 5f28 636c 7329 0a20 2020 2020 2020  w__(cls).       
-00002ad0: 2066 6f72 2066 2069 6e20 6669 656c 6473   for f in fields
-00002ae0: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
-00002af0: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00002b00: 2020 2073 6574 6174 7472 2869 6e73 742c     setattr(inst,
-00002b10: 2066 2c20 5f64 6573 6572 6961 6c69 7a65   f, _deserialize
-00002b20: 2864 6174 615b 665d 2c20 6e61 6d65 7370  (data[f], namesp
-00002b30: 6163 652c 206d 656d 6f29 290a 2020 2020  ace, memo)).    
-00002b40: 2020 2020 2020 2020 6578 6365 7074 204b          except K
-00002b50: 6579 4572 726f 7220 6173 2065 3a0a 2020  eyError as e:.  
-00002b60: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00002b70: 6973 6520 4b65 7945 7272 6f72 2822 4361  ise KeyError("Ca
-00002b80: 6e6e 6f74 2066 696e 6420 6b65 7920 666f  nnot find key fo
-00002b90: 7220 636c 6173 7322 2c20 636c 732c 2065  r class", cls, e
-00002ba0: 290a 0a20 2020 2020 2020 2069 6620 6861  )..        if ha
-00002bb0: 7361 7474 7228 696e 7374 2c20 275f 6465  sattr(inst, '_de
-00002bc0: 7365 7269 616c 697a 6527 293a 0a20 2020  serialize'):.   
-00002bd0: 2020 2020 2020 2020 2069 6e73 742e 5f64           inst._d
-00002be0: 6573 6572 6961 6c69 7a65 2829 2020 2323  eserialize()  ##
-00002bf0: 0a0a 0a20 2020 2020 2020 2072 6574 7572  ...        retur
-00002c00: 6e20 696e 7374 0a0a 0a63 6c61 7373 2053  n inst...class S
-00002c10: 6572 6961 6c69 7a65 4d65 6d6f 697a 6572  erializeMemoizer
-00002c20: 2853 6572 6961 6c69 7a65 293a 0a20 2020  (Serialize):.   
-00002c30: 2023 2d2d 0a0a 2020 2020 5f5f 7365 7269   #--..    __seri
-00002c40: 616c 697a 655f 6669 656c 6473 5f5f 203d  alize_fields__ =
-00002c50: 2027 6d65 6d6f 697a 6564 272c 0a0a 2020   'memoized',..  
-00002c60: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-00002c70: 656c 662c 2074 7970 6573 5f74 6f5f 6d65  elf, types_to_me
-00002c80: 6d6f 697a 653a 204c 6973 7429 202d 3e20  moize: List) -> 
-00002c90: 4e6f 6e65 3a0a 2020 2020 2020 2020 7365  None:.        se
-00002ca0: 6c66 2e74 7970 6573 5f74 6f5f 6d65 6d6f  lf.types_to_memo
-00002cb0: 697a 6520 3d20 7475 706c 6528 7479 7065  ize = tuple(type
-00002cc0: 735f 746f 5f6d 656d 6f69 7a65 290a 2020  s_to_memoize).  
-00002cd0: 2020 2020 2020 7365 6c66 2e6d 656d 6f69        self.memoi
-00002ce0: 7a65 6420 3d20 456e 756d 6572 6174 6f72  zed = Enumerator
-00002cf0: 2829 0a0a 2020 2020 6465 6620 696e 5f74  ()..    def in_t
-00002d00: 7970 6573 2873 656c 662c 2076 616c 7565  ypes(self, value
-00002d10: 3a20 5365 7269 616c 697a 6529 202d 3e20  : Serialize) -> 
-00002d20: 626f 6f6c 3a0a 2020 2020 2020 2020 7265  bool:.        re
-00002d30: 7475 726e 2069 7369 6e73 7461 6e63 6528  turn isinstance(
-00002d40: 7661 6c75 652c 2073 656c 662e 7479 7065  value, self.type
-00002d50: 735f 746f 5f6d 656d 6f69 7a65 290a 0a20  s_to_memoize).. 
-00002d60: 2020 2064 6566 2073 6572 6961 6c69 7a65     def serialize
-00002d70: 2873 656c 6629 202d 3e20 4469 6374 5b69  (self) -> Dict[i
-00002d80: 6e74 2c20 416e 795d 3a20 2023 230a 0a20  nt, Any]:  ##.. 
-00002d90: 2020 2020 2020 2072 6574 7572 6e20 5f73         return _s
-00002da0: 6572 6961 6c69 7a65 2873 656c 662e 6d65  erialize(self.me
-00002db0: 6d6f 697a 6564 2e72 6576 6572 7365 6428  moized.reversed(
-00002dc0: 292c 204e 6f6e 6529 0a0a 2020 2020 4063  ), None)..    @c
-00002dd0: 6c61 7373 6d65 7468 6f64 0a20 2020 2064  lassmethod.    d
-00002de0: 6566 2064 6573 6572 6961 6c69 7a65 2863  ef deserialize(c
-00002df0: 6c73 2c20 6461 7461 3a20 4469 6374 5b69  ls, data: Dict[i
-00002e00: 6e74 2c20 416e 795d 2c20 6e61 6d65 7370  nt, Any], namesp
-00002e10: 6163 653a 2044 6963 745b 7374 722c 2041  ace: Dict[str, A
-00002e20: 6e79 5d2c 206d 656d 6f3a 2044 6963 745b  ny], memo: Dict[
-00002e30: 416e 792c 2041 6e79 5d29 202d 3e20 4469  Any, Any]) -> Di
-00002e40: 6374 5b69 6e74 2c20 416e 795d 3a20 2023  ct[int, Any]:  #
-00002e50: 230a 0a20 2020 2020 2020 2072 6574 7572  #..        retur
-00002e60: 6e20 5f64 6573 6572 6961 6c69 7a65 2864  n _deserialize(d
-00002e70: 6174 612c 206e 616d 6573 7061 6365 2c20  ata, namespace, 
-00002e80: 6d65 6d6f 290a 0a0a 7472 793a 0a20 2020  memo)...try:.   
-00002e90: 2069 6d70 6f72 7420 7265 6765 780a 2020   import regex.  
-00002ea0: 2020 5f68 6173 5f72 6567 6578 203d 2054    _has_regex = T
-00002eb0: 7275 650a 6578 6365 7074 2049 6d70 6f72  rue.except Impor
-00002ec0: 7445 7272 6f72 3a0a 2020 2020 5f68 6173  tError:.    _has
-00002ed0: 5f72 6567 6578 203d 2046 616c 7365 0a0a  _regex = False..
-00002ee0: 6966 2073 7973 2e76 6572 7369 6f6e 5f69  if sys.version_i
-00002ef0: 6e66 6f20 3e3d 2028 332c 2031 3129 3a0a  nfo >= (3, 11):.
-00002f00: 2020 2020 696d 706f 7274 2072 652e 5f70      import re._p
-00002f10: 6172 7365 7220 6173 2073 7265 5f70 6172  arser as sre_par
-00002f20: 7365 0a20 2020 2069 6d70 6f72 7420 7265  se.    import re
-00002f30: 2e5f 636f 6e73 7461 6e74 7320 6173 2073  ._constants as s
-00002f40: 7265 5f63 6f6e 7374 616e 7473 0a65 6c73  re_constants.els
-00002f50: 653a 0a20 2020 2069 6d70 6f72 7420 7372  e:.    import sr
-00002f60: 655f 7061 7273 650a 2020 2020 696d 706f  e_parse.    impo
-00002f70: 7274 2073 7265 5f63 6f6e 7374 616e 7473  rt sre_constants
-00002f80: 0a0a 6361 7465 675f 7061 7474 6572 6e20  ..categ_pattern 
-00002f90: 3d20 7265 2e63 6f6d 7069 6c65 2872 275c  = re.compile(r'\
-00002fa0: 5c70 7b5b 412d 5a61 2d7a 5f5d 2b7d 2729  \p{[A-Za-z_]+}')
-00002fb0: 0a0a 6465 6620 6765 745f 7265 6765 7870  ..def get_regexp
-00002fc0: 5f77 6964 7468 2865 7870 723a 2073 7472  _width(expr: str
-00002fd0: 2920 2d3e 2055 6e69 6f6e 5b54 7570 6c65  ) -> Union[Tuple
-00002fe0: 5b69 6e74 2c20 696e 745d 2c20 4c69 7374  [int, int], List
-00002ff0: 5b69 6e74 5d5d 3a0a 2020 2020 6966 205f  [int]]:.    if _
-00003000: 6861 735f 7265 6765 783a 0a20 2020 2020  has_regex:.     
-00003010: 2020 2023 230a 0a20 2020 2020 2020 2023     ##..        #
-00003020: 230a 0a20 2020 2020 2020 2023 230a 0a20  #..        ##.. 
-00003030: 2020 2020 2020 2072 6567 6578 705f 6669         regexp_fi
-00003040: 6e61 6c20 3d20 7265 2e73 7562 2863 6174  nal = re.sub(cat
-00003050: 6567 5f70 6174 7465 726e 2c20 2741 272c  eg_pattern, 'A',
-00003060: 2065 7870 7229 0a20 2020 2065 6c73 653a   expr).    else:
-00003070: 0a20 2020 2020 2020 2069 6620 7265 2e73  .        if re.s
-00003080: 6561 7263 6828 6361 7465 675f 7061 7474  earch(categ_patt
-00003090: 6572 6e2c 2065 7870 7229 3a0a 2020 2020  ern, expr):.    
-000030a0: 2020 2020 2020 2020 7261 6973 6520 496d          raise Im
-000030b0: 706f 7274 4572 726f 7228 2760 7265 6765  portError('`rege
-000030c0: 7860 206d 6f64 756c 6520 6d75 7374 2062  x` module must b
-000030d0: 6520 696e 7374 616c 6c65 6420 696e 206f  e installed in o
-000030e0: 7264 6572 2074 6f20 7573 6520 556e 6963  rder to use Unic
-000030f0: 6f64 6520 6361 7465 676f 7269 6573 2e27  ode categories.'
-00003100: 2c20 6578 7072 290a 2020 2020 2020 2020  , expr).        
-00003110: 7265 6765 7870 5f66 696e 616c 203d 2065  regexp_final = e
-00003120: 7870 720a 2020 2020 7472 793a 0a20 2020  xpr.    try:.   
-00003130: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
-00003140: 2072 6574 7572 6e20 5b69 6e74 2878 2920   return [int(x) 
-00003150: 666f 7220 7820 696e 2073 7265 5f70 6172  for x in sre_par
-00003160: 7365 2e70 6172 7365 2872 6567 6578 705f  se.parse(regexp_
-00003170: 6669 6e61 6c29 2e67 6574 7769 6474 6828  final).getwidth(
-00003180: 295d 2020 2023 230a 0a20 2020 2065 7863  )]   ##..    exc
-00003190: 6570 7420 7372 655f 636f 6e73 7461 6e74  ept sre_constant
-000031a0: 732e 6572 726f 723a 0a20 2020 2020 2020  s.error:.       
-000031b0: 2069 6620 6e6f 7420 5f68 6173 5f72 6567   if not _has_reg
-000031c0: 6578 3a0a 2020 2020 2020 2020 2020 2020  ex:.            
-000031d0: 7261 6973 6520 5661 6c75 6545 7272 6f72  raise ValueError
-000031e0: 2865 7870 7229 0a20 2020 2020 2020 2065  (expr).        e
-000031f0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00003200: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
-00003210: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
-00003220: 2063 203d 2072 6567 6578 2e63 6f6d 7069   c = regex.compi
-00003230: 6c65 2872 6567 6578 705f 6669 6e61 6c29  le(regexp_final)
-00003240: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00003250: 632e 6d61 7463 6828 2727 2920 6973 204e  c.match('') is N
-00003260: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00003270: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
-00003280: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-00003290: 312c 2069 6e74 2873 7265 5f63 6f6e 7374  1, int(sre_const
-000032a0: 616e 7473 2e4d 4158 5245 5045 4154 290a  ants.MAXREPEAT).
-000032b0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000032c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000032d0: 2020 7265 7475 726e 2030 2c20 696e 7428    return 0, int(
-000032e0: 7372 655f 636f 6e73 7461 6e74 732e 4d41  sre_constants.MA
-000032f0: 5852 4550 4541 5429 0a0a 0a66 726f 6d20  XREPEAT)...from 
-00003300: 636f 6c6c 6563 7469 6f6e 7320 696d 706f  collections impo
-00003310: 7274 204f 7264 6572 6564 4469 6374 0a0a  rt OrderedDict..
-00003320: 636c 6173 7320 4d65 7461 3a0a 0a20 2020  class Meta:..   
-00003330: 2065 6d70 7479 3a20 626f 6f6c 0a20 2020   empty: bool.   
-00003340: 206c 696e 653a 2069 6e74 0a20 2020 2063   line: int.    c
-00003350: 6f6c 756d 6e3a 2069 6e74 0a20 2020 2073  olumn: int.    s
-00003360: 7461 7274 5f70 6f73 3a20 696e 740a 2020  tart_pos: int.  
-00003370: 2020 656e 645f 6c69 6e65 3a20 696e 740a    end_line: int.
-00003380: 2020 2020 656e 645f 636f 6c75 6d6e 3a20      end_column: 
-00003390: 696e 740a 2020 2020 656e 645f 706f 733a  int.    end_pos:
-000033a0: 2069 6e74 0a20 2020 206f 7269 675f 6578   int.    orig_ex
-000033b0: 7061 6e73 696f 6e3a 2027 4c69 7374 5b54  pansion: 'List[T
-000033c0: 6572 6d69 6e61 6c44 6566 5d27 0a20 2020  erminalDef]'.   
-000033d0: 206d 6174 6368 5f74 7265 653a 2062 6f6f   match_tree: boo
-000033e0: 6c0a 0a20 2020 2064 6566 205f 5f69 6e69  l..    def __ini
-000033f0: 745f 5f28 7365 6c66 293a 0a20 2020 2020  t__(self):.     
-00003400: 2020 2073 656c 662e 656d 7074 7920 3d20     self.empty = 
-00003410: 5472 7565 0a0a 0a5f 4c65 6166 5f54 203d  True..._Leaf_T =
-00003420: 2054 7970 6556 6172 2822 5f4c 6561 665f   TypeVar("_Leaf_
-00003430: 5422 290a 4272 616e 6368 203d 2055 6e69  T").Branch = Uni
-00003440: 6f6e 5b5f 4c65 6166 5f54 2c20 2754 7265  on[_Leaf_T, 'Tre
-00003450: 655b 5f4c 6561 665f 545d 275d 0a0a 0a63  e[_Leaf_T]']...c
-00003460: 6c61 7373 2054 7265 6528 4765 6e65 7269  lass Tree(Generi
-00003470: 635b 5f4c 6561 665f 545d 293a 0a20 2020  c[_Leaf_T]):.   
-00003480: 2023 2d2d 0a0a 2020 2020 6461 7461 3a20   #--..    data: 
-00003490: 7374 720a 2020 2020 6368 696c 6472 656e  str.    children
-000034a0: 3a20 274c 6973 745b 4272 616e 6368 5b5f  : 'List[Branch[_
-000034b0: 4c65 6166 5f54 5d5d 270a 0a20 2020 2064  Leaf_T]]'..    d
-000034c0: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-000034d0: 2c20 6461 7461 3a20 7374 722c 2063 6869  , data: str, chi
-000034e0: 6c64 7265 6e3a 2027 4c69 7374 5b42 7261  ldren: 'List[Bra
-000034f0: 6e63 685b 5f4c 6561 665f 545d 5d27 2c20  nch[_Leaf_T]]', 
-00003500: 6d65 7461 3a20 4f70 7469 6f6e 616c 5b4d  meta: Optional[M
-00003510: 6574 615d 3d4e 6f6e 6529 202d 3e20 4e6f  eta]=None) -> No
-00003520: 6e65 3a0a 2020 2020 2020 2020 7365 6c66  ne:.        self
-00003530: 2e64 6174 6120 3d20 6461 7461 0a20 2020  .data = data.   
-00003540: 2020 2020 2073 656c 662e 6368 696c 6472       self.childr
-00003550: 656e 203d 2063 6869 6c64 7265 6e0a 2020  en = children.  
-00003560: 2020 2020 2020 7365 6c66 2e5f 6d65 7461        self._meta
-00003570: 203d 206d 6574 610a 0a20 2020 2040 7072   = meta..    @pr
-00003580: 6f70 6572 7479 0a20 2020 2064 6566 206d  operty.    def m
-00003590: 6574 6128 7365 6c66 2920 2d3e 204d 6574  eta(self) -> Met
-000035a0: 613a 0a20 2020 2020 2020 2069 6620 7365  a:.        if se
-000035b0: 6c66 2e5f 6d65 7461 2069 7320 4e6f 6e65  lf._meta is None
-000035c0: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-000035d0: 6c66 2e5f 6d65 7461 203d 204d 6574 6128  lf._meta = Meta(
-000035e0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-000035f0: 2073 656c 662e 5f6d 6574 610a 0a20 2020   self._meta..   
-00003600: 2064 6566 205f 5f72 6570 725f 5f28 7365   def __repr__(se
-00003610: 6c66 293a 0a20 2020 2020 2020 2072 6574  lf):.        ret
-00003620: 7572 6e20 2754 7265 6528 2572 2c20 2572  urn 'Tree(%r, %r
-00003630: 2927 2025 2028 7365 6c66 2e64 6174 612c  )' % (self.data,
-00003640: 2073 656c 662e 6368 696c 6472 656e 290a   self.children).
-00003650: 0a20 2020 2064 6566 205f 7072 6574 7479  .    def _pretty
-00003660: 5f6c 6162 656c 2873 656c 6629 3a0a 2020  _label(self):.  
-00003670: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00003680: 662e 6461 7461 0a0a 2020 2020 6465 6620  f.data..    def 
-00003690: 5f70 7265 7474 7928 7365 6c66 2c20 6c65  _pretty(self, le
-000036a0: 7665 6c2c 2069 6e64 656e 745f 7374 7229  vel, indent_str)
-000036b0: 3a0a 2020 2020 2020 2020 7969 656c 6420  :.        yield 
-000036c0: 6627 7b69 6e64 656e 745f 7374 722a 6c65  f'{indent_str*le
-000036d0: 7665 6c7d 7b73 656c 662e 5f70 7265 7474  vel}{self._prett
-000036e0: 795f 6c61 6265 6c28 297d 270a 2020 2020  y_label()}'.    
-000036f0: 2020 2020 6966 206c 656e 2873 656c 662e      if len(self.
-00003700: 6368 696c 6472 656e 2920 3d3d 2031 2061  children) == 1 a
-00003710: 6e64 206e 6f74 2069 7369 6e73 7461 6e63  nd not isinstanc
-00003720: 6528 7365 6c66 2e63 6869 6c64 7265 6e5b  e(self.children[
-00003730: 305d 2c20 5472 6565 293a 0a20 2020 2020  0], Tree):.     
-00003740: 2020 2020 2020 2079 6965 6c64 2066 275c         yield f'\
-00003750: 747b 7365 6c66 2e63 6869 6c64 7265 6e5b  t{self.children[
-00003760: 305d 7d5c 6e27 0a20 2020 2020 2020 2065  0]}\n'.        e
-00003770: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00003780: 2079 6965 6c64 2027 5c6e 270a 2020 2020   yield '\n'.    
-00003790: 2020 2020 2020 2020 666f 7220 6e20 696e          for n in
-000037a0: 2073 656c 662e 6368 696c 6472 656e 3a0a   self.children:.
-000037b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000037c0: 6966 2069 7369 6e73 7461 6e63 6528 6e2c  if isinstance(n,
-000037d0: 2054 7265 6529 3a0a 2020 2020 2020 2020   Tree):.        
-000037e0: 2020 2020 2020 2020 2020 2020 7969 656c              yiel
-000037f0: 6420 6672 6f6d 206e 2e5f 7072 6574 7479  d from n._pretty
-00003800: 286c 6576 656c 2b31 2c20 696e 6465 6e74  (level+1, indent
-00003810: 5f73 7472 290a 2020 2020 2020 2020 2020  _str).          
-00003820: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00002020: 2520 2873 656c 662e 746f 6b65 6e2c 2073  % (self.token, s
+00002030: 656c 662e 6c69 6e65 2c20 7365 6c66 2e63  elf.line, self.c
+00002040: 6f6c 756d 6e2c 2073 656c 662e 5f66 6f72  olumn, self._for
+00002050: 6d61 745f 6578 7065 6374 6564 2873 656c  mat_expected(sel
+00002060: 662e 6163 6365 7074 7320 6f72 2073 656c  f.accepts or sel
+00002070: 662e 6578 7065 6374 6564 2929 290a 2020  f.expected))).  
+00002080: 2020 2020 2020 6966 2073 656c 662e 746f        if self.to
+00002090: 6b65 6e5f 6869 7374 6f72 793a 0a20 2020  ken_history:.   
+000020a0: 2020 2020 2020 2020 206d 6573 7361 6765           message
+000020b0: 202b 3d20 2250 7265 7669 6f75 7320 746f   += "Previous to
+000020c0: 6b65 6e73 3a20 2572 5c6e 2220 2520 7365  kens: %r\n" % se
+000020d0: 6c66 2e74 6f6b 656e 5f68 6973 746f 7279  lf.token_history
+000020e0: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+000020f0: 206d 6573 7361 6765 0a0a 0a0a 636c 6173   message....clas
+00002100: 7320 5669 7369 7445 7272 6f72 284c 6172  s VisitError(Lar
+00002110: 6b45 7272 6f72 293a 0a20 2020 2023 2d2d  kError):.    #--
+00002120: 0a0a 2020 2020 6f62 6a3a 2027 556e 696f  ..    obj: 'Unio
+00002130: 6e5b 5472 6565 2c20 546f 6b65 6e5d 270a  n[Tree, Token]'.
+00002140: 2020 2020 6f72 6967 5f65 7863 3a20 4578      orig_exc: Ex
+00002150: 6365 7074 696f 6e0a 0a20 2020 2064 6566  ception..    def
+00002160: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+00002170: 7275 6c65 2c20 6f62 6a2c 206f 7269 675f  rule, obj, orig_
+00002180: 6578 6329 3a0a 2020 2020 2020 2020 6d65  exc):.        me
+00002190: 7373 6167 6520 3d20 2745 7272 6f72 2074  ssage = 'Error t
+000021a0: 7279 696e 6720 746f 2070 726f 6365 7373  rying to process
+000021b0: 2072 756c 6520 2225 7322 3a5c 6e5c 6e25   rule "%s":\n\n%
+000021c0: 7327 2025 2028 7275 6c65 2c20 6f72 6967  s' % (rule, orig
+000021d0: 5f65 7863 290a 2020 2020 2020 2020 7375  _exc).        su
+000021e0: 7065 7228 5669 7369 7445 7272 6f72 2c20  per(VisitError, 
+000021f0: 7365 6c66 292e 5f5f 696e 6974 5f5f 286d  self).__init__(m
+00002200: 6573 7361 6765 290a 0a20 2020 2020 2020  essage)..       
+00002210: 2073 656c 662e 7275 6c65 203d 2072 756c   self.rule = rul
+00002220: 650a 2020 2020 2020 2020 7365 6c66 2e6f  e.        self.o
+00002230: 626a 203d 206f 626a 0a20 2020 2020 2020  bj = obj.       
+00002240: 2073 656c 662e 6f72 6967 5f65 7863 203d   self.orig_exc =
+00002250: 206f 7269 675f 6578 630a 0a0a 636c 6173   orig_exc...clas
+00002260: 7320 4d69 7373 696e 6756 6172 6961 626c  s MissingVariabl
+00002270: 6545 7272 6f72 284c 6172 6b45 7272 6f72  eError(LarkError
+00002280: 293a 0a20 2020 2070 6173 730a 0a0a 696d  ):.    pass...im
+00002290: 706f 7274 2073 7973 2c20 7265 0a69 6d70  port sys, re.imp
+000022a0: 6f72 7420 6c6f 6767 696e 670a 0a6c 6f67  ort logging..log
+000022b0: 6765 723a 206c 6f67 6769 6e67 2e4c 6f67  ger: logging.Log
+000022c0: 6765 7220 3d20 6c6f 6767 696e 672e 6765  ger = logging.ge
+000022d0: 744c 6f67 6765 7228 226c 6172 6b22 290a  tLogger("lark").
+000022e0: 6c6f 6767 6572 2e61 6464 4861 6e64 6c65  logger.addHandle
+000022f0: 7228 6c6f 6767 696e 672e 5374 7265 616d  r(logging.Stream
+00002300: 4861 6e64 6c65 7228 2929 0a23 230a 0a23  Handler()).##..#
+00002310: 230a 0a6c 6f67 6765 722e 7365 744c 6576  #..logger.setLev
+00002320: 656c 286c 6f67 6769 6e67 2e43 5249 5449  el(logging.CRITI
+00002330: 4341 4c29 0a0a 0a4e 4f5f 5641 4c55 4520  CAL)...NO_VALUE 
+00002340: 3d20 6f62 6a65 6374 2829 0a0a 5420 3d20  = object()..T = 
+00002350: 5479 7065 5661 7228 2254 2229 0a0a 0a64  TypeVar("T")...d
+00002360: 6566 2063 6c61 7373 6966 7928 7365 713a  ef classify(seq:
+00002370: 2049 7465 7261 626c 652c 206b 6579 3a20   Iterable, key: 
+00002380: 4f70 7469 6f6e 616c 5b43 616c 6c61 626c  Optional[Callabl
+00002390: 655d 203d 204e 6f6e 652c 2076 616c 7565  e] = None, value
+000023a0: 3a20 4f70 7469 6f6e 616c 5b43 616c 6c61  : Optional[Calla
+000023b0: 626c 655d 203d 204e 6f6e 6529 202d 3e20  ble] = None) -> 
+000023c0: 4469 6374 3a0a 2020 2020 643a 2044 6963  Dict:.    d: Dic
+000023d0: 745b 416e 792c 2041 6e79 5d20 3d20 7b7d  t[Any, Any] = {}
+000023e0: 0a20 2020 2066 6f72 2069 7465 6d20 696e  .    for item in
+000023f0: 2073 6571 3a0a 2020 2020 2020 2020 6b20   seq:.        k 
+00002400: 3d20 6b65 7928 6974 656d 2920 6966 2028  = key(item) if (
+00002410: 6b65 7920 6973 206e 6f74 204e 6f6e 6529  key is not None)
+00002420: 2065 6c73 6520 6974 656d 0a20 2020 2020   else item.     
+00002430: 2020 2076 203d 2076 616c 7565 2869 7465     v = value(ite
+00002440: 6d29 2069 6620 2876 616c 7565 2069 7320  m) if (value is 
+00002450: 6e6f 7420 4e6f 6e65 2920 656c 7365 2069  not None) else i
+00002460: 7465 6d0a 2020 2020 2020 2020 7472 793a  tem.        try:
+00002470: 0a20 2020 2020 2020 2020 2020 2064 5b6b  .            d[k
+00002480: 5d2e 6170 7065 6e64 2876 290a 2020 2020  ].append(v).    
+00002490: 2020 2020 6578 6365 7074 204b 6579 4572      except KeyEr
+000024a0: 726f 723a 0a20 2020 2020 2020 2020 2020  ror:.           
+000024b0: 2064 5b6b 5d20 3d20 5b76 5d0a 2020 2020   d[k] = [v].    
+000024c0: 7265 7475 726e 2064 0a0a 0a64 6566 205f  return d...def _
+000024d0: 6465 7365 7269 616c 697a 6528 6461 7461  deserialize(data
+000024e0: 3a20 416e 792c 206e 616d 6573 7061 6365  : Any, namespace
+000024f0: 3a20 4469 6374 5b73 7472 2c20 416e 795d  : Dict[str, Any]
+00002500: 2c20 6d65 6d6f 3a20 4469 6374 2920 2d3e  , memo: Dict) ->
+00002510: 2041 6e79 3a0a 2020 2020 6966 2069 7369   Any:.    if isi
+00002520: 6e73 7461 6e63 6528 6461 7461 2c20 6469  nstance(data, di
+00002530: 6374 293a 0a20 2020 2020 2020 2069 6620  ct):.        if 
+00002540: 275f 5f74 7970 655f 5f27 2069 6e20 6461  '__type__' in da
+00002550: 7461 3a20 2023 230a 0a20 2020 2020 2020  ta:  ##..       
+00002560: 2020 2020 2063 6c61 7373 5f20 3d20 6e61       class_ = na
+00002570: 6d65 7370 6163 655b 6461 7461 5b27 5f5f  mespace[data['__
+00002580: 7479 7065 5f5f 275d 5d0a 2020 2020 2020  type__']].      
+00002590: 2020 2020 2020 7265 7475 726e 2063 6c61        return cla
+000025a0: 7373 5f2e 6465 7365 7269 616c 697a 6528  ss_.deserialize(
+000025b0: 6461 7461 2c20 6d65 6d6f 290a 2020 2020  data, memo).    
+000025c0: 2020 2020 656c 6966 2027 4027 2069 6e20      elif '@' in 
+000025d0: 6461 7461 3a0a 2020 2020 2020 2020 2020  data:.          
+000025e0: 2020 7265 7475 726e 206d 656d 6f5b 6461    return memo[da
+000025f0: 7461 5b27 4027 5d5d 0a20 2020 2020 2020  ta['@']].       
+00002600: 2072 6574 7572 6e20 7b6b 6579 3a5f 6465   return {key:_de
+00002610: 7365 7269 616c 697a 6528 7661 6c75 652c  serialize(value,
+00002620: 206e 616d 6573 7061 6365 2c20 6d65 6d6f   namespace, memo
+00002630: 2920 666f 7220 6b65 792c 2076 616c 7565  ) for key, value
+00002640: 2069 6e20 6461 7461 2e69 7465 6d73 2829   in data.items()
+00002650: 7d0a 2020 2020 656c 6966 2069 7369 6e73  }.    elif isins
+00002660: 7461 6e63 6528 6461 7461 2c20 6c69 7374  tance(data, list
+00002670: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00002680: 6e20 5b5f 6465 7365 7269 616c 697a 6528  n [_deserialize(
+00002690: 7661 6c75 652c 206e 616d 6573 7061 6365  value, namespace
+000026a0: 2c20 6d65 6d6f 2920 666f 7220 7661 6c75  , memo) for valu
+000026b0: 6520 696e 2064 6174 615d 0a20 2020 2072  e in data].    r
+000026c0: 6574 7572 6e20 6461 7461 0a0a 0a5f 5420  eturn data..._T 
+000026d0: 3d20 5479 7065 5661 7228 225f 5422 2c20  = TypeVar("_T", 
+000026e0: 626f 756e 643d 2253 6572 6961 6c69 7a65  bound="Serialize
+000026f0: 2229 0a0a 636c 6173 7320 5365 7269 616c  ")..class Serial
+00002700: 697a 653a 0a20 2020 2023 2d2d 0a0a 2020  ize:.    #--..  
+00002710: 2020 6465 6620 6d65 6d6f 5f73 6572 6961    def memo_seria
+00002720: 6c69 7a65 2873 656c 662c 2074 7970 6573  lize(self, types
+00002730: 5f74 6f5f 6d65 6d6f 697a 653a 204c 6973  _to_memoize: Lis
+00002740: 7429 202d 3e20 416e 793a 0a20 2020 2020  t) -> Any:.     
+00002750: 2020 206d 656d 6f20 3d20 5365 7269 616c     memo = Serial
+00002760: 697a 654d 656d 6f69 7a65 7228 7479 7065  izeMemoizer(type
+00002770: 735f 746f 5f6d 656d 6f69 7a65 290a 2020  s_to_memoize).  
+00002780: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00002790: 662e 7365 7269 616c 697a 6528 6d65 6d6f  f.serialize(memo
+000027a0: 292c 206d 656d 6f2e 7365 7269 616c 697a  ), memo.serializ
+000027b0: 6528 290a 0a20 2020 2064 6566 2073 6572  e()..    def ser
+000027c0: 6961 6c69 7a65 2873 656c 662c 206d 656d  ialize(self, mem
+000027d0: 6f20 3d20 4e6f 6e65 2920 2d3e 2044 6963  o = None) -> Dic
+000027e0: 745b 7374 722c 2041 6e79 5d3a 0a20 2020  t[str, Any]:.   
+000027f0: 2020 2020 2069 6620 6d65 6d6f 2061 6e64       if memo and
+00002800: 206d 656d 6f2e 696e 5f74 7970 6573 2873   memo.in_types(s
+00002810: 656c 6629 3a0a 2020 2020 2020 2020 2020  elf):.          
+00002820: 2020 7265 7475 726e 207b 2740 273a 206d    return {'@': m
+00002830: 656d 6f2e 6d65 6d6f 697a 6564 2e67 6574  emo.memoized.get
+00002840: 2873 656c 6629 7d0a 0a20 2020 2020 2020  (self)}..       
+00002850: 2066 6965 6c64 7320 3d20 6765 7461 7474   fields = getatt
+00002860: 7228 7365 6c66 2c20 275f 5f73 6572 6961  r(self, '__seria
+00002870: 6c69 7a65 5f66 6965 6c64 735f 5f27 290a  lize_fields__').
+00002880: 2020 2020 2020 2020 7265 7320 3d20 7b66          res = {f
+00002890: 3a20 5f73 6572 6961 6c69 7a65 2867 6574  : _serialize(get
+000028a0: 6174 7472 2873 656c 662c 2066 292c 206d  attr(self, f), m
+000028b0: 656d 6f29 2066 6f72 2066 2069 6e20 6669  emo) for f in fi
+000028c0: 656c 6473 7d0a 2020 2020 2020 2020 7265  elds}.        re
+000028d0: 735b 275f 5f74 7970 655f 5f27 5d20 3d20  s['__type__'] = 
+000028e0: 7479 7065 2873 656c 6629 2e5f 5f6e 616d  type(self).__nam
+000028f0: 655f 5f0a 2020 2020 2020 2020 6966 2068  e__.        if h
+00002900: 6173 6174 7472 2873 656c 662c 2027 5f73  asattr(self, '_s
+00002910: 6572 6961 6c69 7a65 2729 3a0a 2020 2020  erialize'):.    
+00002920: 2020 2020 2020 2020 7365 6c66 2e5f 7365          self._se
+00002930: 7269 616c 697a 6528 7265 732c 206d 656d  rialize(res, mem
+00002940: 6f29 2020 2323 0a0a 2020 2020 2020 2020  o)  ##..        
+00002950: 7265 7475 726e 2072 6573 0a0a 2020 2020  return res..    
+00002960: 4063 6c61 7373 6d65 7468 6f64 0a20 2020  @classmethod.   
+00002970: 2064 6566 2064 6573 6572 6961 6c69 7a65   def deserialize
+00002980: 2863 6c73 3a20 5479 7065 5b5f 545d 2c20  (cls: Type[_T], 
+00002990: 6461 7461 3a20 4469 6374 5b73 7472 2c20  data: Dict[str, 
+000029a0: 416e 795d 2c20 6d65 6d6f 3a20 4469 6374  Any], memo: Dict
+000029b0: 5b69 6e74 2c20 416e 795d 2920 2d3e 205f  [int, Any]) -> _
+000029c0: 543a 0a20 2020 2020 2020 206e 616d 6573  T:.        names
+000029d0: 7061 6365 203d 2067 6574 6174 7472 2863  pace = getattr(c
+000029e0: 6c73 2c20 275f 5f73 6572 6961 6c69 7a65  ls, '__serialize
+000029f0: 5f6e 616d 6573 7061 6365 5f5f 272c 205b  _namespace__', [
+00002a00: 5d29 0a20 2020 2020 2020 206e 616d 6573  ]).        names
+00002a10: 7061 6365 203d 207b 632e 5f5f 6e61 6d65  pace = {c.__name
+00002a20: 5f5f 3a63 2066 6f72 2063 2069 6e20 6e61  __:c for c in na
+00002a30: 6d65 7370 6163 657d 0a0a 2020 2020 2020  mespace}..      
+00002a40: 2020 6669 656c 6473 203d 2067 6574 6174    fields = getat
+00002a50: 7472 2863 6c73 2c20 275f 5f73 6572 6961  tr(cls, '__seria
+00002a60: 6c69 7a65 5f66 6965 6c64 735f 5f27 290a  lize_fields__').
+00002a70: 0a20 2020 2020 2020 2069 6620 2740 2720  .        if '@' 
+00002a80: 696e 2064 6174 613a 0a20 2020 2020 2020  in data:.       
+00002a90: 2020 2020 2072 6574 7572 6e20 6d65 6d6f       return memo
+00002aa0: 5b64 6174 615b 2740 275d 5d0a 0a20 2020  [data['@']]..   
+00002ab0: 2020 2020 2069 6e73 7420 3d20 636c 732e       inst = cls.
+00002ac0: 5f5f 6e65 775f 5f28 636c 7329 0a20 2020  __new__(cls).   
+00002ad0: 2020 2020 2066 6f72 2066 2069 6e20 6669       for f in fi
+00002ae0: 656c 6473 3a0a 2020 2020 2020 2020 2020  elds:.          
+00002af0: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
+00002b00: 2020 2020 2020 2073 6574 6174 7472 2869         setattr(i
+00002b10: 6e73 742c 2066 2c20 5f64 6573 6572 6961  nst, f, _deseria
+00002b20: 6c69 7a65 2864 6174 615b 665d 2c20 6e61  lize(data[f], na
+00002b30: 6d65 7370 6163 652c 206d 656d 6f29 290a  mespace, memo)).
+00002b40: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00002b50: 7074 204b 6579 4572 726f 7220 6173 2065  pt KeyError as e
+00002b60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00002b70: 2020 7261 6973 6520 4b65 7945 7272 6f72    raise KeyError
+00002b80: 2822 4361 6e6e 6f74 2066 696e 6420 6b65  ("Cannot find ke
+00002b90: 7920 666f 7220 636c 6173 7322 2c20 636c  y for class", cl
+00002ba0: 732c 2065 290a 0a20 2020 2020 2020 2069  s, e)..        i
+00002bb0: 6620 6861 7361 7474 7228 696e 7374 2c20  f hasattr(inst, 
+00002bc0: 275f 6465 7365 7269 616c 697a 6527 293a  '_deserialize'):
+00002bd0: 0a20 2020 2020 2020 2020 2020 2069 6e73  .            ins
+00002be0: 742e 5f64 6573 6572 6961 6c69 7a65 2829  t._deserialize()
+00002bf0: 2020 2323 0a0a 0a20 2020 2020 2020 2072    ##...        r
+00002c00: 6574 7572 6e20 696e 7374 0a0a 0a63 6c61  eturn inst...cla
+00002c10: 7373 2053 6572 6961 6c69 7a65 4d65 6d6f  ss SerializeMemo
+00002c20: 697a 6572 2853 6572 6961 6c69 7a65 293a  izer(Serialize):
+00002c30: 0a20 2020 2023 2d2d 0a0a 2020 2020 5f5f  .    #--..    __
+00002c40: 7365 7269 616c 697a 655f 6669 656c 6473  serialize_fields
+00002c50: 5f5f 203d 2027 6d65 6d6f 697a 6564 272c  __ = 'memoized',
+00002c60: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+00002c70: 5f5f 2873 656c 662c 2074 7970 6573 5f74  __(self, types_t
+00002c80: 6f5f 6d65 6d6f 697a 653a 204c 6973 7429  o_memoize: List)
+00002c90: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
+00002ca0: 2020 7365 6c66 2e74 7970 6573 5f74 6f5f    self.types_to_
+00002cb0: 6d65 6d6f 697a 6520 3d20 7475 706c 6528  memoize = tuple(
+00002cc0: 7479 7065 735f 746f 5f6d 656d 6f69 7a65  types_to_memoize
+00002cd0: 290a 2020 2020 2020 2020 7365 6c66 2e6d  ).        self.m
+00002ce0: 656d 6f69 7a65 6420 3d20 456e 756d 6572  emoized = Enumer
+00002cf0: 6174 6f72 2829 0a0a 2020 2020 6465 6620  ator()..    def 
+00002d00: 696e 5f74 7970 6573 2873 656c 662c 2076  in_types(self, v
+00002d10: 616c 7565 3a20 5365 7269 616c 697a 6529  alue: Serialize)
+00002d20: 202d 3e20 626f 6f6c 3a0a 2020 2020 2020   -> bool:.      
+00002d30: 2020 7265 7475 726e 2069 7369 6e73 7461    return isinsta
+00002d40: 6e63 6528 7661 6c75 652c 2073 656c 662e  nce(value, self.
+00002d50: 7479 7065 735f 746f 5f6d 656d 6f69 7a65  types_to_memoize
+00002d60: 290a 0a20 2020 2064 6566 2073 6572 6961  )..    def seria
+00002d70: 6c69 7a65 2873 656c 6629 202d 3e20 4469  lize(self) -> Di
+00002d80: 6374 5b69 6e74 2c20 416e 795d 3a20 2023  ct[int, Any]:  #
+00002d90: 230a 0a20 2020 2020 2020 2072 6574 7572  #..        retur
+00002da0: 6e20 5f73 6572 6961 6c69 7a65 2873 656c  n _serialize(sel
+00002db0: 662e 6d65 6d6f 697a 6564 2e72 6576 6572  f.memoized.rever
+00002dc0: 7365 6428 292c 204e 6f6e 6529 0a0a 2020  sed(), None)..  
+00002dd0: 2020 4063 6c61 7373 6d65 7468 6f64 0a20    @classmethod. 
+00002de0: 2020 2064 6566 2064 6573 6572 6961 6c69     def deseriali
+00002df0: 7a65 2863 6c73 2c20 6461 7461 3a20 4469  ze(cls, data: Di
+00002e00: 6374 5b69 6e74 2c20 416e 795d 2c20 6e61  ct[int, Any], na
+00002e10: 6d65 7370 6163 653a 2044 6963 745b 7374  mespace: Dict[st
+00002e20: 722c 2041 6e79 5d2c 206d 656d 6f3a 2044  r, Any], memo: D
+00002e30: 6963 745b 416e 792c 2041 6e79 5d29 202d  ict[Any, Any]) -
+00002e40: 3e20 4469 6374 5b69 6e74 2c20 416e 795d  > Dict[int, Any]
+00002e50: 3a20 2023 230a 0a20 2020 2020 2020 2072  :  ##..        r
+00002e60: 6574 7572 6e20 5f64 6573 6572 6961 6c69  eturn _deseriali
+00002e70: 7a65 2864 6174 612c 206e 616d 6573 7061  ze(data, namespa
+00002e80: 6365 2c20 6d65 6d6f 290a 0a0a 7472 793a  ce, memo)...try:
+00002e90: 0a20 2020 2069 6d70 6f72 7420 7265 6765  .    import rege
+00002ea0: 780a 2020 2020 5f68 6173 5f72 6567 6578  x.    _has_regex
+00002eb0: 203d 2054 7275 650a 6578 6365 7074 2049   = True.except I
+00002ec0: 6d70 6f72 7445 7272 6f72 3a0a 2020 2020  mportError:.    
+00002ed0: 5f68 6173 5f72 6567 6578 203d 2046 616c  _has_regex = Fal
+00002ee0: 7365 0a0a 6966 2073 7973 2e76 6572 7369  se..if sys.versi
+00002ef0: 6f6e 5f69 6e66 6f20 3e3d 2028 332c 2031  on_info >= (3, 1
+00002f00: 3129 3a0a 2020 2020 696d 706f 7274 2072  1):.    import r
+00002f10: 652e 5f70 6172 7365 7220 6173 2073 7265  e._parser as sre
+00002f20: 5f70 6172 7365 0a20 2020 2069 6d70 6f72  _parse.    impor
+00002f30: 7420 7265 2e5f 636f 6e73 7461 6e74 7320  t re._constants 
+00002f40: 6173 2073 7265 5f63 6f6e 7374 616e 7473  as sre_constants
+00002f50: 0a65 6c73 653a 0a20 2020 2069 6d70 6f72  .else:.    impor
+00002f60: 7420 7372 655f 7061 7273 650a 2020 2020  t sre_parse.    
+00002f70: 696d 706f 7274 2073 7265 5f63 6f6e 7374  import sre_const
+00002f80: 616e 7473 0a0a 6361 7465 675f 7061 7474  ants..categ_patt
+00002f90: 6572 6e20 3d20 7265 2e63 6f6d 7069 6c65  ern = re.compile
+00002fa0: 2872 275c 5c70 7b5b 412d 5a61 2d7a 5f5d  (r'\\p{[A-Za-z_]
+00002fb0: 2b7d 2729 0a0a 6465 6620 6765 745f 7265  +}')..def get_re
+00002fc0: 6765 7870 5f77 6964 7468 2865 7870 723a  gexp_width(expr:
+00002fd0: 2073 7472 2920 2d3e 2055 6e69 6f6e 5b54   str) -> Union[T
+00002fe0: 7570 6c65 5b69 6e74 2c20 696e 745d 2c20  uple[int, int], 
+00002ff0: 4c69 7374 5b69 6e74 5d5d 3a0a 2020 2020  List[int]]:.    
+00003000: 6966 205f 6861 735f 7265 6765 783a 0a20  if _has_regex:. 
+00003010: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
+00003020: 2020 2023 230a 0a20 2020 2020 2020 2023     ##..        #
+00003030: 230a 0a20 2020 2020 2020 2072 6567 6578  #..        regex
+00003040: 705f 6669 6e61 6c20 3d20 7265 2e73 7562  p_final = re.sub
+00003050: 2863 6174 6567 5f70 6174 7465 726e 2c20  (categ_pattern, 
+00003060: 2741 272c 2065 7870 7229 0a20 2020 2065  'A', expr).    e
+00003070: 6c73 653a 0a20 2020 2020 2020 2069 6620  lse:.        if 
+00003080: 7265 2e73 6561 7263 6828 6361 7465 675f  re.search(categ_
+00003090: 7061 7474 6572 6e2c 2065 7870 7229 3a0a  pattern, expr):.
+000030a0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000030b0: 6520 496d 706f 7274 4572 726f 7228 2760  e ImportError('`
+000030c0: 7265 6765 7860 206d 6f64 756c 6520 6d75  regex` module mu
+000030d0: 7374 2062 6520 696e 7374 616c 6c65 6420  st be installed 
+000030e0: 696e 206f 7264 6572 2074 6f20 7573 6520  in order to use 
+000030f0: 556e 6963 6f64 6520 6361 7465 676f 7269  Unicode categori
+00003100: 6573 2e27 2c20 6578 7072 290a 2020 2020  es.', expr).    
+00003110: 2020 2020 7265 6765 7870 5f66 696e 616c      regexp_final
+00003120: 203d 2065 7870 720a 2020 2020 7472 793a   = expr.    try:
+00003130: 0a20 2020 2020 2020 2023 230a 0a20 2020  .        ##..   
+00003140: 2020 2020 2072 6574 7572 6e20 5b69 6e74       return [int
+00003150: 2878 2920 666f 7220 7820 696e 2073 7265  (x) for x in sre
+00003160: 5f70 6172 7365 2e70 6172 7365 2872 6567  _parse.parse(reg
+00003170: 6578 705f 6669 6e61 6c29 2e67 6574 7769  exp_final).getwi
+00003180: 6474 6828 295d 2020 2023 230a 0a20 2020  dth()]   ##..   
+00003190: 2065 7863 6570 7420 7372 655f 636f 6e73   except sre_cons
+000031a0: 7461 6e74 732e 6572 726f 723a 0a20 2020  tants.error:.   
+000031b0: 2020 2020 2069 6620 6e6f 7420 5f68 6173       if not _has
+000031c0: 5f72 6567 6578 3a0a 2020 2020 2020 2020  _regex:.        
+000031d0: 2020 2020 7261 6973 6520 5661 6c75 6545      raise ValueE
+000031e0: 7272 6f72 2865 7870 7229 0a20 2020 2020  rror(expr).     
+000031f0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00003200: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
+00003210: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
+00003220: 2020 2020 2063 203d 2072 6567 6578 2e63       c = regex.c
+00003230: 6f6d 7069 6c65 2872 6567 6578 705f 6669  ompile(regexp_fi
+00003240: 6e61 6c29 0a20 2020 2020 2020 2020 2020  nal).           
+00003250: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
+00003260: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
+00003270: 204d 4158 5749 4454 4820 3d20 6765 7461   MAXWIDTH = geta
+00003280: 7474 7228 7372 655f 7061 7273 652c 2022  ttr(sre_parse, "
+00003290: 4d41 5857 4944 5448 222c 2073 7265 5f63  MAXWIDTH", sre_c
+000032a0: 6f6e 7374 616e 7473 2e4d 4158 5245 5045  onstants.MAXREPE
+000032b0: 4154 290a 2020 2020 2020 2020 2020 2020  AT).            
+000032c0: 6966 2063 2e6d 6174 6368 2827 2729 2069  if c.match('') i
+000032d0: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000032e0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
+000032f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00003300: 726e 2031 2c20 696e 7428 4d41 5857 4944  rn 1, int(MAXWID
+00003310: 5448 290a 2020 2020 2020 2020 2020 2020  TH).            
+00003320: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00003330: 2020 2020 2020 7265 7475 726e 2030 2c20        return 0, 
+00003340: 696e 7428 4d41 5857 4944 5448 290a 0a0a  int(MAXWIDTH)...
+00003350: 6672 6f6d 2063 6f6c 6c65 6374 696f 6e73  from collections
+00003360: 2069 6d70 6f72 7420 4f72 6465 7265 6444   import OrderedD
+00003370: 6963 740a 0a63 6c61 7373 204d 6574 613a  ict..class Meta:
+00003380: 0a0a 2020 2020 656d 7074 793a 2062 6f6f  ..    empty: boo
+00003390: 6c0a 2020 2020 6c69 6e65 3a20 696e 740a  l.    line: int.
+000033a0: 2020 2020 636f 6c75 6d6e 3a20 696e 740a      column: int.
+000033b0: 2020 2020 7374 6172 745f 706f 733a 2069      start_pos: i
+000033c0: 6e74 0a20 2020 2065 6e64 5f6c 696e 653a  nt.    end_line:
+000033d0: 2069 6e74 0a20 2020 2065 6e64 5f63 6f6c   int.    end_col
+000033e0: 756d 6e3a 2069 6e74 0a20 2020 2065 6e64  umn: int.    end
+000033f0: 5f70 6f73 3a20 696e 740a 2020 2020 6f72  _pos: int.    or
+00003400: 6967 5f65 7870 616e 7369 6f6e 3a20 274c  ig_expansion: 'L
+00003410: 6973 745b 5465 726d 696e 616c 4465 665d  ist[TerminalDef]
+00003420: 270a 2020 2020 6d61 7463 685f 7472 6565  '.    match_tree
+00003430: 3a20 626f 6f6c 0a0a 2020 2020 6465 6620  : bool..    def 
+00003440: 5f5f 696e 6974 5f5f 2873 656c 6629 3a0a  __init__(self):.
+00003450: 2020 2020 2020 2020 7365 6c66 2e65 6d70          self.emp
+00003460: 7479 203d 2054 7275 650a 0a0a 5f4c 6561  ty = True..._Lea
+00003470: 665f 5420 3d20 5479 7065 5661 7228 225f  f_T = TypeVar("_
+00003480: 4c65 6166 5f54 2229 0a42 7261 6e63 6820  Leaf_T").Branch 
+00003490: 3d20 556e 696f 6e5b 5f4c 6561 665f 542c  = Union[_Leaf_T,
+000034a0: 2027 5472 6565 5b5f 4c65 6166 5f54 5d27   'Tree[_Leaf_T]'
+000034b0: 5d0a 0a0a 636c 6173 7320 5472 6565 2847  ]...class Tree(G
+000034c0: 656e 6572 6963 5b5f 4c65 6166 5f54 5d29  eneric[_Leaf_T])
+000034d0: 3a0a 2020 2020 232d 2d0a 0a20 2020 2064  :.    #--..    d
+000034e0: 6174 613a 2073 7472 0a20 2020 2063 6869  ata: str.    chi
+000034f0: 6c64 7265 6e3a 2027 4c69 7374 5b42 7261  ldren: 'List[Bra
+00003500: 6e63 685b 5f4c 6561 665f 545d 5d27 0a0a  nch[_Leaf_T]]'..
+00003510: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00003520: 2873 656c 662c 2064 6174 613a 2073 7472  (self, data: str
+00003530: 2c20 6368 696c 6472 656e 3a20 274c 6973  , children: 'Lis
+00003540: 745b 4272 616e 6368 5b5f 4c65 6166 5f54  t[Branch[_Leaf_T
+00003550: 5d5d 272c 206d 6574 613a 204f 7074 696f  ]]', meta: Optio
+00003560: 6e61 6c5b 4d65 7461 5d3d 4e6f 6e65 2920  nal[Meta]=None) 
+00003570: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00003580: 2073 656c 662e 6461 7461 203d 2064 6174   self.data = dat
+00003590: 610a 2020 2020 2020 2020 7365 6c66 2e63  a.        self.c
+000035a0: 6869 6c64 7265 6e20 3d20 6368 696c 6472  hildren = childr
+000035b0: 656e 0a20 2020 2020 2020 2073 656c 662e  en.        self.
+000035c0: 5f6d 6574 6120 3d20 6d65 7461 0a0a 2020  _meta = meta..  
+000035d0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
+000035e0: 6465 6620 6d65 7461 2873 656c 6629 202d  def meta(self) -
+000035f0: 3e20 4d65 7461 3a0a 2020 2020 2020 2020  > Meta:.        
+00003600: 6966 2073 656c 662e 5f6d 6574 6120 6973  if self._meta is
+00003610: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+00003620: 2020 2073 656c 662e 5f6d 6574 6120 3d20     self._meta = 
+00003630: 4d65 7461 2829 0a20 2020 2020 2020 2072  Meta().        r
+00003640: 6574 7572 6e20 7365 6c66 2e5f 6d65 7461  eturn self._meta
+00003650: 0a0a 2020 2020 6465 6620 5f5f 7265 7072  ..    def __repr
+00003660: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
+00003670: 2020 7265 7475 726e 2027 5472 6565 2825    return 'Tree(%
+00003680: 722c 2025 7229 2720 2520 2873 656c 662e  r, %r)' % (self.
+00003690: 6461 7461 2c20 7365 6c66 2e63 6869 6c64  data, self.child
+000036a0: 7265 6e29 0a0a 2020 2020 6465 6620 5f70  ren)..    def _p
+000036b0: 7265 7474 795f 6c61 6265 6c28 7365 6c66  retty_label(self
+000036c0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+000036d0: 6e20 7365 6c66 2e64 6174 610a 0a20 2020  n self.data..   
+000036e0: 2064 6566 205f 7072 6574 7479 2873 656c   def _pretty(sel
+000036f0: 662c 206c 6576 656c 2c20 696e 6465 6e74  f, level, indent
+00003700: 5f73 7472 293a 0a20 2020 2020 2020 2079  _str):.        y
+00003710: 6965 6c64 2066 277b 696e 6465 6e74 5f73  ield f'{indent_s
+00003720: 7472 2a6c 6576 656c 7d7b 7365 6c66 2e5f  tr*level}{self._
+00003730: 7072 6574 7479 5f6c 6162 656c 2829 7d27  pretty_label()}'
+00003740: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
+00003750: 7365 6c66 2e63 6869 6c64 7265 6e29 203d  self.children) =
+00003760: 3d20 3120 616e 6420 6e6f 7420 6973 696e  = 1 and not isin
+00003770: 7374 616e 6365 2873 656c 662e 6368 696c  stance(self.chil
+00003780: 6472 656e 5b30 5d2c 2054 7265 6529 3a0a  dren[0], Tree):.
+00003790: 2020 2020 2020 2020 2020 2020 7969 656c              yiel
+000037a0: 6420 6627 5c74 7b73 656c 662e 6368 696c  d f'\t{self.chil
+000037b0: 6472 656e 5b30 5d7d 5c6e 270a 2020 2020  dren[0]}\n'.    
+000037c0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+000037d0: 2020 2020 2020 7969 656c 6420 275c 6e27        yield '\n'
+000037e0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+000037f0: 206e 2069 6e20 7365 6c66 2e63 6869 6c64   n in self.child
+00003800: 7265 6e3a 0a20 2020 2020 2020 2020 2020  ren:.           
+00003810: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00003820: 6365 286e 2c20 5472 6565 293a 0a20 2020  ce(n, Tree):.   
 00003830: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00003840: 7969 656c 6420 6627 7b69 6e64 656e 745f  yield f'{indent_
-00003850: 7374 722a 286c 6576 656c 2b31 297d 7b6e  str*(level+1)}{n
-00003860: 7d5c 6e27 0a0a 2020 2020 6465 6620 7072  }\n'..    def pr
-00003870: 6574 7479 2873 656c 662c 2069 6e64 656e  etty(self, inden
-00003880: 745f 7374 723a 2073 7472 3d27 2020 2729  t_str: str='  ')
-00003890: 202d 3e20 7374 723a 0a20 2020 2020 2020   -> str:.       
-000038a0: 2023 2d2d 0a20 2020 2020 2020 2072 6574   #--.        ret
-000038b0: 7572 6e20 2727 2e6a 6f69 6e28 7365 6c66  urn ''.join(self
-000038c0: 2e5f 7072 6574 7479 2830 2c20 696e 6465  ._pretty(0, inde
-000038d0: 6e74 5f73 7472 2929 0a0a 2020 2020 6465  nt_str))..    de
-000038e0: 6620 5f5f 7269 6368 5f5f 2873 656c 662c  f __rich__(self,
-000038f0: 2070 6172 656e 743a 2772 6963 682e 7472   parent:'rich.tr
-00003900: 6565 2e54 7265 6527 3d4e 6f6e 6529 202d  ee.Tree'=None) -
-00003910: 3e20 2772 6963 682e 7472 6565 2e54 7265  > 'rich.tree.Tre
-00003920: 6527 3a0a 2020 2020 2020 2020 232d 2d0a  e':.        #--.
-00003930: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00003940: 656c 662e 5f72 6963 6828 7061 7265 6e74  elf._rich(parent
-00003950: 290a 0a20 2020 2064 6566 205f 7269 6368  )..    def _rich
-00003960: 2873 656c 662c 2070 6172 656e 7429 3a0a  (self, parent):.
-00003970: 2020 2020 2020 2020 6966 2070 6172 656e          if paren
-00003980: 743a 0a20 2020 2020 2020 2020 2020 2074  t:.            t
-00003990: 7265 6520 3d20 7061 7265 6e74 2e61 6464  ree = parent.add
-000039a0: 2866 275b 626f 6c64 5d7b 7365 6c66 2e64  (f'[bold]{self.d
-000039b0: 6174 617d 5b2f 626f 6c64 5d27 290a 2020  ata}[/bold]').  
-000039c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000039d0: 2020 2020 2020 2020 696d 706f 7274 2072          import r
-000039e0: 6963 682e 7472 6565 0a20 2020 2020 2020  ich.tree.       
-000039f0: 2020 2020 2074 7265 6520 3d20 7269 6368       tree = rich
-00003a00: 2e74 7265 652e 5472 6565 2873 656c 662e  .tree.Tree(self.
-00003a10: 6461 7461 290a 0a20 2020 2020 2020 2066  data)..        f
-00003a20: 6f72 2063 2069 6e20 7365 6c66 2e63 6869  or c in self.chi
-00003a30: 6c64 7265 6e3a 0a20 2020 2020 2020 2020  ldren:.         
-00003a40: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-00003a50: 2863 2c20 5472 6565 293a 0a20 2020 2020  (c, Tree):.     
-00003a60: 2020 2020 2020 2020 2020 2063 2e5f 7269             c._ri
-00003a70: 6368 2874 7265 6529 0a20 2020 2020 2020  ch(tree).       
-00003a80: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00003a90: 2020 2020 2020 2020 2020 2074 7265 652e             tree.
-00003aa0: 6164 6428 6627 5b67 7265 656e 5d7b 637d  add(f'[green]{c}
-00003ab0: 5b2f 6772 6565 6e5d 2729 0a0a 2020 2020  [/green]')..    
-00003ac0: 2020 2020 7265 7475 726e 2074 7265 650a      return tree.
-00003ad0: 0a20 2020 2064 6566 205f 5f65 715f 5f28  .    def __eq__(
-00003ae0: 7365 6c66 2c20 6f74 6865 7229 3a0a 2020  self, other):.  
-00003af0: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00003b00: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00003b10: 6c66 2e64 6174 6120 3d3d 206f 7468 6572  lf.data == other
-00003b20: 2e64 6174 6120 616e 6420 7365 6c66 2e63  .data and self.c
-00003b30: 6869 6c64 7265 6e20 3d3d 206f 7468 6572  hildren == other
-00003b40: 2e63 6869 6c64 7265 6e0a 2020 2020 2020  .children.      
-00003b50: 2020 6578 6365 7074 2041 7474 7269 6275    except Attribu
-00003b60: 7465 4572 726f 723a 0a20 2020 2020 2020  teError:.       
-00003b70: 2020 2020 2072 6574 7572 6e20 4661 6c73       return Fals
-00003b80: 650a 0a20 2020 2064 6566 205f 5f6e 655f  e..    def __ne_
-00003b90: 5f28 7365 6c66 2c20 6f74 6865 7229 3a0a  _(self, other):.
-00003ba0: 2020 2020 2020 2020 7265 7475 726e 206e          return n
-00003bb0: 6f74 2028 7365 6c66 203d 3d20 6f74 6865  ot (self == othe
-00003bc0: 7229 0a0a 2020 2020 6465 6620 5f5f 6861  r)..    def __ha
-00003bd0: 7368 5f5f 2873 656c 6629 202d 3e20 696e  sh__(self) -> in
-00003be0: 743a 0a20 2020 2020 2020 2072 6574 7572  t:.        retur
-00003bf0: 6e20 6861 7368 2828 7365 6c66 2e64 6174  n hash((self.dat
-00003c00: 612c 2074 7570 6c65 2873 656c 662e 6368  a, tuple(self.ch
-00003c10: 696c 6472 656e 2929 290a 0a20 2020 2064  ildren)))..    d
-00003c20: 6566 2069 7465 725f 7375 6274 7265 6573  ef iter_subtrees
-00003c30: 2873 656c 6629 202d 3e20 2749 7465 7261  (self) -> 'Itera
-00003c40: 746f 725b 5472 6565 5b5f 4c65 6166 5f54  tor[Tree[_Leaf_T
-00003c50: 5d5d 273a 0a20 2020 2020 2020 2023 2d2d  ]]':.        #--
-00003c60: 0a20 2020 2020 2020 2071 7565 7565 203d  .        queue =
-00003c70: 205b 7365 6c66 5d0a 2020 2020 2020 2020   [self].        
-00003c80: 7375 6274 7265 6573 203d 204f 7264 6572  subtrees = Order
-00003c90: 6564 4469 6374 2829 0a20 2020 2020 2020  edDict().       
-00003ca0: 2066 6f72 2073 7562 7472 6565 2069 6e20   for subtree in 
-00003cb0: 7175 6575 653a 0a20 2020 2020 2020 2020  queue:.         
-00003cc0: 2020 2073 7562 7472 6565 735b 6964 2873     subtrees[id(s
-00003cd0: 7562 7472 6565 295d 203d 2073 7562 7472  ubtree)] = subtr
-00003ce0: 6565 0a20 2020 2020 2020 2020 2020 2023  ee.            #
-00003cf0: 230a 0a20 2020 2020 2020 2020 2020 2071  #..            q
-00003d00: 7565 7565 202b 3d20 5b63 2066 6f72 2063  ueue += [c for c
-00003d10: 2069 6e20 7265 7665 7273 6564 2873 7562   in reversed(sub
-00003d20: 7472 6565 2e63 6869 6c64 7265 6e29 2020  tree.children)  
-00003d30: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
-00003d40: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-00003d50: 6e73 7461 6e63 6528 632c 2054 7265 6529  nstance(c, Tree)
-00003d60: 2061 6e64 2069 6428 6329 206e 6f74 2069   and id(c) not i
-00003d70: 6e20 7375 6274 7265 6573 5d0a 0a20 2020  n subtrees]..   
-00003d80: 2020 2020 2064 656c 2071 7565 7565 0a20       del queue. 
-00003d90: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-00003da0: 7665 7273 6564 286c 6973 7428 7375 6274  versed(list(subt
-00003db0: 7265 6573 2e76 616c 7565 7328 2929 290a  rees.values())).
-00003dc0: 0a20 2020 2064 6566 2069 7465 725f 7375  .    def iter_su
-00003dd0: 6274 7265 6573 5f74 6f70 646f 776e 2873  btrees_topdown(s
-00003de0: 656c 6629 3a0a 2020 2020 2020 2020 232d  elf):.        #-
-00003df0: 2d0a 2020 2020 2020 2020 7374 6163 6b20  -.        stack 
-00003e00: 3d20 5b73 656c 665d 0a20 2020 2020 2020  = [self].       
-00003e10: 2073 7461 636b 5f61 7070 656e 6420 3d20   stack_append = 
-00003e20: 7374 6163 6b2e 6170 7065 6e64 0a20 2020  stack.append.   
-00003e30: 2020 2020 2073 7461 636b 5f70 6f70 203d       stack_pop =
-00003e40: 2073 7461 636b 2e70 6f70 0a20 2020 2020   stack.pop.     
-00003e50: 2020 2077 6869 6c65 2073 7461 636b 3a0a     while stack:.
-00003e60: 2020 2020 2020 2020 2020 2020 6e6f 6465              node
-00003e70: 203d 2073 7461 636b 5f70 6f70 2829 0a20   = stack_pop(). 
-00003e80: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
-00003e90: 7420 6973 696e 7374 616e 6365 286e 6f64  t isinstance(nod
-00003ea0: 652c 2054 7265 6529 3a0a 2020 2020 2020  e, Tree):.      
-00003eb0: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
-00003ec0: 7565 0a20 2020 2020 2020 2020 2020 2079  ue.            y
-00003ed0: 6965 6c64 206e 6f64 650a 2020 2020 2020  ield node.      
-00003ee0: 2020 2020 2020 666f 7220 6368 696c 6420        for child 
-00003ef0: 696e 2072 6576 6572 7365 6428 6e6f 6465  in reversed(node
-00003f00: 2e63 6869 6c64 7265 6e29 3a0a 2020 2020  .children):.    
-00003f10: 2020 2020 2020 2020 2020 2020 7374 6163              stac
-00003f20: 6b5f 6170 7065 6e64 2863 6869 6c64 290a  k_append(child).
-00003f30: 0a20 2020 2064 6566 2066 696e 645f 7072  .    def find_pr
-00003f40: 6564 2873 656c 662c 2070 7265 643a 2027  ed(self, pred: '
-00003f50: 4361 6c6c 6162 6c65 5b5b 5472 6565 5b5f  Callable[[Tree[_
-00003f60: 4c65 6166 5f54 5d5d 2c20 626f 6f6c 5d27  Leaf_T]], bool]'
-00003f70: 2920 2d3e 2027 4974 6572 6174 6f72 5b54  ) -> 'Iterator[T
-00003f80: 7265 655b 5f4c 6561 665f 545d 5d27 3a0a  ree[_Leaf_T]]':.
-00003f90: 2020 2020 2020 2020 232d 2d0a 2020 2020          #--.    
-00003fa0: 2020 2020 7265 7475 726e 2066 696c 7465      return filte
-00003fb0: 7228 7072 6564 2c20 7365 6c66 2e69 7465  r(pred, self.ite
-00003fc0: 725f 7375 6274 7265 6573 2829 290a 0a20  r_subtrees()).. 
-00003fd0: 2020 2064 6566 2066 696e 645f 6461 7461     def find_data
-00003fe0: 2873 656c 662c 2064 6174 613a 2073 7472  (self, data: str
-00003ff0: 2920 2d3e 2027 4974 6572 6174 6f72 5b54  ) -> 'Iterator[T
-00004000: 7265 655b 5f4c 6561 665f 545d 5d27 3a0a  ree[_Leaf_T]]':.
-00004010: 2020 2020 2020 2020 232d 2d0a 2020 2020          #--.    
-00004020: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-00004030: 6669 6e64 5f70 7265 6428 6c61 6d62 6461  find_pred(lambda
-00004040: 2074 3a20 742e 6461 7461 203d 3d20 6461   t: t.data == da
-00004050: 7461 290a 0a0a 6672 6f6d 2066 756e 6374  ta)...from funct
-00004060: 6f6f 6c73 2069 6d70 6f72 7420 7772 6170  ools import wrap
-00004070: 732c 2075 7064 6174 655f 7772 6170 7065  s, update_wrappe
-00004080: 720a 6672 6f6d 2069 6e73 7065 6374 2069  r.from inspect i
-00004090: 6d70 6f72 7420 6765 746d 656d 6265 7273  mport getmembers
-000040a0: 2c20 6765 746d 726f 0a0a 5f52 6574 7572  , getmro.._Retur
-000040b0: 6e5f 5420 3d20 5479 7065 5661 7228 275f  n_T = TypeVar('_
-000040c0: 5265 7475 726e 5f54 2729 0a5f 5265 7475  Return_T')._Retu
-000040d0: 726e 5f56 203d 2054 7970 6556 6172 2827  rn_V = TypeVar('
-000040e0: 5f52 6574 7572 6e5f 5627 290a 5f4c 6561  _Return_V')._Lea
-000040f0: 665f 5420 3d20 5479 7065 5661 7228 275f  f_T = TypeVar('_
-00004100: 4c65 6166 5f54 2729 0a5f 4c65 6166 5f55  Leaf_T')._Leaf_U
-00004110: 203d 2054 7970 6556 6172 2827 5f4c 6561   = TypeVar('_Lea
-00004120: 665f 5527 290a 5f52 203d 2054 7970 6556  f_U')._R = TypeV
-00004130: 6172 2827 5f52 2729 0a5f 4655 4e43 203d  ar('_R')._FUNC =
-00004140: 2043 616c 6c61 626c 655b 2e2e 2e2c 205f   Callable[..., _
-00004150: 5265 7475 726e 5f54 5d0a 5f44 4543 4f52  Return_T]._DECOR
-00004160: 4154 4544 203d 2055 6e69 6f6e 5b5f 4655  ATED = Union[_FU
-00004170: 4e43 2c20 7479 7065 5d0a 0a63 6c61 7373  NC, type]..class
-00004180: 205f 4469 7363 6172 6454 7970 653a 0a20   _DiscardType:. 
-00004190: 2020 2023 2d2d 0a0a 2020 2020 6465 6620     #--..    def 
-000041a0: 5f5f 7265 7072 5f5f 2873 656c 6629 3a0a  __repr__(self):.
-000041b0: 2020 2020 2020 2020 7265 7475 726e 2022          return "
-000041c0: 6c61 726b 2e76 6973 6974 6f72 732e 4469  lark.visitors.Di
-000041d0: 7363 6172 6422 0a0a 4469 7363 6172 6420  scard"..Discard 
-000041e0: 3d20 5f44 6973 6361 7264 5479 7065 2829  = _DiscardType()
-000041f0: 0a0a 2323 0a0a 0a63 6c61 7373 205f 4465  ..##...class _De
-00004200: 636f 7261 7461 626c 653a 0a20 2020 2023  coratable:.    #
-00004210: 2d2d 0a0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
-00004220: 7468 6f64 0a20 2020 2064 6566 205f 6170  thod.    def _ap
-00004230: 706c 795f 765f 6172 6773 2863 6c73 2c20  ply_v_args(cls, 
-00004240: 7669 7369 745f 7772 6170 7065 7229 3a0a  visit_wrapper):.
-00004250: 2020 2020 2020 2020 6d72 6f20 3d20 6765          mro = ge
-00004260: 746d 726f 2863 6c73 290a 2020 2020 2020  tmro(cls).      
-00004270: 2020 6173 7365 7274 206d 726f 5b30 5d20    assert mro[0] 
-00004280: 6973 2063 6c73 0a20 2020 2020 2020 206c  is cls.        l
-00004290: 6962 6d65 6d62 6572 7320 3d20 7b6e 616d  ibmembers = {nam
-000042a0: 6520 666f 7220 5f63 6c73 2069 6e20 6d72  e for _cls in mr
-000042b0: 6f5b 313a 5d20 666f 7220 6e61 6d65 2c20  o[1:] for name, 
-000042c0: 5f20 696e 2067 6574 6d65 6d62 6572 7328  _ in getmembers(
-000042d0: 5f63 6c73 297d 0a20 2020 2020 2020 2066  _cls)}.        f
-000042e0: 6f72 206e 616d 652c 2076 616c 7565 2069  or name, value i
-000042f0: 6e20 6765 746d 656d 6265 7273 2863 6c73  n getmembers(cls
-00004300: 293a 0a0a 2020 2020 2020 2020 2020 2020  ):..            
-00004310: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
-00004320: 6966 206e 616d 652e 7374 6172 7473 7769  if name.startswi
-00004330: 7468 2827 5f27 2920 6f72 2028 6e61 6d65  th('_') or (name
-00004340: 2069 6e20 6c69 626d 656d 6265 7273 2061   in libmembers a
-00004350: 6e64 206e 616d 6520 6e6f 7420 696e 2063  nd name not in c
-00004360: 6c73 2e5f 5f64 6963 745f 5f29 3a0a 2020  ls.__dict__):.  
-00004370: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00004380: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
-00004390: 2020 2069 6620 6e6f 7420 6361 6c6c 6162     if not callab
-000043a0: 6c65 2876 616c 7565 293a 0a20 2020 2020  le(value):.     
-000043b0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-000043c0: 6e75 650a 0a20 2020 2020 2020 2020 2020  nue..           
-000043d0: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
-000043e0: 2069 6620 6973 696e 7374 616e 6365 2863   if isinstance(c
-000043f0: 6c73 2e5f 5f64 6963 745f 5f5b 6e61 6d65  ls.__dict__[name
-00004400: 5d2c 205f 5641 7267 7357 7261 7070 6572  ], _VArgsWrapper
-00004410: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-00004420: 2020 2063 6f6e 7469 6e75 650a 0a20 2020     continue..   
-00004430: 2020 2020 2020 2020 2073 6574 6174 7472           setattr
-00004440: 2863 6c73 2c20 6e61 6d65 2c20 5f56 4172  (cls, name, _VAr
-00004450: 6773 5772 6170 7065 7228 636c 732e 5f5f  gsWrapper(cls.__
-00004460: 6469 6374 5f5f 5b6e 616d 655d 2c20 7669  dict__[name], vi
-00004470: 7369 745f 7772 6170 7065 7229 290a 2020  sit_wrapper)).  
-00004480: 2020 2020 2020 7265 7475 726e 2063 6c73        return cls
-00004490: 0a0a 2020 2020 6465 6620 5f5f 636c 6173  ..    def __clas
-000044a0: 735f 6765 7469 7465 6d5f 5f28 636c 732c  s_getitem__(cls,
-000044b0: 205f 293a 0a20 2020 2020 2020 2072 6574   _):.        ret
-000044c0: 7572 6e20 636c 730a 0a0a 636c 6173 7320  urn cls...class 
-000044d0: 5472 616e 7366 6f72 6d65 7228 5f44 6563  Transformer(_Dec
-000044e0: 6f72 6174 6162 6c65 2c20 4142 432c 2047  oratable, ABC, G
-000044f0: 656e 6572 6963 5b5f 4c65 6166 5f54 2c20  eneric[_Leaf_T, 
-00004500: 5f52 6574 7572 6e5f 545d 293a 0a20 2020  _Return_T]):.   
-00004510: 2023 2d2d 0a20 2020 205f 5f76 6973 6974   #--.    __visit
-00004520: 5f74 6f6b 656e 735f 5f20 3d20 5472 7565  _tokens__ = True
-00004530: 2020 2023 230a 0a0a 2020 2020 6465 6620     ##...    def 
-00004540: 5f5f 696e 6974 5f5f 2873 656c 662c 2020  __init__(self,  
-00004550: 7669 7369 745f 746f 6b65 6e73 3a20 626f  visit_tokens: bo
-00004560: 6f6c 3d54 7275 6529 202d 3e20 4e6f 6e65  ol=True) -> None
-00004570: 3a0a 2020 2020 2020 2020 7365 6c66 2e5f  :.        self._
-00004580: 5f76 6973 6974 5f74 6f6b 656e 735f 5f20  _visit_tokens__ 
-00004590: 3d20 7669 7369 745f 746f 6b65 6e73 0a0a  = visit_tokens..
-000045a0: 2020 2020 6465 6620 5f63 616c 6c5f 7573      def _call_us
-000045b0: 6572 6675 6e63 2873 656c 662c 2074 7265  erfunc(self, tre
-000045c0: 652c 206e 6577 5f63 6869 6c64 7265 6e3d  e, new_children=
-000045d0: 4e6f 6e65 293a 0a20 2020 2020 2020 2023  None):.        #
-000045e0: 230a 0a20 2020 2020 2020 2063 6869 6c64  #..        child
-000045f0: 7265 6e20 3d20 6e65 775f 6368 696c 6472  ren = new_childr
-00004600: 656e 2069 6620 6e65 775f 6368 696c 6472  en if new_childr
-00004610: 656e 2069 7320 6e6f 7420 4e6f 6e65 2065  en is not None e
-00004620: 6c73 6520 7472 6565 2e63 6869 6c64 7265  lse tree.childre
-00004630: 6e0a 2020 2020 2020 2020 7472 793a 0a20  n.        try:. 
-00004640: 2020 2020 2020 2020 2020 2066 203d 2067             f = g
-00004650: 6574 6174 7472 2873 656c 662c 2074 7265  etattr(self, tre
-00004660: 652e 6461 7461 290a 2020 2020 2020 2020  e.data).        
-00004670: 6578 6365 7074 2041 7474 7269 6275 7465  except Attribute
-00004680: 4572 726f 723a 0a20 2020 2020 2020 2020  Error:.         
-00004690: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-000046a0: 5f64 6566 6175 6c74 5f5f 2874 7265 652e  _default__(tree.
-000046b0: 6461 7461 2c20 6368 696c 6472 656e 2c20  data, children, 
-000046c0: 7472 6565 2e6d 6574 6129 0a20 2020 2020  tree.meta).     
-000046d0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000046e0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-000046f0: 2020 2020 2020 2020 2020 7772 6170 7065            wrappe
-00004700: 7220 3d20 6765 7461 7474 7228 662c 2027  r = getattr(f, '
-00004710: 7669 7369 745f 7772 6170 7065 7227 2c20  visit_wrapper', 
-00004720: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-00004730: 2020 2020 2020 6966 2077 7261 7070 6572        if wrapper
-00004740: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00004750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00004760: 2020 7265 7475 726e 2066 2e76 6973 6974    return f.visit
-00004770: 5f77 7261 7070 6572 2866 2c20 7472 6565  _wrapper(f, tree
-00004780: 2e64 6174 612c 2063 6869 6c64 7265 6e2c  .data, children,
-00004790: 2074 7265 652e 6d65 7461 290a 2020 2020   tree.meta).    
-000047a0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-000047b0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000047c0: 2020 2020 2020 7265 7475 726e 2066 2863        return f(c
-000047d0: 6869 6c64 7265 6e29 0a20 2020 2020 2020  hildren).       
-000047e0: 2020 2020 2065 7863 6570 7420 4772 616d       except Gram
-000047f0: 6d61 7245 7272 6f72 3a0a 2020 2020 2020  marError:.      
-00004800: 2020 2020 2020 2020 2020 7261 6973 650a            raise.
-00004810: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-00004820: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
-00004830: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-00004840: 2020 2072 6169 7365 2056 6973 6974 4572     raise VisitEr
-00004850: 726f 7228 7472 6565 2e64 6174 612c 2074  ror(tree.data, t
-00004860: 7265 652c 2065 290a 0a20 2020 2064 6566  ree, e)..    def
-00004870: 205f 6361 6c6c 5f75 7365 7266 756e 635f   _call_userfunc_
-00004880: 746f 6b65 6e28 7365 6c66 2c20 746f 6b65  token(self, toke
-00004890: 6e29 3a0a 2020 2020 2020 2020 7472 793a  n):.        try:
-000048a0: 0a20 2020 2020 2020 2020 2020 2066 203d  .            f =
-000048b0: 2067 6574 6174 7472 2873 656c 662c 2074   getattr(self, t
-000048c0: 6f6b 656e 2e74 7970 6529 0a20 2020 2020  oken.type).     
-000048d0: 2020 2065 7863 6570 7420 4174 7472 6962     except Attrib
-000048e0: 7574 6545 7272 6f72 3a0a 2020 2020 2020  uteError:.      
-000048f0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00004900: 662e 5f5f 6465 6661 756c 745f 746f 6b65  f.__default_toke
-00004910: 6e5f 5f28 746f 6b65 6e29 0a20 2020 2020  n__(token).     
-00004920: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00004930: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00004940: 2020 2020 2020 2020 2020 7265 7475 726e            return
-00004950: 2066 2874 6f6b 656e 290a 2020 2020 2020   f(token).      
-00004960: 2020 2020 2020 6578 6365 7074 2047 7261        except Gra
-00004970: 6d6d 6172 4572 726f 723a 0a20 2020 2020  mmarError:.     
-00004980: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00004990: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-000049a0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
-000049b0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
-000049c0: 2020 2020 7261 6973 6520 5669 7369 7445      raise VisitE
-000049d0: 7272 6f72 2874 6f6b 656e 2e74 7970 652c  rror(token.type,
-000049e0: 2074 6f6b 656e 2c20 6529 0a0a 2020 2020   token, e)..    
-000049f0: 6465 6620 5f74 7261 6e73 666f 726d 5f63  def _transform_c
-00004a00: 6869 6c64 7265 6e28 7365 6c66 2c20 6368  hildren(self, ch
-00004a10: 696c 6472 656e 293a 0a20 2020 2020 2020  ildren):.       
-00004a20: 2066 6f72 2063 2069 6e20 6368 696c 6472   for c in childr
-00004a30: 656e 3a0a 2020 2020 2020 2020 2020 2020  en:.            
-00004a40: 6966 2069 7369 6e73 7461 6e63 6528 632c  if isinstance(c,
-00004a50: 2054 7265 6529 3a0a 2020 2020 2020 2020   Tree):.        
-00004a60: 2020 2020 2020 2020 7265 7320 3d20 7365          res = se
-00004a70: 6c66 2e5f 7472 616e 7366 6f72 6d5f 7472  lf._transform_tr
-00004a80: 6565 2863 290a 2020 2020 2020 2020 2020  ee(c).          
-00004a90: 2020 656c 6966 2073 656c 662e 5f5f 7669    elif self.__vi
-00004aa0: 7369 745f 746f 6b65 6e73 5f5f 2061 6e64  sit_tokens__ and
-00004ab0: 2069 7369 6e73 7461 6e63 6528 632c 2054   isinstance(c, T
-00004ac0: 6f6b 656e 293a 0a20 2020 2020 2020 2020  oken):.         
-00004ad0: 2020 2020 2020 2072 6573 203d 2073 656c         res = sel
-00004ae0: 662e 5f63 616c 6c5f 7573 6572 6675 6e63  f._call_userfunc
-00004af0: 5f74 6f6b 656e 2863 290a 2020 2020 2020  _token(c).      
-00004b00: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00004b10: 2020 2020 2020 2020 2020 2020 7265 7320              res 
-00004b20: 3d20 630a 0a20 2020 2020 2020 2020 2020  = c..           
-00004b30: 2069 6620 7265 7320 6973 206e 6f74 2044   if res is not D
-00004b40: 6973 6361 7264 3a0a 2020 2020 2020 2020  iscard:.        
-00004b50: 2020 2020 2020 2020 7969 656c 6420 7265          yield re
-00004b60: 730a 0a20 2020 2064 6566 205f 7472 616e  s..    def _tran
-00004b70: 7366 6f72 6d5f 7472 6565 2873 656c 662c  sform_tree(self,
-00004b80: 2074 7265 6529 3a0a 2020 2020 2020 2020   tree):.        
-00004b90: 6368 696c 6472 656e 203d 206c 6973 7428  children = list(
-00004ba0: 7365 6c66 2e5f 7472 616e 7366 6f72 6d5f  self._transform_
-00004bb0: 6368 696c 6472 656e 2874 7265 652e 6368  children(tree.ch
-00004bc0: 696c 6472 656e 2929 0a20 2020 2020 2020  ildren)).       
-00004bd0: 2072 6574 7572 6e20 7365 6c66 2e5f 6361   return self._ca
-00004be0: 6c6c 5f75 7365 7266 756e 6328 7472 6565  ll_userfunc(tree
-00004bf0: 2c20 6368 696c 6472 656e 290a 0a20 2020  , children)..   
-00004c00: 2064 6566 2074 7261 6e73 666f 726d 2873   def transform(s
-00004c10: 656c 662c 2074 7265 653a 2054 7265 655b  elf, tree: Tree[
-00004c20: 5f4c 6561 665f 545d 2920 2d3e 205f 5265  _Leaf_T]) -> _Re
-00004c30: 7475 726e 5f54 3a0a 2020 2020 2020 2020  turn_T:.        
-00004c40: 232d 2d0a 2020 2020 2020 2020 7265 7475  #--.        retu
-00004c50: 726e 2073 656c 662e 5f74 7261 6e73 666f  rn self._transfo
-00004c60: 726d 5f74 7265 6528 7472 6565 290a 0a20  rm_tree(tree).. 
-00004c70: 2020 2064 6566 205f 5f6d 756c 5f5f 280a     def __mul__(.
-00004c80: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00004c90: 3a20 2754 7261 6e73 666f 726d 6572 5b5f  : 'Transformer[_
-00004ca0: 4c65 6166 5f54 2c20 5472 6565 5b5f 4c65  Leaf_T, Tree[_Le
-00004cb0: 6166 5f55 5d5d 272c 0a20 2020 2020 2020  af_U]]',.       
-00004cc0: 2020 2020 206f 7468 6572 3a20 2755 6e69       other: 'Uni
-00004cd0: 6f6e 5b54 7261 6e73 666f 726d 6572 5b5f  on[Transformer[_
-00004ce0: 4c65 6166 5f55 2c20 5f52 6574 7572 6e5f  Leaf_U, _Return_
-00004cf0: 565d 2c20 5472 616e 7366 6f72 6d65 7243  V], TransformerC
-00004d00: 6861 696e 5b5f 4c65 6166 5f55 2c20 5f52  hain[_Leaf_U, _R
-00004d10: 6574 7572 6e5f 562c 5d5d 270a 2020 2020  eturn_V,]]'.    
-00004d20: 2920 2d3e 2027 5472 616e 7366 6f72 6d65  ) -> 'Transforme
-00004d30: 7243 6861 696e 5b5f 4c65 6166 5f54 2c20  rChain[_Leaf_T, 
-00004d40: 5f52 6574 7572 6e5f 565d 273a 0a20 2020  _Return_V]':.   
-00004d50: 2020 2020 2023 2d2d 0a20 2020 2020 2020       #--.       
-00004d60: 2072 6574 7572 6e20 5472 616e 7366 6f72   return Transfor
-00004d70: 6d65 7243 6861 696e 2873 656c 662c 206f  merChain(self, o
-00004d80: 7468 6572 290a 0a20 2020 2064 6566 205f  ther)..    def _
-00004d90: 5f64 6566 6175 6c74 5f5f 2873 656c 662c  _default__(self,
-00004da0: 2064 6174 612c 2063 6869 6c64 7265 6e2c   data, children,
-00004db0: 206d 6574 6129 3a0a 2020 2020 2020 2020   meta):.        
-00004dc0: 232d 2d0a 2020 2020 2020 2020 7265 7475  #--.        retu
-00004dd0: 726e 2054 7265 6528 6461 7461 2c20 6368  rn Tree(data, ch
-00004de0: 696c 6472 656e 2c20 6d65 7461 290a 0a20  ildren, meta).. 
-00004df0: 2020 2064 6566 205f 5f64 6566 6175 6c74     def __default
-00004e00: 5f74 6f6b 656e 5f5f 2873 656c 662c 2074  _token__(self, t
-00004e10: 6f6b 656e 293a 0a20 2020 2020 2020 2023  oken):.        #
+00003840: 2079 6965 6c64 2066 726f 6d20 6e2e 5f70   yield from n._p
+00003850: 7265 7474 7928 6c65 7665 6c2b 312c 2069  retty(level+1, i
+00003860: 6e64 656e 745f 7374 7229 0a20 2020 2020  ndent_str).     
+00003870: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00003880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00003890: 2020 2020 2079 6965 6c64 2066 277b 696e       yield f'{in
+000038a0: 6465 6e74 5f73 7472 2a28 6c65 7665 6c2b  dent_str*(level+
+000038b0: 3129 7d7b 6e7d 5c6e 270a 0a20 2020 2064  1)}{n}\n'..    d
+000038c0: 6566 2070 7265 7474 7928 7365 6c66 2c20  ef pretty(self, 
+000038d0: 696e 6465 6e74 5f73 7472 3a20 7374 723d  indent_str: str=
+000038e0: 2720 2027 2920 2d3e 2073 7472 3a0a 2020  '  ') -> str:.  
+000038f0: 2020 2020 2020 232d 2d0a 2020 2020 2020        #--.      
+00003900: 2020 7265 7475 726e 2027 272e 6a6f 696e    return ''.join
+00003910: 2873 656c 662e 5f70 7265 7474 7928 302c  (self._pretty(0,
+00003920: 2069 6e64 656e 745f 7374 7229 290a 0a20   indent_str)).. 
+00003930: 2020 2064 6566 205f 5f72 6963 685f 5f28     def __rich__(
+00003940: 7365 6c66 2c20 7061 7265 6e74 3a4f 7074  self, parent:Opt
+00003950: 696f 6e61 6c5b 2772 6963 682e 7472 6565  ional['rich.tree
+00003960: 2e54 7265 6527 5d3d 4e6f 6e65 2920 2d3e  .Tree']=None) ->
+00003970: 2027 7269 6368 2e74 7265 652e 5472 6565   'rich.tree.Tree
+00003980: 273a 0a20 2020 2020 2020 2023 2d2d 0a20  ':.        #--. 
+00003990: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+000039a0: 6c66 2e5f 7269 6368 2870 6172 656e 7429  lf._rich(parent)
+000039b0: 0a0a 2020 2020 6465 6620 5f72 6963 6828  ..    def _rich(
+000039c0: 7365 6c66 2c20 7061 7265 6e74 293a 0a20  self, parent):. 
+000039d0: 2020 2020 2020 2069 6620 7061 7265 6e74         if parent
+000039e0: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
+000039f0: 6565 203d 2070 6172 656e 742e 6164 6428  ee = parent.add(
+00003a00: 6627 5b62 6f6c 645d 7b73 656c 662e 6461  f'[bold]{self.da
+00003a10: 7461 7d5b 2f62 6f6c 645d 2729 0a20 2020  ta}[/bold]').   
+00003a20: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00003a30: 2020 2020 2020 2069 6d70 6f72 7420 7269         import ri
+00003a40: 6368 2e74 7265 650a 2020 2020 2020 2020  ch.tree.        
+00003a50: 2020 2020 7472 6565 203d 2072 6963 682e      tree = rich.
+00003a60: 7472 6565 2e54 7265 6528 7365 6c66 2e64  tree.Tree(self.d
+00003a70: 6174 6129 0a0a 2020 2020 2020 2020 666f  ata)..        fo
+00003a80: 7220 6320 696e 2073 656c 662e 6368 696c  r c in self.chil
+00003a90: 6472 656e 3a0a 2020 2020 2020 2020 2020  dren:.          
+00003aa0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00003ab0: 632c 2054 7265 6529 3a0a 2020 2020 2020  c, Tree):.      
+00003ac0: 2020 2020 2020 2020 2020 632e 5f72 6963            c._ric
+00003ad0: 6828 7472 6565 290a 2020 2020 2020 2020  h(tree).        
+00003ae0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00003af0: 2020 2020 2020 2020 2020 7472 6565 2e61            tree.a
+00003b00: 6464 2866 275b 6772 6565 6e5d 7b63 7d5b  dd(f'[green]{c}[
+00003b10: 2f67 7265 656e 5d27 290a 0a20 2020 2020  /green]')..     
+00003b20: 2020 2072 6574 7572 6e20 7472 6565 0a0a     return tree..
+00003b30: 2020 2020 6465 6620 5f5f 6571 5f5f 2873      def __eq__(s
+00003b40: 656c 662c 206f 7468 6572 293a 0a20 2020  elf, other):.   
+00003b50: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+00003b60: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00003b70: 662e 6461 7461 203d 3d20 6f74 6865 722e  f.data == other.
+00003b80: 6461 7461 2061 6e64 2073 656c 662e 6368  data and self.ch
+00003b90: 696c 6472 656e 203d 3d20 6f74 6865 722e  ildren == other.
+00003ba0: 6368 696c 6472 656e 0a20 2020 2020 2020  children.       
+00003bb0: 2065 7863 6570 7420 4174 7472 6962 7574   except Attribut
+00003bc0: 6545 7272 6f72 3a0a 2020 2020 2020 2020  eError:.        
+00003bd0: 2020 2020 7265 7475 726e 2046 616c 7365      return False
+00003be0: 0a0a 2020 2020 6465 6620 5f5f 6e65 5f5f  ..    def __ne__
+00003bf0: 2873 656c 662c 206f 7468 6572 293a 0a20  (self, other):. 
+00003c00: 2020 2020 2020 2072 6574 7572 6e20 6e6f         return no
+00003c10: 7420 2873 656c 6620 3d3d 206f 7468 6572  t (self == other
+00003c20: 290a 0a20 2020 2064 6566 205f 5f68 6173  )..    def __has
+00003c30: 685f 5f28 7365 6c66 2920 2d3e 2069 6e74  h__(self) -> int
+00003c40: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00003c50: 2068 6173 6828 2873 656c 662e 6461 7461   hash((self.data
+00003c60: 2c20 7475 706c 6528 7365 6c66 2e63 6869  , tuple(self.chi
+00003c70: 6c64 7265 6e29 2929 0a0a 2020 2020 6465  ldren)))..    de
+00003c80: 6620 6974 6572 5f73 7562 7472 6565 7328  f iter_subtrees(
+00003c90: 7365 6c66 2920 2d3e 2027 4974 6572 6174  self) -> 'Iterat
+00003ca0: 6f72 5b54 7265 655b 5f4c 6561 665f 545d  or[Tree[_Leaf_T]
+00003cb0: 5d27 3a0a 2020 2020 2020 2020 232d 2d0a  ]':.        #--.
+00003cc0: 2020 2020 2020 2020 7175 6575 6520 3d20          queue = 
+00003cd0: 5b73 656c 665d 0a20 2020 2020 2020 2073  [self].        s
+00003ce0: 7562 7472 6565 7320 3d20 4f72 6465 7265  ubtrees = Ordere
+00003cf0: 6444 6963 7428 290a 2020 2020 2020 2020  dDict().        
+00003d00: 666f 7220 7375 6274 7265 6520 696e 2071  for subtree in q
+00003d10: 7565 7565 3a0a 2020 2020 2020 2020 2020  ueue:.          
+00003d20: 2020 7375 6274 7265 6573 5b69 6428 7375    subtrees[id(su
+00003d30: 6274 7265 6529 5d20 3d20 7375 6274 7265  btree)] = subtre
+00003d40: 650a 2020 2020 2020 2020 2020 2020 2323  e.            ##
+00003d50: 0a0a 2020 2020 2020 2020 2020 2020 7175  ..            qu
+00003d60: 6575 6520 2b3d 205b 6320 666f 7220 6320  eue += [c for c 
+00003d70: 696e 2072 6576 6572 7365 6428 7375 6274  in reversed(subt
+00003d80: 7265 652e 6368 696c 6472 656e 2920 2023  ree.children)  #
+00003d90: 230a 0a20 2020 2020 2020 2020 2020 2020  #..             
+00003da0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00003db0: 7374 616e 6365 2863 2c20 5472 6565 2920  stance(c, Tree) 
+00003dc0: 616e 6420 6964 2863 2920 6e6f 7420 696e  and id(c) not in
+00003dd0: 2073 7562 7472 6565 735d 0a0a 2020 2020   subtrees]..    
+00003de0: 2020 2020 6465 6c20 7175 6575 650a 2020      del queue.  
+00003df0: 2020 2020 2020 7265 7475 726e 2072 6576        return rev
+00003e00: 6572 7365 6428 6c69 7374 2873 7562 7472  ersed(list(subtr
+00003e10: 6565 732e 7661 6c75 6573 2829 2929 0a0a  ees.values()))..
+00003e20: 2020 2020 6465 6620 6974 6572 5f73 7562      def iter_sub
+00003e30: 7472 6565 735f 746f 7064 6f77 6e28 7365  trees_topdown(se
+00003e40: 6c66 293a 0a20 2020 2020 2020 2023 2d2d  lf):.        #--
+00003e50: 0a20 2020 2020 2020 2073 7461 636b 203d  .        stack =
+00003e60: 205b 7365 6c66 5d0a 2020 2020 2020 2020   [self].        
+00003e70: 7374 6163 6b5f 6170 7065 6e64 203d 2073  stack_append = s
+00003e80: 7461 636b 2e61 7070 656e 640a 2020 2020  tack.append.    
+00003e90: 2020 2020 7374 6163 6b5f 706f 7020 3d20      stack_pop = 
+00003ea0: 7374 6163 6b2e 706f 700a 2020 2020 2020  stack.pop.      
+00003eb0: 2020 7768 696c 6520 7374 6163 6b3a 0a20    while stack:. 
+00003ec0: 2020 2020 2020 2020 2020 206e 6f64 6520             node 
+00003ed0: 3d20 7374 6163 6b5f 706f 7028 290a 2020  = stack_pop().  
+00003ee0: 2020 2020 2020 2020 2020 6966 206e 6f74            if not
+00003ef0: 2069 7369 6e73 7461 6e63 6528 6e6f 6465   isinstance(node
+00003f00: 2c20 5472 6565 293a 0a20 2020 2020 2020  , Tree):.       
+00003f10: 2020 2020 2020 2020 2063 6f6e 7469 6e75           continu
+00003f20: 650a 2020 2020 2020 2020 2020 2020 7969  e.            yi
+00003f30: 656c 6420 6e6f 6465 0a20 2020 2020 2020  eld node.       
+00003f40: 2020 2020 2066 6f72 2063 6869 6c64 2069       for child i
+00003f50: 6e20 7265 7665 7273 6564 286e 6f64 652e  n reversed(node.
+00003f60: 6368 696c 6472 656e 293a 0a20 2020 2020  children):.     
+00003f70: 2020 2020 2020 2020 2020 2073 7461 636b             stack
+00003f80: 5f61 7070 656e 6428 6368 696c 6429 0a0a  _append(child)..
+00003f90: 2020 2020 6465 6620 6669 6e64 5f70 7265      def find_pre
+00003fa0: 6428 7365 6c66 2c20 7072 6564 3a20 2743  d(self, pred: 'C
+00003fb0: 616c 6c61 626c 655b 5b54 7265 655b 5f4c  allable[[Tree[_L
+00003fc0: 6561 665f 545d 5d2c 2062 6f6f 6c5d 2729  eaf_T]], bool]')
+00003fd0: 202d 3e20 2749 7465 7261 746f 725b 5472   -> 'Iterator[Tr
+00003fe0: 6565 5b5f 4c65 6166 5f54 5d5d 273a 0a20  ee[_Leaf_T]]':. 
+00003ff0: 2020 2020 2020 2023 2d2d 0a20 2020 2020         #--.     
+00004000: 2020 2072 6574 7572 6e20 6669 6c74 6572     return filter
+00004010: 2870 7265 642c 2073 656c 662e 6974 6572  (pred, self.iter
+00004020: 5f73 7562 7472 6565 7328 2929 0a0a 2020  _subtrees())..  
+00004030: 2020 6465 6620 6669 6e64 5f64 6174 6128    def find_data(
+00004040: 7365 6c66 2c20 6461 7461 3a20 7374 7229  self, data: str)
+00004050: 202d 3e20 2749 7465 7261 746f 725b 5472   -> 'Iterator[Tr
+00004060: 6565 5b5f 4c65 6166 5f54 5d5d 273a 0a20  ee[_Leaf_T]]':. 
+00004070: 2020 2020 2020 2023 2d2d 0a20 2020 2020         #--.     
+00004080: 2020 2072 6574 7572 6e20 7365 6c66 2e66     return self.f
+00004090: 696e 645f 7072 6564 286c 616d 6264 6120  ind_pred(lambda 
+000040a0: 743a 2074 2e64 6174 6120 3d3d 2064 6174  t: t.data == dat
+000040b0: 6129 0a0a 0a66 726f 6d20 6675 6e63 746f  a)...from functo
+000040c0: 6f6c 7320 696d 706f 7274 2077 7261 7073  ols import wraps
+000040d0: 2c20 7570 6461 7465 5f77 7261 7070 6572  , update_wrapper
+000040e0: 0a66 726f 6d20 696e 7370 6563 7420 696d  .from inspect im
+000040f0: 706f 7274 2067 6574 6d65 6d62 6572 732c  port getmembers,
+00004100: 2067 6574 6d72 6f0a 0a5f 5265 7475 726e   getmro.._Return
+00004110: 5f54 203d 2054 7970 6556 6172 2827 5f52  _T = TypeVar('_R
+00004120: 6574 7572 6e5f 5427 290a 5f52 6574 7572  eturn_T')._Retur
+00004130: 6e5f 5620 3d20 5479 7065 5661 7228 275f  n_V = TypeVar('_
+00004140: 5265 7475 726e 5f56 2729 0a5f 4c65 6166  Return_V')._Leaf
+00004150: 5f54 203d 2054 7970 6556 6172 2827 5f4c  _T = TypeVar('_L
+00004160: 6561 665f 5427 290a 5f4c 6561 665f 5520  eaf_T')._Leaf_U 
+00004170: 3d20 5479 7065 5661 7228 275f 4c65 6166  = TypeVar('_Leaf
+00004180: 5f55 2729 0a5f 5220 3d20 5479 7065 5661  _U')._R = TypeVa
+00004190: 7228 275f 5227 290a 5f46 554e 4320 3d20  r('_R')._FUNC = 
+000041a0: 4361 6c6c 6162 6c65 5b2e 2e2e 2c20 5f52  Callable[..., _R
+000041b0: 6574 7572 6e5f 545d 0a5f 4445 434f 5241  eturn_T]._DECORA
+000041c0: 5445 4420 3d20 556e 696f 6e5b 5f46 554e  TED = Union[_FUN
+000041d0: 432c 2074 7970 655d 0a0a 636c 6173 7320  C, type]..class 
+000041e0: 5f44 6973 6361 7264 5479 7065 3a0a 2020  _DiscardType:.  
+000041f0: 2020 232d 2d0a 0a20 2020 2064 6566 205f    #--..    def _
+00004200: 5f72 6570 725f 5f28 7365 6c66 293a 0a20  _repr__(self):. 
+00004210: 2020 2020 2020 2072 6574 7572 6e20 226c         return "l
+00004220: 6172 6b2e 7669 7369 746f 7273 2e44 6973  ark.visitors.Dis
+00004230: 6361 7264 220a 0a44 6973 6361 7264 203d  card"..Discard =
+00004240: 205f 4469 7363 6172 6454 7970 6528 290a   _DiscardType().
+00004250: 0a23 230a 0a0a 636c 6173 7320 5f44 6563  .##...class _Dec
+00004260: 6f72 6174 6162 6c65 3a0a 2020 2020 232d  oratable:.    #-
+00004270: 2d0a 0a20 2020 2040 636c 6173 736d 6574  -..    @classmet
+00004280: 686f 640a 2020 2020 6465 6620 5f61 7070  hod.    def _app
+00004290: 6c79 5f76 5f61 7267 7328 636c 732c 2076  ly_v_args(cls, v
+000042a0: 6973 6974 5f77 7261 7070 6572 293a 0a20  isit_wrapper):. 
+000042b0: 2020 2020 2020 206d 726f 203d 2067 6574         mro = get
+000042c0: 6d72 6f28 636c 7329 0a20 2020 2020 2020  mro(cls).       
+000042d0: 2061 7373 6572 7420 6d72 6f5b 305d 2069   assert mro[0] i
+000042e0: 7320 636c 730a 2020 2020 2020 2020 6c69  s cls.        li
+000042f0: 626d 656d 6265 7273 203d 207b 6e61 6d65  bmembers = {name
+00004300: 2066 6f72 205f 636c 7320 696e 206d 726f   for _cls in mro
+00004310: 5b31 3a5d 2066 6f72 206e 616d 652c 205f  [1:] for name, _
+00004320: 2069 6e20 6765 746d 656d 6265 7273 285f   in getmembers(_
+00004330: 636c 7329 7d0a 2020 2020 2020 2020 666f  cls)}.        fo
+00004340: 7220 6e61 6d65 2c20 7661 6c75 6520 696e  r name, value in
+00004350: 2067 6574 6d65 6d62 6572 7328 636c 7329   getmembers(cls)
+00004360: 3a0a 0a20 2020 2020 2020 2020 2020 2023  :..            #
+00004370: 230a 0a20 2020 2020 2020 2020 2020 2069  #..            i
+00004380: 6620 6e61 6d65 2e73 7461 7274 7377 6974  f name.startswit
+00004390: 6828 275f 2729 206f 7220 286e 616d 6520  h('_') or (name 
+000043a0: 696e 206c 6962 6d65 6d62 6572 7320 616e  in libmembers an
+000043b0: 6420 6e61 6d65 206e 6f74 2069 6e20 636c  d name not in cl
+000043c0: 732e 5f5f 6469 6374 5f5f 293a 0a20 2020  s.__dict__):.   
+000043d0: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+000043e0: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+000043f0: 2020 6966 206e 6f74 2063 616c 6c61 626c    if not callabl
+00004400: 6528 7661 6c75 6529 3a0a 2020 2020 2020  e(value):.      
+00004410: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+00004420: 7565 0a0a 2020 2020 2020 2020 2020 2020  ue..            
+00004430: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
+00004440: 6966 2069 7369 6e73 7461 6e63 6528 636c  if isinstance(cl
+00004450: 732e 5f5f 6469 6374 5f5f 5b6e 616d 655d  s.__dict__[name]
+00004460: 2c20 5f56 4172 6773 5772 6170 7065 7229  , _VArgsWrapper)
+00004470: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00004480: 2020 636f 6e74 696e 7565 0a0a 2020 2020    continue..    
+00004490: 2020 2020 2020 2020 7365 7461 7474 7228          setattr(
+000044a0: 636c 732c 206e 616d 652c 205f 5641 7267  cls, name, _VArg
+000044b0: 7357 7261 7070 6572 2863 6c73 2e5f 5f64  sWrapper(cls.__d
+000044c0: 6963 745f 5f5b 6e61 6d65 5d2c 2076 6973  ict__[name], vis
+000044d0: 6974 5f77 7261 7070 6572 2929 0a20 2020  it_wrapper)).   
+000044e0: 2020 2020 2072 6574 7572 6e20 636c 730a       return cls.
+000044f0: 0a20 2020 2064 6566 205f 5f63 6c61 7373  .    def __class
+00004500: 5f67 6574 6974 656d 5f5f 2863 6c73 2c20  _getitem__(cls, 
+00004510: 5f29 3a0a 2020 2020 2020 2020 7265 7475  _):.        retu
+00004520: 726e 2063 6c73 0a0a 0a63 6c61 7373 2054  rn cls...class T
+00004530: 7261 6e73 666f 726d 6572 285f 4465 636f  ransformer(_Deco
+00004540: 7261 7461 626c 652c 2041 4243 2c20 4765  ratable, ABC, Ge
+00004550: 6e65 7269 635b 5f4c 6561 665f 542c 205f  neric[_Leaf_T, _
+00004560: 5265 7475 726e 5f54 5d29 3a0a 2020 2020  Return_T]):.    
+00004570: 232d 2d0a 2020 2020 5f5f 7669 7369 745f  #--.    __visit_
+00004580: 746f 6b65 6e73 5f5f 203d 2054 7275 6520  tokens__ = True 
+00004590: 2020 2323 0a0a 0a20 2020 2064 6566 205f    ##...    def _
+000045a0: 5f69 6e69 745f 5f28 7365 6c66 2c20 2076  _init__(self,  v
+000045b0: 6973 6974 5f74 6f6b 656e 733a 2062 6f6f  isit_tokens: boo
+000045c0: 6c3d 5472 7565 2920 2d3e 204e 6f6e 653a  l=True) -> None:
+000045d0: 0a20 2020 2020 2020 2073 656c 662e 5f5f  .        self.__
+000045e0: 7669 7369 745f 746f 6b65 6e73 5f5f 203d  visit_tokens__ =
+000045f0: 2076 6973 6974 5f74 6f6b 656e 730a 0a20   visit_tokens.. 
+00004600: 2020 2064 6566 205f 6361 6c6c 5f75 7365     def _call_use
+00004610: 7266 756e 6328 7365 6c66 2c20 7472 6565  rfunc(self, tree
+00004620: 2c20 6e65 775f 6368 696c 6472 656e 3d4e  , new_children=N
+00004630: 6f6e 6529 3a0a 2020 2020 2020 2020 2323  one):.        ##
+00004640: 0a0a 2020 2020 2020 2020 6368 696c 6472  ..        childr
+00004650: 656e 203d 206e 6577 5f63 6869 6c64 7265  en = new_childre
+00004660: 6e20 6966 206e 6577 5f63 6869 6c64 7265  n if new_childre
+00004670: 6e20 6973 206e 6f74 204e 6f6e 6520 656c  n is not None el
+00004680: 7365 2074 7265 652e 6368 696c 6472 656e  se tree.children
+00004690: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+000046a0: 2020 2020 2020 2020 2020 6620 3d20 6765            f = ge
+000046b0: 7461 7474 7228 7365 6c66 2c20 7472 6565  tattr(self, tree
+000046c0: 2e64 6174 6129 0a20 2020 2020 2020 2065  .data).        e
+000046d0: 7863 6570 7420 4174 7472 6962 7574 6545  xcept AttributeE
+000046e0: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+000046f0: 2020 7265 7475 726e 2073 656c 662e 5f5f    return self.__
+00004700: 6465 6661 756c 745f 5f28 7472 6565 2e64  default__(tree.d
+00004710: 6174 612c 2063 6869 6c64 7265 6e2c 2074  ata, children, t
+00004720: 7265 652e 6d65 7461 290a 2020 2020 2020  ree.meta).      
+00004730: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00004740: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00004750: 2020 2020 2020 2020 2077 7261 7070 6572           wrapper
+00004760: 203d 2067 6574 6174 7472 2866 2c20 2776   = getattr(f, 'v
+00004770: 6973 6974 5f77 7261 7070 6572 272c 204e  isit_wrapper', N
+00004780: 6f6e 6529 0a20 2020 2020 2020 2020 2020  one).           
+00004790: 2020 2020 2069 6620 7772 6170 7065 7220       if wrapper 
+000047a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+000047b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000047c0: 2072 6574 7572 6e20 662e 7669 7369 745f   return f.visit_
+000047d0: 7772 6170 7065 7228 662c 2074 7265 652e  wrapper(f, tree.
+000047e0: 6461 7461 2c20 6368 696c 6472 656e 2c20  data, children, 
+000047f0: 7472 6565 2e6d 6574 6129 0a20 2020 2020  tree.meta).     
+00004800: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00004810: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00004820: 2020 2020 2072 6574 7572 6e20 6628 6368       return f(ch
+00004830: 696c 6472 656e 290a 2020 2020 2020 2020  ildren).        
+00004840: 2020 2020 6578 6365 7074 2047 7261 6d6d      except Gramm
+00004850: 6172 4572 726f 723a 0a20 2020 2020 2020  arError:.       
+00004860: 2020 2020 2020 2020 2072 6169 7365 0a20           raise. 
+00004870: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00004880: 7420 4578 6365 7074 696f 6e20 6173 2065  t Exception as e
+00004890: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000048a0: 2020 7261 6973 6520 5669 7369 7445 7272    raise VisitErr
+000048b0: 6f72 2874 7265 652e 6461 7461 2c20 7472  or(tree.data, tr
+000048c0: 6565 2c20 6529 0a0a 2020 2020 6465 6620  ee, e)..    def 
+000048d0: 5f63 616c 6c5f 7573 6572 6675 6e63 5f74  _call_userfunc_t
+000048e0: 6f6b 656e 2873 656c 662c 2074 6f6b 656e  oken(self, token
+000048f0: 293a 0a20 2020 2020 2020 2074 7279 3a0a  ):.        try:.
+00004900: 2020 2020 2020 2020 2020 2020 6620 3d20              f = 
+00004910: 6765 7461 7474 7228 7365 6c66 2c20 746f  getattr(self, to
+00004920: 6b65 6e2e 7479 7065 290a 2020 2020 2020  ken.type).      
+00004930: 2020 6578 6365 7074 2041 7474 7269 6275    except Attribu
+00004940: 7465 4572 726f 723a 0a20 2020 2020 2020  teError:.       
+00004950: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00004960: 2e5f 5f64 6566 6175 6c74 5f74 6f6b 656e  .__default_token
+00004970: 5f5f 2874 6f6b 656e 290a 2020 2020 2020  __(token).      
+00004980: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00004990: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+000049a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000049b0: 6628 746f 6b65 6e29 0a20 2020 2020 2020  f(token).       
+000049c0: 2020 2020 2065 7863 6570 7420 4772 616d       except Gram
+000049d0: 6d61 7245 7272 6f72 3a0a 2020 2020 2020  marError:.      
+000049e0: 2020 2020 2020 2020 2020 7261 6973 650a            raise.
+000049f0: 2020 2020 2020 2020 2020 2020 6578 6365              exce
+00004a00: 7074 2045 7863 6570 7469 6f6e 2061 7320  pt Exception as 
+00004a10: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
+00004a20: 2020 2072 6169 7365 2056 6973 6974 4572     raise VisitEr
+00004a30: 726f 7228 746f 6b65 6e2e 7479 7065 2c20  ror(token.type, 
+00004a40: 746f 6b65 6e2c 2065 290a 0a20 2020 2064  token, e)..    d
+00004a50: 6566 205f 7472 616e 7366 6f72 6d5f 6368  ef _transform_ch
+00004a60: 696c 6472 656e 2873 656c 662c 2063 6869  ildren(self, chi
+00004a70: 6c64 7265 6e29 3a0a 2020 2020 2020 2020  ldren):.        
+00004a80: 666f 7220 6320 696e 2063 6869 6c64 7265  for c in childre
+00004a90: 6e3a 0a20 2020 2020 2020 2020 2020 2069  n:.            i
+00004aa0: 6620 6973 696e 7374 616e 6365 2863 2c20  f isinstance(c, 
+00004ab0: 5472 6565 293a 0a20 2020 2020 2020 2020  Tree):.         
+00004ac0: 2020 2020 2020 2072 6573 203d 2073 656c         res = sel
+00004ad0: 662e 5f74 7261 6e73 666f 726d 5f74 7265  f._transform_tre
+00004ae0: 6528 6329 0a20 2020 2020 2020 2020 2020  e(c).           
+00004af0: 2065 6c69 6620 7365 6c66 2e5f 5f76 6973   elif self.__vis
+00004b00: 6974 5f74 6f6b 656e 735f 5f20 616e 6420  it_tokens__ and 
+00004b10: 6973 696e 7374 616e 6365 2863 2c20 546f  isinstance(c, To
+00004b20: 6b65 6e29 3a0a 2020 2020 2020 2020 2020  ken):.          
+00004b30: 2020 2020 2020 7265 7320 3d20 7365 6c66        res = self
+00004b40: 2e5f 6361 6c6c 5f75 7365 7266 756e 635f  ._call_userfunc_
+00004b50: 746f 6b65 6e28 6329 0a20 2020 2020 2020  token(c).       
+00004b60: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00004b70: 2020 2020 2020 2020 2020 2072 6573 203d             res =
+00004b80: 2063 0a0a 2020 2020 2020 2020 2020 2020   c..            
+00004b90: 6966 2072 6573 2069 7320 6e6f 7420 4469  if res is not Di
+00004ba0: 7363 6172 643a 0a20 2020 2020 2020 2020  scard:.         
+00004bb0: 2020 2020 2020 2079 6965 6c64 2072 6573         yield res
+00004bc0: 0a0a 2020 2020 6465 6620 5f74 7261 6e73  ..    def _trans
+00004bd0: 666f 726d 5f74 7265 6528 7365 6c66 2c20  form_tree(self, 
+00004be0: 7472 6565 293a 0a20 2020 2020 2020 2063  tree):.        c
+00004bf0: 6869 6c64 7265 6e20 3d20 6c69 7374 2873  hildren = list(s
+00004c00: 656c 662e 5f74 7261 6e73 666f 726d 5f63  elf._transform_c
+00004c10: 6869 6c64 7265 6e28 7472 6565 2e63 6869  hildren(tree.chi
+00004c20: 6c64 7265 6e29 290a 2020 2020 2020 2020  ldren)).        
+00004c30: 7265 7475 726e 2073 656c 662e 5f63 616c  return self._cal
+00004c40: 6c5f 7573 6572 6675 6e63 2874 7265 652c  l_userfunc(tree,
+00004c50: 2063 6869 6c64 7265 6e29 0a0a 2020 2020   children)..    
+00004c60: 6465 6620 7472 616e 7366 6f72 6d28 7365  def transform(se
+00004c70: 6c66 2c20 7472 6565 3a20 5472 6565 5b5f  lf, tree: Tree[_
+00004c80: 4c65 6166 5f54 5d29 202d 3e20 5f52 6574  Leaf_T]) -> _Ret
+00004c90: 7572 6e5f 543a 0a20 2020 2020 2020 2023  urn_T:.        #
+00004ca0: 2d2d 0a20 2020 2020 2020 2072 6574 7572  --.        retur
+00004cb0: 6e20 7365 6c66 2e5f 7472 616e 7366 6f72  n self._transfor
+00004cc0: 6d5f 7472 6565 2874 7265 6529 0a0a 2020  m_tree(tree)..  
+00004cd0: 2020 6465 6620 5f5f 6d75 6c5f 5f28 0a20    def __mul__(. 
+00004ce0: 2020 2020 2020 2020 2020 2073 656c 663a             self:
+00004cf0: 2027 5472 616e 7366 6f72 6d65 725b 5f4c   'Transformer[_L
+00004d00: 6561 665f 542c 2054 7265 655b 5f4c 6561  eaf_T, Tree[_Lea
+00004d10: 665f 555d 5d27 2c0a 2020 2020 2020 2020  f_U]]',.        
+00004d20: 2020 2020 6f74 6865 723a 2027 556e 696f      other: 'Unio
+00004d30: 6e5b 5472 616e 7366 6f72 6d65 725b 5f4c  n[Transformer[_L
+00004d40: 6561 665f 552c 205f 5265 7475 726e 5f56  eaf_U, _Return_V
+00004d50: 5d2c 2054 7261 6e73 666f 726d 6572 4368  ], TransformerCh
+00004d60: 6169 6e5b 5f4c 6561 665f 552c 205f 5265  ain[_Leaf_U, _Re
+00004d70: 7475 726e 5f56 2c5d 5d27 0a20 2020 2029  turn_V,]]'.    )
+00004d80: 202d 3e20 2754 7261 6e73 666f 726d 6572   -> 'Transformer
+00004d90: 4368 6169 6e5b 5f4c 6561 665f 542c 205f  Chain[_Leaf_T, _
+00004da0: 5265 7475 726e 5f56 5d27 3a0a 2020 2020  Return_V]':.    
+00004db0: 2020 2020 232d 2d0a 2020 2020 2020 2020      #--.        
+00004dc0: 7265 7475 726e 2054 7261 6e73 666f 726d  return Transform
+00004dd0: 6572 4368 6169 6e28 7365 6c66 2c20 6f74  erChain(self, ot
+00004de0: 6865 7229 0a0a 2020 2020 6465 6620 5f5f  her)..    def __
+00004df0: 6465 6661 756c 745f 5f28 7365 6c66 2c20  default__(self, 
+00004e00: 6461 7461 2c20 6368 696c 6472 656e 2c20  data, children, 
+00004e10: 6d65 7461 293a 0a20 2020 2020 2020 2023  meta):.        #
 00004e20: 2d2d 0a20 2020 2020 2020 2072 6574 7572  --.        retur
-00004e30: 6e20 746f 6b65 6e0a 0a0a 6465 6620 6d65  n token...def me
-00004e40: 7267 655f 7472 616e 7366 6f72 6d65 7273  rge_transformers
-00004e50: 2862 6173 655f 7472 616e 7366 6f72 6d65  (base_transforme
-00004e60: 723d 4e6f 6e65 2c20 2a2a 7472 616e 7366  r=None, **transf
-00004e70: 6f72 6d65 7273 5f74 6f5f 6d65 7267 6529  ormers_to_merge)
-00004e80: 3a0a 2020 2020 232d 2d0a 2020 2020 6966  :.    #--.    if
-00004e90: 2062 6173 655f 7472 616e 7366 6f72 6d65   base_transforme
-00004ea0: 7220 6973 204e 6f6e 653a 0a20 2020 2020  r is None:.     
-00004eb0: 2020 2062 6173 655f 7472 616e 7366 6f72     base_transfor
-00004ec0: 6d65 7220 3d20 5472 616e 7366 6f72 6d65  mer = Transforme
-00004ed0: 7228 290a 2020 2020 666f 7220 7072 6566  r().    for pref
-00004ee0: 6978 2c20 7472 616e 7366 6f72 6d65 7220  ix, transformer 
-00004ef0: 696e 2074 7261 6e73 666f 726d 6572 735f  in transformers_
-00004f00: 746f 5f6d 6572 6765 2e69 7465 6d73 2829  to_merge.items()
-00004f10: 3a0a 2020 2020 2020 2020 666f 7220 6d65  :.        for me
-00004f20: 7468 6f64 5f6e 616d 6520 696e 2064 6972  thod_name in dir
-00004f30: 2874 7261 6e73 666f 726d 6572 293a 0a20  (transformer):. 
-00004f40: 2020 2020 2020 2020 2020 206d 6574 686f             metho
-00004f50: 6420 3d20 6765 7461 7474 7228 7472 616e  d = getattr(tran
-00004f60: 7366 6f72 6d65 722c 206d 6574 686f 645f  sformer, method_
-00004f70: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
-00004f80: 2020 6966 206e 6f74 2063 616c 6c61 626c    if not callabl
-00004f90: 6528 6d65 7468 6f64 293a 0a20 2020 2020  e(method):.     
-00004fa0: 2020 2020 2020 2020 2020 2063 6f6e 7469             conti
-00004fb0: 6e75 650a 2020 2020 2020 2020 2020 2020  nue.            
-00004fc0: 6966 206d 6574 686f 645f 6e61 6d65 2e73  if method_name.s
-00004fd0: 7461 7274 7377 6974 6828 225f 2229 206f  tartswith("_") o
-00004fe0: 7220 6d65 7468 6f64 5f6e 616d 6520 3d3d  r method_name ==
-00004ff0: 2022 7472 616e 7366 6f72 6d22 3a0a 2020   "transform":.  
-00005000: 2020 2020 2020 2020 2020 2020 2020 636f                co
-00005010: 6e74 696e 7565 0a20 2020 2020 2020 2020  ntinue.         
-00005020: 2020 2070 7265 6669 7865 645f 6d65 7468     prefixed_meth
-00005030: 6f64 203d 2070 7265 6669 7820 2b20 225f  od = prefix + "_
-00005040: 5f22 202b 206d 6574 686f 645f 6e61 6d65  _" + method_name
-00005050: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00005060: 6861 7361 7474 7228 6261 7365 5f74 7261  hasattr(base_tra
-00005070: 6e73 666f 726d 6572 2c20 7072 6566 6978  nsformer, prefix
-00005080: 6564 5f6d 6574 686f 6429 3a0a 2020 2020  ed_method):.    
-00005090: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000050a0: 6520 4174 7472 6962 7574 6545 7272 6f72  e AttributeError
-000050b0: 2822 4361 6e6e 6f74 206d 6572 6765 3a20  ("Cannot merge: 
-000050c0: 6d65 7468 6f64 2027 2573 2720 6170 7065  method '%s' appe
-000050d0: 6172 7320 6d6f 7265 2074 6861 6e20 6f6e  ars more than on
-000050e0: 6365 2220 2520 7072 6566 6978 6564 5f6d  ce" % prefixed_m
-000050f0: 6574 686f 6429 0a0a 2020 2020 2020 2020  ethod)..        
-00005100: 2020 2020 7365 7461 7474 7228 6261 7365      setattr(base
-00005110: 5f74 7261 6e73 666f 726d 6572 2c20 7072  _transformer, pr
-00005120: 6566 6978 6564 5f6d 6574 686f 642c 206d  efixed_method, m
-00005130: 6574 686f 6429 0a0a 2020 2020 7265 7475  ethod)..    retu
-00005140: 726e 2062 6173 655f 7472 616e 7366 6f72  rn base_transfor
-00005150: 6d65 720a 0a0a 636c 6173 7320 496e 6c69  mer...class Inli
-00005160: 6e65 5472 616e 7366 6f72 6d65 7228 5472  neTransformer(Tr
-00005170: 616e 7366 6f72 6d65 7229 3a20 2020 2323  ansformer):   ##
-00005180: 0a0a 2020 2020 6465 6620 5f63 616c 6c5f  ..    def _call_
-00005190: 7573 6572 6675 6e63 2873 656c 662c 2074  userfunc(self, t
-000051a0: 7265 652c 206e 6577 5f63 6869 6c64 7265  ree, new_childre
-000051b0: 6e3d 4e6f 6e65 293a 0a20 2020 2020 2020  n=None):.       
-000051c0: 2023 230a 0a20 2020 2020 2020 2063 6869   ##..        chi
-000051d0: 6c64 7265 6e20 3d20 6e65 775f 6368 696c  ldren = new_chil
-000051e0: 6472 656e 2069 6620 6e65 775f 6368 696c  dren if new_chil
-000051f0: 6472 656e 2069 7320 6e6f 7420 4e6f 6e65  dren is not None
-00005200: 2065 6c73 6520 7472 6565 2e63 6869 6c64   else tree.child
-00005210: 7265 6e0a 2020 2020 2020 2020 7472 793a  ren.        try:
-00005220: 0a20 2020 2020 2020 2020 2020 2066 203d  .            f =
-00005230: 2067 6574 6174 7472 2873 656c 662c 2074   getattr(self, t
-00005240: 7265 652e 6461 7461 290a 2020 2020 2020  ree.data).      
-00005250: 2020 6578 6365 7074 2041 7474 7269 6275    except Attribu
-00005260: 7465 4572 726f 723a 0a20 2020 2020 2020  teError:.       
-00005270: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00005280: 2e5f 5f64 6566 6175 6c74 5f5f 2874 7265  .__default__(tre
-00005290: 652e 6461 7461 2c20 6368 696c 6472 656e  e.data, children
-000052a0: 2c20 7472 6565 2e6d 6574 6129 0a20 2020  , tree.meta).   
-000052b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000052c0: 2020 2020 2020 2072 6574 7572 6e20 6628         return f(
-000052d0: 2a63 6869 6c64 7265 6e29 0a0a 0a63 6c61  *children)...cla
-000052e0: 7373 2054 7261 6e73 666f 726d 6572 4368  ss TransformerCh
-000052f0: 6169 6e28 4765 6e65 7269 635b 5f4c 6561  ain(Generic[_Lea
-00005300: 665f 542c 205f 5265 7475 726e 5f54 5d29  f_T, _Return_T])
-00005310: 3a0a 0a20 2020 2074 7261 6e73 666f 726d  :..    transform
-00005320: 6572 733a 2027 5475 706c 655b 556e 696f  ers: 'Tuple[Unio
-00005330: 6e5b 5472 616e 7366 6f72 6d65 722c 2054  n[Transformer, T
-00005340: 7261 6e73 666f 726d 6572 4368 6169 6e5d  ransformerChain]
-00005350: 2c20 2e2e 2e5d 270a 0a20 2020 2064 6566  , ...]'..    def
-00005360: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-00005370: 2a74 7261 6e73 666f 726d 6572 733a 2027  *transformers: '
-00005380: 556e 696f 6e5b 5472 616e 7366 6f72 6d65  Union[Transforme
-00005390: 722c 2054 7261 6e73 666f 726d 6572 4368  r, TransformerCh
-000053a0: 6169 6e5d 2729 202d 3e20 4e6f 6e65 3a0a  ain]') -> None:.
-000053b0: 2020 2020 2020 2020 7365 6c66 2e74 7261          self.tra
-000053c0: 6e73 666f 726d 6572 7320 3d20 7472 616e  nsformers = tran
-000053d0: 7366 6f72 6d65 7273 0a0a 2020 2020 6465  sformers..    de
-000053e0: 6620 7472 616e 7366 6f72 6d28 7365 6c66  f transform(self
-000053f0: 2c20 7472 6565 3a20 5472 6565 5b5f 4c65  , tree: Tree[_Le
-00005400: 6166 5f54 5d29 202d 3e20 5f52 6574 7572  af_T]) -> _Retur
-00005410: 6e5f 543a 0a20 2020 2020 2020 2066 6f72  n_T:.        for
-00005420: 2074 2069 6e20 7365 6c66 2e74 7261 6e73   t in self.trans
-00005430: 666f 726d 6572 733a 0a20 2020 2020 2020  formers:.       
-00005440: 2020 2020 2074 7265 6520 3d20 742e 7472       tree = t.tr
-00005450: 616e 7366 6f72 6d28 7472 6565 290a 2020  ansform(tree).  
-00005460: 2020 2020 2020 7265 7475 726e 2063 6173        return cas
-00005470: 7428 5f52 6574 7572 6e5f 542c 2074 7265  t(_Return_T, tre
-00005480: 6529 0a0a 2020 2020 6465 6620 5f5f 6d75  e)..    def __mu
-00005490: 6c5f 5f28 0a20 2020 2020 2020 2020 2020  l__(.           
-000054a0: 2073 656c 663a 2027 5472 616e 7366 6f72   self: 'Transfor
-000054b0: 6d65 7243 6861 696e 5b5f 4c65 6166 5f54  merChain[_Leaf_T
-000054c0: 2c20 5472 6565 5b5f 4c65 6166 5f55 5d5d  , Tree[_Leaf_U]]
-000054d0: 272c 0a20 2020 2020 2020 2020 2020 206f  ',.            o
-000054e0: 7468 6572 3a20 2755 6e69 6f6e 5b54 7261  ther: 'Union[Tra
-000054f0: 6e73 666f 726d 6572 5b5f 4c65 6166 5f55  nsformer[_Leaf_U
-00005500: 2c20 5f52 6574 7572 6e5f 565d 2c20 5472  , _Return_V], Tr
-00005510: 616e 7366 6f72 6d65 7243 6861 696e 5b5f  ansformerChain[_
-00005520: 4c65 6166 5f55 2c20 5f52 6574 7572 6e5f  Leaf_U, _Return_
-00005530: 565d 5d27 0a20 2020 2029 202d 3e20 2754  V]]'.    ) -> 'T
-00005540: 7261 6e73 666f 726d 6572 4368 6169 6e5b  ransformerChain[
-00005550: 5f4c 6561 665f 542c 205f 5265 7475 726e  _Leaf_T, _Return
-00005560: 5f56 5d27 3a0a 2020 2020 2020 2020 7265  _V]':.        re
-00005570: 7475 726e 2054 7261 6e73 666f 726d 6572  turn Transformer
-00005580: 4368 6169 6e28 2a73 656c 662e 7472 616e  Chain(*self.tran
-00005590: 7366 6f72 6d65 7273 202b 2028 6f74 6865  sformers + (othe
-000055a0: 722c 2929 0a0a 0a63 6c61 7373 2054 7261  r,))...class Tra
-000055b0: 6e73 666f 726d 6572 5f49 6e50 6c61 6365  nsformer_InPlace
-000055c0: 2854 7261 6e73 666f 726d 6572 293a 0a20  (Transformer):. 
-000055d0: 2020 2023 2d2d 0a20 2020 2064 6566 205f     #--.    def _
-000055e0: 7472 616e 7366 6f72 6d5f 7472 6565 2873  transform_tree(s
-000055f0: 656c 662c 2074 7265 6529 3a20 2020 2020  elf, tree):     
-00005600: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
-00005610: 2020 7265 7475 726e 2073 656c 662e 5f63    return self._c
-00005620: 616c 6c5f 7573 6572 6675 6e63 2874 7265  all_userfunc(tre
-00005630: 6529 0a0a 2020 2020 6465 6620 7472 616e  e)..    def tran
-00005640: 7366 6f72 6d28 7365 6c66 2c20 7472 6565  sform(self, tree
-00005650: 3a20 5472 6565 5b5f 4c65 6166 5f54 5d29  : Tree[_Leaf_T])
-00005660: 202d 3e20 5f52 6574 7572 6e5f 543a 0a20   -> _Return_T:. 
-00005670: 2020 2020 2020 2066 6f72 2073 7562 7472         for subtr
-00005680: 6565 2069 6e20 7472 6565 2e69 7465 725f  ee in tree.iter_
-00005690: 7375 6274 7265 6573 2829 3a0a 2020 2020  subtrees():.    
-000056a0: 2020 2020 2020 2020 7375 6274 7265 652e          subtree.
-000056b0: 6368 696c 6472 656e 203d 206c 6973 7428  children = list(
-000056c0: 7365 6c66 2e5f 7472 616e 7366 6f72 6d5f  self._transform_
-000056d0: 6368 696c 6472 656e 2873 7562 7472 6565  children(subtree
-000056e0: 2e63 6869 6c64 7265 6e29 290a 0a20 2020  .children))..   
-000056f0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00005700: 2e5f 7472 616e 7366 6f72 6d5f 7472 6565  ._transform_tree
-00005710: 2874 7265 6529 0a0a 0a63 6c61 7373 2054  (tree)...class T
-00005720: 7261 6e73 666f 726d 6572 5f4e 6f6e 5265  ransformer_NonRe
-00005730: 6375 7273 6976 6528 5472 616e 7366 6f72  cursive(Transfor
-00005740: 6d65 7229 3a0a 2020 2020 232d 2d0a 0a20  mer):.    #--.. 
-00005750: 2020 2064 6566 2074 7261 6e73 666f 726d     def transform
-00005760: 2873 656c 662c 2074 7265 653a 2054 7265  (self, tree: Tre
-00005770: 655b 5f4c 6561 665f 545d 2920 2d3e 205f  e[_Leaf_T]) -> _
-00005780: 5265 7475 726e 5f54 3a0a 2020 2020 2020  Return_T:.      
-00005790: 2020 2323 0a0a 2020 2020 2020 2020 7265    ##..        re
-000057a0: 765f 706f 7374 6669 7820 3d20 5b5d 0a20  v_postfix = []. 
-000057b0: 2020 2020 2020 2071 3a20 4c69 7374 5b42         q: List[B
-000057c0: 7261 6e63 685b 5f4c 6561 665f 545d 5d20  ranch[_Leaf_T]] 
-000057d0: 3d20 5b74 7265 655d 0a20 2020 2020 2020  = [tree].       
-000057e0: 2077 6869 6c65 2071 3a0a 2020 2020 2020   while q:.      
-000057f0: 2020 2020 2020 7420 3d20 712e 706f 7028        t = q.pop(
-00005800: 290a 2020 2020 2020 2020 2020 2020 7265  ).            re
-00005810: 765f 706f 7374 6669 782e 6170 7065 6e64  v_postfix.append
-00005820: 2874 290a 2020 2020 2020 2020 2020 2020  (t).            
-00005830: 6966 2069 7369 6e73 7461 6e63 6528 742c  if isinstance(t,
-00005840: 2054 7265 6529 3a0a 2020 2020 2020 2020   Tree):.        
-00005850: 2020 2020 2020 2020 7120 2b3d 2074 2e63          q += t.c
-00005860: 6869 6c64 7265 6e0a 0a20 2020 2020 2020  hildren..       
-00005870: 2023 230a 0a20 2020 2020 2020 2073 7461   ##..        sta
-00005880: 636b 3a20 4c69 7374 203d 205b 5d0a 2020  ck: List = [].  
-00005890: 2020 2020 2020 666f 7220 7820 696e 2072        for x in r
-000058a0: 6576 6572 7365 6428 7265 765f 706f 7374  eversed(rev_post
-000058b0: 6669 7829 3a0a 2020 2020 2020 2020 2020  fix):.          
-000058c0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000058d0: 782c 2054 7265 6529 3a0a 2020 2020 2020  x, Tree):.      
-000058e0: 2020 2020 2020 2020 2020 7369 7a65 203d            size =
-000058f0: 206c 656e 2878 2e63 6869 6c64 7265 6e29   len(x.children)
-00005900: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00005910: 2069 6620 7369 7a65 3a0a 2020 2020 2020   if size:.      
-00005920: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-00005930: 6773 203d 2073 7461 636b 5b2d 7369 7a65  gs = stack[-size
-00005940: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
-00005950: 2020 2020 2020 2064 656c 2073 7461 636b         del stack
-00005960: 5b2d 7369 7a65 3a5d 0a20 2020 2020 2020  [-size:].       
-00005970: 2020 2020 2020 2020 2065 6c73 653a 0a20           else:. 
-00005980: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005990: 2020 2061 7267 7320 3d20 5b5d 0a0a 2020     args = []..  
-000059a0: 2020 2020 2020 2020 2020 2020 2020 7265                re
-000059b0: 7320 3d20 7365 6c66 2e5f 6361 6c6c 5f75  s = self._call_u
-000059c0: 7365 7266 756e 6328 782c 2061 7267 7329  serfunc(x, args)
-000059d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000059e0: 2069 6620 7265 7320 6973 206e 6f74 2044   if res is not D
-000059f0: 6973 6361 7264 3a0a 2020 2020 2020 2020  iscard:.        
-00005a00: 2020 2020 2020 2020 2020 2020 7374 6163              stac
-00005a10: 6b2e 6170 7065 6e64 2872 6573 290a 0a20  k.append(res).. 
-00005a20: 2020 2020 2020 2020 2020 2065 6c69 6620             elif 
-00005a30: 7365 6c66 2e5f 5f76 6973 6974 5f74 6f6b  self.__visit_tok
-00005a40: 656e 735f 5f20 616e 6420 6973 696e 7374  ens__ and isinst
-00005a50: 616e 6365 2878 2c20 546f 6b65 6e29 3a0a  ance(x, Token):.
-00005a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00005a70: 7265 7320 3d20 7365 6c66 2e5f 6361 6c6c  res = self._call
-00005a80: 5f75 7365 7266 756e 635f 746f 6b65 6e28  _userfunc_token(
-00005a90: 7829 0a20 2020 2020 2020 2020 2020 2020  x).             
-00005aa0: 2020 2069 6620 7265 7320 6973 206e 6f74     if res is not
-00005ab0: 2044 6973 6361 7264 3a0a 2020 2020 2020   Discard:.      
-00005ac0: 2020 2020 2020 2020 2020 2020 2020 7374                st
-00005ad0: 6163 6b2e 6170 7065 6e64 2872 6573 290a  ack.append(res).
-00005ae0: 2020 2020 2020 2020 2020 2020 656c 7365              else
-00005af0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00005b00: 2020 7374 6163 6b2e 6170 7065 6e64 2878    stack.append(x
-00005b10: 290a 0a20 2020 2020 2020 2072 6573 756c  )..        resul
-00005b20: 742c 203d 2073 7461 636b 2020 2323 0a0a  t, = stack  ##..
-00005b30: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
-00005b40: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
-00005b50: 2323 0a0a 2020 2020 2020 2020 7265 7475  ##..        retu
-00005b60: 726e 2063 6173 7428 5f52 6574 7572 6e5f  rn cast(_Return_
-00005b70: 542c 2072 6573 756c 7429 0a0a 0a63 6c61  T, result)...cla
-00005b80: 7373 2054 7261 6e73 666f 726d 6572 5f49  ss Transformer_I
-00005b90: 6e50 6c61 6365 5265 6375 7273 6976 6528  nPlaceRecursive(
-00005ba0: 5472 616e 7366 6f72 6d65 7229 3a0a 2020  Transformer):.  
-00005bb0: 2020 232d 2d0a 2020 2020 6465 6620 5f74    #--.    def _t
-00005bc0: 7261 6e73 666f 726d 5f74 7265 6528 7365  ransform_tree(se
-00005bd0: 6c66 2c20 7472 6565 293a 0a20 2020 2020  lf, tree):.     
-00005be0: 2020 2074 7265 652e 6368 696c 6472 656e     tree.children
-00005bf0: 203d 206c 6973 7428 7365 6c66 2e5f 7472   = list(self._tr
-00005c00: 616e 7366 6f72 6d5f 6368 696c 6472 656e  ansform_children
-00005c10: 2874 7265 652e 6368 696c 6472 656e 2929  (tree.children))
-00005c20: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00005c30: 7365 6c66 2e5f 6361 6c6c 5f75 7365 7266  self._call_userf
-00005c40: 756e 6328 7472 6565 290a 0a0a 2323 0a0a  unc(tree)...##..
-00005c50: 0a63 6c61 7373 2056 6973 6974 6f72 4261  .class VisitorBa
-00005c60: 7365 3a0a 2020 2020 6465 6620 5f63 616c  se:.    def _cal
-00005c70: 6c5f 7573 6572 6675 6e63 2873 656c 662c  l_userfunc(self,
-00005c80: 2074 7265 6529 3a0a 2020 2020 2020 2020   tree):.        
-00005c90: 7265 7475 726e 2067 6574 6174 7472 2873  return getattr(s
-00005ca0: 656c 662c 2074 7265 652e 6461 7461 2c20  elf, tree.data, 
-00005cb0: 7365 6c66 2e5f 5f64 6566 6175 6c74 5f5f  self.__default__
-00005cc0: 2928 7472 6565 290a 0a20 2020 2064 6566  )(tree)..    def
-00005cd0: 205f 5f64 6566 6175 6c74 5f5f 2873 656c   __default__(sel
-00005ce0: 662c 2074 7265 6529 3a0a 2020 2020 2020  f, tree):.      
-00005cf0: 2020 232d 2d0a 2020 2020 2020 2020 7265    #--.        re
-00005d00: 7475 726e 2074 7265 650a 0a20 2020 2064  turn tree..    d
-00005d10: 6566 205f 5f63 6c61 7373 5f67 6574 6974  ef __class_getit
-00005d20: 656d 5f5f 2863 6c73 2c20 5f29 3a0a 2020  em__(cls, _):.  
-00005d30: 2020 2020 2020 7265 7475 726e 2063 6c73        return cls
-00005d40: 0a0a 0a63 6c61 7373 2056 6973 6974 6f72  ...class Visitor
-00005d50: 2856 6973 6974 6f72 4261 7365 2c20 4142  (VisitorBase, AB
-00005d60: 432c 2047 656e 6572 6963 5b5f 4c65 6166  C, Generic[_Leaf
-00005d70: 5f54 5d29 3a0a 2020 2020 232d 2d0a 0a20  _T]):.    #--.. 
-00005d80: 2020 2064 6566 2076 6973 6974 2873 656c     def visit(sel
-00005d90: 662c 2074 7265 653a 2054 7265 655b 5f4c  f, tree: Tree[_L
-00005da0: 6561 665f 545d 2920 2d3e 2054 7265 655b  eaf_T]) -> Tree[
-00005db0: 5f4c 6561 665f 545d 3a0a 2020 2020 2020  _Leaf_T]:.      
-00005dc0: 2020 232d 2d0a 2020 2020 2020 2020 666f    #--.        fo
-00005dd0: 7220 7375 6274 7265 6520 696e 2074 7265  r subtree in tre
-00005de0: 652e 6974 6572 5f73 7562 7472 6565 7328  e.iter_subtrees(
-00005df0: 293a 0a20 2020 2020 2020 2020 2020 2073  ):.            s
-00005e00: 656c 662e 5f63 616c 6c5f 7573 6572 6675  elf._call_userfu
-00005e10: 6e63 2873 7562 7472 6565 290a 2020 2020  nc(subtree).    
-00005e20: 2020 2020 7265 7475 726e 2074 7265 650a      return tree.
-00005e30: 0a20 2020 2064 6566 2076 6973 6974 5f74  .    def visit_t
-00005e40: 6f70 646f 776e 2873 656c 662c 2074 7265  opdown(self, tre
-00005e50: 653a 2054 7265 655b 5f4c 6561 665f 545d  e: Tree[_Leaf_T]
-00005e60: 2920 2d3e 2054 7265 655b 5f4c 6561 665f  ) -> Tree[_Leaf_
-00005e70: 545d 3a0a 2020 2020 2020 2020 232d 2d0a  T]:.        #--.
-00005e80: 2020 2020 2020 2020 666f 7220 7375 6274          for subt
-00005e90: 7265 6520 696e 2074 7265 652e 6974 6572  ree in tree.iter
-00005ea0: 5f73 7562 7472 6565 735f 746f 7064 6f77  _subtrees_topdow
-00005eb0: 6e28 293a 0a20 2020 2020 2020 2020 2020  n():.           
-00005ec0: 2073 656c 662e 5f63 616c 6c5f 7573 6572   self._call_user
-00005ed0: 6675 6e63 2873 7562 7472 6565 290a 2020  func(subtree).  
-00005ee0: 2020 2020 2020 7265 7475 726e 2074 7265        return tre
-00005ef0: 650a 0a0a 636c 6173 7320 5669 7369 746f  e...class Visito
-00005f00: 725f 5265 6375 7273 6976 6528 5669 7369  r_Recursive(Visi
-00005f10: 746f 7242 6173 652c 2047 656e 6572 6963  torBase, Generic
-00005f20: 5b5f 4c65 6166 5f54 5d29 3a0a 2020 2020  [_Leaf_T]):.    
-00005f30: 232d 2d0a 0a20 2020 2064 6566 2076 6973  #--..    def vis
-00005f40: 6974 2873 656c 662c 2074 7265 653a 2054  it(self, tree: T
-00005f50: 7265 655b 5f4c 6561 665f 545d 2920 2d3e  ree[_Leaf_T]) ->
-00005f60: 2054 7265 655b 5f4c 6561 665f 545d 3a0a   Tree[_Leaf_T]:.
-00005f70: 2020 2020 2020 2020 232d 2d0a 2020 2020          #--.    
-00005f80: 2020 2020 666f 7220 6368 696c 6420 696e      for child in
-00005f90: 2074 7265 652e 6368 696c 6472 656e 3a0a   tree.children:.
-00005fa0: 2020 2020 2020 2020 2020 2020 6966 2069              if i
-00005fb0: 7369 6e73 7461 6e63 6528 6368 696c 642c  sinstance(child,
-00005fc0: 2054 7265 6529 3a0a 2020 2020 2020 2020   Tree):.        
-00005fd0: 2020 2020 2020 2020 7365 6c66 2e76 6973          self.vis
-00005fe0: 6974 2863 6869 6c64 290a 0a20 2020 2020  it(child)..     
-00005ff0: 2020 2073 656c 662e 5f63 616c 6c5f 7573     self._call_us
-00006000: 6572 6675 6e63 2874 7265 6529 0a20 2020  erfunc(tree).   
-00006010: 2020 2020 2072 6574 7572 6e20 7472 6565       return tree
-00006020: 0a0a 2020 2020 6465 6620 7669 7369 745f  ..    def visit_
-00006030: 746f 7064 6f77 6e28 7365 6c66 2c74 7265  topdown(self,tre
-00006040: 653a 2054 7265 655b 5f4c 6561 665f 545d  e: Tree[_Leaf_T]
-00006050: 2920 2d3e 2054 7265 655b 5f4c 6561 665f  ) -> Tree[_Leaf_
-00006060: 545d 3a0a 2020 2020 2020 2020 232d 2d0a  T]:.        #--.
-00006070: 2020 2020 2020 2020 7365 6c66 2e5f 6361          self._ca
-00006080: 6c6c 5f75 7365 7266 756e 6328 7472 6565  ll_userfunc(tree
-00006090: 290a 0a20 2020 2020 2020 2066 6f72 2063  )..        for c
-000060a0: 6869 6c64 2069 6e20 7472 6565 2e63 6869  hild in tree.chi
-000060b0: 6c64 7265 6e3a 0a20 2020 2020 2020 2020  ldren:.         
-000060c0: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
-000060d0: 2863 6869 6c64 2c20 5472 6565 293a 0a20  (child, Tree):. 
-000060e0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000060f0: 656c 662e 7669 7369 745f 746f 7064 6f77  elf.visit_topdow
-00006100: 6e28 6368 696c 6429 0a0a 2020 2020 2020  n(child)..      
-00006110: 2020 7265 7475 726e 2074 7265 650a 0a0a    return tree...
-00006120: 636c 6173 7320 496e 7465 7270 7265 7465  class Interprete
-00006130: 7228 5f44 6563 6f72 6174 6162 6c65 2c20  r(_Decoratable, 
-00006140: 4142 432c 2047 656e 6572 6963 5b5f 4c65  ABC, Generic[_Le
-00006150: 6166 5f54 2c20 5f52 6574 7572 6e5f 545d  af_T, _Return_T]
-00006160: 293a 0a20 2020 2023 2d2d 0a0a 2020 2020  ):.    #--..    
-00006170: 6465 6620 7669 7369 7428 7365 6c66 2c20  def visit(self, 
-00006180: 7472 6565 3a20 5472 6565 5b5f 4c65 6166  tree: Tree[_Leaf
-00006190: 5f54 5d29 202d 3e20 5f52 6574 7572 6e5f  _T]) -> _Return_
-000061a0: 543a 0a20 2020 2020 2020 2023 230a 0a20  T:.        ##.. 
-000061b0: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
-000061c0: 2020 2023 230a 0a20 2020 2020 2020 2072     ##..        r
-000061d0: 6574 7572 6e20 7365 6c66 2e5f 7669 7369  eturn self._visi
-000061e0: 745f 7472 6565 2874 7265 6529 0a0a 2020  t_tree(tree)..  
-000061f0: 2020 6465 6620 5f76 6973 6974 5f74 7265    def _visit_tre
-00006200: 6528 7365 6c66 2c20 7472 6565 3a20 5472  e(self, tree: Tr
-00006210: 6565 5b5f 4c65 6166 5f54 5d29 3a0a 2020  ee[_Leaf_T]):.  
-00006220: 2020 2020 2020 6620 3d20 6765 7461 7474        f = getatt
-00006230: 7228 7365 6c66 2c20 7472 6565 2e64 6174  r(self, tree.dat
-00006240: 6129 0a20 2020 2020 2020 2077 7261 7070  a).        wrapp
-00006250: 6572 203d 2067 6574 6174 7472 2866 2c20  er = getattr(f, 
-00006260: 2776 6973 6974 5f77 7261 7070 6572 272c  'visit_wrapper',
-00006270: 204e 6f6e 6529 0a20 2020 2020 2020 2069   None).        i
-00006280: 6620 7772 6170 7065 7220 6973 206e 6f74  f wrapper is not
-00006290: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000062a0: 2020 2072 6574 7572 6e20 662e 7669 7369     return f.visi
-000062b0: 745f 7772 6170 7065 7228 662c 2074 7265  t_wrapper(f, tre
-000062c0: 652e 6461 7461 2c20 7472 6565 2e63 6869  e.data, tree.chi
-000062d0: 6c64 7265 6e2c 2074 7265 652e 6d65 7461  ldren, tree.meta
-000062e0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-000062f0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-00006300: 726e 2066 2874 7265 6529 0a0a 2020 2020  rn f(tree)..    
-00006310: 6465 6620 7669 7369 745f 6368 696c 6472  def visit_childr
-00006320: 656e 2873 656c 662c 2074 7265 653a 2054  en(self, tree: T
-00006330: 7265 655b 5f4c 6561 665f 545d 2920 2d3e  ree[_Leaf_T]) ->
-00006340: 204c 6973 743a 0a20 2020 2020 2020 2072   List:.        r
-00006350: 6574 7572 6e20 5b73 656c 662e 5f76 6973  eturn [self._vis
-00006360: 6974 5f74 7265 6528 6368 696c 6429 2069  it_tree(child) i
-00006370: 6620 6973 696e 7374 616e 6365 2863 6869  f isinstance(chi
-00006380: 6c64 2c20 5472 6565 2920 656c 7365 2063  ld, Tree) else c
-00006390: 6869 6c64 0a20 2020 2020 2020 2020 2020  hild.           
-000063a0: 2020 2020 2066 6f72 2063 6869 6c64 2069       for child i
-000063b0: 6e20 7472 6565 2e63 6869 6c64 7265 6e5d  n tree.children]
-000063c0: 0a0a 2020 2020 6465 6620 5f5f 6765 7461  ..    def __geta
-000063d0: 7474 725f 5f28 7365 6c66 2c20 6e61 6d65  ttr__(self, name
-000063e0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-000063f0: 6e20 7365 6c66 2e5f 5f64 6566 6175 6c74  n self.__default
-00006400: 5f5f 0a0a 2020 2020 6465 6620 5f5f 6465  __..    def __de
-00006410: 6661 756c 745f 5f28 7365 6c66 2c20 7472  fault__(self, tr
-00006420: 6565 293a 0a20 2020 2020 2020 2072 6574  ee):.        ret
-00006430: 7572 6e20 7365 6c66 2e76 6973 6974 5f63  urn self.visit_c
-00006440: 6869 6c64 7265 6e28 7472 6565 290a 0a0a  hildren(tree)...
-00006450: 5f49 6e74 6572 4d65 7468 6f64 203d 2043  _InterMethod = C
-00006460: 616c 6c61 626c 655b 5b54 7970 655b 496e  allable[[Type[In
-00006470: 7465 7270 7265 7465 725d 2c20 5f52 6574  terpreter], _Ret
-00006480: 7572 6e5f 545d 2c20 5f52 5d0a 0a64 6566  urn_T], _R]..def
-00006490: 2076 6973 6974 5f63 6869 6c64 7265 6e5f   visit_children_
-000064a0: 6465 636f 7228 6675 6e63 3a20 5f49 6e74  decor(func: _Int
-000064b0: 6572 4d65 7468 6f64 2920 2d3e 205f 496e  erMethod) -> _In
-000064c0: 7465 724d 6574 686f 643a 0a20 2020 2023  terMethod:.    #
-000064d0: 2d2d 0a20 2020 2040 7772 6170 7328 6675  --.    @wraps(fu
-000064e0: 6e63 290a 2020 2020 6465 6620 696e 6e65  nc).    def inne
-000064f0: 7228 636c 732c 2074 7265 6529 3a0a 2020  r(cls, tree):.  
-00006500: 2020 2020 2020 7661 6c75 6573 203d 2063        values = c
-00006510: 6c73 2e76 6973 6974 5f63 6869 6c64 7265  ls.visit_childre
-00006520: 6e28 7472 6565 290a 2020 2020 2020 2020  n(tree).        
-00006530: 7265 7475 726e 2066 756e 6328 636c 732c  return func(cls,
-00006540: 2076 616c 7565 7329 0a20 2020 2072 6574   values).    ret
-00006550: 7572 6e20 696e 6e65 720a 0a23 230a 0a0a  urn inner..##...
-00006560: 6465 6620 5f61 7070 6c79 5f76 5f61 7267  def _apply_v_arg
-00006570: 7328 6f62 6a2c 2076 6973 6974 5f77 7261  s(obj, visit_wra
-00006580: 7070 6572 293a 0a20 2020 2074 7279 3a0a  pper):.    try:.
-00006590: 2020 2020 2020 2020 5f61 7070 6c79 203d          _apply =
-000065a0: 206f 626a 2e5f 6170 706c 795f 765f 6172   obj._apply_v_ar
-000065b0: 6773 0a20 2020 2065 7863 6570 7420 4174  gs.    except At
-000065c0: 7472 6962 7574 6545 7272 6f72 3a0a 2020  tributeError:.  
-000065d0: 2020 2020 2020 7265 7475 726e 205f 5641        return _VA
-000065e0: 7267 7357 7261 7070 6572 286f 626a 2c20  rgsWrapper(obj, 
-000065f0: 7669 7369 745f 7772 6170 7065 7229 0a20  visit_wrapper). 
-00006600: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-00006610: 2072 6574 7572 6e20 5f61 7070 6c79 2876   return _apply(v
-00006620: 6973 6974 5f77 7261 7070 6572 290a 0a0a  isit_wrapper)...
-00006630: 636c 6173 7320 5f56 4172 6773 5772 6170  class _VArgsWrap
-00006640: 7065 723a 0a20 2020 2023 2d2d 0a20 2020  per:.    #--.   
-00006650: 2062 6173 655f 6675 6e63 3a20 4361 6c6c   base_func: Call
-00006660: 6162 6c65 0a0a 2020 2020 6465 6620 5f5f  able..    def __
-00006670: 696e 6974 5f5f 2873 656c 662c 2066 756e  init__(self, fun
-00006680: 633a 2043 616c 6c61 626c 652c 2076 6973  c: Callable, vis
-00006690: 6974 5f77 7261 7070 6572 3a20 4361 6c6c  it_wrapper: Call
-000066a0: 6162 6c65 5b5b 4361 6c6c 6162 6c65 2c20  able[[Callable, 
-000066b0: 7374 722c 206c 6973 742c 2041 6e79 5d2c  str, list, Any],
-000066c0: 2041 6e79 5d29 3a0a 2020 2020 2020 2020   Any]):.        
-000066d0: 6966 2069 7369 6e73 7461 6e63 6528 6675  if isinstance(fu
-000066e0: 6e63 2c20 5f56 4172 6773 5772 6170 7065  nc, _VArgsWrappe
-000066f0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00006700: 6675 6e63 203d 2066 756e 632e 6261 7365  func = func.base
-00006710: 5f66 756e 630a 2020 2020 2020 2020 2323  _func.        ##
-00006720: 0a0a 2020 2020 2020 2020 7365 6c66 2e62  ..        self.b
-00006730: 6173 655f 6675 6e63 203d 2066 756e 6320  ase_func = func 
-00006740: 2023 230a 0a20 2020 2020 2020 2073 656c   ##..        sel
-00006750: 662e 7669 7369 745f 7772 6170 7065 7220  f.visit_wrapper 
-00006760: 3d20 7669 7369 745f 7772 6170 7065 720a  = visit_wrapper.
-00006770: 2020 2020 2020 2020 7570 6461 7465 5f77          update_w
-00006780: 7261 7070 6572 2873 656c 662c 2066 756e  rapper(self, fun
-00006790: 6329 0a0a 2020 2020 6465 6620 5f5f 6361  c)..    def __ca
-000067a0: 6c6c 5f5f 2873 656c 662c 202a 6172 6773  ll__(self, *args
-000067b0: 2c20 2a2a 6b77 6172 6773 293a 0a20 2020  , **kwargs):.   
-000067c0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-000067d0: 2e62 6173 655f 6675 6e63 282a 6172 6773  .base_func(*args
-000067e0: 2c20 2a2a 6b77 6172 6773 290a 0a20 2020  , **kwargs)..   
-000067f0: 2064 6566 205f 5f67 6574 5f5f 2873 656c   def __get__(sel
-00006800: 662c 2069 6e73 7461 6e63 652c 206f 776e  f, instance, own
-00006810: 6572 3d4e 6f6e 6529 3a0a 2020 2020 2020  er=None):.      
-00006820: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00006830: 2020 2023 230a 0a20 2020 2020 2020 2020     ##..         
-00006840: 2020 2023 230a 0a20 2020 2020 2020 2020     ##..         
-00006850: 2020 2067 203d 2074 7970 6528 7365 6c66     g = type(self
-00006860: 2e62 6173 655f 6675 6e63 292e 5f5f 6765  .base_func).__ge
-00006870: 745f 5f0a 2020 2020 2020 2020 6578 6365  t__.        exce
-00006880: 7074 2041 7474 7269 6275 7465 4572 726f  pt AttributeErro
-00006890: 723a 0a20 2020 2020 2020 2020 2020 2072  r:.            r
-000068a0: 6574 7572 6e20 7365 6c66 0a20 2020 2020  eturn self.     
-000068b0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
-000068c0: 2020 2020 2072 6574 7572 6e20 5f56 4172       return _VAr
-000068d0: 6773 5772 6170 7065 7228 6728 7365 6c66  gsWrapper(g(self
-000068e0: 2e62 6173 655f 6675 6e63 2c20 696e 7374  .base_func, inst
-000068f0: 616e 6365 2c20 6f77 6e65 7229 2c20 7365  ance, owner), se
-00006900: 6c66 2e76 6973 6974 5f77 7261 7070 6572  lf.visit_wrapper
-00006910: 290a 0a20 2020 2064 6566 205f 5f73 6574  )..    def __set
-00006920: 5f6e 616d 655f 5f28 7365 6c66 2c20 6f77  _name__(self, ow
-00006930: 6e65 722c 206e 616d 6529 3a0a 2020 2020  ner, name):.    
-00006940: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-00006950: 2020 2020 2066 203d 2074 7970 6528 7365       f = type(se
-00006960: 6c66 2e62 6173 655f 6675 6e63 292e 5f5f  lf.base_func).__
-00006970: 7365 745f 6e61 6d65 5f5f 0a20 2020 2020  set_name__.     
-00006980: 2020 2065 7863 6570 7420 4174 7472 6962     except Attrib
-00006990: 7574 6545 7272 6f72 3a0a 2020 2020 2020  uteError:.      
-000069a0: 2020 2020 2020 7265 7475 726e 0a20 2020        return.   
-000069b0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-000069c0: 2020 2020 2020 2066 2873 656c 662e 6261         f(self.ba
-000069d0: 7365 5f66 756e 632c 206f 776e 6572 2c20  se_func, owner, 
-000069e0: 6e61 6d65 290a 0a0a 6465 6620 5f76 6172  name)...def _var
-000069f0: 6773 5f69 6e6c 696e 6528 662c 205f 6461  gs_inline(f, _da
-00006a00: 7461 2c20 6368 696c 6472 656e 2c20 5f6d  ta, children, _m
-00006a10: 6574 6129 3a0a 2020 2020 7265 7475 726e  eta):.    return
-00006a20: 2066 282a 6368 696c 6472 656e 290a 6465   f(*children).de
-00006a30: 6620 5f76 6172 6773 5f6d 6574 615f 696e  f _vargs_meta_in
-00006a40: 6c69 6e65 2866 2c20 5f64 6174 612c 2063  line(f, _data, c
-00006a50: 6869 6c64 7265 6e2c 206d 6574 6129 3a0a  hildren, meta):.
-00006a60: 2020 2020 7265 7475 726e 2066 286d 6574      return f(met
-00006a70: 612c 202a 6368 696c 6472 656e 290a 6465  a, *children).de
-00006a80: 6620 5f76 6172 6773 5f6d 6574 6128 662c  f _vargs_meta(f,
-00006a90: 205f 6461 7461 2c20 6368 696c 6472 656e   _data, children
-00006aa0: 2c20 6d65 7461 293a 0a20 2020 2072 6574  , meta):.    ret
-00006ab0: 7572 6e20 6628 6d65 7461 2c20 6368 696c  urn f(meta, chil
-00006ac0: 6472 656e 290a 6465 6620 5f76 6172 6773  dren).def _vargs
-00006ad0: 5f74 7265 6528 662c 2064 6174 612c 2063  _tree(f, data, c
-00006ae0: 6869 6c64 7265 6e2c 206d 6574 6129 3a0a  hildren, meta):.
-00006af0: 2020 2020 7265 7475 726e 2066 2854 7265      return f(Tre
-00006b00: 6528 6461 7461 2c20 6368 696c 6472 656e  e(data, children
-00006b10: 2c20 6d65 7461 2929 0a0a 0a64 6566 2076  , meta))...def v
-00006b20: 5f61 7267 7328 696e 6c69 6e65 3a20 626f  _args(inline: bo
-00006b30: 6f6c 203d 2046 616c 7365 2c20 6d65 7461  ol = False, meta
-00006b40: 3a20 626f 6f6c 203d 2046 616c 7365 2c20  : bool = False, 
-00006b50: 7472 6565 3a20 626f 6f6c 203d 2046 616c  tree: bool = Fal
-00006b60: 7365 2c20 7772 6170 7065 723a 204f 7074  se, wrapper: Opt
-00006b70: 696f 6e61 6c5b 4361 6c6c 6162 6c65 5d20  ional[Callable] 
-00006b80: 3d20 4e6f 6e65 2920 2d3e 2043 616c 6c61  = None) -> Calla
-00006b90: 626c 655b 5b5f 4445 434f 5241 5445 445d  ble[[_DECORATED]
-00006ba0: 2c20 5f44 4543 4f52 4154 4544 5d3a 0a20  , _DECORATED]:. 
-00006bb0: 2020 2023 2d2d 0a20 2020 2069 6620 7472     #--.    if tr
-00006bc0: 6565 2061 6e64 2028 6d65 7461 206f 7220  ee and (meta or 
-00006bd0: 696e 6c69 6e65 293a 0a20 2020 2020 2020  inline):.       
-00006be0: 2072 6169 7365 2056 616c 7565 4572 726f   raise ValueErro
-00006bf0: 7228 2256 6973 6974 6f72 2066 756e 6374  r("Visitor funct
-00006c00: 696f 6e73 2063 616e 6e6f 7420 636f 6d62  ions cannot comb
-00006c10: 696e 6520 2774 7265 6527 2077 6974 6820  ine 'tree' with 
-00006c20: 276d 6574 6127 206f 7220 2769 6e6c 696e  'meta' or 'inlin
-00006c30: 6527 2e22 290a 0a20 2020 2066 756e 6320  e'.")..    func 
-00006c40: 3d20 4e6f 6e65 0a20 2020 2069 6620 6d65  = None.    if me
-00006c50: 7461 3a0a 2020 2020 2020 2020 6966 2069  ta:.        if i
-00006c60: 6e6c 696e 653a 0a20 2020 2020 2020 2020  nline:.         
-00006c70: 2020 2066 756e 6320 3d20 5f76 6172 6773     func = _vargs
-00006c80: 5f6d 6574 615f 696e 6c69 6e65 0a20 2020  _meta_inline.   
-00006c90: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00006ca0: 2020 2020 2020 2066 756e 6320 3d20 5f76         func = _v
-00006cb0: 6172 6773 5f6d 6574 610a 2020 2020 656c  args_meta.    el
-00006cc0: 6966 2069 6e6c 696e 653a 0a20 2020 2020  if inline:.     
-00006cd0: 2020 2066 756e 6320 3d20 5f76 6172 6773     func = _vargs
-00006ce0: 5f69 6e6c 696e 650a 2020 2020 656c 6966  _inline.    elif
-00006cf0: 2074 7265 653a 0a20 2020 2020 2020 2066   tree:.        f
-00006d00: 756e 6320 3d20 5f76 6172 6773 5f74 7265  unc = _vargs_tre
-00006d10: 650a 0a20 2020 2069 6620 7772 6170 7065  e..    if wrappe
-00006d20: 7220 6973 206e 6f74 204e 6f6e 653a 0a20  r is not None:. 
-00006d30: 2020 2020 2020 2069 6620 6675 6e63 2069         if func i
-00006d40: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
-00006d50: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00006d60: 6c75 6545 7272 6f72 2822 4361 6e6e 6f74  lueError("Cannot
-00006d70: 2075 7365 2027 7772 6170 7065 7227 2061   use 'wrapper' a
-00006d80: 6c6f 6e67 2077 6974 6820 2774 7265 6527  long with 'tree'
-00006d90: 2c20 276d 6574 6127 206f 7220 2769 6e6c  , 'meta' or 'inl
-00006da0: 696e 6527 2e22 290a 2020 2020 2020 2020  ine'.").        
-00006db0: 6675 6e63 203d 2077 7261 7070 6572 0a0a  func = wrapper..
-00006dc0: 2020 2020 6465 6620 5f76 6973 6974 6f72      def _visitor
-00006dd0: 5f61 7267 735f 6465 6328 6f62 6a29 3a0a  _args_dec(obj):.
-00006de0: 2020 2020 2020 2020 7265 7475 726e 205f          return _
-00006df0: 6170 706c 795f 765f 6172 6773 286f 626a  apply_v_args(obj
-00006e00: 2c20 6675 6e63 290a 2020 2020 7265 7475  , func).    retu
-00006e10: 726e 205f 7669 7369 746f 725f 6172 6773  rn _visitor_args
-00006e20: 5f64 6563 0a0a 0a0a 544f 4b45 4e5f 4445  _dec....TOKEN_DE
-00006e30: 4641 554c 545f 5052 494f 5249 5459 203d  FAULT_PRIORITY =
-00006e40: 2030 0a0a 0a63 6c61 7373 2053 796d 626f   0...class Symbo
-00006e50: 6c28 5365 7269 616c 697a 6529 3a0a 2020  l(Serialize):.  
-00006e60: 2020 5f5f 736c 6f74 735f 5f20 3d20 2827    __slots__ = ('
-00006e70: 6e61 6d65 272c 290a 0a20 2020 206e 616d  name',)..    nam
-00006e80: 653a 2073 7472 0a20 2020 2069 735f 7465  e: str.    is_te
-00006e90: 726d 3a20 436c 6173 7356 6172 5b62 6f6f  rm: ClassVar[boo
-00006ea0: 6c5d 203d 204e 6f74 496d 706c 656d 656e  l] = NotImplemen
-00006eb0: 7465 640a 0a20 2020 2064 6566 205f 5f69  ted..    def __i
-00006ec0: 6e69 745f 5f28 7365 6c66 2c20 6e61 6d65  nit__(self, name
-00006ed0: 3a20 7374 7229 202d 3e20 4e6f 6e65 3a0a  : str) -> None:.
-00006ee0: 2020 2020 2020 2020 7365 6c66 2e6e 616d          self.nam
-00006ef0: 6520 3d20 6e61 6d65 0a0a 2020 2020 6465  e = name..    de
-00006f00: 6620 5f5f 6571 5f5f 2873 656c 662c 206f  f __eq__(self, o
-00006f10: 7468 6572 293a 0a20 2020 2020 2020 2061  ther):.        a
-00006f20: 7373 6572 7420 6973 696e 7374 616e 6365  ssert isinstance
-00006f30: 286f 7468 6572 2c20 5379 6d62 6f6c 292c  (other, Symbol),
-00006f40: 206f 7468 6572 0a20 2020 2020 2020 2072   other.        r
-00006f50: 6574 7572 6e20 7365 6c66 2e69 735f 7465  eturn self.is_te
-00006f60: 726d 203d 3d20 6f74 6865 722e 6973 5f74  rm == other.is_t
-00006f70: 6572 6d20 616e 6420 7365 6c66 2e6e 616d  erm and self.nam
-00006f80: 6520 3d3d 206f 7468 6572 2e6e 616d 650a  e == other.name.
-00006f90: 0a20 2020 2064 6566 205f 5f6e 655f 5f28  .    def __ne__(
-00006fa0: 7365 6c66 2c20 6f74 6865 7229 3a0a 2020  self, other):.  
-00006fb0: 2020 2020 2020 7265 7475 726e 206e 6f74        return not
-00006fc0: 2028 7365 6c66 203d 3d20 6f74 6865 7229   (self == other)
-00006fd0: 0a0a 2020 2020 6465 6620 5f5f 6861 7368  ..    def __hash
-00006fe0: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
-00006ff0: 2020 7265 7475 726e 2068 6173 6828 7365    return hash(se
-00007000: 6c66 2e6e 616d 6529 0a0a 2020 2020 6465  lf.name)..    de
-00007010: 6620 5f5f 7265 7072 5f5f 2873 656c 6629  f __repr__(self)
-00007020: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00007030: 2027 2573 2825 7229 2720 2520 2874 7970   '%s(%r)' % (typ
-00007040: 6528 7365 6c66 292e 5f5f 6e61 6d65 5f5f  e(self).__name__
-00007050: 2c20 7365 6c66 2e6e 616d 6529 0a0a 2020  , self.name)..  
-00007060: 2020 6675 6c6c 7265 7072 203d 2070 726f    fullrepr = pro
-00007070: 7065 7274 7928 5f5f 7265 7072 5f5f 290a  perty(__repr__).
-00007080: 0a20 2020 2064 6566 2072 656e 616d 6564  .    def renamed
-00007090: 2873 656c 662c 2066 293a 0a20 2020 2020  (self, f):.     
-000070a0: 2020 2072 6574 7572 6e20 7479 7065 2873     return type(s
-000070b0: 656c 6629 2866 2873 656c 662e 6e61 6d65  elf)(f(self.name
-000070c0: 2929 0a0a 0a63 6c61 7373 2054 6572 6d69  ))...class Termi
-000070d0: 6e61 6c28 5379 6d62 6f6c 293a 0a20 2020  nal(Symbol):.   
-000070e0: 205f 5f73 6572 6961 6c69 7a65 5f66 6965   __serialize_fie
-000070f0: 6c64 735f 5f20 3d20 276e 616d 6527 2c20  lds__ = 'name', 
-00007100: 2766 696c 7465 725f 6f75 7427 0a0a 2020  'filter_out'..  
-00007110: 2020 6973 5f74 6572 6d3a 2043 6c61 7373    is_term: Class
-00007120: 5661 725b 626f 6f6c 5d20 3d20 5472 7565  Var[bool] = True
-00007130: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-00007140: 5f5f 2873 656c 662c 206e 616d 652c 2066  __(self, name, f
-00007150: 696c 7465 725f 6f75 743d 4661 6c73 6529  ilter_out=False)
-00007160: 3a0a 2020 2020 2020 2020 7365 6c66 2e6e  :.        self.n
-00007170: 616d 6520 3d20 6e61 6d65 0a20 2020 2020  ame = name.     
-00007180: 2020 2073 656c 662e 6669 6c74 6572 5f6f     self.filter_o
-00007190: 7574 203d 2066 696c 7465 725f 6f75 740a  ut = filter_out.
-000071a0: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
-000071b0: 2020 2064 6566 2066 756c 6c72 6570 7228     def fullrepr(
-000071c0: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
-000071d0: 6574 7572 6e20 2725 7328 2572 2c20 2572  eturn '%s(%r, %r
-000071e0: 2927 2025 2028 7479 7065 2873 656c 6629  )' % (type(self)
-000071f0: 2e5f 5f6e 616d 655f 5f2c 2073 656c 662e  .__name__, self.
-00007200: 6e61 6d65 2c20 7365 6c66 2e66 696c 7465  name, self.filte
-00007210: 725f 6f75 7429 0a0a 2020 2020 6465 6620  r_out)..    def 
-00007220: 7265 6e61 6d65 6428 7365 6c66 2c20 6629  renamed(self, f)
-00007230: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00007240: 2074 7970 6528 7365 6c66 2928 6628 7365   type(self)(f(se
-00007250: 6c66 2e6e 616d 6529 2c20 7365 6c66 2e66  lf.name), self.f
-00007260: 696c 7465 725f 6f75 7429 0a0a 0a63 6c61  ilter_out)...cla
-00007270: 7373 204e 6f6e 5465 726d 696e 616c 2853  ss NonTerminal(S
-00007280: 796d 626f 6c29 3a0a 2020 2020 5f5f 7365  ymbol):.    __se
-00007290: 7269 616c 697a 655f 6669 656c 6473 5f5f  rialize_fields__
-000072a0: 203d 2027 6e61 6d65 272c 0a0a 2020 2020   = 'name',..    
-000072b0: 6973 5f74 6572 6d3a 2043 6c61 7373 5661  is_term: ClassVa
-000072c0: 725b 626f 6f6c 5d20 3d20 4661 6c73 650a  r[bool] = False.
-000072d0: 0a0a 636c 6173 7320 5275 6c65 4f70 7469  ..class RuleOpti
-000072e0: 6f6e 7328 5365 7269 616c 697a 6529 3a0a  ons(Serialize):.
-000072f0: 2020 2020 5f5f 7365 7269 616c 697a 655f      __serialize_
-00007300: 6669 656c 6473 5f5f 203d 2027 6b65 6570  fields__ = 'keep
-00007310: 5f61 6c6c 5f74 6f6b 656e 7327 2c20 2765  _all_tokens', 'e
-00007320: 7870 616e 6431 272c 2027 7072 696f 7269  xpand1', 'priori
-00007330: 7479 272c 2027 7465 6d70 6c61 7465 5f73  ty', 'template_s
-00007340: 6f75 7263 6527 2c20 2765 6d70 7479 5f69  ource', 'empty_i
-00007350: 6e64 6963 6573 270a 0a20 2020 206b 6565  ndices'..    kee
-00007360: 705f 616c 6c5f 746f 6b65 6e73 3a20 626f  p_all_tokens: bo
-00007370: 6f6c 0a20 2020 2065 7870 616e 6431 3a20  ol.    expand1: 
-00007380: 626f 6f6c 0a20 2020 2070 7269 6f72 6974  bool.    priorit
-00007390: 793a 204f 7074 696f 6e61 6c5b 696e 745d  y: Optional[int]
-000073a0: 0a20 2020 2074 656d 706c 6174 655f 736f  .    template_so
-000073b0: 7572 6365 3a20 4f70 7469 6f6e 616c 5b73  urce: Optional[s
-000073c0: 7472 5d0a 2020 2020 656d 7074 795f 696e  tr].    empty_in
-000073d0: 6469 6365 733a 2054 7570 6c65 5b62 6f6f  dices: Tuple[boo
-000073e0: 6c2c 202e 2e2e 5d0a 0a20 2020 2064 6566  l, ...]..    def
-000073f0: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-00007400: 6b65 6570 5f61 6c6c 5f74 6f6b 656e 733a  keep_all_tokens:
-00007410: 2062 6f6f 6c3d 4661 6c73 652c 2065 7870   bool=False, exp
-00007420: 616e 6431 3a20 626f 6f6c 3d46 616c 7365  and1: bool=False
-00007430: 2c20 7072 696f 7269 7479 3a20 4f70 7469  , priority: Opti
-00007440: 6f6e 616c 5b69 6e74 5d3d 4e6f 6e65 2c20  onal[int]=None, 
-00007450: 7465 6d70 6c61 7465 5f73 6f75 7263 653a  template_source:
-00007460: 204f 7074 696f 6e61 6c5b 7374 725d 3d4e   Optional[str]=N
-00007470: 6f6e 652c 2065 6d70 7479 5f69 6e64 6963  one, empty_indic
-00007480: 6573 3a20 5475 706c 655b 626f 6f6c 2c20  es: Tuple[bool, 
-00007490: 2e2e 2e5d 3d28 2929 202d 3e20 4e6f 6e65  ...]=()) -> None
-000074a0: 3a0a 2020 2020 2020 2020 7365 6c66 2e6b  :.        self.k
-000074b0: 6565 705f 616c 6c5f 746f 6b65 6e73 203d  eep_all_tokens =
-000074c0: 206b 6565 705f 616c 6c5f 746f 6b65 6e73   keep_all_tokens
-000074d0: 0a20 2020 2020 2020 2073 656c 662e 6578  .        self.ex
-000074e0: 7061 6e64 3120 3d20 6578 7061 6e64 310a  pand1 = expand1.
-000074f0: 2020 2020 2020 2020 7365 6c66 2e70 7269          self.pri
-00007500: 6f72 6974 7920 3d20 7072 696f 7269 7479  ority = priority
-00007510: 0a20 2020 2020 2020 2073 656c 662e 7465  .        self.te
-00007520: 6d70 6c61 7465 5f73 6f75 7263 6520 3d20  mplate_source = 
-00007530: 7465 6d70 6c61 7465 5f73 6f75 7263 650a  template_source.
-00007540: 2020 2020 2020 2020 7365 6c66 2e65 6d70          self.emp
-00007550: 7479 5f69 6e64 6963 6573 203d 2065 6d70  ty_indices = emp
-00007560: 7479 5f69 6e64 6963 6573 0a0a 2020 2020  ty_indices..    
-00007570: 6465 6620 5f5f 7265 7072 5f5f 2873 656c  def __repr__(sel
-00007580: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-00007590: 726e 2027 5275 6c65 4f70 7469 6f6e 7328  rn 'RuleOptions(
-000075a0: 2572 2c20 2572 2c20 2572 2c20 2572 2927  %r, %r, %r, %r)'
-000075b0: 2025 2028 0a20 2020 2020 2020 2020 2020   % (.           
-000075c0: 2073 656c 662e 6b65 6570 5f61 6c6c 5f74   self.keep_all_t
-000075d0: 6f6b 656e 732c 0a20 2020 2020 2020 2020  okens,.         
-000075e0: 2020 2073 656c 662e 6578 7061 6e64 312c     self.expand1,
-000075f0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00007600: 662e 7072 696f 7269 7479 2c0a 2020 2020  f.priority,.    
-00007610: 2020 2020 2020 2020 7365 6c66 2e74 656d          self.tem
-00007620: 706c 6174 655f 736f 7572 6365 0a20 2020  plate_source.   
-00007630: 2020 2020 2029 0a0a 0a63 6c61 7373 2052       )...class R
-00007640: 756c 6528 5365 7269 616c 697a 6529 3a0a  ule(Serialize):.
-00007650: 2020 2020 232d 2d0a 2020 2020 5f5f 736c      #--.    __sl
-00007660: 6f74 735f 5f20 3d20 2827 6f72 6967 696e  ots__ = ('origin
-00007670: 272c 2027 6578 7061 6e73 696f 6e27 2c20  ', 'expansion', 
-00007680: 2761 6c69 6173 272c 2027 6f70 7469 6f6e  'alias', 'option
-00007690: 7327 2c20 276f 7264 6572 272c 2027 5f68  s', 'order', '_h
-000076a0: 6173 6827 290a 0a20 2020 205f 5f73 6572  ash')..    __ser
-000076b0: 6961 6c69 7a65 5f66 6965 6c64 735f 5f20  ialize_fields__ 
-000076c0: 3d20 276f 7269 6769 6e27 2c20 2765 7870  = 'origin', 'exp
-000076d0: 616e 7369 6f6e 272c 2027 6f72 6465 7227  ansion', 'order'
-000076e0: 2c20 2761 6c69 6173 272c 2027 6f70 7469  , 'alias', 'opti
-000076f0: 6f6e 7327 0a20 2020 205f 5f73 6572 6961  ons'.    __seria
-00007700: 6c69 7a65 5f6e 616d 6573 7061 6365 5f5f  lize_namespace__
-00007710: 203d 2054 6572 6d69 6e61 6c2c 204e 6f6e   = Terminal, Non
-00007720: 5465 726d 696e 616c 2c20 5275 6c65 4f70  Terminal, RuleOp
-00007730: 7469 6f6e 730a 0a20 2020 2064 6566 205f  tions..    def _
-00007740: 5f69 6e69 745f 5f28 7365 6c66 2c20 6f72  _init__(self, or
-00007750: 6967 696e 2c20 6578 7061 6e73 696f 6e2c  igin, expansion,
-00007760: 206f 7264 6572 3d30 2c20 616c 6961 733d   order=0, alias=
-00007770: 4e6f 6e65 2c20 6f70 7469 6f6e 733d 4e6f  None, options=No
-00007780: 6e65 293a 0a20 2020 2020 2020 2073 656c  ne):.        sel
-00007790: 662e 6f72 6967 696e 203d 206f 7269 6769  f.origin = origi
-000077a0: 6e0a 2020 2020 2020 2020 7365 6c66 2e65  n.        self.e
-000077b0: 7870 616e 7369 6f6e 203d 2065 7870 616e  xpansion = expan
-000077c0: 7369 6f6e 0a20 2020 2020 2020 2073 656c  sion.        sel
-000077d0: 662e 616c 6961 7320 3d20 616c 6961 730a  f.alias = alias.
-000077e0: 2020 2020 2020 2020 7365 6c66 2e6f 7264          self.ord
-000077f0: 6572 203d 206f 7264 6572 0a20 2020 2020  er = order.     
-00007800: 2020 2073 656c 662e 6f70 7469 6f6e 7320     self.options 
-00007810: 3d20 6f70 7469 6f6e 7320 6f72 2052 756c  = options or Rul
-00007820: 654f 7074 696f 6e73 2829 0a20 2020 2020  eOptions().     
-00007830: 2020 2073 656c 662e 5f68 6173 6820 3d20     self._hash = 
-00007840: 6861 7368 2828 7365 6c66 2e6f 7269 6769  hash((self.origi
-00007850: 6e2c 2074 7570 6c65 2873 656c 662e 6578  n, tuple(self.ex
-00007860: 7061 6e73 696f 6e29 2929 0a0a 2020 2020  pansion)))..    
-00007870: 6465 6620 5f64 6573 6572 6961 6c69 7a65  def _deserialize
-00007880: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-00007890: 7365 6c66 2e5f 6861 7368 203d 2068 6173  self._hash = has
-000078a0: 6828 2873 656c 662e 6f72 6967 696e 2c20  h((self.origin, 
-000078b0: 7475 706c 6528 7365 6c66 2e65 7870 616e  tuple(self.expan
-000078c0: 7369 6f6e 2929 290a 0a20 2020 2064 6566  sion)))..    def
-000078d0: 205f 5f73 7472 5f5f 2873 656c 6629 3a0a   __str__(self):.
-000078e0: 2020 2020 2020 2020 7265 7475 726e 2027          return '
-000078f0: 3c25 7320 3a20 2573 3e27 2025 2028 7365  <%s : %s>' % (se
-00007900: 6c66 2e6f 7269 6769 6e2e 6e61 6d65 2c20  lf.origin.name, 
-00007910: 2720 272e 6a6f 696e 2878 2e6e 616d 6520  ' '.join(x.name 
-00007920: 666f 7220 7820 696e 2073 656c 662e 6578  for x in self.ex
-00007930: 7061 6e73 696f 6e29 290a 0a20 2020 2064  pansion))..    d
-00007940: 6566 205f 5f72 6570 725f 5f28 7365 6c66  ef __repr__(self
-00007950: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00007960: 6e20 2752 756c 6528 2572 2c20 2572 2c20  n 'Rule(%r, %r, 
-00007970: 2572 2c20 2572 2927 2025 2028 7365 6c66  %r, %r)' % (self
-00007980: 2e6f 7269 6769 6e2c 2073 656c 662e 6578  .origin, self.ex
-00007990: 7061 6e73 696f 6e2c 2073 656c 662e 616c  pansion, self.al
-000079a0: 6961 732c 2073 656c 662e 6f70 7469 6f6e  ias, self.option
-000079b0: 7329 0a0a 2020 2020 6465 6620 5f5f 6861  s)..    def __ha
-000079c0: 7368 5f5f 2873 656c 6629 3a0a 2020 2020  sh__(self):.    
-000079d0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-000079e0: 5f68 6173 680a 0a20 2020 2064 6566 205f  _hash..    def _
-000079f0: 5f65 715f 5f28 7365 6c66 2c20 6f74 6865  _eq__(self, othe
-00007a00: 7229 3a0a 2020 2020 2020 2020 6966 206e  r):.        if n
-00007a10: 6f74 2069 7369 6e73 7461 6e63 6528 6f74  ot isinstance(ot
-00007a20: 6865 722c 2052 756c 6529 3a0a 2020 2020  her, Rule):.    
-00007a30: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-00007a40: 616c 7365 0a20 2020 2020 2020 2072 6574  alse.        ret
-00007a50: 7572 6e20 7365 6c66 2e6f 7269 6769 6e20  urn self.origin 
-00007a60: 3d3d 206f 7468 6572 2e6f 7269 6769 6e20  == other.origin 
-00007a70: 616e 6420 7365 6c66 2e65 7870 616e 7369  and self.expansi
-00007a80: 6f6e 203d 3d20 6f74 6865 722e 6578 7061  on == other.expa
-00007a90: 6e73 696f 6e0a 0a0a 0a66 726f 6d20 636f  nsion....from co
-00007aa0: 7079 2069 6d70 6f72 7420 636f 7079 0a0a  py import copy..
-00007ab0: 0a63 6c61 7373 2050 6174 7465 726e 2853  .class Pattern(S
-00007ac0: 6572 6961 6c69 7a65 2c20 4142 4329 3a0a  erialize, ABC):.
-00007ad0: 0a20 2020 2076 616c 7565 3a20 7374 720a  .    value: str.
-00007ae0: 2020 2020 666c 6167 733a 2043 6f6c 6c65      flags: Colle
-00007af0: 6374 696f 6e5b 7374 725d 0a20 2020 2072  ction[str].    r
-00007b00: 6177 3a20 4f70 7469 6f6e 616c 5b73 7472  aw: Optional[str
-00007b10: 5d0a 2020 2020 7479 7065 3a20 436c 6173  ].    type: Clas
-00007b20: 7356 6172 5b73 7472 5d0a 0a20 2020 2064  sVar[str]..    d
-00007b30: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00007b40: 2c20 7661 6c75 653a 2073 7472 2c20 666c  , value: str, fl
-00007b50: 6167 733a 2043 6f6c 6c65 6374 696f 6e5b  ags: Collection[
-00007b60: 7374 725d 3d28 292c 2072 6177 3a20 4f70  str]=(), raw: Op
-00007b70: 7469 6f6e 616c 5b73 7472 5d3d 4e6f 6e65  tional[str]=None
-00007b80: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
-00007b90: 2020 2073 656c 662e 7661 6c75 6520 3d20     self.value = 
-00007ba0: 7661 6c75 650a 2020 2020 2020 2020 7365  value.        se
-00007bb0: 6c66 2e66 6c61 6773 203d 2066 726f 7a65  lf.flags = froze
-00007bc0: 6e73 6574 2866 6c61 6773 290a 2020 2020  nset(flags).    
-00007bd0: 2020 2020 7365 6c66 2e72 6177 203d 2072      self.raw = r
-00007be0: 6177 0a0a 2020 2020 6465 6620 5f5f 7265  aw..    def __re
-00007bf0: 7072 5f5f 2873 656c 6629 3a0a 2020 2020  pr__(self):.    
-00007c00: 2020 2020 7265 7475 726e 2072 6570 7228      return repr(
-00007c10: 7365 6c66 2e74 6f5f 7265 6765 7870 2829  self.to_regexp()
-00007c20: 290a 0a20 2020 2023 230a 0a20 2020 2064  )..    ##..    d
-00007c30: 6566 205f 5f68 6173 685f 5f28 7365 6c66  ef __hash__(self
-00007c40: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00007c50: 6e20 6861 7368 2828 7479 7065 2873 656c  n hash((type(sel
-00007c60: 6629 2c20 7365 6c66 2e76 616c 7565 2c20  f), self.value, 
-00007c70: 7365 6c66 2e66 6c61 6773 2929 0a0a 2020  self.flags))..  
-00007c80: 2020 6465 6620 5f5f 6571 5f5f 2873 656c    def __eq__(sel
-00007c90: 662c 206f 7468 6572 293a 0a20 2020 2020  f, other):.     
-00007ca0: 2020 2072 6574 7572 6e20 7479 7065 2873     return type(s
-00007cb0: 656c 6629 203d 3d20 7479 7065 286f 7468  elf) == type(oth
-00007cc0: 6572 2920 616e 6420 7365 6c66 2e76 616c  er) and self.val
-00007cd0: 7565 203d 3d20 6f74 6865 722e 7661 6c75  ue == other.valu
-00007ce0: 6520 616e 6420 7365 6c66 2e66 6c61 6773  e and self.flags
-00007cf0: 203d 3d20 6f74 6865 722e 666c 6167 730a   == other.flags.
-00007d00: 0a20 2020 2040 6162 7374 7261 6374 6d65  .    @abstractme
-00007d10: 7468 6f64 0a20 2020 2064 6566 2074 6f5f  thod.    def to_
-00007d20: 7265 6765 7870 2873 656c 6629 202d 3e20  regexp(self) -> 
-00007d30: 7374 723a 0a20 2020 2020 2020 2072 6169  str:.        rai
-00007d40: 7365 204e 6f74 496d 706c 656d 656e 7465  se NotImplemente
-00007d50: 6445 7272 6f72 2829 0a0a 2020 2020 4070  dError()..    @p
-00007d60: 726f 7065 7274 790a 2020 2020 4061 6273  roperty.    @abs
-00007d70: 7472 6163 746d 6574 686f 640a 2020 2020  tractmethod.    
-00007d80: 6465 6620 6d69 6e5f 7769 6474 6828 7365  def min_width(se
-00007d90: 6c66 2920 2d3e 2069 6e74 3a0a 2020 2020  lf) -> int:.    
-00007da0: 2020 2020 7261 6973 6520 4e6f 7449 6d70      raise NotImp
-00007db0: 6c65 6d65 6e74 6564 4572 726f 7228 290a  lementedError().
-00007dc0: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
-00007dd0: 2020 2040 6162 7374 7261 6374 6d65 7468     @abstractmeth
-00007de0: 6f64 0a20 2020 2064 6566 206d 6178 5f77  od.    def max_w
-00007df0: 6964 7468 2873 656c 6629 202d 3e20 696e  idth(self) -> in
-00007e00: 743a 0a20 2020 2020 2020 2072 6169 7365  t:.        raise
-00007e10: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
-00007e20: 7272 6f72 2829 0a0a 2020 2020 6465 6620  rror()..    def 
-00007e30: 5f67 6574 5f66 6c61 6773 2873 656c 662c  _get_flags(self,
-00007e40: 2076 616c 7565 293a 0a20 2020 2020 2020   value):.       
-00007e50: 2066 6f72 2066 2069 6e20 7365 6c66 2e66   for f in self.f
-00007e60: 6c61 6773 3a0a 2020 2020 2020 2020 2020  lags:.          
-00007e70: 2020 7661 6c75 6520 3d20 2827 283f 2573    value = ('(?%s
-00007e80: 3a25 7329 2720 2520 2866 2c20 7661 6c75  :%s)' % (f, valu
-00007e90: 6529 290a 2020 2020 2020 2020 7265 7475  e)).        retu
-00007ea0: 726e 2076 616c 7565 0a0a 0a63 6c61 7373  rn value...class
-00007eb0: 2050 6174 7465 726e 5374 7228 5061 7474   PatternStr(Patt
-00007ec0: 6572 6e29 3a0a 2020 2020 5f5f 7365 7269  ern):.    __seri
-00007ed0: 616c 697a 655f 6669 656c 6473 5f5f 203d  alize_fields__ =
-00007ee0: 2027 7661 6c75 6527 2c20 2766 6c61 6773   'value', 'flags
-00007ef0: 270a 0a20 2020 2074 7970 653a 2043 6c61  '..    type: Cla
-00007f00: 7373 5661 725b 7374 725d 203d 2022 7374  ssVar[str] = "st
-00007f10: 7222 0a0a 2020 2020 6465 6620 746f 5f72  r"..    def to_r
-00007f20: 6567 6578 7028 7365 6c66 2920 2d3e 2073  egexp(self) -> s
-00007f30: 7472 3a0a 2020 2020 2020 2020 7265 7475  tr:.        retu
-00007f40: 726e 2073 656c 662e 5f67 6574 5f66 6c61  rn self._get_fla
-00007f50: 6773 2872 652e 6573 6361 7065 2873 656c  gs(re.escape(sel
-00007f60: 662e 7661 6c75 6529 290a 0a20 2020 2040  f.value))..    @
-00007f70: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-00007f80: 206d 696e 5f77 6964 7468 2873 656c 6629   min_width(self)
-00007f90: 202d 3e20 696e 743a 0a20 2020 2020 2020   -> int:.       
-00007fa0: 2072 6574 7572 6e20 6c65 6e28 7365 6c66   return len(self
-00007fb0: 2e76 616c 7565 290a 0a20 2020 2040 7072  .value)..    @pr
-00007fc0: 6f70 6572 7479 0a20 2020 2064 6566 206d  operty.    def m
-00007fd0: 6178 5f77 6964 7468 2873 656c 6629 202d  ax_width(self) -
-00007fe0: 3e20 696e 743a 0a20 2020 2020 2020 2072  > int:.        r
-00007ff0: 6574 7572 6e20 6c65 6e28 7365 6c66 2e76  eturn len(self.v
-00008000: 616c 7565 290a 0a0a 636c 6173 7320 5061  alue)...class Pa
-00008010: 7474 6572 6e52 4528 5061 7474 6572 6e29  tternRE(Pattern)
-00008020: 3a0a 2020 2020 5f5f 7365 7269 616c 697a  :.    __serializ
-00008030: 655f 6669 656c 6473 5f5f 203d 2027 7661  e_fields__ = 'va
-00008040: 6c75 6527 2c20 2766 6c61 6773 272c 2027  lue', 'flags', '
-00008050: 5f77 6964 7468 270a 0a20 2020 2074 7970  _width'..    typ
-00008060: 653a 2043 6c61 7373 5661 725b 7374 725d  e: ClassVar[str]
-00008070: 203d 2022 7265 220a 0a20 2020 2064 6566   = "re"..    def
-00008080: 2074 6f5f 7265 6765 7870 2873 656c 6629   to_regexp(self)
-00008090: 202d 3e20 7374 723a 0a20 2020 2020 2020   -> str:.       
-000080a0: 2072 6574 7572 6e20 7365 6c66 2e5f 6765   return self._ge
-000080b0: 745f 666c 6167 7328 7365 6c66 2e76 616c  t_flags(self.val
-000080c0: 7565 290a 0a20 2020 205f 7769 6474 6820  ue)..    _width 
-000080d0: 3d20 4e6f 6e65 0a20 2020 2064 6566 205f  = None.    def _
-000080e0: 6765 745f 7769 6474 6828 7365 6c66 293a  get_width(self):
-000080f0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-00008100: 2e5f 7769 6474 6820 6973 204e 6f6e 653a  ._width is None:
-00008110: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00008120: 662e 5f77 6964 7468 203d 2067 6574 5f72  f._width = get_r
-00008130: 6567 6578 705f 7769 6474 6828 7365 6c66  egexp_width(self
-00008140: 2e74 6f5f 7265 6765 7870 2829 290a 2020  .to_regexp()).  
-00008150: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
-00008160: 662e 5f77 6964 7468 0a0a 2020 2020 4070  f._width..    @p
-00008170: 726f 7065 7274 790a 2020 2020 6465 6620  roperty.    def 
-00008180: 6d69 6e5f 7769 6474 6828 7365 6c66 2920  min_width(self) 
-00008190: 2d3e 2069 6e74 3a0a 2020 2020 2020 2020  -> int:.        
-000081a0: 7265 7475 726e 2073 656c 662e 5f67 6574  return self._get
-000081b0: 5f77 6964 7468 2829 5b30 5d0a 0a20 2020  _width()[0]..   
-000081c0: 2040 7072 6f70 6572 7479 0a20 2020 2064   @property.    d
-000081d0: 6566 206d 6178 5f77 6964 7468 2873 656c  ef max_width(sel
-000081e0: 6629 202d 3e20 696e 743a 0a20 2020 2020  f) -> int:.     
-000081f0: 2020 2072 6574 7572 6e20 7365 6c66 2e5f     return self._
-00008200: 6765 745f 7769 6474 6828 295b 315d 0a0a  get_width()[1]..
-00008210: 0a63 6c61 7373 2054 6572 6d69 6e61 6c44  .class TerminalD
-00008220: 6566 2853 6572 6961 6c69 7a65 293a 0a20  ef(Serialize):. 
-00008230: 2020 205f 5f73 6572 6961 6c69 7a65 5f66     __serialize_f
-00008240: 6965 6c64 735f 5f20 3d20 276e 616d 6527  ields__ = 'name'
-00008250: 2c20 2770 6174 7465 726e 272c 2027 7072  , 'pattern', 'pr
-00008260: 696f 7269 7479 270a 2020 2020 5f5f 7365  iority'.    __se
-00008270: 7269 616c 697a 655f 6e61 6d65 7370 6163  rialize_namespac
-00008280: 655f 5f20 3d20 5061 7474 6572 6e53 7472  e__ = PatternStr
-00008290: 2c20 5061 7474 6572 6e52 450a 0a20 2020  , PatternRE..   
-000082a0: 206e 616d 653a 2073 7472 0a20 2020 2070   name: str.    p
-000082b0: 6174 7465 726e 3a20 5061 7474 6572 6e0a  attern: Pattern.
-000082c0: 2020 2020 7072 696f 7269 7479 3a20 696e      priority: in
-000082d0: 740a 0a20 2020 2064 6566 205f 5f69 6e69  t..    def __ini
-000082e0: 745f 5f28 7365 6c66 2c20 6e61 6d65 3a20  t__(self, name: 
-000082f0: 7374 722c 2070 6174 7465 726e 3a20 5061  str, pattern: Pa
-00008300: 7474 6572 6e2c 2070 7269 6f72 6974 793a  ttern, priority:
-00008310: 2069 6e74 3d54 4f4b 454e 5f44 4546 4155   int=TOKEN_DEFAU
-00008320: 4c54 5f50 5249 4f52 4954 5929 202d 3e20  LT_PRIORITY) -> 
-00008330: 4e6f 6e65 3a0a 2020 2020 2020 2020 6173  None:.        as
-00008340: 7365 7274 2069 7369 6e73 7461 6e63 6528  sert isinstance(
-00008350: 7061 7474 6572 6e2c 2050 6174 7465 726e  pattern, Pattern
-00008360: 292c 2070 6174 7465 726e 0a20 2020 2020  ), pattern.     
-00008370: 2020 2073 656c 662e 6e61 6d65 203d 206e     self.name = n
-00008380: 616d 650a 2020 2020 2020 2020 7365 6c66  ame.        self
-00008390: 2e70 6174 7465 726e 203d 2070 6174 7465  .pattern = patte
-000083a0: 726e 0a20 2020 2020 2020 2073 656c 662e  rn.        self.
-000083b0: 7072 696f 7269 7479 203d 2070 7269 6f72  priority = prior
-000083c0: 6974 790a 0a20 2020 2064 6566 205f 5f72  ity..    def __r
-000083d0: 6570 725f 5f28 7365 6c66 293a 0a20 2020  epr__(self):.   
-000083e0: 2020 2020 2072 6574 7572 6e20 2725 7328       return '%s(
-000083f0: 2572 2c20 2572 2927 2025 2028 7479 7065  %r, %r)' % (type
-00008400: 2873 656c 6629 2e5f 5f6e 616d 655f 5f2c  (self).__name__,
-00008410: 2073 656c 662e 6e61 6d65 2c20 7365 6c66   self.name, self
-00008420: 2e70 6174 7465 726e 290a 0a20 2020 2064  .pattern)..    d
-00008430: 6566 2075 7365 725f 7265 7072 2873 656c  ef user_repr(sel
-00008440: 6629 202d 3e20 7374 723a 0a20 2020 2020  f) -> str:.     
-00008450: 2020 2069 6620 7365 6c66 2e6e 616d 652e     if self.name.
-00008460: 7374 6172 7473 7769 7468 2827 5f5f 2729  startswith('__')
-00008470: 3a20 2323 0a0a 2020 2020 2020 2020 2020  : ##..          
-00008480: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
-00008490: 7474 6572 6e2e 7261 7720 6f72 2073 656c  ttern.raw or sel
-000084a0: 662e 6e61 6d65 0a20 2020 2020 2020 2065  f.name.        e
-000084b0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000084c0: 2072 6574 7572 6e20 7365 6c66 2e6e 616d   return self.nam
-000084d0: 650a 0a5f 5420 3d20 5479 7065 5661 7228  e.._T = TypeVar(
-000084e0: 275f 5427 2c20 626f 756e 643d 2254 6f6b  '_T', bound="Tok
-000084f0: 656e 2229 0a0a 636c 6173 7320 546f 6b65  en")..class Toke
-00008500: 6e28 7374 7229 3a0a 2020 2020 232d 2d0a  n(str):.    #--.
-00008510: 2020 2020 5f5f 736c 6f74 735f 5f20 3d20      __slots__ = 
-00008520: 2827 7479 7065 272c 2027 7374 6172 745f  ('type', 'start_
-00008530: 706f 7327 2c20 2776 616c 7565 272c 2027  pos', 'value', '
-00008540: 6c69 6e65 272c 2027 636f 6c75 6d6e 272c  line', 'column',
-00008550: 2027 656e 645f 6c69 6e65 272c 2027 656e   'end_line', 'en
-00008560: 645f 636f 6c75 6d6e 272c 2027 656e 645f  d_column', 'end_
-00008570: 706f 7327 290a 0a20 2020 205f 5f6d 6174  pos')..    __mat
-00008580: 6368 5f61 7267 735f 5f20 3d20 2827 7479  ch_args__ = ('ty
-00008590: 7065 272c 2027 7661 6c75 6527 290a 0a20  pe', 'value').. 
-000085a0: 2020 2074 7970 653a 2073 7472 0a20 2020     type: str.   
-000085b0: 2073 7461 7274 5f70 6f73 3a20 4f70 7469   start_pos: Opti
-000085c0: 6f6e 616c 5b69 6e74 5d0a 2020 2020 7661  onal[int].    va
-000085d0: 6c75 653a 2041 6e79 0a20 2020 206c 696e  lue: Any.    lin
-000085e0: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
-000085f0: 0a20 2020 2063 6f6c 756d 6e3a 204f 7074  .    column: Opt
-00008600: 696f 6e61 6c5b 696e 745d 0a20 2020 2065  ional[int].    e
-00008610: 6e64 5f6c 696e 653a 204f 7074 696f 6e61  nd_line: Optiona
-00008620: 6c5b 696e 745d 0a20 2020 2065 6e64 5f63  l[int].    end_c
-00008630: 6f6c 756d 6e3a 204f 7074 696f 6e61 6c5b  olumn: Optional[
-00008640: 696e 745d 0a20 2020 2065 6e64 5f70 6f73  int].    end_pos
-00008650: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d0a  : Optional[int].
-00008660: 0a0a 2020 2020 406f 7665 726c 6f61 640a  ..    @overload.
-00008670: 2020 2020 6465 6620 5f5f 6e65 775f 5f28      def __new__(
-00008680: 0a20 2020 2020 2020 2063 6c73 2c0a 2020  .        cls,.  
-00008690: 2020 2020 2020 7479 7065 3a20 7374 722c        type: str,
-000086a0: 0a20 2020 2020 2020 2076 616c 7565 3a20  .        value: 
-000086b0: 416e 792c 0a20 2020 2020 2020 2073 7461  Any,.        sta
-000086c0: 7274 5f70 6f73 3a20 4f70 7469 6f6e 616c  rt_pos: Optional
-000086d0: 5b69 6e74 5d3d 4e6f 6e65 2c0a 2020 2020  [int]=None,.    
-000086e0: 2020 2020 6c69 6e65 3a20 4f70 7469 6f6e      line: Option
-000086f0: 616c 5b69 6e74 5d3d 4e6f 6e65 2c0a 2020  al[int]=None,.  
-00008700: 2020 2020 2020 636f 6c75 6d6e 3a20 4f70        column: Op
-00008710: 7469 6f6e 616c 5b69 6e74 5d3d 4e6f 6e65  tional[int]=None
-00008720: 2c0a 2020 2020 2020 2020 656e 645f 6c69  ,.        end_li
-00008730: 6e65 3a20 4f70 7469 6f6e 616c 5b69 6e74  ne: Optional[int
-00008740: 5d3d 4e6f 6e65 2c0a 2020 2020 2020 2020  ]=None,.        
-00008750: 656e 645f 636f 6c75 6d6e 3a20 4f70 7469  end_column: Opti
-00008760: 6f6e 616c 5b69 6e74 5d3d 4e6f 6e65 2c0a  onal[int]=None,.
-00008770: 2020 2020 2020 2020 656e 645f 706f 733a          end_pos:
-00008780: 204f 7074 696f 6e61 6c5b 696e 745d 3d4e   Optional[int]=N
-00008790: 6f6e 650a 2020 2020 2920 2d3e 2027 546f  one.    ) -> 'To
-000087a0: 6b65 6e27 3a0a 2020 2020 2020 2020 2e2e  ken':.        ..
-000087b0: 2e0a 0a20 2020 2040 6f76 6572 6c6f 6164  ...    @overload
-000087c0: 0a20 2020 2064 6566 205f 5f6e 6577 5f5f  .    def __new__
-000087d0: 280a 2020 2020 2020 2020 636c 732c 0a20  (.        cls,. 
-000087e0: 2020 2020 2020 2074 7970 655f 3a20 7374         type_: st
-000087f0: 722c 0a20 2020 2020 2020 2076 616c 7565  r,.        value
-00008800: 3a20 416e 792c 0a20 2020 2020 2020 2073  : Any,.        s
-00008810: 7461 7274 5f70 6f73 3a20 4f70 7469 6f6e  tart_pos: Option
-00008820: 616c 5b69 6e74 5d3d 4e6f 6e65 2c0a 2020  al[int]=None,.  
-00008830: 2020 2020 2020 6c69 6e65 3a20 4f70 7469        line: Opti
-00008840: 6f6e 616c 5b69 6e74 5d3d 4e6f 6e65 2c0a  onal[int]=None,.
-00008850: 2020 2020 2020 2020 636f 6c75 6d6e 3a20          column: 
-00008860: 4f70 7469 6f6e 616c 5b69 6e74 5d3d 4e6f  Optional[int]=No
-00008870: 6e65 2c0a 2020 2020 2020 2020 656e 645f  ne,.        end_
-00008880: 6c69 6e65 3a20 4f70 7469 6f6e 616c 5b69  line: Optional[i
-00008890: 6e74 5d3d 4e6f 6e65 2c0a 2020 2020 2020  nt]=None,.      
-000088a0: 2020 656e 645f 636f 6c75 6d6e 3a20 4f70    end_column: Op
-000088b0: 7469 6f6e 616c 5b69 6e74 5d3d 4e6f 6e65  tional[int]=None
-000088c0: 2c0a 2020 2020 2020 2020 656e 645f 706f  ,.        end_po
-000088d0: 733a 204f 7074 696f 6e61 6c5b 696e 745d  s: Optional[int]
-000088e0: 3d4e 6f6e 650a 2020 2020 2920 2d3e 2027  =None.    ) -> '
-000088f0: 546f 6b65 6e27 3a20 2020 2020 2020 202e  Token':        .
-00008900: 2e2e 0a0a 2020 2020 6465 6620 5f5f 6e65  ....    def __ne
-00008910: 775f 5f28 636c 732c 202a 6172 6773 2c20  w__(cls, *args, 
-00008920: 2a2a 6b77 6172 6773 293a 0a20 2020 2020  **kwargs):.     
-00008930: 2020 2069 6620 2274 7970 655f 2220 696e     if "type_" in
-00008940: 206b 7761 7267 733a 0a20 2020 2020 2020   kwargs:.       
-00008950: 2020 2020 2077 6172 6e69 6e67 732e 7761       warnings.wa
-00008960: 726e 2822 6074 7970 655f 6020 6973 2064  rn("`type_` is d
-00008970: 6570 7265 6361 7465 6420 7573 6520 6074  eprecated use `t
-00008980: 7970 6560 2069 6e73 7465 6164 222c 2044  ype` instead", D
-00008990: 6570 7265 6361 7469 6f6e 5761 726e 696e  eprecationWarnin
-000089a0: 6729 0a0a 2020 2020 2020 2020 2020 2020  g)..            
-000089b0: 6966 2022 7479 7065 2220 696e 206b 7761  if "type" in kwa
-000089c0: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
-000089d0: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
-000089e0: 7272 6f72 2822 4572 726f 723a 2075 7369  rror("Error: usi
-000089f0: 6e67 2062 6f74 6820 2774 7970 6527 2061  ng both 'type' a
-00008a00: 6e64 2074 6865 2064 6570 7265 6361 7465  nd the deprecate
-00008a10: 6420 2774 7970 655f 2720 6173 2061 7267  d 'type_' as arg
-00008a20: 756d 656e 7473 2e22 290a 2020 2020 2020  uments.").      
-00008a30: 2020 2020 2020 6b77 6172 6773 5b22 7479        kwargs["ty
-00008a40: 7065 225d 203d 206b 7761 7267 732e 706f  pe"] = kwargs.po
-00008a50: 7028 2274 7970 655f 2229 0a0a 2020 2020  p("type_")..    
-00008a60: 2020 2020 7265 7475 726e 2063 6c73 2e5f      return cls._
-00008a70: 6675 7475 7265 5f6e 6577 282a 6172 6773  future_new(*args
-00008a80: 2c20 2a2a 6b77 6172 6773 290a 0a0a 2020  , **kwargs)...  
-00008a90: 2020 4063 6c61 7373 6d65 7468 6f64 0a20    @classmethod. 
-00008aa0: 2020 2064 6566 205f 6675 7475 7265 5f6e     def _future_n
-00008ab0: 6577 2863 6c73 2c20 7479 7065 2c20 7661  ew(cls, type, va
-00008ac0: 6c75 652c 2073 7461 7274 5f70 6f73 3d4e  lue, start_pos=N
-00008ad0: 6f6e 652c 206c 696e 653d 4e6f 6e65 2c20  one, line=None, 
-00008ae0: 636f 6c75 6d6e 3d4e 6f6e 652c 2065 6e64  column=None, end
-00008af0: 5f6c 696e 653d 4e6f 6e65 2c20 656e 645f  _line=None, end_
-00008b00: 636f 6c75 6d6e 3d4e 6f6e 652c 2065 6e64  column=None, end
-00008b10: 5f70 6f73 3d4e 6f6e 6529 3a0a 2020 2020  _pos=None):.    
-00008b20: 2020 2020 696e 7374 203d 2073 7570 6572      inst = super
-00008b30: 2854 6f6b 656e 2c20 636c 7329 2e5f 5f6e  (Token, cls).__n
-00008b40: 6577 5f5f 2863 6c73 2c20 7661 6c75 6529  ew__(cls, value)
-00008b50: 0a0a 2020 2020 2020 2020 696e 7374 2e74  ..        inst.t
-00008b60: 7970 6520 3d20 7479 7065 0a20 2020 2020  ype = type.     
-00008b70: 2020 2069 6e73 742e 7374 6172 745f 706f     inst.start_po
-00008b80: 7320 3d20 7374 6172 745f 706f 730a 2020  s = start_pos.  
-00008b90: 2020 2020 2020 696e 7374 2e76 616c 7565        inst.value
-00008ba0: 203d 2076 616c 7565 0a20 2020 2020 2020   = value.       
-00008bb0: 2069 6e73 742e 6c69 6e65 203d 206c 696e   inst.line = lin
-00008bc0: 650a 2020 2020 2020 2020 696e 7374 2e63  e.        inst.c
-00008bd0: 6f6c 756d 6e20 3d20 636f 6c75 6d6e 0a20  olumn = column. 
-00008be0: 2020 2020 2020 2069 6e73 742e 656e 645f         inst.end_
-00008bf0: 6c69 6e65 203d 2065 6e64 5f6c 696e 650a  line = end_line.
-00008c00: 2020 2020 2020 2020 696e 7374 2e65 6e64          inst.end
-00008c10: 5f63 6f6c 756d 6e20 3d20 656e 645f 636f  _column = end_co
-00008c20: 6c75 6d6e 0a20 2020 2020 2020 2069 6e73  lumn.        ins
-00008c30: 742e 656e 645f 706f 7320 3d20 656e 645f  t.end_pos = end_
-00008c40: 706f 730a 2020 2020 2020 2020 7265 7475  pos.        retu
-00008c50: 726e 2069 6e73 740a 0a20 2020 2040 6f76  rn inst..    @ov
-00008c60: 6572 6c6f 6164 0a20 2020 2064 6566 2075  erload.    def u
-00008c70: 7064 6174 6528 7365 6c66 2c20 7479 7065  pdate(self, type
-00008c80: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d3d  : Optional[str]=
-00008c90: 4e6f 6e65 2c20 7661 6c75 653a 204f 7074  None, value: Opt
-00008ca0: 696f 6e61 6c5b 416e 795d 3d4e 6f6e 6529  ional[Any]=None)
-00008cb0: 202d 3e20 2754 6f6b 656e 273a 0a20 2020   -> 'Token':.   
-00008cc0: 2020 2020 202e 2e2e 0a0a 2020 2020 406f       .....    @o
-00008cd0: 7665 726c 6f61 640a 2020 2020 6465 6620  verload.    def 
-00008ce0: 7570 6461 7465 2873 656c 662c 2074 7970  update(self, typ
-00008cf0: 655f 3a20 4f70 7469 6f6e 616c 5b73 7472  e_: Optional[str
-00008d00: 5d3d 4e6f 6e65 2c20 7661 6c75 653a 204f  ]=None, value: O
-00008d10: 7074 696f 6e61 6c5b 416e 795d 3d4e 6f6e  ptional[Any]=Non
-00008d20: 6529 202d 3e20 2754 6f6b 656e 273a 0a20  e) -> 'Token':. 
-00008d30: 2020 2020 2020 202e 2e2e 0a0a 2020 2020         .....    
-00008d40: 6465 6620 7570 6461 7465 2873 656c 662c  def update(self,
-00008d50: 202a 6172 6773 2c20 2a2a 6b77 6172 6773   *args, **kwargs
-00008d60: 293a 0a20 2020 2020 2020 2069 6620 2274  ):.        if "t
-00008d70: 7970 655f 2220 696e 206b 7761 7267 733a  ype_" in kwargs:
-00008d80: 0a20 2020 2020 2020 2020 2020 2077 6172  .            war
-00008d90: 6e69 6e67 732e 7761 726e 2822 6074 7970  nings.warn("`typ
-00008da0: 655f 6020 6973 2064 6570 7265 6361 7465  e_` is deprecate
-00008db0: 6420 7573 6520 6074 7970 6560 2069 6e73  d use `type` ins
-00008dc0: 7465 6164 222c 2044 6570 7265 6361 7469  tead", Deprecati
-00008dd0: 6f6e 5761 726e 696e 6729 0a0a 2020 2020  onWarning)..    
-00008de0: 2020 2020 2020 2020 6966 2022 7479 7065          if "type
-00008df0: 2220 696e 206b 7761 7267 733a 0a20 2020  " in kwargs:.   
-00008e00: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00008e10: 7365 2054 7970 6545 7272 6f72 2822 4572  se TypeError("Er
-00008e20: 726f 723a 2075 7369 6e67 2062 6f74 6820  ror: using both 
-00008e30: 2774 7970 6527 2061 6e64 2074 6865 2064  'type' and the d
-00008e40: 6570 7265 6361 7465 6420 2774 7970 655f  eprecated 'type_
-00008e50: 2720 6173 2061 7267 756d 656e 7473 2e22  ' as arguments."
-00008e60: 290a 2020 2020 2020 2020 2020 2020 6b77  ).            kw
-00008e70: 6172 6773 5b22 7479 7065 225d 203d 206b  args["type"] = k
-00008e80: 7761 7267 732e 706f 7028 2274 7970 655f  wargs.pop("type_
-00008e90: 2229 0a0a 2020 2020 2020 2020 7265 7475  ")..        retu
-00008ea0: 726e 2073 656c 662e 5f66 7574 7572 655f  rn self._future_
-00008eb0: 7570 6461 7465 282a 6172 6773 2c20 2a2a  update(*args, **
-00008ec0: 6b77 6172 6773 290a 0a20 2020 2064 6566  kwargs)..    def
-00008ed0: 205f 6675 7475 7265 5f75 7064 6174 6528   _future_update(
-00008ee0: 7365 6c66 2c20 7479 7065 3a20 4f70 7469  self, type: Opti
-00008ef0: 6f6e 616c 5b73 7472 5d3d 4e6f 6e65 2c20  onal[str]=None, 
-00008f00: 7661 6c75 653a 204f 7074 696f 6e61 6c5b  value: Optional[
-00008f10: 416e 795d 3d4e 6f6e 6529 202d 3e20 2754  Any]=None) -> 'T
-00008f20: 6f6b 656e 273a 0a20 2020 2020 2020 2072  oken':.        r
-00008f30: 6574 7572 6e20 546f 6b65 6e2e 6e65 775f  eturn Token.new_
-00008f40: 626f 7272 6f77 5f70 6f73 280a 2020 2020  borrow_pos(.    
-00008f50: 2020 2020 2020 2020 7479 7065 2069 6620          type if 
-00008f60: 7479 7065 2069 7320 6e6f 7420 4e6f 6e65  type is not None
-00008f70: 2065 6c73 6520 7365 6c66 2e74 7970 652c   else self.type,
-00008f80: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-00008f90: 7565 2069 6620 7661 6c75 6520 6973 206e  ue if value is n
-00008fa0: 6f74 204e 6f6e 6520 656c 7365 2073 656c  ot None else sel
-00008fb0: 662e 7661 6c75 652c 0a20 2020 2020 2020  f.value,.       
-00008fc0: 2020 2020 2073 656c 660a 2020 2020 2020       self.      
-00008fd0: 2020 290a 0a20 2020 2040 636c 6173 736d    )..    @classm
-00008fe0: 6574 686f 640a 2020 2020 6465 6620 6e65  ethod.    def ne
-00008ff0: 775f 626f 7272 6f77 5f70 6f73 2863 6c73  w_borrow_pos(cls
-00009000: 3a20 5479 7065 5b5f 545d 2c20 7479 7065  : Type[_T], type
-00009010: 5f3a 2073 7472 2c20 7661 6c75 653a 2041  _: str, value: A
-00009020: 6e79 2c20 626f 7272 6f77 5f74 3a20 2754  ny, borrow_t: 'T
-00009030: 6f6b 656e 2729 202d 3e20 5f54 3a0a 2020  oken') -> _T:.  
-00009040: 2020 2020 2020 7265 7475 726e 2063 6c73        return cls
-00009050: 2874 7970 655f 2c20 7661 6c75 652c 2062  (type_, value, b
-00009060: 6f72 726f 775f 742e 7374 6172 745f 706f  orrow_t.start_po
-00009070: 732c 2062 6f72 726f 775f 742e 6c69 6e65  s, borrow_t.line
-00009080: 2c20 626f 7272 6f77 5f74 2e63 6f6c 756d  , borrow_t.colum
-00009090: 6e2c 2062 6f72 726f 775f 742e 656e 645f  n, borrow_t.end_
-000090a0: 6c69 6e65 2c20 626f 7272 6f77 5f74 2e65  line, borrow_t.e
-000090b0: 6e64 5f63 6f6c 756d 6e2c 2062 6f72 726f  nd_column, borro
-000090c0: 775f 742e 656e 645f 706f 7329 0a0a 2020  w_t.end_pos)..  
-000090d0: 2020 6465 6620 5f5f 7265 6475 6365 5f5f    def __reduce__
-000090e0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
-000090f0: 7265 7475 726e 2028 7365 6c66 2e5f 5f63  return (self.__c
-00009100: 6c61 7373 5f5f 2c20 2873 656c 662e 7479  lass__, (self.ty
-00009110: 7065 2c20 7365 6c66 2e76 616c 7565 2c20  pe, self.value, 
-00009120: 7365 6c66 2e73 7461 7274 5f70 6f73 2c20  self.start_pos, 
-00009130: 7365 6c66 2e6c 696e 652c 2073 656c 662e  self.line, self.
-00009140: 636f 6c75 6d6e 2929 0a0a 2020 2020 6465  column))..    de
-00009150: 6620 5f5f 7265 7072 5f5f 2873 656c 6629  f __repr__(self)
-00009160: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-00009170: 2027 546f 6b65 6e28 2572 2c20 2572 2927   'Token(%r, %r)'
-00009180: 2025 2028 7365 6c66 2e74 7970 652c 2073   % (self.type, s
-00009190: 656c 662e 7661 6c75 6529 0a0a 2020 2020  elf.value)..    
-000091a0: 6465 6620 5f5f 6465 6570 636f 7079 5f5f  def __deepcopy__
-000091b0: 2873 656c 662c 206d 656d 6f29 3a0a 2020  (self, memo):.  
-000091c0: 2020 2020 2020 7265 7475 726e 2054 6f6b        return Tok
-000091d0: 656e 2873 656c 662e 7479 7065 2c20 7365  en(self.type, se
-000091e0: 6c66 2e76 616c 7565 2c20 7365 6c66 2e73  lf.value, self.s
-000091f0: 7461 7274 5f70 6f73 2c20 7365 6c66 2e6c  tart_pos, self.l
-00009200: 696e 652c 2073 656c 662e 636f 6c75 6d6e  ine, self.column
-00009210: 290a 0a20 2020 2064 6566 205f 5f65 715f  )..    def __eq_
-00009220: 5f28 7365 6c66 2c20 6f74 6865 7229 3a0a  _(self, other):.
-00009230: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
-00009240: 7461 6e63 6528 6f74 6865 722c 2054 6f6b  tance(other, Tok
-00009250: 656e 2920 616e 6420 7365 6c66 2e74 7970  en) and self.typ
-00009260: 6520 213d 206f 7468 6572 2e74 7970 653a  e != other.type:
-00009270: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
-00009280: 7572 6e20 4661 6c73 650a 0a20 2020 2020  urn False..     
-00009290: 2020 2072 6574 7572 6e20 7374 722e 5f5f     return str.__
-000092a0: 6571 5f5f 2873 656c 662c 206f 7468 6572  eq__(self, other
-000092b0: 290a 0a20 2020 205f 5f68 6173 685f 5f20  )..    __hash__ 
-000092c0: 3d20 7374 722e 5f5f 6861 7368 5f5f 0a0a  = str.__hash__..
-000092d0: 0a63 6c61 7373 204c 696e 6543 6f75 6e74  .class LineCount
-000092e0: 6572 3a0a 2020 2020 5f5f 736c 6f74 735f  er:.    __slots_
-000092f0: 5f20 3d20 2763 6861 725f 706f 7327 2c20  _ = 'char_pos', 
-00009300: 276c 696e 6527 2c20 2763 6f6c 756d 6e27  'line', 'column'
-00009310: 2c20 276c 696e 655f 7374 6172 745f 706f  , 'line_start_po
-00009320: 7327 2c20 276e 6577 6c69 6e65 5f63 6861  s', 'newline_cha
-00009330: 7227 0a0a 2020 2020 6465 6620 5f5f 696e  r'..    def __in
-00009340: 6974 5f5f 2873 656c 662c 206e 6577 6c69  it__(self, newli
-00009350: 6e65 5f63 6861 7229 3a0a 2020 2020 2020  ne_char):.      
-00009360: 2020 7365 6c66 2e6e 6577 6c69 6e65 5f63    self.newline_c
-00009370: 6861 7220 3d20 6e65 776c 696e 655f 6368  har = newline_ch
-00009380: 6172 0a20 2020 2020 2020 2073 656c 662e  ar.        self.
-00009390: 6368 6172 5f70 6f73 203d 2030 0a20 2020  char_pos = 0.   
-000093a0: 2020 2020 2073 656c 662e 6c69 6e65 203d       self.line =
-000093b0: 2031 0a20 2020 2020 2020 2073 656c 662e   1.        self.
-000093c0: 636f 6c75 6d6e 203d 2031 0a20 2020 2020  column = 1.     
-000093d0: 2020 2073 656c 662e 6c69 6e65 5f73 7461     self.line_sta
-000093e0: 7274 5f70 6f73 203d 2030 0a0a 2020 2020  rt_pos = 0..    
-000093f0: 6465 6620 5f5f 6571 5f5f 2873 656c 662c  def __eq__(self,
-00009400: 206f 7468 6572 293a 0a20 2020 2020 2020   other):.       
-00009410: 2069 6620 6e6f 7420 6973 696e 7374 616e   if not isinstan
-00009420: 6365 286f 7468 6572 2c20 4c69 6e65 436f  ce(other, LineCo
-00009430: 756e 7465 7229 3a0a 2020 2020 2020 2020  unter):.        
-00009440: 2020 2020 7265 7475 726e 204e 6f74 496d      return NotIm
-00009450: 706c 656d 656e 7465 640a 0a20 2020 2020  plemented..     
-00009460: 2020 2072 6574 7572 6e20 7365 6c66 2e63     return self.c
-00009470: 6861 725f 706f 7320 3d3d 206f 7468 6572  har_pos == other
-00009480: 2e63 6861 725f 706f 7320 616e 6420 7365  .char_pos and se
-00009490: 6c66 2e6e 6577 6c69 6e65 5f63 6861 7220  lf.newline_char 
-000094a0: 3d3d 206f 7468 6572 2e6e 6577 6c69 6e65  == other.newline
-000094b0: 5f63 6861 720a 0a20 2020 2064 6566 2066  _char..    def f
-000094c0: 6565 6428 7365 6c66 2c20 746f 6b65 6e3a  eed(self, token:
-000094d0: 2054 6f6b 656e 2c20 7465 7374 5f6e 6577   Token, test_new
-000094e0: 6c69 6e65 3d54 7275 6529 3a0a 2020 2020  line=True):.    
-000094f0: 2020 2020 232d 2d0a 2020 2020 2020 2020      #--.        
-00009500: 6966 2074 6573 745f 6e65 776c 696e 653a  if test_newline:
-00009510: 0a20 2020 2020 2020 2020 2020 206e 6577  .            new
-00009520: 6c69 6e65 7320 3d20 746f 6b65 6e2e 636f  lines = token.co
-00009530: 756e 7428 7365 6c66 2e6e 6577 6c69 6e65  unt(self.newline
-00009540: 5f63 6861 7229 0a20 2020 2020 2020 2020  _char).         
-00009550: 2020 2069 6620 6e65 776c 696e 6573 3a0a     if newlines:.
-00009560: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009570: 7365 6c66 2e6c 696e 6520 2b3d 206e 6577  self.line += new
-00009580: 6c69 6e65 730a 2020 2020 2020 2020 2020  lines.          
-00009590: 2020 2020 2020 7365 6c66 2e6c 696e 655f        self.line_
-000095a0: 7374 6172 745f 706f 7320 3d20 7365 6c66  start_pos = self
-000095b0: 2e63 6861 725f 706f 7320 2b20 746f 6b65  .char_pos + toke
-000095c0: 6e2e 7269 6e64 6578 2873 656c 662e 6e65  n.rindex(self.ne
-000095d0: 776c 696e 655f 6368 6172 2920 2b20 310a  wline_char) + 1.
-000095e0: 0a20 2020 2020 2020 2073 656c 662e 6368  .        self.ch
-000095f0: 6172 5f70 6f73 202b 3d20 6c65 6e28 746f  ar_pos += len(to
-00009600: 6b65 6e29 0a20 2020 2020 2020 2073 656c  ken).        sel
-00009610: 662e 636f 6c75 6d6e 203d 2073 656c 662e  f.column = self.
-00009620: 6368 6172 5f70 6f73 202d 2073 656c 662e  char_pos - self.
-00009630: 6c69 6e65 5f73 7461 7274 5f70 6f73 202b  line_start_pos +
-00009640: 2031 0a0a 0a63 6c61 7373 2055 6e6c 6573   1...class Unles
-00009650: 7343 616c 6c62 6163 6b3a 0a20 2020 2064  sCallback:.    d
-00009660: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-00009670: 2c20 7363 616e 6e65 7229 3a0a 2020 2020  , scanner):.    
-00009680: 2020 2020 7365 6c66 2e73 6361 6e6e 6572      self.scanner
-00009690: 203d 2073 6361 6e6e 6572 0a0a 2020 2020   = scanner..    
-000096a0: 6465 6620 5f5f 6361 6c6c 5f5f 2873 656c  def __call__(sel
-000096b0: 662c 2074 293a 0a20 2020 2020 2020 2072  f, t):.        r
-000096c0: 6573 203d 2073 656c 662e 7363 616e 6e65  es = self.scanne
-000096d0: 722e 6d61 7463 6828 742e 7661 6c75 652c  r.match(t.value,
-000096e0: 2030 290a 2020 2020 2020 2020 6966 2072   0).        if r
-000096f0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-00009700: 5f76 616c 7565 2c20 742e 7479 7065 203d  _value, t.type =
-00009710: 2072 6573 0a20 2020 2020 2020 2072 6574   res.        ret
-00009720: 7572 6e20 740a 0a0a 636c 6173 7320 4361  urn t...class Ca
-00009730: 6c6c 4368 6169 6e3a 0a20 2020 2064 6566  llChain:.    def
-00009740: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-00009750: 6361 6c6c 6261 636b 312c 2063 616c 6c62  callback1, callb
-00009760: 6163 6b32 2c20 636f 6e64 293a 0a20 2020  ack2, cond):.   
-00009770: 2020 2020 2073 656c 662e 6361 6c6c 6261       self.callba
-00009780: 636b 3120 3d20 6361 6c6c 6261 636b 310a  ck1 = callback1.
-00009790: 2020 2020 2020 2020 7365 6c66 2e63 616c          self.cal
-000097a0: 6c62 6163 6b32 203d 2063 616c 6c62 6163  lback2 = callbac
-000097b0: 6b32 0a20 2020 2020 2020 2073 656c 662e  k2.        self.
-000097c0: 636f 6e64 203d 2063 6f6e 640a 0a20 2020  cond = cond..   
-000097d0: 2064 6566 205f 5f63 616c 6c5f 5f28 7365   def __call__(se
-000097e0: 6c66 2c20 7429 3a0a 2020 2020 2020 2020  lf, t):.        
-000097f0: 7432 203d 2073 656c 662e 6361 6c6c 6261  t2 = self.callba
-00009800: 636b 3128 7429 0a20 2020 2020 2020 2072  ck1(t).        r
-00009810: 6574 7572 6e20 7365 6c66 2e63 616c 6c62  eturn self.callb
-00009820: 6163 6b32 2874 2920 6966 2073 656c 662e  ack2(t) if self.
-00009830: 636f 6e64 2874 3229 2065 6c73 6520 7432  cond(t2) else t2
-00009840: 0a0a 0a64 6566 205f 6765 745f 6d61 7463  ...def _get_matc
-00009850: 6828 7265 5f2c 2072 6567 6578 702c 2073  h(re_, regexp, s
-00009860: 2c20 666c 6167 7329 3a0a 2020 2020 6d20  , flags):.    m 
-00009870: 3d20 7265 5f2e 6d61 7463 6828 7265 6765  = re_.match(rege
-00009880: 7870 2c20 732c 2066 6c61 6773 290a 2020  xp, s, flags).  
-00009890: 2020 6966 206d 3a0a 2020 2020 2020 2020    if m:.        
-000098a0: 7265 7475 726e 206d 2e67 726f 7570 2830  return m.group(0
-000098b0: 290a 0a64 6566 205f 6372 6561 7465 5f75  )..def _create_u
-000098c0: 6e6c 6573 7328 7465 726d 696e 616c 732c  nless(terminals,
-000098d0: 2067 5f72 6567 6578 5f66 6c61 6773 2c20   g_regex_flags, 
-000098e0: 7265 5f2c 2075 7365 5f62 7974 6573 293a  re_, use_bytes):
-000098f0: 0a20 2020 2074 6f6b 656e 735f 6279 5f74  .    tokens_by_t
-00009900: 7970 6520 3d20 636c 6173 7369 6679 2874  ype = classify(t
-00009910: 6572 6d69 6e61 6c73 2c20 6c61 6d62 6461  erminals, lambda
-00009920: 2074 3a20 7479 7065 2874 2e70 6174 7465   t: type(t.patte
-00009930: 726e 2929 0a20 2020 2061 7373 6572 7420  rn)).    assert 
-00009940: 6c65 6e28 746f 6b65 6e73 5f62 795f 7479  len(tokens_by_ty
-00009950: 7065 2920 3c3d 2032 2c20 746f 6b65 6e73  pe) <= 2, tokens
-00009960: 5f62 795f 7479 7065 2e6b 6579 7328 290a  _by_type.keys().
-00009970: 2020 2020 656d 6265 6464 6564 5f73 7472      embedded_str
-00009980: 7320 3d20 7365 7428 290a 2020 2020 6361  s = set().    ca
-00009990: 6c6c 6261 636b 203d 207b 7d0a 2020 2020  llback = {}.    
-000099a0: 666f 7220 7265 746f 6b20 696e 2074 6f6b  for retok in tok
-000099b0: 656e 735f 6279 5f74 7970 652e 6765 7428  ens_by_type.get(
-000099c0: 5061 7474 6572 6e52 452c 205b 5d29 3a0a  PatternRE, []):.
-000099d0: 2020 2020 2020 2020 756e 6c65 7373 203d          unless =
-000099e0: 205b 5d0a 2020 2020 2020 2020 666f 7220   [].        for 
-000099f0: 7374 7274 6f6b 2069 6e20 746f 6b65 6e73  strtok in tokens
-00009a00: 5f62 795f 7479 7065 2e67 6574 2850 6174  _by_type.get(Pat
-00009a10: 7465 726e 5374 722c 205b 5d29 3a0a 2020  ternStr, []):.  
-00009a20: 2020 2020 2020 2020 2020 6966 2073 7472            if str
-00009a30: 746f 6b2e 7072 696f 7269 7479 2021 3d20  tok.priority != 
-00009a40: 7265 746f 6b2e 7072 696f 7269 7479 3a0a  retok.priority:.
-00009a50: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009a60: 636f 6e74 696e 7565 0a20 2020 2020 2020  continue.       
-00009a70: 2020 2020 2073 203d 2073 7472 746f 6b2e       s = strtok.
-00009a80: 7061 7474 6572 6e2e 7661 6c75 650a 2020  pattern.value.  
-00009a90: 2020 2020 2020 2020 2020 6966 2073 203d            if s =
-00009aa0: 3d20 5f67 6574 5f6d 6174 6368 2872 655f  = _get_match(re_
-00009ab0: 2c20 7265 746f 6b2e 7061 7474 6572 6e2e  , retok.pattern.
-00009ac0: 746f 5f72 6567 6578 7028 292c 2073 2c20  to_regexp(), s, 
-00009ad0: 675f 7265 6765 785f 666c 6167 7329 3a0a  g_regex_flags):.
-00009ae0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00009af0: 756e 6c65 7373 2e61 7070 656e 6428 7374  unless.append(st
-00009b00: 7274 6f6b 290a 2020 2020 2020 2020 2020  rtok).          
-00009b10: 2020 2020 2020 6966 2073 7472 746f 6b2e        if strtok.
-00009b20: 7061 7474 6572 6e2e 666c 6167 7320 3c3d  pattern.flags <=
-00009b30: 2072 6574 6f6b 2e70 6174 7465 726e 2e66   retok.pattern.f
-00009b40: 6c61 6773 3a0a 2020 2020 2020 2020 2020  lags:.          
-00009b50: 2020 2020 2020 2020 2020 656d 6265 6464            embedd
-00009b60: 6564 5f73 7472 732e 6164 6428 7374 7274  ed_strs.add(strt
-00009b70: 6f6b 290a 2020 2020 2020 2020 6966 2075  ok).        if u
-00009b80: 6e6c 6573 733a 0a20 2020 2020 2020 2020  nless:.         
-00009b90: 2020 2063 616c 6c62 6163 6b5b 7265 746f     callback[reto
-00009ba0: 6b2e 6e61 6d65 5d20 3d20 556e 6c65 7373  k.name] = Unless
-00009bb0: 4361 6c6c 6261 636b 2853 6361 6e6e 6572  Callback(Scanner
-00009bc0: 2875 6e6c 6573 732c 2067 5f72 6567 6578  (unless, g_regex
-00009bd0: 5f66 6c61 6773 2c20 7265 5f2c 206d 6174  _flags, re_, mat
-00009be0: 6368 5f77 686f 6c65 3d54 7275 652c 2075  ch_whole=True, u
-00009bf0: 7365 5f62 7974 6573 3d75 7365 5f62 7974  se_bytes=use_byt
-00009c00: 6573 2929 0a0a 2020 2020 6e65 775f 7465  es))..    new_te
-00009c10: 726d 696e 616c 7320 3d20 5b74 2066 6f72  rminals = [t for
-00009c20: 2074 2069 6e20 7465 726d 696e 616c 7320   t in terminals 
-00009c30: 6966 2074 206e 6f74 2069 6e20 656d 6265  if t not in embe
-00009c40: 6464 6564 5f73 7472 735d 0a20 2020 2072  dded_strs].    r
-00009c50: 6574 7572 6e20 6e65 775f 7465 726d 696e  eturn new_termin
-00009c60: 616c 732c 2063 616c 6c62 6163 6b0a 0a0a  als, callback...
-00009c70: 636c 6173 7320 5363 616e 6e65 723a 0a20  class Scanner:. 
-00009c80: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00009c90: 7365 6c66 2c20 7465 726d 696e 616c 732c  self, terminals,
-00009ca0: 2067 5f72 6567 6578 5f66 6c61 6773 2c20   g_regex_flags, 
-00009cb0: 7265 5f2c 2075 7365 5f62 7974 6573 2c20  re_, use_bytes, 
-00009cc0: 6d61 7463 685f 7768 6f6c 653d 4661 6c73  match_whole=Fals
-00009cd0: 6529 3a0a 2020 2020 2020 2020 7365 6c66  e):.        self
-00009ce0: 2e74 6572 6d69 6e61 6c73 203d 2074 6572  .terminals = ter
-00009cf0: 6d69 6e61 6c73 0a20 2020 2020 2020 2073  minals.        s
-00009d00: 656c 662e 675f 7265 6765 785f 666c 6167  elf.g_regex_flag
-00009d10: 7320 3d20 675f 7265 6765 785f 666c 6167  s = g_regex_flag
-00009d20: 730a 2020 2020 2020 2020 7365 6c66 2e72  s.        self.r
-00009d30: 655f 203d 2072 655f 0a20 2020 2020 2020  e_ = re_.       
-00009d40: 2073 656c 662e 7573 655f 6279 7465 7320   self.use_bytes 
-00009d50: 3d20 7573 655f 6279 7465 730a 2020 2020  = use_bytes.    
-00009d60: 2020 2020 7365 6c66 2e6d 6174 6368 5f77      self.match_w
-00009d70: 686f 6c65 203d 206d 6174 6368 5f77 686f  hole = match_who
-00009d80: 6c65 0a0a 2020 2020 2020 2020 7365 6c66  le..        self
-00009d90: 2e61 6c6c 6f77 6564 5f74 7970 6573 203d  .allowed_types =
-00009da0: 207b 742e 6e61 6d65 2066 6f72 2074 2069   {t.name for t i
-00009db0: 6e20 7365 6c66 2e74 6572 6d69 6e61 6c73  n self.terminals
-00009dc0: 7d0a 0a20 2020 2020 2020 2073 656c 662e  }..        self.
-00009dd0: 5f6d 7265 7320 3d20 7365 6c66 2e5f 6275  _mres = self._bu
-00009de0: 696c 645f 6d72 6573 2874 6572 6d69 6e61  ild_mres(termina
-00009df0: 6c73 2c20 6c65 6e28 7465 726d 696e 616c  ls, len(terminal
-00009e00: 7329 290a 0a20 2020 2064 6566 205f 6275  s))..    def _bu
-00009e10: 696c 645f 6d72 6573 2873 656c 662c 2074  ild_mres(self, t
-00009e20: 6572 6d69 6e61 6c73 2c20 6d61 785f 7369  erminals, max_si
-00009e30: 7a65 293a 0a20 2020 2020 2020 2023 230a  ze):.        ##.
-00009e40: 0a20 2020 2020 2020 2023 230a 0a20 2020  .        ##..   
-00009e50: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
-00009e60: 2070 6f73 7466 6978 203d 2027 2427 2069   postfix = '$' i
-00009e70: 6620 7365 6c66 2e6d 6174 6368 5f77 686f  f self.match_who
-00009e80: 6c65 2065 6c73 6520 2727 0a20 2020 2020  le else ''.     
-00009e90: 2020 206d 7265 7320 3d20 5b5d 0a20 2020     mres = [].   
-00009ea0: 2020 2020 2077 6869 6c65 2074 6572 6d69       while termi
-00009eb0: 6e61 6c73 3a0a 2020 2020 2020 2020 2020  nals:.          
-00009ec0: 2020 7061 7474 6572 6e20 3d20 7527 7c27    pattern = u'|'
-00009ed0: 2e6a 6f69 6e28 7527 283f 503c 2573 3e25  .join(u'(?P<%s>%
-00009ee0: 7329 2720 2520 2874 2e6e 616d 652c 2074  s)' % (t.name, t
-00009ef0: 2e70 6174 7465 726e 2e74 6f5f 7265 6765  .pattern.to_rege
-00009f00: 7870 2829 202b 2070 6f73 7466 6978 2920  xp() + postfix) 
-00009f10: 666f 7220 7420 696e 2074 6572 6d69 6e61  for t in termina
-00009f20: 6c73 5b3a 6d61 785f 7369 7a65 5d29 0a20  ls[:max_size]). 
-00009f30: 2020 2020 2020 2020 2020 2069 6620 7365             if se
-00009f40: 6c66 2e75 7365 5f62 7974 6573 3a0a 2020  lf.use_bytes:.  
-00009f50: 2020 2020 2020 2020 2020 2020 2020 7061                pa
-00009f60: 7474 6572 6e20 3d20 7061 7474 6572 6e2e  ttern = pattern.
-00009f70: 656e 636f 6465 2827 6c61 7469 6e2d 3127  encode('latin-1'
-00009f80: 290a 2020 2020 2020 2020 2020 2020 7472  ).            tr
-00009f90: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00009fa0: 2020 206d 7265 203d 2073 656c 662e 7265     mre = self.re
-00009fb0: 5f2e 636f 6d70 696c 6528 7061 7474 6572  _.compile(patter
-00009fc0: 6e2c 2073 656c 662e 675f 7265 6765 785f  n, self.g_regex_
-00009fd0: 666c 6167 7329 0a20 2020 2020 2020 2020  flags).         
-00009fe0: 2020 2065 7863 6570 7420 4173 7365 7274     except Assert
-00009ff0: 696f 6e45 7272 6f72 3a20 2023 230a 0a20  ionError:  ##.. 
-0000a000: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000a010: 6574 7572 6e20 7365 6c66 2e5f 6275 696c  eturn self._buil
-0000a020: 645f 6d72 6573 2874 6572 6d69 6e61 6c73  d_mres(terminals
-0000a030: 2c20 6d61 785f 7369 7a65 2f2f 3229 0a0a  , max_size//2)..
-0000a040: 2020 2020 2020 2020 2020 2020 6d72 6573              mres
-0000a050: 2e61 7070 656e 6428 6d72 6529 0a20 2020  .append(mre).   
-0000a060: 2020 2020 2020 2020 2074 6572 6d69 6e61           termina
-0000a070: 6c73 203d 2074 6572 6d69 6e61 6c73 5b6d  ls = terminals[m
-0000a080: 6178 5f73 697a 653a 5d0a 2020 2020 2020  ax_size:].      
-0000a090: 2020 7265 7475 726e 206d 7265 730a 0a20    return mres.. 
-0000a0a0: 2020 2064 6566 206d 6174 6368 2873 656c     def match(sel
-0000a0b0: 662c 2074 6578 742c 2070 6f73 293a 0a20  f, text, pos):. 
-0000a0c0: 2020 2020 2020 2066 6f72 206d 7265 2069         for mre i
-0000a0d0: 6e20 7365 6c66 2e5f 6d72 6573 3a0a 2020  n self._mres:.  
-0000a0e0: 2020 2020 2020 2020 2020 6d20 3d20 6d72            m = mr
-0000a0f0: 652e 6d61 7463 6828 7465 7874 2c20 706f  e.match(text, po
-0000a100: 7329 0a20 2020 2020 2020 2020 2020 2069  s).            i
-0000a110: 6620 6d3a 0a20 2020 2020 2020 2020 2020  f m:.           
-0000a120: 2020 2020 2072 6574 7572 6e20 6d2e 6772       return m.gr
-0000a130: 6f75 7028 3029 2c20 6d2e 6c61 7374 6772  oup(0), m.lastgr
-0000a140: 6f75 700a 0a0a 6465 6620 5f72 6567 6578  oup...def _regex
-0000a150: 705f 6861 735f 6e65 776c 696e 6528 723a  p_has_newline(r:
-0000a160: 2073 7472 293a 0a20 2020 2023 2d2d 0a20   str):.    #--. 
-0000a170: 2020 2072 6574 7572 6e20 275c 6e27 2069     return '\n' i
-0000a180: 6e20 7220 6f72 2027 5c5c 6e27 2069 6e20  n r or '\\n' in 
-0000a190: 7220 6f72 2027 5c5c 7327 2069 6e20 7220  r or '\\s' in r 
-0000a1a0: 6f72 2027 5b5e 2720 696e 2072 206f 7220  or '[^' in r or 
-0000a1b0: 2827 283f 7327 2069 6e20 7220 616e 6420  ('(?s' in r and 
-0000a1c0: 272e 2720 696e 2072 290a 0a0a 636c 6173  '.' in r)...clas
-0000a1d0: 7320 4c65 7865 7253 7461 7465 3a0a 2020  s LexerState:.  
-0000a1e0: 2020 232d 2d0a 0a20 2020 205f 5f73 6c6f    #--..    __slo
-0000a1f0: 7473 5f5f 203d 2027 7465 7874 272c 2027  ts__ = 'text', '
-0000a200: 6c69 6e65 5f63 7472 272c 2027 6c61 7374  line_ctr', 'last
-0000a210: 5f74 6f6b 656e 270a 0a20 2020 2064 6566  _token'..    def
-0000a220: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-0000a230: 7465 7874 2c20 6c69 6e65 5f63 7472 3d4e  text, line_ctr=N
-0000a240: 6f6e 652c 206c 6173 745f 746f 6b65 6e3d  one, last_token=
-0000a250: 4e6f 6e65 293a 0a20 2020 2020 2020 2073  None):.        s
-0000a260: 656c 662e 7465 7874 203d 2074 6578 740a  elf.text = text.
-0000a270: 2020 2020 2020 2020 7365 6c66 2e6c 696e          self.lin
-0000a280: 655f 6374 7220 3d20 6c69 6e65 5f63 7472  e_ctr = line_ctr
-0000a290: 206f 7220 4c69 6e65 436f 756e 7465 7228   or LineCounter(
-0000a2a0: 6227 5c6e 2720 6966 2069 7369 6e73 7461  b'\n' if isinsta
-0000a2b0: 6e63 6528 7465 7874 2c20 6279 7465 7329  nce(text, bytes)
-0000a2c0: 2065 6c73 6520 275c 6e27 290a 2020 2020   else '\n').    
-0000a2d0: 2020 2020 7365 6c66 2e6c 6173 745f 746f      self.last_to
-0000a2e0: 6b65 6e20 3d20 6c61 7374 5f74 6f6b 656e  ken = last_token
-0000a2f0: 0a0a 2020 2020 6465 6620 5f5f 6571 5f5f  ..    def __eq__
-0000a300: 2873 656c 662c 206f 7468 6572 293a 0a20  (self, other):. 
-0000a310: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
-0000a320: 696e 7374 616e 6365 286f 7468 6572 2c20  instance(other, 
-0000a330: 4c65 7865 7253 7461 7465 293a 0a20 2020  LexerState):.   
-0000a340: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000a350: 4e6f 7449 6d70 6c65 6d65 6e74 6564 0a0a  NotImplemented..
-0000a360: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000a370: 656c 662e 7465 7874 2069 7320 6f74 6865  elf.text is othe
-0000a380: 722e 7465 7874 2061 6e64 2073 656c 662e  r.text and self.
-0000a390: 6c69 6e65 5f63 7472 203d 3d20 6f74 6865  line_ctr == othe
-0000a3a0: 722e 6c69 6e65 5f63 7472 2061 6e64 2073  r.line_ctr and s
-0000a3b0: 656c 662e 6c61 7374 5f74 6f6b 656e 203d  elf.last_token =
-0000a3c0: 3d20 6f74 6865 722e 6c61 7374 5f74 6f6b  = other.last_tok
-0000a3d0: 656e 0a0a 2020 2020 6465 6620 5f5f 636f  en..    def __co
-0000a3e0: 7079 5f5f 2873 656c 6629 3a0a 2020 2020  py__(self):.    
-0000a3f0: 2020 2020 7265 7475 726e 2074 7970 6528      return type(
-0000a400: 7365 6c66 2928 7365 6c66 2e74 6578 742c  self)(self.text,
-0000a410: 2063 6f70 7928 7365 6c66 2e6c 696e 655f   copy(self.line_
-0000a420: 6374 7229 2c20 7365 6c66 2e6c 6173 745f  ctr), self.last_
-0000a430: 746f 6b65 6e29 0a0a 0a63 6c61 7373 204c  token)...class L
-0000a440: 6578 6572 5468 7265 6164 3a0a 2020 2020  exerThread:.    
-0000a450: 232d 2d0a 0a20 2020 2064 6566 205f 5f69  #--..    def __i
-0000a460: 6e69 745f 5f28 7365 6c66 2c20 6c65 7865  nit__(self, lexe
-0000a470: 723a 2027 4c65 7865 7227 2c20 6c65 7865  r: 'Lexer', lexe
-0000a480: 725f 7374 6174 653a 204c 6578 6572 5374  r_state: LexerSt
-0000a490: 6174 6529 3a0a 2020 2020 2020 2020 7365  ate):.        se
-0000a4a0: 6c66 2e6c 6578 6572 203d 206c 6578 6572  lf.lexer = lexer
-0000a4b0: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
-0000a4c0: 6174 6520 3d20 6c65 7865 725f 7374 6174  ate = lexer_stat
-0000a4d0: 650a 0a20 2020 2040 636c 6173 736d 6574  e..    @classmet
-0000a4e0: 686f 640a 2020 2020 6465 6620 6672 6f6d  hod.    def from
-0000a4f0: 5f74 6578 7428 636c 732c 206c 6578 6572  _text(cls, lexer
-0000a500: 3a20 274c 6578 6572 272c 2074 6578 743a  : 'Lexer', text:
-0000a510: 2073 7472 293a 0a20 2020 2020 2020 2072   str):.        r
-0000a520: 6574 7572 6e20 636c 7328 6c65 7865 722c  eturn cls(lexer,
-0000a530: 204c 6578 6572 5374 6174 6528 7465 7874   LexerState(text
-0000a540: 2929 0a0a 2020 2020 6465 6620 6c65 7828  ))..    def lex(
-0000a550: 7365 6c66 2c20 7061 7273 6572 5f73 7461  self, parser_sta
-0000a560: 7465 293a 0a20 2020 2020 2020 2072 6574  te):.        ret
-0000a570: 7572 6e20 7365 6c66 2e6c 6578 6572 2e6c  urn self.lexer.l
-0000a580: 6578 2873 656c 662e 7374 6174 652c 2070  ex(self.state, p
-0000a590: 6172 7365 725f 7374 6174 6529 0a0a 2020  arser_state)..  
-0000a5a0: 2020 6465 6620 5f5f 636f 7079 5f5f 2873    def __copy__(s
-0000a5b0: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
-0000a5c0: 7475 726e 2074 7970 6528 7365 6c66 2928  turn type(self)(
-0000a5d0: 7365 6c66 2e6c 6578 6572 2c20 636f 7079  self.lexer, copy
-0000a5e0: 2873 656c 662e 7374 6174 6529 290a 0a20  (self.state)).. 
-0000a5f0: 2020 205f 546f 6b65 6e20 3d20 546f 6b65     _Token = Toke
-0000a600: 6e0a 0a0a 5f43 616c 6c62 6163 6b20 3d20  n..._Callback = 
-0000a610: 4361 6c6c 6162 6c65 5b5b 546f 6b65 6e5d  Callable[[Token]
-0000a620: 2c20 546f 6b65 6e5d 0a0a 636c 6173 7320  , Token]..class 
-0000a630: 4c65 7865 7228 4142 4329 3a0a 2020 2020  Lexer(ABC):.    
-0000a640: 232d 2d0a 2020 2020 4061 6273 7472 6163  #--.    @abstrac
-0000a650: 746d 6574 686f 640a 2020 2020 6465 6620  tmethod.    def 
-0000a660: 6c65 7828 7365 6c66 2c20 6c65 7865 725f  lex(self, lexer_
-0000a670: 7374 6174 653a 204c 6578 6572 5374 6174  state: LexerStat
-0000a680: 652c 2070 6172 7365 725f 7374 6174 653a  e, parser_state:
-0000a690: 2041 6e79 2920 2d3e 2049 7465 7261 746f   Any) -> Iterato
-0000a6a0: 725b 546f 6b65 6e5d 3a0a 2020 2020 2020  r[Token]:.      
-0000a6b0: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
-0000a6c0: 656d 656e 7465 640a 0a20 2020 2064 6566  emented..    def
-0000a6d0: 206d 616b 655f 6c65 7865 725f 7374 6174   make_lexer_stat
-0000a6e0: 6528 7365 6c66 2c20 7465 7874 293a 0a20  e(self, text):. 
-0000a6f0: 2020 2020 2020 2023 2d2d 0a20 2020 2020         #--.     
-0000a700: 2020 2072 6574 7572 6e20 4c65 7865 7253     return LexerS
-0000a710: 7461 7465 2874 6578 7429 0a0a 0a63 6c61  tate(text)...cla
-0000a720: 7373 2042 6173 6963 4c65 7865 7228 4c65  ss BasicLexer(Le
-0000a730: 7865 7229 3a0a 0a20 2020 2074 6572 6d69  xer):..    termi
-0000a740: 6e61 6c73 3a20 436f 6c6c 6563 7469 6f6e  nals: Collection
-0000a750: 5b54 6572 6d69 6e61 6c44 6566 5d0a 2020  [TerminalDef].  
-0000a760: 2020 6967 6e6f 7265 5f74 7970 6573 3a20    ignore_types: 
-0000a770: 4672 6f7a 656e 5365 745b 7374 725d 0a20  FrozenSet[str]. 
-0000a780: 2020 206e 6577 6c69 6e65 5f74 7970 6573     newline_types
-0000a790: 3a20 4672 6f7a 656e 5365 745b 7374 725d  : FrozenSet[str]
-0000a7a0: 0a20 2020 2075 7365 725f 6361 6c6c 6261  .    user_callba
-0000a7b0: 636b 733a 2044 6963 745b 7374 722c 205f  cks: Dict[str, _
-0000a7c0: 4361 6c6c 6261 636b 5d0a 2020 2020 6361  Callback].    ca
-0000a7d0: 6c6c 6261 636b 3a20 4469 6374 5b73 7472  llback: Dict[str
-0000a7e0: 2c20 5f43 616c 6c62 6163 6b5d 0a20 2020  , _Callback].   
-0000a7f0: 2072 653a 204d 6f64 756c 6554 7970 650a   re: ModuleType.
-0000a800: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
-0000a810: 5f28 7365 6c66 2c20 636f 6e66 3a20 274c  _(self, conf: 'L
-0000a820: 6578 6572 436f 6e66 2729 202d 3e20 4e6f  exerConf') -> No
-0000a830: 6e65 3a0a 2020 2020 2020 2020 7465 726d  ne:.        term
-0000a840: 696e 616c 7320 3d20 6c69 7374 2863 6f6e  inals = list(con
-0000a850: 662e 7465 726d 696e 616c 7329 0a20 2020  f.terminals).   
-0000a860: 2020 2020 2061 7373 6572 7420 616c 6c28       assert all(
-0000a870: 6973 696e 7374 616e 6365 2874 2c20 5465  isinstance(t, Te
-0000a880: 726d 696e 616c 4465 6629 2066 6f72 2074  rminalDef) for t
-0000a890: 2069 6e20 7465 726d 696e 616c 7329 2c20   in terminals), 
-0000a8a0: 7465 726d 696e 616c 730a 0a20 2020 2020  terminals..     
-0000a8b0: 2020 2073 656c 662e 7265 203d 2063 6f6e     self.re = con
-0000a8c0: 662e 7265 5f6d 6f64 756c 650a 0a20 2020  f.re_module..   
-0000a8d0: 2020 2020 2069 6620 6e6f 7420 636f 6e66       if not conf
-0000a8e0: 2e73 6b69 705f 7661 6c69 6461 7469 6f6e  .skip_validation
-0000a8f0: 3a0a 2020 2020 2020 2020 2020 2020 2323  :.            ##
-0000a900: 0a0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-0000a910: 7220 7420 696e 2074 6572 6d69 6e61 6c73  r t in terminals
-0000a920: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000a930: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-0000a940: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000a950: 7265 2e63 6f6d 7069 6c65 2874 2e70 6174  re.compile(t.pat
-0000a960: 7465 726e 2e74 6f5f 7265 6765 7870 2829  tern.to_regexp()
-0000a970: 2c20 636f 6e66 2e67 5f72 6567 6578 5f66  , conf.g_regex_f
-0000a980: 6c61 6773 290a 2020 2020 2020 2020 2020  lags).          
-0000a990: 2020 2020 2020 6578 6365 7074 2073 656c        except sel
-0000a9a0: 662e 7265 2e65 7272 6f72 3a0a 2020 2020  f.re.error:.    
-0000a9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000a9c0: 7261 6973 6520 4c65 7845 7272 6f72 2822  raise LexError("
-0000a9d0: 4361 6e6e 6f74 2063 6f6d 7069 6c65 2074  Cannot compile t
-0000a9e0: 6f6b 656e 2025 733a 2025 7322 2025 2028  oken %s: %s" % (
-0000a9f0: 742e 6e61 6d65 2c20 742e 7061 7474 6572  t.name, t.patter
-0000aa00: 6e29 290a 0a20 2020 2020 2020 2020 2020  n))..           
-0000aa10: 2020 2020 2069 6620 742e 7061 7474 6572       if t.patter
-0000aa20: 6e2e 6d69 6e5f 7769 6474 6820 3d3d 2030  n.min_width == 0
-0000aa30: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000aa40: 2020 2020 2020 7261 6973 6520 4c65 7845        raise LexE
-0000aa50: 7272 6f72 2822 4c65 7865 7220 646f 6573  rror("Lexer does
-0000aa60: 206e 6f74 2061 6c6c 6f77 207a 6572 6f2d   not allow zero-
-0000aa70: 7769 6474 6820 7465 726d 696e 616c 732e  width terminals.
-0000aa80: 2028 2573 3a20 2573 2922 2025 2028 742e   (%s: %s)" % (t.
-0000aa90: 6e61 6d65 2c20 742e 7061 7474 6572 6e29  name, t.pattern)
-0000aaa0: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
-0000aab0: 6620 6e6f 7420 2873 6574 2863 6f6e 662e  f not (set(conf.
-0000aac0: 6967 6e6f 7265 2920 3c3d 207b 742e 6e61  ignore) <= {t.na
-0000aad0: 6d65 2066 6f72 2074 2069 6e20 7465 726d  me for t in term
-0000aae0: 696e 616c 737d 293a 0a20 2020 2020 2020  inals}):.       
-0000aaf0: 2020 2020 2020 2020 2072 6169 7365 204c           raise L
-0000ab00: 6578 4572 726f 7228 2249 676e 6f72 6520  exError("Ignore 
-0000ab10: 7465 726d 696e 616c 7320 6172 6520 6e6f  terminals are no
-0000ab20: 7420 6465 6669 6e65 643a 2025 7322 2025  t defined: %s" %
-0000ab30: 2028 7365 7428 636f 6e66 2e69 676e 6f72   (set(conf.ignor
-0000ab40: 6529 202d 207b 742e 6e61 6d65 2066 6f72  e) - {t.name for
-0000ab50: 2074 2069 6e20 7465 726d 696e 616c 737d   t in terminals}
-0000ab60: 2929 0a0a 2020 2020 2020 2020 2323 0a0a  ))..        ##..
-0000ab70: 2020 2020 2020 2020 7365 6c66 2e6e 6577          self.new
-0000ab80: 6c69 6e65 5f74 7970 6573 203d 2066 726f  line_types = fro
-0000ab90: 7a65 6e73 6574 2874 2e6e 616d 6520 666f  zenset(t.name fo
-0000aba0: 7220 7420 696e 2074 6572 6d69 6e61 6c73  r t in terminals
-0000abb0: 2069 6620 5f72 6567 6578 705f 6861 735f   if _regexp_has_
-0000abc0: 6e65 776c 696e 6528 742e 7061 7474 6572  newline(t.patter
-0000abd0: 6e2e 746f 5f72 6567 6578 7028 2929 290a  n.to_regexp())).
-0000abe0: 2020 2020 2020 2020 7365 6c66 2e69 676e          self.ign
-0000abf0: 6f72 655f 7479 7065 7320 3d20 6672 6f7a  ore_types = froz
-0000ac00: 656e 7365 7428 636f 6e66 2e69 676e 6f72  enset(conf.ignor
-0000ac10: 6529 0a0a 2020 2020 2020 2020 7465 726d  e)..        term
-0000ac20: 696e 616c 732e 736f 7274 286b 6579 3d6c  inals.sort(key=l
-0000ac30: 616d 6264 6120 783a 2028 2d78 2e70 7269  ambda x: (-x.pri
-0000ac40: 6f72 6974 792c 202d 782e 7061 7474 6572  ority, -x.patter
-0000ac50: 6e2e 6d61 785f 7769 6474 682c 202d 6c65  n.max_width, -le
-0000ac60: 6e28 782e 7061 7474 6572 6e2e 7661 6c75  n(x.pattern.valu
-0000ac70: 6529 2c20 782e 6e61 6d65 2929 0a20 2020  e), x.name)).   
-0000ac80: 2020 2020 2073 656c 662e 7465 726d 696e       self.termin
-0000ac90: 616c 7320 3d20 7465 726d 696e 616c 730a  als = terminals.
-0000aca0: 2020 2020 2020 2020 7365 6c66 2e75 7365          self.use
-0000acb0: 725f 6361 6c6c 6261 636b 7320 3d20 636f  r_callbacks = co
-0000acc0: 6e66 2e63 616c 6c62 6163 6b73 0a20 2020  nf.callbacks.   
-0000acd0: 2020 2020 2073 656c 662e 675f 7265 6765       self.g_rege
-0000ace0: 785f 666c 6167 7320 3d20 636f 6e66 2e67  x_flags = conf.g
-0000acf0: 5f72 6567 6578 5f66 6c61 6773 0a20 2020  _regex_flags.   
-0000ad00: 2020 2020 2073 656c 662e 7573 655f 6279       self.use_by
-0000ad10: 7465 7320 3d20 636f 6e66 2e75 7365 5f62  tes = conf.use_b
-0000ad20: 7974 6573 0a20 2020 2020 2020 2073 656c  ytes.        sel
-0000ad30: 662e 7465 726d 696e 616c 735f 6279 5f6e  f.terminals_by_n
-0000ad40: 616d 6520 3d20 636f 6e66 2e74 6572 6d69  ame = conf.termi
-0000ad50: 6e61 6c73 5f62 795f 6e61 6d65 0a0a 2020  nals_by_name..  
-0000ad60: 2020 2020 2020 7365 6c66 2e5f 7363 616e        self._scan
-0000ad70: 6e65 7220 3d20 4e6f 6e65 0a0a 2020 2020  ner = None..    
-0000ad80: 6465 6620 5f62 7569 6c64 5f73 6361 6e6e  def _build_scann
-0000ad90: 6572 2873 656c 6629 3a0a 2020 2020 2020  er(self):.      
-0000ada0: 2020 7465 726d 696e 616c 732c 2073 656c    terminals, sel
-0000adb0: 662e 6361 6c6c 6261 636b 203d 205f 6372  f.callback = _cr
-0000adc0: 6561 7465 5f75 6e6c 6573 7328 7365 6c66  eate_unless(self
-0000add0: 2e74 6572 6d69 6e61 6c73 2c20 7365 6c66  .terminals, self
-0000ade0: 2e67 5f72 6567 6578 5f66 6c61 6773 2c20  .g_regex_flags, 
-0000adf0: 7365 6c66 2e72 652c 2073 656c 662e 7573  self.re, self.us
-0000ae00: 655f 6279 7465 7329 0a20 2020 2020 2020  e_bytes).       
-0000ae10: 2061 7373 6572 7420 616c 6c28 7365 6c66   assert all(self
-0000ae20: 2e63 616c 6c62 6163 6b2e 7661 6c75 6573  .callback.values
-0000ae30: 2829 290a 0a20 2020 2020 2020 2066 6f72  ())..        for
-0000ae40: 2074 7970 655f 2c20 6620 696e 2073 656c   type_, f in sel
-0000ae50: 662e 7573 6572 5f63 616c 6c62 6163 6b73  f.user_callbacks
-0000ae60: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
-0000ae70: 2020 2020 2020 6966 2074 7970 655f 2069        if type_ i
-0000ae80: 6e20 7365 6c66 2e63 616c 6c62 6163 6b3a  n self.callback:
-0000ae90: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000aea0: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
-0000aeb0: 2020 2020 2073 656c 662e 6361 6c6c 6261       self.callba
-0000aec0: 636b 5b74 7970 655f 5d20 3d20 4361 6c6c  ck[type_] = Call
-0000aed0: 4368 6169 6e28 7365 6c66 2e63 616c 6c62  Chain(self.callb
-0000aee0: 6163 6b5b 7479 7065 5f5d 2c20 662c 206c  ack[type_], f, l
-0000aef0: 616d 6264 6120 743a 2074 2e74 7970 6520  ambda t: t.type 
-0000af00: 3d3d 2074 7970 655f 290a 2020 2020 2020  == type_).      
-0000af10: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-0000af20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-0000af30: 2e63 616c 6c62 6163 6b5b 7479 7065 5f5d  .callback[type_]
-0000af40: 203d 2066 0a0a 2020 2020 2020 2020 7365   = f..        se
-0000af50: 6c66 2e5f 7363 616e 6e65 7220 3d20 5363  lf._scanner = Sc
-0000af60: 616e 6e65 7228 7465 726d 696e 616c 732c  anner(terminals,
-0000af70: 2073 656c 662e 675f 7265 6765 785f 666c   self.g_regex_fl
-0000af80: 6167 732c 2073 656c 662e 7265 2c20 7365  ags, self.re, se
-0000af90: 6c66 2e75 7365 5f62 7974 6573 290a 0a20  lf.use_bytes).. 
-0000afa0: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
-0000afb0: 2064 6566 2073 6361 6e6e 6572 2873 656c   def scanner(sel
-0000afc0: 6629 3a0a 2020 2020 2020 2020 6966 2073  f):.        if s
-0000afd0: 656c 662e 5f73 6361 6e6e 6572 2069 7320  elf._scanner is 
-0000afe0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0000aff0: 2020 7365 6c66 2e5f 6275 696c 645f 7363    self._build_sc
-0000b000: 616e 6e65 7228 290a 2020 2020 2020 2020  anner().        
-0000b010: 7265 7475 726e 2073 656c 662e 5f73 6361  return self._sca
-0000b020: 6e6e 6572 0a0a 2020 2020 6465 6620 6d61  nner..    def ma
-0000b030: 7463 6828 7365 6c66 2c20 7465 7874 2c20  tch(self, text, 
-0000b040: 706f 7329 3a0a 2020 2020 2020 2020 7265  pos):.        re
-0000b050: 7475 726e 2073 656c 662e 7363 616e 6e65  turn self.scanne
-0000b060: 722e 6d61 7463 6828 7465 7874 2c20 706f  r.match(text, po
-0000b070: 7329 0a0a 2020 2020 6465 6620 6c65 7828  s)..    def lex(
-0000b080: 7365 6c66 2c20 7374 6174 653a 204c 6578  self, state: Lex
-0000b090: 6572 5374 6174 652c 2070 6172 7365 725f  erState, parser_
-0000b0a0: 7374 6174 653a 2041 6e79 2920 2d3e 2049  state: Any) -> I
-0000b0b0: 7465 7261 746f 725b 546f 6b65 6e5d 3a0a  terator[Token]:.
-0000b0c0: 2020 2020 2020 2020 7769 7468 2073 7570          with sup
-0000b0d0: 7072 6573 7328 454f 4645 7272 6f72 293a  press(EOFError):
-0000b0e0: 0a20 2020 2020 2020 2020 2020 2077 6869  .            whi
-0000b0f0: 6c65 2054 7275 653a 0a20 2020 2020 2020  le True:.       
-0000b100: 2020 2020 2020 2020 2079 6965 6c64 2073           yield s
-0000b110: 656c 662e 6e65 7874 5f74 6f6b 656e 2873  elf.next_token(s
-0000b120: 7461 7465 2c20 7061 7273 6572 5f73 7461  tate, parser_sta
-0000b130: 7465 290a 0a20 2020 2064 6566 206e 6578  te)..    def nex
-0000b140: 745f 746f 6b65 6e28 7365 6c66 2c20 6c65  t_token(self, le
-0000b150: 785f 7374 6174 653a 204c 6578 6572 5374  x_state: LexerSt
-0000b160: 6174 652c 2070 6172 7365 725f 7374 6174  ate, parser_stat
-0000b170: 653a 2041 6e79 3d4e 6f6e 6529 202d 3e20  e: Any=None) -> 
-0000b180: 546f 6b65 6e3a 0a20 2020 2020 2020 206c  Token:.        l
-0000b190: 696e 655f 6374 7220 3d20 6c65 785f 7374  ine_ctr = lex_st
-0000b1a0: 6174 652e 6c69 6e65 5f63 7472 0a20 2020  ate.line_ctr.   
-0000b1b0: 2020 2020 2077 6869 6c65 206c 696e 655f       while line_
-0000b1c0: 6374 722e 6368 6172 5f70 6f73 203c 206c  ctr.char_pos < l
-0000b1d0: 656e 286c 6578 5f73 7461 7465 2e74 6578  en(lex_state.tex
-0000b1e0: 7429 3a0a 2020 2020 2020 2020 2020 2020  t):.            
-0000b1f0: 7265 7320 3d20 7365 6c66 2e6d 6174 6368  res = self.match
-0000b200: 286c 6578 5f73 7461 7465 2e74 6578 742c  (lex_state.text,
-0000b210: 206c 696e 655f 6374 722e 6368 6172 5f70   line_ctr.char_p
-0000b220: 6f73 290a 2020 2020 2020 2020 2020 2020  os).            
-0000b230: 6966 206e 6f74 2072 6573 3a0a 2020 2020  if not res:.    
-0000b240: 2020 2020 2020 2020 2020 2020 616c 6c6f              allo
-0000b250: 7765 6420 3d20 7365 6c66 2e73 6361 6e6e  wed = self.scann
-0000b260: 6572 2e61 6c6c 6f77 6564 5f74 7970 6573  er.allowed_types
-0000b270: 202d 2073 656c 662e 6967 6e6f 7265 5f74   - self.ignore_t
-0000b280: 7970 6573 0a20 2020 2020 2020 2020 2020  ypes.           
-0000b290: 2020 2020 2069 6620 6e6f 7420 616c 6c6f       if not allo
-0000b2a0: 7765 643a 0a20 2020 2020 2020 2020 2020  wed:.           
-0000b2b0: 2020 2020 2020 2020 2061 6c6c 6f77 6564           allowed
-0000b2c0: 203d 207b 223c 454e 442d 4f46 2d46 494c   = {"<END-OF-FIL
-0000b2d0: 453e 227d 0a20 2020 2020 2020 2020 2020  E>"}.           
-0000b2e0: 2020 2020 2072 6169 7365 2055 6e65 7870       raise Unexp
-0000b2f0: 6563 7465 6443 6861 7261 6374 6572 7328  ectedCharacters(
-0000b300: 6c65 785f 7374 6174 652e 7465 7874 2c20  lex_state.text, 
-0000b310: 6c69 6e65 5f63 7472 2e63 6861 725f 706f  line_ctr.char_po
-0000b320: 732c 206c 696e 655f 6374 722e 6c69 6e65  s, line_ctr.line
-0000b330: 2c20 6c69 6e65 5f63 7472 2e63 6f6c 756d  , line_ctr.colum
-0000b340: 6e2c 0a20 2020 2020 2020 2020 2020 2020  n,.             
-0000b350: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b360: 2020 2020 2020 2020 2020 2020 2020 616c                al
-0000b370: 6c6f 7765 643d 616c 6c6f 7765 642c 2074  lowed=allowed, t
-0000b380: 6f6b 656e 5f68 6973 746f 7279 3d6c 6578  oken_history=lex
-0000b390: 5f73 7461 7465 2e6c 6173 745f 746f 6b65  _state.last_toke
-0000b3a0: 6e20 616e 6420 5b6c 6578 5f73 7461 7465  n and [lex_state
-0000b3b0: 2e6c 6173 745f 746f 6b65 6e5d 2c0a 2020  .last_token],.  
+00004e30: 6e20 5472 6565 2864 6174 612c 2063 6869  n Tree(data, chi
+00004e40: 6c64 7265 6e2c 206d 6574 6129 0a0a 2020  ldren, meta)..  
+00004e50: 2020 6465 6620 5f5f 6465 6661 756c 745f    def __default_
+00004e60: 746f 6b65 6e5f 5f28 7365 6c66 2c20 746f  token__(self, to
+00004e70: 6b65 6e29 3a0a 2020 2020 2020 2020 232d  ken):.        #-
+00004e80: 2d0a 2020 2020 2020 2020 7265 7475 726e  -.        return
+00004e90: 2074 6f6b 656e 0a0a 0a64 6566 206d 6572   token...def mer
+00004ea0: 6765 5f74 7261 6e73 666f 726d 6572 7328  ge_transformers(
+00004eb0: 6261 7365 5f74 7261 6e73 666f 726d 6572  base_transformer
+00004ec0: 3d4e 6f6e 652c 202a 2a74 7261 6e73 666f  =None, **transfo
+00004ed0: 726d 6572 735f 746f 5f6d 6572 6765 293a  rmers_to_merge):
+00004ee0: 0a20 2020 2023 2d2d 0a20 2020 2069 6620  .    #--.    if 
+00004ef0: 6261 7365 5f74 7261 6e73 666f 726d 6572  base_transformer
+00004f00: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00004f10: 2020 6261 7365 5f74 7261 6e73 666f 726d    base_transform
+00004f20: 6572 203d 2054 7261 6e73 666f 726d 6572  er = Transformer
+00004f30: 2829 0a20 2020 2066 6f72 2070 7265 6669  ().    for prefi
+00004f40: 782c 2074 7261 6e73 666f 726d 6572 2069  x, transformer i
+00004f50: 6e20 7472 616e 7366 6f72 6d65 7273 5f74  n transformers_t
+00004f60: 6f5f 6d65 7267 652e 6974 656d 7328 293a  o_merge.items():
+00004f70: 0a20 2020 2020 2020 2066 6f72 206d 6574  .        for met
+00004f80: 686f 645f 6e61 6d65 2069 6e20 6469 7228  hod_name in dir(
+00004f90: 7472 616e 7366 6f72 6d65 7229 3a0a 2020  transformer):.  
+00004fa0: 2020 2020 2020 2020 2020 6d65 7468 6f64            method
+00004fb0: 203d 2067 6574 6174 7472 2874 7261 6e73   = getattr(trans
+00004fc0: 666f 726d 6572 2c20 6d65 7468 6f64 5f6e  former, method_n
+00004fd0: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+00004fe0: 2069 6620 6e6f 7420 6361 6c6c 6162 6c65   if not callable
+00004ff0: 286d 6574 686f 6429 3a0a 2020 2020 2020  (method):.      
+00005000: 2020 2020 2020 2020 2020 636f 6e74 696e            contin
+00005010: 7565 0a20 2020 2020 2020 2020 2020 2069  ue.            i
+00005020: 6620 6d65 7468 6f64 5f6e 616d 652e 7374  f method_name.st
+00005030: 6172 7473 7769 7468 2822 5f22 2920 6f72  artswith("_") or
+00005040: 206d 6574 686f 645f 6e61 6d65 203d 3d20   method_name == 
+00005050: 2274 7261 6e73 666f 726d 223a 0a20 2020  "transform":.   
+00005060: 2020 2020 2020 2020 2020 2020 2063 6f6e               con
+00005070: 7469 6e75 650a 2020 2020 2020 2020 2020  tinue.          
+00005080: 2020 7072 6566 6978 6564 5f6d 6574 686f    prefixed_metho
+00005090: 6420 3d20 7072 6566 6978 202b 2022 5f5f  d = prefix + "__
+000050a0: 2220 2b20 6d65 7468 6f64 5f6e 616d 650a  " + method_name.
+000050b0: 2020 2020 2020 2020 2020 2020 6966 2068              if h
+000050c0: 6173 6174 7472 2862 6173 655f 7472 616e  asattr(base_tran
+000050d0: 7366 6f72 6d65 722c 2070 7265 6669 7865  sformer, prefixe
+000050e0: 645f 6d65 7468 6f64 293a 0a20 2020 2020  d_method):.     
+000050f0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00005100: 2041 7474 7269 6275 7465 4572 726f 7228   AttributeError(
+00005110: 2243 616e 6e6f 7420 6d65 7267 653a 206d  "Cannot merge: m
+00005120: 6574 686f 6420 2725 7327 2061 7070 6561  ethod '%s' appea
+00005130: 7273 206d 6f72 6520 7468 616e 206f 6e63  rs more than onc
+00005140: 6522 2025 2070 7265 6669 7865 645f 6d65  e" % prefixed_me
+00005150: 7468 6f64 290a 0a20 2020 2020 2020 2020  thod)..         
+00005160: 2020 2073 6574 6174 7472 2862 6173 655f     setattr(base_
+00005170: 7472 616e 7366 6f72 6d65 722c 2070 7265  transformer, pre
+00005180: 6669 7865 645f 6d65 7468 6f64 2c20 6d65  fixed_method, me
+00005190: 7468 6f64 290a 0a20 2020 2072 6574 7572  thod)..    retur
+000051a0: 6e20 6261 7365 5f74 7261 6e73 666f 726d  n base_transform
+000051b0: 6572 0a0a 0a63 6c61 7373 2049 6e6c 696e  er...class Inlin
+000051c0: 6554 7261 6e73 666f 726d 6572 2854 7261  eTransformer(Tra
+000051d0: 6e73 666f 726d 6572 293a 2020 2023 230a  nsformer):   ##.
+000051e0: 0a20 2020 2064 6566 205f 6361 6c6c 5f75  .    def _call_u
+000051f0: 7365 7266 756e 6328 7365 6c66 2c20 7472  serfunc(self, tr
+00005200: 6565 2c20 6e65 775f 6368 696c 6472 656e  ee, new_children
+00005210: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00005220: 2323 0a0a 2020 2020 2020 2020 6368 696c  ##..        chil
+00005230: 6472 656e 203d 206e 6577 5f63 6869 6c64  dren = new_child
+00005240: 7265 6e20 6966 206e 6577 5f63 6869 6c64  ren if new_child
+00005250: 7265 6e20 6973 206e 6f74 204e 6f6e 6520  ren is not None 
+00005260: 656c 7365 2074 7265 652e 6368 696c 6472  else tree.childr
+00005270: 656e 0a20 2020 2020 2020 2074 7279 3a0a  en.        try:.
+00005280: 2020 2020 2020 2020 2020 2020 6620 3d20              f = 
+00005290: 6765 7461 7474 7228 7365 6c66 2c20 7472  getattr(self, tr
+000052a0: 6565 2e64 6174 6129 0a20 2020 2020 2020  ee.data).       
+000052b0: 2065 7863 6570 7420 4174 7472 6962 7574   except Attribut
+000052c0: 6545 7272 6f72 3a0a 2020 2020 2020 2020  eError:.        
+000052d0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000052e0: 5f5f 6465 6661 756c 745f 5f28 7472 6565  __default__(tree
+000052f0: 2e64 6174 612c 2063 6869 6c64 7265 6e2c  .data, children,
+00005300: 2074 7265 652e 6d65 7461 290a 2020 2020   tree.meta).    
+00005310: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00005320: 2020 2020 2020 7265 7475 726e 2066 282a        return f(*
+00005330: 6368 696c 6472 656e 290a 0a0a 636c 6173  children)...clas
+00005340: 7320 5472 616e 7366 6f72 6d65 7243 6861  s TransformerCha
+00005350: 696e 2847 656e 6572 6963 5b5f 4c65 6166  in(Generic[_Leaf
+00005360: 5f54 2c20 5f52 6574 7572 6e5f 545d 293a  _T, _Return_T]):
+00005370: 0a0a 2020 2020 7472 616e 7366 6f72 6d65  ..    transforme
+00005380: 7273 3a20 2754 7570 6c65 5b55 6e69 6f6e  rs: 'Tuple[Union
+00005390: 5b54 7261 6e73 666f 726d 6572 2c20 5472  [Transformer, Tr
+000053a0: 616e 7366 6f72 6d65 7243 6861 696e 5d2c  ansformerChain],
+000053b0: 202e 2e2e 5d27 0a0a 2020 2020 6465 6620   ...]'..    def 
+000053c0: 5f5f 696e 6974 5f5f 2873 656c 662c 202a  __init__(self, *
+000053d0: 7472 616e 7366 6f72 6d65 7273 3a20 2755  transformers: 'U
+000053e0: 6e69 6f6e 5b54 7261 6e73 666f 726d 6572  nion[Transformer
+000053f0: 2c20 5472 616e 7366 6f72 6d65 7243 6861  , TransformerCha
+00005400: 696e 5d27 2920 2d3e 204e 6f6e 653a 0a20  in]') -> None:. 
+00005410: 2020 2020 2020 2073 656c 662e 7472 616e         self.tran
+00005420: 7366 6f72 6d65 7273 203d 2074 7261 6e73  sformers = trans
+00005430: 666f 726d 6572 730a 0a20 2020 2064 6566  formers..    def
+00005440: 2074 7261 6e73 666f 726d 2873 656c 662c   transform(self,
+00005450: 2074 7265 653a 2054 7265 655b 5f4c 6561   tree: Tree[_Lea
+00005460: 665f 545d 2920 2d3e 205f 5265 7475 726e  f_T]) -> _Return
+00005470: 5f54 3a0a 2020 2020 2020 2020 666f 7220  _T:.        for 
+00005480: 7420 696e 2073 656c 662e 7472 616e 7366  t in self.transf
+00005490: 6f72 6d65 7273 3a0a 2020 2020 2020 2020  ormers:.        
+000054a0: 2020 2020 7472 6565 203d 2074 2e74 7261      tree = t.tra
+000054b0: 6e73 666f 726d 2874 7265 6529 0a20 2020  nsform(tree).   
+000054c0: 2020 2020 2072 6574 7572 6e20 6361 7374       return cast
+000054d0: 285f 5265 7475 726e 5f54 2c20 7472 6565  (_Return_T, tree
+000054e0: 290a 0a20 2020 2064 6566 205f 5f6d 756c  )..    def __mul
+000054f0: 5f5f 280a 2020 2020 2020 2020 2020 2020  __(.            
+00005500: 7365 6c66 3a20 2754 7261 6e73 666f 726d  self: 'Transform
+00005510: 6572 4368 6169 6e5b 5f4c 6561 665f 542c  erChain[_Leaf_T,
+00005520: 2054 7265 655b 5f4c 6561 665f 555d 5d27   Tree[_Leaf_U]]'
+00005530: 2c0a 2020 2020 2020 2020 2020 2020 6f74  ,.            ot
+00005540: 6865 723a 2027 556e 696f 6e5b 5472 616e  her: 'Union[Tran
+00005550: 7366 6f72 6d65 725b 5f4c 6561 665f 552c  sformer[_Leaf_U,
+00005560: 205f 5265 7475 726e 5f56 5d2c 2054 7261   _Return_V], Tra
+00005570: 6e73 666f 726d 6572 4368 6169 6e5b 5f4c  nsformerChain[_L
+00005580: 6561 665f 552c 205f 5265 7475 726e 5f56  eaf_U, _Return_V
+00005590: 5d5d 270a 2020 2020 2920 2d3e 2027 5472  ]]'.    ) -> 'Tr
+000055a0: 616e 7366 6f72 6d65 7243 6861 696e 5b5f  ansformerChain[_
+000055b0: 4c65 6166 5f54 2c20 5f52 6574 7572 6e5f  Leaf_T, _Return_
+000055c0: 565d 273a 0a20 2020 2020 2020 2072 6574  V]':.        ret
+000055d0: 7572 6e20 5472 616e 7366 6f72 6d65 7243  urn TransformerC
+000055e0: 6861 696e 282a 7365 6c66 2e74 7261 6e73  hain(*self.trans
+000055f0: 666f 726d 6572 7320 2b20 286f 7468 6572  formers + (other
+00005600: 2c29 290a 0a0a 636c 6173 7320 5472 616e  ,))...class Tran
+00005610: 7366 6f72 6d65 725f 496e 506c 6163 6528  sformer_InPlace(
+00005620: 5472 616e 7366 6f72 6d65 725b 5f4c 6561  Transformer[_Lea
+00005630: 665f 542c 205f 5265 7475 726e 5f54 5d29  f_T, _Return_T])
+00005640: 3a0a 2020 2020 232d 2d0a 2020 2020 6465  :.    #--.    de
+00005650: 6620 5f74 7261 6e73 666f 726d 5f74 7265  f _transform_tre
+00005660: 6528 7365 6c66 2c20 7472 6565 293a 2020  e(self, tree):  
+00005670: 2020 2020 2020 2020 2023 230a 0a20 2020           ##..   
+00005680: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00005690: 2e5f 6361 6c6c 5f75 7365 7266 756e 6328  ._call_userfunc(
+000056a0: 7472 6565 290a 0a20 2020 2064 6566 2074  tree)..    def t
+000056b0: 7261 6e73 666f 726d 2873 656c 662c 2074  ransform(self, t
+000056c0: 7265 653a 2054 7265 655b 5f4c 6561 665f  ree: Tree[_Leaf_
+000056d0: 545d 2920 2d3e 205f 5265 7475 726e 5f54  T]) -> _Return_T
+000056e0: 3a0a 2020 2020 2020 2020 666f 7220 7375  :.        for su
+000056f0: 6274 7265 6520 696e 2074 7265 652e 6974  btree in tree.it
+00005700: 6572 5f73 7562 7472 6565 7328 293a 0a20  er_subtrees():. 
+00005710: 2020 2020 2020 2020 2020 2073 7562 7472             subtr
+00005720: 6565 2e63 6869 6c64 7265 6e20 3d20 6c69  ee.children = li
+00005730: 7374 2873 656c 662e 5f74 7261 6e73 666f  st(self._transfo
+00005740: 726d 5f63 6869 6c64 7265 6e28 7375 6274  rm_children(subt
+00005750: 7265 652e 6368 696c 6472 656e 2929 0a0a  ree.children))..
+00005760: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00005770: 656c 662e 5f74 7261 6e73 666f 726d 5f74  elf._transform_t
+00005780: 7265 6528 7472 6565 290a 0a0a 636c 6173  ree(tree)...clas
+00005790: 7320 5472 616e 7366 6f72 6d65 725f 4e6f  s Transformer_No
+000057a0: 6e52 6563 7572 7369 7665 2854 7261 6e73  nRecursive(Trans
+000057b0: 666f 726d 6572 5b5f 4c65 6166 5f54 2c20  former[_Leaf_T, 
+000057c0: 5f52 6574 7572 6e5f 545d 293a 0a20 2020  _Return_T]):.   
+000057d0: 2023 2d2d 0a0a 2020 2020 6465 6620 7472   #--..    def tr
+000057e0: 616e 7366 6f72 6d28 7365 6c66 2c20 7472  ansform(self, tr
+000057f0: 6565 3a20 5472 6565 5b5f 4c65 6166 5f54  ee: Tree[_Leaf_T
+00005800: 5d29 202d 3e20 5f52 6574 7572 6e5f 543a  ]) -> _Return_T:
+00005810: 0a20 2020 2020 2020 2023 230a 0a20 2020  .        ##..   
+00005820: 2020 2020 2072 6576 5f70 6f73 7466 6978       rev_postfix
+00005830: 203d 205b 5d0a 2020 2020 2020 2020 713a   = [].        q:
+00005840: 204c 6973 745b 4272 616e 6368 5b5f 4c65   List[Branch[_Le
+00005850: 6166 5f54 5d5d 203d 205b 7472 6565 5d0a  af_T]] = [tree].
+00005860: 2020 2020 2020 2020 7768 696c 6520 713a          while q:
+00005870: 0a20 2020 2020 2020 2020 2020 2074 203d  .            t =
+00005880: 2071 2e70 6f70 2829 0a20 2020 2020 2020   q.pop().       
+00005890: 2020 2020 2072 6576 5f70 6f73 7466 6978       rev_postfix
+000058a0: 2e61 7070 656e 6428 7429 0a20 2020 2020  .append(t).     
+000058b0: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+000058c0: 616e 6365 2874 2c20 5472 6565 293a 0a20  ance(t, Tree):. 
+000058d0: 2020 2020 2020 2020 2020 2020 2020 2071                 q
+000058e0: 202b 3d20 742e 6368 696c 6472 656e 0a0a   += t.children..
+000058f0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
+00005900: 2020 2020 7374 6163 6b3a 204c 6973 7420      stack: List 
+00005910: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
+00005920: 2078 2069 6e20 7265 7665 7273 6564 2872   x in reversed(r
+00005930: 6576 5f70 6f73 7466 6978 293a 0a20 2020  ev_postfix):.   
+00005940: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+00005950: 7374 616e 6365 2878 2c20 5472 6565 293a  stance(x, Tree):
+00005960: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005970: 2073 697a 6520 3d20 6c65 6e28 782e 6368   size = len(x.ch
+00005980: 696c 6472 656e 290a 2020 2020 2020 2020  ildren).        
+00005990: 2020 2020 2020 2020 6966 2073 697a 653a          if size:
+000059a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000059b0: 2020 2020 2061 7267 7320 3d20 7374 6163       args = stac
+000059c0: 6b5b 2d73 697a 653a 5d0a 2020 2020 2020  k[-size:].      
+000059d0: 2020 2020 2020 2020 2020 2020 2020 6465                de
+000059e0: 6c20 7374 6163 6b5b 2d73 697a 653a 5d0a  l stack[-size:].
+000059f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a00: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00005a10: 2020 2020 2020 2020 2020 6172 6773 203d            args =
+00005a20: 205b 5d0a 0a20 2020 2020 2020 2020 2020   []..           
+00005a30: 2020 2020 2072 6573 203d 2073 656c 662e       res = self.
+00005a40: 5f63 616c 6c5f 7573 6572 6675 6e63 2878  _call_userfunc(x
+00005a50: 2c20 6172 6773 290a 2020 2020 2020 2020  , args).        
+00005a60: 2020 2020 2020 2020 6966 2072 6573 2069          if res i
+00005a70: 7320 6e6f 7420 4469 7363 6172 643a 0a20  s not Discard:. 
+00005a80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00005a90: 2020 2073 7461 636b 2e61 7070 656e 6428     stack.append(
+00005aa0: 7265 7329 0a0a 2020 2020 2020 2020 2020  res)..          
+00005ab0: 2020 656c 6966 2073 656c 662e 5f5f 7669    elif self.__vi
+00005ac0: 7369 745f 746f 6b65 6e73 5f5f 2061 6e64  sit_tokens__ and
+00005ad0: 2069 7369 6e73 7461 6e63 6528 782c 2054   isinstance(x, T
+00005ae0: 6f6b 656e 293a 0a20 2020 2020 2020 2020  oken):.         
+00005af0: 2020 2020 2020 2072 6573 203d 2073 656c         res = sel
+00005b00: 662e 5f63 616c 6c5f 7573 6572 6675 6e63  f._call_userfunc
+00005b10: 5f74 6f6b 656e 2878 290a 2020 2020 2020  _token(x).      
+00005b20: 2020 2020 2020 2020 2020 6966 2072 6573            if res
+00005b30: 2069 7320 6e6f 7420 4469 7363 6172 643a   is not Discard:
+00005b40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00005b50: 2020 2020 2073 7461 636b 2e61 7070 656e       stack.appen
+00005b60: 6428 7265 7329 0a20 2020 2020 2020 2020  d(res).         
+00005b70: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00005b80: 2020 2020 2020 2020 2073 7461 636b 2e61           stack.a
+00005b90: 7070 656e 6428 7829 0a0a 2020 2020 2020  ppend(x)..      
+00005ba0: 2020 7265 7375 6c74 2c20 3d20 7374 6163    result, = stac
+00005bb0: 6b20 2023 230a 0a20 2020 2020 2020 2023  k  ##..        #
+00005bc0: 230a 0a20 2020 2020 2020 2023 230a 0a20  #..        ##.. 
+00005bd0: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
+00005be0: 2020 2072 6574 7572 6e20 6361 7374 285f     return cast(_
+00005bf0: 5265 7475 726e 5f54 2c20 7265 7375 6c74  Return_T, result
+00005c00: 290a 0a0a 636c 6173 7320 5472 616e 7366  )...class Transf
+00005c10: 6f72 6d65 725f 496e 506c 6163 6552 6563  ormer_InPlaceRec
+00005c20: 7572 7369 7665 2854 7261 6e73 666f 726d  ursive(Transform
+00005c30: 6572 293a 0a20 2020 2023 2d2d 0a20 2020  er):.    #--.   
+00005c40: 2064 6566 205f 7472 616e 7366 6f72 6d5f   def _transform_
+00005c50: 7472 6565 2873 656c 662c 2074 7265 6529  tree(self, tree)
+00005c60: 3a0a 2020 2020 2020 2020 7472 6565 2e63  :.        tree.c
+00005c70: 6869 6c64 7265 6e20 3d20 6c69 7374 2873  hildren = list(s
+00005c80: 656c 662e 5f74 7261 6e73 666f 726d 5f63  elf._transform_c
+00005c90: 6869 6c64 7265 6e28 7472 6565 2e63 6869  hildren(tree.chi
+00005ca0: 6c64 7265 6e29 290a 2020 2020 2020 2020  ldren)).        
+00005cb0: 7265 7475 726e 2073 656c 662e 5f63 616c  return self._cal
+00005cc0: 6c5f 7573 6572 6675 6e63 2874 7265 6529  l_userfunc(tree)
+00005cd0: 0a0a 0a23 230a 0a0a 636c 6173 7320 5669  ...##...class Vi
+00005ce0: 7369 746f 7242 6173 653a 0a20 2020 2064  sitorBase:.    d
+00005cf0: 6566 205f 6361 6c6c 5f75 7365 7266 756e  ef _call_userfun
+00005d00: 6328 7365 6c66 2c20 7472 6565 293a 0a20  c(self, tree):. 
+00005d10: 2020 2020 2020 2072 6574 7572 6e20 6765         return ge
+00005d20: 7461 7474 7228 7365 6c66 2c20 7472 6565  tattr(self, tree
+00005d30: 2e64 6174 612c 2073 656c 662e 5f5f 6465  .data, self.__de
+00005d40: 6661 756c 745f 5f29 2874 7265 6529 0a0a  fault__)(tree)..
+00005d50: 2020 2020 6465 6620 5f5f 6465 6661 756c      def __defaul
+00005d60: 745f 5f28 7365 6c66 2c20 7472 6565 293a  t__(self, tree):
+00005d70: 0a20 2020 2020 2020 2023 2d2d 0a20 2020  .        #--.   
+00005d80: 2020 2020 2072 6574 7572 6e20 7472 6565       return tree
+00005d90: 0a0a 2020 2020 6465 6620 5f5f 636c 6173  ..    def __clas
+00005da0: 735f 6765 7469 7465 6d5f 5f28 636c 732c  s_getitem__(cls,
+00005db0: 205f 293a 0a20 2020 2020 2020 2072 6574   _):.        ret
+00005dc0: 7572 6e20 636c 730a 0a0a 636c 6173 7320  urn cls...class 
+00005dd0: 5669 7369 746f 7228 5669 7369 746f 7242  Visitor(VisitorB
+00005de0: 6173 652c 2041 4243 2c20 4765 6e65 7269  ase, ABC, Generi
+00005df0: 635b 5f4c 6561 665f 545d 293a 0a20 2020  c[_Leaf_T]):.   
+00005e00: 2023 2d2d 0a0a 2020 2020 6465 6620 7669   #--..    def vi
+00005e10: 7369 7428 7365 6c66 2c20 7472 6565 3a20  sit(self, tree: 
+00005e20: 5472 6565 5b5f 4c65 6166 5f54 5d29 202d  Tree[_Leaf_T]) -
+00005e30: 3e20 5472 6565 5b5f 4c65 6166 5f54 5d3a  > Tree[_Leaf_T]:
+00005e40: 0a20 2020 2020 2020 2023 2d2d 0a20 2020  .        #--.   
+00005e50: 2020 2020 2066 6f72 2073 7562 7472 6565       for subtree
+00005e60: 2069 6e20 7472 6565 2e69 7465 725f 7375   in tree.iter_su
+00005e70: 6274 7265 6573 2829 3a0a 2020 2020 2020  btrees():.      
+00005e80: 2020 2020 2020 7365 6c66 2e5f 6361 6c6c        self._call
+00005e90: 5f75 7365 7266 756e 6328 7375 6274 7265  _userfunc(subtre
+00005ea0: 6529 0a20 2020 2020 2020 2072 6574 7572  e).        retur
+00005eb0: 6e20 7472 6565 0a0a 2020 2020 6465 6620  n tree..    def 
+00005ec0: 7669 7369 745f 746f 7064 6f77 6e28 7365  visit_topdown(se
+00005ed0: 6c66 2c20 7472 6565 3a20 5472 6565 5b5f  lf, tree: Tree[_
+00005ee0: 4c65 6166 5f54 5d29 202d 3e20 5472 6565  Leaf_T]) -> Tree
+00005ef0: 5b5f 4c65 6166 5f54 5d3a 0a20 2020 2020  [_Leaf_T]:.     
+00005f00: 2020 2023 2d2d 0a20 2020 2020 2020 2066     #--.        f
+00005f10: 6f72 2073 7562 7472 6565 2069 6e20 7472  or subtree in tr
+00005f20: 6565 2e69 7465 725f 7375 6274 7265 6573  ee.iter_subtrees
+00005f30: 5f74 6f70 646f 776e 2829 3a0a 2020 2020  _topdown():.    
+00005f40: 2020 2020 2020 2020 7365 6c66 2e5f 6361          self._ca
+00005f50: 6c6c 5f75 7365 7266 756e 6328 7375 6274  ll_userfunc(subt
+00005f60: 7265 6529 0a20 2020 2020 2020 2072 6574  ree).        ret
+00005f70: 7572 6e20 7472 6565 0a0a 0a63 6c61 7373  urn tree...class
+00005f80: 2056 6973 6974 6f72 5f52 6563 7572 7369   Visitor_Recursi
+00005f90: 7665 2856 6973 6974 6f72 4261 7365 2c20  ve(VisitorBase, 
+00005fa0: 4765 6e65 7269 635b 5f4c 6561 665f 545d  Generic[_Leaf_T]
+00005fb0: 293a 0a20 2020 2023 2d2d 0a0a 2020 2020  ):.    #--..    
+00005fc0: 6465 6620 7669 7369 7428 7365 6c66 2c20  def visit(self, 
+00005fd0: 7472 6565 3a20 5472 6565 5b5f 4c65 6166  tree: Tree[_Leaf
+00005fe0: 5f54 5d29 202d 3e20 5472 6565 5b5f 4c65  _T]) -> Tree[_Le
+00005ff0: 6166 5f54 5d3a 0a20 2020 2020 2020 2023  af_T]:.        #
+00006000: 2d2d 0a20 2020 2020 2020 2066 6f72 2063  --.        for c
+00006010: 6869 6c64 2069 6e20 7472 6565 2e63 6869  hild in tree.chi
+00006020: 6c64 7265 6e3a 0a20 2020 2020 2020 2020  ldren:.         
+00006030: 2020 2069 6620 6973 696e 7374 616e 6365     if isinstance
+00006040: 2863 6869 6c64 2c20 5472 6565 293a 0a20  (child, Tree):. 
+00006050: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00006060: 656c 662e 7669 7369 7428 6368 696c 6429  elf.visit(child)
+00006070: 0a0a 2020 2020 2020 2020 7365 6c66 2e5f  ..        self._
+00006080: 6361 6c6c 5f75 7365 7266 756e 6328 7472  call_userfunc(tr
+00006090: 6565 290a 2020 2020 2020 2020 7265 7475  ee).        retu
+000060a0: 726e 2074 7265 650a 0a20 2020 2064 6566  rn tree..    def
+000060b0: 2076 6973 6974 5f74 6f70 646f 776e 2873   visit_topdown(s
+000060c0: 656c 662c 7472 6565 3a20 5472 6565 5b5f  elf,tree: Tree[_
+000060d0: 4c65 6166 5f54 5d29 202d 3e20 5472 6565  Leaf_T]) -> Tree
+000060e0: 5b5f 4c65 6166 5f54 5d3a 0a20 2020 2020  [_Leaf_T]:.     
+000060f0: 2020 2023 2d2d 0a20 2020 2020 2020 2073     #--.        s
+00006100: 656c 662e 5f63 616c 6c5f 7573 6572 6675  elf._call_userfu
+00006110: 6e63 2874 7265 6529 0a0a 2020 2020 2020  nc(tree)..      
+00006120: 2020 666f 7220 6368 696c 6420 696e 2074    for child in t
+00006130: 7265 652e 6368 696c 6472 656e 3a0a 2020  ree.children:.  
+00006140: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
+00006150: 6e73 7461 6e63 6528 6368 696c 642c 2054  nstance(child, T
+00006160: 7265 6529 3a0a 2020 2020 2020 2020 2020  ree):.          
+00006170: 2020 2020 2020 7365 6c66 2e76 6973 6974        self.visit
+00006180: 5f74 6f70 646f 776e 2863 6869 6c64 290a  _topdown(child).
+00006190: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000061a0: 7472 6565 0a0a 0a63 6c61 7373 2049 6e74  tree...class Int
+000061b0: 6572 7072 6574 6572 285f 4465 636f 7261  erpreter(_Decora
+000061c0: 7461 626c 652c 2041 4243 2c20 4765 6e65  table, ABC, Gene
+000061d0: 7269 635b 5f4c 6561 665f 542c 205f 5265  ric[_Leaf_T, _Re
+000061e0: 7475 726e 5f54 5d29 3a0a 2020 2020 232d  turn_T]):.    #-
+000061f0: 2d0a 0a20 2020 2064 6566 2076 6973 6974  -..    def visit
+00006200: 2873 656c 662c 2074 7265 653a 2054 7265  (self, tree: Tre
+00006210: 655b 5f4c 6561 665f 545d 2920 2d3e 205f  e[_Leaf_T]) -> _
+00006220: 5265 7475 726e 5f54 3a0a 2020 2020 2020  Return_T:.      
+00006230: 2020 2323 0a0a 2020 2020 2020 2020 2323    ##..        ##
+00006240: 0a0a 2020 2020 2020 2020 2323 0a0a 2020  ..        ##..  
+00006250: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00006260: 662e 5f76 6973 6974 5f74 7265 6528 7472  f._visit_tree(tr
+00006270: 6565 290a 0a20 2020 2064 6566 205f 7669  ee)..    def _vi
+00006280: 7369 745f 7472 6565 2873 656c 662c 2074  sit_tree(self, t
+00006290: 7265 653a 2054 7265 655b 5f4c 6561 665f  ree: Tree[_Leaf_
+000062a0: 545d 293a 0a20 2020 2020 2020 2066 203d  T]):.        f =
+000062b0: 2067 6574 6174 7472 2873 656c 662c 2074   getattr(self, t
+000062c0: 7265 652e 6461 7461 290a 2020 2020 2020  ree.data).      
+000062d0: 2020 7772 6170 7065 7220 3d20 6765 7461    wrapper = geta
+000062e0: 7474 7228 662c 2027 7669 7369 745f 7772  ttr(f, 'visit_wr
+000062f0: 6170 7065 7227 2c20 4e6f 6e65 290a 2020  apper', None).  
+00006300: 2020 2020 2020 6966 2077 7261 7070 6572        if wrapper
+00006310: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00006320: 2020 2020 2020 2020 2020 7265 7475 726e            return
+00006330: 2066 2e76 6973 6974 5f77 7261 7070 6572   f.visit_wrapper
+00006340: 2866 2c20 7472 6565 2e64 6174 612c 2074  (f, tree.data, t
+00006350: 7265 652e 6368 696c 6472 656e 2c20 7472  ree.children, tr
+00006360: 6565 2e6d 6574 6129 0a20 2020 2020 2020  ee.meta).       
+00006370: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00006380: 2020 2072 6574 7572 6e20 6628 7472 6565     return f(tree
+00006390: 290a 0a20 2020 2064 6566 2076 6973 6974  )..    def visit
+000063a0: 5f63 6869 6c64 7265 6e28 7365 6c66 2c20  _children(self, 
+000063b0: 7472 6565 3a20 5472 6565 5b5f 4c65 6166  tree: Tree[_Leaf
+000063c0: 5f54 5d29 202d 3e20 4c69 7374 3a0a 2020  _T]) -> List:.  
+000063d0: 2020 2020 2020 7265 7475 726e 205b 7365        return [se
+000063e0: 6c66 2e5f 7669 7369 745f 7472 6565 2863  lf._visit_tree(c
+000063f0: 6869 6c64 2920 6966 2069 7369 6e73 7461  hild) if isinsta
+00006400: 6e63 6528 6368 696c 642c 2054 7265 6529  nce(child, Tree)
+00006410: 2065 6c73 6520 6368 696c 640a 2020 2020   else child.    
+00006420: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+00006430: 6368 696c 6420 696e 2074 7265 652e 6368  child in tree.ch
+00006440: 696c 6472 656e 5d0a 0a20 2020 2064 6566  ildren]..    def
+00006450: 205f 5f67 6574 6174 7472 5f5f 2873 656c   __getattr__(sel
+00006460: 662c 206e 616d 6529 3a0a 2020 2020 2020  f, name):.      
+00006470: 2020 7265 7475 726e 2073 656c 662e 5f5f    return self.__
+00006480: 6465 6661 756c 745f 5f0a 0a20 2020 2064  default__..    d
+00006490: 6566 205f 5f64 6566 6175 6c74 5f5f 2873  ef __default__(s
+000064a0: 656c 662c 2074 7265 6529 3a0a 2020 2020  elf, tree):.    
+000064b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000064c0: 7669 7369 745f 6368 696c 6472 656e 2874  visit_children(t
+000064d0: 7265 6529 0a0a 0a5f 496e 7465 724d 6574  ree)..._InterMet
+000064e0: 686f 6420 3d20 4361 6c6c 6162 6c65 5b5b  hod = Callable[[
+000064f0: 5479 7065 5b49 6e74 6572 7072 6574 6572  Type[Interpreter
+00006500: 5d2c 205f 5265 7475 726e 5f54 5d2c 205f  ], _Return_T], _
+00006510: 525d 0a0a 6465 6620 7669 7369 745f 6368  R]..def visit_ch
+00006520: 696c 6472 656e 5f64 6563 6f72 2866 756e  ildren_decor(fun
+00006530: 633a 205f 496e 7465 724d 6574 686f 6429  c: _InterMethod)
+00006540: 202d 3e20 5f49 6e74 6572 4d65 7468 6f64   -> _InterMethod
+00006550: 3a0a 2020 2020 232d 2d0a 2020 2020 4077  :.    #--.    @w
+00006560: 7261 7073 2866 756e 6329 0a20 2020 2064  raps(func).    d
+00006570: 6566 2069 6e6e 6572 2863 6c73 2c20 7472  ef inner(cls, tr
+00006580: 6565 293a 0a20 2020 2020 2020 2076 616c  ee):.        val
+00006590: 7565 7320 3d20 636c 732e 7669 7369 745f  ues = cls.visit_
+000065a0: 6368 696c 6472 656e 2874 7265 6529 0a20  children(tree). 
+000065b0: 2020 2020 2020 2072 6574 7572 6e20 6675         return fu
+000065c0: 6e63 2863 6c73 2c20 7661 6c75 6573 290a  nc(cls, values).
+000065d0: 2020 2020 7265 7475 726e 2069 6e6e 6572      return inner
+000065e0: 0a0a 2323 0a0a 0a64 6566 205f 6170 706c  ..##...def _appl
+000065f0: 795f 765f 6172 6773 286f 626a 2c20 7669  y_v_args(obj, vi
+00006600: 7369 745f 7772 6170 7065 7229 3a0a 2020  sit_wrapper):.  
+00006610: 2020 7472 793a 0a20 2020 2020 2020 205f    try:.        _
+00006620: 6170 706c 7920 3d20 6f62 6a2e 5f61 7070  apply = obj._app
+00006630: 6c79 5f76 5f61 7267 730a 2020 2020 6578  ly_v_args.    ex
+00006640: 6365 7074 2041 7474 7269 6275 7465 4572  cept AttributeEr
+00006650: 726f 723a 0a20 2020 2020 2020 2072 6574  ror:.        ret
+00006660: 7572 6e20 5f56 4172 6773 5772 6170 7065  urn _VArgsWrappe
+00006670: 7228 6f62 6a2c 2076 6973 6974 5f77 7261  r(obj, visit_wra
+00006680: 7070 6572 290a 2020 2020 656c 7365 3a0a  pper).    else:.
+00006690: 2020 2020 2020 2020 7265 7475 726e 205f          return _
+000066a0: 6170 706c 7928 7669 7369 745f 7772 6170  apply(visit_wrap
+000066b0: 7065 7229 0a0a 0a63 6c61 7373 205f 5641  per)...class _VA
+000066c0: 7267 7357 7261 7070 6572 3a0a 2020 2020  rgsWrapper:.    
+000066d0: 232d 2d0a 2020 2020 6261 7365 5f66 756e  #--.    base_fun
+000066e0: 633a 2043 616c 6c61 626c 650a 0a20 2020  c: Callable..   
+000066f0: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+00006700: 6c66 2c20 6675 6e63 3a20 4361 6c6c 6162  lf, func: Callab
+00006710: 6c65 2c20 7669 7369 745f 7772 6170 7065  le, visit_wrappe
+00006720: 723a 2043 616c 6c61 626c 655b 5b43 616c  r: Callable[[Cal
+00006730: 6c61 626c 652c 2073 7472 2c20 6c69 7374  lable, str, list
+00006740: 2c20 416e 795d 2c20 416e 795d 293a 0a20  , Any], Any]):. 
+00006750: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00006760: 616e 6365 2866 756e 632c 205f 5641 7267  ance(func, _VArg
+00006770: 7357 7261 7070 6572 293a 0a20 2020 2020  sWrapper):.     
+00006780: 2020 2020 2020 2066 756e 6320 3d20 6675         func = fu
+00006790: 6e63 2e62 6173 655f 6675 6e63 0a20 2020  nc.base_func.   
+000067a0: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
+000067b0: 2073 656c 662e 6261 7365 5f66 756e 6320   self.base_func 
+000067c0: 3d20 6675 6e63 2020 2323 0a0a 2020 2020  = func  ##..    
+000067d0: 2020 2020 7365 6c66 2e76 6973 6974 5f77      self.visit_w
+000067e0: 7261 7070 6572 203d 2076 6973 6974 5f77  rapper = visit_w
+000067f0: 7261 7070 6572 0a20 2020 2020 2020 2075  rapper.        u
+00006800: 7064 6174 655f 7772 6170 7065 7228 7365  pdate_wrapper(se
+00006810: 6c66 2c20 6675 6e63 290a 0a20 2020 2064  lf, func)..    d
+00006820: 6566 205f 5f63 616c 6c5f 5f28 7365 6c66  ef __call__(self
+00006830: 2c20 2a61 7267 732c 202a 2a6b 7761 7267  , *args, **kwarg
+00006840: 7329 3a0a 2020 2020 2020 2020 7265 7475  s):.        retu
+00006850: 726e 2073 656c 662e 6261 7365 5f66 756e  rn self.base_fun
+00006860: 6328 2a61 7267 732c 202a 2a6b 7761 7267  c(*args, **kwarg
+00006870: 7329 0a0a 2020 2020 6465 6620 5f5f 6765  s)..    def __ge
+00006880: 745f 5f28 7365 6c66 2c20 696e 7374 616e  t__(self, instan
+00006890: 6365 2c20 6f77 6e65 723d 4e6f 6e65 293a  ce, owner=None):
+000068a0: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+000068b0: 2020 2020 2020 2020 2020 2323 0a0a 2020            ##..  
+000068c0: 2020 2020 2020 2020 2020 2323 0a0a 2020            ##..  
+000068d0: 2020 2020 2020 2020 2020 6720 3d20 7479            g = ty
+000068e0: 7065 2873 656c 662e 6261 7365 5f66 756e  pe(self.base_fun
+000068f0: 6329 2e5f 5f67 6574 5f5f 0a20 2020 2020  c).__get__.     
+00006900: 2020 2065 7863 6570 7420 4174 7472 6962     except Attrib
+00006910: 7574 6545 7272 6f72 3a0a 2020 2020 2020  uteError:.      
+00006920: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00006930: 660a 2020 2020 2020 2020 656c 7365 3a0a  f.        else:.
+00006940: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00006950: 726e 205f 5641 7267 7357 7261 7070 6572  rn _VArgsWrapper
+00006960: 2867 2873 656c 662e 6261 7365 5f66 756e  (g(self.base_fun
+00006970: 632c 2069 6e73 7461 6e63 652c 206f 776e  c, instance, own
+00006980: 6572 292c 2073 656c 662e 7669 7369 745f  er), self.visit_
+00006990: 7772 6170 7065 7229 0a0a 2020 2020 6465  wrapper)..    de
+000069a0: 6620 5f5f 7365 745f 6e61 6d65 5f5f 2873  f __set_name__(s
+000069b0: 656c 662c 206f 776e 6572 2c20 6e61 6d65  elf, owner, name
+000069c0: 293a 0a20 2020 2020 2020 2074 7279 3a0a  ):.        try:.
+000069d0: 2020 2020 2020 2020 2020 2020 6620 3d20              f = 
+000069e0: 7479 7065 2873 656c 662e 6261 7365 5f66  type(self.base_f
+000069f0: 756e 6329 2e5f 5f73 6574 5f6e 616d 655f  unc).__set_name_
+00006a00: 5f0a 2020 2020 2020 2020 6578 6365 7074  _.        except
+00006a10: 2041 7474 7269 6275 7465 4572 726f 723a   AttributeError:
+00006a20: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00006a30: 7572 6e0a 2020 2020 2020 2020 656c 7365  urn.        else
+00006a40: 3a0a 2020 2020 2020 2020 2020 2020 6628  :.            f(
+00006a50: 7365 6c66 2e62 6173 655f 6675 6e63 2c20  self.base_func, 
+00006a60: 6f77 6e65 722c 206e 616d 6529 0a0a 0a64  owner, name)...d
+00006a70: 6566 205f 7661 7267 735f 696e 6c69 6e65  ef _vargs_inline
+00006a80: 2866 2c20 5f64 6174 612c 2063 6869 6c64  (f, _data, child
+00006a90: 7265 6e2c 205f 6d65 7461 293a 0a20 2020  ren, _meta):.   
+00006aa0: 2072 6574 7572 6e20 6628 2a63 6869 6c64   return f(*child
+00006ab0: 7265 6e29 0a64 6566 205f 7661 7267 735f  ren).def _vargs_
+00006ac0: 6d65 7461 5f69 6e6c 696e 6528 662c 205f  meta_inline(f, _
+00006ad0: 6461 7461 2c20 6368 696c 6472 656e 2c20  data, children, 
+00006ae0: 6d65 7461 293a 0a20 2020 2072 6574 7572  meta):.    retur
+00006af0: 6e20 6628 6d65 7461 2c20 2a63 6869 6c64  n f(meta, *child
+00006b00: 7265 6e29 0a64 6566 205f 7661 7267 735f  ren).def _vargs_
+00006b10: 6d65 7461 2866 2c20 5f64 6174 612c 2063  meta(f, _data, c
+00006b20: 6869 6c64 7265 6e2c 206d 6574 6129 3a0a  hildren, meta):.
+00006b30: 2020 2020 7265 7475 726e 2066 286d 6574      return f(met
+00006b40: 612c 2063 6869 6c64 7265 6e29 0a64 6566  a, children).def
+00006b50: 205f 7661 7267 735f 7472 6565 2866 2c20   _vargs_tree(f, 
+00006b60: 6461 7461 2c20 6368 696c 6472 656e 2c20  data, children, 
+00006b70: 6d65 7461 293a 0a20 2020 2072 6574 7572  meta):.    retur
+00006b80: 6e20 6628 5472 6565 2864 6174 612c 2063  n f(Tree(data, c
+00006b90: 6869 6c64 7265 6e2c 206d 6574 6129 290a  hildren, meta)).
+00006ba0: 0a0a 6465 6620 765f 6172 6773 2869 6e6c  ..def v_args(inl
+00006bb0: 696e 653a 2062 6f6f 6c20 3d20 4661 6c73  ine: bool = Fals
+00006bc0: 652c 206d 6574 613a 2062 6f6f 6c20 3d20  e, meta: bool = 
+00006bd0: 4661 6c73 652c 2074 7265 653a 2062 6f6f  False, tree: boo
+00006be0: 6c20 3d20 4661 6c73 652c 2077 7261 7070  l = False, wrapp
+00006bf0: 6572 3a20 4f70 7469 6f6e 616c 5b43 616c  er: Optional[Cal
+00006c00: 6c61 626c 655d 203d 204e 6f6e 6529 202d  lable] = None) -
+00006c10: 3e20 4361 6c6c 6162 6c65 5b5b 5f44 4543  > Callable[[_DEC
+00006c20: 4f52 4154 4544 5d2c 205f 4445 434f 5241  ORATED], _DECORA
+00006c30: 5445 445d 3a0a 2020 2020 232d 2d0a 2020  TED]:.    #--.  
+00006c40: 2020 6966 2074 7265 6520 616e 6420 286d    if tree and (m
+00006c50: 6574 6120 6f72 2069 6e6c 696e 6529 3a0a  eta or inline):.
+00006c60: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+00006c70: 6c75 6545 7272 6f72 2822 5669 7369 746f  lueError("Visito
+00006c80: 7220 6675 6e63 7469 6f6e 7320 6361 6e6e  r functions cann
+00006c90: 6f74 2063 6f6d 6269 6e65 2027 7472 6565  ot combine 'tree
+00006ca0: 2720 7769 7468 2027 6d65 7461 2720 6f72  ' with 'meta' or
+00006cb0: 2027 696e 6c69 6e65 272e 2229 0a0a 2020   'inline'.")..  
+00006cc0: 2020 6675 6e63 203d 204e 6f6e 650a 2020    func = None.  
+00006cd0: 2020 6966 206d 6574 613a 0a20 2020 2020    if meta:.     
+00006ce0: 2020 2069 6620 696e 6c69 6e65 3a0a 2020     if inline:.  
+00006cf0: 2020 2020 2020 2020 2020 6675 6e63 203d            func =
+00006d00: 205f 7661 7267 735f 6d65 7461 5f69 6e6c   _vargs_meta_inl
+00006d10: 696e 650a 2020 2020 2020 2020 656c 7365  ine.        else
+00006d20: 3a0a 2020 2020 2020 2020 2020 2020 6675  :.            fu
+00006d30: 6e63 203d 205f 7661 7267 735f 6d65 7461  nc = _vargs_meta
+00006d40: 0a20 2020 2065 6c69 6620 696e 6c69 6e65  .    elif inline
+00006d50: 3a0a 2020 2020 2020 2020 6675 6e63 203d  :.        func =
+00006d60: 205f 7661 7267 735f 696e 6c69 6e65 0a20   _vargs_inline. 
+00006d70: 2020 2065 6c69 6620 7472 6565 3a0a 2020     elif tree:.  
+00006d80: 2020 2020 2020 6675 6e63 203d 205f 7661        func = _va
+00006d90: 7267 735f 7472 6565 0a0a 2020 2020 6966  rgs_tree..    if
+00006da0: 2077 7261 7070 6572 2069 7320 6e6f 7420   wrapper is not 
+00006db0: 4e6f 6e65 3a0a 2020 2020 2020 2020 6966  None:.        if
+00006dc0: 2066 756e 6320 6973 206e 6f74 204e 6f6e   func is not Non
+00006dd0: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
+00006de0: 6169 7365 2056 616c 7565 4572 726f 7228  aise ValueError(
+00006df0: 2243 616e 6e6f 7420 7573 6520 2777 7261  "Cannot use 'wra
+00006e00: 7070 6572 2720 616c 6f6e 6720 7769 7468  pper' along with
+00006e10: 2027 7472 6565 272c 2027 6d65 7461 2720   'tree', 'meta' 
+00006e20: 6f72 2027 696e 6c69 6e65 272e 2229 0a20  or 'inline'."). 
+00006e30: 2020 2020 2020 2066 756e 6320 3d20 7772         func = wr
+00006e40: 6170 7065 720a 0a20 2020 2064 6566 205f  apper..    def _
+00006e50: 7669 7369 746f 725f 6172 6773 5f64 6563  visitor_args_dec
+00006e60: 286f 626a 293a 0a20 2020 2020 2020 2072  (obj):.        r
+00006e70: 6574 7572 6e20 5f61 7070 6c79 5f76 5f61  eturn _apply_v_a
+00006e80: 7267 7328 6f62 6a2c 2066 756e 6329 0a20  rgs(obj, func). 
+00006e90: 2020 2072 6574 7572 6e20 5f76 6973 6974     return _visit
+00006ea0: 6f72 5f61 7267 735f 6465 630a 0a0a 0a54  or_args_dec....T
+00006eb0: 4f4b 454e 5f44 4546 4155 4c54 5f50 5249  OKEN_DEFAULT_PRI
+00006ec0: 4f52 4954 5920 3d20 300a 0a0a 636c 6173  ORITY = 0...clas
+00006ed0: 7320 5379 6d62 6f6c 2853 6572 6961 6c69  s Symbol(Seriali
+00006ee0: 7a65 293a 0a20 2020 205f 5f73 6c6f 7473  ze):.    __slots
+00006ef0: 5f5f 203d 2028 276e 616d 6527 2c29 0a0a  __ = ('name',)..
+00006f00: 2020 2020 6e61 6d65 3a20 7374 720a 2020      name: str.  
+00006f10: 2020 6973 5f74 6572 6d3a 2043 6c61 7373    is_term: Class
+00006f20: 5661 725b 626f 6f6c 5d20 3d20 4e6f 7449  Var[bool] = NotI
+00006f30: 6d70 6c65 6d65 6e74 6564 0a0a 2020 2020  mplemented..    
+00006f40: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+00006f50: 662c 206e 616d 653a 2073 7472 2920 2d3e  f, name: str) ->
+00006f60: 204e 6f6e 653a 0a20 2020 2020 2020 2073   None:.        s
+00006f70: 656c 662e 6e61 6d65 203d 206e 616d 650a  elf.name = name.
+00006f80: 0a20 2020 2064 6566 205f 5f65 715f 5f28  .    def __eq__(
+00006f90: 7365 6c66 2c20 6f74 6865 7229 3a0a 2020  self, other):.  
+00006fa0: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
+00006fb0: 6e73 7461 6e63 6528 6f74 6865 722c 2053  nstance(other, S
+00006fc0: 796d 626f 6c29 2c20 6f74 6865 720a 2020  ymbol), other.  
+00006fd0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00006fe0: 662e 6973 5f74 6572 6d20 3d3d 206f 7468  f.is_term == oth
+00006ff0: 6572 2e69 735f 7465 726d 2061 6e64 2073  er.is_term and s
+00007000: 656c 662e 6e61 6d65 203d 3d20 6f74 6865  elf.name == othe
+00007010: 722e 6e61 6d65 0a0a 2020 2020 6465 6620  r.name..    def 
+00007020: 5f5f 6e65 5f5f 2873 656c 662c 206f 7468  __ne__(self, oth
+00007030: 6572 293a 0a20 2020 2020 2020 2072 6574  er):.        ret
+00007040: 7572 6e20 6e6f 7420 2873 656c 6620 3d3d  urn not (self ==
+00007050: 206f 7468 6572 290a 0a20 2020 2064 6566   other)..    def
+00007060: 205f 5f68 6173 685f 5f28 7365 6c66 293a   __hash__(self):
+00007070: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00007080: 6861 7368 2873 656c 662e 6e61 6d65 290a  hash(self.name).
+00007090: 0a20 2020 2064 6566 205f 5f72 6570 725f  .    def __repr_
+000070a0: 5f28 7365 6c66 293a 0a20 2020 2020 2020  _(self):.       
+000070b0: 2072 6574 7572 6e20 2725 7328 2572 2927   return '%s(%r)'
+000070c0: 2025 2028 7479 7065 2873 656c 6629 2e5f   % (type(self)._
+000070d0: 5f6e 616d 655f 5f2c 2073 656c 662e 6e61  _name__, self.na
+000070e0: 6d65 290a 0a20 2020 2066 756c 6c72 6570  me)..    fullrep
+000070f0: 7220 3d20 7072 6f70 6572 7479 285f 5f72  r = property(__r
+00007100: 6570 725f 5f29 0a0a 2020 2020 6465 6620  epr__)..    def 
+00007110: 7265 6e61 6d65 6428 7365 6c66 2c20 6629  renamed(self, f)
+00007120: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00007130: 2074 7970 6528 7365 6c66 2928 6628 7365   type(self)(f(se
+00007140: 6c66 2e6e 616d 6529 290a 0a0a 636c 6173  lf.name))...clas
+00007150: 7320 5465 726d 696e 616c 2853 796d 626f  s Terminal(Symbo
+00007160: 6c29 3a0a 2020 2020 5f5f 7365 7269 616c  l):.    __serial
+00007170: 697a 655f 6669 656c 6473 5f5f 203d 2027  ize_fields__ = '
+00007180: 6e61 6d65 272c 2027 6669 6c74 6572 5f6f  name', 'filter_o
+00007190: 7574 270a 0a20 2020 2069 735f 7465 726d  ut'..    is_term
+000071a0: 3a20 436c 6173 7356 6172 5b62 6f6f 6c5d  : ClassVar[bool]
+000071b0: 203d 2054 7275 650a 0a20 2020 2064 6566   = True..    def
+000071c0: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+000071d0: 6e61 6d65 2c20 6669 6c74 6572 5f6f 7574  name, filter_out
+000071e0: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+000071f0: 2073 656c 662e 6e61 6d65 203d 206e 616d   self.name = nam
+00007200: 650a 2020 2020 2020 2020 7365 6c66 2e66  e.        self.f
+00007210: 696c 7465 725f 6f75 7420 3d20 6669 6c74  ilter_out = filt
+00007220: 6572 5f6f 7574 0a0a 2020 2020 4070 726f  er_out..    @pro
+00007230: 7065 7274 790a 2020 2020 6465 6620 6675  perty.    def fu
+00007240: 6c6c 7265 7072 2873 656c 6629 3a0a 2020  llrepr(self):.  
+00007250: 2020 2020 2020 7265 7475 726e 2027 2573        return '%s
+00007260: 2825 722c 2025 7229 2720 2520 2874 7970  (%r, %r)' % (typ
+00007270: 6528 7365 6c66 292e 5f5f 6e61 6d65 5f5f  e(self).__name__
+00007280: 2c20 7365 6c66 2e6e 616d 652c 2073 656c  , self.name, sel
+00007290: 662e 6669 6c74 6572 5f6f 7574 290a 0a20  f.filter_out).. 
+000072a0: 2020 2064 6566 2072 656e 616d 6564 2873     def renamed(s
+000072b0: 656c 662c 2066 293a 0a20 2020 2020 2020  elf, f):.       
+000072c0: 2072 6574 7572 6e20 7479 7065 2873 656c   return type(sel
+000072d0: 6629 2866 2873 656c 662e 6e61 6d65 292c  f)(f(self.name),
+000072e0: 2073 656c 662e 6669 6c74 6572 5f6f 7574   self.filter_out
+000072f0: 290a 0a0a 636c 6173 7320 4e6f 6e54 6572  )...class NonTer
+00007300: 6d69 6e61 6c28 5379 6d62 6f6c 293a 0a20  minal(Symbol):. 
+00007310: 2020 205f 5f73 6572 6961 6c69 7a65 5f66     __serialize_f
+00007320: 6965 6c64 735f 5f20 3d20 276e 616d 6527  ields__ = 'name'
+00007330: 2c0a 0a20 2020 2069 735f 7465 726d 3a20  ,..    is_term: 
+00007340: 436c 6173 7356 6172 5b62 6f6f 6c5d 203d  ClassVar[bool] =
+00007350: 2046 616c 7365 0a0a 0a63 6c61 7373 2052   False...class R
+00007360: 756c 654f 7074 696f 6e73 2853 6572 6961  uleOptions(Seria
+00007370: 6c69 7a65 293a 0a20 2020 205f 5f73 6572  lize):.    __ser
+00007380: 6961 6c69 7a65 5f66 6965 6c64 735f 5f20  ialize_fields__ 
+00007390: 3d20 276b 6565 705f 616c 6c5f 746f 6b65  = 'keep_all_toke
+000073a0: 6e73 272c 2027 6578 7061 6e64 3127 2c20  ns', 'expand1', 
+000073b0: 2770 7269 6f72 6974 7927 2c20 2774 656d  'priority', 'tem
+000073c0: 706c 6174 655f 736f 7572 6365 272c 2027  plate_source', '
+000073d0: 656d 7074 795f 696e 6469 6365 7327 0a0a  empty_indices'..
+000073e0: 2020 2020 6b65 6570 5f61 6c6c 5f74 6f6b      keep_all_tok
+000073f0: 656e 733a 2062 6f6f 6c0a 2020 2020 6578  ens: bool.    ex
+00007400: 7061 6e64 313a 2062 6f6f 6c0a 2020 2020  pand1: bool.    
+00007410: 7072 696f 7269 7479 3a20 4f70 7469 6f6e  priority: Option
+00007420: 616c 5b69 6e74 5d0a 2020 2020 7465 6d70  al[int].    temp
+00007430: 6c61 7465 5f73 6f75 7263 653a 204f 7074  late_source: Opt
+00007440: 696f 6e61 6c5b 7374 725d 0a20 2020 2065  ional[str].    e
+00007450: 6d70 7479 5f69 6e64 6963 6573 3a20 5475  mpty_indices: Tu
+00007460: 706c 655b 626f 6f6c 2c20 2e2e 2e5d 0a0a  ple[bool, ...]..
+00007470: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+00007480: 2873 656c 662c 206b 6565 705f 616c 6c5f  (self, keep_all_
+00007490: 746f 6b65 6e73 3a20 626f 6f6c 3d46 616c  tokens: bool=Fal
+000074a0: 7365 2c20 6578 7061 6e64 313a 2062 6f6f  se, expand1: boo
+000074b0: 6c3d 4661 6c73 652c 2070 7269 6f72 6974  l=False, priorit
+000074c0: 793a 204f 7074 696f 6e61 6c5b 696e 745d  y: Optional[int]
+000074d0: 3d4e 6f6e 652c 2074 656d 706c 6174 655f  =None, template_
+000074e0: 736f 7572 6365 3a20 4f70 7469 6f6e 616c  source: Optional
+000074f0: 5b73 7472 5d3d 4e6f 6e65 2c20 656d 7074  [str]=None, empt
+00007500: 795f 696e 6469 6365 733a 2054 7570 6c65  y_indices: Tuple
+00007510: 5b62 6f6f 6c2c 202e 2e2e 5d3d 2829 2920  [bool, ...]=()) 
+00007520: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00007530: 2073 656c 662e 6b65 6570 5f61 6c6c 5f74   self.keep_all_t
+00007540: 6f6b 656e 7320 3d20 6b65 6570 5f61 6c6c  okens = keep_all
+00007550: 5f74 6f6b 656e 730a 2020 2020 2020 2020  _tokens.        
+00007560: 7365 6c66 2e65 7870 616e 6431 203d 2065  self.expand1 = e
+00007570: 7870 616e 6431 0a20 2020 2020 2020 2073  xpand1.        s
+00007580: 656c 662e 7072 696f 7269 7479 203d 2070  elf.priority = p
+00007590: 7269 6f72 6974 790a 2020 2020 2020 2020  riority.        
+000075a0: 7365 6c66 2e74 656d 706c 6174 655f 736f  self.template_so
+000075b0: 7572 6365 203d 2074 656d 706c 6174 655f  urce = template_
+000075c0: 736f 7572 6365 0a20 2020 2020 2020 2073  source.        s
+000075d0: 656c 662e 656d 7074 795f 696e 6469 6365  elf.empty_indice
+000075e0: 7320 3d20 656d 7074 795f 696e 6469 6365  s = empty_indice
+000075f0: 730a 0a20 2020 2064 6566 205f 5f72 6570  s..    def __rep
+00007600: 725f 5f28 7365 6c66 293a 0a20 2020 2020  r__(self):.     
+00007610: 2020 2072 6574 7572 6e20 2752 756c 654f     return 'RuleO
+00007620: 7074 696f 6e73 2825 722c 2025 722c 2025  ptions(%r, %r, %
+00007630: 722c 2025 7229 2720 2520 280a 2020 2020  r, %r)' % (.    
+00007640: 2020 2020 2020 2020 7365 6c66 2e6b 6565          self.kee
+00007650: 705f 616c 6c5f 746f 6b65 6e73 2c0a 2020  p_all_tokens,.  
+00007660: 2020 2020 2020 2020 2020 7365 6c66 2e65            self.e
+00007670: 7870 616e 6431 2c0a 2020 2020 2020 2020  xpand1,.        
+00007680: 2020 2020 7365 6c66 2e70 7269 6f72 6974      self.priorit
+00007690: 792c 0a20 2020 2020 2020 2020 2020 2073  y,.            s
+000076a0: 656c 662e 7465 6d70 6c61 7465 5f73 6f75  elf.template_sou
+000076b0: 7263 650a 2020 2020 2020 2020 290a 0a0a  rce.        )...
+000076c0: 636c 6173 7320 5275 6c65 2853 6572 6961  class Rule(Seria
+000076d0: 6c69 7a65 293a 0a20 2020 2023 2d2d 0a20  lize):.    #--. 
+000076e0: 2020 205f 5f73 6c6f 7473 5f5f 203d 2028     __slots__ = (
+000076f0: 276f 7269 6769 6e27 2c20 2765 7870 616e  'origin', 'expan
+00007700: 7369 6f6e 272c 2027 616c 6961 7327 2c20  sion', 'alias', 
+00007710: 276f 7074 696f 6e73 272c 2027 6f72 6465  'options', 'orde
+00007720: 7227 2c20 275f 6861 7368 2729 0a0a 2020  r', '_hash')..  
+00007730: 2020 5f5f 7365 7269 616c 697a 655f 6669    __serialize_fi
+00007740: 656c 6473 5f5f 203d 2027 6f72 6967 696e  elds__ = 'origin
+00007750: 272c 2027 6578 7061 6e73 696f 6e27 2c20  ', 'expansion', 
+00007760: 276f 7264 6572 272c 2027 616c 6961 7327  'order', 'alias'
+00007770: 2c20 276f 7074 696f 6e73 270a 2020 2020  , 'options'.    
+00007780: 5f5f 7365 7269 616c 697a 655f 6e61 6d65  __serialize_name
+00007790: 7370 6163 655f 5f20 3d20 5465 726d 696e  space__ = Termin
+000077a0: 616c 2c20 4e6f 6e54 6572 6d69 6e61 6c2c  al, NonTerminal,
+000077b0: 2052 756c 654f 7074 696f 6e73 0a0a 2020   RuleOptions..  
+000077c0: 2020 6f72 6967 696e 3a20 4e6f 6e54 6572    origin: NonTer
+000077d0: 6d69 6e61 6c0a 2020 2020 6578 7061 6e73  minal.    expans
+000077e0: 696f 6e3a 2053 6571 7565 6e63 655b 5379  ion: Sequence[Sy
+000077f0: 6d62 6f6c 5d0a 2020 2020 6f72 6465 723a  mbol].    order:
+00007800: 2069 6e74 0a20 2020 2061 6c69 6173 3a20   int.    alias: 
+00007810: 4f70 7469 6f6e 616c 5b73 7472 5d0a 2020  Optional[str].  
+00007820: 2020 6f70 7469 6f6e 733a 2052 756c 654f    options: RuleO
+00007830: 7074 696f 6e73 0a20 2020 205f 6861 7368  ptions.    _hash
+00007840: 3a20 696e 740a 0a20 2020 2064 6566 205f  : int..    def _
+00007850: 5f69 6e69 745f 5f28 7365 6c66 2c20 6f72  _init__(self, or
+00007860: 6967 696e 3a20 4e6f 6e54 6572 6d69 6e61  igin: NonTermina
+00007870: 6c2c 2065 7870 616e 7369 6f6e 3a20 5365  l, expansion: Se
+00007880: 7175 656e 6365 5b53 796d 626f 6c5d 2c0a  quence[Symbol],.
+00007890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000078a0: 206f 7264 6572 3a20 696e 743d 302c 2061   order: int=0, a
+000078b0: 6c69 6173 3a20 4f70 7469 6f6e 616c 5b73  lias: Optional[s
+000078c0: 7472 5d3d 4e6f 6e65 2c20 6f70 7469 6f6e  tr]=None, option
+000078d0: 733a 204f 7074 696f 6e61 6c5b 5275 6c65  s: Optional[Rule
+000078e0: 4f70 7469 6f6e 735d 3d4e 6f6e 6529 3a0a  Options]=None):.
+000078f0: 2020 2020 2020 2020 7365 6c66 2e6f 7269          self.ori
+00007900: 6769 6e20 3d20 6f72 6967 696e 0a20 2020  gin = origin.   
+00007910: 2020 2020 2073 656c 662e 6578 7061 6e73       self.expans
+00007920: 696f 6e20 3d20 6578 7061 6e73 696f 6e0a  ion = expansion.
+00007930: 2020 2020 2020 2020 7365 6c66 2e61 6c69          self.ali
+00007940: 6173 203d 2061 6c69 6173 0a20 2020 2020  as = alias.     
+00007950: 2020 2073 656c 662e 6f72 6465 7220 3d20     self.order = 
+00007960: 6f72 6465 720a 2020 2020 2020 2020 7365  order.        se
+00007970: 6c66 2e6f 7074 696f 6e73 203d 206f 7074  lf.options = opt
+00007980: 696f 6e73 206f 7220 5275 6c65 4f70 7469  ions or RuleOpti
+00007990: 6f6e 7328 290a 2020 2020 2020 2020 7365  ons().        se
+000079a0: 6c66 2e5f 6861 7368 203d 2068 6173 6828  lf._hash = hash(
+000079b0: 2873 656c 662e 6f72 6967 696e 2c20 7475  (self.origin, tu
+000079c0: 706c 6528 7365 6c66 2e65 7870 616e 7369  ple(self.expansi
+000079d0: 6f6e 2929 290a 0a20 2020 2064 6566 205f  on)))..    def _
+000079e0: 6465 7365 7269 616c 697a 6528 7365 6c66  deserialize(self
+000079f0: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+00007a00: 5f68 6173 6820 3d20 6861 7368 2828 7365  _hash = hash((se
+00007a10: 6c66 2e6f 7269 6769 6e2c 2074 7570 6c65  lf.origin, tuple
+00007a20: 2873 656c 662e 6578 7061 6e73 696f 6e29  (self.expansion)
+00007a30: 2929 0a0a 2020 2020 6465 6620 5f5f 7374  ))..    def __st
+00007a40: 725f 5f28 7365 6c66 293a 0a20 2020 2020  r__(self):.     
+00007a50: 2020 2072 6574 7572 6e20 273c 2573 203a     return '<%s :
+00007a60: 2025 733e 2720 2520 2873 656c 662e 6f72   %s>' % (self.or
+00007a70: 6967 696e 2e6e 616d 652c 2027 2027 2e6a  igin.name, ' '.j
+00007a80: 6f69 6e28 782e 6e61 6d65 2066 6f72 2078  oin(x.name for x
+00007a90: 2069 6e20 7365 6c66 2e65 7870 616e 7369   in self.expansi
+00007aa0: 6f6e 2929 0a0a 2020 2020 6465 6620 5f5f  on))..    def __
+00007ab0: 7265 7072 5f5f 2873 656c 6629 3a0a 2020  repr__(self):.  
+00007ac0: 2020 2020 2020 7265 7475 726e 2027 5275        return 'Ru
+00007ad0: 6c65 2825 722c 2025 722c 2025 722c 2025  le(%r, %r, %r, %
+00007ae0: 7229 2720 2520 2873 656c 662e 6f72 6967  r)' % (self.orig
+00007af0: 696e 2c20 7365 6c66 2e65 7870 616e 7369  in, self.expansi
+00007b00: 6f6e 2c20 7365 6c66 2e61 6c69 6173 2c20  on, self.alias, 
+00007b10: 7365 6c66 2e6f 7074 696f 6e73 290a 0a20  self.options).. 
+00007b20: 2020 2064 6566 205f 5f68 6173 685f 5f28     def __hash__(
+00007b30: 7365 6c66 293a 0a20 2020 2020 2020 2072  self):.        r
+00007b40: 6574 7572 6e20 7365 6c66 2e5f 6861 7368  eturn self._hash
+00007b50: 0a0a 2020 2020 6465 6620 5f5f 6571 5f5f  ..    def __eq__
+00007b60: 2873 656c 662c 206f 7468 6572 293a 0a20  (self, other):. 
+00007b70: 2020 2020 2020 2069 6620 6e6f 7420 6973         if not is
+00007b80: 696e 7374 616e 6365 286f 7468 6572 2c20  instance(other, 
+00007b90: 5275 6c65 293a 0a20 2020 2020 2020 2020  Rule):.         
+00007ba0: 2020 2072 6574 7572 6e20 4661 6c73 650a     return False.
+00007bb0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00007bc0: 656c 662e 6f72 6967 696e 203d 3d20 6f74  elf.origin == ot
+00007bd0: 6865 722e 6f72 6967 696e 2061 6e64 2073  her.origin and s
+00007be0: 656c 662e 6578 7061 6e73 696f 6e20 3d3d  elf.expansion ==
+00007bf0: 206f 7468 6572 2e65 7870 616e 7369 6f6e   other.expansion
+00007c00: 0a0a 0a0a 6672 6f6d 2063 6f70 7920 696d  ....from copy im
+00007c10: 706f 7274 2063 6f70 790a 0a74 7279 3a20  port copy..try: 
+00007c20: 2023 230a 0a20 2020 2068 6173 5f69 6e74   ##..    has_int
+00007c30: 6572 6567 756c 6172 203d 2062 6f6f 6c28  eregular = bool(
+00007c40: 696e 7465 7265 6775 6c61 7229 0a65 7863  interegular).exc
+00007c50: 6570 7420 4e61 6d65 4572 726f 723a 0a20  ept NameError:. 
+00007c60: 2020 2068 6173 5f69 6e74 6572 6567 756c     has_interegul
+00007c70: 6172 203d 2046 616c 7365 0a0a 636c 6173  ar = False..clas
+00007c80: 7320 5061 7474 6572 6e28 5365 7269 616c  s Pattern(Serial
+00007c90: 697a 652c 2041 4243 293a 0a20 2020 2023  ize, ABC):.    #
+00007ca0: 2d2d 0a0a 2020 2020 7661 6c75 653a 2073  --..    value: s
+00007cb0: 7472 0a20 2020 2066 6c61 6773 3a20 436f  tr.    flags: Co
+00007cc0: 6c6c 6563 7469 6f6e 5b73 7472 5d0a 2020  llection[str].  
+00007cd0: 2020 7261 773a 204f 7074 696f 6e61 6c5b    raw: Optional[
+00007ce0: 7374 725d 0a20 2020 2074 7970 653a 2043  str].    type: C
+00007cf0: 6c61 7373 5661 725b 7374 725d 0a0a 2020  lassVar[str]..  
+00007d00: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+00007d10: 656c 662c 2076 616c 7565 3a20 7374 722c  elf, value: str,
+00007d20: 2066 6c61 6773 3a20 436f 6c6c 6563 7469   flags: Collecti
+00007d30: 6f6e 5b73 7472 5d20 3d20 2829 2c20 7261  on[str] = (), ra
+00007d40: 773a 204f 7074 696f 6e61 6c5b 7374 725d  w: Optional[str]
+00007d50: 203d 204e 6f6e 6529 202d 3e20 4e6f 6e65   = None) -> None
+00007d60: 3a0a 2020 2020 2020 2020 7365 6c66 2e76  :.        self.v
+00007d70: 616c 7565 203d 2076 616c 7565 0a20 2020  alue = value.   
+00007d80: 2020 2020 2073 656c 662e 666c 6167 7320       self.flags 
+00007d90: 3d20 6672 6f7a 656e 7365 7428 666c 6167  = frozenset(flag
+00007da0: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
+00007db0: 7261 7720 3d20 7261 770a 0a20 2020 2064  raw = raw..    d
+00007dc0: 6566 205f 5f72 6570 725f 5f28 7365 6c66  ef __repr__(self
+00007dd0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00007de0: 6e20 7265 7072 2873 656c 662e 746f 5f72  n repr(self.to_r
+00007df0: 6567 6578 7028 2929 0a0a 2020 2020 2323  egexp())..    ##
+00007e00: 0a0a 2020 2020 6465 6620 5f5f 6861 7368  ..    def __hash
+00007e10: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
+00007e20: 2020 7265 7475 726e 2068 6173 6828 2874    return hash((t
+00007e30: 7970 6528 7365 6c66 292c 2073 656c 662e  ype(self), self.
+00007e40: 7661 6c75 652c 2073 656c 662e 666c 6167  value, self.flag
+00007e50: 7329 290a 0a20 2020 2064 6566 205f 5f65  s))..    def __e
+00007e60: 715f 5f28 7365 6c66 2c20 6f74 6865 7229  q__(self, other)
+00007e70: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00007e80: 2074 7970 6528 7365 6c66 2920 3d3d 2074   type(self) == t
+00007e90: 7970 6528 6f74 6865 7229 2061 6e64 2073  ype(other) and s
+00007ea0: 656c 662e 7661 6c75 6520 3d3d 206f 7468  elf.value == oth
+00007eb0: 6572 2e76 616c 7565 2061 6e64 2073 656c  er.value and sel
+00007ec0: 662e 666c 6167 7320 3d3d 206f 7468 6572  f.flags == other
+00007ed0: 2e66 6c61 6773 0a0a 2020 2020 4061 6273  .flags..    @abs
+00007ee0: 7472 6163 746d 6574 686f 640a 2020 2020  tractmethod.    
+00007ef0: 6465 6620 746f 5f72 6567 6578 7028 7365  def to_regexp(se
+00007f00: 6c66 2920 2d3e 2073 7472 3a0a 2020 2020  lf) -> str:.    
+00007f10: 2020 2020 7261 6973 6520 4e6f 7449 6d70      raise NotImp
+00007f20: 6c65 6d65 6e74 6564 4572 726f 7228 290a  lementedError().
+00007f30: 0a20 2020 2040 7072 6f70 6572 7479 0a20  .    @property. 
+00007f40: 2020 2040 6162 7374 7261 6374 6d65 7468     @abstractmeth
+00007f50: 6f64 0a20 2020 2064 6566 206d 696e 5f77  od.    def min_w
+00007f60: 6964 7468 2873 656c 6629 202d 3e20 696e  idth(self) -> in
+00007f70: 743a 0a20 2020 2020 2020 2072 6169 7365  t:.        raise
+00007f80: 204e 6f74 496d 706c 656d 656e 7465 6445   NotImplementedE
+00007f90: 7272 6f72 2829 0a0a 2020 2020 4070 726f  rror()..    @pro
+00007fa0: 7065 7274 790a 2020 2020 4061 6273 7472  perty.    @abstr
+00007fb0: 6163 746d 6574 686f 640a 2020 2020 6465  actmethod.    de
+00007fc0: 6620 6d61 785f 7769 6474 6828 7365 6c66  f max_width(self
+00007fd0: 2920 2d3e 2069 6e74 3a0a 2020 2020 2020  ) -> int:.      
+00007fe0: 2020 7261 6973 6520 4e6f 7449 6d70 6c65    raise NotImple
+00007ff0: 6d65 6e74 6564 4572 726f 7228 290a 0a20  mentedError().. 
+00008000: 2020 2064 6566 205f 6765 745f 666c 6167     def _get_flag
+00008010: 7328 7365 6c66 2c20 7661 6c75 6529 3a0a  s(self, value):.
+00008020: 2020 2020 2020 2020 666f 7220 6620 696e          for f in
+00008030: 2073 656c 662e 666c 6167 733a 0a20 2020   self.flags:.   
+00008040: 2020 2020 2020 2020 2076 616c 7565 203d           value =
+00008050: 2028 2728 3f25 733a 2573 2927 2025 2028   ('(?%s:%s)' % (
+00008060: 662c 2076 616c 7565 2929 0a20 2020 2020  f, value)).     
+00008070: 2020 2072 6574 7572 6e20 7661 6c75 650a     return value.
+00008080: 0a0a 636c 6173 7320 5061 7474 6572 6e53  ..class PatternS
+00008090: 7472 2850 6174 7465 726e 293a 0a20 2020  tr(Pattern):.   
+000080a0: 205f 5f73 6572 6961 6c69 7a65 5f66 6965   __serialize_fie
+000080b0: 6c64 735f 5f20 3d20 2776 616c 7565 272c  lds__ = 'value',
+000080c0: 2027 666c 6167 7327 2c20 2772 6177 270a   'flags', 'raw'.
+000080d0: 0a20 2020 2074 7970 653a 2043 6c61 7373  .    type: Class
+000080e0: 5661 725b 7374 725d 203d 2022 7374 7222  Var[str] = "str"
+000080f0: 0a0a 2020 2020 6465 6620 746f 5f72 6567  ..    def to_reg
+00008100: 6578 7028 7365 6c66 2920 2d3e 2073 7472  exp(self) -> str
+00008110: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
+00008120: 2073 656c 662e 5f67 6574 5f66 6c61 6773   self._get_flags
+00008130: 2872 652e 6573 6361 7065 2873 656c 662e  (re.escape(self.
+00008140: 7661 6c75 6529 290a 0a20 2020 2040 7072  value))..    @pr
+00008150: 6f70 6572 7479 0a20 2020 2064 6566 206d  operty.    def m
+00008160: 696e 5f77 6964 7468 2873 656c 6629 202d  in_width(self) -
+00008170: 3e20 696e 743a 0a20 2020 2020 2020 2072  > int:.        r
+00008180: 6574 7572 6e20 6c65 6e28 7365 6c66 2e76  eturn len(self.v
+00008190: 616c 7565 290a 0a20 2020 2040 7072 6f70  alue)..    @prop
+000081a0: 6572 7479 0a20 2020 2064 6566 206d 6178  erty.    def max
+000081b0: 5f77 6964 7468 2873 656c 6629 202d 3e20  _width(self) -> 
+000081c0: 696e 743a 0a20 2020 2020 2020 2072 6574  int:.        ret
+000081d0: 7572 6e20 6c65 6e28 7365 6c66 2e76 616c  urn len(self.val
+000081e0: 7565 290a 0a0a 636c 6173 7320 5061 7474  ue)...class Patt
+000081f0: 6572 6e52 4528 5061 7474 6572 6e29 3a0a  ernRE(Pattern):.
+00008200: 2020 2020 5f5f 7365 7269 616c 697a 655f      __serialize_
+00008210: 6669 656c 6473 5f5f 203d 2027 7661 6c75  fields__ = 'valu
+00008220: 6527 2c20 2766 6c61 6773 272c 2027 7261  e', 'flags', 'ra
+00008230: 7727 2c20 275f 7769 6474 6827 0a0a 2020  w', '_width'..  
+00008240: 2020 7479 7065 3a20 436c 6173 7356 6172    type: ClassVar
+00008250: 5b73 7472 5d20 3d20 2272 6522 0a0a 2020  [str] = "re"..  
+00008260: 2020 6465 6620 746f 5f72 6567 6578 7028    def to_regexp(
+00008270: 7365 6c66 2920 2d3e 2073 7472 3a0a 2020  self) -> str:.  
+00008280: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00008290: 662e 5f67 6574 5f66 6c61 6773 2873 656c  f._get_flags(sel
+000082a0: 662e 7661 6c75 6529 0a0a 2020 2020 5f77  f.value)..    _w
+000082b0: 6964 7468 203d 204e 6f6e 650a 2020 2020  idth = None.    
+000082c0: 6465 6620 5f67 6574 5f77 6964 7468 2873  def _get_width(s
+000082d0: 656c 6629 3a0a 2020 2020 2020 2020 6966  elf):.        if
+000082e0: 2073 656c 662e 5f77 6964 7468 2069 7320   self._width is 
+000082f0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
+00008300: 2020 7365 6c66 2e5f 7769 6474 6820 3d20    self._width = 
+00008310: 6765 745f 7265 6765 7870 5f77 6964 7468  get_regexp_width
+00008320: 2873 656c 662e 746f 5f72 6567 6578 7028  (self.to_regexp(
+00008330: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
+00008340: 6e20 7365 6c66 2e5f 7769 6474 680a 0a20  n self._width.. 
+00008350: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
+00008360: 2064 6566 206d 696e 5f77 6964 7468 2873   def min_width(s
+00008370: 656c 6629 202d 3e20 696e 743a 0a20 2020  elf) -> int:.   
+00008380: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+00008390: 2e5f 6765 745f 7769 6474 6828 295b 305d  ._get_width()[0]
+000083a0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+000083b0: 2020 2020 6465 6620 6d61 785f 7769 6474      def max_widt
+000083c0: 6828 7365 6c66 2920 2d3e 2069 6e74 3a0a  h(self) -> int:.
+000083d0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000083e0: 656c 662e 5f67 6574 5f77 6964 7468 2829  elf._get_width()
+000083f0: 5b31 5d0a 0a0a 636c 6173 7320 5465 726d  [1]...class Term
+00008400: 696e 616c 4465 6628 5365 7269 616c 697a  inalDef(Serializ
+00008410: 6529 3a0a 2020 2020 232d 2d0a 2020 2020  e):.    #--.    
+00008420: 5f5f 7365 7269 616c 697a 655f 6669 656c  __serialize_fiel
+00008430: 6473 5f5f 203d 2027 6e61 6d65 272c 2027  ds__ = 'name', '
+00008440: 7061 7474 6572 6e27 2c20 2770 7269 6f72  pattern', 'prior
+00008450: 6974 7927 0a20 2020 205f 5f73 6572 6961  ity'.    __seria
+00008460: 6c69 7a65 5f6e 616d 6573 7061 6365 5f5f  lize_namespace__
+00008470: 203d 2050 6174 7465 726e 5374 722c 2050   = PatternStr, P
+00008480: 6174 7465 726e 5245 0a0a 2020 2020 6e61  atternRE..    na
+00008490: 6d65 3a20 7374 720a 2020 2020 7061 7474  me: str.    patt
+000084a0: 6572 6e3a 2050 6174 7465 726e 0a20 2020  ern: Pattern.   
+000084b0: 2070 7269 6f72 6974 793a 2069 6e74 0a0a   priority: int..
+000084c0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+000084d0: 2873 656c 662c 206e 616d 653a 2073 7472  (self, name: str
+000084e0: 2c20 7061 7474 6572 6e3a 2050 6174 7465  , pattern: Patte
+000084f0: 726e 2c20 7072 696f 7269 7479 3a20 696e  rn, priority: in
+00008500: 7420 3d20 544f 4b45 4e5f 4445 4641 554c  t = TOKEN_DEFAUL
+00008510: 545f 5052 494f 5249 5459 2920 2d3e 204e  T_PRIORITY) -> N
+00008520: 6f6e 653a 0a20 2020 2020 2020 2061 7373  one:.        ass
+00008530: 6572 7420 6973 696e 7374 616e 6365 2870  ert isinstance(p
+00008540: 6174 7465 726e 2c20 5061 7474 6572 6e29  attern, Pattern)
+00008550: 2c20 7061 7474 6572 6e0a 2020 2020 2020  , pattern.      
+00008560: 2020 7365 6c66 2e6e 616d 6520 3d20 6e61    self.name = na
+00008570: 6d65 0a20 2020 2020 2020 2073 656c 662e  me.        self.
+00008580: 7061 7474 6572 6e20 3d20 7061 7474 6572  pattern = patter
+00008590: 6e0a 2020 2020 2020 2020 7365 6c66 2e70  n.        self.p
+000085a0: 7269 6f72 6974 7920 3d20 7072 696f 7269  riority = priori
+000085b0: 7479 0a0a 2020 2020 6465 6620 5f5f 7265  ty..    def __re
+000085c0: 7072 5f5f 2873 656c 6629 3a0a 2020 2020  pr__(self):.    
+000085d0: 2020 2020 7265 7475 726e 2027 2573 2825      return '%s(%
+000085e0: 722c 2025 7229 2720 2520 2874 7970 6528  r, %r)' % (type(
+000085f0: 7365 6c66 292e 5f5f 6e61 6d65 5f5f 2c20  self).__name__, 
+00008600: 7365 6c66 2e6e 616d 652c 2073 656c 662e  self.name, self.
+00008610: 7061 7474 6572 6e29 0a0a 2020 2020 6465  pattern)..    de
+00008620: 6620 7573 6572 5f72 6570 7228 7365 6c66  f user_repr(self
+00008630: 2920 2d3e 2073 7472 3a0a 2020 2020 2020  ) -> str:.      
+00008640: 2020 6966 2073 656c 662e 6e61 6d65 2e73    if self.name.s
+00008650: 7461 7274 7377 6974 6828 275f 5f27 293a  tartswith('__'):
+00008660: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
+00008670: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00008680: 7474 6572 6e2e 7261 7720 6f72 2073 656c  ttern.raw or sel
+00008690: 662e 6e61 6d65 0a20 2020 2020 2020 2065  f.name.        e
+000086a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+000086b0: 2072 6574 7572 6e20 7365 6c66 2e6e 616d   return self.nam
+000086c0: 650a 0a5f 5420 3d20 5479 7065 5661 7228  e.._T = TypeVar(
+000086d0: 275f 5427 2c20 626f 756e 643d 2254 6f6b  '_T', bound="Tok
+000086e0: 656e 2229 0a0a 636c 6173 7320 546f 6b65  en")..class Toke
+000086f0: 6e28 7374 7229 3a0a 2020 2020 232d 2d0a  n(str):.    #--.
+00008700: 2020 2020 5f5f 736c 6f74 735f 5f20 3d20      __slots__ = 
+00008710: 2827 7479 7065 272c 2027 7374 6172 745f  ('type', 'start_
+00008720: 706f 7327 2c20 2776 616c 7565 272c 2027  pos', 'value', '
+00008730: 6c69 6e65 272c 2027 636f 6c75 6d6e 272c  line', 'column',
+00008740: 2027 656e 645f 6c69 6e65 272c 2027 656e   'end_line', 'en
+00008750: 645f 636f 6c75 6d6e 272c 2027 656e 645f  d_column', 'end_
+00008760: 706f 7327 290a 0a20 2020 205f 5f6d 6174  pos')..    __mat
+00008770: 6368 5f61 7267 735f 5f20 3d20 2827 7479  ch_args__ = ('ty
+00008780: 7065 272c 2027 7661 6c75 6527 290a 0a20  pe', 'value').. 
+00008790: 2020 2074 7970 653a 2073 7472 0a20 2020     type: str.   
+000087a0: 2073 7461 7274 5f70 6f73 3a20 4f70 7469   start_pos: Opti
+000087b0: 6f6e 616c 5b69 6e74 5d0a 2020 2020 7661  onal[int].    va
+000087c0: 6c75 653a 2041 6e79 0a20 2020 206c 696e  lue: Any.    lin
+000087d0: 653a 204f 7074 696f 6e61 6c5b 696e 745d  e: Optional[int]
+000087e0: 0a20 2020 2063 6f6c 756d 6e3a 204f 7074  .    column: Opt
+000087f0: 696f 6e61 6c5b 696e 745d 0a20 2020 2065  ional[int].    e
+00008800: 6e64 5f6c 696e 653a 204f 7074 696f 6e61  nd_line: Optiona
+00008810: 6c5b 696e 745d 0a20 2020 2065 6e64 5f63  l[int].    end_c
+00008820: 6f6c 756d 6e3a 204f 7074 696f 6e61 6c5b  olumn: Optional[
+00008830: 696e 745d 0a20 2020 2065 6e64 5f70 6f73  int].    end_pos
+00008840: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d0a  : Optional[int].
+00008850: 0a0a 2020 2020 406f 7665 726c 6f61 640a  ..    @overload.
+00008860: 2020 2020 6465 6620 5f5f 6e65 775f 5f28      def __new__(
+00008870: 0a20 2020 2020 2020 2020 2020 2063 6c73  .            cls
+00008880: 2c0a 2020 2020 2020 2020 2020 2020 7479  ,.            ty
+00008890: 7065 3a20 7374 722c 0a20 2020 2020 2020  pe: str,.       
+000088a0: 2020 2020 2076 616c 7565 3a20 416e 792c       value: Any,
+000088b0: 0a20 2020 2020 2020 2020 2020 2073 7461  .            sta
+000088c0: 7274 5f70 6f73 3a20 4f70 7469 6f6e 616c  rt_pos: Optional
+000088d0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a 2020  [int] = None,.  
+000088e0: 2020 2020 2020 2020 2020 6c69 6e65 3a20            line: 
+000088f0: 4f70 7469 6f6e 616c 5b69 6e74 5d20 3d20  Optional[int] = 
+00008900: 4e6f 6e65 2c0a 2020 2020 2020 2020 2020  None,.          
+00008910: 2020 636f 6c75 6d6e 3a20 4f70 7469 6f6e    column: Option
+00008920: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a  al[int] = None,.
+00008930: 2020 2020 2020 2020 2020 2020 656e 645f              end_
+00008940: 6c69 6e65 3a20 4f70 7469 6f6e 616c 5b69  line: Optional[i
+00008950: 6e74 5d20 3d20 4e6f 6e65 2c0a 2020 2020  nt] = None,.    
+00008960: 2020 2020 2020 2020 656e 645f 636f 6c75          end_colu
+00008970: 6d6e 3a20 4f70 7469 6f6e 616c 5b69 6e74  mn: Optional[int
+00008980: 5d20 3d20 4e6f 6e65 2c0a 2020 2020 2020  ] = None,.      
+00008990: 2020 2020 2020 656e 645f 706f 733a 204f        end_pos: O
+000089a0: 7074 696f 6e61 6c5b 696e 745d 203d 204e  ptional[int] = N
+000089b0: 6f6e 650a 2020 2020 2920 2d3e 2027 546f  one.    ) -> 'To
+000089c0: 6b65 6e27 3a0a 2020 2020 2020 2020 2e2e  ken':.        ..
+000089d0: 2e0a 0a20 2020 2040 6f76 6572 6c6f 6164  ...    @overload
+000089e0: 0a20 2020 2064 6566 205f 5f6e 6577 5f5f  .    def __new__
+000089f0: 280a 2020 2020 2020 2020 2020 2020 636c  (.            cl
+00008a00: 732c 0a20 2020 2020 2020 2020 2020 2074  s,.            t
+00008a10: 7970 655f 3a20 7374 722c 0a20 2020 2020  ype_: str,.     
+00008a20: 2020 2020 2020 2076 616c 7565 3a20 416e         value: An
+00008a30: 792c 0a20 2020 2020 2020 2020 2020 2073  y,.            s
+00008a40: 7461 7274 5f70 6f73 3a20 4f70 7469 6f6e  tart_pos: Option
+00008a50: 616c 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a  al[int] = None,.
+00008a60: 2020 2020 2020 2020 2020 2020 6c69 6e65              line
+00008a70: 3a20 4f70 7469 6f6e 616c 5b69 6e74 5d20  : Optional[int] 
+00008a80: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
+00008a90: 2020 2020 636f 6c75 6d6e 3a20 4f70 7469      column: Opti
+00008aa0: 6f6e 616c 5b69 6e74 5d20 3d20 4e6f 6e65  onal[int] = None
+00008ab0: 2c0a 2020 2020 2020 2020 2020 2020 656e  ,.            en
+00008ac0: 645f 6c69 6e65 3a20 4f70 7469 6f6e 616c  d_line: Optional
+00008ad0: 5b69 6e74 5d20 3d20 4e6f 6e65 2c0a 2020  [int] = None,.  
+00008ae0: 2020 2020 2020 2020 2020 656e 645f 636f            end_co
+00008af0: 6c75 6d6e 3a20 4f70 7469 6f6e 616c 5b69  lumn: Optional[i
+00008b00: 6e74 5d20 3d20 4e6f 6e65 2c0a 2020 2020  nt] = None,.    
+00008b10: 2020 2020 2020 2020 656e 645f 706f 733a          end_pos:
+00008b20: 204f 7074 696f 6e61 6c5b 696e 745d 203d   Optional[int] =
+00008b30: 204e 6f6e 650a 2020 2020 2920 2d3e 2027   None.    ) -> '
+00008b40: 546f 6b65 6e27 3a20 2020 2020 2020 202e  Token':        .
+00008b50: 2e2e 0a0a 2020 2020 6465 6620 5f5f 6e65  ....    def __ne
+00008b60: 775f 5f28 636c 732c 202a 6172 6773 2c20  w__(cls, *args, 
+00008b70: 2a2a 6b77 6172 6773 293a 0a20 2020 2020  **kwargs):.     
+00008b80: 2020 2069 6620 2274 7970 655f 2220 696e     if "type_" in
+00008b90: 206b 7761 7267 733a 0a20 2020 2020 2020   kwargs:.       
+00008ba0: 2020 2020 2077 6172 6e69 6e67 732e 7761       warnings.wa
+00008bb0: 726e 2822 6074 7970 655f 6020 6973 2064  rn("`type_` is d
+00008bc0: 6570 7265 6361 7465 6420 7573 6520 6074  eprecated use `t
+00008bd0: 7970 6560 2069 6e73 7465 6164 222c 2044  ype` instead", D
+00008be0: 6570 7265 6361 7469 6f6e 5761 726e 696e  eprecationWarnin
+00008bf0: 6729 0a0a 2020 2020 2020 2020 2020 2020  g)..            
+00008c00: 6966 2022 7479 7065 2220 696e 206b 7761  if "type" in kwa
+00008c10: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+00008c20: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
+00008c30: 7272 6f72 2822 4572 726f 723a 2075 7369  rror("Error: usi
+00008c40: 6e67 2062 6f74 6820 2774 7970 6527 2061  ng both 'type' a
+00008c50: 6e64 2074 6865 2064 6570 7265 6361 7465  nd the deprecate
+00008c60: 6420 2774 7970 655f 2720 6173 2061 7267  d 'type_' as arg
+00008c70: 756d 656e 7473 2e22 290a 2020 2020 2020  uments.").      
+00008c80: 2020 2020 2020 6b77 6172 6773 5b22 7479        kwargs["ty
+00008c90: 7065 225d 203d 206b 7761 7267 732e 706f  pe"] = kwargs.po
+00008ca0: 7028 2274 7970 655f 2229 0a0a 2020 2020  p("type_")..    
+00008cb0: 2020 2020 7265 7475 726e 2063 6c73 2e5f      return cls._
+00008cc0: 6675 7475 7265 5f6e 6577 282a 6172 6773  future_new(*args
+00008cd0: 2c20 2a2a 6b77 6172 6773 290a 0a0a 2020  , **kwargs)...  
+00008ce0: 2020 4063 6c61 7373 6d65 7468 6f64 0a20    @classmethod. 
+00008cf0: 2020 2064 6566 205f 6675 7475 7265 5f6e     def _future_n
+00008d00: 6577 2863 6c73 2c20 7479 7065 2c20 7661  ew(cls, type, va
+00008d10: 6c75 652c 2073 7461 7274 5f70 6f73 3d4e  lue, start_pos=N
+00008d20: 6f6e 652c 206c 696e 653d 4e6f 6e65 2c20  one, line=None, 
+00008d30: 636f 6c75 6d6e 3d4e 6f6e 652c 2065 6e64  column=None, end
+00008d40: 5f6c 696e 653d 4e6f 6e65 2c20 656e 645f  _line=None, end_
+00008d50: 636f 6c75 6d6e 3d4e 6f6e 652c 2065 6e64  column=None, end
+00008d60: 5f70 6f73 3d4e 6f6e 6529 3a0a 2020 2020  _pos=None):.    
+00008d70: 2020 2020 696e 7374 203d 2073 7570 6572      inst = super
+00008d80: 2854 6f6b 656e 2c20 636c 7329 2e5f 5f6e  (Token, cls).__n
+00008d90: 6577 5f5f 2863 6c73 2c20 7661 6c75 6529  ew__(cls, value)
+00008da0: 0a0a 2020 2020 2020 2020 696e 7374 2e74  ..        inst.t
+00008db0: 7970 6520 3d20 7479 7065 0a20 2020 2020  ype = type.     
+00008dc0: 2020 2069 6e73 742e 7374 6172 745f 706f     inst.start_po
+00008dd0: 7320 3d20 7374 6172 745f 706f 730a 2020  s = start_pos.  
+00008de0: 2020 2020 2020 696e 7374 2e76 616c 7565        inst.value
+00008df0: 203d 2076 616c 7565 0a20 2020 2020 2020   = value.       
+00008e00: 2069 6e73 742e 6c69 6e65 203d 206c 696e   inst.line = lin
+00008e10: 650a 2020 2020 2020 2020 696e 7374 2e63  e.        inst.c
+00008e20: 6f6c 756d 6e20 3d20 636f 6c75 6d6e 0a20  olumn = column. 
+00008e30: 2020 2020 2020 2069 6e73 742e 656e 645f         inst.end_
+00008e40: 6c69 6e65 203d 2065 6e64 5f6c 696e 650a  line = end_line.
+00008e50: 2020 2020 2020 2020 696e 7374 2e65 6e64          inst.end
+00008e60: 5f63 6f6c 756d 6e20 3d20 656e 645f 636f  _column = end_co
+00008e70: 6c75 6d6e 0a20 2020 2020 2020 2069 6e73  lumn.        ins
+00008e80: 742e 656e 645f 706f 7320 3d20 656e 645f  t.end_pos = end_
+00008e90: 706f 730a 2020 2020 2020 2020 7265 7475  pos.        retu
+00008ea0: 726e 2069 6e73 740a 0a20 2020 2040 6f76  rn inst..    @ov
+00008eb0: 6572 6c6f 6164 0a20 2020 2064 6566 2075  erload.    def u
+00008ec0: 7064 6174 6528 7365 6c66 2c20 7479 7065  pdate(self, type
+00008ed0: 3a20 4f70 7469 6f6e 616c 5b73 7472 5d20  : Optional[str] 
+00008ee0: 3d20 4e6f 6e65 2c20 7661 6c75 653a 204f  = None, value: O
+00008ef0: 7074 696f 6e61 6c5b 416e 795d 203d 204e  ptional[Any] = N
+00008f00: 6f6e 6529 202d 3e20 2754 6f6b 656e 273a  one) -> 'Token':
+00008f10: 0a20 2020 2020 2020 202e 2e2e 0a0a 2020  .        .....  
+00008f20: 2020 406f 7665 726c 6f61 640a 2020 2020    @overload.    
+00008f30: 6465 6620 7570 6461 7465 2873 656c 662c  def update(self,
+00008f40: 2074 7970 655f 3a20 4f70 7469 6f6e 616c   type_: Optional
+00008f50: 5b73 7472 5d20 3d20 4e6f 6e65 2c20 7661  [str] = None, va
+00008f60: 6c75 653a 204f 7074 696f 6e61 6c5b 416e  lue: Optional[An
+00008f70: 795d 203d 204e 6f6e 6529 202d 3e20 2754  y] = None) -> 'T
+00008f80: 6f6b 656e 273a 0a20 2020 2020 2020 202e  oken':.        .
+00008f90: 2e2e 0a0a 2020 2020 6465 6620 7570 6461  ....    def upda
+00008fa0: 7465 2873 656c 662c 202a 6172 6773 2c20  te(self, *args, 
+00008fb0: 2a2a 6b77 6172 6773 293a 0a20 2020 2020  **kwargs):.     
+00008fc0: 2020 2069 6620 2274 7970 655f 2220 696e     if "type_" in
+00008fd0: 206b 7761 7267 733a 0a20 2020 2020 2020   kwargs:.       
+00008fe0: 2020 2020 2077 6172 6e69 6e67 732e 7761       warnings.wa
+00008ff0: 726e 2822 6074 7970 655f 6020 6973 2064  rn("`type_` is d
+00009000: 6570 7265 6361 7465 6420 7573 6520 6074  eprecated use `t
+00009010: 7970 6560 2069 6e73 7465 6164 222c 2044  ype` instead", D
+00009020: 6570 7265 6361 7469 6f6e 5761 726e 696e  eprecationWarnin
+00009030: 6729 0a0a 2020 2020 2020 2020 2020 2020  g)..            
+00009040: 6966 2022 7479 7065 2220 696e 206b 7761  if "type" in kwa
+00009050: 7267 733a 0a20 2020 2020 2020 2020 2020  rgs:.           
+00009060: 2020 2020 2072 6169 7365 2054 7970 6545       raise TypeE
+00009070: 7272 6f72 2822 4572 726f 723a 2075 7369  rror("Error: usi
+00009080: 6e67 2062 6f74 6820 2774 7970 6527 2061  ng both 'type' a
+00009090: 6e64 2074 6865 2064 6570 7265 6361 7465  nd the deprecate
+000090a0: 6420 2774 7970 655f 2720 6173 2061 7267  d 'type_' as arg
+000090b0: 756d 656e 7473 2e22 290a 2020 2020 2020  uments.").      
+000090c0: 2020 2020 2020 6b77 6172 6773 5b22 7479        kwargs["ty
+000090d0: 7065 225d 203d 206b 7761 7267 732e 706f  pe"] = kwargs.po
+000090e0: 7028 2274 7970 655f 2229 0a0a 2020 2020  p("type_")..    
+000090f0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00009100: 5f66 7574 7572 655f 7570 6461 7465 282a  _future_update(*
+00009110: 6172 6773 2c20 2a2a 6b77 6172 6773 290a  args, **kwargs).
+00009120: 0a20 2020 2064 6566 205f 6675 7475 7265  .    def _future
+00009130: 5f75 7064 6174 6528 7365 6c66 2c20 7479  _update(self, ty
+00009140: 7065 3a20 4f70 7469 6f6e 616c 5b73 7472  pe: Optional[str
+00009150: 5d20 3d20 4e6f 6e65 2c20 7661 6c75 653a  ] = None, value:
+00009160: 204f 7074 696f 6e61 6c5b 416e 795d 203d   Optional[Any] =
+00009170: 204e 6f6e 6529 202d 3e20 2754 6f6b 656e   None) -> 'Token
+00009180: 273a 0a20 2020 2020 2020 2072 6574 7572  ':.        retur
+00009190: 6e20 546f 6b65 6e2e 6e65 775f 626f 7272  n Token.new_borr
+000091a0: 6f77 5f70 6f73 280a 2020 2020 2020 2020  ow_pos(.        
+000091b0: 2020 2020 7479 7065 2069 6620 7479 7065      type if type
+000091c0: 2069 7320 6e6f 7420 4e6f 6e65 2065 6c73   is not None els
+000091d0: 6520 7365 6c66 2e74 7970 652c 0a20 2020  e self.type,.   
+000091e0: 2020 2020 2020 2020 2076 616c 7565 2069           value i
+000091f0: 6620 7661 6c75 6520 6973 206e 6f74 204e  f value is not N
+00009200: 6f6e 6520 656c 7365 2073 656c 662e 7661  one else self.va
+00009210: 6c75 652c 0a20 2020 2020 2020 2020 2020  lue,.           
+00009220: 2073 656c 660a 2020 2020 2020 2020 290a   self.        ).
+00009230: 0a20 2020 2040 636c 6173 736d 6574 686f  .    @classmetho
+00009240: 640a 2020 2020 6465 6620 6e65 775f 626f  d.    def new_bo
+00009250: 7272 6f77 5f70 6f73 2863 6c73 3a20 5479  rrow_pos(cls: Ty
+00009260: 7065 5b5f 545d 2c20 7479 7065 5f3a 2073  pe[_T], type_: s
+00009270: 7472 2c20 7661 6c75 653a 2041 6e79 2c20  tr, value: Any, 
+00009280: 626f 7272 6f77 5f74 3a20 2754 6f6b 656e  borrow_t: 'Token
+00009290: 2729 202d 3e20 5f54 3a0a 2020 2020 2020  ') -> _T:.      
+000092a0: 2020 7265 7475 726e 2063 6c73 2874 7970    return cls(typ
+000092b0: 655f 2c20 7661 6c75 652c 2062 6f72 726f  e_, value, borro
+000092c0: 775f 742e 7374 6172 745f 706f 732c 2062  w_t.start_pos, b
+000092d0: 6f72 726f 775f 742e 6c69 6e65 2c20 626f  orrow_t.line, bo
+000092e0: 7272 6f77 5f74 2e63 6f6c 756d 6e2c 2062  rrow_t.column, b
+000092f0: 6f72 726f 775f 742e 656e 645f 6c69 6e65  orrow_t.end_line
+00009300: 2c20 626f 7272 6f77 5f74 2e65 6e64 5f63  , borrow_t.end_c
+00009310: 6f6c 756d 6e2c 2062 6f72 726f 775f 742e  olumn, borrow_t.
+00009320: 656e 645f 706f 7329 0a0a 2020 2020 6465  end_pos)..    de
+00009330: 6620 5f5f 7265 6475 6365 5f5f 2873 656c  f __reduce__(sel
+00009340: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+00009350: 726e 2028 7365 6c66 2e5f 5f63 6c61 7373  rn (self.__class
+00009360: 5f5f 2c20 2873 656c 662e 7479 7065 2c20  __, (self.type, 
+00009370: 7365 6c66 2e76 616c 7565 2c20 7365 6c66  self.value, self
+00009380: 2e73 7461 7274 5f70 6f73 2c20 7365 6c66  .start_pos, self
+00009390: 2e6c 696e 652c 2073 656c 662e 636f 6c75  .line, self.colu
+000093a0: 6d6e 2929 0a0a 2020 2020 6465 6620 5f5f  mn))..    def __
+000093b0: 7265 7072 5f5f 2873 656c 6629 3a0a 2020  repr__(self):.  
+000093c0: 2020 2020 2020 7265 7475 726e 2027 546f        return 'To
+000093d0: 6b65 6e28 2572 2c20 2572 2927 2025 2028  ken(%r, %r)' % (
+000093e0: 7365 6c66 2e74 7970 652c 2073 656c 662e  self.type, self.
+000093f0: 7661 6c75 6529 0a0a 2020 2020 6465 6620  value)..    def 
+00009400: 5f5f 6465 6570 636f 7079 5f5f 2873 656c  __deepcopy__(sel
+00009410: 662c 206d 656d 6f29 3a0a 2020 2020 2020  f, memo):.      
+00009420: 2020 7265 7475 726e 2054 6f6b 656e 2873    return Token(s
+00009430: 656c 662e 7479 7065 2c20 7365 6c66 2e76  elf.type, self.v
+00009440: 616c 7565 2c20 7365 6c66 2e73 7461 7274  alue, self.start
+00009450: 5f70 6f73 2c20 7365 6c66 2e6c 696e 652c  _pos, self.line,
+00009460: 2073 656c 662e 636f 6c75 6d6e 290a 0a20   self.column).. 
+00009470: 2020 2064 6566 205f 5f65 715f 5f28 7365     def __eq__(se
+00009480: 6c66 2c20 6f74 6865 7229 3a0a 2020 2020  lf, other):.    
+00009490: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
+000094a0: 6528 6f74 6865 722c 2054 6f6b 656e 2920  e(other, Token) 
+000094b0: 616e 6420 7365 6c66 2e74 7970 6520 213d  and self.type !=
+000094c0: 206f 7468 6572 2e74 7970 653a 0a20 2020   other.type:.   
+000094d0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000094e0: 4661 6c73 650a 0a20 2020 2020 2020 2072  False..        r
+000094f0: 6574 7572 6e20 7374 722e 5f5f 6571 5f5f  eturn str.__eq__
+00009500: 2873 656c 662c 206f 7468 6572 290a 0a20  (self, other).. 
+00009510: 2020 205f 5f68 6173 685f 5f20 3d20 7374     __hash__ = st
+00009520: 722e 5f5f 6861 7368 5f5f 0a0a 0a63 6c61  r.__hash__...cla
+00009530: 7373 204c 696e 6543 6f75 6e74 6572 3a0a  ss LineCounter:.
+00009540: 2020 2020 232d 2d0a 0a20 2020 205f 5f73      #--..    __s
+00009550: 6c6f 7473 5f5f 203d 2027 6368 6172 5f70  lots__ = 'char_p
+00009560: 6f73 272c 2027 6c69 6e65 272c 2027 636f  os', 'line', 'co
+00009570: 6c75 6d6e 272c 2027 6c69 6e65 5f73 7461  lumn', 'line_sta
+00009580: 7274 5f70 6f73 272c 2027 6e65 776c 696e  rt_pos', 'newlin
+00009590: 655f 6368 6172 270a 0a20 2020 2064 6566  e_char'..    def
+000095a0: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+000095b0: 6e65 776c 696e 655f 6368 6172 293a 0a20  newline_char):. 
+000095c0: 2020 2020 2020 2073 656c 662e 6e65 776c         self.newl
+000095d0: 696e 655f 6368 6172 203d 206e 6577 6c69  ine_char = newli
+000095e0: 6e65 5f63 6861 720a 2020 2020 2020 2020  ne_char.        
+000095f0: 7365 6c66 2e63 6861 725f 706f 7320 3d20  self.char_pos = 
+00009600: 300a 2020 2020 2020 2020 7365 6c66 2e6c  0.        self.l
+00009610: 696e 6520 3d20 310a 2020 2020 2020 2020  ine = 1.        
+00009620: 7365 6c66 2e63 6f6c 756d 6e20 3d20 310a  self.column = 1.
+00009630: 2020 2020 2020 2020 7365 6c66 2e6c 696e          self.lin
+00009640: 655f 7374 6172 745f 706f 7320 3d20 300a  e_start_pos = 0.
+00009650: 0a20 2020 2064 6566 205f 5f65 715f 5f28  .    def __eq__(
+00009660: 7365 6c66 2c20 6f74 6865 7229 3a0a 2020  self, other):.  
+00009670: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+00009680: 6e73 7461 6e63 6528 6f74 6865 722c 204c  nstance(other, L
+00009690: 696e 6543 6f75 6e74 6572 293a 0a20 2020  ineCounter):.   
+000096a0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
+000096b0: 4e6f 7449 6d70 6c65 6d65 6e74 6564 0a0a  NotImplemented..
+000096c0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+000096d0: 656c 662e 6368 6172 5f70 6f73 203d 3d20  elf.char_pos == 
+000096e0: 6f74 6865 722e 6368 6172 5f70 6f73 2061  other.char_pos a
+000096f0: 6e64 2073 656c 662e 6e65 776c 696e 655f  nd self.newline_
+00009700: 6368 6172 203d 3d20 6f74 6865 722e 6e65  char == other.ne
+00009710: 776c 696e 655f 6368 6172 0a0a 2020 2020  wline_char..    
+00009720: 6465 6620 6665 6564 2873 656c 662c 2074  def feed(self, t
+00009730: 6f6b 656e 3a20 546f 6b65 6e2c 2074 6573  oken: Token, tes
+00009740: 745f 6e65 776c 696e 653d 5472 7565 293a  t_newline=True):
+00009750: 0a20 2020 2020 2020 2023 2d2d 0a20 2020  .        #--.   
+00009760: 2020 2020 2069 6620 7465 7374 5f6e 6577       if test_new
+00009770: 6c69 6e65 3a0a 2020 2020 2020 2020 2020  line:.          
+00009780: 2020 6e65 776c 696e 6573 203d 2074 6f6b    newlines = tok
+00009790: 656e 2e63 6f75 6e74 2873 656c 662e 6e65  en.count(self.ne
+000097a0: 776c 696e 655f 6368 6172 290a 2020 2020  wline_char).    
+000097b0: 2020 2020 2020 2020 6966 206e 6577 6c69          if newli
+000097c0: 6e65 733a 0a20 2020 2020 2020 2020 2020  nes:.           
+000097d0: 2020 2020 2073 656c 662e 6c69 6e65 202b       self.line +
+000097e0: 3d20 6e65 776c 696e 6573 0a20 2020 2020  = newlines.     
+000097f0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00009800: 6c69 6e65 5f73 7461 7274 5f70 6f73 203d  line_start_pos =
+00009810: 2073 656c 662e 6368 6172 5f70 6f73 202b   self.char_pos +
+00009820: 2074 6f6b 656e 2e72 696e 6465 7828 7365   token.rindex(se
+00009830: 6c66 2e6e 6577 6c69 6e65 5f63 6861 7229  lf.newline_char)
+00009840: 202b 2031 0a0a 2020 2020 2020 2020 7365   + 1..        se
+00009850: 6c66 2e63 6861 725f 706f 7320 2b3d 206c  lf.char_pos += l
+00009860: 656e 2874 6f6b 656e 290a 2020 2020 2020  en(token).      
+00009870: 2020 7365 6c66 2e63 6f6c 756d 6e20 3d20    self.column = 
+00009880: 7365 6c66 2e63 6861 725f 706f 7320 2d20  self.char_pos - 
+00009890: 7365 6c66 2e6c 696e 655f 7374 6172 745f  self.line_start_
+000098a0: 706f 7320 2b20 310a 0a0a 636c 6173 7320  pos + 1...class 
+000098b0: 556e 6c65 7373 4361 6c6c 6261 636b 3a0a  UnlessCallback:.
+000098c0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
+000098d0: 2873 656c 662c 2073 6361 6e6e 6572 293a  (self, scanner):
+000098e0: 0a20 2020 2020 2020 2073 656c 662e 7363  .        self.sc
+000098f0: 616e 6e65 7220 3d20 7363 616e 6e65 720a  anner = scanner.
+00009900: 0a20 2020 2064 6566 205f 5f63 616c 6c5f  .    def __call_
+00009910: 5f28 7365 6c66 2c20 7429 3a0a 2020 2020  _(self, t):.    
+00009920: 2020 2020 7265 7320 3d20 7365 6c66 2e73      res = self.s
+00009930: 6361 6e6e 6572 2e6d 6174 6368 2874 2e76  canner.match(t.v
+00009940: 616c 7565 2c20 3029 0a20 2020 2020 2020  alue, 0).       
+00009950: 2069 6620 7265 733a 0a20 2020 2020 2020   if res:.       
+00009960: 2020 2020 205f 7661 6c75 652c 2074 2e74       _value, t.t
+00009970: 7970 6520 3d20 7265 730a 2020 2020 2020  ype = res.      
+00009980: 2020 7265 7475 726e 2074 0a0a 0a63 6c61    return t...cla
+00009990: 7373 2043 616c 6c43 6861 696e 3a0a 2020  ss CallChain:.  
+000099a0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+000099b0: 656c 662c 2063 616c 6c62 6163 6b31 2c20  elf, callback1, 
+000099c0: 6361 6c6c 6261 636b 322c 2063 6f6e 6429  callback2, cond)
+000099d0: 3a0a 2020 2020 2020 2020 7365 6c66 2e63  :.        self.c
+000099e0: 616c 6c62 6163 6b31 203d 2063 616c 6c62  allback1 = callb
+000099f0: 6163 6b31 0a20 2020 2020 2020 2073 656c  ack1.        sel
+00009a00: 662e 6361 6c6c 6261 636b 3220 3d20 6361  f.callback2 = ca
+00009a10: 6c6c 6261 636b 320a 2020 2020 2020 2020  llback2.        
+00009a20: 7365 6c66 2e63 6f6e 6420 3d20 636f 6e64  self.cond = cond
+00009a30: 0a0a 2020 2020 6465 6620 5f5f 6361 6c6c  ..    def __call
+00009a40: 5f5f 2873 656c 662c 2074 293a 0a20 2020  __(self, t):.   
+00009a50: 2020 2020 2074 3220 3d20 7365 6c66 2e63       t2 = self.c
+00009a60: 616c 6c62 6163 6b31 2874 290a 2020 2020  allback1(t).    
+00009a70: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00009a80: 6361 6c6c 6261 636b 3228 7429 2069 6620  callback2(t) if 
+00009a90: 7365 6c66 2e63 6f6e 6428 7432 2920 656c  self.cond(t2) el
+00009aa0: 7365 2074 320a 0a0a 6465 6620 5f67 6574  se t2...def _get
+00009ab0: 5f6d 6174 6368 2872 655f 2c20 7265 6765  _match(re_, rege
+00009ac0: 7870 2c20 732c 2066 6c61 6773 293a 0a20  xp, s, flags):. 
+00009ad0: 2020 206d 203d 2072 655f 2e6d 6174 6368     m = re_.match
+00009ae0: 2872 6567 6578 702c 2073 2c20 666c 6167  (regexp, s, flag
+00009af0: 7329 0a20 2020 2069 6620 6d3a 0a20 2020  s).    if m:.   
+00009b00: 2020 2020 2072 6574 7572 6e20 6d2e 6772       return m.gr
+00009b10: 6f75 7028 3029 0a0a 6465 6620 5f63 7265  oup(0)..def _cre
+00009b20: 6174 655f 756e 6c65 7373 2874 6572 6d69  ate_unless(termi
+00009b30: 6e61 6c73 2c20 675f 7265 6765 785f 666c  nals, g_regex_fl
+00009b40: 6167 732c 2072 655f 2c20 7573 655f 6279  ags, re_, use_by
+00009b50: 7465 7329 3a0a 2020 2020 746f 6b65 6e73  tes):.    tokens
+00009b60: 5f62 795f 7479 7065 203d 2063 6c61 7373  _by_type = class
+00009b70: 6966 7928 7465 726d 696e 616c 732c 206c  ify(terminals, l
+00009b80: 616d 6264 6120 743a 2074 7970 6528 742e  ambda t: type(t.
+00009b90: 7061 7474 6572 6e29 290a 2020 2020 6173  pattern)).    as
+00009ba0: 7365 7274 206c 656e 2874 6f6b 656e 735f  sert len(tokens_
+00009bb0: 6279 5f74 7970 6529 203c 3d20 322c 2074  by_type) <= 2, t
+00009bc0: 6f6b 656e 735f 6279 5f74 7970 652e 6b65  okens_by_type.ke
+00009bd0: 7973 2829 0a20 2020 2065 6d62 6564 6465  ys().    embedde
+00009be0: 645f 7374 7273 203d 2073 6574 2829 0a20  d_strs = set(). 
+00009bf0: 2020 2063 616c 6c62 6163 6b20 3d20 7b7d     callback = {}
+00009c00: 0a20 2020 2066 6f72 2072 6574 6f6b 2069  .    for retok i
+00009c10: 6e20 746f 6b65 6e73 5f62 795f 7479 7065  n tokens_by_type
+00009c20: 2e67 6574 2850 6174 7465 726e 5245 2c20  .get(PatternRE, 
+00009c30: 5b5d 293a 0a20 2020 2020 2020 2075 6e6c  []):.        unl
+00009c40: 6573 7320 3d20 5b5d 0a20 2020 2020 2020  ess = [].       
+00009c50: 2066 6f72 2073 7472 746f 6b20 696e 2074   for strtok in t
+00009c60: 6f6b 656e 735f 6279 5f74 7970 652e 6765  okens_by_type.ge
+00009c70: 7428 5061 7474 6572 6e53 7472 2c20 5b5d  t(PatternStr, []
+00009c80: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+00009c90: 6620 7374 7274 6f6b 2e70 7269 6f72 6974  f strtok.priorit
+00009ca0: 7920 213d 2072 6574 6f6b 2e70 7269 6f72  y != retok.prior
+00009cb0: 6974 793a 0a20 2020 2020 2020 2020 2020  ity:.           
+00009cc0: 2020 2020 2063 6f6e 7469 6e75 650a 2020       continue.  
+00009cd0: 2020 2020 2020 2020 2020 7320 3d20 7374            s = st
+00009ce0: 7274 6f6b 2e70 6174 7465 726e 2e76 616c  rtok.pattern.val
+00009cf0: 7565 0a20 2020 2020 2020 2020 2020 2069  ue.            i
+00009d00: 6620 7320 3d3d 205f 6765 745f 6d61 7463  f s == _get_matc
+00009d10: 6828 7265 5f2c 2072 6574 6f6b 2e70 6174  h(re_, retok.pat
+00009d20: 7465 726e 2e74 6f5f 7265 6765 7870 2829  tern.to_regexp()
+00009d30: 2c20 732c 2067 5f72 6567 6578 5f66 6c61  , s, g_regex_fla
+00009d40: 6773 293a 0a20 2020 2020 2020 2020 2020  gs):.           
+00009d50: 2020 2020 2075 6e6c 6573 732e 6170 7065       unless.appe
+00009d60: 6e64 2873 7472 746f 6b29 0a20 2020 2020  nd(strtok).     
+00009d70: 2020 2020 2020 2020 2020 2069 6620 7374             if st
+00009d80: 7274 6f6b 2e70 6174 7465 726e 2e66 6c61  rtok.pattern.fla
+00009d90: 6773 203c 3d20 7265 746f 6b2e 7061 7474  gs <= retok.patt
+00009da0: 6572 6e2e 666c 6167 733a 0a20 2020 2020  ern.flags:.     
+00009db0: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00009dc0: 6d62 6564 6465 645f 7374 7273 2e61 6464  mbedded_strs.add
+00009dd0: 2873 7472 746f 6b29 0a20 2020 2020 2020  (strtok).       
+00009de0: 2069 6620 756e 6c65 7373 3a0a 2020 2020   if unless:.    
+00009df0: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
+00009e00: 5b72 6574 6f6b 2e6e 616d 655d 203d 2055  [retok.name] = U
+00009e10: 6e6c 6573 7343 616c 6c62 6163 6b28 5363  nlessCallback(Sc
+00009e20: 616e 6e65 7228 756e 6c65 7373 2c20 675f  anner(unless, g_
+00009e30: 7265 6765 785f 666c 6167 732c 2072 655f  regex_flags, re_
+00009e40: 2c20 6d61 7463 685f 7768 6f6c 653d 5472  , match_whole=Tr
+00009e50: 7565 2c20 7573 655f 6279 7465 733d 7573  ue, use_bytes=us
+00009e60: 655f 6279 7465 7329 290a 0a20 2020 206e  e_bytes))..    n
+00009e70: 6577 5f74 6572 6d69 6e61 6c73 203d 205b  ew_terminals = [
+00009e80: 7420 666f 7220 7420 696e 2074 6572 6d69  t for t in termi
+00009e90: 6e61 6c73 2069 6620 7420 6e6f 7420 696e  nals if t not in
+00009ea0: 2065 6d62 6564 6465 645f 7374 7273 5d0a   embedded_strs].
+00009eb0: 2020 2020 7265 7475 726e 206e 6577 5f74      return new_t
+00009ec0: 6572 6d69 6e61 6c73 2c20 6361 6c6c 6261  erminals, callba
+00009ed0: 636b 0a0a 0a63 6c61 7373 2053 6361 6e6e  ck...class Scann
+00009ee0: 6572 3a0a 2020 2020 6465 6620 5f5f 696e  er:.    def __in
+00009ef0: 6974 5f5f 2873 656c 662c 2074 6572 6d69  it__(self, termi
+00009f00: 6e61 6c73 2c20 675f 7265 6765 785f 666c  nals, g_regex_fl
+00009f10: 6167 732c 2072 655f 2c20 7573 655f 6279  ags, re_, use_by
+00009f20: 7465 732c 206d 6174 6368 5f77 686f 6c65  tes, match_whole
+00009f30: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+00009f40: 2073 656c 662e 7465 726d 696e 616c 7320   self.terminals 
+00009f50: 3d20 7465 726d 696e 616c 730a 2020 2020  = terminals.    
+00009f60: 2020 2020 7365 6c66 2e67 5f72 6567 6578      self.g_regex
+00009f70: 5f66 6c61 6773 203d 2067 5f72 6567 6578  _flags = g_regex
+00009f80: 5f66 6c61 6773 0a20 2020 2020 2020 2073  _flags.        s
+00009f90: 656c 662e 7265 5f20 3d20 7265 5f0a 2020  elf.re_ = re_.  
+00009fa0: 2020 2020 2020 7365 6c66 2e75 7365 5f62        self.use_b
+00009fb0: 7974 6573 203d 2075 7365 5f62 7974 6573  ytes = use_bytes
+00009fc0: 0a20 2020 2020 2020 2073 656c 662e 6d61  .        self.ma
+00009fd0: 7463 685f 7768 6f6c 6520 3d20 6d61 7463  tch_whole = matc
+00009fe0: 685f 7768 6f6c 650a 0a20 2020 2020 2020  h_whole..       
+00009ff0: 2073 656c 662e 616c 6c6f 7765 645f 7479   self.allowed_ty
+0000a000: 7065 7320 3d20 7b74 2e6e 616d 6520 666f  pes = {t.name fo
+0000a010: 7220 7420 696e 2073 656c 662e 7465 726d  r t in self.term
+0000a020: 696e 616c 737d 0a0a 2020 2020 2020 2020  inals}..        
+0000a030: 7365 6c66 2e5f 6d72 6573 203d 2073 656c  self._mres = sel
+0000a040: 662e 5f62 7569 6c64 5f6d 7265 7328 7465  f._build_mres(te
+0000a050: 726d 696e 616c 732c 206c 656e 2874 6572  rminals, len(ter
+0000a060: 6d69 6e61 6c73 2929 0a0a 2020 2020 6465  minals))..    de
+0000a070: 6620 5f62 7569 6c64 5f6d 7265 7328 7365  f _build_mres(se
+0000a080: 6c66 2c20 7465 726d 696e 616c 732c 206d  lf, terminals, m
+0000a090: 6178 5f73 697a 6529 3a0a 2020 2020 2020  ax_size):.      
+0000a0a0: 2020 2323 0a0a 2020 2020 2020 2020 2323    ##..        ##
+0000a0b0: 0a0a 2020 2020 2020 2020 2323 0a0a 2020  ..        ##..  
+0000a0c0: 2020 2020 2020 706f 7374 6669 7820 3d20        postfix = 
+0000a0d0: 2724 2720 6966 2073 656c 662e 6d61 7463  '$' if self.matc
+0000a0e0: 685f 7768 6f6c 6520 656c 7365 2027 270a  h_whole else ''.
+0000a0f0: 2020 2020 2020 2020 6d72 6573 203d 205b          mres = [
+0000a100: 5d0a 2020 2020 2020 2020 7768 696c 6520  ].        while 
+0000a110: 7465 726d 696e 616c 733a 0a20 2020 2020  terminals:.     
+0000a120: 2020 2020 2020 2070 6174 7465 726e 203d         pattern =
+0000a130: 2075 277c 272e 6a6f 696e 2875 2728 3f50   u'|'.join(u'(?P
+0000a140: 3c25 733e 2573 2927 2025 2028 742e 6e61  <%s>%s)' % (t.na
+0000a150: 6d65 2c20 742e 7061 7474 6572 6e2e 746f  me, t.pattern.to
+0000a160: 5f72 6567 6578 7028 2920 2b20 706f 7374  _regexp() + post
+0000a170: 6669 7829 2066 6f72 2074 2069 6e20 7465  fix) for t in te
+0000a180: 726d 696e 616c 735b 3a6d 6178 5f73 697a  rminals[:max_siz
+0000a190: 655d 290a 2020 2020 2020 2020 2020 2020  e]).            
+0000a1a0: 6966 2073 656c 662e 7573 655f 6279 7465  if self.use_byte
+0000a1b0: 733a 0a20 2020 2020 2020 2020 2020 2020  s:.             
+0000a1c0: 2020 2070 6174 7465 726e 203d 2070 6174     pattern = pat
+0000a1d0: 7465 726e 2e65 6e63 6f64 6528 276c 6174  tern.encode('lat
+0000a1e0: 696e 2d31 2729 0a20 2020 2020 2020 2020  in-1').         
+0000a1f0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0000a200: 2020 2020 2020 2020 6d72 6520 3d20 7365          mre = se
+0000a210: 6c66 2e72 655f 2e63 6f6d 7069 6c65 2870  lf.re_.compile(p
+0000a220: 6174 7465 726e 2c20 7365 6c66 2e67 5f72  attern, self.g_r
+0000a230: 6567 6578 5f66 6c61 6773 290a 2020 2020  egex_flags).    
+0000a240: 2020 2020 2020 2020 6578 6365 7074 2041          except A
+0000a250: 7373 6572 7469 6f6e 4572 726f 723a 2020  ssertionError:  
+0000a260: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
+0000a270: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0000a280: 5f62 7569 6c64 5f6d 7265 7328 7465 726d  _build_mres(term
+0000a290: 696e 616c 732c 206d 6178 5f73 697a 6520  inals, max_size 
+0000a2a0: 2f2f 2032 290a 0a20 2020 2020 2020 2020  // 2)..         
+0000a2b0: 2020 206d 7265 732e 6170 7065 6e64 286d     mres.append(m
+0000a2c0: 7265 290a 2020 2020 2020 2020 2020 2020  re).            
+0000a2d0: 7465 726d 696e 616c 7320 3d20 7465 726d  terminals = term
+0000a2e0: 696e 616c 735b 6d61 785f 7369 7a65 3a5d  inals[max_size:]
+0000a2f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000a300: 6d72 6573 0a0a 2020 2020 6465 6620 6d61  mres..    def ma
+0000a310: 7463 6828 7365 6c66 2c20 7465 7874 2c20  tch(self, text, 
+0000a320: 706f 7329 3a0a 2020 2020 2020 2020 666f  pos):.        fo
+0000a330: 7220 6d72 6520 696e 2073 656c 662e 5f6d  r mre in self._m
+0000a340: 7265 733a 0a20 2020 2020 2020 2020 2020  res:.           
+0000a350: 206d 203d 206d 7265 2e6d 6174 6368 2874   m = mre.match(t
+0000a360: 6578 742c 2070 6f73 290a 2020 2020 2020  ext, pos).      
+0000a370: 2020 2020 2020 6966 206d 3a0a 2020 2020        if m:.    
+0000a380: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000a390: 726e 206d 2e67 726f 7570 2830 292c 206d  rn m.group(0), m
+0000a3a0: 2e6c 6173 7467 726f 7570 0a0a 0a64 6566  .lastgroup...def
+0000a3b0: 205f 7265 6765 7870 5f68 6173 5f6e 6577   _regexp_has_new
+0000a3c0: 6c69 6e65 2872 3a20 7374 7229 3a0a 2020  line(r: str):.  
+0000a3d0: 2020 232d 2d0a 2020 2020 7265 7475 726e    #--.    return
+0000a3e0: 2027 5c6e 2720 696e 2072 206f 7220 275c   '\n' in r or '\
+0000a3f0: 5c6e 2720 696e 2072 206f 7220 275c 5c73  \n' in r or '\\s
+0000a400: 2720 696e 2072 206f 7220 275b 5e27 2069  ' in r or '[^' i
+0000a410: 6e20 7220 6f72 2028 2728 3f73 2720 696e  n r or ('(?s' in
+0000a420: 2072 2061 6e64 2027 2e27 2069 6e20 7229   r and '.' in r)
+0000a430: 0a0a 0a63 6c61 7373 204c 6578 6572 5374  ...class LexerSt
+0000a440: 6174 653a 0a20 2020 2023 2d2d 0a0a 2020  ate:.    #--..  
+0000a450: 2020 5f5f 736c 6f74 735f 5f20 3d20 2774    __slots__ = 't
+0000a460: 6578 7427 2c20 276c 696e 655f 6374 7227  ext', 'line_ctr'
+0000a470: 2c20 276c 6173 745f 746f 6b65 6e27 0a0a  , 'last_token'..
+0000a480: 2020 2020 7465 7874 3a20 7374 720a 2020      text: str.  
+0000a490: 2020 6c69 6e65 5f63 7472 3a20 4c69 6e65    line_ctr: Line
+0000a4a0: 436f 756e 7465 720a 2020 2020 6c61 7374  Counter.    last
+0000a4b0: 5f74 6f6b 656e 3a20 4f70 7469 6f6e 616c  _token: Optional
+0000a4c0: 5b54 6f6b 656e 5d0a 0a20 2020 2064 6566  [Token]..    def
+0000a4d0: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+0000a4e0: 7465 7874 3a20 7374 722c 206c 696e 655f  text: str, line_
+0000a4f0: 6374 723a 204f 7074 696f 6e61 6c5b 4c69  ctr: Optional[Li
+0000a500: 6e65 436f 756e 7465 725d 3d4e 6f6e 652c  neCounter]=None,
+0000a510: 206c 6173 745f 746f 6b65 6e3a 204f 7074   last_token: Opt
+0000a520: 696f 6e61 6c5b 546f 6b65 6e5d 3d4e 6f6e  ional[Token]=Non
+0000a530: 6529 3a0a 2020 2020 2020 2020 7365 6c66  e):.        self
+0000a540: 2e74 6578 7420 3d20 7465 7874 0a20 2020  .text = text.   
+0000a550: 2020 2020 2073 656c 662e 6c69 6e65 5f63       self.line_c
+0000a560: 7472 203d 206c 696e 655f 6374 7220 6f72  tr = line_ctr or
+0000a570: 204c 696e 6543 6f75 6e74 6572 2862 275c   LineCounter(b'\
+0000a580: 6e27 2069 6620 6973 696e 7374 616e 6365  n' if isinstance
+0000a590: 2874 6578 742c 2062 7974 6573 2920 656c  (text, bytes) el
+0000a5a0: 7365 2027 5c6e 2729 0a20 2020 2020 2020  se '\n').       
+0000a5b0: 2073 656c 662e 6c61 7374 5f74 6f6b 656e   self.last_token
+0000a5c0: 203d 206c 6173 745f 746f 6b65 6e0a 0a20   = last_token.. 
+0000a5d0: 2020 2064 6566 205f 5f65 715f 5f28 7365     def __eq__(se
+0000a5e0: 6c66 2c20 6f74 6865 7229 3a0a 2020 2020  lf, other):.    
+0000a5f0: 2020 2020 6966 206e 6f74 2069 7369 6e73      if not isins
+0000a600: 7461 6e63 6528 6f74 6865 722c 204c 6578  tance(other, Lex
+0000a610: 6572 5374 6174 6529 3a0a 2020 2020 2020  erState):.      
+0000a620: 2020 2020 2020 7265 7475 726e 204e 6f74        return Not
+0000a630: 496d 706c 656d 656e 7465 640a 0a20 2020  Implemented..   
+0000a640: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0000a650: 2e74 6578 7420 6973 206f 7468 6572 2e74  .text is other.t
+0000a660: 6578 7420 616e 6420 7365 6c66 2e6c 696e  ext and self.lin
+0000a670: 655f 6374 7220 3d3d 206f 7468 6572 2e6c  e_ctr == other.l
+0000a680: 696e 655f 6374 7220 616e 6420 7365 6c66  ine_ctr and self
+0000a690: 2e6c 6173 745f 746f 6b65 6e20 3d3d 206f  .last_token == o
+0000a6a0: 7468 6572 2e6c 6173 745f 746f 6b65 6e0a  ther.last_token.
+0000a6b0: 0a20 2020 2064 6566 205f 5f63 6f70 795f  .    def __copy_
+0000a6c0: 5f28 7365 6c66 293a 0a20 2020 2020 2020  _(self):.       
+0000a6d0: 2072 6574 7572 6e20 7479 7065 2873 656c   return type(sel
+0000a6e0: 6629 2873 656c 662e 7465 7874 2c20 636f  f)(self.text, co
+0000a6f0: 7079 2873 656c 662e 6c69 6e65 5f63 7472  py(self.line_ctr
+0000a700: 292c 2073 656c 662e 6c61 7374 5f74 6f6b  ), self.last_tok
+0000a710: 656e 290a 0a0a 636c 6173 7320 4c65 7865  en)...class Lexe
+0000a720: 7254 6872 6561 643a 0a20 2020 2023 2d2d  rThread:.    #--
+0000a730: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
+0000a740: 5f5f 2873 656c 662c 206c 6578 6572 3a20  __(self, lexer: 
+0000a750: 274c 6578 6572 272c 206c 6578 6572 5f73  'Lexer', lexer_s
+0000a760: 7461 7465 3a20 4c65 7865 7253 7461 7465  tate: LexerState
+0000a770: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0000a780: 6c65 7865 7220 3d20 6c65 7865 720a 2020  lexer = lexer.  
+0000a790: 2020 2020 2020 7365 6c66 2e73 7461 7465        self.state
+0000a7a0: 203d 206c 6578 6572 5f73 7461 7465 0a0a   = lexer_state..
+0000a7b0: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
+0000a7c0: 0a20 2020 2064 6566 2066 726f 6d5f 7465  .    def from_te
+0000a7d0: 7874 2863 6c73 2c20 6c65 7865 723a 2027  xt(cls, lexer: '
+0000a7e0: 4c65 7865 7227 2c20 7465 7874 3a20 7374  Lexer', text: st
+0000a7f0: 7229 202d 3e20 274c 6578 6572 5468 7265  r) -> 'LexerThre
+0000a800: 6164 273a 0a20 2020 2020 2020 2072 6574  ad':.        ret
+0000a810: 7572 6e20 636c 7328 6c65 7865 722c 204c  urn cls(lexer, L
+0000a820: 6578 6572 5374 6174 6528 7465 7874 2929  exerState(text))
+0000a830: 0a0a 2020 2020 6465 6620 6c65 7828 7365  ..    def lex(se
+0000a840: 6c66 2c20 7061 7273 6572 5f73 7461 7465  lf, parser_state
+0000a850: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+0000a860: 6e20 7365 6c66 2e6c 6578 6572 2e6c 6578  n self.lexer.lex
+0000a870: 2873 656c 662e 7374 6174 652c 2070 6172  (self.state, par
+0000a880: 7365 725f 7374 6174 6529 0a0a 2020 2020  ser_state)..    
+0000a890: 6465 6620 5f5f 636f 7079 5f5f 2873 656c  def __copy__(sel
+0000a8a0: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+0000a8b0: 726e 2074 7970 6528 7365 6c66 2928 7365  rn type(self)(se
+0000a8c0: 6c66 2e6c 6578 6572 2c20 636f 7079 2873  lf.lexer, copy(s
+0000a8d0: 656c 662e 7374 6174 6529 290a 0a20 2020  elf.state))..   
+0000a8e0: 205f 546f 6b65 6e20 3d20 546f 6b65 6e0a   _Token = Token.
+0000a8f0: 0a0a 5f43 616c 6c62 6163 6b20 3d20 4361  .._Callback = Ca
+0000a900: 6c6c 6162 6c65 5b5b 546f 6b65 6e5d 2c20  llable[[Token], 
+0000a910: 546f 6b65 6e5d 0a0a 636c 6173 7320 4c65  Token]..class Le
+0000a920: 7865 7228 4142 4329 3a0a 2020 2020 232d  xer(ABC):.    #-
+0000a930: 2d0a 2020 2020 4061 6273 7472 6163 746d  -.    @abstractm
+0000a940: 6574 686f 640a 2020 2020 6465 6620 6c65  ethod.    def le
+0000a950: 7828 7365 6c66 2c20 6c65 7865 725f 7374  x(self, lexer_st
+0000a960: 6174 653a 204c 6578 6572 5374 6174 652c  ate: LexerState,
+0000a970: 2070 6172 7365 725f 7374 6174 653a 2041   parser_state: A
+0000a980: 6e79 2920 2d3e 2049 7465 7261 746f 725b  ny) -> Iterator[
+0000a990: 546f 6b65 6e5d 3a0a 2020 2020 2020 2020  Token]:.        
+0000a9a0: 7265 7475 726e 204e 6f74 496d 706c 656d  return NotImplem
+0000a9b0: 656e 7465 640a 0a20 2020 2064 6566 206d  ented..    def m
+0000a9c0: 616b 655f 6c65 7865 725f 7374 6174 6528  ake_lexer_state(
+0000a9d0: 7365 6c66 2c20 7465 7874 293a 0a20 2020  self, text):.   
+0000a9e0: 2020 2020 2023 2d2d 0a20 2020 2020 2020       #--.       
+0000a9f0: 2072 6574 7572 6e20 4c65 7865 7253 7461   return LexerSta
+0000aa00: 7465 2874 6578 7429 0a0a 0a64 6566 205f  te(text)...def _
+0000aa10: 6368 6563 6b5f 7265 6765 785f 636f 6c6c  check_regex_coll
+0000aa20: 6973 696f 6e73 2874 6572 6d69 6e61 6c5f  isions(terminal_
+0000aa30: 746f 5f72 6567 6578 703a 2044 6963 745b  to_regexp: Dict[
+0000aa40: 5465 726d 696e 616c 4465 662c 2073 7472  TerminalDef, str
+0000aa50: 5d2c 2063 6f6d 7061 7261 746f 722c 2073  ], comparator, s
+0000aa60: 7472 6963 745f 6d6f 6465 2c20 6d61 785f  trict_mode, max_
+0000aa70: 636f 6c6c 6973 696f 6e73 5f74 6f5f 7368  collisions_to_sh
+0000aa80: 6f77 3d38 293a 0a20 2020 2069 6620 6e6f  ow=8):.    if no
+0000aa90: 7420 636f 6d70 6172 6174 6f72 3a0a 2020  t comparator:.  
+0000aaa0: 2020 2020 2020 636f 6d70 6172 6174 6f72        comparator
+0000aab0: 203d 2069 6e74 6572 6567 756c 6172 2e43   = interegular.C
+0000aac0: 6f6d 7061 7261 746f 722e 6672 6f6d 5f72  omparator.from_r
+0000aad0: 6567 6578 6573 2874 6572 6d69 6e61 6c5f  egexes(terminal_
+0000aae0: 746f 5f72 6567 6578 7029 0a0a 2020 2020  to_regexp)..    
+0000aaf0: 2323 0a0a 2020 2020 2323 0a0a 2020 2020  ##..    ##..    
+0000ab00: 6d61 785f 7469 6d65 203d 2032 2069 6620  max_time = 2 if 
+0000ab10: 7374 7269 6374 5f6d 6f64 6520 656c 7365  strict_mode else
+0000ab20: 2030 2e32 0a0a 2020 2020 2323 0a0a 2020   0.2..    ##..  
+0000ab30: 2020 6966 2063 6f6d 7061 7261 746f 722e    if comparator.
+0000ab40: 636f 756e 745f 6d61 726b 6564 5f70 6169  count_marked_pai
+0000ab50: 7273 2829 203e 3d20 6d61 785f 636f 6c6c  rs() >= max_coll
+0000ab60: 6973 696f 6e73 5f74 6f5f 7368 6f77 3a0a  isions_to_show:.
+0000ab70: 2020 2020 2020 2020 7265 7475 726e 0a20          return. 
+0000ab80: 2020 2066 6f72 2067 726f 7570 2069 6e20     for group in 
+0000ab90: 636c 6173 7369 6679 2874 6572 6d69 6e61  classify(termina
+0000aba0: 6c5f 746f 5f72 6567 6578 702c 206c 616d  l_to_regexp, lam
+0000abb0: 6264 6120 743a 2074 2e70 7269 6f72 6974  bda t: t.priorit
+0000abc0: 7929 2e76 616c 7565 7328 293a 0a20 2020  y).values():.   
+0000abd0: 2020 2020 2066 6f72 2061 2c20 6220 696e       for a, b in
+0000abe0: 2063 6f6d 7061 7261 746f 722e 6368 6563   comparator.chec
+0000abf0: 6b28 6772 6f75 702c 2073 6b69 705f 6d61  k(group, skip_ma
+0000ac00: 726b 6564 3d54 7275 6529 3a0a 2020 2020  rked=True):.    
+0000ac10: 2020 2020 2020 2020 6173 7365 7274 2061          assert a
+0000ac20: 2e70 7269 6f72 6974 7920 3d3d 2062 2e70  .priority == b.p
+0000ac30: 7269 6f72 6974 790a 2020 2020 2020 2020  riority.        
+0000ac40: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
+0000ac50: 2020 2020 636f 6d70 6172 6174 6f72 2e6d      comparator.m
+0000ac60: 6172 6b28 612c 2062 290a 0a20 2020 2020  ark(a, b)..     
+0000ac70: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
+0000ac80: 2020 2020 2020 206d 6573 7361 6765 203d         message =
+0000ac90: 2066 2243 6f6c 6c69 7369 6f6e 2062 6574   f"Collision bet
+0000aca0: 7765 656e 2054 6572 6d69 6e61 6c73 207b  ween Terminals {
+0000acb0: 612e 6e61 6d65 7d20 616e 6420 7b62 2e6e  a.name} and {b.n
+0000acc0: 616d 657d 2e20 220a 2020 2020 2020 2020  ame}. ".        
+0000acd0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+0000ace0: 2020 2020 2020 2020 2065 7861 6d70 6c65           example
+0000acf0: 203d 2063 6f6d 7061 7261 746f 722e 6765   = comparator.ge
+0000ad00: 745f 6578 616d 706c 655f 6f76 6572 6c61  t_example_overla
+0000ad10: 7028 612c 2062 2c20 6d61 785f 7469 6d65  p(a, b, max_time
+0000ad20: 292e 666f 726d 6174 5f6d 756c 7469 6c69  ).format_multili
+0000ad30: 6e65 2829 0a20 2020 2020 2020 2020 2020  ne().           
+0000ad40: 2065 7863 6570 7420 5661 6c75 6545 7272   except ValueErr
+0000ad50: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
+0000ad60: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
+0000ad70: 2020 2020 2020 2020 6578 616d 706c 6520          example 
+0000ad80: 3d20 224e 6f20 6578 616d 706c 6520 636f  = "No example co
+0000ad90: 756c 6420 6265 2066 6f75 6e64 2066 6173  uld be found fas
+0000ada0: 7420 656e 6f75 6768 2e20 486f 7765 7665  t enough. Howeve
+0000adb0: 722c 2074 6865 2063 6f6c 6c69 7369 6f6e  r, the collision
+0000adc0: 2064 6f65 7320 7374 696c 6c20 6578 6973   does still exis
+0000add0: 7473 220a 2020 2020 2020 2020 2020 2020  ts".            
+0000ade0: 6966 2073 7472 6963 745f 6d6f 6465 3a0a  if strict_mode:.
+0000adf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ae00: 7261 6973 6520 4c65 7845 7272 6f72 2866  raise LexError(f
+0000ae10: 227b 6d65 7373 6167 657d 5c6e 7b65 7861  "{message}\n{exa
+0000ae20: 6d70 6c65 7d22 290a 2020 2020 2020 2020  mple}").        
+0000ae30: 2020 2020 6c6f 6767 6572 2e77 6172 6e69      logger.warni
+0000ae40: 6e67 2822 2573 2054 6865 206c 6578 6572  ng("%s The lexer
+0000ae50: 2077 696c 6c20 6368 6f6f 7365 2062 6574   will choose bet
+0000ae60: 7765 656e 2074 6865 6d20 6172 6269 7472  ween them arbitr
+0000ae70: 6172 696c 792e 5c6e 2573 222c 206d 6573  arily.\n%s", mes
+0000ae80: 7361 6765 2c20 6578 616d 706c 6529 0a20  sage, example). 
+0000ae90: 2020 2020 2020 2020 2020 2069 6620 636f             if co
+0000aea0: 6d70 6172 6174 6f72 2e63 6f75 6e74 5f6d  mparator.count_m
+0000aeb0: 6172 6b65 645f 7061 6972 7328 2920 3e3d  arked_pairs() >=
+0000aec0: 206d 6178 5f63 6f6c 6c69 7369 6f6e 735f   max_collisions_
+0000aed0: 746f 5f73 686f 773a 0a20 2020 2020 2020  to_show:.       
+0000aee0: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+0000aef0: 7761 726e 696e 6728 2246 6f75 6e64 2038  warning("Found 8
+0000af00: 2072 6567 6578 2063 6f6c 6c69 7369 6f6e   regex collision
+0000af10: 732c 2077 696c 6c20 6e6f 7420 6368 6563  s, will not chec
+0000af20: 6b20 666f 7220 6d6f 7265 2e22 290a 2020  k for more.").  
+0000af30: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000af40: 7475 726e 0a0a 0a63 6c61 7373 2041 6273  turn...class Abs
+0000af50: 7472 6163 7442 6173 6963 4c65 7865 7228  tractBasicLexer(
+0000af60: 4c65 7865 7229 3a0a 2020 2020 7465 726d  Lexer):.    term
+0000af70: 696e 616c 735f 6279 5f6e 616d 653a 2044  inals_by_name: D
+0000af80: 6963 745b 7374 722c 2054 6572 6d69 6e61  ict[str, Termina
+0000af90: 6c44 6566 5d0a 0a20 2020 2040 6162 7374  lDef]..    @abst
+0000afa0: 7261 6374 6d65 7468 6f64 0a20 2020 2064  ractmethod.    d
+0000afb0: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+0000afc0: 2c20 636f 6e66 3a20 274c 6578 6572 436f  , conf: 'LexerCo
+0000afd0: 6e66 272c 2063 6f6d 7061 7261 746f 723d  nf', comparator=
+0000afe0: 4e6f 6e65 2920 2d3e 204e 6f6e 653a 0a20  None) -> None:. 
+0000aff0: 2020 2020 2020 202e 2e2e 0a0a 2020 2020         .....    
+0000b000: 4061 6273 7472 6163 746d 6574 686f 640a  @abstractmethod.
+0000b010: 2020 2020 6465 6620 6e65 7874 5f74 6f6b      def next_tok
+0000b020: 656e 2873 656c 662c 206c 6578 5f73 7461  en(self, lex_sta
+0000b030: 7465 3a20 4c65 7865 7253 7461 7465 2c20  te: LexerState, 
+0000b040: 7061 7273 6572 5f73 7461 7465 3a20 416e  parser_state: An
+0000b050: 7920 3d20 4e6f 6e65 2920 2d3e 2054 6f6b  y = None) -> Tok
+0000b060: 656e 3a0a 2020 2020 2020 2020 2e2e 2e0a  en:.        ....
+0000b070: 0a20 2020 2064 6566 206c 6578 2873 656c  .    def lex(sel
+0000b080: 662c 2073 7461 7465 3a20 4c65 7865 7253  f, state: LexerS
+0000b090: 7461 7465 2c20 7061 7273 6572 5f73 7461  tate, parser_sta
+0000b0a0: 7465 3a20 416e 7929 202d 3e20 4974 6572  te: Any) -> Iter
+0000b0b0: 6174 6f72 5b54 6f6b 656e 5d3a 0a20 2020  ator[Token]:.   
+0000b0c0: 2020 2020 2077 6974 6820 7375 7070 7265       with suppre
+0000b0d0: 7373 2845 4f46 4572 726f 7229 3a0a 2020  ss(EOFError):.  
+0000b0e0: 2020 2020 2020 2020 2020 7768 696c 6520            while 
+0000b0f0: 5472 7565 3a0a 2020 2020 2020 2020 2020  True:.          
+0000b100: 2020 2020 2020 7969 656c 6420 7365 6c66        yield self
+0000b110: 2e6e 6578 745f 746f 6b65 6e28 7374 6174  .next_token(stat
+0000b120: 652c 2070 6172 7365 725f 7374 6174 6529  e, parser_state)
+0000b130: 0a0a 0a63 6c61 7373 2042 6173 6963 4c65  ...class BasicLe
+0000b140: 7865 7228 4162 7374 7261 6374 4261 7369  xer(AbstractBasi
+0000b150: 634c 6578 6572 293a 0a20 2020 2074 6572  cLexer):.    ter
+0000b160: 6d69 6e61 6c73 3a20 436f 6c6c 6563 7469  minals: Collecti
+0000b170: 6f6e 5b54 6572 6d69 6e61 6c44 6566 5d0a  on[TerminalDef].
+0000b180: 2020 2020 6967 6e6f 7265 5f74 7970 6573      ignore_types
+0000b190: 3a20 4672 6f7a 656e 5365 745b 7374 725d  : FrozenSet[str]
+0000b1a0: 0a20 2020 206e 6577 6c69 6e65 5f74 7970  .    newline_typ
+0000b1b0: 6573 3a20 4672 6f7a 656e 5365 745b 7374  es: FrozenSet[st
+0000b1c0: 725d 0a20 2020 2075 7365 725f 6361 6c6c  r].    user_call
+0000b1d0: 6261 636b 733a 2044 6963 745b 7374 722c  backs: Dict[str,
+0000b1e0: 205f 4361 6c6c 6261 636b 5d0a 2020 2020   _Callback].    
+0000b1f0: 6361 6c6c 6261 636b 3a20 4469 6374 5b73  callback: Dict[s
+0000b200: 7472 2c20 5f43 616c 6c62 6163 6b5d 0a20  tr, _Callback]. 
+0000b210: 2020 2072 653a 204d 6f64 756c 6554 7970     re: ModuleTyp
+0000b220: 650a 0a20 2020 2064 6566 205f 5f69 6e69  e..    def __ini
+0000b230: 745f 5f28 7365 6c66 2c20 636f 6e66 3a20  t__(self, conf: 
+0000b240: 274c 6578 6572 436f 6e66 272c 2063 6f6d  'LexerConf', com
+0000b250: 7061 7261 746f 723d 4e6f 6e65 2920 2d3e  parator=None) ->
+0000b260: 204e 6f6e 653a 0a20 2020 2020 2020 2074   None:.        t
+0000b270: 6572 6d69 6e61 6c73 203d 206c 6973 7428  erminals = list(
+0000b280: 636f 6e66 2e74 6572 6d69 6e61 6c73 290a  conf.terminals).
+0000b290: 2020 2020 2020 2020 6173 7365 7274 2061          assert a
+0000b2a0: 6c6c 2869 7369 6e73 7461 6e63 6528 742c  ll(isinstance(t,
+0000b2b0: 2054 6572 6d69 6e61 6c44 6566 2920 666f   TerminalDef) fo
+0000b2c0: 7220 7420 696e 2074 6572 6d69 6e61 6c73  r t in terminals
+0000b2d0: 292c 2074 6572 6d69 6e61 6c73 0a0a 2020  ), terminals..  
+0000b2e0: 2020 2020 2020 7365 6c66 2e72 6520 3d20        self.re = 
+0000b2f0: 636f 6e66 2e72 655f 6d6f 6475 6c65 0a0a  conf.re_module..
+0000b300: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+0000b310: 6f6e 662e 736b 6970 5f76 616c 6964 6174  onf.skip_validat
+0000b320: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
+0000b330: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
+0000b340: 2074 6572 6d69 6e61 6c5f 746f 5f72 6567   terminal_to_reg
+0000b350: 6578 7020 3d20 7b7d 0a20 2020 2020 2020  exp = {}.       
+0000b360: 2020 2020 2066 6f72 2074 2069 6e20 7465       for t in te
+0000b370: 726d 696e 616c 733a 0a20 2020 2020 2020  rminals:.       
+0000b380: 2020 2020 2020 2020 2072 6567 6578 7020           regexp 
+0000b390: 3d20 742e 7061 7474 6572 6e2e 746f 5f72  = t.pattern.to_r
+0000b3a0: 6567 6578 7028 290a 2020 2020 2020 2020  egexp().        
+0000b3b0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
 0000b3c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b3e0: 2020 2020 2020 2020 2073 7461 7465 3d70           state=p
-0000b3f0: 6172 7365 725f 7374 6174 652c 2074 6572  arser_state, ter
-0000b400: 6d69 6e61 6c73 5f62 795f 6e61 6d65 3d73  minals_by_name=s
-0000b410: 656c 662e 7465 726d 696e 616c 735f 6279  elf.terminals_by
-0000b420: 5f6e 616d 6529 0a0a 2020 2020 2020 2020  _name)..        
-0000b430: 2020 2020 7661 6c75 652c 2074 7970 655f      value, type_
-0000b440: 203d 2072 6573 0a0a 2020 2020 2020 2020   = res..        
-0000b450: 2020 2020 6966 2074 7970 655f 206e 6f74      if type_ not
-0000b460: 2069 6e20 7365 6c66 2e69 676e 6f72 655f   in self.ignore_
-0000b470: 7479 7065 733a 0a20 2020 2020 2020 2020  types:.         
-0000b480: 2020 2020 2020 2074 203d 2054 6f6b 656e         t = Token
-0000b490: 2874 7970 655f 2c20 7661 6c75 652c 206c  (type_, value, l
-0000b4a0: 696e 655f 6374 722e 6368 6172 5f70 6f73  ine_ctr.char_pos
-0000b4b0: 2c20 6c69 6e65 5f63 7472 2e6c 696e 652c  , line_ctr.line,
-0000b4c0: 206c 696e 655f 6374 722e 636f 6c75 6d6e   line_ctr.column
-0000b4d0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000b4e0: 2020 6c69 6e65 5f63 7472 2e66 6565 6428    line_ctr.feed(
-0000b4f0: 7661 6c75 652c 2074 7970 655f 2069 6e20  value, type_ in 
-0000b500: 7365 6c66 2e6e 6577 6c69 6e65 5f74 7970  self.newline_typ
-0000b510: 6573 290a 2020 2020 2020 2020 2020 2020  es).            
-0000b520: 2020 2020 742e 656e 645f 6c69 6e65 203d      t.end_line =
-0000b530: 206c 696e 655f 6374 722e 6c69 6e65 0a20   line_ctr.line. 
-0000b540: 2020 2020 2020 2020 2020 2020 2020 2074                 t
-0000b550: 2e65 6e64 5f63 6f6c 756d 6e20 3d20 6c69  .end_column = li
-0000b560: 6e65 5f63 7472 2e63 6f6c 756d 6e0a 2020  ne_ctr.column.  
-0000b570: 2020 2020 2020 2020 2020 2020 2020 742e                t.
-0000b580: 656e 645f 706f 7320 3d20 6c69 6e65 5f63  end_pos = line_c
-0000b590: 7472 2e63 6861 725f 706f 730a 2020 2020  tr.char_pos.    
-0000b5a0: 2020 2020 2020 2020 2020 2020 6966 2074              if t
-0000b5b0: 2e74 7970 6520 696e 2073 656c 662e 6361  .type in self.ca
-0000b5c0: 6c6c 6261 636b 3a0a 2020 2020 2020 2020  llback:.        
-0000b5d0: 2020 2020 2020 2020 2020 2020 7420 3d20              t = 
-0000b5e0: 7365 6c66 2e63 616c 6c62 6163 6b5b 742e  self.callback[t.
-0000b5f0: 7479 7065 5d28 7429 0a20 2020 2020 2020  type](t).       
-0000b600: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-0000b610: 6e6f 7420 6973 696e 7374 616e 6365 2874  not isinstance(t
-0000b620: 2c20 546f 6b65 6e29 3a0a 2020 2020 2020  , Token):.      
-0000b630: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b640: 2020 7261 6973 6520 4c65 7845 7272 6f72    raise LexError
-0000b650: 2822 4361 6c6c 6261 636b 7320 6d75 7374  ("Callbacks must
-0000b660: 2072 6574 7572 6e20 6120 746f 6b65 6e20   return a token 
-0000b670: 2872 6574 7572 6e65 6420 2572 2922 2025  (returned %r)" %
-0000b680: 2074 290a 2020 2020 2020 2020 2020 2020   t).            
-0000b690: 2020 2020 6c65 785f 7374 6174 652e 6c61      lex_state.la
-0000b6a0: 7374 5f74 6f6b 656e 203d 2074 0a20 2020  st_token = t.   
-0000b6b0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
-0000b6c0: 7572 6e20 740a 2020 2020 2020 2020 2020  urn t.          
-0000b6d0: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-0000b6e0: 2020 2020 2020 2020 6966 2074 7970 655f          if type_
-0000b6f0: 2069 6e20 7365 6c66 2e63 616c 6c62 6163   in self.callbac
-0000b700: 6b3a 0a20 2020 2020 2020 2020 2020 2020  k:.             
-0000b710: 2020 2020 2020 2074 3220 3d20 546f 6b65         t2 = Toke
-0000b720: 6e28 7479 7065 5f2c 2076 616c 7565 2c20  n(type_, value, 
-0000b730: 6c69 6e65 5f63 7472 2e63 6861 725f 706f  line_ctr.char_po
-0000b740: 732c 206c 696e 655f 6374 722e 6c69 6e65  s, line_ctr.line
-0000b750: 2c20 6c69 6e65 5f63 7472 2e63 6f6c 756d  , line_ctr.colum
-0000b760: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
-0000b770: 2020 2020 2020 2073 656c 662e 6361 6c6c         self.call
-0000b780: 6261 636b 5b74 7970 655f 5d28 7432 290a  back[type_](t2).
-0000b790: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000b7a0: 6c69 6e65 5f63 7472 2e66 6565 6428 7661  line_ctr.feed(va
-0000b7b0: 6c75 652c 2074 7970 655f 2069 6e20 7365  lue, type_ in se
-0000b7c0: 6c66 2e6e 6577 6c69 6e65 5f74 7970 6573  lf.newline_types
-0000b7d0: 290a 0a20 2020 2020 2020 2023 230a 0a20  )..        ##.. 
-0000b7e0: 2020 2020 2020 2072 6169 7365 2045 4f46         raise EOF
-0000b7f0: 4572 726f 7228 7365 6c66 290a 0a0a 636c  Error(self)...cl
-0000b800: 6173 7320 436f 6e74 6578 7475 616c 4c65  ass ContextualLe
-0000b810: 7865 7228 4c65 7865 7229 3a0a 0a20 2020  xer(Lexer):..   
-0000b820: 206c 6578 6572 733a 2044 6963 745b 7374   lexers: Dict[st
-0000b830: 722c 2042 6173 6963 4c65 7865 725d 0a20  r, BasicLexer]. 
-0000b840: 2020 2072 6f6f 745f 6c65 7865 723a 2042     root_lexer: B
-0000b850: 6173 6963 4c65 7865 720a 0a20 2020 2064  asicLexer..    d
-0000b860: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
-0000b870: 2c20 636f 6e66 3a20 274c 6578 6572 436f  , conf: 'LexerCo
-0000b880: 6e66 272c 2073 7461 7465 733a 2044 6963  nf', states: Dic
-0000b890: 745b 7374 722c 2043 6f6c 6c65 6374 696f  t[str, Collectio
-0000b8a0: 6e5b 7374 725d 5d2c 2061 6c77 6179 735f  n[str]], always_
-0000b8b0: 6163 6365 7074 3a20 436f 6c6c 6563 7469  accept: Collecti
-0000b8c0: 6f6e 5b73 7472 5d3d 2829 2920 2d3e 204e  on[str]=()) -> N
-0000b8d0: 6f6e 653a 0a20 2020 2020 2020 2074 6572  one:.        ter
-0000b8e0: 6d69 6e61 6c73 203d 206c 6973 7428 636f  minals = list(co
-0000b8f0: 6e66 2e74 6572 6d69 6e61 6c73 290a 2020  nf.terminals).  
-0000b900: 2020 2020 2020 7465 726d 696e 616c 735f        terminals_
-0000b910: 6279 5f6e 616d 6520 3d20 636f 6e66 2e74  by_name = conf.t
-0000b920: 6572 6d69 6e61 6c73 5f62 795f 6e61 6d65  erminals_by_name
-0000b930: 0a0a 2020 2020 2020 2020 7472 6164 5f63  ..        trad_c
-0000b940: 6f6e 6620 3d20 636f 7079 2863 6f6e 6629  onf = copy(conf)
-0000b950: 0a20 2020 2020 2020 2074 7261 645f 636f  .        trad_co
-0000b960: 6e66 2e74 6572 6d69 6e61 6c73 203d 2074  nf.terminals = t
-0000b970: 6572 6d69 6e61 6c73 0a0a 2020 2020 2020  erminals..      
-0000b980: 2020 6c65 7865 725f 6279 5f74 6f6b 656e    lexer_by_token
-0000b990: 733a 2044 6963 745b 4672 6f7a 656e 5365  s: Dict[FrozenSe
-0000b9a0: 745b 7374 725d 2c20 4261 7369 634c 6578  t[str], BasicLex
-0000b9b0: 6572 5d20 3d20 7b7d 0a20 2020 2020 2020  er] = {}.       
-0000b9c0: 2073 656c 662e 6c65 7865 7273 203d 207b   self.lexers = {
-0000b9d0: 7d0a 2020 2020 2020 2020 666f 7220 7374  }.        for st
-0000b9e0: 6174 652c 2061 6363 6570 7473 2069 6e20  ate, accepts in 
-0000b9f0: 7374 6174 6573 2e69 7465 6d73 2829 3a0a  states.items():.
-0000ba00: 2020 2020 2020 2020 2020 2020 6b65 7920              key 
-0000ba10: 3d20 6672 6f7a 656e 7365 7428 6163 6365  = frozenset(acce
-0000ba20: 7074 7329 0a20 2020 2020 2020 2020 2020  pts).           
-0000ba30: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-0000ba40: 2020 2020 2020 6c65 7865 7220 3d20 6c65        lexer = le
-0000ba50: 7865 725f 6279 5f74 6f6b 656e 735b 6b65  xer_by_tokens[ke
-0000ba60: 795d 0a20 2020 2020 2020 2020 2020 2065  y].            e
-0000ba70: 7863 6570 7420 4b65 7945 7272 6f72 3a0a  xcept KeyError:.
-0000ba80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ba90: 6163 6365 7074 7320 3d20 7365 7428 6163  accepts = set(ac
-0000baa0: 6365 7074 7329 207c 2073 6574 2863 6f6e  cepts) | set(con
-0000bab0: 662e 6967 6e6f 7265 2920 7c20 7365 7428  f.ignore) | set(
-0000bac0: 616c 7761 7973 5f61 6363 6570 7429 0a20  always_accept). 
-0000bad0: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0000bae0: 6578 6572 5f63 6f6e 6620 3d20 636f 7079  exer_conf = copy
-0000baf0: 2874 7261 645f 636f 6e66 290a 2020 2020  (trad_conf).    
-0000bb00: 2020 2020 2020 2020 2020 2020 6c65 7865              lexe
-0000bb10: 725f 636f 6e66 2e74 6572 6d69 6e61 6c73  r_conf.terminals
-0000bb20: 203d 205b 7465 726d 696e 616c 735f 6279   = [terminals_by
-0000bb30: 5f6e 616d 655b 6e5d 2066 6f72 206e 2069  _name[n] for n i
-0000bb40: 6e20 6163 6365 7074 7320 6966 206e 2069  n accepts if n i
-0000bb50: 6e20 7465 726d 696e 616c 735f 6279 5f6e  n terminals_by_n
-0000bb60: 616d 655d 0a20 2020 2020 2020 2020 2020  ame].           
-0000bb70: 2020 2020 206c 6578 6572 203d 2042 6173       lexer = Bas
-0000bb80: 6963 4c65 7865 7228 6c65 7865 725f 636f  icLexer(lexer_co
-0000bb90: 6e66 290a 2020 2020 2020 2020 2020 2020  nf).            
-0000bba0: 2020 2020 6c65 7865 725f 6279 5f74 6f6b      lexer_by_tok
-0000bbb0: 656e 735b 6b65 795d 203d 206c 6578 6572  ens[key] = lexer
-0000bbc0: 0a0a 2020 2020 2020 2020 2020 2020 7365  ..            se
-0000bbd0: 6c66 2e6c 6578 6572 735b 7374 6174 655d  lf.lexers[state]
-0000bbe0: 203d 206c 6578 6572 0a0a 2020 2020 2020   = lexer..      
-0000bbf0: 2020 6173 7365 7274 2074 7261 645f 636f    assert trad_co
-0000bc00: 6e66 2e74 6572 6d69 6e61 6c73 2069 7320  nf.terminals is 
-0000bc10: 7465 726d 696e 616c 730a 2020 2020 2020  terminals.      
-0000bc20: 2020 7365 6c66 2e72 6f6f 745f 6c65 7865    self.root_lexe
-0000bc30: 7220 3d20 4261 7369 634c 6578 6572 2874  r = BasicLexer(t
-0000bc40: 7261 645f 636f 6e66 290a 0a20 2020 2064  rad_conf)..    d
-0000bc50: 6566 206c 6578 2873 656c 662c 206c 6578  ef lex(self, lex
-0000bc60: 6572 5f73 7461 7465 3a20 4c65 7865 7253  er_state: LexerS
-0000bc70: 7461 7465 2c20 7061 7273 6572 5f73 7461  tate, parser_sta
-0000bc80: 7465 3a20 416e 7929 202d 3e20 4974 6572  te: Any) -> Iter
-0000bc90: 6174 6f72 5b54 6f6b 656e 5d3a 0a20 2020  ator[Token]:.   
-0000bca0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-0000bcb0: 2020 2020 2020 7768 696c 6520 5472 7565        while True
-0000bcc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000bcd0: 2020 6c65 7865 7220 3d20 7365 6c66 2e6c    lexer = self.l
-0000bce0: 6578 6572 735b 7061 7273 6572 5f73 7461  exers[parser_sta
-0000bcf0: 7465 2e70 6f73 6974 696f 6e5d 0a20 2020  te.position].   
-0000bd00: 2020 2020 2020 2020 2020 2020 2079 6965               yie
-0000bd10: 6c64 206c 6578 6572 2e6e 6578 745f 746f  ld lexer.next_to
-0000bd20: 6b65 6e28 6c65 7865 725f 7374 6174 652c  ken(lexer_state,
-0000bd30: 2070 6172 7365 725f 7374 6174 6529 0a20   parser_state). 
-0000bd40: 2020 2020 2020 2065 7863 6570 7420 454f         except EO
-0000bd50: 4645 7272 6f72 3a0a 2020 2020 2020 2020  FError:.        
-0000bd60: 2020 2020 7061 7373 0a20 2020 2020 2020      pass.       
-0000bd70: 2065 7863 6570 7420 556e 6578 7065 6374   except Unexpect
-0000bd80: 6564 4368 6172 6163 7465 7273 2061 7320  edCharacters as 
-0000bd90: 653a 0a20 2020 2020 2020 2020 2020 2023  e:.            #
-0000bda0: 230a 0a20 2020 2020 2020 2020 2020 2023  #..            #
-0000bdb0: 230a 0a20 2020 2020 2020 2020 2020 2074  #..            t
-0000bdc0: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-0000bdd0: 2020 2020 6c61 7374 5f74 6f6b 656e 203d      last_token =
-0000bde0: 206c 6578 6572 5f73 7461 7465 2e6c 6173   lexer_state.las
-0000bdf0: 745f 746f 6b65 6e20 2023 230a 0a20 2020  t_token  ##..   
-0000be00: 2020 2020 2020 2020 2020 2020 2074 6f6b               tok
-0000be10: 656e 203d 2073 656c 662e 726f 6f74 5f6c  en = self.root_l
-0000be20: 6578 6572 2e6e 6578 745f 746f 6b65 6e28  exer.next_token(
-0000be30: 6c65 7865 725f 7374 6174 652c 2070 6172  lexer_state, par
-0000be40: 7365 725f 7374 6174 6529 0a20 2020 2020  ser_state).     
-0000be50: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0000be60: 2055 6e65 7870 6563 7465 6454 6f6b 656e   UnexpectedToken
-0000be70: 2874 6f6b 656e 2c20 652e 616c 6c6f 7765  (token, e.allowe
-0000be80: 642c 2073 7461 7465 3d70 6172 7365 725f  d, state=parser_
-0000be90: 7374 6174 652c 2074 6f6b 656e 5f68 6973  state, token_his
-0000bea0: 746f 7279 3d5b 6c61 7374 5f74 6f6b 656e  tory=[last_token
-0000beb0: 5d2c 2074 6572 6d69 6e61 6c73 5f62 795f  ], terminals_by_
-0000bec0: 6e61 6d65 3d73 656c 662e 726f 6f74 5f6c  name=self.root_l
-0000bed0: 6578 6572 2e74 6572 6d69 6e61 6c73 5f62  exer.terminals_b
-0000bee0: 795f 6e61 6d65 290a 2020 2020 2020 2020  y_name).        
-0000bef0: 2020 2020 6578 6365 7074 2055 6e65 7870      except Unexp
-0000bf00: 6563 7465 6443 6861 7261 6374 6572 733a  ectedCharacters:
-0000bf10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000bf20: 2072 6169 7365 2065 2020 2323 0a0a 0a0a   raise e  ##....
-0000bf30: 0a5f 5061 7273 6572 4172 6754 7970 653a  ._ParserArgType:
-0000bf40: 2027 5479 7065 416c 6961 7327 203d 2027   'TypeAlias' = '
-0000bf50: 4c69 7465 7261 6c5b 2265 6172 6c65 7922  Literal["earley"
-0000bf60: 2c20 226c 616c 7222 2c20 2263 796b 222c  , "lalr", "cyk",
-0000bf70: 2022 6175 746f 225d 270a 5f4c 6578 6572   "auto"]'._Lexer
-0000bf80: 4172 6754 7970 653a 2027 5479 7065 416c  ArgType: 'TypeAl
-0000bf90: 6961 7327 203d 2027 556e 696f 6e5b 4c69  ias' = 'Union[Li
-0000bfa0: 7465 7261 6c5b 2261 7574 6f22 2c20 2262  teral["auto", "b
-0000bfb0: 6173 6963 222c 2022 636f 6e74 6578 7475  asic", "contextu
-0000bfc0: 616c 222c 2022 6479 6e61 6d69 6322 2c20  al", "dynamic", 
-0000bfd0: 2264 796e 616d 6963 5f63 6f6d 706c 6574  "dynamic_complet
-0000bfe0: 6522 5d2c 2054 7970 655b 4c65 7865 725d  e"], Type[Lexer]
-0000bff0: 5d27 0a5f 4361 6c6c 6261 636b 203d 2043  ]'._Callback = C
-0000c000: 616c 6c61 626c 655b 5b54 6f6b 656e 5d2c  allable[[Token],
-0000c010: 2054 6f6b 656e 5d0a 0a63 6c61 7373 204c   Token]..class L
-0000c020: 6578 6572 436f 6e66 2853 6572 6961 6c69  exerConf(Seriali
-0000c030: 7a65 293a 0a20 2020 205f 5f73 6572 6961  ze):.    __seria
-0000c040: 6c69 7a65 5f66 6965 6c64 735f 5f20 3d20  lize_fields__ = 
-0000c050: 2774 6572 6d69 6e61 6c73 272c 2027 6967  'terminals', 'ig
-0000c060: 6e6f 7265 272c 2027 675f 7265 6765 785f  nore', 'g_regex_
-0000c070: 666c 6167 7327 2c20 2775 7365 5f62 7974  flags', 'use_byt
-0000c080: 6573 272c 2027 6c65 7865 725f 7479 7065  es', 'lexer_type
-0000c090: 270a 2020 2020 5f5f 7365 7269 616c 697a  '.    __serializ
-0000c0a0: 655f 6e61 6d65 7370 6163 655f 5f20 3d20  e_namespace__ = 
-0000c0b0: 5465 726d 696e 616c 4465 662c 0a0a 2020  TerminalDef,..  
-0000c0c0: 2020 7465 726d 696e 616c 733a 2043 6f6c    terminals: Col
-0000c0d0: 6c65 6374 696f 6e5b 5465 726d 696e 616c  lection[Terminal
-0000c0e0: 4465 665d 0a20 2020 2072 655f 6d6f 6475  Def].    re_modu
-0000c0f0: 6c65 3a20 4d6f 6475 6c65 5479 7065 0a20  le: ModuleType. 
-0000c100: 2020 2069 676e 6f72 653a 2043 6f6c 6c65     ignore: Colle
-0000c110: 6374 696f 6e5b 7374 725d 0a20 2020 2070  ction[str].    p
-0000c120: 6f73 746c 6578 3a20 274f 7074 696f 6e61  ostlex: 'Optiona
-0000c130: 6c5b 506f 7374 4c65 785d 270a 2020 2020  l[PostLex]'.    
-0000c140: 6361 6c6c 6261 636b 733a 2044 6963 745b  callbacks: Dict[
-0000c150: 7374 722c 205f 4361 6c6c 6261 636b 5d0a  str, _Callback].
-0000c160: 2020 2020 675f 7265 6765 785f 666c 6167      g_regex_flag
-0000c170: 733a 2069 6e74 0a20 2020 2073 6b69 705f  s: int.    skip_
-0000c180: 7661 6c69 6461 7469 6f6e 3a20 626f 6f6c  validation: bool
-0000c190: 0a20 2020 2075 7365 5f62 7974 6573 3a20  .    use_bytes: 
-0000c1a0: 626f 6f6c 0a20 2020 206c 6578 6572 5f74  bool.    lexer_t
-0000c1b0: 7970 653a 204f 7074 696f 6e61 6c5b 5f4c  ype: Optional[_L
-0000c1c0: 6578 6572 4172 6754 7970 655d 0a0a 2020  exerArgType]..  
-0000c1d0: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0000c1e0: 656c 662c 2074 6572 6d69 6e61 6c73 3a20  elf, terminals: 
-0000c1f0: 436f 6c6c 6563 7469 6f6e 5b54 6572 6d69  Collection[Termi
-0000c200: 6e61 6c44 6566 5d2c 2072 655f 6d6f 6475  nalDef], re_modu
-0000c210: 6c65 3a20 4d6f 6475 6c65 5479 7065 2c20  le: ModuleType, 
-0000c220: 6967 6e6f 7265 3a20 436f 6c6c 6563 7469  ignore: Collecti
-0000c230: 6f6e 5b73 7472 5d3d 2829 2c20 706f 7374  on[str]=(), post
-0000c240: 6c65 783a 2027 4f70 7469 6f6e 616c 5b50  lex: 'Optional[P
-0000c250: 6f73 744c 6578 5d27 3d4e 6f6e 652c 2063  ostLex]'=None, c
-0000c260: 616c 6c62 6163 6b73 3a20 4f70 7469 6f6e  allbacks: Option
-0000c270: 616c 5b44 6963 745b 7374 722c 205f 4361  al[Dict[str, _Ca
-0000c280: 6c6c 6261 636b 5d5d 3d4e 6f6e 652c 2067  llback]]=None, g
-0000c290: 5f72 6567 6578 5f66 6c61 6773 3a20 696e  _regex_flags: in
-0000c2a0: 743d 302c 2073 6b69 705f 7661 6c69 6461  t=0, skip_valida
-0000c2b0: 7469 6f6e 3a20 626f 6f6c 3d46 616c 7365  tion: bool=False
-0000c2c0: 2c20 7573 655f 6279 7465 733a 2062 6f6f  , use_bytes: boo
-0000c2d0: 6c3d 4661 6c73 6529 3a0a 2020 2020 2020  l=False):.      
-0000c2e0: 2020 7365 6c66 2e74 6572 6d69 6e61 6c73    self.terminals
-0000c2f0: 203d 2074 6572 6d69 6e61 6c73 0a20 2020   = terminals.   
-0000c300: 2020 2020 2073 656c 662e 7465 726d 696e       self.termin
-0000c310: 616c 735f 6279 5f6e 616d 6520 3d20 7b74  als_by_name = {t
-0000c320: 2e6e 616d 653a 2074 2066 6f72 2074 2069  .name: t for t i
-0000c330: 6e20 7365 6c66 2e74 6572 6d69 6e61 6c73  n self.terminals
-0000c340: 7d0a 2020 2020 2020 2020 6173 7365 7274  }.        assert
-0000c350: 206c 656e 2873 656c 662e 7465 726d 696e   len(self.termin
-0000c360: 616c 7329 203d 3d20 6c65 6e28 7365 6c66  als) == len(self
-0000c370: 2e74 6572 6d69 6e61 6c73 5f62 795f 6e61  .terminals_by_na
-0000c380: 6d65 290a 2020 2020 2020 2020 7365 6c66  me).        self
-0000c390: 2e69 676e 6f72 6520 3d20 6967 6e6f 7265  .ignore = ignore
-0000c3a0: 0a20 2020 2020 2020 2073 656c 662e 706f  .        self.po
-0000c3b0: 7374 6c65 7820 3d20 706f 7374 6c65 780a  stlex = postlex.
-0000c3c0: 2020 2020 2020 2020 7365 6c66 2e63 616c          self.cal
-0000c3d0: 6c62 6163 6b73 203d 2063 616c 6c62 6163  lbacks = callbac
-0000c3e0: 6b73 206f 7220 7b7d 0a20 2020 2020 2020  ks or {}.       
-0000c3f0: 2073 656c 662e 675f 7265 6765 785f 666c   self.g_regex_fl
-0000c400: 6167 7320 3d20 675f 7265 6765 785f 666c  ags = g_regex_fl
-0000c410: 6167 730a 2020 2020 2020 2020 7365 6c66  ags.        self
-0000c420: 2e72 655f 6d6f 6475 6c65 203d 2072 655f  .re_module = re_
-0000c430: 6d6f 6475 6c65 0a20 2020 2020 2020 2073  module.        s
-0000c440: 656c 662e 736b 6970 5f76 616c 6964 6174  elf.skip_validat
-0000c450: 696f 6e20 3d20 736b 6970 5f76 616c 6964  ion = skip_valid
-0000c460: 6174 696f 6e0a 2020 2020 2020 2020 7365  ation.        se
-0000c470: 6c66 2e75 7365 5f62 7974 6573 203d 2075  lf.use_bytes = u
-0000c480: 7365 5f62 7974 6573 0a20 2020 2020 2020  se_bytes.       
-0000c490: 2073 656c 662e 6c65 7865 725f 7479 7065   self.lexer_type
-0000c4a0: 203d 204e 6f6e 650a 0a20 2020 2064 6566   = None..    def
-0000c4b0: 205f 6465 7365 7269 616c 697a 6528 7365   _deserialize(se
-0000c4c0: 6c66 293a 0a20 2020 2020 2020 2073 656c  lf):.        sel
-0000c4d0: 662e 7465 726d 696e 616c 735f 6279 5f6e  f.terminals_by_n
-0000c4e0: 616d 6520 3d20 7b74 2e6e 616d 653a 2074  ame = {t.name: t
-0000c4f0: 2066 6f72 2074 2069 6e20 7365 6c66 2e74   for t in self.t
-0000c500: 6572 6d69 6e61 6c73 7d0a 0a20 2020 2064  erminals}..    d
-0000c510: 6566 205f 5f64 6565 7063 6f70 795f 5f28  ef __deepcopy__(
-0000c520: 7365 6c66 2c20 6d65 6d6f 3d4e 6f6e 6529  self, memo=None)
-0000c530: 3a0a 2020 2020 2020 2020 7265 7475 726e  :.        return
-0000c540: 2074 7970 6528 7365 6c66 2928 0a20 2020   type(self)(.   
-0000c550: 2020 2020 2020 2020 2064 6565 7063 6f70           deepcop
-0000c560: 7928 7365 6c66 2e74 6572 6d69 6e61 6c73  y(self.terminals
-0000c570: 2c20 6d65 6d6f 292c 0a20 2020 2020 2020  , memo),.       
-0000c580: 2020 2020 2073 656c 662e 7265 5f6d 6f64       self.re_mod
-0000c590: 756c 652c 0a20 2020 2020 2020 2020 2020  ule,.           
-0000c5a0: 2064 6565 7063 6f70 7928 7365 6c66 2e69   deepcopy(self.i
-0000c5b0: 676e 6f72 652c 206d 656d 6f29 2c0a 2020  gnore, memo),.  
-0000c5c0: 2020 2020 2020 2020 2020 6465 6570 636f            deepco
-0000c5d0: 7079 2873 656c 662e 706f 7374 6c65 782c  py(self.postlex,
-0000c5e0: 206d 656d 6f29 2c0a 2020 2020 2020 2020   memo),.        
-0000c5f0: 2020 2020 6465 6570 636f 7079 2873 656c      deepcopy(sel
-0000c600: 662e 6361 6c6c 6261 636b 732c 206d 656d  f.callbacks, mem
-0000c610: 6f29 2c0a 2020 2020 2020 2020 2020 2020  o),.            
-0000c620: 6465 6570 636f 7079 2873 656c 662e 675f  deepcopy(self.g_
-0000c630: 7265 6765 785f 666c 6167 732c 206d 656d  regex_flags, mem
-0000c640: 6f29 2c0a 2020 2020 2020 2020 2020 2020  o),.            
-0000c650: 6465 6570 636f 7079 2873 656c 662e 736b  deepcopy(self.sk
-0000c660: 6970 5f76 616c 6964 6174 696f 6e2c 206d  ip_validation, m
-0000c670: 656d 6f29 2c0a 2020 2020 2020 2020 2020  emo),.          
-0000c680: 2020 6465 6570 636f 7079 2873 656c 662e    deepcopy(self.
-0000c690: 7573 655f 6279 7465 732c 206d 656d 6f29  use_bytes, memo)
-0000c6a0: 2c0a 2020 2020 2020 2020 290a 0a0a 636c  ,.        )...cl
-0000c6b0: 6173 7320 5061 7273 6572 436f 6e66 2853  ass ParserConf(S
-0000c6c0: 6572 6961 6c69 7a65 293a 0a20 2020 205f  erialize):.    _
-0000c6d0: 5f73 6572 6961 6c69 7a65 5f66 6965 6c64  _serialize_field
-0000c6e0: 735f 5f20 3d20 2772 756c 6573 272c 2027  s__ = 'rules', '
-0000c6f0: 7374 6172 7427 2c20 2770 6172 7365 725f  start', 'parser_
-0000c700: 7479 7065 270a 0a20 2020 2064 6566 205f  type'..    def _
-0000c710: 5f69 6e69 745f 5f28 7365 6c66 2c20 7275  _init__(self, ru
-0000c720: 6c65 732c 2063 616c 6c62 6163 6b73 2c20  les, callbacks, 
-0000c730: 7374 6172 7429 3a0a 2020 2020 2020 2020  start):.        
-0000c740: 6173 7365 7274 2069 7369 6e73 7461 6e63  assert isinstanc
-0000c750: 6528 7374 6172 742c 206c 6973 7429 0a20  e(start, list). 
-0000c760: 2020 2020 2020 2073 656c 662e 7275 6c65         self.rule
-0000c770: 7320 3d20 7275 6c65 730a 2020 2020 2020  s = rules.      
-0000c780: 2020 7365 6c66 2e63 616c 6c62 6163 6b73    self.callbacks
-0000c790: 203d 2063 616c 6c62 6163 6b73 0a20 2020   = callbacks.   
-0000c7a0: 2020 2020 2073 656c 662e 7374 6172 7420       self.start 
-0000c7b0: 3d20 7374 6172 740a 0a20 2020 2020 2020  = start..       
-0000c7c0: 2073 656c 662e 7061 7273 6572 5f74 7970   self.parser_typ
-0000c7d0: 6520 3d20 4e6f 6e65 0a0a 0a66 726f 6d20  e = None...from 
-0000c7e0: 6675 6e63 746f 6f6c 7320 696d 706f 7274  functools import
-0000c7f0: 2070 6172 7469 616c 2c20 7772 6170 730a   partial, wraps.
-0000c800: 6672 6f6d 2069 7465 7274 6f6f 6c73 2069  from itertools i
-0000c810: 6d70 6f72 7420 7072 6f64 7563 740a 0a0a  mport product...
-0000c820: 636c 6173 7320 4578 7061 6e64 5369 6e67  class ExpandSing
-0000c830: 6c65 4368 696c 643a 0a20 2020 2064 6566  leChild:.    def
-0000c840: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-0000c850: 6e6f 6465 5f62 7569 6c64 6572 293a 0a20  node_builder):. 
-0000c860: 2020 2020 2020 2073 656c 662e 6e6f 6465         self.node
-0000c870: 5f62 7569 6c64 6572 203d 206e 6f64 655f  _builder = node_
-0000c880: 6275 696c 6465 720a 0a20 2020 2064 6566  builder..    def
-0000c890: 205f 5f63 616c 6c5f 5f28 7365 6c66 2c20   __call__(self, 
-0000c8a0: 6368 696c 6472 656e 293a 0a20 2020 2020  children):.     
-0000c8b0: 2020 2069 6620 6c65 6e28 6368 696c 6472     if len(childr
-0000c8c0: 656e 2920 3d3d 2031 3a0a 2020 2020 2020  en) == 1:.      
-0000c8d0: 2020 2020 2020 7265 7475 726e 2063 6869        return chi
-0000c8e0: 6c64 7265 6e5b 305d 0a20 2020 2020 2020  ldren[0].       
-0000c8f0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0000c900: 2020 2072 6574 7572 6e20 7365 6c66 2e6e     return self.n
-0000c910: 6f64 655f 6275 696c 6465 7228 6368 696c  ode_builder(chil
-0000c920: 6472 656e 290a 0a0a 0a63 6c61 7373 2050  dren)....class P
-0000c930: 726f 7061 6761 7465 506f 7369 7469 6f6e  ropagatePosition
-0000c940: 733a 0a20 2020 2064 6566 205f 5f69 6e69  s:.    def __ini
-0000c950: 745f 5f28 7365 6c66 2c20 6e6f 6465 5f62  t__(self, node_b
-0000c960: 7569 6c64 6572 2c20 6e6f 6465 5f66 696c  uilder, node_fil
-0000c970: 7465 723d 4e6f 6e65 293a 0a20 2020 2020  ter=None):.     
-0000c980: 2020 2073 656c 662e 6e6f 6465 5f62 7569     self.node_bui
-0000c990: 6c64 6572 203d 206e 6f64 655f 6275 696c  lder = node_buil
-0000c9a0: 6465 720a 2020 2020 2020 2020 7365 6c66  der.        self
-0000c9b0: 2e6e 6f64 655f 6669 6c74 6572 203d 206e  .node_filter = n
-0000c9c0: 6f64 655f 6669 6c74 6572 0a0a 2020 2020  ode_filter..    
-0000c9d0: 6465 6620 5f5f 6361 6c6c 5f5f 2873 656c  def __call__(sel
-0000c9e0: 662c 2063 6869 6c64 7265 6e29 3a0a 2020  f, children):.  
-0000c9f0: 2020 2020 2020 7265 7320 3d20 7365 6c66        res = self
-0000ca00: 2e6e 6f64 655f 6275 696c 6465 7228 6368  .node_builder(ch
-0000ca10: 696c 6472 656e 290a 0a20 2020 2020 2020  ildren)..       
-0000ca20: 2069 6620 6973 696e 7374 616e 6365 2872   if isinstance(r
-0000ca30: 6573 2c20 5472 6565 293a 0a20 2020 2020  es, Tree):.     
-0000ca40: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
-0000ca50: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
-0000ca60: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
-0000ca70: 2020 2020 2020 2023 230a 0a0a 2020 2020         ##...    
-0000ca80: 2020 2020 2020 2020 7265 735f 6d65 7461          res_meta
-0000ca90: 203d 2072 6573 2e6d 6574 610a 0a20 2020   = res.meta..   
-0000caa0: 2020 2020 2020 2020 2066 6972 7374 5f6d           first_m
-0000cab0: 6574 6120 3d20 7365 6c66 2e5f 7070 5f67  eta = self._pp_g
-0000cac0: 6574 5f6d 6574 6128 6368 696c 6472 656e  et_meta(children
-0000cad0: 290a 2020 2020 2020 2020 2020 2020 6966  ).            if
-0000cae0: 2066 6972 7374 5f6d 6574 6120 6973 206e   first_meta is n
-0000caf0: 6f74 204e 6f6e 653a 0a20 2020 2020 2020  ot None:.       
-0000cb00: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0000cb10: 6861 7361 7474 7228 7265 735f 6d65 7461  hasattr(res_meta
-0000cb20: 2c20 276c 696e 6527 293a 0a20 2020 2020  , 'line'):.     
-0000cb30: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-0000cb40: 230a 0a20 2020 2020 2020 2020 2020 2020  #..             
-0000cb50: 2020 2020 2020 2072 6573 5f6d 6574 612e         res_meta.
-0000cb60: 6c69 6e65 203d 2067 6574 6174 7472 2866  line = getattr(f
-0000cb70: 6972 7374 5f6d 6574 612c 2027 636f 6e74  irst_meta, 'cont
-0000cb80: 6169 6e65 725f 6c69 6e65 272c 2066 6972  ainer_line', fir
-0000cb90: 7374 5f6d 6574 612e 6c69 6e65 290a 2020  st_meta.line).  
-0000cba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cbb0: 2020 7265 735f 6d65 7461 2e63 6f6c 756d    res_meta.colum
-0000cbc0: 6e20 3d20 6765 7461 7474 7228 6669 7273  n = getattr(firs
-0000cbd0: 745f 6d65 7461 2c20 2763 6f6e 7461 696e  t_meta, 'contain
-0000cbe0: 6572 5f63 6f6c 756d 6e27 2c20 6669 7273  er_column', firs
-0000cbf0: 745f 6d65 7461 2e63 6f6c 756d 6e29 0a20  t_meta.column). 
-0000cc00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000cc10: 2020 2072 6573 5f6d 6574 612e 7374 6172     res_meta.star
-0000cc20: 745f 706f 7320 3d20 6765 7461 7474 7228  t_pos = getattr(
-0000cc30: 6669 7273 745f 6d65 7461 2c20 2763 6f6e  first_meta, 'con
-0000cc40: 7461 696e 6572 5f73 7461 7274 5f70 6f73  tainer_start_pos
-0000cc50: 272c 2066 6972 7374 5f6d 6574 612e 7374  ', first_meta.st
-0000cc60: 6172 745f 706f 7329 0a20 2020 2020 2020  art_pos).       
-0000cc70: 2020 2020 2020 2020 2020 2020 2072 6573               res
-0000cc80: 5f6d 6574 612e 656d 7074 7920 3d20 4661  _meta.empty = Fa
-0000cc90: 6c73 650a 0a20 2020 2020 2020 2020 2020  lse..           
-0000cca0: 2020 2020 2072 6573 5f6d 6574 612e 636f       res_meta.co
-0000ccb0: 6e74 6169 6e65 725f 6c69 6e65 203d 2067  ntainer_line = g
-0000ccc0: 6574 6174 7472 2866 6972 7374 5f6d 6574  etattr(first_met
-0000ccd0: 612c 2027 636f 6e74 6169 6e65 725f 6c69  a, 'container_li
-0000cce0: 6e65 272c 2066 6972 7374 5f6d 6574 612e  ne', first_meta.
-0000ccf0: 6c69 6e65 290a 2020 2020 2020 2020 2020  line).          
-0000cd00: 2020 2020 2020 7265 735f 6d65 7461 2e63        res_meta.c
-0000cd10: 6f6e 7461 696e 6572 5f63 6f6c 756d 6e20  ontainer_column 
-0000cd20: 3d20 6765 7461 7474 7228 6669 7273 745f  = getattr(first_
-0000cd30: 6d65 7461 2c20 2763 6f6e 7461 696e 6572  meta, 'container
-0000cd40: 5f63 6f6c 756d 6e27 2c20 6669 7273 745f  _column', first_
-0000cd50: 6d65 7461 2e63 6f6c 756d 6e29 0a0a 2020  meta.column)..  
-0000cd60: 2020 2020 2020 2020 2020 6c61 7374 5f6d            last_m
-0000cd70: 6574 6120 3d20 7365 6c66 2e5f 7070 5f67  eta = self._pp_g
-0000cd80: 6574 5f6d 6574 6128 7265 7665 7273 6564  et_meta(reversed
-0000cd90: 2863 6869 6c64 7265 6e29 290a 2020 2020  (children)).    
-0000cda0: 2020 2020 2020 2020 6966 206c 6173 745f          if last_
-0000cdb0: 6d65 7461 2069 7320 6e6f 7420 4e6f 6e65  meta is not None
-0000cdc0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000cdd0: 2020 6966 206e 6f74 2068 6173 6174 7472    if not hasattr
-0000cde0: 2872 6573 5f6d 6574 612c 2027 656e 645f  (res_meta, 'end_
-0000cdf0: 6c69 6e65 2729 3a0a 2020 2020 2020 2020  line'):.        
-0000ce00: 2020 2020 2020 2020 2020 2020 7265 735f              res_
-0000ce10: 6d65 7461 2e65 6e64 5f6c 696e 6520 3d20  meta.end_line = 
-0000ce20: 6765 7461 7474 7228 6c61 7374 5f6d 6574  getattr(last_met
-0000ce30: 612c 2027 636f 6e74 6169 6e65 725f 656e  a, 'container_en
-0000ce40: 645f 6c69 6e65 272c 206c 6173 745f 6d65  d_line', last_me
-0000ce50: 7461 2e65 6e64 5f6c 696e 6529 0a20 2020  ta.end_line).   
-0000ce60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ce70: 2072 6573 5f6d 6574 612e 656e 645f 636f   res_meta.end_co
-0000ce80: 6c75 6d6e 203d 2067 6574 6174 7472 286c  lumn = getattr(l
-0000ce90: 6173 745f 6d65 7461 2c20 2763 6f6e 7461  ast_meta, 'conta
-0000cea0: 696e 6572 5f65 6e64 5f63 6f6c 756d 6e27  iner_end_column'
-0000ceb0: 2c20 6c61 7374 5f6d 6574 612e 656e 645f  , last_meta.end_
-0000cec0: 636f 6c75 6d6e 290a 2020 2020 2020 2020  column).        
-0000ced0: 2020 2020 2020 2020 2020 2020 7265 735f              res_
-0000cee0: 6d65 7461 2e65 6e64 5f70 6f73 203d 2067  meta.end_pos = g
-0000cef0: 6574 6174 7472 286c 6173 745f 6d65 7461  etattr(last_meta
-0000cf00: 2c20 2763 6f6e 7461 696e 6572 5f65 6e64  , 'container_end
-0000cf10: 5f70 6f73 272c 206c 6173 745f 6d65 7461  _pos', last_meta
-0000cf20: 2e65 6e64 5f70 6f73 290a 2020 2020 2020  .end_pos).      
-0000cf30: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0000cf40: 735f 6d65 7461 2e65 6d70 7479 203d 2046  s_meta.empty = F
-0000cf50: 616c 7365 0a0a 2020 2020 2020 2020 2020  alse..          
-0000cf60: 2020 2020 2020 7265 735f 6d65 7461 2e63        res_meta.c
-0000cf70: 6f6e 7461 696e 6572 5f65 6e64 5f6c 696e  ontainer_end_lin
-0000cf80: 6520 3d20 6765 7461 7474 7228 6c61 7374  e = getattr(last
-0000cf90: 5f6d 6574 612c 2027 636f 6e74 6169 6e65  _meta, 'containe
-0000cfa0: 725f 656e 645f 6c69 6e65 272c 206c 6173  r_end_line', las
-0000cfb0: 745f 6d65 7461 2e65 6e64 5f6c 696e 6529  t_meta.end_line)
-0000cfc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000cfd0: 2072 6573 5f6d 6574 612e 636f 6e74 6169   res_meta.contai
-0000cfe0: 6e65 725f 656e 645f 636f 6c75 6d6e 203d  ner_end_column =
-0000cff0: 2067 6574 6174 7472 286c 6173 745f 6d65   getattr(last_me
-0000d000: 7461 2c20 2763 6f6e 7461 696e 6572 5f65  ta, 'container_e
-0000d010: 6e64 5f63 6f6c 756d 6e27 2c20 6c61 7374  nd_column', last
-0000d020: 5f6d 6574 612e 656e 645f 636f 6c75 6d6e  _meta.end_column
-0000d030: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
-0000d040: 6e20 7265 730a 0a20 2020 2064 6566 205f  n res..    def _
-0000d050: 7070 5f67 6574 5f6d 6574 6128 7365 6c66  pp_get_meta(self
-0000d060: 2c20 6368 696c 6472 656e 293a 0a20 2020  , children):.   
-0000d070: 2020 2020 2066 6f72 2063 2069 6e20 6368       for c in ch
-0000d080: 696c 6472 656e 3a0a 2020 2020 2020 2020  ildren:.        
-0000d090: 2020 2020 6966 2073 656c 662e 6e6f 6465      if self.node
-0000d0a0: 5f66 696c 7465 7220 6973 206e 6f74 204e  _filter is not N
-0000d0b0: 6f6e 6520 616e 6420 6e6f 7420 7365 6c66  one and not self
-0000d0c0: 2e6e 6f64 655f 6669 6c74 6572 2863 293a  .node_filter(c):
-0000d0d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d0e0: 2063 6f6e 7469 6e75 650a 2020 2020 2020   continue.      
-0000d0f0: 2020 2020 2020 6966 2069 7369 6e73 7461        if isinsta
-0000d100: 6e63 6528 632c 2054 7265 6529 3a0a 2020  nce(c, Tree):.  
-0000d110: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000d120: 206e 6f74 2063 2e6d 6574 612e 656d 7074   not c.meta.empt
-0000d130: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-0000d140: 2020 2020 2020 2072 6574 7572 6e20 632e         return c.
-0000d150: 6d65 7461 0a20 2020 2020 2020 2020 2020  meta.           
-0000d160: 2065 6c69 6620 6973 696e 7374 616e 6365   elif isinstance
-0000d170: 2863 2c20 546f 6b65 6e29 3a0a 2020 2020  (c, Token):.    
-0000d180: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000d190: 726e 2063 0a20 2020 2020 2020 2020 2020  rn c.           
-0000d1a0: 2065 6c69 6620 6861 7361 7474 7228 632c   elif hasattr(c,
-0000d1b0: 2027 5f5f 6c61 726b 5f6d 6574 615f 5f27   '__lark_meta__'
-0000d1c0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000d1d0: 2020 2072 6574 7572 6e20 632e 5f5f 6c61     return c.__la
-0000d1e0: 726b 5f6d 6574 615f 5f28 290a 0a64 6566  rk_meta__()..def
-0000d1f0: 206d 616b 655f 7072 6f70 6167 6174 655f   make_propagate_
-0000d200: 706f 7369 7469 6f6e 7328 6f70 7469 6f6e  positions(option
-0000d210: 293a 0a20 2020 2069 6620 6361 6c6c 6162  ):.    if callab
-0000d220: 6c65 286f 7074 696f 6e29 3a0a 2020 2020  le(option):.    
-0000d230: 2020 2020 7265 7475 726e 2070 6172 7469      return parti
-0000d240: 616c 2850 726f 7061 6761 7465 506f 7369  al(PropagatePosi
-0000d250: 7469 6f6e 732c 206e 6f64 655f 6669 6c74  tions, node_filt
-0000d260: 6572 3d6f 7074 696f 6e29 0a20 2020 2065  er=option).    e
-0000d270: 6c69 6620 6f70 7469 6f6e 2069 7320 5472  lif option is Tr
-0000d280: 7565 3a0a 2020 2020 2020 2020 7265 7475  ue:.        retu
-0000d290: 726e 2050 726f 7061 6761 7465 506f 7369  rn PropagatePosi
-0000d2a0: 7469 6f6e 730a 2020 2020 656c 6966 206f  tions.    elif o
-0000d2b0: 7074 696f 6e20 6973 2046 616c 7365 3a0a  ption is False:.
-0000d2c0: 2020 2020 2020 2020 7265 7475 726e 204e          return N
-0000d2d0: 6f6e 650a 0a20 2020 2072 6169 7365 2043  one..    raise C
-0000d2e0: 6f6e 6669 6775 7261 7469 6f6e 4572 726f  onfigurationErro
-0000d2f0: 7228 2749 6e76 616c 6964 206f 7074 696f  r('Invalid optio
-0000d300: 6e20 666f 7220 7072 6f70 6167 6174 655f  n for propagate_
-0000d310: 706f 7369 7469 6f6e 733a 2025 7227 2025  positions: %r' %
-0000d320: 206f 7074 696f 6e29 0a0a 0a63 6c61 7373   option)...class
-0000d330: 2043 6869 6c64 4669 6c74 6572 3a0a 2020   ChildFilter:.  
-0000d340: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0000d350: 656c 662c 2074 6f5f 696e 636c 7564 652c  elf, to_include,
-0000d360: 2061 7070 656e 645f 6e6f 6e65 2c20 6e6f   append_none, no
-0000d370: 6465 5f62 7569 6c64 6572 293a 0a20 2020  de_builder):.   
-0000d380: 2020 2020 2073 656c 662e 6e6f 6465 5f62       self.node_b
-0000d390: 7569 6c64 6572 203d 206e 6f64 655f 6275  uilder = node_bu
-0000d3a0: 696c 6465 720a 2020 2020 2020 2020 7365  ilder.        se
-0000d3b0: 6c66 2e74 6f5f 696e 636c 7564 6520 3d20  lf.to_include = 
-0000d3c0: 746f 5f69 6e63 6c75 6465 0a20 2020 2020  to_include.     
-0000d3d0: 2020 2073 656c 662e 6170 7065 6e64 5f6e     self.append_n
-0000d3e0: 6f6e 6520 3d20 6170 7065 6e64 5f6e 6f6e  one = append_non
-0000d3f0: 650a 0a20 2020 2064 6566 205f 5f63 616c  e..    def __cal
-0000d400: 6c5f 5f28 7365 6c66 2c20 6368 696c 6472  l__(self, childr
-0000d410: 656e 293a 0a20 2020 2020 2020 2066 696c  en):.        fil
-0000d420: 7465 7265 6420 3d20 5b5d 0a0a 2020 2020  tered = []..    
-0000d430: 2020 2020 666f 7220 692c 2074 6f5f 6578      for i, to_ex
-0000d440: 7061 6e64 2c20 6164 645f 6e6f 6e65 2069  pand, add_none i
-0000d450: 6e20 7365 6c66 2e74 6f5f 696e 636c 7564  n self.to_includ
-0000d460: 653a 0a20 2020 2020 2020 2020 2020 2069  e:.            i
-0000d470: 6620 6164 645f 6e6f 6e65 3a0a 2020 2020  f add_none:.    
-0000d480: 2020 2020 2020 2020 2020 2020 6669 6c74              filt
-0000d490: 6572 6564 202b 3d20 5b4e 6f6e 655d 202a  ered += [None] *
-0000d4a0: 2061 6464 5f6e 6f6e 650a 2020 2020 2020   add_none.      
-0000d4b0: 2020 2020 2020 6966 2074 6f5f 6578 7061        if to_expa
-0000d4c0: 6e64 3a0a 2020 2020 2020 2020 2020 2020  nd:.            
-0000d4d0: 2020 2020 6669 6c74 6572 6564 202b 3d20      filtered += 
-0000d4e0: 6368 696c 6472 656e 5b69 5d2e 6368 696c  children[i].chil
-0000d4f0: 6472 656e 0a20 2020 2020 2020 2020 2020  dren.           
-0000d500: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-0000d510: 2020 2020 2020 2066 696c 7465 7265 642e         filtered.
-0000d520: 6170 7065 6e64 2863 6869 6c64 7265 6e5b  append(children[
-0000d530: 695d 290a 0a20 2020 2020 2020 2069 6620  i])..        if 
-0000d540: 7365 6c66 2e61 7070 656e 645f 6e6f 6e65  self.append_none
-0000d550: 3a0a 2020 2020 2020 2020 2020 2020 6669  :.            fi
-0000d560: 6c74 6572 6564 202b 3d20 5b4e 6f6e 655d  ltered += [None]
-0000d570: 202a 2073 656c 662e 6170 7065 6e64 5f6e   * self.append_n
-0000d580: 6f6e 650a 0a20 2020 2020 2020 2072 6574  one..        ret
-0000d590: 7572 6e20 7365 6c66 2e6e 6f64 655f 6275  urn self.node_bu
-0000d5a0: 696c 6465 7228 6669 6c74 6572 6564 290a  ilder(filtered).
-0000d5b0: 0a0a 636c 6173 7320 4368 696c 6446 696c  ..class ChildFil
-0000d5c0: 7465 724c 414c 5228 4368 696c 6446 696c  terLALR(ChildFil
-0000d5d0: 7465 7229 3a0a 2020 2020 232d 2d0a 0a20  ter):.    #--.. 
-0000d5e0: 2020 2064 6566 205f 5f63 616c 6c5f 5f28     def __call__(
-0000d5f0: 7365 6c66 2c20 6368 696c 6472 656e 293a  self, children):
-0000d600: 0a20 2020 2020 2020 2066 696c 7465 7265  .        filtere
-0000d610: 6420 3d20 5b5d 0a20 2020 2020 2020 2066  d = [].        f
-0000d620: 6f72 2069 2c20 746f 5f65 7870 616e 642c  or i, to_expand,
-0000d630: 2061 6464 5f6e 6f6e 6520 696e 2073 656c   add_none in sel
-0000d640: 662e 746f 5f69 6e63 6c75 6465 3a0a 2020  f.to_include:.  
-0000d650: 2020 2020 2020 2020 2020 6966 2061 6464            if add
-0000d660: 5f6e 6f6e 653a 0a20 2020 2020 2020 2020  _none:.         
-0000d670: 2020 2020 2020 2066 696c 7465 7265 6420         filtered 
-0000d680: 2b3d 205b 4e6f 6e65 5d20 2a20 6164 645f  += [None] * add_
-0000d690: 6e6f 6e65 0a20 2020 2020 2020 2020 2020  none.           
-0000d6a0: 2069 6620 746f 5f65 7870 616e 643a 0a20   if to_expand:. 
-0000d6b0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000d6c0: 6620 6669 6c74 6572 6564 3a0a 2020 2020  f filtered:.    
-0000d6d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d6e0: 6669 6c74 6572 6564 202b 3d20 6368 696c  filtered += chil
-0000d6f0: 6472 656e 5b69 5d2e 6368 696c 6472 656e  dren[i].children
-0000d700: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000d710: 2065 6c73 653a 2020 2023 230a 0a20 2020   else:   ##..   
-0000d720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000d730: 2066 696c 7465 7265 6420 3d20 6368 696c   filtered = chil
-0000d740: 6472 656e 5b69 5d2e 6368 696c 6472 656e  dren[i].children
-0000d750: 0a20 2020 2020 2020 2020 2020 2065 6c73  .            els
-0000d760: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-0000d770: 2020 2066 696c 7465 7265 642e 6170 7065     filtered.appe
-0000d780: 6e64 2863 6869 6c64 7265 6e5b 695d 290a  nd(children[i]).
-0000d790: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
-0000d7a0: 2e61 7070 656e 645f 6e6f 6e65 3a0a 2020  .append_none:.  
-0000d7b0: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
-0000d7c0: 6564 202b 3d20 5b4e 6f6e 655d 202a 2073  ed += [None] * s
-0000d7d0: 656c 662e 6170 7065 6e64 5f6e 6f6e 650a  elf.append_none.
-0000d7e0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-0000d7f0: 7365 6c66 2e6e 6f64 655f 6275 696c 6465  self.node_builde
-0000d800: 7228 6669 6c74 6572 6564 290a 0a0a 636c  r(filtered)...cl
-0000d810: 6173 7320 4368 696c 6446 696c 7465 724c  ass ChildFilterL
-0000d820: 414c 525f 4e6f 506c 6163 6568 6f6c 6465  ALR_NoPlaceholde
-0000d830: 7273 2843 6869 6c64 4669 6c74 6572 293a  rs(ChildFilter):
-0000d840: 0a20 2020 2023 2d2d 0a20 2020 2064 6566  .    #--.    def
-0000d850: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
-0000d860: 746f 5f69 6e63 6c75 6465 2c20 6e6f 6465  to_include, node
-0000d870: 5f62 7569 6c64 6572 293a 0a20 2020 2020  _builder):.     
-0000d880: 2020 2073 656c 662e 6e6f 6465 5f62 7569     self.node_bui
-0000d890: 6c64 6572 203d 206e 6f64 655f 6275 696c  lder = node_buil
-0000d8a0: 6465 720a 2020 2020 2020 2020 7365 6c66  der.        self
-0000d8b0: 2e74 6f5f 696e 636c 7564 6520 3d20 746f  .to_include = to
-0000d8c0: 5f69 6e63 6c75 6465 0a0a 2020 2020 6465  _include..    de
-0000d8d0: 6620 5f5f 6361 6c6c 5f5f 2873 656c 662c  f __call__(self,
-0000d8e0: 2063 6869 6c64 7265 6e29 3a0a 2020 2020   children):.    
-0000d8f0: 2020 2020 6669 6c74 6572 6564 203d 205b      filtered = [
-0000d900: 5d0a 2020 2020 2020 2020 666f 7220 692c  ].        for i,
-0000d910: 2074 6f5f 6578 7061 6e64 2069 6e20 7365   to_expand in se
-0000d920: 6c66 2e74 6f5f 696e 636c 7564 653a 0a20  lf.to_include:. 
-0000d930: 2020 2020 2020 2020 2020 2069 6620 746f             if to
-0000d940: 5f65 7870 616e 643a 0a20 2020 2020 2020  _expand:.       
-0000d950: 2020 2020 2020 2020 2069 6620 6669 6c74           if filt
-0000d960: 6572 6564 3a0a 2020 2020 2020 2020 2020  ered:.          
-0000d970: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
-0000d980: 6564 202b 3d20 6368 696c 6472 656e 5b69  ed += children[i
-0000d990: 5d2e 6368 696c 6472 656e 0a20 2020 2020  ].children.     
-0000d9a0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0000d9b0: 2020 2023 230a 0a20 2020 2020 2020 2020     ##..         
-0000d9c0: 2020 2020 2020 2020 2020 2066 696c 7465             filte
-0000d9d0: 7265 6420 3d20 6368 696c 6472 656e 5b69  red = children[i
-0000d9e0: 5d2e 6368 696c 6472 656e 0a20 2020 2020  ].children.     
-0000d9f0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-0000da00: 2020 2020 2020 2020 2020 2020 2066 696c               fil
-0000da10: 7465 7265 642e 6170 7065 6e64 2863 6869  tered.append(chi
-0000da20: 6c64 7265 6e5b 695d 290a 2020 2020 2020  ldren[i]).      
-0000da30: 2020 7265 7475 726e 2073 656c 662e 6e6f    return self.no
-0000da40: 6465 5f62 7569 6c64 6572 2866 696c 7465  de_builder(filte
-0000da50: 7265 6429 0a0a 0a64 6566 205f 7368 6f75  red)...def _shou
-0000da60: 6c64 5f65 7870 616e 6428 7379 6d29 3a0a  ld_expand(sym):.
-0000da70: 2020 2020 7265 7475 726e 206e 6f74 2073      return not s
-0000da80: 796d 2e69 735f 7465 726d 2061 6e64 2073  ym.is_term and s
-0000da90: 796d 2e6e 616d 652e 7374 6172 7473 7769  ym.name.startswi
-0000daa0: 7468 2827 5f27 290a 0a0a 6465 6620 6d61  th('_')...def ma
-0000dab0: 7962 655f 6372 6561 7465 5f63 6869 6c64  ybe_create_child
-0000dac0: 5f66 696c 7465 7228 6578 7061 6e73 696f  _filter(expansio
-0000dad0: 6e2c 206b 6565 705f 616c 6c5f 746f 6b65  n, keep_all_toke
-0000dae0: 6e73 2c20 616d 6269 6775 6f75 732c 205f  ns, ambiguous, _
-0000daf0: 656d 7074 795f 696e 6469 6365 733a 204c  empty_indices: L
-0000db00: 6973 745b 626f 6f6c 5d29 3a0a 2020 2020  ist[bool]):.    
-0000db10: 2323 0a0a 2020 2020 6966 205f 656d 7074  ##..    if _empt
-0000db20: 795f 696e 6469 6365 733a 0a20 2020 2020  y_indices:.     
-0000db30: 2020 2061 7373 6572 7420 5f65 6d70 7479     assert _empty
-0000db40: 5f69 6e64 6963 6573 2e63 6f75 6e74 2846  _indices.count(F
-0000db50: 616c 7365 2920 3d3d 206c 656e 2865 7870  alse) == len(exp
-0000db60: 616e 7369 6f6e 290a 2020 2020 2020 2020  ansion).        
-0000db70: 7320 3d20 2727 2e6a 6f69 6e28 7374 7228  s = ''.join(str(
-0000db80: 696e 7428 6229 2920 666f 7220 6220 696e  int(b)) for b in
-0000db90: 205f 656d 7074 795f 696e 6469 6365 7329   _empty_indices)
-0000dba0: 0a20 2020 2020 2020 2065 6d70 7479 5f69  .        empty_i
-0000dbb0: 6e64 6963 6573 203d 205b 6c65 6e28 6f6e  ndices = [len(on
-0000dbc0: 6573 2920 666f 7220 6f6e 6573 2069 6e20  es) for ones in 
-0000dbd0: 732e 7370 6c69 7428 2730 2729 5d0a 2020  s.split('0')].  
-0000dbe0: 2020 2020 2020 6173 7365 7274 206c 656e        assert len
-0000dbf0: 2865 6d70 7479 5f69 6e64 6963 6573 2920  (empty_indices) 
-0000dc00: 3d3d 206c 656e 2865 7870 616e 7369 6f6e  == len(expansion
-0000dc10: 292b 312c 2028 656d 7074 795f 696e 6469  )+1, (empty_indi
-0000dc20: 6365 732c 206c 656e 2865 7870 616e 7369  ces, len(expansi
-0000dc30: 6f6e 2929 0a20 2020 2065 6c73 653a 0a20  on)).    else:. 
-0000dc40: 2020 2020 2020 2065 6d70 7479 5f69 6e64         empty_ind
-0000dc50: 6963 6573 203d 205b 305d 202a 2028 6c65  ices = [0] * (le
-0000dc60: 6e28 6578 7061 6e73 696f 6e29 2b31 290a  n(expansion)+1).
-0000dc70: 0a20 2020 2074 6f5f 696e 636c 7564 6520  .    to_include 
-0000dc80: 3d20 5b5d 0a20 2020 206e 6f6e 6573 5f74  = [].    nones_t
-0000dc90: 6f5f 6164 6420 3d20 300a 2020 2020 666f  o_add = 0.    fo
-0000dca0: 7220 692c 2073 796d 2069 6e20 656e 756d  r i, sym in enum
-0000dcb0: 6572 6174 6528 6578 7061 6e73 696f 6e29  erate(expansion)
-0000dcc0: 3a0a 2020 2020 2020 2020 6e6f 6e65 735f  :.        nones_
-0000dcd0: 746f 5f61 6464 202b 3d20 656d 7074 795f  to_add += empty_
-0000dce0: 696e 6469 6365 735b 695d 0a20 2020 2020  indices[i].     
-0000dcf0: 2020 2069 6620 6b65 6570 5f61 6c6c 5f74     if keep_all_t
-0000dd00: 6f6b 656e 7320 6f72 206e 6f74 2028 7379  okens or not (sy
-0000dd10: 6d2e 6973 5f74 6572 6d20 616e 6420 7379  m.is_term and sy
-0000dd20: 6d2e 6669 6c74 6572 5f6f 7574 293a 0a20  m.filter_out):. 
-0000dd30: 2020 2020 2020 2020 2020 2074 6f5f 696e             to_in
-0000dd40: 636c 7564 652e 6170 7065 6e64 2828 692c  clude.append((i,
-0000dd50: 205f 7368 6f75 6c64 5f65 7870 616e 6428   _should_expand(
-0000dd60: 7379 6d29 2c20 6e6f 6e65 735f 746f 5f61  sym), nones_to_a
-0000dd70: 6464 2929 0a20 2020 2020 2020 2020 2020  dd)).           
-0000dd80: 206e 6f6e 6573 5f74 6f5f 6164 6420 3d20   nones_to_add = 
-0000dd90: 300a 0a20 2020 206e 6f6e 6573 5f74 6f5f  0..    nones_to_
-0000dda0: 6164 6420 2b3d 2065 6d70 7479 5f69 6e64  add += empty_ind
-0000ddb0: 6963 6573 5b6c 656e 2865 7870 616e 7369  ices[len(expansi
-0000ddc0: 6f6e 295d 0a0a 2020 2020 6966 205f 656d  on)]..    if _em
-0000ddd0: 7074 795f 696e 6469 6365 7320 6f72 206c  pty_indices or l
-0000dde0: 656e 2874 6f5f 696e 636c 7564 6529 203c  en(to_include) <
-0000ddf0: 206c 656e 2865 7870 616e 7369 6f6e 2920   len(expansion) 
-0000de00: 6f72 2061 6e79 2874 6f5f 6578 7061 6e64  or any(to_expand
-0000de10: 2066 6f72 2069 2c20 746f 5f65 7870 616e   for i, to_expan
-0000de20: 642c 5f20 696e 2074 6f5f 696e 636c 7564  d,_ in to_includ
-0000de30: 6529 3a0a 2020 2020 2020 2020 6966 205f  e):.        if _
-0000de40: 656d 7074 795f 696e 6469 6365 7320 6f72  empty_indices or
-0000de50: 2061 6d62 6967 756f 7573 3a0a 2020 2020   ambiguous:.    
-0000de60: 2020 2020 2020 2020 7265 7475 726e 2070          return p
-0000de70: 6172 7469 616c 2843 6869 6c64 4669 6c74  artial(ChildFilt
-0000de80: 6572 2069 6620 616d 6269 6775 6f75 7320  er if ambiguous 
-0000de90: 656c 7365 2043 6869 6c64 4669 6c74 6572  else ChildFilter
-0000dea0: 4c41 4c52 2c20 746f 5f69 6e63 6c75 6465  LALR, to_include
-0000deb0: 2c20 6e6f 6e65 735f 746f 5f61 6464 290a  , nones_to_add).
-0000dec0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-0000ded0: 2020 2020 2020 2020 2020 2323 0a0a 2020            ##..  
-0000dee0: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000def0: 2070 6172 7469 616c 2843 6869 6c64 4669   partial(ChildFi
-0000df00: 6c74 6572 4c41 4c52 5f4e 6f50 6c61 6365  lterLALR_NoPlace
-0000df10: 686f 6c64 6572 732c 205b 2869 2c20 7829  holders, [(i, x)
-0000df20: 2066 6f72 2069 2c78 2c5f 2069 6e20 746f   for i,x,_ in to
-0000df30: 5f69 6e63 6c75 6465 5d29 0a0a 0a63 6c61  _include])...cla
-0000df40: 7373 2041 6d62 6967 756f 7573 4578 7061  ss AmbiguousExpa
-0000df50: 6e64 6572 3a0a 2020 2020 232d 2d0a 2020  nder:.    #--.  
-0000df60: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0000df70: 656c 662c 2074 6f5f 6578 7061 6e64 2c20  elf, to_expand, 
-0000df80: 7472 6565 5f63 6c61 7373 2c20 6e6f 6465  tree_class, node
-0000df90: 5f62 7569 6c64 6572 293a 0a20 2020 2020  _builder):.     
-0000dfa0: 2020 2073 656c 662e 6e6f 6465 5f62 7569     self.node_bui
-0000dfb0: 6c64 6572 203d 206e 6f64 655f 6275 696c  lder = node_buil
-0000dfc0: 6465 720a 2020 2020 2020 2020 7365 6c66  der.        self
-0000dfd0: 2e74 7265 655f 636c 6173 7320 3d20 7472  .tree_class = tr
-0000dfe0: 6565 5f63 6c61 7373 0a20 2020 2020 2020  ee_class.       
-0000dff0: 2073 656c 662e 746f 5f65 7870 616e 6420   self.to_expand 
-0000e000: 3d20 746f 5f65 7870 616e 640a 0a20 2020  = to_expand..   
-0000e010: 2064 6566 205f 5f63 616c 6c5f 5f28 7365   def __call__(se
-0000e020: 6c66 2c20 6368 696c 6472 656e 293a 0a20  lf, children):. 
-0000e030: 2020 2020 2020 2064 6566 205f 6973 5f61         def _is_a
-0000e040: 6d62 6967 5f74 7265 6528 7429 3a0a 2020  mbig_tree(t):.  
-0000e050: 2020 2020 2020 2020 2020 7265 7475 726e            return
-0000e060: 2068 6173 6174 7472 2874 2c20 2764 6174   hasattr(t, 'dat
-0000e070: 6127 2920 616e 6420 742e 6461 7461 203d  a') and t.data =
-0000e080: 3d20 275f 616d 6269 6727 0a0a 2020 2020  = '_ambig'..    
-0000e090: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
-0000e0a0: 2323 0a0a 2020 2020 2020 2020 2323 0a0a  ##..        ##..
-0000e0b0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
-0000e0c0: 2020 2020 616d 6269 6775 6f75 7320 3d20      ambiguous = 
-0000e0d0: 5b5d 0a20 2020 2020 2020 2066 6f72 2069  [].        for i
-0000e0e0: 2c20 6368 696c 6420 696e 2065 6e75 6d65  , child in enume
-0000e0f0: 7261 7465 2863 6869 6c64 7265 6e29 3a0a  rate(children):.
-0000e100: 2020 2020 2020 2020 2020 2020 6966 205f              if _
-0000e110: 6973 5f61 6d62 6967 5f74 7265 6528 6368  is_ambig_tree(ch
-0000e120: 696c 6429 3a0a 2020 2020 2020 2020 2020  ild):.          
-0000e130: 2020 2020 2020 6966 2069 2069 6e20 7365        if i in se
-0000e140: 6c66 2e74 6f5f 6578 7061 6e64 3a0a 2020  lf.to_expand:.  
-0000e150: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e160: 2020 616d 6269 6775 6f75 732e 6170 7065    ambiguous.appe
-0000e170: 6e64 2869 290a 0a20 2020 2020 2020 2020  nd(i)..         
-0000e180: 2020 2020 2020 2063 6869 6c64 2e65 7870         child.exp
-0000e190: 616e 645f 6b69 6473 5f62 795f 6461 7461  and_kids_by_data
-0000e1a0: 2827 5f61 6d62 6967 2729 0a0a 2020 2020  ('_ambig')..    
-0000e1b0: 2020 2020 6966 206e 6f74 2061 6d62 6967      if not ambig
-0000e1c0: 756f 7573 3a0a 2020 2020 2020 2020 2020  uous:.          
-0000e1d0: 2020 7265 7475 726e 2073 656c 662e 6e6f    return self.no
-0000e1e0: 6465 5f62 7569 6c64 6572 2863 6869 6c64  de_builder(child
-0000e1f0: 7265 6e29 0a0a 2020 2020 2020 2020 6578  ren)..        ex
-0000e200: 7061 6e64 203d 205b 6368 696c 642e 6368  pand = [child.ch
-0000e210: 696c 6472 656e 2069 6620 6920 696e 2061  ildren if i in a
-0000e220: 6d62 6967 756f 7573 2065 6c73 6520 2863  mbiguous else (c
-0000e230: 6869 6c64 2c29 2066 6f72 2069 2c20 6368  hild,) for i, ch
-0000e240: 696c 6420 696e 2065 6e75 6d65 7261 7465  ild in enumerate
-0000e250: 2863 6869 6c64 7265 6e29 5d0a 2020 2020  (children)].    
-0000e260: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
-0000e270: 7472 6565 5f63 6c61 7373 2827 5f61 6d62  tree_class('_amb
-0000e280: 6967 272c 205b 7365 6c66 2e6e 6f64 655f  ig', [self.node_
-0000e290: 6275 696c 6465 7228 6c69 7374 2866 2929  builder(list(f))
-0000e2a0: 2066 6f72 2066 2069 6e20 7072 6f64 7563   for f in produc
-0000e2b0: 7428 2a65 7870 616e 6429 5d29 0a0a 0a64  t(*expand)])...d
-0000e2c0: 6566 206d 6179 6265 5f63 7265 6174 655f  ef maybe_create_
-0000e2d0: 616d 6269 6775 6f75 735f 6578 7061 6e64  ambiguous_expand
-0000e2e0: 6572 2874 7265 655f 636c 6173 732c 2065  er(tree_class, e
-0000e2f0: 7870 616e 7369 6f6e 2c20 6b65 6570 5f61  xpansion, keep_a
-0000e300: 6c6c 5f74 6f6b 656e 7329 3a0a 2020 2020  ll_tokens):.    
-0000e310: 746f 5f65 7870 616e 6420 3d20 5b69 2066  to_expand = [i f
-0000e320: 6f72 2069 2c20 7379 6d20 696e 2065 6e75  or i, sym in enu
-0000e330: 6d65 7261 7465 2865 7870 616e 7369 6f6e  merate(expansion
-0000e340: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-0000e350: 2020 2069 6620 6b65 6570 5f61 6c6c 5f74     if keep_all_t
-0000e360: 6f6b 656e 7320 6f72 2028 286e 6f74 2028  okens or ((not (
-0000e370: 7379 6d2e 6973 5f74 6572 6d20 616e 6420  sym.is_term and 
-0000e380: 7379 6d2e 6669 6c74 6572 5f6f 7574 2929  sym.filter_out))
-0000e390: 2061 6e64 205f 7368 6f75 6c64 5f65 7870   and _should_exp
-0000e3a0: 616e 6428 7379 6d29 295d 0a20 2020 2069  and(sym))].    i
-0000e3b0: 6620 746f 5f65 7870 616e 643a 0a20 2020  f to_expand:.   
-0000e3c0: 2020 2020 2072 6574 7572 6e20 7061 7274       return part
-0000e3d0: 6961 6c28 416d 6269 6775 6f75 7345 7870  ial(AmbiguousExp
-0000e3e0: 616e 6465 722c 2074 6f5f 6578 7061 6e64  ander, to_expand
-0000e3f0: 2c20 7472 6565 5f63 6c61 7373 290a 0a0a  , tree_class)...
-0000e400: 636c 6173 7320 416d 6269 6775 6f75 7349  class AmbiguousI
-0000e410: 6e74 6572 6d65 6469 6174 6545 7870 616e  ntermediateExpan
-0000e420: 6465 723a 0a20 2020 2023 2d2d 0a0a 2020  der:.    #--..  
-0000e430: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
-0000e440: 656c 662c 2074 7265 655f 636c 6173 732c  elf, tree_class,
-0000e450: 206e 6f64 655f 6275 696c 6465 7229 3a0a   node_builder):.
-0000e460: 2020 2020 2020 2020 7365 6c66 2e6e 6f64          self.nod
-0000e470: 655f 6275 696c 6465 7220 3d20 6e6f 6465  e_builder = node
-0000e480: 5f62 7569 6c64 6572 0a20 2020 2020 2020  _builder.       
-0000e490: 2073 656c 662e 7472 6565 5f63 6c61 7373   self.tree_class
-0000e4a0: 203d 2074 7265 655f 636c 6173 730a 0a20   = tree_class.. 
-0000e4b0: 2020 2064 6566 205f 5f63 616c 6c5f 5f28     def __call__(
-0000e4c0: 7365 6c66 2c20 6368 696c 6472 656e 293a  self, children):
-0000e4d0: 0a20 2020 2020 2020 2064 6566 205f 6973  .        def _is
-0000e4e0: 5f69 616d 6269 675f 7472 6565 2863 6869  _iambig_tree(chi
-0000e4f0: 6c64 293a 0a20 2020 2020 2020 2020 2020  ld):.           
-0000e500: 2072 6574 7572 6e20 6861 7361 7474 7228   return hasattr(
-0000e510: 6368 696c 642c 2027 6461 7461 2729 2061  child, 'data') a
-0000e520: 6e64 2063 6869 6c64 2e64 6174 6120 3d3d  nd child.data ==
-0000e530: 2027 5f69 616d 6269 6727 0a0a 2020 2020   '_iambig'..    
-0000e540: 2020 2020 6465 6620 5f63 6f6c 6c61 7073      def _collaps
-0000e550: 655f 6961 6d62 6967 2863 6869 6c64 7265  e_iambig(childre
-0000e560: 6e29 3a0a 2020 2020 2020 2020 2020 2020  n):.            
-0000e570: 232d 2d0a 0a20 2020 2020 2020 2020 2020  #--..           
-0000e580: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
-0000e590: 2023 230a 0a20 2020 2020 2020 2020 2020   ##..           
-0000e5a0: 2069 6620 6368 696c 6472 656e 2061 6e64   if children and
-0000e5b0: 205f 6973 5f69 616d 6269 675f 7472 6565   _is_iambig_tree
-0000e5c0: 2863 6869 6c64 7265 6e5b 305d 293a 0a20  (children[0]):. 
-0000e5d0: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-0000e5e0: 616d 6269 675f 6e6f 6465 203d 2063 6869  ambig_node = chi
-0000e5f0: 6c64 7265 6e5b 305d 0a20 2020 2020 2020  ldren[0].       
-0000e600: 2020 2020 2020 2020 2072 6573 756c 7420           result 
-0000e610: 3d20 5b5d 0a20 2020 2020 2020 2020 2020  = [].           
-0000e620: 2020 2020 2066 6f72 2067 7261 6e64 6368       for grandch
-0000e630: 696c 6420 696e 2069 616d 6269 675f 6e6f  ild in iambig_no
-0000e640: 6465 2e63 6869 6c64 7265 6e3a 0a20 2020  de.children:.   
-0000e650: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e660: 2063 6f6c 6c61 7073 6564 203d 205f 636f   collapsed = _co
-0000e670: 6c6c 6170 7365 5f69 616d 6269 6728 6772  llapse_iambig(gr
-0000e680: 616e 6463 6869 6c64 2e63 6869 6c64 7265  andchild.childre
-0000e690: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
-0000e6a0: 2020 2020 2020 2069 6620 636f 6c6c 6170         if collap
-0000e6b0: 7365 643a 0a20 2020 2020 2020 2020 2020  sed:.           
-0000e6c0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
-0000e6d0: 2063 6869 6c64 2069 6e20 636f 6c6c 6170   child in collap
-0000e6e0: 7365 643a 0a20 2020 2020 2020 2020 2020  sed:.           
-0000e6f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e700: 2063 6869 6c64 2e63 6869 6c64 7265 6e20   child.children 
-0000e710: 2b3d 2063 6869 6c64 7265 6e5b 313a 5d0a  += children[1:].
-0000e720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e730: 2020 2020 2020 2020 7265 7375 6c74 202b          result +
-0000e740: 3d20 636f 6c6c 6170 7365 640a 2020 2020  = collapsed.    
-0000e750: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e760: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-0000e770: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
-0000e780: 775f 7472 6565 203d 2073 656c 662e 7472  w_tree = self.tr
-0000e790: 6565 5f63 6c61 7373 2827 5f69 6e74 6572  ee_class('_inter
-0000e7a0: 272c 2067 7261 6e64 6368 696c 642e 6368  ', grandchild.ch
-0000e7b0: 696c 6472 656e 202b 2063 6869 6c64 7265  ildren + childre
-0000e7c0: 6e5b 313a 5d29 0a20 2020 2020 2020 2020  n[1:]).         
-0000e7d0: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0000e7e0: 6573 756c 742e 6170 7065 6e64 286e 6577  esult.append(new
-0000e7f0: 5f74 7265 6529 0a20 2020 2020 2020 2020  _tree).         
-0000e800: 2020 2020 2020 2072 6574 7572 6e20 7265         return re
-0000e810: 7375 6c74 0a0a 2020 2020 2020 2020 636f  sult..        co
-0000e820: 6c6c 6170 7365 6420 3d20 5f63 6f6c 6c61  llapsed = _colla
-0000e830: 7073 655f 6961 6d62 6967 2863 6869 6c64  pse_iambig(child
-0000e840: 7265 6e29 0a20 2020 2020 2020 2069 6620  ren).        if 
-0000e850: 636f 6c6c 6170 7365 643a 0a20 2020 2020  collapsed:.     
-0000e860: 2020 2020 2020 2070 726f 6365 7373 6564         processed
-0000e870: 5f6e 6f64 6573 203d 205b 7365 6c66 2e6e  _nodes = [self.n
-0000e880: 6f64 655f 6275 696c 6465 7228 632e 6368  ode_builder(c.ch
-0000e890: 696c 6472 656e 2920 666f 7220 6320 696e  ildren) for c in
-0000e8a0: 2063 6f6c 6c61 7073 6564 5d0a 2020 2020   collapsed].    
-0000e8b0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000e8c0: 656c 662e 7472 6565 5f63 6c61 7373 2827  elf.tree_class('
-0000e8d0: 5f61 6d62 6967 272c 2070 726f 6365 7373  _ambig', process
-0000e8e0: 6564 5f6e 6f64 6573 290a 0a20 2020 2020  ed_nodes)..     
-0000e8f0: 2020 2072 6574 7572 6e20 7365 6c66 2e6e     return self.n
-0000e900: 6f64 655f 6275 696c 6465 7228 6368 696c  ode_builder(chil
-0000e910: 6472 656e 290a 0a0a 0a64 6566 2069 6e70  dren)....def inp
-0000e920: 6c61 6365 5f74 7261 6e73 666f 726d 6572  lace_transformer
-0000e930: 2866 756e 6329 3a0a 2020 2020 4077 7261  (func):.    @wra
-0000e940: 7073 2866 756e 6329 0a20 2020 2064 6566  ps(func).    def
-0000e950: 2066 2863 6869 6c64 7265 6e29 3a0a 2020   f(children):.  
-0000e960: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
-0000e970: 2020 7472 6565 203d 2054 7265 6528 6675    tree = Tree(fu
-0000e980: 6e63 2e5f 5f6e 616d 655f 5f2c 2063 6869  nc.__name__, chi
-0000e990: 6c64 7265 6e29 0a20 2020 2020 2020 2072  ldren).        r
-0000e9a0: 6574 7572 6e20 6675 6e63 2874 7265 6529  eturn func(tree)
-0000e9b0: 0a20 2020 2072 6574 7572 6e20 660a 0a0a  .    return f...
-0000e9c0: 6465 6620 6170 706c 795f 7669 7369 745f  def apply_visit_
-0000e9d0: 7772 6170 7065 7228 6675 6e63 2c20 6e61  wrapper(func, na
-0000e9e0: 6d65 2c20 7772 6170 7065 7229 3a0a 2020  me, wrapper):.  
-0000e9f0: 2020 6966 2077 7261 7070 6572 2069 7320    if wrapper is 
-0000ea00: 5f76 6172 6773 5f6d 6574 6120 6f72 2077  _vargs_meta or w
-0000ea10: 7261 7070 6572 2069 7320 5f76 6172 6773  rapper is _vargs
-0000ea20: 5f6d 6574 615f 696e 6c69 6e65 3a0a 2020  _meta_inline:.  
-0000ea30: 2020 2020 2020 7261 6973 6520 4e6f 7449        raise NotI
-0000ea40: 6d70 6c65 6d65 6e74 6564 4572 726f 7228  mplementedError(
-0000ea50: 224d 6574 6120 6172 6773 206e 6f74 2073  "Meta args not s
-0000ea60: 7570 706f 7274 6564 2066 6f72 2069 6e74  upported for int
-0000ea70: 6572 6e61 6c20 7472 616e 7366 6f72 6d65  ernal transforme
-0000ea80: 7222 290a 0a20 2020 2040 7772 6170 7328  r")..    @wraps(
-0000ea90: 6675 6e63 290a 2020 2020 6465 6620 6628  func).    def f(
-0000eaa0: 6368 696c 6472 656e 293a 0a20 2020 2020  children):.     
-0000eab0: 2020 2072 6574 7572 6e20 7772 6170 7065     return wrappe
-0000eac0: 7228 6675 6e63 2c20 6e61 6d65 2c20 6368  r(func, name, ch
-0000ead0: 696c 6472 656e 2c20 4e6f 6e65 290a 2020  ildren, None).  
-0000eae0: 2020 7265 7475 726e 2066 0a0a 0a63 6c61    return f...cla
-0000eaf0: 7373 2050 6172 7365 5472 6565 4275 696c  ss ParseTreeBuil
-0000eb00: 6465 723a 0a20 2020 2064 6566 205f 5f69  der:.    def __i
-0000eb10: 6e69 745f 5f28 7365 6c66 2c20 7275 6c65  nit__(self, rule
-0000eb20: 732c 2074 7265 655f 636c 6173 732c 2070  s, tree_class, p
-0000eb30: 726f 7061 6761 7465 5f70 6f73 6974 696f  ropagate_positio
-0000eb40: 6e73 3d46 616c 7365 2c20 616d 6269 6775  ns=False, ambigu
-0000eb50: 6f75 733d 4661 6c73 652c 206d 6179 6265  ous=False, maybe
-0000eb60: 5f70 6c61 6365 686f 6c64 6572 733d 4661  _placeholders=Fa
-0000eb70: 6c73 6529 3a0a 2020 2020 2020 2020 7365  lse):.        se
-0000eb80: 6c66 2e74 7265 655f 636c 6173 7320 3d20  lf.tree_class = 
-0000eb90: 7472 6565 5f63 6c61 7373 0a20 2020 2020  tree_class.     
-0000eba0: 2020 2073 656c 662e 7072 6f70 6167 6174     self.propagat
-0000ebb0: 655f 706f 7369 7469 6f6e 7320 3d20 7072  e_positions = pr
-0000ebc0: 6f70 6167 6174 655f 706f 7369 7469 6f6e  opagate_position
-0000ebd0: 730a 2020 2020 2020 2020 7365 6c66 2e61  s.        self.a
-0000ebe0: 6d62 6967 756f 7573 203d 2061 6d62 6967  mbiguous = ambig
-0000ebf0: 756f 7573 0a20 2020 2020 2020 2073 656c  uous.        sel
-0000ec00: 662e 6d61 7962 655f 706c 6163 6568 6f6c  f.maybe_placehol
-0000ec10: 6465 7273 203d 206d 6179 6265 5f70 6c61  ders = maybe_pla
-0000ec20: 6365 686f 6c64 6572 730a 0a20 2020 2020  ceholders..     
-0000ec30: 2020 2073 656c 662e 7275 6c65 5f62 7569     self.rule_bui
-0000ec40: 6c64 6572 7320 3d20 6c69 7374 2873 656c  lders = list(sel
-0000ec50: 662e 5f69 6e69 745f 6275 696c 6465 7273  f._init_builders
-0000ec60: 2872 756c 6573 2929 0a0a 2020 2020 6465  (rules))..    de
-0000ec70: 6620 5f69 6e69 745f 6275 696c 6465 7273  f _init_builders
-0000ec80: 2873 656c 662c 2072 756c 6573 293a 0a20  (self, rules):. 
-0000ec90: 2020 2020 2020 2070 726f 7061 6761 7465         propagate
-0000eca0: 5f70 6f73 6974 696f 6e73 203d 206d 616b  _positions = mak
-0000ecb0: 655f 7072 6f70 6167 6174 655f 706f 7369  e_propagate_posi
-0000ecc0: 7469 6f6e 7328 7365 6c66 2e70 726f 7061  tions(self.propa
-0000ecd0: 6761 7465 5f70 6f73 6974 696f 6e73 290a  gate_positions).
-0000ece0: 0a20 2020 2020 2020 2066 6f72 2072 756c  .        for rul
-0000ecf0: 6520 696e 2072 756c 6573 3a0a 2020 2020  e in rules:.    
-0000ed00: 2020 2020 2020 2020 6f70 7469 6f6e 7320          options 
-0000ed10: 3d20 7275 6c65 2e6f 7074 696f 6e73 0a20  = rule.options. 
-0000ed20: 2020 2020 2020 2020 2020 206b 6565 705f             keep_
-0000ed30: 616c 6c5f 746f 6b65 6e73 203d 206f 7074  all_tokens = opt
-0000ed40: 696f 6e73 2e6b 6565 705f 616c 6c5f 746f  ions.keep_all_to
-0000ed50: 6b65 6e73 0a20 2020 2020 2020 2020 2020  kens.           
-0000ed60: 2065 7870 616e 645f 7369 6e67 6c65 5f63   expand_single_c
-0000ed70: 6869 6c64 203d 206f 7074 696f 6e73 2e65  hild = options.e
-0000ed80: 7870 616e 6431 0a0a 2020 2020 2020 2020  xpand1..        
-0000ed90: 2020 2020 7772 6170 7065 725f 6368 6169      wrapper_chai
-0000eda0: 6e20 3d20 6c69 7374 2866 696c 7465 7228  n = list(filter(
-0000edb0: 4e6f 6e65 2c20 5b0a 2020 2020 2020 2020  None, [.        
-0000edc0: 2020 2020 2020 2020 2865 7870 616e 645f          (expand_
-0000edd0: 7369 6e67 6c65 5f63 6869 6c64 2061 6e64  single_child and
-0000ede0: 206e 6f74 2072 756c 652e 616c 6961 7329   not rule.alias)
-0000edf0: 2061 6e64 2045 7870 616e 6453 696e 676c   and ExpandSingl
-0000ee00: 6543 6869 6c64 2c0a 2020 2020 2020 2020  eChild,.        
-0000ee10: 2020 2020 2020 2020 6d61 7962 655f 6372          maybe_cr
-0000ee20: 6561 7465 5f63 6869 6c64 5f66 696c 7465  eate_child_filte
-0000ee30: 7228 7275 6c65 2e65 7870 616e 7369 6f6e  r(rule.expansion
-0000ee40: 2c20 6b65 6570 5f61 6c6c 5f74 6f6b 656e  , keep_all_token
-0000ee50: 732c 2073 656c 662e 616d 6269 6775 6f75  s, self.ambiguou
-0000ee60: 732c 206f 7074 696f 6e73 2e65 6d70 7479  s, options.empty
-0000ee70: 5f69 6e64 6963 6573 2069 6620 7365 6c66  _indices if self
-0000ee80: 2e6d 6179 6265 5f70 6c61 6365 686f 6c64  .maybe_placehold
-0000ee90: 6572 7320 656c 7365 204e 6f6e 6529 2c0a  ers else None),.
-0000eea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eeb0: 7072 6f70 6167 6174 655f 706f 7369 7469  propagate_positi
-0000eec0: 6f6e 732c 0a20 2020 2020 2020 2020 2020  ons,.           
-0000eed0: 2020 2020 2073 656c 662e 616d 6269 6775       self.ambigu
-0000eee0: 6f75 7320 616e 6420 6d61 7962 655f 6372  ous and maybe_cr
-0000eef0: 6561 7465 5f61 6d62 6967 756f 7573 5f65  eate_ambiguous_e
-0000ef00: 7870 616e 6465 7228 7365 6c66 2e74 7265  xpander(self.tre
-0000ef10: 655f 636c 6173 732c 2072 756c 652e 6578  e_class, rule.ex
-0000ef20: 7061 6e73 696f 6e2c 206b 6565 705f 616c  pansion, keep_al
-0000ef30: 6c5f 746f 6b65 6e73 292c 0a20 2020 2020  l_tokens),.     
-0000ef40: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0000ef50: 616d 6269 6775 6f75 7320 616e 6420 7061  ambiguous and pa
-0000ef60: 7274 6961 6c28 416d 6269 6775 6f75 7349  rtial(AmbiguousI
-0000ef70: 6e74 6572 6d65 6469 6174 6545 7870 616e  ntermediateExpan
-0000ef80: 6465 722c 2073 656c 662e 7472 6565 5f63  der, self.tree_c
-0000ef90: 6c61 7373 290a 2020 2020 2020 2020 2020  lass).          
-0000efa0: 2020 5d29 290a 0a20 2020 2020 2020 2020    ]))..         
-0000efb0: 2020 2079 6965 6c64 2072 756c 652c 2077     yield rule, w
-0000efc0: 7261 7070 6572 5f63 6861 696e 0a0a 2020  rapper_chain..  
-0000efd0: 2020 6465 6620 6372 6561 7465 5f63 616c    def create_cal
-0000efe0: 6c62 6163 6b28 7365 6c66 2c20 7472 616e  lback(self, tran
-0000eff0: 7366 6f72 6d65 723d 4e6f 6e65 293a 0a20  sformer=None):. 
-0000f000: 2020 2020 2020 2063 616c 6c62 6163 6b73         callbacks
-0000f010: 203d 207b 7d0a 0a20 2020 2020 2020 2064   = {}..        d
-0000f020: 6566 6175 6c74 5f68 616e 646c 6572 203d  efault_handler =
-0000f030: 2067 6574 6174 7472 2874 7261 6e73 666f   getattr(transfo
-0000f040: 726d 6572 2c20 275f 5f64 6566 6175 6c74  rmer, '__default
-0000f050: 5f5f 272c 204e 6f6e 6529 0a20 2020 2020  __', None).     
-0000f060: 2020 2069 6620 6465 6661 756c 745f 6861     if default_ha
-0000f070: 6e64 6c65 723a 0a20 2020 2020 2020 2020  ndler:.         
-0000f080: 2020 2064 6566 2064 6566 6175 6c74 5f63     def default_c
-0000f090: 616c 6c62 6163 6b28 6461 7461 2c20 6368  allback(data, ch
-0000f0a0: 696c 6472 656e 293a 0a20 2020 2020 2020  ildren):.       
-0000f0b0: 2020 2020 2020 2020 2072 6574 7572 6e20           return 
-0000f0c0: 6465 6661 756c 745f 6861 6e64 6c65 7228  default_handler(
-0000f0d0: 6461 7461 2c20 6368 696c 6472 656e 2c20  data, children, 
-0000f0e0: 4e6f 6e65 290a 2020 2020 2020 2020 656c  None).        el
-0000f0f0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
-0000f100: 6465 6661 756c 745f 6361 6c6c 6261 636b  default_callback
-0000f110: 203d 2073 656c 662e 7472 6565 5f63 6c61   = self.tree_cla
-0000f120: 7373 0a0a 2020 2020 2020 2020 666f 7220  ss..        for 
-0000f130: 7275 6c65 2c20 7772 6170 7065 725f 6368  rule, wrapper_ch
-0000f140: 6169 6e20 696e 2073 656c 662e 7275 6c65  ain in self.rule
-0000f150: 5f62 7569 6c64 6572 733a 0a0a 2020 2020  _builders:..    
-0000f160: 2020 2020 2020 2020 7573 6572 5f63 616c          user_cal
-0000f170: 6c62 6163 6b5f 6e61 6d65 203d 2072 756c  lback_name = rul
-0000f180: 652e 616c 6961 7320 6f72 2072 756c 652e  e.alias or rule.
-0000f190: 6f70 7469 6f6e 732e 7465 6d70 6c61 7465  options.template
-0000f1a0: 5f73 6f75 7263 6520 6f72 2072 756c 652e  _source or rule.
-0000f1b0: 6f72 6967 696e 2e6e 616d 650a 2020 2020  origin.name.    
-0000f1c0: 2020 2020 2020 2020 7472 793a 0a20 2020          try:.   
-0000f1d0: 2020 2020 2020 2020 2020 2020 2066 203d               f =
-0000f1e0: 2067 6574 6174 7472 2874 7261 6e73 666f   getattr(transfo
-0000f1f0: 726d 6572 2c20 7573 6572 5f63 616c 6c62  rmer, user_callb
-0000f200: 6163 6b5f 6e61 6d65 290a 2020 2020 2020  ack_name).      
-0000f210: 2020 2020 2020 2020 2020 7772 6170 7065            wrappe
-0000f220: 7220 3d20 6765 7461 7474 7228 662c 2027  r = getattr(f, '
-0000f230: 7669 7369 745f 7772 6170 7065 7227 2c20  visit_wrapper', 
-0000f240: 4e6f 6e65 290a 2020 2020 2020 2020 2020  None).          
-0000f250: 2020 2020 2020 6966 2077 7261 7070 6572        if wrapper
-0000f260: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-0000f270: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f280: 2020 6620 3d20 6170 706c 795f 7669 7369    f = apply_visi
-0000f290: 745f 7772 6170 7065 7228 662c 2075 7365  t_wrapper(f, use
-0000f2a0: 725f 6361 6c6c 6261 636b 5f6e 616d 652c  r_callback_name,
-0000f2b0: 2077 7261 7070 6572 290a 2020 2020 2020   wrapper).      
-0000f2c0: 2020 2020 2020 2020 2020 656c 6966 2069            elif i
-0000f2d0: 7369 6e73 7461 6e63 6528 7472 616e 7366  sinstance(transf
-0000f2e0: 6f72 6d65 722c 2054 7261 6e73 666f 726d  ormer, Transform
-0000f2f0: 6572 5f49 6e50 6c61 6365 293a 0a20 2020  er_InPlace):.   
-0000f300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f310: 2066 203d 2069 6e70 6c61 6365 5f74 7261   f = inplace_tra
-0000f320: 6e73 666f 726d 6572 2866 290a 2020 2020  nsformer(f).    
-0000f330: 2020 2020 2020 2020 6578 6365 7074 2041          except A
-0000f340: 7474 7269 6275 7465 4572 726f 723a 0a20  ttributeError:. 
-0000f350: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000f360: 203d 2070 6172 7469 616c 2864 6566 6175   = partial(defau
-0000f370: 6c74 5f63 616c 6c62 6163 6b2c 2075 7365  lt_callback, use
-0000f380: 725f 6361 6c6c 6261 636b 5f6e 616d 6529  r_callback_name)
-0000f390: 0a0a 2020 2020 2020 2020 2020 2020 666f  ..            fo
-0000f3a0: 7220 7720 696e 2077 7261 7070 6572 5f63  r w in wrapper_c
-0000f3b0: 6861 696e 3a0a 2020 2020 2020 2020 2020  hain:.          
-0000f3c0: 2020 2020 2020 6620 3d20 7728 6629 0a0a        f = w(f)..
-0000f3d0: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-0000f3e0: 756c 6520 696e 2063 616c 6c62 6163 6b73  ule in callbacks
-0000f3f0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000f400: 2020 7261 6973 6520 4772 616d 6d61 7245    raise GrammarE
-0000f410: 7272 6f72 2822 5275 6c65 2027 2573 2720  rror("Rule '%s' 
-0000f420: 616c 7265 6164 7920 6578 6973 7473 2220  already exists" 
-0000f430: 2520 2872 756c 652c 2929 0a0a 2020 2020  % (rule,))..    
-0000f440: 2020 2020 2020 2020 6361 6c6c 6261 636b          callback
-0000f450: 735b 7275 6c65 5d20 3d20 660a 0a20 2020  s[rule] = f..   
-0000f460: 2020 2020 2072 6574 7572 6e20 6361 6c6c       return call
-0000f470: 6261 636b 730a 0a0a 0a63 6c61 7373 204c  backs....class L
-0000f480: 414c 525f 5061 7273 6572 2853 6572 6961  ALR_Parser(Seria
-0000f490: 6c69 7a65 293a 0a20 2020 2064 6566 205f  lize):.    def _
-0000f4a0: 5f69 6e69 745f 5f28 7365 6c66 2c20 7061  _init__(self, pa
-0000f4b0: 7273 6572 5f63 6f6e 662c 2064 6562 7567  rser_conf, debug
-0000f4c0: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
-0000f4d0: 2061 6e61 6c79 7369 7320 3d20 4c41 4c52   analysis = LALR
-0000f4e0: 5f41 6e61 6c79 7a65 7228 7061 7273 6572  _Analyzer(parser
-0000f4f0: 5f63 6f6e 662c 2064 6562 7567 3d64 6562  _conf, debug=deb
-0000f500: 7567 290a 2020 2020 2020 2020 616e 616c  ug).        anal
-0000f510: 7973 6973 2e63 6f6d 7075 7465 5f6c 616c  ysis.compute_lal
-0000f520: 7228 290a 2020 2020 2020 2020 6361 6c6c  r().        call
-0000f530: 6261 636b 7320 3d20 7061 7273 6572 5f63  backs = parser_c
-0000f540: 6f6e 662e 6361 6c6c 6261 636b 730a 0a20  onf.callbacks.. 
-0000f550: 2020 2020 2020 2073 656c 662e 5f70 6172         self._par
-0000f560: 7365 5f74 6162 6c65 203d 2061 6e61 6c79  se_table = analy
-0000f570: 7369 732e 7061 7273 655f 7461 626c 650a  sis.parse_table.
-0000f580: 2020 2020 2020 2020 7365 6c66 2e70 6172          self.par
-0000f590: 7365 725f 636f 6e66 203d 2070 6172 7365  ser_conf = parse
-0000f5a0: 725f 636f 6e66 0a20 2020 2020 2020 2073  r_conf.        s
-0000f5b0: 656c 662e 7061 7273 6572 203d 205f 5061  elf.parser = _Pa
-0000f5c0: 7273 6572 2861 6e61 6c79 7369 732e 7061  rser(analysis.pa
-0000f5d0: 7273 655f 7461 626c 652c 2063 616c 6c62  rse_table, callb
-0000f5e0: 6163 6b73 2c20 6465 6275 6729 0a0a 2020  acks, debug)..  
-0000f5f0: 2020 4063 6c61 7373 6d65 7468 6f64 0a20    @classmethod. 
-0000f600: 2020 2064 6566 2064 6573 6572 6961 6c69     def deseriali
-0000f610: 7a65 2863 6c73 2c20 6461 7461 2c20 6d65  ze(cls, data, me
-0000f620: 6d6f 2c20 6361 6c6c 6261 636b 732c 2064  mo, callbacks, d
-0000f630: 6562 7567 3d46 616c 7365 293a 0a20 2020  ebug=False):.   
-0000f640: 2020 2020 2069 6e73 7420 3d20 636c 732e       inst = cls.
-0000f650: 5f5f 6e65 775f 5f28 636c 7329 0a20 2020  __new__(cls).   
-0000f660: 2020 2020 2069 6e73 742e 5f70 6172 7365       inst._parse
-0000f670: 5f74 6162 6c65 203d 2049 6e74 5061 7273  _table = IntPars
-0000f680: 6554 6162 6c65 2e64 6573 6572 6961 6c69  eTable.deseriali
-0000f690: 7a65 2864 6174 612c 206d 656d 6f29 0a20  ze(data, memo). 
-0000f6a0: 2020 2020 2020 2069 6e73 742e 7061 7273         inst.pars
-0000f6b0: 6572 203d 205f 5061 7273 6572 2869 6e73  er = _Parser(ins
-0000f6c0: 742e 5f70 6172 7365 5f74 6162 6c65 2c20  t._parse_table, 
-0000f6d0: 6361 6c6c 6261 636b 732c 2064 6562 7567  callbacks, debug
-0000f6e0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-0000f6f0: 2069 6e73 740a 0a20 2020 2064 6566 2073   inst..    def s
-0000f700: 6572 6961 6c69 7a65 2873 656c 662c 206d  erialize(self, m
-0000f710: 656d 6f3a 2041 6e79 203d 204e 6f6e 6529  emo: Any = None)
-0000f720: 202d 3e20 4469 6374 5b73 7472 2c20 416e   -> Dict[str, An
-0000f730: 795d 3a0a 2020 2020 2020 2020 7265 7475  y]:.        retu
-0000f740: 726e 2073 656c 662e 5f70 6172 7365 5f74  rn self._parse_t
-0000f750: 6162 6c65 2e73 6572 6961 6c69 7a65 286d  able.serialize(m
-0000f760: 656d 6f29 0a0a 2020 2020 6465 6620 7061  emo)..    def pa
-0000f770: 7273 655f 696e 7465 7261 6374 6976 6528  rse_interactive(
-0000f780: 7365 6c66 2c20 6c65 7865 722c 2073 7461  self, lexer, sta
-0000f790: 7274 293a 0a20 2020 2020 2020 2072 6574  rt):.        ret
-0000f7a0: 7572 6e20 7365 6c66 2e70 6172 7365 722e  urn self.parser.
-0000f7b0: 7061 7273 6528 6c65 7865 722c 2073 7461  parse(lexer, sta
-0000f7c0: 7274 2c20 7374 6172 745f 696e 7465 7261  rt, start_intera
-0000f7d0: 6374 6976 653d 5472 7565 290a 0a20 2020  ctive=True)..   
-0000f7e0: 2064 6566 2070 6172 7365 2873 656c 662c   def parse(self,
-0000f7f0: 206c 6578 6572 2c20 7374 6172 742c 206f   lexer, start, o
-0000f800: 6e5f 6572 726f 723d 4e6f 6e65 293a 0a20  n_error=None):. 
-0000f810: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
-0000f820: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-0000f830: 656c 662e 7061 7273 6572 2e70 6172 7365  elf.parser.parse
-0000f840: 286c 6578 6572 2c20 7374 6172 7429 0a20  (lexer, start). 
-0000f850: 2020 2020 2020 2065 7863 6570 7420 556e         except Un
-0000f860: 6578 7065 6374 6564 496e 7075 7420 6173  expectedInput as
-0000f870: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
-0000f880: 6966 206f 6e5f 6572 726f 7220 6973 204e  if on_error is N
-0000f890: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-0000f8a0: 2020 2020 2072 6169 7365 0a0a 2020 2020       raise..    
-0000f8b0: 2020 2020 2020 2020 7768 696c 6520 5472          while Tr
-0000f8c0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-0000f8d0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-0000f8e0: 6528 652c 2055 6e65 7870 6563 7465 6443  e(e, UnexpectedC
-0000f8f0: 6861 7261 6374 6572 7329 3a0a 2020 2020  haracters):.    
-0000f900: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f910: 7320 3d20 652e 696e 7465 7261 6374 6976  s = e.interactiv
-0000f920: 655f 7061 7273 6572 2e6c 6578 6572 5f74  e_parser.lexer_t
-0000f930: 6872 6561 642e 7374 6174 650a 2020 2020  hread.state.    
-0000f940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f950: 7020 3d20 732e 6c69 6e65 5f63 7472 2e63  p = s.line_ctr.c
-0000f960: 6861 725f 706f 730a 0a20 2020 2020 2020  har_pos..       
-0000f970: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
-0000f980: 6f6e 5f65 7272 6f72 2865 293a 0a20 2020  on_error(e):.   
-0000f990: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000f9a0: 2072 6169 7365 2065 0a0a 2020 2020 2020   raise e..      
-0000f9b0: 2020 2020 2020 2020 2020 6966 2069 7369            if isi
-0000f9c0: 6e73 7461 6e63 6528 652c 2055 6e65 7870  nstance(e, Unexp
-0000f9d0: 6563 7465 6443 6861 7261 6374 6572 7329  ectedCharacters)
-0000f9e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0000f9f0: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
-0000fa00: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0000fa10: 2070 203d 3d20 732e 6c69 6e65 5f63 7472   p == s.line_ctr
-0000fa20: 2e63 6861 725f 706f 733a 0a20 2020 2020  .char_pos:.     
-0000fa30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fa40: 2020 2073 2e6c 696e 655f 6374 722e 6665     s.line_ctr.fe
-0000fa50: 6564 2873 2e74 6578 745b 703a 702b 315d  ed(s.text[p:p+1]
-0000fa60: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-0000fa70: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-0000fa80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
-0000fa90: 726e 2065 2e69 6e74 6572 6163 7469 7665  rn e.interactive
-0000faa0: 5f70 6172 7365 722e 7265 7375 6d65 5f70  _parser.resume_p
-0000fab0: 6172 7365 2829 0a20 2020 2020 2020 2020  arse().         
-0000fac0: 2020 2020 2020 2065 7863 6570 7420 556e         except Un
-0000fad0: 6578 7065 6374 6564 546f 6b65 6e20 6173  expectedToken as
-0000fae0: 2065 323a 0a20 2020 2020 2020 2020 2020   e2:.           
-0000faf0: 2020 2020 2020 2020 2069 6620 2869 7369           if (isi
-0000fb00: 6e73 7461 6e63 6528 652c 2055 6e65 7870  nstance(e, Unexp
-0000fb10: 6563 7465 6454 6f6b 656e 290a 2020 2020  ectedToken).    
-0000fb20: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb30: 2020 2020 616e 6420 652e 746f 6b65 6e2e      and e.token.
-0000fb40: 7479 7065 203d 3d20 6532 2e74 6f6b 656e  type == e2.token
-0000fb50: 2e74 7970 6520 3d3d 2027 2445 4e44 270a  .type == '$END'.
-0000fb60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fb70: 2020 2020 2020 2020 616e 6420 652e 696e          and e.in
-0000fb80: 7465 7261 6374 6976 655f 7061 7273 6572  teractive_parser
-0000fb90: 203d 3d20 6532 2e69 6e74 6572 6163 7469   == e2.interacti
-0000fba0: 7665 5f70 6172 7365 7229 3a0a 2020 2020  ve_parser):.    
-0000fbb0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fbc0: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
-0000fbd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fbe0: 7261 6973 6520 6532 0a20 2020 2020 2020  raise e2.       
-0000fbf0: 2020 2020 2020 2020 2020 2020 2065 203d               e =
-0000fc00: 2065 320a 2020 2020 2020 2020 2020 2020   e2.            
-0000fc10: 2020 2020 6578 6365 7074 2055 6e65 7870      except Unexp
-0000fc20: 6563 7465 6443 6861 7261 6374 6572 7320  ectedCharacters 
-0000fc30: 6173 2065 323a 0a20 2020 2020 2020 2020  as e2:.         
-0000fc40: 2020 2020 2020 2020 2020 2065 203d 2065             e = e
-0000fc50: 320a 0a0a 636c 6173 7320 5061 7273 6543  2...class ParseC
-0000fc60: 6f6e 663a 0a20 2020 205f 5f73 6c6f 7473  onf:.    __slots
-0000fc70: 5f5f 203d 2027 7061 7273 655f 7461 626c  __ = 'parse_tabl
-0000fc80: 6527 2c20 2763 616c 6c62 6163 6b73 272c  e', 'callbacks',
-0000fc90: 2027 7374 6172 7427 2c20 2773 7461 7274   'start', 'start
-0000fca0: 5f73 7461 7465 272c 2027 656e 645f 7374  _state', 'end_st
-0000fcb0: 6174 6527 2c20 2773 7461 7465 7327 0a0a  ate', 'states'..
-0000fcc0: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-0000fcd0: 2873 656c 662c 2070 6172 7365 5f74 6162  (self, parse_tab
-0000fce0: 6c65 2c20 6361 6c6c 6261 636b 732c 2073  le, callbacks, s
-0000fcf0: 7461 7274 293a 0a20 2020 2020 2020 2073  tart):.        s
-0000fd00: 656c 662e 7061 7273 655f 7461 626c 6520  elf.parse_table 
-0000fd10: 3d20 7061 7273 655f 7461 626c 650a 0a20  = parse_table.. 
-0000fd20: 2020 2020 2020 2073 656c 662e 7374 6172         self.star
-0000fd30: 745f 7374 6174 6520 3d20 7365 6c66 2e70  t_state = self.p
-0000fd40: 6172 7365 5f74 6162 6c65 2e73 7461 7274  arse_table.start
-0000fd50: 5f73 7461 7465 735b 7374 6172 745d 0a20  _states[start]. 
-0000fd60: 2020 2020 2020 2073 656c 662e 656e 645f         self.end_
-0000fd70: 7374 6174 6520 3d20 7365 6c66 2e70 6172  state = self.par
-0000fd80: 7365 5f74 6162 6c65 2e65 6e64 5f73 7461  se_table.end_sta
-0000fd90: 7465 735b 7374 6172 745d 0a20 2020 2020  tes[start].     
-0000fda0: 2020 2073 656c 662e 7374 6174 6573 203d     self.states =
-0000fdb0: 2073 656c 662e 7061 7273 655f 7461 626c   self.parse_tabl
-0000fdc0: 652e 7374 6174 6573 0a0a 2020 2020 2020  e.states..      
-0000fdd0: 2020 7365 6c66 2e63 616c 6c62 6163 6b73    self.callbacks
-0000fde0: 203d 2063 616c 6c62 6163 6b73 0a20 2020   = callbacks.   
-0000fdf0: 2020 2020 2073 656c 662e 7374 6172 7420       self.start 
-0000fe00: 3d20 7374 6172 740a 0a0a 636c 6173 7320  = start...class 
-0000fe10: 5061 7273 6572 5374 6174 653a 0a20 2020  ParserState:.   
-0000fe20: 205f 5f73 6c6f 7473 5f5f 203d 2027 7061   __slots__ = 'pa
-0000fe30: 7273 655f 636f 6e66 272c 2027 6c65 7865  rse_conf', 'lexe
-0000fe40: 7227 2c20 2773 7461 7465 5f73 7461 636b  r', 'state_stack
-0000fe50: 272c 2027 7661 6c75 655f 7374 6163 6b27  ', 'value_stack'
-0000fe60: 0a0a 2020 2020 6465 6620 5f5f 696e 6974  ..    def __init
-0000fe70: 5f5f 2873 656c 662c 2070 6172 7365 5f63  __(self, parse_c
-0000fe80: 6f6e 662c 206c 6578 6572 2c20 7374 6174  onf, lexer, stat
-0000fe90: 655f 7374 6163 6b3d 4e6f 6e65 2c20 7661  e_stack=None, va
-0000fea0: 6c75 655f 7374 6163 6b3d 4e6f 6e65 293a  lue_stack=None):
-0000feb0: 0a20 2020 2020 2020 2073 656c 662e 7061  .        self.pa
-0000fec0: 7273 655f 636f 6e66 203d 2070 6172 7365  rse_conf = parse
-0000fed0: 5f63 6f6e 660a 2020 2020 2020 2020 7365  _conf.        se
-0000fee0: 6c66 2e6c 6578 6572 203d 206c 6578 6572  lf.lexer = lexer
-0000fef0: 0a20 2020 2020 2020 2073 656c 662e 7374  .        self.st
-0000ff00: 6174 655f 7374 6163 6b20 3d20 7374 6174  ate_stack = stat
-0000ff10: 655f 7374 6163 6b20 6f72 205b 7365 6c66  e_stack or [self
-0000ff20: 2e70 6172 7365 5f63 6f6e 662e 7374 6172  .parse_conf.star
-0000ff30: 745f 7374 6174 655d 0a20 2020 2020 2020  t_state].       
-0000ff40: 2073 656c 662e 7661 6c75 655f 7374 6163   self.value_stac
-0000ff50: 6b20 3d20 7661 6c75 655f 7374 6163 6b20  k = value_stack 
-0000ff60: 6f72 205b 5d0a 0a20 2020 2040 7072 6f70  or []..    @prop
-0000ff70: 6572 7479 0a20 2020 2064 6566 2070 6f73  erty.    def pos
-0000ff80: 6974 696f 6e28 7365 6c66 293a 0a20 2020  ition(self):.   
-0000ff90: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-0000ffa0: 2e73 7461 7465 5f73 7461 636b 5b2d 315d  .state_stack[-1]
-0000ffb0: 0a0a 2020 2020 2323 0a0a 2020 2020 6465  ..    ##..    de
-0000ffc0: 6620 5f5f 6571 5f5f 2873 656c 662c 206f  f __eq__(self, o
-0000ffd0: 7468 6572 293a 0a20 2020 2020 2020 2069  ther):.        i
-0000ffe0: 6620 6e6f 7420 6973 696e 7374 616e 6365  f not isinstance
-0000fff0: 286f 7468 6572 2c20 5061 7273 6572 5374  (other, ParserSt
-00010000: 6174 6529 3a0a 2020 2020 2020 2020 2020  ate):.          
-00010010: 2020 7265 7475 726e 204e 6f74 496d 706c    return NotImpl
-00010020: 656d 656e 7465 640a 2020 2020 2020 2020  emented.        
-00010030: 7265 7475 726e 206c 656e 2873 656c 662e  return len(self.
-00010040: 7374 6174 655f 7374 6163 6b29 203d 3d20  state_stack) == 
-00010050: 6c65 6e28 6f74 6865 722e 7374 6174 655f  len(other.state_
-00010060: 7374 6163 6b29 2061 6e64 2073 656c 662e  stack) and self.
-00010070: 706f 7369 7469 6f6e 203d 3d20 6f74 6865  position == othe
-00010080: 722e 706f 7369 7469 6f6e 0a0a 2020 2020  r.position..    
-00010090: 6465 6620 5f5f 636f 7079 5f5f 2873 656c  def __copy__(sel
-000100a0: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-000100b0: 726e 2074 7970 6528 7365 6c66 2928 0a20  rn type(self)(. 
-000100c0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-000100d0: 7061 7273 655f 636f 6e66 2c0a 2020 2020  parse_conf,.    
-000100e0: 2020 2020 2020 2020 7365 6c66 2e6c 6578          self.lex
-000100f0: 6572 2c20 2323 0a0a 2020 2020 2020 2020  er, ##..        
-00010100: 2020 2020 636f 7079 2873 656c 662e 7374      copy(self.st
-00010110: 6174 655f 7374 6163 6b29 2c0a 2020 2020  ate_stack),.    
-00010120: 2020 2020 2020 2020 6465 6570 636f 7079          deepcopy
-00010130: 2873 656c 662e 7661 6c75 655f 7374 6163  (self.value_stac
-00010140: 6b29 2c0a 2020 2020 2020 2020 290a 0a20  k),.        ).. 
-00010150: 2020 2064 6566 2063 6f70 7928 7365 6c66     def copy(self
-00010160: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00010170: 6e20 636f 7079 2873 656c 6629 0a0a 2020  n copy(self)..  
-00010180: 2020 6465 6620 6665 6564 5f74 6f6b 656e    def feed_token
-00010190: 2873 656c 662c 2074 6f6b 656e 2c20 6973  (self, token, is
-000101a0: 5f65 6e64 3d46 616c 7365 293a 0a20 2020  _end=False):.   
-000101b0: 2020 2020 2073 7461 7465 5f73 7461 636b       state_stack
-000101c0: 203d 2073 656c 662e 7374 6174 655f 7374   = self.state_st
-000101d0: 6163 6b0a 2020 2020 2020 2020 7661 6c75  ack.        valu
-000101e0: 655f 7374 6163 6b20 3d20 7365 6c66 2e76  e_stack = self.v
-000101f0: 616c 7565 5f73 7461 636b 0a20 2020 2020  alue_stack.     
-00010200: 2020 2073 7461 7465 7320 3d20 7365 6c66     states = self
-00010210: 2e70 6172 7365 5f63 6f6e 662e 7374 6174  .parse_conf.stat
-00010220: 6573 0a20 2020 2020 2020 2065 6e64 5f73  es.        end_s
-00010230: 7461 7465 203d 2073 656c 662e 7061 7273  tate = self.pars
-00010240: 655f 636f 6e66 2e65 6e64 5f73 7461 7465  e_conf.end_state
-00010250: 0a20 2020 2020 2020 2063 616c 6c62 6163  .        callbac
-00010260: 6b73 203d 2073 656c 662e 7061 7273 655f  ks = self.parse_
-00010270: 636f 6e66 2e63 616c 6c62 6163 6b73 0a0a  conf.callbacks..
-00010280: 2020 2020 2020 2020 7768 696c 6520 5472          while Tr
-00010290: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-000102a0: 7374 6174 6520 3d20 7374 6174 655f 7374  state = state_st
-000102b0: 6163 6b5b 2d31 5d0a 2020 2020 2020 2020  ack[-1].        
-000102c0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
-000102d0: 2020 2020 2020 2020 2061 6374 696f 6e2c           action,
-000102e0: 2061 7267 203d 2073 7461 7465 735b 7374   arg = states[st
-000102f0: 6174 655d 5b74 6f6b 656e 2e74 7970 655d  ate][token.type]
-00010300: 0a20 2020 2020 2020 2020 2020 2065 7863  .            exc
-00010310: 6570 7420 4b65 7945 7272 6f72 3a0a 2020  ept KeyError:.  
-00010320: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-00010330: 7065 6374 6564 203d 207b 7320 666f 7220  pected = {s for 
-00010340: 7320 696e 2073 7461 7465 735b 7374 6174  s in states[stat
-00010350: 655d 2e6b 6579 7328 2920 6966 2073 2e69  e].keys() if s.i
-00010360: 7375 7070 6572 2829 7d0a 2020 2020 2020  supper()}.      
-00010370: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00010380: 556e 6578 7065 6374 6564 546f 6b65 6e28  UnexpectedToken(
-00010390: 746f 6b65 6e2c 2065 7870 6563 7465 642c  token, expected,
-000103a0: 2073 7461 7465 3d73 656c 662c 2069 6e74   state=self, int
-000103b0: 6572 6163 7469 7665 5f70 6172 7365 723d  eractive_parser=
-000103c0: 4e6f 6e65 290a 0a20 2020 2020 2020 2020  None)..         
-000103d0: 2020 2061 7373 6572 7420 6172 6720 213d     assert arg !=
-000103e0: 2065 6e64 5f73 7461 7465 0a0a 2020 2020   end_state..    
-000103f0: 2020 2020 2020 2020 6966 2061 6374 696f          if actio
-00010400: 6e20 6973 2053 6869 6674 3a0a 2020 2020  n is Shift:.    
-00010410: 2020 2020 2020 2020 2020 2020 2323 0a0a              ##..
-00010420: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010430: 6173 7365 7274 206e 6f74 2069 735f 656e  assert not is_en
-00010440: 640a 2020 2020 2020 2020 2020 2020 2020  d.              
-00010450: 2020 7374 6174 655f 7374 6163 6b2e 6170    state_stack.ap
-00010460: 7065 6e64 2861 7267 290a 2020 2020 2020  pend(arg).      
-00010470: 2020 2020 2020 2020 2020 7661 6c75 655f            value_
-00010480: 7374 6163 6b2e 6170 7065 6e64 2874 6f6b  stack.append(tok
-00010490: 656e 2069 6620 746f 6b65 6e2e 7479 7065  en if token.type
-000104a0: 206e 6f74 2069 6e20 6361 6c6c 6261 636b   not in callback
-000104b0: 7320 656c 7365 2063 616c 6c62 6163 6b73  s else callbacks
-000104c0: 5b74 6f6b 656e 2e74 7970 655d 2874 6f6b  [token.type](tok
-000104d0: 656e 2929 0a20 2020 2020 2020 2020 2020  en)).           
-000104e0: 2020 2020 2072 6574 7572 6e0a 2020 2020       return.    
-000104f0: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00010500: 2020 2020 2020 2020 2020 2020 2020 2323                ##
-00010510: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00010520: 2020 7275 6c65 203d 2061 7267 0a20 2020    rule = arg.   
-00010530: 2020 2020 2020 2020 2020 2020 2073 697a               siz
-00010540: 6520 3d20 6c65 6e28 7275 6c65 2e65 7870  e = len(rule.exp
-00010550: 616e 7369 6f6e 290a 2020 2020 2020 2020  ansion).        
-00010560: 2020 2020 2020 2020 6966 2073 697a 653a          if size:
-00010570: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010580: 2020 2020 2073 203d 2076 616c 7565 5f73       s = value_s
-00010590: 7461 636b 5b2d 7369 7a65 3a5d 0a20 2020  tack[-size:].   
-000105a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000105b0: 2064 656c 2073 7461 7465 5f73 7461 636b   del state_stack
-000105c0: 5b2d 7369 7a65 3a5d 0a20 2020 2020 2020  [-size:].       
-000105d0: 2020 2020 2020 2020 2020 2020 2064 656c               del
-000105e0: 2076 616c 7565 5f73 7461 636b 5b2d 7369   value_stack[-si
-000105f0: 7a65 3a5d 0a20 2020 2020 2020 2020 2020  ze:].           
-00010600: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00010610: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00010620: 203d 205b 5d0a 0a20 2020 2020 2020 2020   = []..         
-00010630: 2020 2020 2020 2076 616c 7565 203d 2063         value = c
-00010640: 616c 6c62 6163 6b73 5b72 756c 655d 2873  allbacks[rule](s
-00010650: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-00010660: 2020 205f 6163 7469 6f6e 2c20 6e65 775f     _action, new_
-00010670: 7374 6174 6520 3d20 7374 6174 6573 5b73  state = states[s
-00010680: 7461 7465 5f73 7461 636b 5b2d 315d 5d5b  tate_stack[-1]][
-00010690: 7275 6c65 2e6f 7269 6769 6e2e 6e61 6d65  rule.origin.name
-000106a0: 5d0a 2020 2020 2020 2020 2020 2020 2020  ].              
-000106b0: 2020 6173 7365 7274 205f 6163 7469 6f6e    assert _action
-000106c0: 2069 7320 5368 6966 740a 2020 2020 2020   is Shift.      
-000106d0: 2020 2020 2020 2020 2020 7374 6174 655f            state_
-000106e0: 7374 6163 6b2e 6170 7065 6e64 286e 6577  stack.append(new
-000106f0: 5f73 7461 7465 290a 2020 2020 2020 2020  _state).        
-00010700: 2020 2020 2020 2020 7661 6c75 655f 7374          value_st
-00010710: 6163 6b2e 6170 7065 6e64 2876 616c 7565  ack.append(value
-00010720: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-00010730: 2020 2069 6620 6973 5f65 6e64 2061 6e64     if is_end and
-00010740: 2073 7461 7465 5f73 7461 636b 5b2d 315d   state_stack[-1]
-00010750: 203d 3d20 656e 645f 7374 6174 653a 0a20   == end_state:. 
-00010760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010770: 2020 2072 6574 7572 6e20 7661 6c75 655f     return value_
-00010780: 7374 6163 6b5b 2d31 5d0a 0a63 6c61 7373  stack[-1]..class
-00010790: 205f 5061 7273 6572 3a0a 2020 2020 6465   _Parser:.    de
-000107a0: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
-000107b0: 2070 6172 7365 5f74 6162 6c65 2c20 6361   parse_table, ca
-000107c0: 6c6c 6261 636b 732c 2064 6562 7567 3d46  llbacks, debug=F
-000107d0: 616c 7365 293a 0a20 2020 2020 2020 2073  alse):.        s
-000107e0: 656c 662e 7061 7273 655f 7461 626c 6520  elf.parse_table 
-000107f0: 3d20 7061 7273 655f 7461 626c 650a 2020  = parse_table.  
-00010800: 2020 2020 2020 7365 6c66 2e63 616c 6c62        self.callb
-00010810: 6163 6b73 203d 2063 616c 6c62 6163 6b73  acks = callbacks
-00010820: 0a20 2020 2020 2020 2073 656c 662e 6465  .        self.de
-00010830: 6275 6720 3d20 6465 6275 670a 0a20 2020  bug = debug..   
-00010840: 2064 6566 2070 6172 7365 2873 656c 662c   def parse(self,
-00010850: 206c 6578 6572 2c20 7374 6172 742c 2076   lexer, start, v
-00010860: 616c 7565 5f73 7461 636b 3d4e 6f6e 652c  alue_stack=None,
-00010870: 2073 7461 7465 5f73 7461 636b 3d4e 6f6e   state_stack=Non
-00010880: 652c 2073 7461 7274 5f69 6e74 6572 6163  e, start_interac
-00010890: 7469 7665 3d46 616c 7365 293a 0a20 2020  tive=False):.   
-000108a0: 2020 2020 2070 6172 7365 5f63 6f6e 6620       parse_conf 
-000108b0: 3d20 5061 7273 6543 6f6e 6628 7365 6c66  = ParseConf(self
-000108c0: 2e70 6172 7365 5f74 6162 6c65 2c20 7365  .parse_table, se
-000108d0: 6c66 2e63 616c 6c62 6163 6b73 2c20 7374  lf.callbacks, st
-000108e0: 6172 7429 0a20 2020 2020 2020 2070 6172  art).        par
-000108f0: 7365 725f 7374 6174 6520 3d20 5061 7273  ser_state = Pars
-00010900: 6572 5374 6174 6528 7061 7273 655f 636f  erState(parse_co
-00010910: 6e66 2c20 6c65 7865 722c 2073 7461 7465  nf, lexer, state
-00010920: 5f73 7461 636b 2c20 7661 6c75 655f 7374  _stack, value_st
-00010930: 6163 6b29 0a20 2020 2020 2020 2069 6620  ack).        if 
-00010940: 7374 6172 745f 696e 7465 7261 6374 6976  start_interactiv
-00010950: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00010960: 6574 7572 6e20 496e 7465 7261 6374 6976  eturn Interactiv
-00010970: 6550 6172 7365 7228 7365 6c66 2c20 7061  eParser(self, pa
-00010980: 7273 6572 5f73 7461 7465 2c20 7061 7273  rser_state, pars
-00010990: 6572 5f73 7461 7465 2e6c 6578 6572 290a  er_state.lexer).
-000109a0: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-000109b0: 656c 662e 7061 7273 655f 6672 6f6d 5f73  elf.parse_from_s
-000109c0: 7461 7465 2870 6172 7365 725f 7374 6174  tate(parser_stat
-000109d0: 6529 0a0a 0a20 2020 2064 6566 2070 6172  e)...    def par
-000109e0: 7365 5f66 726f 6d5f 7374 6174 6528 7365  se_from_state(se
-000109f0: 6c66 2c20 7374 6174 652c 206c 6173 745f  lf, state, last_
-00010a00: 746f 6b65 6e3d 4e6f 6e65 293a 0a20 2020  token=None):.   
-00010a10: 2020 2020 2023 2d2d 0a20 2020 2020 2020       #--.       
-00010a20: 2074 7279 3a0a 2020 2020 2020 2020 2020   try:.          
-00010a30: 2020 746f 6b65 6e20 3d20 6c61 7374 5f74    token = last_t
-00010a40: 6f6b 656e 0a20 2020 2020 2020 2020 2020  oken.           
-00010a50: 2066 6f72 2074 6f6b 656e 2069 6e20 7374   for token in st
-00010a60: 6174 652e 6c65 7865 722e 6c65 7828 7374  ate.lexer.lex(st
-00010a70: 6174 6529 3a0a 2020 2020 2020 2020 2020  ate):.          
-00010a80: 2020 2020 2020 7374 6174 652e 6665 6564        state.feed
-00010a90: 5f74 6f6b 656e 2874 6f6b 656e 290a 0a20  _token(token).. 
-00010aa0: 2020 2020 2020 2020 2020 2065 6e64 5f74             end_t
-00010ab0: 6f6b 656e 203d 2054 6f6b 656e 2e6e 6577  oken = Token.new
-00010ac0: 5f62 6f72 726f 775f 706f 7328 2724 454e  _borrow_pos('$EN
-00010ad0: 4427 2c20 2727 2c20 746f 6b65 6e29 2069  D', '', token) i
-00010ae0: 6620 746f 6b65 6e20 656c 7365 2054 6f6b  f token else Tok
-00010af0: 656e 2827 2445 4e44 272c 2027 272c 2030  en('$END', '', 0
-00010b00: 2c20 312c 2031 290a 2020 2020 2020 2020  , 1, 1).        
-00010b10: 2020 2020 7265 7475 726e 2073 7461 7465      return state
-00010b20: 2e66 6565 645f 746f 6b65 6e28 656e 645f  .feed_token(end_
-00010b30: 746f 6b65 6e2c 2054 7275 6529 0a20 2020  token, True).   
-00010b40: 2020 2020 2065 7863 6570 7420 556e 6578       except Unex
-00010b50: 7065 6374 6564 496e 7075 7420 6173 2065  pectedInput as e
-00010b60: 3a0a 2020 2020 2020 2020 2020 2020 7472  :.            tr
-00010b70: 793a 0a20 2020 2020 2020 2020 2020 2020  y:.             
-00010b80: 2020 2065 2e69 6e74 6572 6163 7469 7665     e.interactive
-00010b90: 5f70 6172 7365 7220 3d20 496e 7465 7261  _parser = Intera
-00010ba0: 6374 6976 6550 6172 7365 7228 7365 6c66  ctiveParser(self
-00010bb0: 2c20 7374 6174 652c 2073 7461 7465 2e6c  , state, state.l
-00010bc0: 6578 6572 290a 2020 2020 2020 2020 2020  exer).          
-00010bd0: 2020 6578 6365 7074 204e 616d 6545 7272    except NameErr
-00010be0: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
-00010bf0: 2020 2020 7061 7373 0a20 2020 2020 2020      pass.       
-00010c00: 2020 2020 2072 6169 7365 2065 0a20 2020       raise e.   
-00010c10: 2020 2020 2065 7863 6570 7420 4578 6365       except Exce
-00010c20: 7074 696f 6e20 6173 2065 3a0a 2020 2020  ption as e:.    
-00010c30: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00010c40: 6465 6275 673a 0a20 2020 2020 2020 2020  debug:.         
-00010c50: 2020 2020 2020 2070 7269 6e74 2822 2229         print("")
-00010c60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010c70: 2070 7269 6e74 2822 5354 4154 4520 5354   print("STATE ST
-00010c80: 4143 4b20 4455 4d50 2229 0a20 2020 2020  ACK DUMP").     
-00010c90: 2020 2020 2020 2020 2020 2070 7269 6e74             print
-00010ca0: 2822 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d  ("--------------
-00010cb0: 2d2d 2229 0a20 2020 2020 2020 2020 2020  --").           
-00010cc0: 2020 2020 2066 6f72 2069 2c20 7320 696e       for i, s in
-00010cd0: 2065 6e75 6d65 7261 7465 2873 7461 7465   enumerate(state
-00010ce0: 2e73 7461 7465 5f73 7461 636b 293a 0a20  .state_stack):. 
-00010cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010d00: 2020 2070 7269 6e74 2827 2564 2927 2025     print('%d)' %
-00010d10: 2069 202c 2073 290a 2020 2020 2020 2020   i , s).        
-00010d20: 2020 2020 2020 2020 7072 696e 7428 2222          print(""
-00010d30: 290a 0a20 2020 2020 2020 2020 2020 2072  )..            r
-00010d40: 6169 7365 0a0a 0a63 6c61 7373 2041 6374  aise...class Act
-00010d50: 696f 6e3a 0a20 2020 2064 6566 205f 5f69  ion:.    def __i
-00010d60: 6e69 745f 5f28 7365 6c66 2c20 6e61 6d65  nit__(self, name
-00010d70: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
-00010d80: 6e61 6d65 203d 206e 616d 650a 2020 2020  name = name.    
-00010d90: 6465 6620 5f5f 7374 725f 5f28 7365 6c66  def __str__(self
-00010da0: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
-00010db0: 6e20 7365 6c66 2e6e 616d 650a 2020 2020  n self.name.    
-00010dc0: 6465 6620 5f5f 7265 7072 5f5f 2873 656c  def __repr__(sel
-00010dd0: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
-00010de0: 726e 2073 7472 2873 656c 6629 0a0a 5368  rn str(self)..Sh
-00010df0: 6966 7420 3d20 4163 7469 6f6e 2827 5368  ift = Action('Sh
-00010e00: 6966 7427 290a 5265 6475 6365 203d 2041  ift').Reduce = A
-00010e10: 6374 696f 6e28 2752 6564 7563 6527 290a  ction('Reduce').
-00010e20: 0a0a 636c 6173 7320 5061 7273 6554 6162  ..class ParseTab
-00010e30: 6c65 3a0a 2020 2020 6465 6620 5f5f 696e  le:.    def __in
-00010e40: 6974 5f5f 2873 656c 662c 2073 7461 7465  it__(self, state
-00010e50: 732c 2073 7461 7274 5f73 7461 7465 732c  s, start_states,
-00010e60: 2065 6e64 5f73 7461 7465 7329 3a0a 2020   end_states):.  
-00010e70: 2020 2020 2020 7365 6c66 2e73 7461 7465        self.state
-00010e80: 7320 3d20 7374 6174 6573 0a20 2020 2020  s = states.     
-00010e90: 2020 2073 656c 662e 7374 6172 745f 7374     self.start_st
-00010ea0: 6174 6573 203d 2073 7461 7274 5f73 7461  ates = start_sta
-00010eb0: 7465 730a 2020 2020 2020 2020 7365 6c66  tes.        self
-00010ec0: 2e65 6e64 5f73 7461 7465 7320 3d20 656e  .end_states = en
-00010ed0: 645f 7374 6174 6573 0a0a 2020 2020 6465  d_states..    de
-00010ee0: 6620 7365 7269 616c 697a 6528 7365 6c66  f serialize(self
-00010ef0: 2c20 6d65 6d6f 293a 0a20 2020 2020 2020  , memo):.       
-00010f00: 2074 6f6b 656e 7320 3d20 456e 756d 6572   tokens = Enumer
-00010f10: 6174 6f72 2829 0a0a 2020 2020 2020 2020  ator()..        
-00010f20: 7374 6174 6573 203d 207b 0a20 2020 2020  states = {.     
-00010f30: 2020 2020 2020 2073 7461 7465 3a20 7b74         state: {t
-00010f40: 6f6b 656e 732e 6765 7428 746f 6b65 6e29  okens.get(token)
-00010f50: 3a20 2828 312c 2061 7267 2e73 6572 6961  : ((1, arg.seria
-00010f60: 6c69 7a65 286d 656d 6f29 2920 6966 2061  lize(memo)) if a
-00010f70: 6374 696f 6e20 6973 2052 6564 7563 6520  ction is Reduce 
-00010f80: 656c 7365 2028 302c 2061 7267 2929 0a20  else (0, arg)). 
-00010f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010fa0: 2020 2066 6f72 2074 6f6b 656e 2c20 2861     for token, (a
-00010fb0: 6374 696f 6e2c 2061 7267 2920 696e 2061  ction, arg) in a
-00010fc0: 6374 696f 6e73 2e69 7465 6d73 2829 7d0a  ctions.items()}.
-00010fd0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00010fe0: 7374 6174 652c 2061 6374 696f 6e73 2069  state, actions i
-00010ff0: 6e20 7365 6c66 2e73 7461 7465 732e 6974  n self.states.it
-00011000: 656d 7328 290a 2020 2020 2020 2020 7d0a  ems().        }.
-00011010: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00011020: 7b0a 2020 2020 2020 2020 2020 2020 2774  {.            't
-00011030: 6f6b 656e 7327 3a20 746f 6b65 6e73 2e72  okens': tokens.r
-00011040: 6576 6572 7365 6428 292c 0a20 2020 2020  eversed(),.     
-00011050: 2020 2020 2020 2027 7374 6174 6573 273a         'states':
-00011060: 2073 7461 7465 732c 0a20 2020 2020 2020   states,.       
-00011070: 2020 2020 2027 7374 6172 745f 7374 6174       'start_stat
-00011080: 6573 273a 2073 656c 662e 7374 6172 745f  es': self.start_
-00011090: 7374 6174 6573 2c0a 2020 2020 2020 2020  states,.        
-000110a0: 2020 2020 2765 6e64 5f73 7461 7465 7327      'end_states'
-000110b0: 3a20 7365 6c66 2e65 6e64 5f73 7461 7465  : self.end_state
-000110c0: 732c 0a20 2020 2020 2020 207d 0a0a 2020  s,.        }..  
-000110d0: 2020 4063 6c61 7373 6d65 7468 6f64 0a20    @classmethod. 
-000110e0: 2020 2064 6566 2064 6573 6572 6961 6c69     def deseriali
-000110f0: 7a65 2863 6c73 2c20 6461 7461 2c20 6d65  ze(cls, data, me
-00011100: 6d6f 293a 0a20 2020 2020 2020 2074 6f6b  mo):.        tok
-00011110: 656e 7320 3d20 6461 7461 5b27 746f 6b65  ens = data['toke
-00011120: 6e73 275d 0a20 2020 2020 2020 2073 7461  ns'].        sta
-00011130: 7465 7320 3d20 7b0a 2020 2020 2020 2020  tes = {.        
-00011140: 2020 2020 7374 6174 653a 207b 746f 6b65      state: {toke
-00011150: 6e73 5b74 6f6b 656e 5d3a 2028 2852 6564  ns[token]: ((Red
-00011160: 7563 652c 2052 756c 652e 6465 7365 7269  uce, Rule.deseri
-00011170: 616c 697a 6528 6172 672c 206d 656d 6f29  alize(arg, memo)
-00011180: 2920 6966 2061 6374 696f 6e3d 3d31 2065  ) if action==1 e
-00011190: 6c73 6520 2853 6869 6674 2c20 6172 6729  lse (Shift, arg)
-000111a0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000111b0: 2020 2020 2020 666f 7220 746f 6b65 6e2c        for token,
-000111c0: 2028 6163 7469 6f6e 2c20 6172 6729 2069   (action, arg) i
-000111d0: 6e20 6163 7469 6f6e 732e 6974 656d 7328  n actions.items(
-000111e0: 297d 0a20 2020 2020 2020 2020 2020 2066  )}.            f
-000111f0: 6f72 2073 7461 7465 2c20 6163 7469 6f6e  or state, action
-00011200: 7320 696e 2064 6174 615b 2773 7461 7465  s in data['state
-00011210: 7327 5d2e 6974 656d 7328 290a 2020 2020  s'].items().    
-00011220: 2020 2020 7d0a 2020 2020 2020 2020 7265      }.        re
-00011230: 7475 726e 2063 6c73 2873 7461 7465 732c  turn cls(states,
-00011240: 2064 6174 615b 2773 7461 7274 5f73 7461   data['start_sta
-00011250: 7465 7327 5d2c 2064 6174 615b 2765 6e64  tes'], data['end
-00011260: 5f73 7461 7465 7327 5d29 0a0a 0a63 6c61  _states'])...cla
-00011270: 7373 2049 6e74 5061 7273 6554 6162 6c65  ss IntParseTable
-00011280: 2850 6172 7365 5461 626c 6529 3a0a 0a20  (ParseTable):.. 
-00011290: 2020 2040 636c 6173 736d 6574 686f 640a     @classmethod.
-000112a0: 2020 2020 6465 6620 6672 6f6d 5f50 6172      def from_Par
-000112b0: 7365 5461 626c 6528 636c 732c 2070 6172  seTable(cls, par
-000112c0: 7365 5f74 6162 6c65 293a 0a20 2020 2020  se_table):.     
-000112d0: 2020 2065 6e75 6d20 3d20 6c69 7374 2870     enum = list(p
-000112e0: 6172 7365 5f74 6162 6c65 2e73 7461 7465  arse_table.state
-000112f0: 7329 0a20 2020 2020 2020 2073 7461 7465  s).        state
-00011300: 5f74 6f5f 6964 7820 3d20 7b73 3a69 2066  _to_idx = {s:i f
-00011310: 6f72 2069 2c73 2069 6e20 656e 756d 6572  or i,s in enumer
-00011320: 6174 6528 656e 756d 297d 0a20 2020 2020  ate(enum)}.     
-00011330: 2020 2069 6e74 5f73 7461 7465 7320 3d20     int_states = 
-00011340: 7b7d 0a0a 2020 2020 2020 2020 666f 7220  {}..        for 
-00011350: 732c 206c 6120 696e 2070 6172 7365 5f74  s, la in parse_t
-00011360: 6162 6c65 2e73 7461 7465 732e 6974 656d  able.states.item
-00011370: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00011380: 206c 6120 3d20 7b6b 3a28 765b 305d 2c20   la = {k:(v[0], 
-00011390: 7374 6174 655f 746f 5f69 6478 5b76 5b31  state_to_idx[v[1
-000113a0: 5d5d 2920 6966 2076 5b30 5d20 6973 2053  ]]) if v[0] is S
-000113b0: 6869 6674 2065 6c73 6520 760a 2020 2020  hift else v.    
-000113c0: 2020 2020 2020 2020 2020 2020 2020 666f                fo
-000113d0: 7220 6b2c 7620 696e 206c 612e 6974 656d  r k,v in la.item
-000113e0: 7328 297d 0a20 2020 2020 2020 2020 2020  s()}.           
-000113f0: 2069 6e74 5f73 7461 7465 735b 2073 7461   int_states[ sta
-00011400: 7465 5f74 6f5f 6964 785b 735d 205d 203d  te_to_idx[s] ] =
-00011410: 206c 610a 0a0a 2020 2020 2020 2020 7374   la...        st
-00011420: 6172 745f 7374 6174 6573 203d 207b 7374  art_states = {st
-00011430: 6172 743a 7374 6174 655f 746f 5f69 6478  art:state_to_idx
-00011440: 5b73 5d20 666f 7220 7374 6172 742c 2073  [s] for start, s
-00011450: 2069 6e20 7061 7273 655f 7461 626c 652e   in parse_table.
-00011460: 7374 6172 745f 7374 6174 6573 2e69 7465  start_states.ite
-00011470: 6d73 2829 7d0a 2020 2020 2020 2020 656e  ms()}.        en
-00011480: 645f 7374 6174 6573 203d 207b 7374 6172  d_states = {star
-00011490: 743a 7374 6174 655f 746f 5f69 6478 5b73  t:state_to_idx[s
-000114a0: 5d20 666f 7220 7374 6172 742c 2073 2069  ] for start, s i
-000114b0: 6e20 7061 7273 655f 7461 626c 652e 656e  n parse_table.en
-000114c0: 645f 7374 6174 6573 2e69 7465 6d73 2829  d_states.items()
-000114d0: 7d0a 2020 2020 2020 2020 7265 7475 726e  }.        return
-000114e0: 2063 6c73 2869 6e74 5f73 7461 7465 732c   cls(int_states,
-000114f0: 2073 7461 7274 5f73 7461 7465 732c 2065   start_states, e
-00011500: 6e64 5f73 7461 7465 7329 0a0a 0a0a 6465  nd_states)....de
-00011510: 6620 5f77 7261 705f 6c65 7865 7228 6c65  f _wrap_lexer(le
-00011520: 7865 725f 636c 6173 7329 3a0a 2020 2020  xer_class):.    
-00011530: 6675 7475 7265 5f69 6e74 6572 6661 6365  future_interface
-00011540: 203d 2067 6574 6174 7472 286c 6578 6572   = getattr(lexer
-00011550: 5f63 6c61 7373 2c20 275f 5f66 7574 7572  _class, '__futur
-00011560: 655f 696e 7465 7266 6163 655f 5f27 2c20  e_interface__', 
-00011570: 4661 6c73 6529 0a20 2020 2069 6620 6675  False).    if fu
-00011580: 7475 7265 5f69 6e74 6572 6661 6365 3a0a  ture_interface:.
-00011590: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-000115a0: 6578 6572 5f63 6c61 7373 0a20 2020 2065  exer_class.    e
-000115b0: 6c73 653a 0a20 2020 2020 2020 2063 6c61  lse:.        cla
-000115c0: 7373 2043 7573 746f 6d4c 6578 6572 5772  ss CustomLexerWr
-000115d0: 6170 7065 7228 4c65 7865 7229 3a0a 2020  apper(Lexer):.  
-000115e0: 2020 2020 2020 2020 2020 6465 6620 5f5f            def __
-000115f0: 696e 6974 5f5f 2873 656c 662c 206c 6578  init__(self, lex
-00011600: 6572 5f63 6f6e 6629 3a0a 2020 2020 2020  er_conf):.      
-00011610: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00011620: 6578 6572 203d 206c 6578 6572 5f63 6c61  exer = lexer_cla
-00011630: 7373 286c 6578 6572 5f63 6f6e 6629 0a20  ss(lexer_conf). 
-00011640: 2020 2020 2020 2020 2020 2064 6566 206c             def l
-00011650: 6578 2873 656c 662c 206c 6578 6572 5f73  ex(self, lexer_s
-00011660: 7461 7465 2c20 7061 7273 6572 5f73 7461  tate, parser_sta
-00011670: 7465 293a 0a20 2020 2020 2020 2020 2020  te):.           
-00011680: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00011690: 2e6c 6578 6572 2e6c 6578 286c 6578 6572  .lexer.lex(lexer
-000116a0: 5f73 7461 7465 2e74 6578 7429 0a20 2020  _state.text).   
-000116b0: 2020 2020 2072 6574 7572 6e20 4375 7374       return Cust
-000116c0: 6f6d 4c65 7865 7257 7261 7070 6572 0a0a  omLexerWrapper..
-000116d0: 0a64 6566 205f 6465 7365 7269 616c 697a  .def _deserializ
-000116e0: 655f 7061 7273 696e 675f 6672 6f6e 7465  e_parsing_fronte
-000116f0: 6e64 2864 6174 612c 206d 656d 6f2c 206c  nd(data, memo, l
-00011700: 6578 6572 5f63 6f6e 662c 2063 616c 6c62  exer_conf, callb
-00011710: 6163 6b73 2c20 6f70 7469 6f6e 7329 3a0a  acks, options):.
-00011720: 2020 2020 7061 7273 6572 5f63 6f6e 6620      parser_conf 
-00011730: 3d20 5061 7273 6572 436f 6e66 2e64 6573  = ParserConf.des
-00011740: 6572 6961 6c69 7a65 2864 6174 615b 2770  erialize(data['p
-00011750: 6172 7365 725f 636f 6e66 275d 2c20 6d65  arser_conf'], me
-00011760: 6d6f 290a 2020 2020 636c 7320 3d20 286f  mo).    cls = (o
-00011770: 7074 696f 6e73 2061 6e64 206f 7074 696f  ptions and optio
-00011780: 6e73 2e5f 706c 7567 696e 732e 6765 7428  ns._plugins.get(
-00011790: 274c 414c 525f 5061 7273 6572 2729 2920  'LALR_Parser')) 
-000117a0: 6f72 204c 414c 525f 5061 7273 6572 0a20  or LALR_Parser. 
-000117b0: 2020 2070 6172 7365 7220 3d20 636c 732e     parser = cls.
-000117c0: 6465 7365 7269 616c 697a 6528 6461 7461  deserialize(data
-000117d0: 5b27 7061 7273 6572 275d 2c20 6d65 6d6f  ['parser'], memo
-000117e0: 2c20 6361 6c6c 6261 636b 732c 206f 7074  , callbacks, opt
-000117f0: 696f 6e73 2e64 6562 7567 290a 2020 2020  ions.debug).    
-00011800: 7061 7273 6572 5f63 6f6e 662e 6361 6c6c  parser_conf.call
-00011810: 6261 636b 7320 3d20 6361 6c6c 6261 636b  backs = callback
-00011820: 730a 2020 2020 7265 7475 726e 2050 6172  s.    return Par
-00011830: 7369 6e67 4672 6f6e 7465 6e64 286c 6578  singFrontend(lex
-00011840: 6572 5f63 6f6e 662c 2070 6172 7365 725f  er_conf, parser_
-00011850: 636f 6e66 2c20 6f70 7469 6f6e 732c 2070  conf, options, p
-00011860: 6172 7365 723d 7061 7273 6572 290a 0a0a  arser=parser)...
-00011870: 5f70 6172 7365 725f 6372 6561 746f 7273  _parser_creators
-00011880: 3a20 2744 6963 745b 7374 722c 2043 616c  : 'Dict[str, Cal
-00011890: 6c61 626c 655b 5b4c 6578 6572 436f 6e66  lable[[LexerConf
-000118a0: 2c20 416e 792c 2041 6e79 5d2c 2041 6e79  , Any, Any], Any
-000118b0: 5d5d 2720 3d20 7b7d 0a0a 0a63 6c61 7373  ]]' = {}...class
-000118c0: 2050 6172 7369 6e67 4672 6f6e 7465 6e64   ParsingFrontend
-000118d0: 2853 6572 6961 6c69 7a65 293a 0a20 2020  (Serialize):.   
-000118e0: 205f 5f73 6572 6961 6c69 7a65 5f66 6965   __serialize_fie
-000118f0: 6c64 735f 5f20 3d20 276c 6578 6572 5f63  lds__ = 'lexer_c
-00011900: 6f6e 6627 2c20 2770 6172 7365 725f 636f  onf', 'parser_co
-00011910: 6e66 272c 2027 7061 7273 6572 270a 0a20  nf', 'parser'.. 
-00011920: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
-00011930: 7365 6c66 2c20 6c65 7865 725f 636f 6e66  self, lexer_conf
-00011940: 2c20 7061 7273 6572 5f63 6f6e 662c 206f  , parser_conf, o
-00011950: 7074 696f 6e73 2c20 7061 7273 6572 3d4e  ptions, parser=N
-00011960: 6f6e 6529 3a0a 2020 2020 2020 2020 7365  one):.        se
-00011970: 6c66 2e70 6172 7365 725f 636f 6e66 203d  lf.parser_conf =
-00011980: 2070 6172 7365 725f 636f 6e66 0a20 2020   parser_conf.   
-00011990: 2020 2020 2073 656c 662e 6c65 7865 725f       self.lexer_
-000119a0: 636f 6e66 203d 206c 6578 6572 5f63 6f6e  conf = lexer_con
-000119b0: 660a 2020 2020 2020 2020 7365 6c66 2e6f  f.        self.o
-000119c0: 7074 696f 6e73 203d 206f 7074 696f 6e73  ptions = options
-000119d0: 0a0a 2020 2020 2020 2020 2323 0a0a 2020  ..        ##..  
-000119e0: 2020 2020 2020 6966 2070 6172 7365 723a        if parser:
-000119f0: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
-00011a00: 2020 7365 6c66 2e70 6172 7365 7220 3d20    self.parser = 
-00011a10: 7061 7273 6572 0a20 2020 2020 2020 2065  parser.        e
-00011a20: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-00011a30: 2063 7265 6174 655f 7061 7273 6572 203d   create_parser =
-00011a40: 205f 7061 7273 6572 5f63 7265 6174 6f72   _parser_creator
-00011a50: 732e 6765 7428 7061 7273 6572 5f63 6f6e  s.get(parser_con
-00011a60: 662e 7061 7273 6572 5f74 7970 6529 0a20  f.parser_type). 
-00011a70: 2020 2020 2020 2020 2020 2061 7373 6572             asser
-00011a80: 7420 6372 6561 7465 5f70 6172 7365 7220  t create_parser 
-00011a90: 6973 206e 6f74 204e 6f6e 652c 2022 7b7d  is not None, "{}
-00011aa0: 2069 7320 6e6f 7420 7375 7070 6f72 7465   is not supporte
-00011ab0: 6420 696e 2073 7461 6e64 616c 6f6e 6520  d in standalone 
-00011ac0: 6d6f 6465 222e 666f 726d 6174 280a 2020  mode".format(.  
-00011ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011ae0: 2020 7061 7273 6572 5f63 6f6e 662e 7061    parser_conf.pa
-00011af0: 7273 6572 5f74 7970 650a 2020 2020 2020  rser_type.      
-00011b00: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00011b10: 2020 2020 2020 2020 7365 6c66 2e70 6172          self.par
-00011b20: 7365 7220 3d20 6372 6561 7465 5f70 6172  ser = create_par
-00011b30: 7365 7228 6c65 7865 725f 636f 6e66 2c20  ser(lexer_conf, 
-00011b40: 7061 7273 6572 5f63 6f6e 662c 206f 7074  parser_conf, opt
-00011b50: 696f 6e73 290a 0a20 2020 2020 2020 2023  ions)..        #
-00011b60: 230a 0a20 2020 2020 2020 206c 6578 6572  #..        lexer
-00011b70: 5f74 7970 6520 3d20 6c65 7865 725f 636f  _type = lexer_co
-00011b80: 6e66 2e6c 6578 6572 5f74 7970 650a 2020  nf.lexer_type.  
-00011b90: 2020 2020 2020 7365 6c66 2e73 6b69 705f        self.skip_
-00011ba0: 6c65 7865 7220 3d20 4661 6c73 650a 2020  lexer = False.  
-00011bb0: 2020 2020 2020 6966 206c 6578 6572 5f74        if lexer_t
-00011bc0: 7970 6520 696e 2028 2764 796e 616d 6963  ype in ('dynamic
-00011bd0: 272c 2027 6479 6e61 6d69 635f 636f 6d70  ', 'dynamic_comp
-00011be0: 6c65 7465 2729 3a0a 2020 2020 2020 2020  lete'):.        
-00011bf0: 2020 2020 6173 7365 7274 206c 6578 6572      assert lexer
-00011c00: 5f63 6f6e 662e 706f 7374 6c65 7820 6973  _conf.postlex is
-00011c10: 204e 6f6e 650a 2020 2020 2020 2020 2020   None.          
-00011c20: 2020 7365 6c66 2e73 6b69 705f 6c65 7865    self.skip_lexe
-00011c30: 7220 3d20 5472 7565 0a20 2020 2020 2020  r = True.       
-00011c40: 2020 2020 2072 6574 7572 6e0a 0a20 2020       return..   
-00011c50: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-00011c60: 2020 2020 2020 6372 6561 7465 5f6c 6578        create_lex
-00011c70: 6572 203d 207b 0a20 2020 2020 2020 2020  er = {.         
-00011c80: 2020 2020 2020 2027 6261 7369 6327 3a20         'basic': 
-00011c90: 6372 6561 7465 5f62 6173 6963 5f6c 6578  create_basic_lex
-00011ca0: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
-00011cb0: 2020 2020 2763 6f6e 7465 7874 7561 6c27      'contextual'
-00011cc0: 3a20 6372 6561 7465 5f63 6f6e 7465 7874  : create_context
-00011cd0: 7561 6c5f 6c65 7865 722c 0a20 2020 2020  ual_lexer,.     
-00011ce0: 2020 2020 2020 207d 5b6c 6578 6572 5f74         }[lexer_t
-00011cf0: 7970 655d 0a20 2020 2020 2020 2065 7863  ype].        exc
-00011d00: 6570 7420 4b65 7945 7272 6f72 3a0a 2020  ept KeyError:.  
-00011d10: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-00011d20: 2069 7373 7562 636c 6173 7328 6c65 7865   issubclass(lexe
-00011d30: 725f 7479 7065 2c20 4c65 7865 7229 2c20  r_type, Lexer), 
-00011d40: 6c65 7865 725f 7479 7065 0a20 2020 2020  lexer_type.     
-00011d50: 2020 2020 2020 2073 656c 662e 6c65 7865         self.lexe
-00011d60: 7220 3d20 5f77 7261 705f 6c65 7865 7228  r = _wrap_lexer(
-00011d70: 6c65 7865 725f 7479 7065 2928 6c65 7865  lexer_type)(lexe
-00011d80: 725f 636f 6e66 290a 2020 2020 2020 2020  r_conf).        
-00011d90: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00011da0: 2020 7365 6c66 2e6c 6578 6572 203d 2063    self.lexer = c
-00011db0: 7265 6174 655f 6c65 7865 7228 6c65 7865  reate_lexer(lexe
-00011dc0: 725f 636f 6e66 2c20 7365 6c66 2e70 6172  r_conf, self.par
-00011dd0: 7365 722c 206c 6578 6572 5f63 6f6e 662e  ser, lexer_conf.
-00011de0: 706f 7374 6c65 782c 206f 7074 696f 6e73  postlex, options
-00011df0: 290a 0a20 2020 2020 2020 2069 6620 6c65  )..        if le
-00011e00: 7865 725f 636f 6e66 2e70 6f73 746c 6578  xer_conf.postlex
-00011e10: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00011e20: 6c66 2e6c 6578 6572 203d 2050 6f73 744c  lf.lexer = PostL
-00011e30: 6578 436f 6e6e 6563 746f 7228 7365 6c66  exConnector(self
-00011e40: 2e6c 6578 6572 2c20 6c65 7865 725f 636f  .lexer, lexer_co
-00011e50: 6e66 2e70 6f73 746c 6578 290a 0a20 2020  nf.postlex)..   
-00011e60: 2064 6566 205f 7665 7269 6679 5f73 7461   def _verify_sta
-00011e70: 7274 2873 656c 662c 2073 7461 7274 3d4e  rt(self, start=N
-00011e80: 6f6e 6529 3a0a 2020 2020 2020 2020 6966  one):.        if
-00011e90: 2073 7461 7274 2069 7320 4e6f 6e65 3a0a   start is None:.
-00011ea0: 2020 2020 2020 2020 2020 2020 7374 6172              star
-00011eb0: 745f 6465 636c 7320 3d20 7365 6c66 2e70  t_decls = self.p
-00011ec0: 6172 7365 725f 636f 6e66 2e73 7461 7274  arser_conf.start
-00011ed0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-00011ee0: 6c65 6e28 7374 6172 745f 6465 636c 7329  len(start_decls)
-00011ef0: 203e 2031 3a0a 2020 2020 2020 2020 2020   > 1:.          
-00011f00: 2020 2020 2020 7261 6973 6520 436f 6e66        raise Conf
-00011f10: 6967 7572 6174 696f 6e45 7272 6f72 2822  igurationError("
-00011f20: 4c61 726b 2069 6e69 7469 616c 697a 6564  Lark initialized
-00011f30: 2077 6974 6820 6d6f 7265 2074 6861 6e20   with more than 
-00011f40: 3120 706f 7373 6962 6c65 2073 7461 7274  1 possible start
-00011f50: 2072 756c 652e 204d 7573 7420 7370 6563   rule. Must spec
-00011f60: 6966 7920 7768 6963 6820 7374 6172 7420  ify which start 
-00011f70: 7275 6c65 2074 6f20 7061 7273 6522 2c20  rule to parse", 
-00011f80: 7374 6172 745f 6465 636c 7329 0a20 2020  start_decls).   
-00011f90: 2020 2020 2020 2020 2073 7461 7274 202c           start ,
-00011fa0: 3d20 7374 6172 745f 6465 636c 730a 2020  = start_decls.  
-00011fb0: 2020 2020 2020 656c 6966 2073 7461 7274        elif start
-00011fc0: 206e 6f74 2069 6e20 7365 6c66 2e70 6172   not in self.par
-00011fd0: 7365 725f 636f 6e66 2e73 7461 7274 3a0a  ser_conf.start:.
-00011fe0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00011ff0: 6520 436f 6e66 6967 7572 6174 696f 6e45  e ConfigurationE
-00012000: 7272 6f72 2822 556e 6b6e 6f77 6e20 7374  rror("Unknown st
-00012010: 6172 7420 7275 6c65 2025 732e 204d 7573  art rule %s. Mus
-00012020: 7420 6265 206f 6e65 206f 6620 2572 2220  t be one of %r" 
-00012030: 2520 2873 7461 7274 2c20 7365 6c66 2e70  % (start, self.p
-00012040: 6172 7365 725f 636f 6e66 2e73 7461 7274  arser_conf.start
-00012050: 2929 0a20 2020 2020 2020 2072 6574 7572  )).        retur
-00012060: 6e20 7374 6172 740a 0a20 2020 2064 6566  n start..    def
-00012070: 205f 6d61 6b65 5f6c 6578 6572 5f74 6872   _make_lexer_thr
-00012080: 6561 6428 7365 6c66 2c20 7465 7874 293a  ead(self, text):
-00012090: 0a20 2020 2020 2020 2063 6c73 203d 2028  .        cls = (
-000120a0: 7365 6c66 2e6f 7074 696f 6e73 2061 6e64  self.options and
-000120b0: 2073 656c 662e 6f70 7469 6f6e 732e 5f70   self.options._p
-000120c0: 6c75 6769 6e73 2e67 6574 2827 4c65 7865  lugins.get('Lexe
-000120d0: 7254 6872 6561 6427 2929 206f 7220 4c65  rThread')) or Le
-000120e0: 7865 7254 6872 6561 640a 2020 2020 2020  xerThread.      
-000120f0: 2020 7265 7475 726e 2074 6578 7420 6966    return text if
-00012100: 2073 656c 662e 736b 6970 5f6c 6578 6572   self.skip_lexer
-00012110: 2065 6c73 6520 636c 732e 6672 6f6d 5f74   else cls.from_t
-00012120: 6578 7428 7365 6c66 2e6c 6578 6572 2c20  ext(self.lexer, 
-00012130: 7465 7874 290a 0a20 2020 2064 6566 2070  text)..    def p
-00012140: 6172 7365 2873 656c 662c 2074 6578 742c  arse(self, text,
-00012150: 2073 7461 7274 3d4e 6f6e 652c 206f 6e5f   start=None, on_
-00012160: 6572 726f 723d 4e6f 6e65 293a 0a20 2020  error=None):.   
-00012170: 2020 2020 2063 686f 7365 6e5f 7374 6172       chosen_star
-00012180: 7420 3d20 7365 6c66 2e5f 7665 7269 6679  t = self._verify
-00012190: 5f73 7461 7274 2873 7461 7274 290a 2020  _start(start).  
-000121a0: 2020 2020 2020 6b77 203d 207b 7d20 6966        kw = {} if
-000121b0: 206f 6e5f 6572 726f 7220 6973 204e 6f6e   on_error is Non
-000121c0: 6520 656c 7365 207b 276f 6e5f 6572 726f  e else {'on_erro
-000121d0: 7227 3a20 6f6e 5f65 7272 6f72 7d0a 2020  r': on_error}.  
-000121e0: 2020 2020 2020 7374 7265 616d 203d 2073        stream = s
-000121f0: 656c 662e 5f6d 616b 655f 6c65 7865 725f  elf._make_lexer_
-00012200: 7468 7265 6164 2874 6578 7429 0a20 2020  thread(text).   
-00012210: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00012220: 2e70 6172 7365 722e 7061 7273 6528 7374  .parser.parse(st
-00012230: 7265 616d 2c20 6368 6f73 656e 5f73 7461  ream, chosen_sta
-00012240: 7274 2c20 2a2a 6b77 290a 0a20 2020 2064  rt, **kw)..    d
-00012250: 6566 2070 6172 7365 5f69 6e74 6572 6163  ef parse_interac
-00012260: 7469 7665 2873 656c 662c 2074 6578 743d  tive(self, text=
-00012270: 4e6f 6e65 2c20 7374 6172 743d 4e6f 6e65  None, start=None
-00012280: 293a 0a20 2020 2020 2020 2063 686f 7365  ):.        chose
-00012290: 6e5f 7374 6172 7420 3d20 7365 6c66 2e5f  n_start = self._
-000122a0: 7665 7269 6679 5f73 7461 7274 2873 7461  verify_start(sta
-000122b0: 7274 290a 2020 2020 2020 2020 6966 2073  rt).        if s
-000122c0: 656c 662e 7061 7273 6572 5f63 6f6e 662e  elf.parser_conf.
-000122d0: 7061 7273 6572 5f74 7970 6520 213d 2027  parser_type != '
-000122e0: 6c61 6c72 273a 0a20 2020 2020 2020 2020  lalr':.         
-000122f0: 2020 2072 6169 7365 2043 6f6e 6669 6775     raise Configu
-00012300: 7261 7469 6f6e 4572 726f 7228 2270 6172  rationError("par
-00012310: 7365 5f69 6e74 6572 6163 7469 7665 2829  se_interactive()
-00012320: 2063 7572 7265 6e74 6c79 206f 6e6c 7920   currently only 
-00012330: 776f 726b 7320 7769 7468 2070 6172 7365  works with parse
-00012340: 723d 276c 616c 7227 2022 290a 2020 2020  r='lalr' ").    
-00012350: 2020 2020 7374 7265 616d 203d 2073 656c      stream = sel
-00012360: 662e 5f6d 616b 655f 6c65 7865 725f 7468  f._make_lexer_th
-00012370: 7265 6164 2874 6578 7429 0a20 2020 2020  read(text).     
-00012380: 2020 2072 6574 7572 6e20 7365 6c66 2e70     return self.p
-00012390: 6172 7365 722e 7061 7273 655f 696e 7465  arser.parse_inte
-000123a0: 7261 6374 6976 6528 7374 7265 616d 2c20  ractive(stream, 
-000123b0: 6368 6f73 656e 5f73 7461 7274 290a 0a0a  chosen_start)...
-000123c0: 6465 6620 5f76 616c 6964 6174 655f 6672  def _validate_fr
-000123d0: 6f6e 7465 6e64 5f61 7267 7328 7061 7273  ontend_args(pars
-000123e0: 6572 2c20 6c65 7865 7229 202d 3e20 4e6f  er, lexer) -> No
-000123f0: 6e65 3a0a 2020 2020 6173 7365 7274 5f63  ne:.    assert_c
-00012400: 6f6e 6669 6728 7061 7273 6572 2c20 2827  onfig(parser, ('
-00012410: 6c61 6c72 272c 2027 6561 726c 6579 272c  lalr', 'earley',
-00012420: 2027 6379 6b27 2929 0a20 2020 2069 6620   'cyk')).    if 
-00012430: 6e6f 7420 6973 696e 7374 616e 6365 286c  not isinstance(l
-00012440: 6578 6572 2c20 7479 7065 293a 2020 2020  exer, type):    
-00012450: 2023 230a 0a20 2020 2020 2020 2065 7870   ##..        exp
-00012460: 6563 7465 6420 3d20 7b0a 2020 2020 2020  ected = {.      
-00012470: 2020 2020 2020 276c 616c 7227 3a20 2827        'lalr': ('
-00012480: 6261 7369 6327 2c20 2763 6f6e 7465 7874  basic', 'context
-00012490: 7561 6c27 292c 0a20 2020 2020 2020 2020  ual'),.         
-000124a0: 2020 2027 6561 726c 6579 273a 2028 2762     'earley': ('b
-000124b0: 6173 6963 272c 2027 6479 6e61 6d69 6327  asic', 'dynamic'
-000124c0: 2c20 2764 796e 616d 6963 5f63 6f6d 706c  , 'dynamic_compl
-000124d0: 6574 6527 292c 0a20 2020 2020 2020 2020  ete'),.         
-000124e0: 2020 2027 6379 6b27 3a20 2827 6261 7369     'cyk': ('basi
-000124f0: 6327 2c20 292c 0a20 2020 2020 2020 2020  c', ),.         
-00012500: 7d5b 7061 7273 6572 5d0a 2020 2020 2020  }[parser].      
-00012510: 2020 6173 7365 7274 5f63 6f6e 6669 6728    assert_config(
-00012520: 6c65 7865 722c 2065 7870 6563 7465 642c  lexer, expected,
-00012530: 2027 5061 7273 6572 2025 7220 646f 6573   'Parser %r does
-00012540: 206e 6f74 2073 7570 706f 7274 206c 6578   not support lex
-00012550: 6572 2025 2572 2c20 6578 7065 6374 6564  er %%r, expected
-00012560: 206f 6e65 206f 6620 2525 7327 2025 2070   one of %%s' % p
-00012570: 6172 7365 7229 0a0a 0a64 6566 205f 6765  arser)...def _ge
-00012580: 745f 6c65 7865 725f 6361 6c6c 6261 636b  t_lexer_callback
-00012590: 7328 7472 616e 7366 6f72 6d65 722c 2074  s(transformer, t
-000125a0: 6572 6d69 6e61 6c73 293a 0a20 2020 2072  erminals):.    r
-000125b0: 6573 756c 7420 3d20 7b7d 0a20 2020 2066  esult = {}.    f
-000125c0: 6f72 2074 6572 6d69 6e61 6c20 696e 2074  or terminal in t
-000125d0: 6572 6d69 6e61 6c73 3a0a 2020 2020 2020  erminals:.      
-000125e0: 2020 6361 6c6c 6261 636b 203d 2067 6574    callback = get
-000125f0: 6174 7472 2874 7261 6e73 666f 726d 6572  attr(transformer
-00012600: 2c20 7465 726d 696e 616c 2e6e 616d 652c  , terminal.name,
-00012610: 204e 6f6e 6529 0a20 2020 2020 2020 2069   None).        i
-00012620: 6620 6361 6c6c 6261 636b 2069 7320 6e6f  f callback is no
-00012630: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
-00012640: 2020 2020 7265 7375 6c74 5b74 6572 6d69      result[termi
-00012650: 6e61 6c2e 6e61 6d65 5d20 3d20 6361 6c6c  nal.name] = call
-00012660: 6261 636b 0a20 2020 2072 6574 7572 6e20  back.    return 
-00012670: 7265 7375 6c74 0a0a 636c 6173 7320 506f  result..class Po
-00012680: 7374 4c65 7843 6f6e 6e65 6374 6f72 3a0a  stLexConnector:.
-00012690: 2020 2020 6465 6620 5f5f 696e 6974 5f5f      def __init__
-000126a0: 2873 656c 662c 206c 6578 6572 2c20 706f  (self, lexer, po
-000126b0: 7374 6c65 7865 7229 3a0a 2020 2020 2020  stlexer):.      
-000126c0: 2020 7365 6c66 2e6c 6578 6572 203d 206c    self.lexer = l
-000126d0: 6578 6572 0a20 2020 2020 2020 2073 656c  exer.        sel
-000126e0: 662e 706f 7374 6c65 7865 7220 3d20 706f  f.postlexer = po
-000126f0: 7374 6c65 7865 720a 0a20 2020 2064 6566  stlexer..    def
-00012700: 206c 6578 2873 656c 662c 206c 6578 6572   lex(self, lexer
-00012710: 5f73 7461 7465 2c20 7061 7273 6572 5f73  _state, parser_s
-00012720: 7461 7465 293a 0a20 2020 2020 2020 2069  tate):.        i
-00012730: 203d 2073 656c 662e 6c65 7865 722e 6c65   = self.lexer.le
-00012740: 7828 6c65 7865 725f 7374 6174 652c 2070  x(lexer_state, p
-00012750: 6172 7365 725f 7374 6174 6529 0a20 2020  arser_state).   
-00012760: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00012770: 2e70 6f73 746c 6578 6572 2e70 726f 6365  .postlexer.proce
-00012780: 7373 2869 290a 0a0a 0a64 6566 2063 7265  ss(i)....def cre
-00012790: 6174 655f 6261 7369 635f 6c65 7865 7228  ate_basic_lexer(
-000127a0: 6c65 7865 725f 636f 6e66 2c20 7061 7273  lexer_conf, pars
-000127b0: 6572 2c20 706f 7374 6c65 782c 206f 7074  er, postlex, opt
-000127c0: 696f 6e73 293a 0a20 2020 2063 6c73 203d  ions):.    cls =
-000127d0: 2028 6f70 7469 6f6e 7320 616e 6420 6f70   (options and op
-000127e0: 7469 6f6e 732e 5f70 6c75 6769 6e73 2e67  tions._plugins.g
-000127f0: 6574 2827 4261 7369 634c 6578 6572 2729  et('BasicLexer')
-00012800: 2920 6f72 2042 6173 6963 4c65 7865 720a  ) or BasicLexer.
-00012810: 2020 2020 7265 7475 726e 2063 6c73 286c      return cls(l
-00012820: 6578 6572 5f63 6f6e 6629 0a0a 6465 6620  exer_conf)..def 
-00012830: 6372 6561 7465 5f63 6f6e 7465 7874 7561  create_contextua
-00012840: 6c5f 6c65 7865 7228 6c65 7865 725f 636f  l_lexer(lexer_co
-00012850: 6e66 2c20 7061 7273 6572 2c20 706f 7374  nf, parser, post
-00012860: 6c65 782c 206f 7074 696f 6e73 293a 0a20  lex, options):. 
-00012870: 2020 2063 6c73 203d 2028 6f70 7469 6f6e     cls = (option
-00012880: 7320 616e 6420 6f70 7469 6f6e 732e 5f70  s and options._p
-00012890: 6c75 6769 6e73 2e67 6574 2827 436f 6e74  lugins.get('Cont
-000128a0: 6578 7475 616c 4c65 7865 7227 2929 206f  extualLexer')) o
-000128b0: 7220 436f 6e74 6578 7475 616c 4c65 7865  r ContextualLexe
-000128c0: 720a 2020 2020 7374 6174 6573 203d 207b  r.    states = {
-000128d0: 6964 783a 6c69 7374 2874 2e6b 6579 7328  idx:list(t.keys(
-000128e0: 2929 2066 6f72 2069 6478 2c20 7420 696e  )) for idx, t in
-000128f0: 2070 6172 7365 722e 5f70 6172 7365 5f74   parser._parse_t
-00012900: 6162 6c65 2e73 7461 7465 732e 6974 656d  able.states.item
-00012910: 7328 297d 0a20 2020 2061 6c77 6179 735f  s()}.    always_
-00012920: 6163 6365 7074 203d 2070 6f73 746c 6578  accept = postlex
-00012930: 2e61 6c77 6179 735f 6163 6365 7074 2069  .always_accept i
-00012940: 6620 706f 7374 6c65 7820 656c 7365 2028  f postlex else (
-00012950: 290a 2020 2020 7265 7475 726e 2063 6c73  ).    return cls
-00012960: 286c 6578 6572 5f63 6f6e 662c 2073 7461  (lexer_conf, sta
-00012970: 7465 732c 2061 6c77 6179 735f 6163 6365  tes, always_acce
-00012980: 7074 3d61 6c77 6179 735f 6163 6365 7074  pt=always_accept
-00012990: 290a 0a64 6566 2063 7265 6174 655f 6c61  )..def create_la
-000129a0: 6c72 5f70 6172 7365 7228 6c65 7865 725f  lr_parser(lexer_
-000129b0: 636f 6e66 2c20 7061 7273 6572 5f63 6f6e  conf, parser_con
-000129c0: 662c 206f 7074 696f 6e73 3d4e 6f6e 6529  f, options=None)
-000129d0: 3a0a 2020 2020 6465 6275 6720 3d20 6f70  :.    debug = op
-000129e0: 7469 6f6e 732e 6465 6275 6720 6966 206f  tions.debug if o
-000129f0: 7074 696f 6e73 2065 6c73 6520 4661 6c73  ptions else Fals
-00012a00: 650a 2020 2020 636c 7320 3d20 286f 7074  e.    cls = (opt
-00012a10: 696f 6e73 2061 6e64 206f 7074 696f 6e73  ions and options
-00012a20: 2e5f 706c 7567 696e 732e 6765 7428 274c  ._plugins.get('L
-00012a30: 414c 525f 5061 7273 6572 2729 2920 6f72  ALR_Parser')) or
-00012a40: 204c 414c 525f 5061 7273 6572 0a20 2020   LALR_Parser.   
-00012a50: 2072 6574 7572 6e20 636c 7328 7061 7273   return cls(pars
-00012a60: 6572 5f63 6f6e 662c 2064 6562 7567 3d64  er_conf, debug=d
-00012a70: 6562 7567 290a 0a5f 7061 7273 6572 5f63  ebug).._parser_c
-00012a80: 7265 6174 6f72 735b 276c 616c 7227 5d20  reators['lalr'] 
-00012a90: 3d20 6372 6561 7465 5f6c 616c 725f 7061  = create_lalr_pa
-00012aa0: 7273 6572 0a0a 0a0a 0a63 6c61 7373 2050  rser.....class P
-00012ab0: 6f73 744c 6578 2841 4243 293a 0a20 2020  ostLex(ABC):.   
-00012ac0: 2040 6162 7374 7261 6374 6d65 7468 6f64   @abstractmethod
-00012ad0: 0a20 2020 2064 6566 2070 726f 6365 7373  .    def process
-00012ae0: 2873 656c 662c 2073 7472 6561 6d3a 2049  (self, stream: I
-00012af0: 7465 7261 746f 725b 546f 6b65 6e5d 2920  terator[Token]) 
-00012b00: 2d3e 2049 7465 7261 746f 725b 546f 6b65  -> Iterator[Toke
-00012b10: 6e5d 3a0a 2020 2020 2020 2020 7265 7475  n]:.        retu
-00012b20: 726e 2073 7472 6561 6d0a 0a20 2020 2061  rn stream..    a
-00012b30: 6c77 6179 735f 6163 6365 7074 3a20 4974  lways_accept: It
-00012b40: 6572 6162 6c65 5b73 7472 5d20 3d20 2829  erable[str] = ()
-00012b50: 0a0a 636c 6173 7320 4c61 726b 4f70 7469  ..class LarkOpti
-00012b60: 6f6e 7328 5365 7269 616c 697a 6529 3a0a  ons(Serialize):.
-00012b70: 2020 2020 232d 2d0a 0a20 2020 2073 7461      #--..    sta
-00012b80: 7274 3a20 4c69 7374 5b73 7472 5d0a 2020  rt: List[str].  
-00012b90: 2020 6465 6275 673a 2062 6f6f 6c0a 2020    debug: bool.  
-00012ba0: 2020 7472 616e 7366 6f72 6d65 723a 2027    transformer: '
-00012bb0: 4f70 7469 6f6e 616c 5b54 7261 6e73 666f  Optional[Transfo
-00012bc0: 726d 6572 5d27 0a20 2020 2070 726f 7061  rmer]'.    propa
-00012bd0: 6761 7465 5f70 6f73 6974 696f 6e73 3a20  gate_positions: 
-00012be0: 556e 696f 6e5b 626f 6f6c 2c20 7374 725d  Union[bool, str]
-00012bf0: 0a20 2020 206d 6179 6265 5f70 6c61 6365  .    maybe_place
-00012c00: 686f 6c64 6572 733a 2062 6f6f 6c0a 2020  holders: bool.  
-00012c10: 2020 6361 6368 653a 2055 6e69 6f6e 5b62    cache: Union[b
-00012c20: 6f6f 6c2c 2073 7472 5d0a 2020 2020 7265  ool, str].    re
-00012c30: 6765 783a 2062 6f6f 6c0a 2020 2020 675f  gex: bool.    g_
-00012c40: 7265 6765 785f 666c 6167 733a 2069 6e74  regex_flags: int
-00012c50: 0a20 2020 206b 6565 705f 616c 6c5f 746f  .    keep_all_to
-00012c60: 6b65 6e73 3a20 626f 6f6c 0a20 2020 2074  kens: bool.    t
-00012c70: 7265 655f 636c 6173 733a 2041 6e79 0a20  ree_class: Any. 
-00012c80: 2020 2070 6172 7365 723a 205f 5061 7273     parser: _Pars
-00012c90: 6572 4172 6754 7970 650a 2020 2020 6c65  erArgType.    le
-00012ca0: 7865 723a 205f 4c65 7865 7241 7267 5479  xer: _LexerArgTy
-00012cb0: 7065 0a20 2020 2061 6d62 6967 7569 7479  pe.    ambiguity
-00012cc0: 3a20 274c 6974 6572 616c 5b22 6175 746f  : 'Literal["auto
-00012cd0: 222c 2022 7265 736f 6c76 6522 2c20 2265  ", "resolve", "e
-00012ce0: 7870 6c69 6369 7422 2c20 2266 6f72 6573  xplicit", "fores
-00012cf0: 7422 5d27 0a20 2020 2070 6f73 746c 6578  t"]'.    postlex
-00012d00: 3a20 4f70 7469 6f6e 616c 5b50 6f73 744c  : Optional[PostL
-00012d10: 6578 5d0a 2020 2020 7072 696f 7269 7479  ex].    priority
-00012d20: 3a20 274f 7074 696f 6e61 6c5b 4c69 7465  : 'Optional[Lite
-00012d30: 7261 6c5b 2261 7574 6f22 2c20 226e 6f72  ral["auto", "nor
-00012d40: 6d61 6c22 2c20 2269 6e76 6572 7422 5d5d  mal", "invert"]]
-00012d50: 270a 2020 2020 6c65 7865 725f 6361 6c6c  '.    lexer_call
-00012d60: 6261 636b 733a 2044 6963 745b 7374 722c  backs: Dict[str,
-00012d70: 2043 616c 6c61 626c 655b 5b54 6f6b 656e   Callable[[Token
-00012d80: 5d2c 2054 6f6b 656e 5d5d 0a20 2020 2075  ], Token]].    u
-00012d90: 7365 5f62 7974 6573 3a20 626f 6f6c 0a20  se_bytes: bool. 
-00012da0: 2020 2065 6469 745f 7465 726d 696e 616c     edit_terminal
-00012db0: 733a 204f 7074 696f 6e61 6c5b 4361 6c6c  s: Optional[Call
-00012dc0: 6162 6c65 5b5b 5465 726d 696e 616c 4465  able[[TerminalDe
-00012dd0: 665d 2c20 5465 726d 696e 616c 4465 665d  f], TerminalDef]
-00012de0: 5d0a 2020 2020 696d 706f 7274 5f70 6174  ].    import_pat
-00012df0: 6873 3a20 274c 6973 745b 556e 696f 6e5b  hs: 'List[Union[
-00012e00: 7374 722c 2043 616c 6c61 626c 655b 5b55  str, Callable[[U
-00012e10: 6e69 6f6e 5b4e 6f6e 652c 2073 7472 2c20  nion[None, str, 
-00012e20: 5061 636b 6167 6552 6573 6f75 7263 655d  PackageResource]
-00012e30: 2c20 7374 725d 2c20 5475 706c 655b 7374  , str], Tuple[st
-00012e40: 722c 2073 7472 5d5d 5d5d 270a 2020 2020  r, str]]]]'.    
-00012e50: 736f 7572 6365 5f70 6174 683a 204f 7074  source_path: Opt
-00012e60: 696f 6e61 6c5b 7374 725d 0a0a 2020 2020  ional[str]..    
-00012e70: 4f50 5449 4f4e 535f 444f 4320 3d20 2222  OPTIONS_DOC = ""
-00012e80: 220a 2020 2020 2a2a 3d3d 3d20 2047 656e  ".    **===  Gen
-00012e90: 6572 616c 204f 7074 696f 6e73 2020 3d3d  eral Options  ==
-00012ea0: 3d2a 2a0a 0a20 2020 2073 7461 7274 0a20  =**..    start. 
-00012eb0: 2020 2020 2020 2020 2020 2054 6865 2073             The s
-00012ec0: 7461 7274 2073 796d 626f 6c2e 2045 6974  tart symbol. Eit
-00012ed0: 6865 7220 6120 7374 7269 6e67 2c20 6f72  her a string, or
-00012ee0: 2061 206c 6973 7420 6f66 2073 7472 696e   a list of strin
-00012ef0: 6773 2066 6f72 206d 756c 7469 706c 6520  gs for multiple 
-00012f00: 706f 7373 6962 6c65 2073 7461 7274 7320  possible starts 
-00012f10: 2844 6566 6175 6c74 3a20 2273 7461 7274  (Default: "start
-00012f20: 2229 0a20 2020 2064 6562 7567 0a20 2020  ").    debug.   
-00012f30: 2020 2020 2020 2020 2044 6973 706c 6179           Display
-00012f40: 2064 6562 7567 2069 6e66 6f72 6d61 7469   debug informati
-00012f50: 6f6e 2061 6e64 2065 7874 7261 2077 6172  on and extra war
-00012f60: 6e69 6e67 732e 2055 7365 206f 6e6c 7920  nings. Use only 
-00012f70: 7768 656e 2064 6562 7567 6769 6e67 2028  when debugging (
-00012f80: 4465 6661 756c 743a 2060 6046 616c 7365  Default: ``False
-00012f90: 6060 290a 2020 2020 2020 2020 2020 2020  ``).            
-00012fa0: 5768 656e 2075 7365 6420 7769 7468 2045  When used with E
-00012fb0: 6172 6c65 792c 2069 7420 6765 6e65 7261  arley, it genera
-00012fc0: 7465 7320 6120 666f 7265 7374 2067 7261  tes a forest gra
-00012fd0: 7068 2061 7320 2273 7070 662e 706e 6722  ph as "sppf.png"
-00012fe0: 2c20 6966 2027 646f 7427 2069 7320 696e  , if 'dot' is in
-00012ff0: 7374 616c 6c65 642e 0a20 2020 2074 7261  stalled..    tra
-00013000: 6e73 666f 726d 6572 0a20 2020 2020 2020  nsformer.       
-00013010: 2020 2020 2041 7070 6c69 6573 2074 6865       Applies the
-00013020: 2074 7261 6e73 666f 726d 6572 2074 6f20   transformer to 
-00013030: 6576 6572 7920 7061 7273 6520 7472 6565  every parse tree
-00013040: 2028 6571 7569 7661 6c65 6e74 2074 6f20   (equivalent to 
-00013050: 6170 706c 7969 6e67 2069 7420 6166 7465  applying it afte
-00013060: 7220 7468 6520 7061 7273 652c 2062 7574  r the parse, but
-00013070: 2066 6173 7465 7229 0a20 2020 2070 726f   faster).    pro
-00013080: 7061 6761 7465 5f70 6f73 6974 696f 6e73  pagate_positions
-00013090: 0a20 2020 2020 2020 2020 2020 2050 726f  .            Pro
-000130a0: 7061 6761 7465 7320 286c 696e 652c 2063  pagates (line, c
-000130b0: 6f6c 756d 6e2c 2065 6e64 5f6c 696e 652c  olumn, end_line,
-000130c0: 2065 6e64 5f63 6f6c 756d 6e29 2061 7474   end_column) att
-000130d0: 7269 6275 7465 7320 696e 746f 2061 6c6c  ributes into all
-000130e0: 2074 7265 6520 6272 616e 6368 6573 2e0a   tree branches..
-000130f0: 2020 2020 2020 2020 2020 2020 4163 6365              Acce
-00013100: 7074 7320 6060 4661 6c73 6560 602c 2060  pts ``False``, `
-00013110: 6054 7275 6560 602c 206f 7220 6120 6361  `True``, or a ca
-00013120: 6c6c 6162 6c65 2c20 7768 6963 6820 7769  llable, which wi
-00013130: 6c6c 2066 696c 7465 7220 7768 6963 6820  ll filter which 
-00013140: 6e6f 6465 7320 746f 2069 676e 6f72 6520  nodes to ignore 
-00013150: 7768 656e 2070 726f 7061 6761 7469 6e67  when propagating
-00013160: 2e0a 2020 2020 6d61 7962 655f 706c 6163  ..    maybe_plac
-00013170: 6568 6f6c 6465 7273 0a20 2020 2020 2020  eholders.       
-00013180: 2020 2020 2057 6865 6e20 6060 5472 7565       When ``True
-00013190: 6060 2c20 7468 6520 6060 5b5d 6060 206f  ``, the ``[]`` o
-000131a0: 7065 7261 746f 7220 7265 7475 726e 7320  perator returns 
-000131b0: 6060 4e6f 6e65 6060 2077 6865 6e20 6e6f  ``None`` when no
-000131c0: 7420 6d61 7463 6865 642e 0a20 2020 2020  t matched..     
-000131d0: 2020 2020 2020 2057 6865 6e20 6060 4661         When ``Fa
-000131e0: 6c73 6560 602c 2020 6060 5b5d 6060 2062  lse``,  ``[]`` b
-000131f0: 6568 6176 6573 206c 696b 6520 7468 6520  ehaves like the 
-00013200: 6060 3f60 6020 6f70 6572 6174 6f72 2c20  ``?`` operator, 
-00013210: 616e 6420 7265 7475 726e 7320 6e6f 2076  and returns no v
-00013220: 616c 7565 2061 7420 616c 6c2e 0a20 2020  alue at all..   
-00013230: 2020 2020 2020 2020 2028 6465 6661 756c           (defaul
-00013240: 743d 2060 6054 7275 6560 6029 0a20 2020  t= ``True``).   
-00013250: 2063 6163 6865 0a20 2020 2020 2020 2020   cache.         
-00013260: 2020 2043 6163 6865 2074 6865 2072 6573     Cache the res
-00013270: 756c 7473 206f 6620 7468 6520 4c61 726b  ults of the Lark
-00013280: 2067 7261 6d6d 6172 2061 6e61 6c79 7369   grammar analysi
-00013290: 732c 2066 6f72 2078 3220 746f 2078 3320  s, for x2 to x3 
-000132a0: 6661 7374 6572 206c 6f61 6469 6e67 2e20  faster loading. 
-000132b0: 4c41 4c52 206f 6e6c 7920 666f 7220 6e6f  LALR only for no
-000132c0: 772e 0a0a 2020 2020 2020 2020 2020 2020  w...            
-000132d0: 2d20 5768 656e 2060 6046 616c 7365 6060  - When ``False``
-000132e0: 2c20 646f 6573 206e 6f74 6869 6e67 2028  , does nothing (
-000132f0: 6465 6661 756c 7429 0a20 2020 2020 2020  default).       
-00013300: 2020 2020 202d 2057 6865 6e20 6060 5472       - When ``Tr
-00013310: 7565 6060 2c20 6361 6368 6573 2074 6f20  ue``, caches to 
-00013320: 6120 7465 6d70 6f72 6172 7920 6669 6c65  a temporary file
-00013330: 2069 6e20 7468 6520 6c6f 6361 6c20 6469   in the local di
-00013340: 7265 6374 6f72 790a 2020 2020 2020 2020  rectory.        
-00013350: 2020 2020 2d20 5768 656e 2067 6976 656e      - When given
-00013360: 2061 2073 7472 696e 672c 2063 6163 6865   a string, cache
-00013370: 7320 746f 2074 6865 2070 6174 6820 706f  s to the path po
-00013380: 696e 7465 6420 6279 2074 6865 2073 7472  inted by the str
-00013390: 696e 670a 2020 2020 7265 6765 780a 2020  ing.    regex.  
-000133a0: 2020 2020 2020 2020 2020 5768 656e 2054            When T
-000133b0: 7275 652c 2075 7365 7320 7468 6520 6060  rue, uses the ``
-000133c0: 7265 6765 7860 6020 6d6f 6475 6c65 2069  regex`` module i
-000133d0: 6e73 7465 6164 206f 6620 7468 6520 7374  nstead of the st
-000133e0: 646c 6962 2060 6072 6560 602e 0a20 2020  dlib ``re``..   
-000133f0: 2067 5f72 6567 6578 5f66 6c61 6773 0a20   g_regex_flags. 
-00013400: 2020 2020 2020 2020 2020 2046 6c61 6773             Flags
-00013410: 2074 6861 7420 6172 6520 6170 706c 6965   that are applie
-00013420: 6420 746f 2061 6c6c 2074 6572 6d69 6e61  d to all termina
-00013430: 6c73 2028 626f 7468 2072 6567 6578 2061  ls (both regex a
-00013440: 6e64 2073 7472 696e 6773 290a 2020 2020  nd strings).    
-00013450: 6b65 6570 5f61 6c6c 5f74 6f6b 656e 730a  keep_all_tokens.
-00013460: 2020 2020 2020 2020 2020 2020 5072 6576              Prev
-00013470: 656e 7420 7468 6520 7472 6565 2062 7569  ent the tree bui
-00013480: 6c64 6572 2066 726f 6d20 6175 746f 6d61  lder from automa
-00013490: 6769 6361 6c6c 7920 7265 6d6f 7669 6e67  gically removing
-000134a0: 2022 7075 6e63 7475 6174 696f 6e22 2074   "punctuation" t
-000134b0: 6f6b 656e 7320 2844 6566 6175 6c74 3a20  okens (Default: 
-000134c0: 6060 4661 6c73 6560 6029 0a20 2020 2074  ``False``).    t
-000134d0: 7265 655f 636c 6173 730a 2020 2020 2020  ree_class.      
-000134e0: 2020 2020 2020 4c61 726b 2077 696c 6c20        Lark will 
-000134f0: 7072 6f64 7563 6520 7472 6565 7320 636f  produce trees co
-00013500: 6d70 7269 7365 6420 6f66 2069 6e73 7461  mprised of insta
-00013510: 6e63 6573 206f 6620 7468 6973 2063 6c61  nces of this cla
-00013520: 7373 2069 6e73 7465 6164 206f 6620 7468  ss instead of th
-00013530: 6520 6465 6661 756c 7420 6060 6c61 726b  e default ``lark
-00013540: 2e54 7265 6560 602e 0a0a 2020 2020 2a2a  .Tree``...    **
-00013550: 3d3d 3d20 416c 676f 7269 7468 6d20 4f70  === Algorithm Op
-00013560: 7469 6f6e 7320 3d3d 3d2a 2a0a 0a20 2020  tions ===**..   
-00013570: 2070 6172 7365 720a 2020 2020 2020 2020   parser.        
-00013580: 2020 2020 4465 6369 6465 7320 7768 6963      Decides whic
-00013590: 6820 7061 7273 6572 2065 6e67 696e 6520  h parser engine 
-000135a0: 746f 2075 7365 2e20 4163 6365 7074 7320  to use. Accepts 
-000135b0: 2265 6172 6c65 7922 206f 7220 226c 616c  "earley" or "lal
-000135c0: 7222 2e20 2844 6566 6175 6c74 3a20 2265  r". (Default: "e
-000135d0: 6172 6c65 7922 292e 0a20 2020 2020 2020  arley")..       
-000135e0: 2020 2020 2028 7468 6572 6520 6973 2061       (there is a
-000135f0: 6c73 6f20 6120 2263 796b 2220 6f70 7469  lso a "cyk" opti
-00013600: 6f6e 2066 6f72 206c 6567 6163 7929 0a20  on for legacy). 
-00013610: 2020 206c 6578 6572 0a20 2020 2020 2020     lexer.       
-00013620: 2020 2020 2044 6563 6964 6573 2077 6865       Decides whe
-00013630: 7468 6572 206f 7220 6e6f 7420 746f 2075  ther or not to u
-00013640: 7365 2061 206c 6578 6572 2073 7461 6765  se a lexer stage
-00013650: 0a0a 2020 2020 2020 2020 2020 2020 2d20  ..            - 
-00013660: 2261 7574 6f22 2028 6465 6661 756c 7429  "auto" (default)
-00013670: 3a20 4368 6f6f 7365 2066 6f72 206d 6520  : Choose for me 
-00013680: 6261 7365 6420 6f6e 2074 6865 2070 6172  based on the par
-00013690: 7365 720a 2020 2020 2020 2020 2020 2020  ser.            
-000136a0: 2d20 2262 6173 6963 223a 2055 7365 2061  - "basic": Use a
-000136b0: 2062 6173 6963 206c 6578 6572 0a20 2020   basic lexer.   
-000136c0: 2020 2020 2020 2020 202d 2022 636f 6e74           - "cont
-000136d0: 6578 7475 616c 223a 2053 7472 6f6e 6765  extual": Stronge
-000136e0: 7220 6c65 7865 7220 286f 6e6c 7920 776f  r lexer (only wo
-000136f0: 726b 7320 7769 7468 2070 6172 7365 723d  rks with parser=
-00013700: 226c 616c 7222 290a 2020 2020 2020 2020  "lalr").        
-00013710: 2020 2020 2d20 2264 796e 616d 6963 223a      - "dynamic":
-00013720: 2046 6c65 7869 626c 6520 616e 6420 706f   Flexible and po
-00013730: 7765 7266 756c 2028 6f6e 6c79 2077 6974  werful (only wit
-00013740: 6820 7061 7273 6572 3d22 6561 726c 6579  h parser="earley
-00013750: 2229 0a20 2020 2020 2020 2020 2020 202d  ").            -
-00013760: 2022 6479 6e61 6d69 635f 636f 6d70 6c65   "dynamic_comple
-00013770: 7465 223a 2053 616d 6520 6173 2064 796e  te": Same as dyn
-00013780: 616d 6963 2c20 6275 7420 7472 6965 7320  amic, but tries 
-00013790: 2a65 7665 7279 2a20 7661 7269 6174 696f  *every* variatio
-000137a0: 6e20 6f66 2074 6f6b 656e 697a 696e 6720  n of tokenizing 
-000137b0: 706f 7373 6962 6c65 2e0a 2020 2020 616d  possible..    am
-000137c0: 6269 6775 6974 790a 2020 2020 2020 2020  biguity.        
-000137d0: 2020 2020 4465 6369 6465 7320 686f 7720      Decides how 
-000137e0: 746f 2068 616e 646c 6520 616d 6269 6775  to handle ambigu
-000137f0: 6974 7920 696e 2074 6865 2070 6172 7365  ity in the parse
-00013800: 2e20 4f6e 6c79 2072 656c 6576 616e 7420  . Only relevant 
-00013810: 6966 2070 6172 7365 723d 2265 6172 6c65  if parser="earle
-00013820: 7922 0a0a 2020 2020 2020 2020 2020 2020  y"..            
-00013830: 2d20 2272 6573 6f6c 7665 223a 2054 6865  - "resolve": The
-00013840: 2070 6172 7365 7220 7769 6c6c 2061 7574   parser will aut
-00013850: 6f6d 6174 6963 616c 6c79 2063 686f 6f73  omatically choos
-00013860: 6520 7468 6520 7369 6d70 6c65 7374 2064  e the simplest d
-00013870: 6572 6976 6174 696f 6e0a 2020 2020 2020  erivation.      
-00013880: 2020 2020 2020 2020 2869 7420 6368 6f6f          (it choo
-00013890: 7365 7320 636f 6e73 6973 7465 6e74 6c79  ses consistently
-000138a0: 3a20 6772 6565 6479 2066 6f72 2074 6f6b  : greedy for tok
-000138b0: 656e 732c 206e 6f6e 2d67 7265 6564 7920  ens, non-greedy 
-000138c0: 666f 7220 7275 6c65 7329 0a20 2020 2020  for rules).     
-000138d0: 2020 2020 2020 202d 2022 6578 706c 6963         - "explic
-000138e0: 6974 223a 2054 6865 2070 6172 7365 7220  it": The parser 
-000138f0: 7769 6c6c 2072 6574 7572 6e20 616c 6c20  will return all 
-00013900: 6465 7269 7661 7469 6f6e 7320 7772 6170  derivations wrap
-00013910: 7065 6420 696e 2022 5f61 6d62 6967 2220  ped in "_ambig" 
-00013920: 7472 6565 206e 6f64 6573 2028 692e 652e  tree nodes (i.e.
-00013930: 2061 2066 6f72 6573 7429 2e0a 2020 2020   a forest)..    
-00013940: 2020 2020 2020 2020 2d20 2266 6f72 6573          - "fores
-00013950: 7422 3a20 5468 6520 7061 7273 6572 2077  t": The parser w
-00013960: 696c 6c20 7265 7475 726e 2074 6865 2072  ill return the r
-00013970: 6f6f 7420 6f66 2074 6865 2073 6861 7265  oot of the share
-00013980: 6420 7061 636b 6564 2070 6172 7365 2066  d packed parse f
-00013990: 6f72 6573 742e 0a0a 2020 2020 2a2a 3d3d  orest...    **==
-000139a0: 3d20 4d69 7363 2e20 2f20 446f 6d61 696e  = Misc. / Domain
-000139b0: 2053 7065 6369 6669 6320 4f70 7469 6f6e   Specific Option
-000139c0: 7320 3d3d 3d2a 2a0a 0a20 2020 2070 6f73  s ===**..    pos
-000139d0: 746c 6578 0a20 2020 2020 2020 2020 2020  tlex.           
-000139e0: 204c 6578 6572 2070 6f73 742d 7072 6f63   Lexer post-proc
-000139f0: 6573 7369 6e67 2028 4465 6661 756c 743a  essing (Default:
-00013a00: 2060 604e 6f6e 6560 6029 204f 6e6c 7920   ``None``) Only 
-00013a10: 776f 726b 7320 7769 7468 2074 6865 2062  works with the b
-00013a20: 6173 6963 2061 6e64 2063 6f6e 7465 7874  asic and context
-00013a30: 7561 6c20 6c65 7865 7273 2e0a 2020 2020  ual lexers..    
-00013a40: 7072 696f 7269 7479 0a20 2020 2020 2020  priority.       
-00013a50: 2020 2020 2048 6f77 2070 7269 6f72 6974       How priorit
-00013a60: 6965 7320 7368 6f75 6c64 2062 6520 6576  ies should be ev
-00013a70: 616c 7561 7465 6420 2d20 2261 7574 6f22  aluated - "auto"
-00013a80: 2c20 6060 4e6f 6e65 6060 2c20 226e 6f72  , ``None``, "nor
-00013a90: 6d61 6c22 2c20 2269 6e76 6572 7422 2028  mal", "invert" (
-00013aa0: 4465 6661 756c 743a 2022 6175 746f 2229  Default: "auto")
-00013ab0: 0a20 2020 206c 6578 6572 5f63 616c 6c62  .    lexer_callb
-00013ac0: 6163 6b73 0a20 2020 2020 2020 2020 2020  acks.           
-00013ad0: 2044 6963 7469 6f6e 6172 7920 6f66 2063   Dictionary of c
-00013ae0: 616c 6c62 6163 6b73 2066 6f72 2074 6865  allbacks for the
-00013af0: 206c 6578 6572 2e20 4d61 7920 616c 7465   lexer. May alte
-00013b00: 7220 746f 6b65 6e73 2064 7572 696e 6720  r tokens during 
-00013b10: 6c65 7869 6e67 2e20 5573 6520 7769 7468  lexing. Use with
-00013b20: 2063 6175 7469 6f6e 2e0a 2020 2020 7573   caution..    us
-00013b30: 655f 6279 7465 730a 2020 2020 2020 2020  e_bytes.        
-00013b40: 2020 2020 4163 6365 7074 2061 6e20 696e      Accept an in
-00013b50: 7075 7420 6f66 2074 7970 6520 6060 6279  put of type ``by
-00013b60: 7465 7360 6020 696e 7374 6561 6420 6f66  tes`` instead of
-00013b70: 2060 6073 7472 6060 2e0a 2020 2020 6564   ``str``..    ed
-00013b80: 6974 5f74 6572 6d69 6e61 6c73 0a20 2020  it_terminals.   
-00013b90: 2020 2020 2020 2020 2041 2063 616c 6c62           A callb
-00013ba0: 6163 6b20 666f 7220 6564 6974 696e 6720  ack for editing 
-00013bb0: 7468 6520 7465 726d 696e 616c 7320 6265  the terminals be
-00013bc0: 666f 7265 2070 6172 7365 2e0a 2020 2020  fore parse..    
-00013bd0: 696d 706f 7274 5f70 6174 6873 0a20 2020  import_paths.   
-00013be0: 2020 2020 2020 2020 2041 204c 6973 7420           A List 
-00013bf0: 6f66 2065 6974 6865 7220 7061 7468 7320  of either paths 
-00013c00: 6f72 206c 6f61 6465 7220 6675 6e63 7469  or loader functi
-00013c10: 6f6e 7320 746f 2073 7065 6369 6679 2066  ons to specify f
-00013c20: 726f 6d20 7768 6572 6520 6772 616d 6d61  rom where gramma
-00013c30: 7273 2061 7265 2069 6d70 6f72 7465 640a  rs are imported.
-00013c40: 2020 2020 736f 7572 6365 5f70 6174 680a      source_path.
-00013c50: 2020 2020 2020 2020 2020 2020 4f76 6572              Over
-00013c60: 7269 6465 2074 6865 2073 6f75 7263 6520  ride the source 
-00013c70: 6f66 2066 726f 6d20 7768 6572 6520 7468  of from where th
-00013c80: 6520 6772 616d 6d61 7220 7761 7320 6c6f  e grammar was lo
-00013c90: 6164 6564 2e20 5573 6566 756c 2066 6f72  aded. Useful for
-00013ca0: 2072 656c 6174 6976 6520 696d 706f 7274   relative import
-00013cb0: 7320 616e 6420 756e 636f 6e76 656e 7469  s and unconventi
-00013cc0: 6f6e 616c 2067 7261 6d6d 6172 206c 6f61  onal grammar loa
-00013cd0: 6469 6e67 0a20 2020 202a 2a3d 3d3d 2045  ding.    **=== E
-00013ce0: 6e64 206f 6620 4f70 7469 6f6e 7320 3d3d  nd of Options ==
-00013cf0: 3d2a 2a0a 2020 2020 2222 220a 2020 2020  =**.    """.    
-00013d00: 6966 205f 5f64 6f63 5f5f 3a0a 2020 2020  if __doc__:.    
-00013d10: 2020 2020 5f5f 646f 635f 5f20 2b3d 204f      __doc__ += O
-00013d20: 5054 494f 4e53 5f44 4f43 0a0a 0a20 2020  PTIONS_DOC...   
-00013d30: 2023 230a 0a20 2020 2023 230a 0a20 2020   ##..    ##..   
-00013d40: 2023 230a 0a20 2020 2023 230a 0a20 2020   ##..    ##..   
-00013d50: 2023 230a 0a20 2020 2023 230a 0a20 2020   ##..    ##..   
-00013d60: 205f 6465 6661 756c 7473 3a20 4469 6374   _defaults: Dict
-00013d70: 5b73 7472 2c20 416e 795d 203d 207b 0a20  [str, Any] = {. 
-00013d80: 2020 2020 2020 2027 6465 6275 6727 3a20         'debug': 
-00013d90: 4661 6c73 652c 0a20 2020 2020 2020 2027  False,.        '
-00013da0: 6b65 6570 5f61 6c6c 5f74 6f6b 656e 7327  keep_all_tokens'
-00013db0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-00013dc0: 2027 7472 6565 5f63 6c61 7373 273a 204e   'tree_class': N
-00013dd0: 6f6e 652c 0a20 2020 2020 2020 2027 6361  one,.        'ca
-00013de0: 6368 6527 3a20 4661 6c73 652c 0a20 2020  che': False,.   
-00013df0: 2020 2020 2027 706f 7374 6c65 7827 3a20       'postlex': 
-00013e00: 4e6f 6e65 2c0a 2020 2020 2020 2020 2770  None,.        'p
-00013e10: 6172 7365 7227 3a20 2765 6172 6c65 7927  arser': 'earley'
-00013e20: 2c0a 2020 2020 2020 2020 276c 6578 6572  ,.        'lexer
-00013e30: 273a 2027 6175 746f 272c 0a20 2020 2020  ': 'auto',.     
-00013e40: 2020 2027 7472 616e 7366 6f72 6d65 7227     'transformer'
-00013e50: 3a20 4e6f 6e65 2c0a 2020 2020 2020 2020  : None,.        
-00013e60: 2773 7461 7274 273a 2027 7374 6172 7427  'start': 'start'
-00013e70: 2c0a 2020 2020 2020 2020 2770 7269 6f72  ,.        'prior
-00013e80: 6974 7927 3a20 2761 7574 6f27 2c0a 2020  ity': 'auto',.  
-00013e90: 2020 2020 2020 2761 6d62 6967 7569 7479        'ambiguity
-00013ea0: 273a 2027 6175 746f 272c 0a20 2020 2020  ': 'auto',.     
-00013eb0: 2020 2027 7265 6765 7827 3a20 4661 6c73     'regex': Fals
-00013ec0: 652c 0a20 2020 2020 2020 2027 7072 6f70  e,.        'prop
-00013ed0: 6167 6174 655f 706f 7369 7469 6f6e 7327  agate_positions'
-00013ee0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
-00013ef0: 2027 6c65 7865 725f 6361 6c6c 6261 636b   'lexer_callback
-00013f00: 7327 3a20 7b7d 2c0a 2020 2020 2020 2020  s': {},.        
-00013f10: 276d 6179 6265 5f70 6c61 6365 686f 6c64  'maybe_placehold
-00013f20: 6572 7327 3a20 5472 7565 2c0a 2020 2020  ers': True,.    
-00013f30: 2020 2020 2765 6469 745f 7465 726d 696e      'edit_termin
-00013f40: 616c 7327 3a20 4e6f 6e65 2c0a 2020 2020  als': None,.    
-00013f50: 2020 2020 2767 5f72 6567 6578 5f66 6c61      'g_regex_fla
-00013f60: 6773 273a 2030 2c0a 2020 2020 2020 2020  gs': 0,.        
-00013f70: 2775 7365 5f62 7974 6573 273a 2046 616c  'use_bytes': Fal
-00013f80: 7365 2c0a 2020 2020 2020 2020 2769 6d70  se,.        'imp
-00013f90: 6f72 745f 7061 7468 7327 3a20 5b5d 2c0a  ort_paths': [],.
-00013fa0: 2020 2020 2020 2020 2773 6f75 7263 655f          'source_
-00013fb0: 7061 7468 273a 204e 6f6e 652c 0a20 2020  path': None,.   
-00013fc0: 2020 2020 2027 5f70 6c75 6769 6e73 273a       '_plugins':
-00013fd0: 207b 7d2c 0a20 2020 207d 0a0a 2020 2020   {},.    }..    
-00013fe0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00013ff0: 662c 206f 7074 696f 6e73 5f64 6963 743a  f, options_dict:
-00014000: 2044 6963 745b 7374 722c 2041 6e79 5d29   Dict[str, Any])
-00014010: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-00014020: 2020 6f20 3d20 6469 6374 286f 7074 696f    o = dict(optio
-00014030: 6e73 5f64 6963 7429 0a0a 2020 2020 2020  ns_dict)..      
-00014040: 2020 6f70 7469 6f6e 7320 3d20 7b7d 0a20    options = {}. 
-00014050: 2020 2020 2020 2066 6f72 206e 616d 652c         for name,
-00014060: 2064 6566 6175 6c74 2069 6e20 7365 6c66   default in self
-00014070: 2e5f 6465 6661 756c 7473 2e69 7465 6d73  ._defaults.items
-00014080: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
-00014090: 6966 206e 616d 6520 696e 206f 3a0a 2020  if name in o:.  
-000140a0: 2020 2020 2020 2020 2020 2020 2020 7661                va
-000140b0: 6c75 6520 3d20 6f2e 706f 7028 6e61 6d65  lue = o.pop(name
-000140c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-000140d0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
-000140e0: 6465 6661 756c 742c 2062 6f6f 6c29 2061  default, bool) a
-000140f0: 6e64 206e 616d 6520 6e6f 7420 696e 2028  nd name not in (
-00014100: 2763 6163 6865 272c 2027 7573 655f 6279  'cache', 'use_by
-00014110: 7465 7327 2c20 2770 726f 7061 6761 7465  tes', 'propagate
-00014120: 5f70 6f73 6974 696f 6e73 2729 3a0a 2020  _positions'):.  
-00014130: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014140: 2020 7661 6c75 6520 3d20 626f 6f6c 2876    value = bool(v
-00014150: 616c 7565 290a 2020 2020 2020 2020 2020  alue).          
-00014160: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00014170: 2020 2020 2020 2020 7661 6c75 6520 3d20          value = 
-00014180: 6465 6661 756c 740a 0a20 2020 2020 2020  default..       
-00014190: 2020 2020 206f 7074 696f 6e73 5b6e 616d       options[nam
-000141a0: 655d 203d 2076 616c 7565 0a0a 2020 2020  e] = value..    
-000141b0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000141c0: 6528 6f70 7469 6f6e 735b 2773 7461 7274  e(options['start
-000141d0: 275d 2c20 7374 7229 3a0a 2020 2020 2020  '], str):.      
-000141e0: 2020 2020 2020 6f70 7469 6f6e 735b 2773        options['s
-000141f0: 7461 7274 275d 203d 205b 6f70 7469 6f6e  tart'] = [option
-00014200: 735b 2773 7461 7274 275d 5d0a 0a20 2020  s['start']]..   
-00014210: 2020 2020 2073 656c 662e 5f5f 6469 6374       self.__dict
-00014220: 5f5f 5b27 6f70 7469 6f6e 7327 5d20 3d20  __['options'] = 
-00014230: 6f70 7469 6f6e 730a 0a0a 2020 2020 2020  options...      
-00014240: 2020 6173 7365 7274 5f63 6f6e 6669 6728    assert_config(
-00014250: 7365 6c66 2e70 6172 7365 722c 2028 2765  self.parser, ('e
-00014260: 6172 6c65 7927 2c20 276c 616c 7227 2c20  arley', 'lalr', 
-00014270: 2763 796b 272c 204e 6f6e 6529 290a 0a20  'cyk', None)).. 
-00014280: 2020 2020 2020 2069 6620 7365 6c66 2e70         if self.p
-00014290: 6172 7365 7220 3d3d 2027 6561 726c 6579  arser == 'earley
-000142a0: 2720 616e 6420 7365 6c66 2e74 7261 6e73  ' and self.trans
-000142b0: 666f 726d 6572 3a0a 2020 2020 2020 2020  former:.        
-000142c0: 2020 2020 7261 6973 6520 436f 6e66 6967      raise Config
-000142d0: 7572 6174 696f 6e45 7272 6f72 2827 4361  urationError('Ca
-000142e0: 6e6e 6f74 2073 7065 6369 6679 2061 6e20  nnot specify an 
-000142f0: 656d 6265 6464 6564 2074 7261 6e73 666f  embedded transfo
-00014300: 726d 6572 2077 6865 6e20 7573 696e 6720  rmer when using 
-00014310: 7468 6520 4561 726c 6579 2061 6c67 6f72  the Earley algor
-00014320: 6974 686d 2e20 270a 2020 2020 2020 2020  ithm. '.        
-00014330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014340: 2020 2020 2027 506c 6561 7365 2075 7365       'Please use
-00014350: 2079 6f75 7220 7472 616e 7366 6f72 6d65   your transforme
-00014360: 7220 6f6e 2074 6865 2072 6573 756c 7469  r on the resulti
-00014370: 6e67 2070 6172 7365 2074 7265 652c 206f  ng parse tree, o
-00014380: 7220 7573 6520 6120 6469 6666 6572 656e  r use a differen
-00014390: 7420 616c 676f 7269 7468 6d20 2869 2e65  t algorithm (i.e
-000143a0: 2e20 4c41 4c52 2927 290a 0a20 2020 2020  . LALR)')..     
-000143b0: 2020 2069 6620 6f3a 0a20 2020 2020 2020     if o:.       
-000143c0: 2020 2020 2072 6169 7365 2043 6f6e 6669       raise Confi
-000143d0: 6775 7261 7469 6f6e 4572 726f 7228 2255  gurationError("U
-000143e0: 6e6b 6e6f 776e 206f 7074 696f 6e73 3a20  nknown options: 
-000143f0: 2573 2220 2520 6f2e 6b65 7973 2829 290a  %s" % o.keys()).
-00014400: 0a20 2020 2064 6566 205f 5f67 6574 6174  .    def __getat
-00014410: 7472 5f5f 2873 656c 662c 206e 616d 653a  tr__(self, name:
-00014420: 2073 7472 2920 2d3e 2041 6e79 3a0a 2020   str) -> Any:.  
-00014430: 2020 2020 2020 7472 793a 0a20 2020 2020        try:.     
-00014440: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
-00014450: 6c66 2e5f 5f64 6963 745f 5f5b 276f 7074  lf.__dict__['opt
-00014460: 696f 6e73 275d 5b6e 616d 655d 0a20 2020  ions'][name].   
-00014470: 2020 2020 2065 7863 6570 7420 4b65 7945       except KeyE
-00014480: 7272 6f72 2061 7320 653a 0a20 2020 2020  rror as e:.     
-00014490: 2020 2020 2020 2072 6169 7365 2041 7474         raise Att
-000144a0: 7269 6275 7465 4572 726f 7228 6529 0a0a  ributeError(e)..
-000144b0: 2020 2020 6465 6620 5f5f 7365 7461 7474      def __setatt
-000144c0: 725f 5f28 7365 6c66 2c20 6e61 6d65 3a20  r__(self, name: 
-000144d0: 7374 722c 2076 616c 7565 3a20 7374 7229  str, value: str)
-000144e0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-000144f0: 2020 6173 7365 7274 5f63 6f6e 6669 6728    assert_config(
-00014500: 6e61 6d65 2c20 7365 6c66 2e6f 7074 696f  name, self.optio
-00014510: 6e73 2e6b 6579 7328 292c 2022 2572 2069  ns.keys(), "%r i
-00014520: 736e 2774 2061 2076 616c 6964 206f 7074  sn't a valid opt
-00014530: 696f 6e2e 2045 7870 6563 7465 6420 6f6e  ion. Expected on
-00014540: 6520 6f66 3a20 2573 2229 0a20 2020 2020  e of: %s").     
-00014550: 2020 2073 656c 662e 6f70 7469 6f6e 735b     self.options[
-00014560: 6e61 6d65 5d20 3d20 7661 6c75 650a 0a20  name] = value.. 
-00014570: 2020 2064 6566 2073 6572 6961 6c69 7a65     def serialize
-00014580: 2873 656c 662c 206d 656d 6f20 3d20 4e6f  (self, memo = No
-00014590: 6e65 2920 2d3e 2044 6963 745b 7374 722c  ne) -> Dict[str,
-000145a0: 2041 6e79 5d3a 0a20 2020 2020 2020 2072   Any]:.        r
-000145b0: 6574 7572 6e20 7365 6c66 2e6f 7074 696f  eturn self.optio
-000145c0: 6e73 0a0a 2020 2020 4063 6c61 7373 6d65  ns..    @classme
-000145d0: 7468 6f64 0a20 2020 2064 6566 2064 6573  thod.    def des
-000145e0: 6572 6961 6c69 7a65 2863 6c73 2c20 6461  erialize(cls, da
-000145f0: 7461 3a20 4469 6374 5b73 7472 2c20 416e  ta: Dict[str, An
-00014600: 795d 2c20 6d65 6d6f 3a20 4469 6374 5b69  y], memo: Dict[i
-00014610: 6e74 2c20 556e 696f 6e5b 5465 726d 696e  nt, Union[Termin
-00014620: 616c 4465 662c 2052 756c 655d 5d29 202d  alDef, Rule]]) -
-00014630: 3e20 224c 6172 6b4f 7074 696f 6e73 223a  > "LarkOptions":
-00014640: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00014650: 636c 7328 6461 7461 290a 0a0a 2323 0a0a  cls(data)...##..
-00014660: 2323 0a0a 5f4c 4f41 445f 414c 4c4f 5745  ##.._LOAD_ALLOWE
-00014670: 445f 4f50 5449 4f4e 5320 3d20 7b27 706f  D_OPTIONS = {'po
-00014680: 7374 6c65 7827 2c20 2774 7261 6e73 666f  stlex', 'transfo
-00014690: 726d 6572 272c 2027 6c65 7865 725f 6361  rmer', 'lexer_ca
-000146a0: 6c6c 6261 636b 7327 2c20 2775 7365 5f62  llbacks', 'use_b
-000146b0: 7974 6573 272c 2027 6465 6275 6727 2c20  ytes', 'debug', 
-000146c0: 2767 5f72 6567 6578 5f66 6c61 6773 272c  'g_regex_flags',
-000146d0: 2027 7265 6765 7827 2c20 2770 726f 7061   'regex', 'propa
-000146e0: 6761 7465 5f70 6f73 6974 696f 6e73 272c  gate_positions',
-000146f0: 2027 7472 6565 5f63 6c61 7373 272c 2027   'tree_class', '
-00014700: 5f70 6c75 6769 6e73 277d 0a0a 5f56 414c  _plugins'}.._VAL
-00014710: 4944 5f50 5249 4f52 4954 595f 4f50 5449  ID_PRIORITY_OPTI
-00014720: 4f4e 5320 3d20 2827 6175 746f 272c 2027  ONS = ('auto', '
-00014730: 6e6f 726d 616c 272c 2027 696e 7665 7274  normal', 'invert
-00014740: 272c 204e 6f6e 6529 0a5f 5641 4c49 445f  ', None)._VALID_
-00014750: 414d 4249 4755 4954 595f 4f50 5449 4f4e  AMBIGUITY_OPTION
-00014760: 5320 3d20 2827 6175 746f 272c 2027 7265  S = ('auto', 're
-00014770: 736f 6c76 6527 2c20 2765 7870 6c69 6369  solve', 'explici
-00014780: 7427 2c20 2766 6f72 6573 7427 290a 0a0a  t', 'forest')...
-00014790: 5f54 203d 2054 7970 6556 6172 2827 5f54  _T = TypeVar('_T
-000147a0: 272c 2062 6f75 6e64 3d22 4c61 726b 2229  ', bound="Lark")
-000147b0: 0a0a 636c 6173 7320 4c61 726b 2853 6572  ..class Lark(Ser
-000147c0: 6961 6c69 7a65 293a 0a20 2020 2023 2d2d  ialize):.    #--
-000147d0: 0a0a 2020 2020 736f 7572 6365 5f70 6174  ..    source_pat
-000147e0: 683a 2073 7472 0a20 2020 2073 6f75 7263  h: str.    sourc
-000147f0: 655f 6772 616d 6d61 723a 2073 7472 0a20  e_grammar: str. 
-00014800: 2020 2067 7261 6d6d 6172 3a20 2747 7261     grammar: 'Gra
-00014810: 6d6d 6172 270a 2020 2020 6f70 7469 6f6e  mmar'.    option
-00014820: 733a 204c 6172 6b4f 7074 696f 6e73 0a20  s: LarkOptions. 
-00014830: 2020 206c 6578 6572 3a20 4c65 7865 720a     lexer: Lexer.
-00014840: 2020 2020 7465 726d 696e 616c 733a 2043      terminals: C
-00014850: 6f6c 6c65 6374 696f 6e5b 5465 726d 696e  ollection[Termin
-00014860: 616c 4465 665d 0a0a 2020 2020 6465 6620  alDef]..    def 
-00014870: 5f5f 696e 6974 5f5f 2873 656c 662c 2067  __init__(self, g
-00014880: 7261 6d6d 6172 3a20 2755 6e69 6f6e 5b47  rammar: 'Union[G
-00014890: 7261 6d6d 6172 2c20 7374 722c 2049 4f5b  rammar, str, IO[
-000148a0: 7374 725d 5d27 2c20 2a2a 6f70 7469 6f6e  str]]', **option
-000148b0: 7329 202d 3e20 4e6f 6e65 3a0a 2020 2020  s) -> None:.    
-000148c0: 2020 2020 7365 6c66 2e6f 7074 696f 6e73      self.options
-000148d0: 203d 204c 6172 6b4f 7074 696f 6e73 286f   = LarkOptions(o
-000148e0: 7074 696f 6e73 290a 2020 2020 2020 2020  ptions).        
-000148f0: 7265 5f6d 6f64 756c 653a 2074 7970 6573  re_module: types
-00014900: 2e4d 6f64 756c 6554 7970 650a 0a20 2020  .ModuleType..   
-00014910: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
-00014920: 2075 7365 5f72 6567 6578 203d 2073 656c   use_regex = sel
-00014930: 662e 6f70 7469 6f6e 732e 7265 6765 780a  f.options.regex.
-00014940: 2020 2020 2020 2020 6966 2075 7365 5f72          if use_r
-00014950: 6567 6578 3a0a 2020 2020 2020 2020 2020  egex:.          
-00014960: 2020 6966 205f 6861 735f 7265 6765 783a    if _has_regex:
-00014970: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014980: 2072 655f 6d6f 6475 6c65 203d 2072 6567   re_module = reg
-00014990: 6578 0a20 2020 2020 2020 2020 2020 2065  ex.            e
-000149a0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
-000149b0: 2020 2020 2072 6169 7365 2049 6d70 6f72       raise Impor
-000149c0: 7445 7272 6f72 2827 6072 6567 6578 6020  tError('`regex` 
-000149d0: 6d6f 6475 6c65 206d 7573 7420 6265 2069  module must be i
-000149e0: 6e73 7461 6c6c 6564 2069 6620 6361 6c6c  nstalled if call
-000149f0: 696e 6720 604c 6172 6b28 7265 6765 783d  ing `Lark(regex=
-00014a00: 5472 7565 2960 2e27 290a 2020 2020 2020  True)`.').      
-00014a10: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
-00014a20: 2020 2020 7265 5f6d 6f64 756c 6520 3d20      re_module = 
-00014a30: 7265 0a0a 2020 2020 2020 2020 2323 0a0a  re..        ##..
-00014a40: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
-00014a50: 6f70 7469 6f6e 732e 736f 7572 6365 5f70  options.source_p
-00014a60: 6174 6820 6973 204e 6f6e 653a 0a20 2020  ath is None:.   
-00014a70: 2020 2020 2020 2020 2074 7279 3a0a 2020           try:.  
-00014a80: 2020 2020 2020 2020 2020 2020 2020 7365                se
-00014a90: 6c66 2e73 6f75 7263 655f 7061 7468 203d  lf.source_path =
-00014aa0: 2067 7261 6d6d 6172 2e6e 616d 6520 2023   grammar.name  #
-00014ab0: 230a 0a20 2020 2020 2020 2020 2020 2065  #..            e
-00014ac0: 7863 6570 7420 4174 7472 6962 7574 6545  xcept AttributeE
-00014ad0: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
-00014ae0: 2020 2020 2020 7365 6c66 2e73 6f75 7263        self.sourc
-00014af0: 655f 7061 7468 203d 2027 3c73 7472 696e  e_path = '<strin
-00014b00: 673e 270a 2020 2020 2020 2020 656c 7365  g>'.        else
-00014b10: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00014b20: 6c66 2e73 6f75 7263 655f 7061 7468 203d  lf.source_path =
-00014b30: 2073 656c 662e 6f70 7469 6f6e 732e 736f   self.options.so
-00014b40: 7572 6365 5f70 6174 680a 0a20 2020 2020  urce_path..     
-00014b50: 2020 2023 230a 0a20 2020 2020 2020 2074     ##..        t
-00014b60: 7279 3a0a 2020 2020 2020 2020 2020 2020  ry:.            
-00014b70: 7265 6164 203d 2067 7261 6d6d 6172 2e72  read = grammar.r
-00014b80: 6561 6420 2023 230a 0a20 2020 2020 2020  ead  ##..       
-00014b90: 2065 7863 6570 7420 4174 7472 6962 7574   except Attribut
-00014ba0: 6545 7272 6f72 3a0a 2020 2020 2020 2020  eError:.        
-00014bb0: 2020 2020 7061 7373 0a20 2020 2020 2020      pass.       
-00014bc0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00014bd0: 2020 2067 7261 6d6d 6172 203d 2072 6561     grammar = rea
-00014be0: 6428 290a 0a20 2020 2020 2020 2063 6163  d()..        cac
-00014bf0: 6865 5f66 6e20 3d20 4e6f 6e65 0a20 2020  he_fn = None.   
-00014c00: 2020 2020 2063 6163 6865 5f6d 6435 203d       cache_md5 =
-00014c10: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-00014c20: 2069 7369 6e73 7461 6e63 6528 6772 616d   isinstance(gram
-00014c30: 6d61 722c 2073 7472 293a 0a20 2020 2020  mar, str):.     
-00014c40: 2020 2020 2020 2073 656c 662e 736f 7572         self.sour
-00014c50: 6365 5f67 7261 6d6d 6172 203d 2067 7261  ce_grammar = gra
-00014c60: 6d6d 6172 0a20 2020 2020 2020 2020 2020  mmar.           
-00014c70: 2069 6620 7365 6c66 2e6f 7074 696f 6e73   if self.options
-00014c80: 2e75 7365 5f62 7974 6573 3a0a 2020 2020  .use_bytes:.    
-00014c90: 2020 2020 2020 2020 2020 2020 6966 206e              if n
-00014ca0: 6f74 2069 7361 7363 6969 2867 7261 6d6d  ot isascii(gramm
-00014cb0: 6172 293a 0a20 2020 2020 2020 2020 2020  ar):.           
-00014cc0: 2020 2020 2020 2020 2072 6169 7365 2043           raise C
-00014cd0: 6f6e 6669 6775 7261 7469 6f6e 4572 726f  onfigurationErro
-00014ce0: 7228 2247 7261 6d6d 6172 206d 7573 7420  r("Grammar must 
-00014cf0: 6265 2061 7363 6969 206f 6e6c 792c 2077  be ascii only, w
-00014d00: 6865 6e20 7573 655f 6279 7465 733d 5472  hen use_bytes=Tr
-00014d10: 7565 2229 0a0a 2020 2020 2020 2020 2020  ue")..          
-00014d20: 2020 6966 2073 656c 662e 6f70 7469 6f6e    if self.option
-00014d30: 732e 6361 6368 653a 0a20 2020 2020 2020  s.cache:.       
-00014d40: 2020 2020 2020 2020 2069 6620 7365 6c66           if self
-00014d50: 2e6f 7074 696f 6e73 2e70 6172 7365 7220  .options.parser 
-00014d60: 213d 2027 6c61 6c72 273a 0a20 2020 2020  != 'lalr':.     
-00014d70: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-00014d80: 6169 7365 2043 6f6e 6669 6775 7261 7469  aise Configurati
-00014d90: 6f6e 4572 726f 7228 2263 6163 6865 206f  onError("cache o
-00014da0: 6e6c 7920 776f 726b 7320 7769 7468 2070  nly works with p
-00014db0: 6172 7365 723d 276c 616c 7227 2066 6f72  arser='lalr' for
-00014dc0: 206e 6f77 2229 0a0a 2020 2020 2020 2020   now")..        
-00014dd0: 2020 2020 2020 2020 756e 6861 7368 6162          unhashab
-00014de0: 6c65 203d 2028 2774 7261 6e73 666f 726d  le = ('transform
-00014df0: 6572 272c 2027 706f 7374 6c65 7827 2c20  er', 'postlex', 
-00014e00: 276c 6578 6572 5f63 616c 6c62 6163 6b73  'lexer_callbacks
-00014e10: 272c 2027 6564 6974 5f74 6572 6d69 6e61  ', 'edit_termina
-00014e20: 6c73 272c 2027 5f70 6c75 6769 6e73 2729  ls', '_plugins')
-00014e30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00014e40: 206f 7074 696f 6e73 5f73 7472 203d 2027   options_str = '
-00014e50: 272e 6a6f 696e 286b 2b73 7472 2876 2920  '.join(k+str(v) 
-00014e60: 666f 7220 6b2c 2076 2069 6e20 6f70 7469  for k, v in opti
-00014e70: 6f6e 732e 6974 656d 7328 2920 6966 206b  ons.items() if k
-00014e80: 206e 6f74 2069 6e20 756e 6861 7368 6162   not in unhashab
-00014e90: 6c65 290a 2020 2020 2020 2020 2020 2020  le).            
-00014ea0: 2020 2020 6672 6f6d 202e 2069 6d70 6f72      from . impor
-00014eb0: 7420 5f5f 7665 7273 696f 6e5f 5f0a 2020  t __version__.  
-00014ec0: 2020 2020 2020 2020 2020 2020 2020 7320                s 
-00014ed0: 3d20 6772 616d 6d61 7220 2b20 6f70 7469  = grammar + opti
-00014ee0: 6f6e 735f 7374 7220 2b20 5f5f 7665 7273  ons_str + __vers
-00014ef0: 696f 6e5f 5f20 2b20 7374 7228 7379 732e  ion__ + str(sys.
-00014f00: 7665 7273 696f 6e5f 696e 666f 5b3a 325d  version_info[:2]
-00014f10: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
-00014f20: 2020 6361 6368 655f 6d64 3520 3d20 6d64    cache_md5 = md
-00014f30: 355f 6469 6765 7374 2873 290a 0a20 2020  5_digest(s)..   
-00014f40: 2020 2020 2020 2020 2020 2020 2069 6620               if 
-00014f50: 6973 696e 7374 616e 6365 2873 656c 662e  isinstance(self.
-00014f60: 6f70 7469 6f6e 732e 6361 6368 652c 2073  options.cache, s
-00014f70: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
-00014f80: 2020 2020 2020 2020 2063 6163 6865 5f66           cache_f
-00014f90: 6e20 3d20 7365 6c66 2e6f 7074 696f 6e73  n = self.options
-00014fa0: 2e63 6163 6865 0a20 2020 2020 2020 2020  .cache.         
-00014fb0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00014fc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014fd0: 2069 6620 7365 6c66 2e6f 7074 696f 6e73   if self.options
-00014fe0: 2e63 6163 6865 2069 7320 6e6f 7420 5472  .cache is not Tr
-00014ff0: 7565 3a0a 2020 2020 2020 2020 2020 2020  ue:.            
-00015000: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-00015010: 6520 436f 6e66 6967 7572 6174 696f 6e45  e ConfigurationE
-00015020: 7272 6f72 2822 6361 6368 6520 6172 6775  rror("cache argu
-00015030: 6d65 6e74 206d 7573 7420 6265 2062 6f6f  ment must be boo
-00015040: 6c20 6f72 2073 7472 2229 0a0a 2020 2020  l or str")..    
-00015050: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015060: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
-00015070: 2020 2020 2020 2020 2020 2020 2075 7365               use
-00015080: 726e 616d 6520 3d20 6765 7470 6173 732e  rname = getpass.
-00015090: 6765 7475 7365 7228 290a 2020 2020 2020  getuser().      
-000150a0: 2020 2020 2020 2020 2020 2020 2020 6578                ex
-000150b0: 6365 7074 2045 7863 6570 7469 6f6e 3a0a  cept Exception:.
-000150c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000150d0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
-000150e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000150f0: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
-00015100: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015110: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
-00015120: 2020 2020 2020 2020 2020 2020 7573 6572              user
-00015130: 6e61 6d65 203d 2022 756e 6b6e 6f77 6e22  name = "unknown"
-00015140: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
-00015150: 2020 2020 2020 6361 6368 655f 666e 203d        cache_fn =
-00015160: 2074 656d 7066 696c 652e 6765 7474 656d   tempfile.gettem
-00015170: 7064 6972 2829 202b 2022 2f2e 6c61 726b  pdir() + "/.lark
-00015180: 5f63 6163 6865 5f25 735f 2573 5f25 735f  _cache_%s_%s_%s_
-00015190: 2573 2e74 6d70 2220 2520 2875 7365 726e  %s.tmp" % (usern
-000151a0: 616d 652c 2063 6163 6865 5f6d 6435 2c20  ame, cache_md5, 
-000151b0: 2a73 7973 2e76 6572 7369 6f6e 5f69 6e66  *sys.version_inf
-000151c0: 6f5b 3a32 5d29 0a0a 2020 2020 2020 2020  o[:2])..        
-000151d0: 2020 2020 2020 2020 6f6c 645f 6f70 7469          old_opti
-000151e0: 6f6e 7320 3d20 7365 6c66 2e6f 7074 696f  ons = self.optio
-000151f0: 6e73 0a20 2020 2020 2020 2020 2020 2020  ns.             
-00015200: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
-00015210: 2020 2020 2020 2020 2020 2020 7769 7468              with
-00015220: 2046 532e 6f70 656e 2863 6163 6865 5f66   FS.open(cache_f
-00015230: 6e2c 2027 7262 2729 2061 7320 663a 0a20  n, 'rb') as f:. 
-00015240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015250: 2020 2020 2020 206c 6f67 6765 722e 6465         logger.de
-00015260: 6275 6728 274c 6f61 6469 6e67 2067 7261  bug('Loading gra
-00015270: 6d6d 6172 2066 726f 6d20 6361 6368 653a  mmar from cache:
-00015280: 2025 7327 2c20 6361 6368 655f 666e 290a   %s', cache_fn).
-00015290: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000152a0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
-000152b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000152c0: 2020 2020 666f 7220 6e61 6d65 2069 6e20      for name in 
-000152d0: 2873 6574 286f 7074 696f 6e73 2920 2d20  (set(options) - 
-000152e0: 5f4c 4f41 445f 414c 4c4f 5745 445f 4f50  _LOAD_ALLOWED_OP
-000152f0: 5449 4f4e 5329 3a0a 2020 2020 2020 2020  TIONS):.        
-00015300: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015310: 2020 2020 6465 6c20 6f70 7469 6f6e 735b      del options[
-00015320: 6e61 6d65 5d0a 2020 2020 2020 2020 2020  name].          
-00015330: 2020 2020 2020 2020 2020 2020 2020 6669                fi
-00015340: 6c65 5f6d 6435 203d 2066 2e72 6561 646c  le_md5 = f.readl
-00015350: 696e 6528 292e 7273 7472 6970 2862 275c  ine().rstrip(b'\
-00015360: 6e27 290a 2020 2020 2020 2020 2020 2020  n').            
-00015370: 2020 2020 2020 2020 2020 2020 6361 6368              cach
-00015380: 6564 5f75 7365 645f 6669 6c65 7320 3d20  ed_used_files = 
-00015390: 7069 636b 6c65 2e6c 6f61 6428 6629 0a20  pickle.load(f). 
-000153a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000153b0: 2020 2020 2020 2069 6620 6669 6c65 5f6d         if file_m
-000153c0: 6435 203d 3d20 6361 6368 655f 6d64 352e  d5 == cache_md5.
-000153d0: 656e 636f 6465 2827 7574 6638 2729 2061  encode('utf8') a
-000153e0: 6e64 2076 6572 6966 795f 7573 6564 5f66  nd verify_used_f
-000153f0: 696c 6573 2863 6163 6865 645f 7573 6564  iles(cached_used
-00015400: 5f66 696c 6573 293a 0a20 2020 2020 2020  _files):.       
-00015410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015420: 2020 2020 2063 6163 6865 645f 7061 7273       cached_pars
-00015430: 6572 5f64 6174 6120 3d20 7069 636b 6c65  er_data = pickle
-00015440: 2e6c 6f61 6428 6629 0a20 2020 2020 2020  .load(f).       
-00015450: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015460: 2020 2020 2073 656c 662e 5f6c 6f61 6428       self._load(
-00015470: 6361 6368 6564 5f70 6172 7365 725f 6461  cached_parser_da
-00015480: 7461 2c20 2a2a 6f70 7469 6f6e 7329 0a20  ta, **options). 
-00015490: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-000154b0: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-000154c0: 2020 6578 6365 7074 2046 696c 654e 6f74    except FileNot
-000154d0: 466f 756e 6445 7272 6f72 3a0a 2020 2020  FoundError:.    
-000154e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000154f0: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
-00015500: 2020 2020 2020 2020 7061 7373 0a20 2020          pass.   
-00015510: 2020 2020 2020 2020 2020 2020 2065 7863               exc
-00015520: 6570 7420 4578 6365 7074 696f 6e3a 2023  ept Exception: #
-00015530: 230a 0a20 2020 2020 2020 2020 2020 2020  #..             
-00015540: 2020 2020 2020 206c 6f67 6765 722e 6578         logger.ex
-00015550: 6365 7074 696f 6e28 2246 6169 6c65 6420  ception("Failed 
-00015560: 746f 206c 6f61 6420 4c61 726b 2066 726f  to load Lark fro
-00015570: 6d20 6361 6368 653a 2025 722e 2057 6520  m cache: %r. We 
-00015580: 7769 6c6c 2074 7279 2074 6f20 6361 7272  will try to carr
-00015590: 7920 6f6e 2e22 2c20 6361 6368 655f 666e  y on.", cache_fn
-000155a0: 290a 0a20 2020 2020 2020 2020 2020 2020  )..             
-000155b0: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
-000155c0: 2020 2020 2020 2020 2020 2020 2020 2023                 #
-000155d0: 230a 0a20 2020 2020 2020 2020 2020 2020  #..             
-000155e0: 2020 2020 2020 2073 656c 662e 6f70 7469         self.opti
-000155f0: 6f6e 7320 3d20 6f6c 645f 6f70 7469 6f6e  ons = old_option
-00015600: 730a 0a0a 2020 2020 2020 2020 2020 2020  s...            
-00015610: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
-00015620: 7365 6c66 2e67 7261 6d6d 6172 2c20 7573  self.grammar, us
-00015630: 6564 5f66 696c 6573 203d 206c 6f61 645f  ed_files = load_
-00015640: 6772 616d 6d61 7228 6772 616d 6d61 722c  grammar(grammar,
-00015650: 2073 656c 662e 736f 7572 6365 5f70 6174   self.source_pat
-00015660: 682c 2073 656c 662e 6f70 7469 6f6e 732e  h, self.options.
-00015670: 696d 706f 7274 5f70 6174 6873 2c20 7365  import_paths, se
-00015680: 6c66 2e6f 7074 696f 6e73 2e6b 6565 705f  lf.options.keep_
-00015690: 616c 6c5f 746f 6b65 6e73 290a 2020 2020  all_tokens).    
-000156a0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-000156b0: 2020 2020 2020 6173 7365 7274 2069 7369        assert isi
-000156c0: 6e73 7461 6e63 6528 6772 616d 6d61 722c  nstance(grammar,
-000156d0: 2047 7261 6d6d 6172 290a 2020 2020 2020   Grammar).      
-000156e0: 2020 2020 2020 7365 6c66 2e67 7261 6d6d        self.gramm
-000156f0: 6172 203d 2067 7261 6d6d 6172 0a0a 0a20  ar = grammar... 
-00015700: 2020 2020 2020 2069 6620 7365 6c66 2e6f         if self.o
-00015710: 7074 696f 6e73 2e6c 6578 6572 203d 3d20  ptions.lexer == 
-00015720: 2761 7574 6f27 3a0a 2020 2020 2020 2020  'auto':.        
-00015730: 2020 2020 6966 2073 656c 662e 6f70 7469      if self.opti
-00015740: 6f6e 732e 7061 7273 6572 203d 3d20 276c  ons.parser == 'l
-00015750: 616c 7227 3a0a 2020 2020 2020 2020 2020  alr':.          
-00015760: 2020 2020 2020 7365 6c66 2e6f 7074 696f        self.optio
-00015770: 6e73 2e6c 6578 6572 203d 2027 636f 6e74  ns.lexer = 'cont
-00015780: 6578 7475 616c 270a 2020 2020 2020 2020  extual'.        
-00015790: 2020 2020 656c 6966 2073 656c 662e 6f70      elif self.op
-000157a0: 7469 6f6e 732e 7061 7273 6572 203d 3d20  tions.parser == 
-000157b0: 2765 6172 6c65 7927 3a0a 2020 2020 2020  'earley':.      
-000157c0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
-000157d0: 662e 6f70 7469 6f6e 732e 706f 7374 6c65  f.options.postle
-000157e0: 7820 6973 206e 6f74 204e 6f6e 653a 0a20  x is not None:. 
-000157f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015800: 2020 206c 6f67 6765 722e 696e 666f 2822     logger.info("
-00015810: 706f 7374 6c65 7820 6361 6e27 7420 6265  postlex can't be
-00015820: 2075 7365 6420 7769 7468 2074 6865 2064   used with the d
-00015830: 796e 616d 6963 206c 6578 6572 2c20 736f  ynamic lexer, so
-00015840: 2077 6520 7573 6520 2762 6173 6963 2720   we use 'basic' 
-00015850: 696e 7374 6561 642e 2022 0a20 2020 2020  instead. ".     
-00015860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00015870: 2020 2020 2020 2020 2020 2022 436f 6e73             "Cons
-00015880: 6964 6572 2075 7369 6e67 206c 616c 7220  ider using lalr 
-00015890: 7769 7468 2063 6f6e 7465 7874 7561 6c20  with contextual 
-000158a0: 696e 7374 6561 6420 6f66 2065 6172 6c65  instead of earle
-000158b0: 7922 290a 2020 2020 2020 2020 2020 2020  y").            
-000158c0: 2020 2020 2020 2020 7365 6c66 2e6f 7074          self.opt
-000158d0: 696f 6e73 2e6c 6578 6572 203d 2027 6261  ions.lexer = 'ba
-000158e0: 7369 6327 0a20 2020 2020 2020 2020 2020  sic'.           
-000158f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00015900: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00015910: 656c 662e 6f70 7469 6f6e 732e 6c65 7865  elf.options.lexe
-00015920: 7220 3d20 2764 796e 616d 6963 270a 2020  r = 'dynamic'.  
-00015930: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
-00015940: 656c 662e 6f70 7469 6f6e 732e 7061 7273  elf.options.pars
-00015950: 6572 203d 3d20 2763 796b 273a 0a20 2020  er == 'cyk':.   
-00015960: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00015970: 662e 6f70 7469 6f6e 732e 6c65 7865 7220  f.options.lexer 
-00015980: 3d20 2762 6173 6963 270a 2020 2020 2020  = 'basic'.      
-00015990: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-000159a0: 2020 2020 2020 2020 2020 2020 6173 7365              asse
-000159b0: 7274 2046 616c 7365 2c20 7365 6c66 2e6f  rt False, self.o
-000159c0: 7074 696f 6e73 2e70 6172 7365 720a 2020  ptions.parser.  
-000159d0: 2020 2020 2020 6c65 7865 7220 3d20 7365        lexer = se
-000159e0: 6c66 2e6f 7074 696f 6e73 2e6c 6578 6572  lf.options.lexer
-000159f0: 0a20 2020 2020 2020 2069 6620 6973 696e  .        if isin
-00015a00: 7374 616e 6365 286c 6578 6572 2c20 7479  stance(lexer, ty
-00015a10: 7065 293a 0a20 2020 2020 2020 2020 2020  pe):.           
-00015a20: 2061 7373 6572 7420 6973 7375 6263 6c61   assert issubcla
-00015a30: 7373 286c 6578 6572 2c20 4c65 7865 7229  ss(lexer, Lexer)
-00015a40: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
-00015a50: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
-00015a60: 2020 2061 7373 6572 745f 636f 6e66 6967     assert_config
-00015a70: 286c 6578 6572 2c20 2827 6261 7369 6327  (lexer, ('basic'
-00015a80: 2c20 2763 6f6e 7465 7874 7561 6c27 2c20  , 'contextual', 
-00015a90: 2764 796e 616d 6963 272c 2027 6479 6e61  'dynamic', 'dyna
-00015aa0: 6d69 635f 636f 6d70 6c65 7465 2729 290a  mic_complete')).
-00015ab0: 2020 2020 2020 2020 2020 2020 6966 2073              if s
-00015ac0: 656c 662e 6f70 7469 6f6e 732e 706f 7374  elf.options.post
-00015ad0: 6c65 7820 6973 206e 6f74 204e 6f6e 6520  lex is not None 
-00015ae0: 616e 6420 2764 796e 616d 6963 2720 696e  and 'dynamic' in
-00015af0: 206c 6578 6572 3a0a 2020 2020 2020 2020   lexer:.        
-00015b00: 2020 2020 2020 2020 7261 6973 6520 436f          raise Co
-00015b10: 6e66 6967 7572 6174 696f 6e45 7272 6f72  nfigurationError
-00015b20: 2822 4361 6e27 7420 7573 6520 706f 7374  ("Can't use post
-00015b30: 6c65 7820 7769 7468 2061 2064 796e 616d  lex with a dynam
-00015b40: 6963 206c 6578 6572 2e20 5573 6520 6261  ic lexer. Use ba
-00015b50: 7369 6320 6f72 2063 6f6e 7465 7874 7561  sic or contextua
-00015b60: 6c20 696e 7374 6561 6422 290a 0a20 2020  l instead")..   
-00015b70: 2020 2020 2069 6620 7365 6c66 2e6f 7074       if self.opt
-00015b80: 696f 6e73 2e61 6d62 6967 7569 7479 203d  ions.ambiguity =
-00015b90: 3d20 2761 7574 6f27 3a0a 2020 2020 2020  = 'auto':.      
-00015ba0: 2020 2020 2020 6966 2073 656c 662e 6f70        if self.op
-00015bb0: 7469 6f6e 732e 7061 7273 6572 203d 3d20  tions.parser == 
-00015bc0: 2765 6172 6c65 7927 3a0a 2020 2020 2020  'earley':.      
-00015bd0: 2020 2020 2020 2020 2020 7365 6c66 2e6f            self.o
-00015be0: 7074 696f 6e73 2e61 6d62 6967 7569 7479  ptions.ambiguity
-00015bf0: 203d 2027 7265 736f 6c76 6527 0a20 2020   = 'resolve'.   
-00015c00: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
-00015c10: 2020 2020 2020 2061 7373 6572 745f 636f         assert_co
-00015c20: 6e66 6967 2873 656c 662e 6f70 7469 6f6e  nfig(self.option
-00015c30: 732e 7061 7273 6572 2c20 2827 6561 726c  s.parser, ('earl
-00015c40: 6579 272c 2027 6379 6b27 292c 2022 2572  ey', 'cyk'), "%r
-00015c50: 2064 6f65 736e 2774 2073 7570 706f 7274   doesn't support
-00015c60: 2064 6973 616d 6269 6775 6174 696f 6e2e   disambiguation.
-00015c70: 2055 7365 206f 6e65 206f 6620 7468 6573   Use one of thes
-00015c80: 6520 7061 7273 6572 7320 696e 7374 6561  e parsers instea
-00015c90: 643a 2025 7322 290a 0a20 2020 2020 2020  d: %s")..       
-00015ca0: 2069 6620 7365 6c66 2e6f 7074 696f 6e73   if self.options
-00015cb0: 2e70 7269 6f72 6974 7920 3d3d 2027 6175  .priority == 'au
-00015cc0: 746f 273a 0a20 2020 2020 2020 2020 2020  to':.           
-00015cd0: 2073 656c 662e 6f70 7469 6f6e 732e 7072   self.options.pr
-00015ce0: 696f 7269 7479 203d 2027 6e6f 726d 616c  iority = 'normal
-00015cf0: 270a 0a20 2020 2020 2020 2069 6620 7365  '..        if se
-00015d00: 6c66 2e6f 7074 696f 6e73 2e70 7269 6f72  lf.options.prior
-00015d10: 6974 7920 6e6f 7420 696e 205f 5641 4c49  ity not in _VALI
-00015d20: 445f 5052 494f 5249 5459 5f4f 5054 494f  D_PRIORITY_OPTIO
-00015d30: 4e53 3a0a 2020 2020 2020 2020 2020 2020  NS:.            
-00015d40: 7261 6973 6520 436f 6e66 6967 7572 6174  raise Configurat
-00015d50: 696f 6e45 7272 6f72 2822 696e 7661 6c69  ionError("invali
-00015d60: 6420 7072 696f 7269 7479 206f 7074 696f  d priority optio
-00015d70: 6e3a 2025 722e 204d 7573 7420 6265 206f  n: %r. Must be o
-00015d80: 6e65 206f 6620 2572 2220 2520 2873 656c  ne of %r" % (sel
-00015d90: 662e 6f70 7469 6f6e 732e 7072 696f 7269  f.options.priori
-00015da0: 7479 2c20 5f56 414c 4944 5f50 5249 4f52  ty, _VALID_PRIOR
-00015db0: 4954 595f 4f50 5449 4f4e 5329 290a 2020  ITY_OPTIONS)).  
-00015dc0: 2020 2020 2020 6966 2073 656c 662e 6f70        if self.op
-00015dd0: 7469 6f6e 732e 616d 6269 6775 6974 7920  tions.ambiguity 
-00015de0: 6e6f 7420 696e 205f 5641 4c49 445f 414d  not in _VALID_AM
-00015df0: 4249 4755 4954 595f 4f50 5449 4f4e 533a  BIGUITY_OPTIONS:
-00015e00: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00015e10: 7365 2043 6f6e 6669 6775 7261 7469 6f6e  se Configuration
-00015e20: 4572 726f 7228 2269 6e76 616c 6964 2061  Error("invalid a
-00015e30: 6d62 6967 7569 7479 206f 7074 696f 6e3a  mbiguity option:
-00015e40: 2025 722e 204d 7573 7420 6265 206f 6e65   %r. Must be one
-00015e50: 206f 6620 2572 2220 2520 2873 656c 662e   of %r" % (self.
-00015e60: 6f70 7469 6f6e 732e 616d 6269 6775 6974  options.ambiguit
-00015e70: 792c 205f 5641 4c49 445f 414d 4249 4755  y, _VALID_AMBIGU
-00015e80: 4954 595f 4f50 5449 4f4e 5329 290a 0a20  ITY_OPTIONS)).. 
-00015e90: 2020 2020 2020 2069 6620 7365 6c66 2e6f         if self.o
-00015ea0: 7074 696f 6e73 2e70 6172 7365 7220 6973  ptions.parser is
-00015eb0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-00015ec0: 2020 2074 6572 6d69 6e61 6c73 5f74 6f5f     terminals_to_
-00015ed0: 6b65 6570 203d 2027 2a27 0a20 2020 2020  keep = '*'.     
-00015ee0: 2020 2065 6c69 6620 7365 6c66 2e6f 7074     elif self.opt
-00015ef0: 696f 6e73 2e70 6f73 746c 6578 2069 7320  ions.postlex is 
-00015f00: 6e6f 7420 4e6f 6e65 3a0a 2020 2020 2020  not None:.      
-00015f10: 2020 2020 2020 7465 726d 696e 616c 735f        terminals_
-00015f20: 746f 5f6b 6565 7020 3d20 7365 7428 7365  to_keep = set(se
-00015f30: 6c66 2e6f 7074 696f 6e73 2e70 6f73 746c  lf.options.postl
-00015f40: 6578 2e61 6c77 6179 735f 6163 6365 7074  ex.always_accept
-00015f50: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
-00015f60: 2020 2020 2020 2020 2020 2020 7465 726d              term
-00015f70: 696e 616c 735f 746f 5f6b 6565 7020 3d20  inals_to_keep = 
-00015f80: 7365 7428 290a 0a20 2020 2020 2020 2023  set()..        #
-00015f90: 230a 0a20 2020 2020 2020 2073 656c 662e  #..        self.
-00015fa0: 7465 726d 696e 616c 732c 2073 656c 662e  terminals, self.
-00015fb0: 7275 6c65 732c 2073 656c 662e 6967 6e6f  rules, self.igno
-00015fc0: 7265 5f74 6f6b 656e 7320 3d20 7365 6c66  re_tokens = self
-00015fd0: 2e67 7261 6d6d 6172 2e63 6f6d 7069 6c65  .grammar.compile
-00015fe0: 2873 656c 662e 6f70 7469 6f6e 732e 7374  (self.options.st
-00015ff0: 6172 742c 2074 6572 6d69 6e61 6c73 5f74  art, terminals_t
-00016000: 6f5f 6b65 6570 290a 0a20 2020 2020 2020  o_keep)..       
-00016010: 2069 6620 7365 6c66 2e6f 7074 696f 6e73   if self.options
-00016020: 2e65 6469 745f 7465 726d 696e 616c 733a  .edit_terminals:
-00016030: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00016040: 2074 2069 6e20 7365 6c66 2e74 6572 6d69   t in self.termi
-00016050: 6e61 6c73 3a0a 2020 2020 2020 2020 2020  nals:.          
-00016060: 2020 2020 2020 7365 6c66 2e6f 7074 696f        self.optio
-00016070: 6e73 2e65 6469 745f 7465 726d 696e 616c  ns.edit_terminal
-00016080: 7328 7429 0a0a 2020 2020 2020 2020 7365  s(t)..        se
-00016090: 6c66 2e5f 7465 726d 696e 616c 735f 6469  lf._terminals_di
-000160a0: 6374 203d 207b 742e 6e61 6d65 3a20 7420  ct = {t.name: t 
-000160b0: 666f 7220 7420 696e 2073 656c 662e 7465  for t in self.te
-000160c0: 726d 696e 616c 737d 0a0a 2020 2020 2020  rminals}..      
-000160d0: 2020 2323 0a0a 2020 2020 2020 2020 6966    ##..        if
-000160e0: 2073 656c 662e 6f70 7469 6f6e 732e 7072   self.options.pr
-000160f0: 696f 7269 7479 203d 3d20 2769 6e76 6572  iority == 'inver
-00016100: 7427 3a0a 2020 2020 2020 2020 2020 2020  t':.            
-00016110: 666f 7220 7275 6c65 2069 6e20 7365 6c66  for rule in self
-00016120: 2e72 756c 6573 3a0a 2020 2020 2020 2020  .rules:.        
-00016130: 2020 2020 2020 2020 6966 2072 756c 652e          if rule.
-00016140: 6f70 7469 6f6e 732e 7072 696f 7269 7479  options.priority
-00016150: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
-00016160: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016170: 2020 7275 6c65 2e6f 7074 696f 6e73 2e70    rule.options.p
-00016180: 7269 6f72 6974 7920 3d20 2d72 756c 652e  riority = -rule.
-00016190: 6f70 7469 6f6e 732e 7072 696f 7269 7479  options.priority
-000161a0: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-000161b0: 2074 6572 6d20 696e 2073 656c 662e 7465   term in self.te
-000161c0: 726d 696e 616c 733a 0a20 2020 2020 2020  rminals:.       
-000161d0: 2020 2020 2020 2020 2074 6572 6d2e 7072           term.pr
-000161e0: 696f 7269 7479 203d 202d 7465 726d 2e70  iority = -term.p
-000161f0: 7269 6f72 6974 790a 2020 2020 2020 2020  riority.        
-00016200: 2323 0a0a 2020 2020 2020 2020 2323 0a0a  ##..        ##..
-00016210: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
-00016220: 2020 2020 656c 6966 2073 656c 662e 6f70      elif self.op
-00016230: 7469 6f6e 732e 7072 696f 7269 7479 2069  tions.priority i
-00016240: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
-00016250: 2020 2020 666f 7220 7275 6c65 2069 6e20      for rule in 
-00016260: 7365 6c66 2e72 756c 6573 3a0a 2020 2020  self.rules:.    
-00016270: 2020 2020 2020 2020 2020 2020 6966 2072              if r
-00016280: 756c 652e 6f70 7469 6f6e 732e 7072 696f  ule.options.prio
-00016290: 7269 7479 2069 7320 6e6f 7420 4e6f 6e65  rity is not None
-000162a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-000162b0: 2020 2020 2020 7275 6c65 2e6f 7074 696f        rule.optio
-000162c0: 6e73 2e70 7269 6f72 6974 7920 3d20 4e6f  ns.priority = No
-000162d0: 6e65 0a20 2020 2020 2020 2020 2020 2066  ne.            f
-000162e0: 6f72 2074 6572 6d20 696e 2073 656c 662e  or term in self.
-000162f0: 7465 726d 696e 616c 733a 0a20 2020 2020  terminals:.     
-00016300: 2020 2020 2020 2020 2020 2074 6572 6d2e             term.
-00016310: 7072 696f 7269 7479 203d 2030 0a0a 2020  priority = 0..  
-00016320: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
-00016330: 2020 7365 6c66 2e6c 6578 6572 5f63 6f6e    self.lexer_con
-00016340: 6620 3d20 4c65 7865 7243 6f6e 6628 0a20  f = LexerConf(. 
-00016350: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-00016360: 656c 662e 7465 726d 696e 616c 732c 2072  elf.terminals, r
-00016370: 655f 6d6f 6475 6c65 2c20 7365 6c66 2e69  e_module, self.i
-00016380: 676e 6f72 655f 746f 6b65 6e73 2c20 7365  gnore_tokens, se
-00016390: 6c66 2e6f 7074 696f 6e73 2e70 6f73 746c  lf.options.postl
-000163a0: 6578 2c0a 2020 2020 2020 2020 2020 2020  ex,.            
-000163b0: 2020 2020 7365 6c66 2e6f 7074 696f 6e73      self.options
-000163c0: 2e6c 6578 6572 5f63 616c 6c62 6163 6b73  .lexer_callbacks
-000163d0: 2c20 7365 6c66 2e6f 7074 696f 6e73 2e67  , self.options.g
-000163e0: 5f72 6567 6578 5f66 6c61 6773 2c20 7573  _regex_flags, us
-000163f0: 655f 6279 7465 733d 7365 6c66 2e6f 7074  e_bytes=self.opt
-00016400: 696f 6e73 2e75 7365 5f62 7974 6573 0a20  ions.use_bytes. 
-00016410: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00016420: 2020 2020 2020 6966 2073 656c 662e 6f70        if self.op
-00016430: 7469 6f6e 732e 7061 7273 6572 3a0a 2020  tions.parser:.  
-00016440: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
-00016450: 6172 7365 7220 3d20 7365 6c66 2e5f 6275  arser = self._bu
-00016460: 696c 645f 7061 7273 6572 2829 0a20 2020  ild_parser().   
-00016470: 2020 2020 2065 6c69 6620 6c65 7865 723a       elif lexer:
-00016480: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00016490: 662e 6c65 7865 7220 3d20 7365 6c66 2e5f  f.lexer = self._
-000164a0: 6275 696c 645f 6c65 7865 7228 290a 0a20  build_lexer().. 
-000164b0: 2020 2020 2020 2069 6620 6361 6368 655f         if cache_
-000164c0: 666e 3a0a 2020 2020 2020 2020 2020 2020  fn:.            
-000164d0: 6c6f 6767 6572 2e64 6562 7567 2827 5361  logger.debug('Sa
-000164e0: 7669 6e67 2067 7261 6d6d 6172 2074 6f20  ving grammar to 
-000164f0: 6361 6368 653a 2025 7327 2c20 6361 6368  cache: %s', cach
-00016500: 655f 666e 290a 2020 2020 2020 2020 2020  e_fn).          
-00016510: 2020 7472 793a 0a20 2020 2020 2020 2020    try:.         
-00016520: 2020 2020 2020 2077 6974 6820 4653 2e6f         with FS.o
-00016530: 7065 6e28 6361 6368 655f 666e 2c20 2777  pen(cache_fn, 'w
-00016540: 6227 2920 6173 2066 3a0a 2020 2020 2020  b') as f:.      
-00016550: 2020 2020 2020 2020 2020 2020 2020 6173                as
-00016560: 7365 7274 2063 6163 6865 5f6d 6435 2069  sert cache_md5 i
-00016570: 7320 6e6f 7420 4e6f 6e65 0a20 2020 2020  s not None.     
-00016580: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00016590: 2e77 7269 7465 2863 6163 6865 5f6d 6435  .write(cache_md5
-000165a0: 2e65 6e63 6f64 6528 2775 7466 3827 2920  .encode('utf8') 
-000165b0: 2b20 6227 5c6e 2729 0a20 2020 2020 2020  + b'\n').       
-000165c0: 2020 2020 2020 2020 2020 2020 2070 6963               pic
-000165d0: 6b6c 652e 6475 6d70 2875 7365 645f 6669  kle.dump(used_fi
-000165e0: 6c65 732c 2066 290a 2020 2020 2020 2020  les, f).        
-000165f0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00016600: 2e73 6176 6528 662c 205f 4c4f 4144 5f41  .save(f, _LOAD_A
-00016610: 4c4c 4f57 4544 5f4f 5054 494f 4e53 290a  LLOWED_OPTIONS).
-00016620: 2020 2020 2020 2020 2020 2020 6578 6365              exce
-00016630: 7074 2049 4f45 7272 6f72 2061 7320 653a  pt IOError as e:
-00016640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016650: 206c 6f67 6765 722e 6578 6365 7074 696f   logger.exceptio
-00016660: 6e28 2246 6169 6c65 6420 746f 2073 6176  n("Failed to sav
-00016670: 6520 4c61 726b 2074 6f20 6361 6368 653a  e Lark to cache:
-00016680: 2025 722e 222c 2063 6163 6865 5f66 6e2c   %r.", cache_fn,
-00016690: 2065 290a 0a20 2020 2069 6620 5f5f 646f   e)..    if __do
-000166a0: 635f 5f3a 0a20 2020 2020 2020 205f 5f64  c__:.        __d
-000166b0: 6f63 5f5f 202b 3d20 225c 6e5c 6e22 202b  oc__ += "\n\n" +
-000166c0: 204c 6172 6b4f 7074 696f 6e73 2e4f 5054   LarkOptions.OPT
-000166d0: 494f 4e53 5f44 4f43 0a0a 2020 2020 5f5f  IONS_DOC..    __
-000166e0: 7365 7269 616c 697a 655f 6669 656c 6473  serialize_fields
-000166f0: 5f5f 203d 2027 7061 7273 6572 272c 2027  __ = 'parser', '
-00016700: 7275 6c65 7327 2c20 276f 7074 696f 6e73  rules', 'options
-00016710: 270a 0a20 2020 2064 6566 205f 6275 696c  '..    def _buil
-00016720: 645f 6c65 7865 7228 7365 6c66 2c20 646f  d_lexer(self, do
-00016730: 6e74 5f69 676e 6f72 653a 2062 6f6f 6c3d  nt_ignore: bool=
-00016740: 4661 6c73 6529 202d 3e20 4261 7369 634c  False) -> BasicL
-00016750: 6578 6572 3a0a 2020 2020 2020 2020 6c65  exer:.        le
-00016760: 7865 725f 636f 6e66 203d 2073 656c 662e  xer_conf = self.
-00016770: 6c65 7865 725f 636f 6e66 0a20 2020 2020  lexer_conf.     
-00016780: 2020 2069 6620 646f 6e74 5f69 676e 6f72     if dont_ignor
-00016790: 653a 0a20 2020 2020 2020 2020 2020 2066  e:.            f
-000167a0: 726f 6d20 636f 7079 2069 6d70 6f72 7420  rom copy import 
-000167b0: 636f 7079 0a20 2020 2020 2020 2020 2020  copy.           
-000167c0: 206c 6578 6572 5f63 6f6e 6620 3d20 636f   lexer_conf = co
-000167d0: 7079 286c 6578 6572 5f63 6f6e 6629 0a20  py(lexer_conf). 
-000167e0: 2020 2020 2020 2020 2020 206c 6578 6572             lexer
-000167f0: 5f63 6f6e 662e 6967 6e6f 7265 203d 2028  _conf.ignore = (
-00016800: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
-00016810: 2042 6173 6963 4c65 7865 7228 6c65 7865   BasicLexer(lexe
-00016820: 725f 636f 6e66 290a 0a20 2020 2064 6566  r_conf)..    def
-00016830: 205f 7072 6570 6172 655f 6361 6c6c 6261   _prepare_callba
-00016840: 636b 7328 7365 6c66 2920 2d3e 204e 6f6e  cks(self) -> Non
-00016850: 653a 0a20 2020 2020 2020 2073 656c 662e  e:.        self.
-00016860: 5f63 616c 6c62 6163 6b73 203d 207b 7d0a  _callbacks = {}.
-00016870: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
-00016880: 2020 2020 6966 2073 656c 662e 6f70 7469      if self.opti
-00016890: 6f6e 732e 616d 6269 6775 6974 7920 213d  ons.ambiguity !=
-000168a0: 2027 666f 7265 7374 273a 0a20 2020 2020   'forest':.     
-000168b0: 2020 2020 2020 2073 656c 662e 5f70 6172         self._par
-000168c0: 7365 5f74 7265 655f 6275 696c 6465 7220  se_tree_builder 
-000168d0: 3d20 5061 7273 6554 7265 6542 7569 6c64  = ParseTreeBuild
-000168e0: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-000168f0: 2020 2020 2020 2020 7365 6c66 2e72 756c          self.rul
-00016900: 6573 2c0a 2020 2020 2020 2020 2020 2020  es,.            
-00016910: 2020 2020 2020 2020 7365 6c66 2e6f 7074          self.opt
-00016920: 696f 6e73 2e74 7265 655f 636c 6173 7320  ions.tree_class 
-00016930: 6f72 2054 7265 652c 0a20 2020 2020 2020  or Tree,.       
-00016940: 2020 2020 2020 2020 2020 2020 2073 656c               sel
-00016950: 662e 6f70 7469 6f6e 732e 7072 6f70 6167  f.options.propag
-00016960: 6174 655f 706f 7369 7469 6f6e 732c 0a20  ate_positions,. 
-00016970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016980: 2020 2073 656c 662e 6f70 7469 6f6e 732e     self.options.
-00016990: 7061 7273 6572 2021 3d20 276c 616c 7227  parser != 'lalr'
-000169a0: 2061 6e64 2073 656c 662e 6f70 7469 6f6e   and self.option
-000169b0: 732e 616d 6269 6775 6974 7920 3d3d 2027  s.ambiguity == '
-000169c0: 6578 706c 6963 6974 272c 0a20 2020 2020  explicit',.     
-000169d0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000169e0: 656c 662e 6f70 7469 6f6e 732e 6d61 7962  elf.options.mayb
-000169f0: 655f 706c 6163 6568 6f6c 6465 7273 0a20  e_placeholders. 
-00016a00: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-00016a10: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00016a20: 662e 5f63 616c 6c62 6163 6b73 203d 2073  f._callbacks = s
-00016a30: 656c 662e 5f70 6172 7365 5f74 7265 655f  elf._parse_tree_
-00016a40: 6275 696c 6465 722e 6372 6561 7465 5f63  builder.create_c
-00016a50: 616c 6c62 6163 6b28 7365 6c66 2e6f 7074  allback(self.opt
-00016a60: 696f 6e73 2e74 7261 6e73 666f 726d 6572  ions.transformer
-00016a70: 290a 2020 2020 2020 2020 7365 6c66 2e5f  ).        self._
-00016a80: 6361 6c6c 6261 636b 732e 7570 6461 7465  callbacks.update
-00016a90: 285f 6765 745f 6c65 7865 725f 6361 6c6c  (_get_lexer_call
-00016aa0: 6261 636b 7328 7365 6c66 2e6f 7074 696f  backs(self.optio
-00016ab0: 6e73 2e74 7261 6e73 666f 726d 6572 2c20  ns.transformer, 
-00016ac0: 7365 6c66 2e74 6572 6d69 6e61 6c73 2929  self.terminals))
-00016ad0: 0a0a 2020 2020 6465 6620 5f62 7569 6c64  ..    def _build
-00016ae0: 5f70 6172 7365 7228 7365 6c66 2920 2d3e  _parser(self) ->
-00016af0: 2022 5061 7273 696e 6746 726f 6e74 656e   "ParsingFronten
-00016b00: 6422 3a0a 2020 2020 2020 2020 7365 6c66  d":.        self
-00016b10: 2e5f 7072 6570 6172 655f 6361 6c6c 6261  ._prepare_callba
-00016b20: 636b 7328 290a 2020 2020 2020 2020 5f76  cks().        _v
-00016b30: 616c 6964 6174 655f 6672 6f6e 7465 6e64  alidate_frontend
-00016b40: 5f61 7267 7328 7365 6c66 2e6f 7074 696f  _args(self.optio
-00016b50: 6e73 2e70 6172 7365 722c 2073 656c 662e  ns.parser, self.
-00016b60: 6f70 7469 6f6e 732e 6c65 7865 7229 0a20  options.lexer). 
-00016b70: 2020 2020 2020 2070 6172 7365 725f 636f         parser_co
-00016b80: 6e66 203d 2050 6172 7365 7243 6f6e 6628  nf = ParserConf(
-00016b90: 7365 6c66 2e72 756c 6573 2c20 7365 6c66  self.rules, self
-00016ba0: 2e5f 6361 6c6c 6261 636b 732c 2073 656c  ._callbacks, sel
-00016bb0: 662e 6f70 7469 6f6e 732e 7374 6172 7429  f.options.start)
-00016bc0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00016bd0: 5f63 6f6e 7374 7275 6374 5f70 6172 7369  _construct_parsi
-00016be0: 6e67 5f66 726f 6e74 656e 6428 0a20 2020  ng_frontend(.   
-00016bf0: 2020 2020 2020 2020 2073 656c 662e 6f70           self.op
-00016c00: 7469 6f6e 732e 7061 7273 6572 2c0a 2020  tions.parser,.  
-00016c10: 2020 2020 2020 2020 2020 7365 6c66 2e6f            self.o
-00016c20: 7074 696f 6e73 2e6c 6578 6572 2c0a 2020  ptions.lexer,.  
-00016c30: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
-00016c40: 6578 6572 5f63 6f6e 662c 0a20 2020 2020  exer_conf,.     
-00016c50: 2020 2020 2020 2070 6172 7365 725f 636f         parser_co
-00016c60: 6e66 2c0a 2020 2020 2020 2020 2020 2020  nf,.            
-00016c70: 6f70 7469 6f6e 733d 7365 6c66 2e6f 7074  options=self.opt
-00016c80: 696f 6e73 0a20 2020 2020 2020 2029 0a0a  ions.        )..
-00016c90: 2020 2020 6465 6620 7361 7665 2873 656c      def save(sel
-00016ca0: 662c 2066 2c20 6578 636c 7564 655f 6f70  f, f, exclude_op
-00016cb0: 7469 6f6e 733a 2043 6f6c 6c65 6374 696f  tions: Collectio
-00016cc0: 6e5b 7374 725d 203d 2028 2929 202d 3e20  n[str] = ()) -> 
-00016cd0: 4e6f 6e65 3a0a 2020 2020 2020 2020 232d  None:.        #-
-00016ce0: 2d0a 2020 2020 2020 2020 6461 7461 2c20  -.        data, 
-00016cf0: 6d20 3d20 7365 6c66 2e6d 656d 6f5f 7365  m = self.memo_se
-00016d00: 7269 616c 697a 6528 5b54 6572 6d69 6e61  rialize([Termina
-00016d10: 6c44 6566 2c20 5275 6c65 5d29 0a20 2020  lDef, Rule]).   
-00016d20: 2020 2020 2069 6620 6578 636c 7564 655f       if exclude_
-00016d30: 6f70 7469 6f6e 733a 0a20 2020 2020 2020  options:.       
-00016d40: 2020 2020 2064 6174 615b 226f 7074 696f       data["optio
-00016d50: 6e73 225d 203d 207b 6e3a 2076 2066 6f72  ns"] = {n: v for
-00016d60: 206e 2c20 7620 696e 2064 6174 615b 226f   n, v in data["o
-00016d70: 7074 696f 6e73 225d 2e69 7465 6d73 2829  ptions"].items()
-00016d80: 2069 6620 6e20 6e6f 7420 696e 2065 7863   if n not in exc
-00016d90: 6c75 6465 5f6f 7074 696f 6e73 7d0a 2020  lude_options}.  
-00016da0: 2020 2020 2020 7069 636b 6c65 2e64 756d        pickle.dum
-00016db0: 7028 7b27 6461 7461 273a 2064 6174 612c  p({'data': data,
-00016dc0: 2027 6d65 6d6f 273a 206d 7d2c 2066 2c20   'memo': m}, f, 
-00016dd0: 7072 6f74 6f63 6f6c 3d70 6963 6b6c 652e  protocol=pickle.
-00016de0: 4849 4748 4553 545f 5052 4f54 4f43 4f4c  HIGHEST_PROTOCOL
-00016df0: 290a 0a20 2020 2040 636c 6173 736d 6574  )..    @classmet
-00016e00: 686f 640a 2020 2020 6465 6620 6c6f 6164  hod.    def load
-00016e10: 2863 6c73 3a20 5479 7065 5b5f 545d 2c20  (cls: Type[_T], 
-00016e20: 6629 202d 3e20 5f54 3a0a 2020 2020 2020  f) -> _T:.      
-00016e30: 2020 232d 2d0a 2020 2020 2020 2020 696e    #--.        in
-00016e40: 7374 203d 2063 6c73 2e5f 5f6e 6577 5f5f  st = cls.__new__
-00016e50: 2863 6c73 290a 2020 2020 2020 2020 7265  (cls).        re
-00016e60: 7475 726e 2069 6e73 742e 5f6c 6f61 6428  turn inst._load(
-00016e70: 6629 0a0a 2020 2020 6465 6620 5f64 6573  f)..    def _des
-00016e80: 6572 6961 6c69 7a65 5f6c 6578 6572 5f63  erialize_lexer_c
-00016e90: 6f6e 6628 7365 6c66 2c20 6461 7461 3a20  onf(self, data: 
-00016ea0: 4469 6374 5b73 7472 2c20 416e 795d 2c20  Dict[str, Any], 
-00016eb0: 6d65 6d6f 3a20 4469 6374 5b69 6e74 2c20  memo: Dict[int, 
-00016ec0: 556e 696f 6e5b 5465 726d 696e 616c 4465  Union[TerminalDe
-00016ed0: 662c 2052 756c 655d 5d2c 206f 7074 696f  f, Rule]], optio
-00016ee0: 6e73 3a20 4c61 726b 4f70 7469 6f6e 7329  ns: LarkOptions)
-00016ef0: 202d 3e20 4c65 7865 7243 6f6e 663a 0a20   -> LexerConf:. 
-00016f00: 2020 2020 2020 206c 6578 6572 5f63 6f6e         lexer_con
-00016f10: 6620 3d20 4c65 7865 7243 6f6e 662e 6465  f = LexerConf.de
-00016f20: 7365 7269 616c 697a 6528 6461 7461 5b27  serialize(data['
-00016f30: 6c65 7865 725f 636f 6e66 275d 2c20 6d65  lexer_conf'], me
-00016f40: 6d6f 290a 2020 2020 2020 2020 6c65 7865  mo).        lexe
-00016f50: 725f 636f 6e66 2e63 616c 6c62 6163 6b73  r_conf.callbacks
-00016f60: 203d 206f 7074 696f 6e73 2e6c 6578 6572   = options.lexer
-00016f70: 5f63 616c 6c62 6163 6b73 206f 7220 7b7d  _callbacks or {}
-00016f80: 0a20 2020 2020 2020 206c 6578 6572 5f63  .        lexer_c
-00016f90: 6f6e 662e 7265 5f6d 6f64 756c 6520 3d20  onf.re_module = 
-00016fa0: 7265 6765 7820 6966 206f 7074 696f 6e73  regex if options
-00016fb0: 2e72 6567 6578 2065 6c73 6520 7265 0a20  .regex else re. 
-00016fc0: 2020 2020 2020 206c 6578 6572 5f63 6f6e         lexer_con
-00016fd0: 662e 7573 655f 6279 7465 7320 3d20 6f70  f.use_bytes = op
-00016fe0: 7469 6f6e 732e 7573 655f 6279 7465 730a  tions.use_bytes.
-00016ff0: 2020 2020 2020 2020 6c65 7865 725f 636f          lexer_co
-00017000: 6e66 2e67 5f72 6567 6578 5f66 6c61 6773  nf.g_regex_flags
-00017010: 203d 206f 7074 696f 6e73 2e67 5f72 6567   = options.g_reg
-00017020: 6578 5f66 6c61 6773 0a20 2020 2020 2020  ex_flags.       
-00017030: 206c 6578 6572 5f63 6f6e 662e 736b 6970   lexer_conf.skip
-00017040: 5f76 616c 6964 6174 696f 6e20 3d20 5472  _validation = Tr
-00017050: 7565 0a20 2020 2020 2020 206c 6578 6572  ue.        lexer
-00017060: 5f63 6f6e 662e 706f 7374 6c65 7820 3d20  _conf.postlex = 
-00017070: 6f70 7469 6f6e 732e 706f 7374 6c65 780a  options.postlex.
-00017080: 2020 2020 2020 2020 7265 7475 726e 206c          return l
-00017090: 6578 6572 5f63 6f6e 660a 0a20 2020 2064  exer_conf..    d
-000170a0: 6566 205f 6c6f 6164 2873 656c 663a 205f  ef _load(self: _
-000170b0: 542c 2066 3a20 416e 792c 202a 2a6b 7761  T, f: Any, **kwa
-000170c0: 7267 7329 202d 3e20 5f54 3a0a 2020 2020  rgs) -> _T:.    
-000170d0: 2020 2020 6966 2069 7369 6e73 7461 6e63      if isinstanc
-000170e0: 6528 662c 2064 6963 7429 3a0a 2020 2020  e(f, dict):.    
-000170f0: 2020 2020 2020 2020 6420 3d20 660a 2020          d = f.  
-00017100: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00017110: 2020 2020 2020 2020 6420 3d20 7069 636b          d = pick
-00017120: 6c65 2e6c 6f61 6428 6629 0a20 2020 2020  le.load(f).     
-00017130: 2020 206d 656d 6f5f 6a73 6f6e 203d 2064     memo_json = d
-00017140: 5b27 6d65 6d6f 275d 0a20 2020 2020 2020  ['memo'].       
-00017150: 2064 6174 6120 3d20 645b 2764 6174 6127   data = d['data'
-00017160: 5d0a 0a20 2020 2020 2020 2061 7373 6572  ]..        asser
-00017170: 7420 6d65 6d6f 5f6a 736f 6e0a 2020 2020  t memo_json.    
-00017180: 2020 2020 6d65 6d6f 203d 2053 6572 6961      memo = Seria
-00017190: 6c69 7a65 4d65 6d6f 697a 6572 2e64 6573  lizeMemoizer.des
-000171a0: 6572 6961 6c69 7a65 286d 656d 6f5f 6a73  erialize(memo_js
-000171b0: 6f6e 2c20 7b27 5275 6c65 273a 2052 756c  on, {'Rule': Rul
-000171c0: 652c 2027 5465 726d 696e 616c 4465 6627  e, 'TerminalDef'
-000171d0: 3a20 5465 726d 696e 616c 4465 667d 2c20  : TerminalDef}, 
-000171e0: 7b7d 290a 2020 2020 2020 2020 6f70 7469  {}).        opti
-000171f0: 6f6e 7320 3d20 6469 6374 2864 6174 615b  ons = dict(data[
-00017200: 276f 7074 696f 6e73 275d 290a 2020 2020  'options']).    
-00017210: 2020 2020 6966 2028 7365 7428 6b77 6172      if (set(kwar
-00017220: 6773 2920 2d20 5f4c 4f41 445f 414c 4c4f  gs) - _LOAD_ALLO
-00017230: 5745 445f 4f50 5449 4f4e 5329 2026 2073  WED_OPTIONS) & s
-00017240: 6574 284c 6172 6b4f 7074 696f 6e73 2e5f  et(LarkOptions._
-00017250: 6465 6661 756c 7473 293a 0a20 2020 2020  defaults):.     
-00017260: 2020 2020 2020 2072 6169 7365 2043 6f6e         raise Con
-00017270: 6669 6775 7261 7469 6f6e 4572 726f 7228  figurationError(
-00017280: 2253 6f6d 6520 6f70 7469 6f6e 7320 6172  "Some options ar
-00017290: 6520 6e6f 7420 616c 6c6f 7765 6420 7768  e not allowed wh
-000172a0: 656e 206c 6f61 6469 6e67 2061 2050 6172  en loading a Par
-000172b0: 7365 723a 207b 7d22 0a20 2020 2020 2020  ser: {}".       
-000172c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000172d0: 2020 2020 2020 2e66 6f72 6d61 7428 7365        .format(se
-000172e0: 7428 6b77 6172 6773 2920 2d20 5f4c 4f41  t(kwargs) - _LOA
-000172f0: 445f 414c 4c4f 5745 445f 4f50 5449 4f4e  D_ALLOWED_OPTION
-00017300: 5329 290a 2020 2020 2020 2020 6f70 7469  S)).        opti
-00017310: 6f6e 732e 7570 6461 7465 286b 7761 7267  ons.update(kwarg
-00017320: 7329 0a20 2020 2020 2020 2073 656c 662e  s).        self.
-00017330: 6f70 7469 6f6e 7320 3d20 4c61 726b 4f70  options = LarkOp
-00017340: 7469 6f6e 732e 6465 7365 7269 616c 697a  tions.deserializ
-00017350: 6528 6f70 7469 6f6e 732c 206d 656d 6f29  e(options, memo)
-00017360: 0a20 2020 2020 2020 2073 656c 662e 7275  .        self.ru
-00017370: 6c65 7320 3d20 5b52 756c 652e 6465 7365  les = [Rule.dese
-00017380: 7269 616c 697a 6528 722c 206d 656d 6f29  rialize(r, memo)
-00017390: 2066 6f72 2072 2069 6e20 6461 7461 5b27   for r in data['
-000173a0: 7275 6c65 7327 5d5d 0a20 2020 2020 2020  rules']].       
-000173b0: 2073 656c 662e 736f 7572 6365 5f70 6174   self.source_pat
-000173c0: 6820 3d20 273c 6465 7365 7269 616c 697a  h = '<deserializ
-000173d0: 6564 3e27 0a20 2020 2020 2020 205f 7661  ed>'.        _va
-000173e0: 6c69 6461 7465 5f66 726f 6e74 656e 645f  lidate_frontend_
-000173f0: 6172 6773 2873 656c 662e 6f70 7469 6f6e  args(self.option
-00017400: 732e 7061 7273 6572 2c20 7365 6c66 2e6f  s.parser, self.o
-00017410: 7074 696f 6e73 2e6c 6578 6572 290a 2020  ptions.lexer).  
-00017420: 2020 2020 2020 7365 6c66 2e6c 6578 6572        self.lexer
-00017430: 5f63 6f6e 6620 3d20 7365 6c66 2e5f 6465  _conf = self._de
-00017440: 7365 7269 616c 697a 655f 6c65 7865 725f  serialize_lexer_
-00017450: 636f 6e66 2864 6174 615b 2770 6172 7365  conf(data['parse
-00017460: 7227 5d2c 206d 656d 6f2c 2073 656c 662e  r'], memo, self.
-00017470: 6f70 7469 6f6e 7329 0a20 2020 2020 2020  options).       
-00017480: 2073 656c 662e 7465 726d 696e 616c 7320   self.terminals 
-00017490: 3d20 7365 6c66 2e6c 6578 6572 5f63 6f6e  = self.lexer_con
-000174a0: 662e 7465 726d 696e 616c 730a 2020 2020  f.terminals.    
-000174b0: 2020 2020 7365 6c66 2e5f 7072 6570 6172      self._prepar
-000174c0: 655f 6361 6c6c 6261 636b 7328 290a 2020  e_callbacks().  
-000174d0: 2020 2020 2020 7365 6c66 2e5f 7465 726d        self._term
-000174e0: 696e 616c 735f 6469 6374 203d 207b 742e  inals_dict = {t.
-000174f0: 6e61 6d65 3a20 7420 666f 7220 7420 696e  name: t for t in
-00017500: 2073 656c 662e 7465 726d 696e 616c 737d   self.terminals}
-00017510: 0a20 2020 2020 2020 2073 656c 662e 7061  .        self.pa
-00017520: 7273 6572 203d 205f 6465 7365 7269 616c  rser = _deserial
-00017530: 697a 655f 7061 7273 696e 675f 6672 6f6e  ize_parsing_fron
-00017540: 7465 6e64 280a 2020 2020 2020 2020 2020  tend(.          
-00017550: 2020 6461 7461 5b27 7061 7273 6572 275d    data['parser']
-00017560: 2c0a 2020 2020 2020 2020 2020 2020 6d65  ,.            me
-00017570: 6d6f 2c0a 2020 2020 2020 2020 2020 2020  mo,.            
-00017580: 7365 6c66 2e6c 6578 6572 5f63 6f6e 662c  self.lexer_conf,
-00017590: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-000175a0: 662e 5f63 616c 6c62 6163 6b73 2c0a 2020  f._callbacks,.  
-000175b0: 2020 2020 2020 2020 2020 7365 6c66 2e6f            self.o
-000175c0: 7074 696f 6e73 2c20 2023 230a 0a20 2020  ptions,  ##..   
-000175d0: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
-000175e0: 6574 7572 6e20 7365 6c66 0a0a 2020 2020  eturn self..    
-000175f0: 4063 6c61 7373 6d65 7468 6f64 0a20 2020  @classmethod.   
-00017600: 2064 6566 205f 6c6f 6164 5f66 726f 6d5f   def _load_from_
-00017610: 6469 6374 2863 6c73 2c20 6461 7461 2c20  dict(cls, data, 
-00017620: 6d65 6d6f 2c20 2a2a 6b77 6172 6773 293a  memo, **kwargs):
-00017630: 0a20 2020 2020 2020 2069 6e73 7420 3d20  .        inst = 
-00017640: 636c 732e 5f5f 6e65 775f 5f28 636c 7329  cls.__new__(cls)
-00017650: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00017660: 696e 7374 2e5f 6c6f 6164 287b 2764 6174  inst._load({'dat
-00017670: 6127 3a20 6461 7461 2c20 276d 656d 6f27  a': data, 'memo'
-00017680: 3a20 6d65 6d6f 7d2c 202a 2a6b 7761 7267  : memo}, **kwarg
-00017690: 7329 0a0a 2020 2020 4063 6c61 7373 6d65  s)..    @classme
-000176a0: 7468 6f64 0a20 2020 2064 6566 206f 7065  thod.    def ope
-000176b0: 6e28 636c 733a 2054 7970 655b 5f54 5d2c  n(cls: Type[_T],
-000176c0: 2067 7261 6d6d 6172 5f66 696c 656e 616d   grammar_filenam
-000176d0: 653a 2073 7472 2c20 7265 6c5f 746f 3a20  e: str, rel_to: 
-000176e0: 4f70 7469 6f6e 616c 5b73 7472 5d3d 4e6f  Optional[str]=No
-000176f0: 6e65 2c20 2a2a 6f70 7469 6f6e 7329 202d  ne, **options) -
-00017700: 3e20 5f54 3a0a 2020 2020 2020 2020 232d  > _T:.        #-
-00017710: 2d0a 2020 2020 2020 2020 6966 2072 656c  -.        if rel
-00017720: 5f74 6f3a 0a20 2020 2020 2020 2020 2020  _to:.           
-00017730: 2062 6173 6570 6174 6820 3d20 6f73 2e70   basepath = os.p
-00017740: 6174 682e 6469 726e 616d 6528 7265 6c5f  ath.dirname(rel_
-00017750: 746f 290a 2020 2020 2020 2020 2020 2020  to).            
-00017760: 6772 616d 6d61 725f 6669 6c65 6e61 6d65  grammar_filename
-00017770: 203d 206f 732e 7061 7468 2e6a 6f69 6e28   = os.path.join(
-00017780: 6261 7365 7061 7468 2c20 6772 616d 6d61  basepath, gramma
-00017790: 725f 6669 6c65 6e61 6d65 290a 2020 2020  r_filename).    
-000177a0: 2020 2020 7769 7468 206f 7065 6e28 6772      with open(gr
-000177b0: 616d 6d61 725f 6669 6c65 6e61 6d65 2c20  ammar_filename, 
-000177c0: 656e 636f 6469 6e67 3d27 7574 6638 2729  encoding='utf8')
-000177d0: 2061 7320 663a 0a20 2020 2020 2020 2020   as f:.         
-000177e0: 2020 2072 6574 7572 6e20 636c 7328 662c     return cls(f,
-000177f0: 202a 2a6f 7074 696f 6e73 290a 0a20 2020   **options)..   
-00017800: 2040 636c 6173 736d 6574 686f 640a 2020   @classmethod.  
-00017810: 2020 6465 6620 6f70 656e 5f66 726f 6d5f    def open_from_
-00017820: 7061 636b 6167 6528 636c 733a 2054 7970  package(cls: Typ
-00017830: 655b 5f54 5d2c 2070 6163 6b61 6765 3a20  e[_T], package: 
-00017840: 7374 722c 2067 7261 6d6d 6172 5f70 6174  str, grammar_pat
-00017850: 683a 2073 7472 2c20 7365 6172 6368 5f70  h: str, search_p
-00017860: 6174 6873 3a20 2753 6571 7565 6e63 655b  aths: 'Sequence[
-00017870: 7374 725d 273d 5b22 225d 2c20 2a2a 6f70  str]'=[""], **op
-00017880: 7469 6f6e 7329 202d 3e20 5f54 3a0a 2020  tions) -> _T:.  
-00017890: 2020 2020 2020 232d 2d0a 2020 2020 2020        #--.      
-000178a0: 2020 7061 636b 6167 655f 6c6f 6164 6572    package_loader
-000178b0: 203d 2046 726f 6d50 6163 6b61 6765 4c6f   = FromPackageLo
-000178c0: 6164 6572 2870 6163 6b61 6765 2c20 7365  ader(package, se
-000178d0: 6172 6368 5f70 6174 6873 290a 2020 2020  arch_paths).    
-000178e0: 2020 2020 6675 6c6c 5f70 6174 682c 2074      full_path, t
-000178f0: 6578 7420 3d20 7061 636b 6167 655f 6c6f  ext = package_lo
-00017900: 6164 6572 284e 6f6e 652c 2067 7261 6d6d  ader(None, gramm
-00017910: 6172 5f70 6174 6829 0a20 2020 2020 2020  ar_path).       
-00017920: 206f 7074 696f 6e73 2e73 6574 6465 6661   options.setdefa
-00017930: 756c 7428 2773 6f75 7263 655f 7061 7468  ult('source_path
-00017940: 272c 2066 756c 6c5f 7061 7468 290a 2020  ', full_path).  
-00017950: 2020 2020 2020 6f70 7469 6f6e 732e 7365        options.se
-00017960: 7464 6566 6175 6c74 2827 696d 706f 7274  tdefault('import
-00017970: 5f70 6174 6873 272c 205b 5d29 0a20 2020  _paths', []).   
-00017980: 2020 2020 206f 7074 696f 6e73 5b27 696d       options['im
-00017990: 706f 7274 5f70 6174 6873 275d 2e61 7070  port_paths'].app
-000179a0: 656e 6428 7061 636b 6167 655f 6c6f 6164  end(package_load
-000179b0: 6572 290a 2020 2020 2020 2020 7265 7475  er).        retu
-000179c0: 726e 2063 6c73 2874 6578 742c 202a 2a6f  rn cls(text, **o
-000179d0: 7074 696f 6e73 290a 0a20 2020 2064 6566  ptions)..    def
-000179e0: 205f 5f72 6570 725f 5f28 7365 6c66 293a   __repr__(self):
-000179f0: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00017a00: 274c 6172 6b28 6f70 656e 2825 7229 2c20  'Lark(open(%r), 
-00017a10: 7061 7273 6572 3d25 722c 206c 6578 6572  parser=%r, lexer
-00017a20: 3d25 722c 202e 2e2e 2927 2025 2028 7365  =%r, ...)' % (se
-00017a30: 6c66 2e73 6f75 7263 655f 7061 7468 2c20  lf.source_path, 
-00017a40: 7365 6c66 2e6f 7074 696f 6e73 2e70 6172  self.options.par
-00017a50: 7365 722c 2073 656c 662e 6f70 7469 6f6e  ser, self.option
-00017a60: 732e 6c65 7865 7229 0a0a 0a20 2020 2064  s.lexer)...    d
-00017a70: 6566 206c 6578 2873 656c 662c 2074 6578  ef lex(self, tex
-00017a80: 743a 2073 7472 2c20 646f 6e74 5f69 676e  t: str, dont_ign
-00017a90: 6f72 653a 2062 6f6f 6c3d 4661 6c73 6529  ore: bool=False)
-00017aa0: 202d 3e20 4974 6572 6174 6f72 5b54 6f6b   -> Iterator[Tok
-00017ab0: 656e 5d3a 0a20 2020 2020 2020 2023 2d2d  en]:.        #--
-00017ac0: 0a20 2020 2020 2020 206c 6578 6572 3a20  .        lexer: 
-00017ad0: 4c65 7865 720a 2020 2020 2020 2020 6966  Lexer.        if
-00017ae0: 206e 6f74 2068 6173 6174 7472 2873 656c   not hasattr(sel
-00017af0: 662c 2027 6c65 7865 7227 2920 6f72 2064  f, 'lexer') or d
-00017b00: 6f6e 745f 6967 6e6f 7265 3a0a 2020 2020  ont_ignore:.    
-00017b10: 2020 2020 2020 2020 6c65 7865 7220 3d20          lexer = 
-00017b20: 7365 6c66 2e5f 6275 696c 645f 6c65 7865  self._build_lexe
-00017b30: 7228 646f 6e74 5f69 676e 6f72 6529 0a20  r(dont_ignore). 
-00017b40: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
-00017b50: 2020 2020 2020 2020 206c 6578 6572 203d           lexer =
-00017b60: 2073 656c 662e 6c65 7865 720a 2020 2020   self.lexer.    
-00017b70: 2020 2020 6c65 7865 725f 7468 7265 6164      lexer_thread
-00017b80: 203d 204c 6578 6572 5468 7265 6164 2e66   = LexerThread.f
-00017b90: 726f 6d5f 7465 7874 286c 6578 6572 2c20  rom_text(lexer, 
-00017ba0: 7465 7874 290a 2020 2020 2020 2020 7374  text).        st
-00017bb0: 7265 616d 203d 206c 6578 6572 5f74 6872  ream = lexer_thr
-00017bc0: 6561 642e 6c65 7828 4e6f 6e65 290a 2020  ead.lex(None).  
-00017bd0: 2020 2020 2020 6966 2073 656c 662e 6f70        if self.op
-00017be0: 7469 6f6e 732e 706f 7374 6c65 783a 0a20  tions.postlex:. 
-00017bf0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-00017c00: 6e20 7365 6c66 2e6f 7074 696f 6e73 2e70  n self.options.p
-00017c10: 6f73 746c 6578 2e70 726f 6365 7373 2873  ostlex.process(s
-00017c20: 7472 6561 6d29 0a20 2020 2020 2020 2072  tream).        r
-00017c30: 6574 7572 6e20 7374 7265 616d 0a0a 2020  eturn stream..  
-00017c40: 2020 6465 6620 6765 745f 7465 726d 696e    def get_termin
-00017c50: 616c 2873 656c 662c 206e 616d 653a 2073  al(self, name: s
-00017c60: 7472 2920 2d3e 2054 6572 6d69 6e61 6c44  tr) -> TerminalD
-00017c70: 6566 3a0a 2020 2020 2020 2020 232d 2d0a  ef:.        #--.
-00017c80: 2020 2020 2020 2020 7265 7475 726e 2073          return s
-00017c90: 656c 662e 5f74 6572 6d69 6e61 6c73 5f64  elf._terminals_d
-00017ca0: 6963 745b 6e61 6d65 5d0a 0a20 2020 2064  ict[name]..    d
-00017cb0: 6566 2070 6172 7365 5f69 6e74 6572 6163  ef parse_interac
-00017cc0: 7469 7665 2873 656c 662c 2074 6578 743a  tive(self, text:
-00017cd0: 204f 7074 696f 6e61 6c5b 7374 725d 3d4e   Optional[str]=N
-00017ce0: 6f6e 652c 2073 7461 7274 3a20 4f70 7469  one, start: Opti
-00017cf0: 6f6e 616c 5b73 7472 5d3d 4e6f 6e65 2920  onal[str]=None) 
-00017d00: 2d3e 2027 496e 7465 7261 6374 6976 6550  -> 'InteractiveP
-00017d10: 6172 7365 7227 3a0a 2020 2020 2020 2020  arser':.        
-00017d20: 232d 2d0a 2020 2020 2020 2020 7265 7475  #--.        retu
-00017d30: 726e 2073 656c 662e 7061 7273 6572 2e70  rn self.parser.p
-00017d40: 6172 7365 5f69 6e74 6572 6163 7469 7665  arse_interactive
-00017d50: 2874 6578 742c 2073 7461 7274 3d73 7461  (text, start=sta
-00017d60: 7274 290a 0a20 2020 2064 6566 2070 6172  rt)..    def par
-00017d70: 7365 2873 656c 662c 2074 6578 743a 2073  se(self, text: s
-00017d80: 7472 2c20 7374 6172 743a 204f 7074 696f  tr, start: Optio
-00017d90: 6e61 6c5b 7374 725d 3d4e 6f6e 652c 206f  nal[str]=None, o
-00017da0: 6e5f 6572 726f 723a 2027 4f70 7469 6f6e  n_error: 'Option
-00017db0: 616c 5b43 616c 6c61 626c 655b 5b55 6e65  al[Callable[[Une
-00017dc0: 7870 6563 7465 6449 6e70 7574 5d2c 2062  xpectedInput], b
-00017dd0: 6f6f 6c5d 5d27 3d4e 6f6e 6529 202d 3e20  ool]]'=None) -> 
-00017de0: 2750 6172 7365 5472 6565 273a 0a20 2020  'ParseTree':.   
-00017df0: 2020 2020 2023 2d2d 0a20 2020 2020 2020       #--.       
-00017e00: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
-00017e10: 7365 722e 7061 7273 6528 7465 7874 2c20  ser.parse(text, 
-00017e20: 7374 6172 743d 7374 6172 742c 206f 6e5f  start=start, on_
-00017e30: 6572 726f 723d 6f6e 5f65 7272 6f72 290a  error=on_error).
-00017e40: 0a0a 0a0a 636c 6173 7320 4465 6465 6e74  ....class Dedent
-00017e50: 4572 726f 7228 4c61 726b 4572 726f 7229  Error(LarkError)
-00017e60: 3a0a 2020 2020 7061 7373 0a0a 636c 6173  :.    pass..clas
-00017e70: 7320 496e 6465 6e74 6572 2850 6f73 744c  s Indenter(PostL
-00017e80: 6578 2c20 4142 4329 3a0a 2020 2020 7061  ex, ABC):.    pa
-00017e90: 7265 6e5f 6c65 7665 6c3a 2069 6e74 0a20  ren_level: int. 
-00017ea0: 2020 2069 6e64 656e 745f 6c65 7665 6c3a     indent_level:
-00017eb0: 204c 6973 745b 696e 745d 0a0a 2020 2020   List[int]..    
-00017ec0: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
-00017ed0: 6629 202d 3e20 4e6f 6e65 3a0a 2020 2020  f) -> None:.    
-00017ee0: 2020 2020 7365 6c66 2e70 6172 656e 5f6c      self.paren_l
-00017ef0: 6576 656c 203d 2030 0a20 2020 2020 2020  evel = 0.       
-00017f00: 2073 656c 662e 696e 6465 6e74 5f6c 6576   self.indent_lev
-00017f10: 656c 203d 205b 305d 0a20 2020 2020 2020  el = [0].       
-00017f20: 2061 7373 6572 7420 7365 6c66 2e74 6162   assert self.tab
-00017f30: 5f6c 656e 203e 2030 0a0a 2020 2020 6465  _len > 0..    de
-00017f40: 6620 6861 6e64 6c65 5f4e 4c28 7365 6c66  f handle_NL(self
-00017f50: 2c20 746f 6b65 6e3a 2054 6f6b 656e 2920  , token: Token) 
-00017f60: 2d3e 2049 7465 7261 746f 725b 546f 6b65  -> Iterator[Toke
-00017f70: 6e5d 3a0a 2020 2020 2020 2020 6966 2073  n]:.        if s
-00017f80: 656c 662e 7061 7265 6e5f 6c65 7665 6c20  elf.paren_level 
-00017f90: 3e20 303a 0a20 2020 2020 2020 2020 2020  > 0:.           
-00017fa0: 2072 6574 7572 6e0a 0a20 2020 2020 2020   return..       
-00017fb0: 2079 6965 6c64 2074 6f6b 656e 0a0a 2020   yield token..  
-00017fc0: 2020 2020 2020 696e 6465 6e74 5f73 7472        indent_str
-00017fd0: 203d 2074 6f6b 656e 2e72 7370 6c69 7428   = token.rsplit(
-00017fe0: 275c 6e27 2c20 3129 5b31 5d20 2323 0a0a  '\n', 1)[1] ##..
-00017ff0: 2020 2020 2020 2020 696e 6465 6e74 203d          indent =
-00018000: 2069 6e64 656e 745f 7374 722e 636f 756e   indent_str.coun
-00018010: 7428 2720 2729 202b 2069 6e64 656e 745f  t(' ') + indent_
-00018020: 7374 722e 636f 756e 7428 275c 7427 2920  str.count('\t') 
-00018030: 2a20 7365 6c66 2e74 6162 5f6c 656e 0a0a  * self.tab_len..
-00018040: 2020 2020 2020 2020 6966 2069 6e64 656e          if inden
-00018050: 7420 3e20 7365 6c66 2e69 6e64 656e 745f  t > self.indent_
-00018060: 6c65 7665 6c5b 2d31 5d3a 0a20 2020 2020  level[-1]:.     
-00018070: 2020 2020 2020 2073 656c 662e 696e 6465         self.inde
-00018080: 6e74 5f6c 6576 656c 2e61 7070 656e 6428  nt_level.append(
-00018090: 696e 6465 6e74 290a 2020 2020 2020 2020  indent).        
-000180a0: 2020 2020 7969 656c 6420 546f 6b65 6e2e      yield Token.
-000180b0: 6e65 775f 626f 7272 6f77 5f70 6f73 2873  new_borrow_pos(s
-000180c0: 656c 662e 494e 4445 4e54 5f74 7970 652c  elf.INDENT_type,
-000180d0: 2069 6e64 656e 745f 7374 722c 2074 6f6b   indent_str, tok
-000180e0: 656e 290a 2020 2020 2020 2020 656c 7365  en).        else
-000180f0: 3a0a 2020 2020 2020 2020 2020 2020 7768  :.            wh
-00018100: 696c 6520 696e 6465 6e74 203c 2073 656c  ile indent < sel
-00018110: 662e 696e 6465 6e74 5f6c 6576 656c 5b2d  f.indent_level[-
-00018120: 315d 3a0a 2020 2020 2020 2020 2020 2020  1]:.            
-00018130: 2020 2020 7365 6c66 2e69 6e64 656e 745f      self.indent_
-00018140: 6c65 7665 6c2e 706f 7028 290a 2020 2020  level.pop().    
-00018150: 2020 2020 2020 2020 2020 2020 7969 656c              yiel
-00018160: 6420 546f 6b65 6e2e 6e65 775f 626f 7272  d Token.new_borr
-00018170: 6f77 5f70 6f73 2873 656c 662e 4445 4445  ow_pos(self.DEDE
-00018180: 4e54 5f74 7970 652c 2069 6e64 656e 745f  NT_type, indent_
-00018190: 7374 722c 2074 6f6b 656e 290a 0a20 2020  str, token)..   
-000181a0: 2020 2020 2020 2020 2069 6620 696e 6465           if inde
-000181b0: 6e74 2021 3d20 7365 6c66 2e69 6e64 656e  nt != self.inden
-000181c0: 745f 6c65 7665 6c5b 2d31 5d3a 0a20 2020  t_level[-1]:.   
-000181d0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-000181e0: 7365 2044 6564 656e 7445 7272 6f72 2827  se DedentError('
-000181f0: 556e 6578 7065 6374 6564 2064 6564 656e  Unexpected deden
-00018200: 7420 746f 2063 6f6c 756d 6e20 2573 2e20  t to column %s. 
-00018210: 4578 7065 6374 6564 2064 6564 656e 7420  Expected dedent 
-00018220: 746f 2025 7327 2025 2028 696e 6465 6e74  to %s' % (indent
-00018230: 2c20 7365 6c66 2e69 6e64 656e 745f 6c65  , self.indent_le
-00018240: 7665 6c5b 2d31 5d29 290a 0a20 2020 2064  vel[-1]))..    d
-00018250: 6566 205f 7072 6f63 6573 7328 7365 6c66  ef _process(self
-00018260: 2c20 7374 7265 616d 293a 0a20 2020 2020  , stream):.     
-00018270: 2020 2066 6f72 2074 6f6b 656e 2069 6e20     for token in 
-00018280: 7374 7265 616d 3a0a 2020 2020 2020 2020  stream:.        
-00018290: 2020 2020 6966 2074 6f6b 656e 2e74 7970      if token.typ
-000182a0: 6520 3d3d 2073 656c 662e 4e4c 5f74 7970  e == self.NL_typ
-000182b0: 653a 0a20 2020 2020 2020 2020 2020 2020  e:.             
-000182c0: 2020 2079 6965 6c64 2066 726f 6d20 7365     yield from se
-000182d0: 6c66 2e68 616e 646c 655f 4e4c 2874 6f6b  lf.handle_NL(tok
-000182e0: 656e 290a 2020 2020 2020 2020 2020 2020  en).            
-000182f0: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00018300: 2020 2020 2020 7969 656c 6420 746f 6b65        yield toke
-00018310: 6e0a 0a20 2020 2020 2020 2020 2020 2069  n..            i
-00018320: 6620 746f 6b65 6e2e 7479 7065 2069 6e20  f token.type in 
-00018330: 7365 6c66 2e4f 5045 4e5f 5041 5245 4e5f  self.OPEN_PAREN_
-00018340: 7479 7065 733a 0a20 2020 2020 2020 2020  types:.         
-00018350: 2020 2020 2020 2073 656c 662e 7061 7265         self.pare
-00018360: 6e5f 6c65 7665 6c20 2b3d 2031 0a20 2020  n_level += 1.   
-00018370: 2020 2020 2020 2020 2065 6c69 6620 746f           elif to
-00018380: 6b65 6e2e 7479 7065 2069 6e20 7365 6c66  ken.type in self
-00018390: 2e43 4c4f 5345 5f50 4152 454e 5f74 7970  .CLOSE_PAREN_typ
-000183a0: 6573 3a0a 2020 2020 2020 2020 2020 2020  es:.            
-000183b0: 2020 2020 7365 6c66 2e70 6172 656e 5f6c      self.paren_l
-000183c0: 6576 656c 202d 3d20 310a 2020 2020 2020  evel -= 1.      
-000183d0: 2020 2020 2020 2020 2020 6173 7365 7274            assert
-000183e0: 2073 656c 662e 7061 7265 6e5f 6c65 7665   self.paren_leve
-000183f0: 6c20 3e3d 2030 0a0a 2020 2020 2020 2020  l >= 0..        
-00018400: 7768 696c 6520 6c65 6e28 7365 6c66 2e69  while len(self.i
-00018410: 6e64 656e 745f 6c65 7665 6c29 203e 2031  ndent_level) > 1
-00018420: 3a0a 2020 2020 2020 2020 2020 2020 7365  :.            se
-00018430: 6c66 2e69 6e64 656e 745f 6c65 7665 6c2e  lf.indent_level.
-00018440: 706f 7028 290a 2020 2020 2020 2020 2020  pop().          
-00018450: 2020 7969 656c 6420 546f 6b65 6e28 7365    yield Token(se
-00018460: 6c66 2e44 4544 454e 545f 7479 7065 2c20  lf.DEDENT_type, 
-00018470: 2727 290a 0a20 2020 2020 2020 2061 7373  '')..        ass
-00018480: 6572 7420 7365 6c66 2e69 6e64 656e 745f  ert self.indent_
-00018490: 6c65 7665 6c20 3d3d 205b 305d 2c20 7365  level == [0], se
-000184a0: 6c66 2e69 6e64 656e 745f 6c65 7665 6c0a  lf.indent_level.
-000184b0: 0a20 2020 2064 6566 2070 726f 6365 7373  .    def process
-000184c0: 2873 656c 662c 2073 7472 6561 6d29 3a0a  (self, stream):.
-000184d0: 2020 2020 2020 2020 7365 6c66 2e70 6172          self.par
-000184e0: 656e 5f6c 6576 656c 203d 2030 0a20 2020  en_level = 0.   
-000184f0: 2020 2020 2073 656c 662e 696e 6465 6e74       self.indent
-00018500: 5f6c 6576 656c 203d 205b 305d 0a20 2020  _level = [0].   
-00018510: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
-00018520: 2e5f 7072 6f63 6573 7328 7374 7265 616d  ._process(stream
-00018530: 290a 0a20 2020 2023 230a 0a20 2020 2040  )..    ##..    @
-00018540: 7072 6f70 6572 7479 0a20 2020 2064 6566  property.    def
-00018550: 2061 6c77 6179 735f 6163 6365 7074 2873   always_accept(s
-00018560: 656c 6629 3a0a 2020 2020 2020 2020 7265  elf):.        re
-00018570: 7475 726e 2028 7365 6c66 2e4e 4c5f 7479  turn (self.NL_ty
-00018580: 7065 2c29 0a0a 2020 2020 4070 726f 7065  pe,)..    @prope
-00018590: 7274 790a 2020 2020 4061 6273 7472 6163  rty.    @abstrac
-000185a0: 746d 6574 686f 640a 2020 2020 6465 6620  tmethod.    def 
-000185b0: 4e4c 5f74 7970 6528 7365 6c66 2920 2d3e  NL_type(self) ->
-000185c0: 2073 7472 3a0a 2020 2020 2020 2020 7261   str:.        ra
-000185d0: 6973 6520 4e6f 7449 6d70 6c65 6d65 6e74  ise NotImplement
-000185e0: 6564 4572 726f 7228 290a 0a20 2020 2040  edError()..    @
-000185f0: 7072 6f70 6572 7479 0a20 2020 2040 6162  property.    @ab
-00018600: 7374 7261 6374 6d65 7468 6f64 0a20 2020  stractmethod.   
-00018610: 2064 6566 204f 5045 4e5f 5041 5245 4e5f   def OPEN_PAREN_
-00018620: 7479 7065 7328 7365 6c66 2920 2d3e 204c  types(self) -> L
-00018630: 6973 745b 7374 725d 3a0a 2020 2020 2020  ist[str]:.      
-00018640: 2020 7261 6973 6520 4e6f 7449 6d70 6c65    raise NotImple
-00018650: 6d65 6e74 6564 4572 726f 7228 290a 0a20  mentedError().. 
-00018660: 2020 2040 7072 6f70 6572 7479 0a20 2020     @property.   
-00018670: 2040 6162 7374 7261 6374 6d65 7468 6f64   @abstractmethod
-00018680: 0a20 2020 2064 6566 2043 4c4f 5345 5f50  .    def CLOSE_P
-00018690: 4152 454e 5f74 7970 6573 2873 656c 6629  AREN_types(self)
-000186a0: 202d 3e20 4c69 7374 5b73 7472 5d3a 0a20   -> List[str]:. 
-000186b0: 2020 2020 2020 2072 6169 7365 204e 6f74         raise Not
-000186c0: 496d 706c 656d 656e 7465 6445 7272 6f72  ImplementedError
-000186d0: 2829 0a0a 2020 2020 4070 726f 7065 7274  ()..    @propert
-000186e0: 790a 2020 2020 4061 6273 7472 6163 746d  y.    @abstractm
-000186f0: 6574 686f 640a 2020 2020 6465 6620 494e  ethod.    def IN
-00018700: 4445 4e54 5f74 7970 6528 7365 6c66 2920  DENT_type(self) 
-00018710: 2d3e 2073 7472 3a0a 2020 2020 2020 2020  -> str:.        
-00018720: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
-00018730: 6e74 6564 4572 726f 7228 290a 0a20 2020  ntedError()..   
-00018740: 2040 7072 6f70 6572 7479 0a20 2020 2040   @property.    @
-00018750: 6162 7374 7261 6374 6d65 7468 6f64 0a20  abstractmethod. 
-00018760: 2020 2064 6566 2044 4544 454e 545f 7479     def DEDENT_ty
-00018770: 7065 2873 656c 6629 202d 3e20 7374 723a  pe(self) -> str:
-00018780: 0a20 2020 2020 2020 2072 6169 7365 204e  .        raise N
-00018790: 6f74 496d 706c 656d 656e 7465 6445 7272  otImplementedErr
-000187a0: 6f72 2829 0a0a 2020 2020 4070 726f 7065  or()..    @prope
-000187b0: 7274 790a 2020 2020 4061 6273 7472 6163  rty.    @abstrac
-000187c0: 746d 6574 686f 640a 2020 2020 6465 6620  tmethod.    def 
-000187d0: 7461 625f 6c65 6e28 7365 6c66 2920 2d3e  tab_len(self) ->
-000187e0: 2069 6e74 3a0a 2020 2020 2020 2020 7261   int:.        ra
-000187f0: 6973 6520 4e6f 7449 6d70 6c65 6d65 6e74  ise NotImplement
-00018800: 6564 4572 726f 7228 290a 0a0a 636c 6173  edError()...clas
-00018810: 7320 5079 7468 6f6e 496e 6465 6e74 6572  s PythonIndenter
-00018820: 2849 6e64 656e 7465 7229 3a0a 2020 2020  (Indenter):.    
-00018830: 4e4c 5f74 7970 6520 3d20 275f 4e45 574c  NL_type = '_NEWL
-00018840: 494e 4527 0a20 2020 204f 5045 4e5f 5041  INE'.    OPEN_PA
-00018850: 5245 4e5f 7479 7065 7320 3d20 5b27 4c50  REN_types = ['LP
-00018860: 4152 272c 2027 4c53 5142 272c 2027 4c42  AR', 'LSQB', 'LB
-00018870: 5241 4345 275d 0a20 2020 2043 4c4f 5345  RACE'].    CLOSE
-00018880: 5f50 4152 454e 5f74 7970 6573 203d 205b  _PAREN_types = [
-00018890: 2752 5041 5227 2c20 2752 5351 4227 2c20  'RPAR', 'RSQB', 
-000188a0: 2752 4252 4143 4527 5d0a 2020 2020 494e  'RBRACE'].    IN
-000188b0: 4445 4e54 5f74 7970 6520 3d20 275f 494e  DENT_type = '_IN
-000188c0: 4445 4e54 270a 2020 2020 4445 4445 4e54  DENT'.    DEDENT
-000188d0: 5f74 7970 6520 3d20 275f 4445 4445 4e54  _type = '_DEDENT
-000188e0: 270a 2020 2020 7461 625f 6c65 6e20 3d20  '.    tab_len = 
-000188f0: 380a 0a0a 696d 706f 7274 2070 6963 6b6c  8...import pickl
-00018900: 652c 207a 6c69 622c 2062 6173 6536 340a  e, zlib, base64.
-00018910: 4441 5441 203d 2028 0a7b 2770 6172 7365  DATA = (.{'parse
-00018920: 7227 3a20 7b27 6c65 7865 725f 636f 6e66  r': {'lexer_conf
-00018930: 273a 207b 2774 6572 6d69 6e61 6c73 273a  ': {'terminals':
-00018940: 205b 7b27 4027 3a20 307d 2c20 7b27 4027   [{'@': 0}, {'@'
-00018950: 3a20 317d 2c20 7b27 4027 3a20 327d 2c20  : 1}, {'@': 2}, 
-00018960: 7b27 4027 3a20 337d 2c20 7b27 4027 3a20  {'@': 3}, {'@': 
-00018970: 347d 2c20 7b27 4027 3a20 357d 2c20 7b27  4}, {'@': 5}, {'
-00018980: 4027 3a20 367d 2c20 7b27 4027 3a20 377d  @': 6}, {'@': 7}
-00018990: 2c20 7b27 4027 3a20 387d 2c20 7b27 4027  , {'@': 8}, {'@'
-000189a0: 3a20 397d 2c20 7b27 4027 3a20 3130 7d2c  : 9}, {'@': 10},
-000189b0: 207b 2740 273a 2031 317d 2c20 7b27 4027   {'@': 11}, {'@'
-000189c0: 3a20 3132 7d2c 207b 2740 273a 2031 337d  : 12}, {'@': 13}
-000189d0: 2c20 7b27 4027 3a20 3134 7d2c 207b 2740  , {'@': 14}, {'@
-000189e0: 273a 2031 357d 2c20 7b27 4027 3a20 3136  ': 15}, {'@': 16
-000189f0: 7d2c 207b 2740 273a 2031 377d 2c20 7b27  }, {'@': 17}, {'
-00018a00: 4027 3a20 3138 7d2c 207b 2740 273a 2031  @': 18}, {'@': 1
-00018a10: 397d 2c20 7b27 4027 3a20 3230 7d2c 207b  9}, {'@': 20}, {
-00018a20: 2740 273a 2032 317d 2c20 7b27 4027 3a20  '@': 21}, {'@': 
-00018a30: 3232 7d5d 2c20 2769 676e 6f72 6527 3a20  22}], 'ignore': 
-00018a40: 5b5d 2c20 2767 5f72 6567 6578 5f66 6c61  [], 'g_regex_fla
-00018a50: 6773 273a 2030 2c20 2775 7365 5f62 7974  gs': 0, 'use_byt
-00018a60: 6573 273a 2046 616c 7365 2c20 276c 6578  es': False, 'lex
-00018a70: 6572 5f74 7970 6527 3a20 2763 6f6e 7465  er_type': 'conte
-00018a80: 7874 7561 6c27 2c20 275f 5f74 7970 655f  xtual', '__type_
-00018a90: 5f27 3a20 274c 6578 6572 436f 6e66 277d  _': 'LexerConf'}
-00018aa0: 2c20 2770 6172 7365 725f 636f 6e66 273a  , 'parser_conf':
-00018ab0: 207b 2772 756c 6573 273a 205b 7b27 4027   {'rules': [{'@'
-00018ac0: 3a20 3233 7d2c 207b 2740 273a 2032 347d  : 23}, {'@': 24}
-00018ad0: 2c20 7b27 4027 3a20 3235 7d2c 207b 2740  , {'@': 25}, {'@
-00018ae0: 273a 2032 367d 2c20 7b27 4027 3a20 3237  ': 26}, {'@': 27
-00018af0: 7d2c 207b 2740 273a 2032 387d 2c20 7b27  }, {'@': 28}, {'
-00018b00: 4027 3a20 3239 7d2c 207b 2740 273a 2033  @': 29}, {'@': 3
-00018b10: 307d 2c20 7b27 4027 3a20 3331 7d2c 207b  0}, {'@': 31}, {
-00018b20: 2740 273a 2033 327d 2c20 7b27 4027 3a20  '@': 32}, {'@': 
-00018b30: 3333 7d2c 207b 2740 273a 2033 347d 2c20  33}, {'@': 34}, 
-00018b40: 7b27 4027 3a20 3335 7d2c 207b 2740 273a  {'@': 35}, {'@':
-00018b50: 2033 367d 2c20 7b27 4027 3a20 3337 7d2c   36}, {'@': 37},
-00018b60: 207b 2740 273a 2033 387d 2c20 7b27 4027   {'@': 38}, {'@'
-00018b70: 3a20 3339 7d2c 207b 2740 273a 2034 307d  : 39}, {'@': 40}
-00018b80: 2c20 7b27 4027 3a20 3431 7d2c 207b 2740  , {'@': 41}, {'@
-00018b90: 273a 2034 327d 2c20 7b27 4027 3a20 3433  ': 42}, {'@': 43
-00018ba0: 7d2c 207b 2740 273a 2034 347d 2c20 7b27  }, {'@': 44}, {'
-00018bb0: 4027 3a20 3435 7d2c 207b 2740 273a 2034  @': 45}, {'@': 4
-00018bc0: 367d 2c20 7b27 4027 3a20 3437 7d2c 207b  6}, {'@': 47}, {
-00018bd0: 2740 273a 2034 387d 2c20 7b27 4027 3a20  '@': 48}, {'@': 
-00018be0: 3439 7d2c 207b 2740 273a 2035 307d 2c20  49}, {'@': 50}, 
-00018bf0: 7b27 4027 3a20 3531 7d2c 207b 2740 273a  {'@': 51}, {'@':
-00018c00: 2035 327d 2c20 7b27 4027 3a20 3533 7d2c   52}, {'@': 53},
-00018c10: 207b 2740 273a 2035 347d 2c20 7b27 4027   {'@': 54}, {'@'
-00018c20: 3a20 3535 7d2c 207b 2740 273a 2035 367d  : 55}, {'@': 56}
-00018c30: 2c20 7b27 4027 3a20 3537 7d2c 207b 2740  , {'@': 57}, {'@
-00018c40: 273a 2035 387d 2c20 7b27 4027 3a20 3539  ': 58}, {'@': 59
-00018c50: 7d2c 207b 2740 273a 2036 307d 2c20 7b27  }, {'@': 60}, {'
-00018c60: 4027 3a20 3631 7d2c 207b 2740 273a 2036  @': 61}, {'@': 6
-00018c70: 327d 2c20 7b27 4027 3a20 3633 7d5d 2c20  2}, {'@': 63}], 
-00018c80: 2773 7461 7274 273a 205b 2773 7461 7274  'start': ['start
-00018c90: 275d 2c20 2770 6172 7365 725f 7479 7065  '], 'parser_type
-00018ca0: 273a 2027 6c61 6c72 272c 2027 5f5f 7479  ': 'lalr', '__ty
-00018cb0: 7065 5f5f 273a 2027 5061 7273 6572 436f  pe__': 'ParserCo
-00018cc0: 6e66 277d 2c20 2770 6172 7365 7227 3a20  nf'}, 'parser': 
-00018cd0: 7b27 746f 6b65 6e73 273a 207b 303a 2027  {'tokens': {0: '
-00018ce0: 4c42 5241 4345 272c 2031 3a20 274c 5041  LBRACE', 1: 'LPA
-00018cf0: 5227 2c20 323a 2027 4348 4152 272c 2033  R', 2: 'CHAR', 3
-00018d00: 3a20 274c 5351 4227 2c20 343a 2027 4f4e  : 'LSQB', 4: 'ON
-00018d10: 455f 4f52 5f4d 4f52 455f 5155 414e 5449  E_OR_MORE_QUANTI
-00018d20: 4649 4552 272c 2035 3a20 275a 4552 4f5f  FIER', 5: 'ZERO_
-00018d30: 4f52 5f4f 4e45 5f51 5541 4e54 4946 4945  OR_ONE_QUANTIFIE
-00018d40: 5227 2c20 363a 2027 5642 4152 272c 2037  R', 6: 'VBAR', 7
-00018d50: 3a20 2742 4143 4b52 4546 4552 454e 4345  : 'BACKREFERENCE
-00018d60: 272c 2038 3a20 275a 4552 4f5f 4f52 5f4d  ', 8: 'ZERO_OR_M
-00018d70: 4f52 455f 5155 414e 5449 4649 4552 272c  ORE_QUANTIFIER',
-00018d80: 2039 3a20 2743 4841 5241 4354 4552 5f43   9: 'CHARACTER_C
-00018d90: 4c41 5353 272c 2031 303a 2027 2445 4e44  LASS', 10: '$END
-00018da0: 272c 2031 313a 2027 4d41 5443 485f 414e  ', 11: 'MATCH_AN
-00018db0: 595f 4348 4152 4143 5445 5227 2c20 3132  Y_CHARACTER', 12
-00018dc0: 3a20 275f 5f41 4e4f 4e5f 3027 2c20 3133  : '__ANON_0', 13
-00018dd0: 3a20 2741 4e43 484f 5227 2c20 3134 3a20  : 'ANCHOR', 14: 
-00018de0: 2752 5041 5227 2c20 3135 3a20 2749 4e54  'RPAR', 15: 'INT
-00018df0: 4547 4552 272c 2031 363a 2027 5242 5241  EGER', 16: 'RBRA
-00018e00: 4345 272c 2031 373a 2027 6368 6172 6163  CE', 17: 'charac
-00018e10: 7465 725f 6772 6f75 7027 2c20 3138 3a20  ter_group', 18: 
-00018e20: 2763 6861 7261 6374 6572 5f63 6c61 7373  'character_class
-00018e30: 5f66 726f 6d5f 756e 6963 6f64 655f 6361  _from_unicode_ca
-00018e40: 7465 676f 7279 272c 2031 393a 2027 7375  tegory', 19: 'su
-00018e50: 6265 7870 7265 7373 696f 6e27 2c20 3230  bexpression', 20
-00018e60: 3a20 2765 7870 7265 7373 696f 6e27 2c20  : 'expression', 
-00018e70: 3231 3a20 276d 6174 6368 272c 2032 323a  21: 'match', 22:
-00018e80: 2027 6d61 7463 6869 7465 6d27 2c20 3233   'matchitem', 23
-00018e90: 3a20 276d 6174 6368 5f63 6861 7261 6374  : 'match_charact
-00018ea0: 6572 5f63 6c61 7373 272c 2032 343a 2027  er_class', 24: '
-00018eb0: 5f5f 7375 6265 7870 7265 7373 696f 6e5f  __subexpression_
-00018ec0: 706c 7573 5f30 272c 2032 353a 2027 7375  plus_0', 25: 'su
-00018ed0: 6265 7870 7265 7373 696f 6e69 7465 6d27  bexpressionitem'
-00018ee0: 2c20 3236 3a20 2753 5441 5254 5f4f 465f  , 26: 'START_OF_
-00018ef0: 5354 5249 4e47 5f41 4e43 484f 5227 2c20  STRING_ANCHOR', 
-00018f00: 3237 3a20 2767 726f 7570 272c 2032 383a  27: 'group', 28:
-00018f10: 2027 7374 6172 7427 2c20 3239 3a20 2772   'start', 29: 'r
-00018f20: 6570 6574 6974 696f 6e5f 7479 7065 272c  epetition_type',
-00018f30: 2033 303a 2027 7261 6e67 6527 2c20 3331   30: 'range', 31
-00018f40: 3a20 2772 6570 6574 6974 696f 6e27 2c20  : 'repetition', 
-00018f50: 3332 3a20 2763 6861 7261 6374 6572 5f67  32: 'character_g
-00018f60: 726f 7570 5f69 7465 6d27 2c20 3333 3a20  roup_item', 33: 
-00018f70: 275f 5f63 6861 7261 6374 6572 5f67 726f  '__character_gro
-00018f80: 7570 5f70 6c75 735f 3127 2c20 3334 3a20  up_plus_1', 34: 
-00018f90: 2763 6861 7261 6374 6572 5f72 616e 6765  'character_range
-00018fa0: 272c 2033 353a 2027 4348 4152 4143 5445  ', 35: 'CHARACTE
-00018fb0: 525f 4752 4f55 505f 4e45 4741 5449 5645  R_GROUP_NEGATIVE
-00018fc0: 5f4d 4f44 4946 4945 5227 2c20 3336 3a20  _MODIFIER', 36: 
-00018fd0: 274c 4554 5445 5253 272c 2033 373a 2027  'LETTERS', 37: '
-00018fe0: 4752 4f55 505f 4e4f 4e5f 4341 5054 5552  GROUP_NON_CAPTUR
-00018ff0: 494e 475f 4d4f 4449 4649 4552 272c 2033  ING_MODIFIER', 3
-00019000: 383a 2027 5253 5142 272c 2033 393a 2027  8: 'RSQB', 39: '
-00019010: 434f 4d4d 4127 2c20 3430 3a20 274d 494e  COMMA', 40: 'MIN
-00019020: 5553 277d 2c20 2773 7461 7465 7327 3a20  US'}, 'states': 
-00019030: 7b30 3a20 7b30 3a20 2831 2c20 7b27 4027  {0: {0: (1, {'@'
-00019040: 3a20 3431 7d29 2c20 313a 2028 312c 207b  : 41}), 1: (1, {
-00019050: 2740 273a 2034 317d 292c 2032 3a20 2831  '@': 41}), 2: (1
-00019060: 2c20 7b27 4027 3a20 3431 7d29 2c20 333a  , {'@': 41}), 3:
-00019070: 2028 312c 207b 2740 273a 2034 317d 292c   (1, {'@': 41}),
-00019080: 2034 3a20 2831 2c20 7b27 4027 3a20 3431   4: (1, {'@': 41
-00019090: 7d29 2c20 353a 2028 312c 207b 2740 273a  }), 5: (1, {'@':
-000190a0: 2034 317d 292c 2036 3a20 2831 2c20 7b27   41}), 6: (1, {'
-000190b0: 4027 3a20 3431 7d29 2c20 373a 2028 312c  @': 41}), 7: (1,
-000190c0: 207b 2740 273a 2034 317d 292c 2038 3a20   {'@': 41}), 8: 
-000190d0: 2831 2c20 7b27 4027 3a20 3431 7d29 2c20  (1, {'@': 41}), 
-000190e0: 393a 2028 312c 207b 2740 273a 2034 317d  9: (1, {'@': 41}
-000190f0: 292c 2031 303a 2028 312c 207b 2740 273a  ), 10: (1, {'@':
-00019100: 2034 317d 292c 2031 313a 2028 312c 207b   41}), 11: (1, {
-00019110: 2740 273a 2034 317d 292c 2031 323a 2028  '@': 41}), 12: (
-00019120: 312c 207b 2740 273a 2034 317d 292c 2031  1, {'@': 41}), 1
-00019130: 333a 2028 312c 207b 2740 273a 2034 317d  3: (1, {'@': 41}
-00019140: 292c 2031 343a 2028 312c 207b 2740 273a  ), 14: (1, {'@':
-00019150: 2034 317d 297d 2c20 313a 207b 3130 3a20   41})}, 1: {10: 
-00019160: 2831 2c20 7b27 4027 3a20 3233 7d29 7d2c  (1, {'@': 23})},
-00019170: 2032 3a20 7b31 323a 2028 312c 207b 2740   2: {12: (1, {'@
-00019180: 273a 2035 377d 292c 2031 3a20 2831 2c20  ': 57}), 1: (1, 
-00019190: 7b27 4027 3a20 3537 7d29 2c20 323a 2028  {'@': 57}), 2: (
-000191a0: 312c 207b 2740 273a 2035 377d 292c 2036  1, {'@': 57}), 6
-000191b0: 3a20 2831 2c20 7b27 4027 3a20 3537 7d29  : (1, {'@': 57})
-000191c0: 2c20 333a 2028 312c 207b 2740 273a 2035  , 3: (1, {'@': 5
-000191d0: 377d 292c 2031 303a 2028 312c 207b 2740  7}), 10: (1, {'@
-000191e0: 273a 2035 377d 292c 2037 3a20 2831 2c20  ': 57}), 7: (1, 
-000191f0: 7b27 4027 3a20 3537 7d29 2c20 3134 3a20  {'@': 57}), 14: 
-00019200: 2831 2c20 7b27 4027 3a20 3537 7d29 2c20  (1, {'@': 57}), 
-00019210: 3131 3a20 2831 2c20 7b27 4027 3a20 3537  11: (1, {'@': 57
-00019220: 7d29 2c20 393a 2028 312c 207b 2740 273a  }), 9: (1, {'@':
-00019230: 2035 377d 292c 2031 333a 2028 312c 207b   57}), 13: (1, {
-00019240: 2740 273a 2035 377d 297d 2c20 333a 207b  '@': 57})}, 3: {
-00019250: 3135 3a20 2830 2c20 3530 292c 2031 363a  15: (0, 50), 16:
-00019260: 2028 302c 2034 3229 7d2c 2034 3a20 7b31   (0, 42)}, 4: {1
-00019270: 373a 2028 302c 2030 292c 2031 383a 2028  7: (0, 0), 18: (
-00019280: 302c 2036 292c 2037 3a20 2830 2c20 3529  0, 6), 7: (0, 5)
-00019290: 2c20 3139 3a20 2830 2c20 3238 292c 2032  , 19: (0, 28), 2
-000192a0: 303a 2028 302c 2035 3129 2c20 3231 3a20  0: (0, 51), 21: 
-000192b0: 2830 2c20 3829 2c20 313a 2028 302c 2033  (0, 8), 1: (0, 3
-000192c0: 3629 2c20 3232 3a20 2830 2c20 3239 292c  6), 22: (0, 29),
-000192d0: 2032 3a20 2830 2c20 3331 292c 2039 3a20   2: (0, 31), 9: 
-000192e0: 2830 2c20 3136 292c 2033 3a20 2830 2c20  (0, 16), 3: (0, 
-000192f0: 3233 292c 2032 333a 2028 302c 2033 3029  23), 23: (0, 30)
-00019300: 2c20 3133 3a20 2830 2c20 3532 292c 2032  , 13: (0, 52), 2
-00019310: 343a 2028 302c 2031 3729 2c20 3235 3a20  4: (0, 17), 25: 
-00019320: 2830 2c20 3538 292c 2032 363a 2028 302c  (0, 58), 26: (0,
-00019330: 2031 3029 2c20 3237 3a20 2830 2c20 3437   10), 27: (0, 47
-00019340: 292c 2032 383a 2028 302c 2031 3829 2c20  ), 28: (0, 18), 
-00019350: 3131 3a20 2830 2c20 3132 292c 2031 323a  11: (0, 12), 12:
-00019360: 2028 302c 2033 3229 7d2c 2035 3a20 7b31   (0, 32)}, 5: {1
-00019370: 323a 2028 312c 207b 2740 273a 2033 317d  2: (1, {'@': 31}
-00019380: 292c 2031 3a20 2831 2c20 7b27 4027 3a20  ), 1: (1, {'@': 
-00019390: 3331 7d29 2c20 323a 2028 312c 207b 2740  31}), 2: (1, {'@
-000193a0: 273a 2033 317d 292c 2033 3a20 2831 2c20  ': 31}), 3: (1, 
-000193b0: 7b27 4027 3a20 3331 7d29 2c20 363a 2028  {'@': 31}), 6: (
-000193c0: 312c 207b 2740 273a 2033 317d 292c 2037  1, {'@': 31}), 7
-000193d0: 3a20 2831 2c20 7b27 4027 3a20 3331 7d29  : (1, {'@': 31})
-000193e0: 2c20 3130 3a20 2831 2c20 7b27 4027 3a20  , 10: (1, {'@': 
-000193f0: 3331 7d29 2c20 3131 3a20 2831 2c20 7b27  31}), 11: (1, {'
-00019400: 4027 3a20 3331 7d29 2c20 393a 2028 312c  @': 31}), 9: (1,
-00019410: 207b 2740 273a 2033 317d 292c 2031 333a   {'@': 31}), 13:
-00019420: 2028 312c 207b 2740 273a 2033 317d 292c   (1, {'@': 31}),
-00019430: 2031 343a 2028 312c 207b 2740 273a 2033   14: (1, {'@': 3
-00019440: 317d 297d 2c20 363a 207b 303a 2028 312c  1})}, 6: {0: (1,
-00019450: 207b 2740 273a 2034 337d 292c 2031 3a20   {'@': 43}), 1: 
-00019460: 2831 2c20 7b27 4027 3a20 3433 7d29 2c20  (1, {'@': 43}), 
-00019470: 323a 2028 312c 207b 2740 273a 2034 337d  2: (1, {'@': 43}
-00019480: 292c 2033 3a20 2831 2c20 7b27 4027 3a20  ), 3: (1, {'@': 
-00019490: 3433 7d29 2c20 343a 2028 312c 207b 2740  43}), 4: (1, {'@
-000194a0: 273a 2034 337d 292c 2035 3a20 2831 2c20  ': 43}), 5: (1, 
-000194b0: 7b27 4027 3a20 3433 7d29 2c20 363a 2028  {'@': 43}), 6: (
-000194c0: 312c 207b 2740 273a 2034 337d 292c 2037  1, {'@': 43}), 7
-000194d0: 3a20 2831 2c20 7b27 4027 3a20 3433 7d29  : (1, {'@': 43})
-000194e0: 2c20 383a 2028 312c 207b 2740 273a 2034  , 8: (1, {'@': 4
-000194f0: 337d 292c 2039 3a20 2831 2c20 7b27 4027  3}), 9: (1, {'@'
-00019500: 3a20 3433 7d29 2c20 3130 3a20 2831 2c20  : 43}), 10: (1, 
-00019510: 7b27 4027 3a20 3433 7d29 2c20 3131 3a20  {'@': 43}), 11: 
-00019520: 2831 2c20 7b27 4027 3a20 3433 7d29 2c20  (1, {'@': 43}), 
-00019530: 3132 3a20 2831 2c20 7b27 4027 3a20 3433  12: (1, {'@': 43
-00019540: 7d29 2c20 3133 3a20 2831 2c20 7b27 4027  }), 13: (1, {'@'
-00019550: 3a20 3433 7d29 2c20 3134 3a20 2831 2c20  : 43}), 14: (1, 
-00019560: 7b27 4027 3a20 3433 7d29 7d2c 2037 3a20  {'@': 43})}, 7: 
-00019570: 7b31 373a 2028 302c 2030 292c 2031 383a  {17: (0, 0), 18:
-00019580: 2028 302c 2036 292c 2037 3a20 2830 2c20   (0, 6), 7: (0, 
-00019590: 3529 2c20 3139 3a20 2830 2c20 3238 292c  5), 19: (0, 28),
-000195a0: 2032 313a 2028 302c 2038 292c 2031 3a20   21: (0, 8), 1: 
-000195b0: 2830 2c20 3336 292c 2032 323a 2028 302c  (0, 36), 22: (0,
-000195c0: 2032 3929 2c20 323a 2028 302c 2033 3129   29), 2: (0, 31)
-000195d0: 2c20 393a 2028 302c 2031 3629 2c20 333a  , 9: (0, 16), 3:
-000195e0: 2028 302c 2032 3329 2c20 3233 3a20 2830   (0, 23), 23: (0
-000195f0: 2c20 3330 292c 2031 333a 2028 302c 2035  , 30), 13: (0, 5
-00019600: 3229 2c20 3234 3a20 2830 2c20 3137 292c  2), 24: (0, 17),
-00019610: 2032 353a 2028 302c 2035 3829 2c20 3237   25: (0, 58), 27
-00019620: 3a20 2830 2c20 3437 292c 2031 323a 2028  : (0, 47), 12: (
-00019630: 302c 2033 3229 2c20 3230 3a20 2830 2c20  0, 32), 20: (0, 
-00019640: 3537 292c 2031 313a 2028 302c 2031 3229  57), 11: (0, 12)
-00019650: 7d2c 2038 3a20 7b31 323a 2028 312c 207b  }, 8: {12: (1, {
-00019660: 2740 273a 2032 387d 292c 2031 3a20 2831  '@': 28}), 1: (1
-00019670: 2c20 7b27 4027 3a20 3238 7d29 2c20 323a  , {'@': 28}), 2:
-00019680: 2028 312c 207b 2740 273a 2032 387d 292c   (1, {'@': 28}),
-00019690: 2033 3a20 2831 2c20 7b27 4027 3a20 3238   3: (1, {'@': 28
-000196a0: 7d29 2c20 363a 2028 312c 207b 2740 273a  }), 6: (1, {'@':
-000196b0: 2032 387d 292c 2037 3a20 2831 2c20 7b27   28}), 7: (1, {'
-000196c0: 4027 3a20 3238 7d29 2c20 3130 3a20 2831  @': 28}), 10: (1
-000196d0: 2c20 7b27 4027 3a20 3238 7d29 2c20 3131  , {'@': 28}), 11
-000196e0: 3a20 2831 2c20 7b27 4027 3a20 3238 7d29  : (1, {'@': 28})
-000196f0: 2c20 393a 2028 312c 207b 2740 273a 2032  , 9: (1, {'@': 2
-00019700: 387d 292c 2031 333a 2028 312c 207b 2740  8}), 13: (1, {'@
-00019710: 273a 2032 387d 292c 2031 343a 2028 312c  ': 28}), 14: (1,
-00019720: 207b 2740 273a 2032 387d 297d 2c20 393a   {'@': 28})}, 9:
-00019730: 207b 3130 3a20 2831 2c20 7b27 4027 3a20   {10: (1, {'@': 
-00019740: 3235 7d29 2c20 3134 3a20 2831 2c20 7b27  25}), 14: (1, {'
-00019750: 4027 3a20 3235 7d29 7d2c 2031 303a 207b  @': 25})}, 10: {
-00019760: 3137 3a20 2830 2c20 3029 2c20 3138 3a20  17: (0, 0), 18: 
-00019770: 2830 2c20 3629 2c20 373a 2028 302c 2035  (0, 6), 7: (0, 5
-00019780: 292c 2031 393a 2028 302c 2032 3829 2c20  ), 19: (0, 28), 
-00019790: 3231 3a20 2830 2c20 3829 2c20 313a 2028  21: (0, 8), 1: (
-000197a0: 302c 2033 3629 2c20 3232 3a20 2830 2c20  0, 36), 22: (0, 
-000197b0: 3239 292c 2032 3a20 2830 2c20 3331 292c  29), 2: (0, 31),
-000197c0: 2039 3a20 2830 2c20 3136 292c 2033 3a20   9: (0, 16), 3: 
-000197d0: 2830 2c20 3233 292c 2032 333a 2028 302c  (0, 23), 23: (0,
-000197e0: 2033 3029 2c20 3133 3a20 2830 2c20 3532   30), 13: (0, 52
-000197f0: 292c 2032 343a 2028 302c 2031 3729 2c20  ), 24: (0, 17), 
-00019800: 3235 3a20 2830 2c20 3538 292c 2032 373a  25: (0, 58), 27:
-00019810: 2028 302c 2034 3729 2c20 3131 3a20 2830   (0, 47), 11: (0
-00019820: 2c20 3132 292c 2032 303a 2028 302c 2031  , 12), 20: (0, 1
-00019830: 292c 2031 323a 2028 302c 2033 3229 7d2c  ), 12: (0, 32)},
-00019840: 2031 313a 207b 303a 2028 302c 2032 3229   11: {0: (0, 22)
-00019850: 2c20 3239 3a20 2830 2c20 3333 292c 2038  , 29: (0, 33), 8
-00019860: 3a20 2830 2c20 3234 292c 2034 3a20 2830  : (0, 24), 4: (0
-00019870: 2c20 3134 292c 2033 303a 2028 302c 2032  , 14), 30: (0, 2
-00019880: 3529 2c20 353a 2028 302c 2033 3429 2c20  5), 5: (0, 34), 
-00019890: 3331 3a20 2830 2c20 3438 292c 2031 323a  31: (0, 48), 12:
-000198a0: 2028 312c 207b 2740 273a 2033 337d 292c   (1, {'@': 33}),
-000198b0: 2031 3a20 2831 2c20 7b27 4027 3a20 3333   1: (1, {'@': 33
-000198c0: 7d29 2c20 323a 2028 312c 207b 2740 273a  }), 2: (1, {'@':
-000198d0: 2033 337d 292c 2033 3a20 2831 2c20 7b27   33}), 3: (1, {'
-000198e0: 4027 3a20 3333 7d29 2c20 363a 2028 312c  @': 33}), 6: (1,
-000198f0: 207b 2740 273a 2033 337d 292c 2037 3a20   {'@': 33}), 7: 
-00019900: 2831 2c20 7b27 4027 3a20 3333 7d29 2c20  (1, {'@': 33}), 
-00019910: 3130 3a20 2831 2c20 7b27 4027 3a20 3333  10: (1, {'@': 33
-00019920: 7d29 2c20 3131 3a20 2831 2c20 7b27 4027  }), 11: (1, {'@'
-00019930: 3a20 3333 7d29 2c20 393a 2028 312c 207b  : 33}), 9: (1, {
-00019940: 2740 273a 2033 337d 292c 2031 333a 2028  '@': 33}), 13: (
-00019950: 312c 207b 2740 273a 2033 337d 292c 2031  1, {'@': 33}), 1
-00019960: 343a 2028 312c 207b 2740 273a 2033 337d  4: (1, {'@': 33}
-00019970: 297d 2c20 3132 3a20 7b30 3a20 2831 2c20  )}, 12: {0: (1, 
-00019980: 7b27 4027 3a20 3338 7d29 2c20 313a 2028  {'@': 38}), 1: (
-00019990: 312c 207b 2740 273a 2033 387d 292c 2032  1, {'@': 38}), 2
-000199a0: 3a20 2831 2c20 7b27 4027 3a20 3338 7d29  : (1, {'@': 38})
-000199b0: 2c20 333a 2028 312c 207b 2740 273a 2033  , 3: (1, {'@': 3
-000199c0: 387d 292c 2034 3a20 2831 2c20 7b27 4027  8}), 4: (1, {'@'
-000199d0: 3a20 3338 7d29 2c20 353a 2028 312c 207b  : 38}), 5: (1, {
-000199e0: 2740 273a 2033 387d 292c 2036 3a20 2831  '@': 38}), 6: (1
-000199f0: 2c20 7b27 4027 3a20 3338 7d29 2c20 373a  , {'@': 38}), 7:
-00019a00: 2028 312c 207b 2740 273a 2033 387d 292c   (1, {'@': 38}),
-00019a10: 2038 3a20 2831 2c20 7b27 4027 3a20 3338   8: (1, {'@': 38
-00019a20: 7d29 2c20 393a 2028 312c 207b 2740 273a  }), 9: (1, {'@':
-00019a30: 2033 387d 292c 2031 303a 2028 312c 207b   38}), 10: (1, {
-00019a40: 2740 273a 2033 387d 292c 2031 313a 2028  '@': 38}), 11: (
-00019a50: 312c 207b 2740 273a 2033 387d 292c 2031  1, {'@': 38}), 1
-00019a60: 323a 2028 312c 207b 2740 273a 2033 387d  2: (1, {'@': 38}
-00019a70: 292c 2031 333a 2028 312c 207b 2740 273a  ), 13: (1, {'@':
-00019a80: 2033 387d 292c 2031 343a 2028 312c 207b   38}), 14: (1, {
-00019a90: 2740 273a 2033 387d 297d 2c20 3133 3a20  '@': 38})}, 13: 
-00019aa0: 7b31 373a 2028 302c 2030 292c 2031 383a  {17: (0, 0), 18:
-00019ab0: 2028 302c 2036 292c 2037 3a20 2830 2c20   (0, 6), 7: (0, 
-00019ac0: 3529 2c20 3139 3a20 2830 2c20 3238 292c  5), 19: (0, 28),
-00019ad0: 2032 313a 2028 302c 2038 292c 2031 3a20   21: (0, 8), 1: 
-00019ae0: 2830 2c20 3336 292c 2032 323a 2028 302c  (0, 36), 22: (0,
-00019af0: 2032 3929 2c20 323a 2028 302c 2033 3129   29), 2: (0, 31)
-00019b00: 2c20 393a 2028 302c 2031 3629 2c20 333a  , 9: (0, 16), 3:
-00019b10: 2028 302c 2032 3329 2c20 3233 3a20 2830   (0, 23), 23: (0
-00019b20: 2c20 3330 292c 2031 333a 2028 302c 2035  , 30), 13: (0, 5
-00019b30: 3229 2c20 3234 3a20 2830 2c20 3137 292c  2), 24: (0, 17),
-00019b40: 2032 353a 2028 302c 2035 3829 2c20 3237   25: (0, 58), 27
-00019b50: 3a20 2830 2c20 3437 292c 2031 313a 2028  : (0, 47), 11: (
-00019b60: 302c 2031 3229 2c20 3132 3a20 2830 2c20  0, 12), 12: (0, 
-00019b70: 3332 292c 2032 303a 2028 302c 2039 297d  32), 20: (0, 9)}
-00019b80: 2c20 3134 3a20 7b31 323a 2028 312c 207b  , 14: {12: (1, {
-00019b90: 2740 273a 2035 347d 292c 2031 3a20 2831  '@': 54}), 1: (1
-00019ba0: 2c20 7b27 4027 3a20 3534 7d29 2c20 323a  , {'@': 54}), 2:
-00019bb0: 2028 312c 207b 2740 273a 2035 347d 292c   (1, {'@': 54}),
-00019bc0: 2036 3a20 2831 2c20 7b27 4027 3a20 3534   6: (1, {'@': 54
-00019bd0: 7d29 2c20 333a 2028 312c 207b 2740 273a  }), 3: (1, {'@':
-00019be0: 2035 347d 292c 2031 303a 2028 312c 207b   54}), 10: (1, {
-00019bf0: 2740 273a 2035 347d 292c 2037 3a20 2831  '@': 54}), 7: (1
-00019c00: 2c20 7b27 4027 3a20 3534 7d29 2c20 3134  , {'@': 54}), 14
-00019c10: 3a20 2831 2c20 7b27 4027 3a20 3534 7d29  : (1, {'@': 54})
-00019c20: 2c20 3131 3a20 2831 2c20 7b27 4027 3a20  , 11: (1, {'@': 
-00019c30: 3534 7d29 2c20 393a 2028 312c 207b 2740  54}), 9: (1, {'@
-00019c40: 273a 2035 347d 292c 2031 333a 2028 312c  ': 54}), 13: (1,
-00019c50: 207b 2740 273a 2035 347d 297d 2c20 3135   {'@': 54})}, 15
-00019c60: 3a20 7b31 323a 2028 312c 207b 2740 273a  : {12: (1, {'@':
-00019c70: 2033 347d 292c 2031 3a20 2831 2c20 7b27   34}), 1: (1, {'
-00019c80: 4027 3a20 3334 7d29 2c20 323a 2028 312c  @': 34}), 2: (1,
-00019c90: 207b 2740 273a 2033 347d 292c 2033 3a20   {'@': 34}), 3: 
-00019ca0: 2831 2c20 7b27 4027 3a20 3334 7d29 2c20  (1, {'@': 34}), 
-00019cb0: 363a 2028 312c 207b 2740 273a 2033 347d  6: (1, {'@': 34}
-00019cc0: 292c 2037 3a20 2831 2c20 7b27 4027 3a20  ), 7: (1, {'@': 
-00019cd0: 3334 7d29 2c20 3130 3a20 2831 2c20 7b27  34}), 10: (1, {'
-00019ce0: 4027 3a20 3334 7d29 2c20 3131 3a20 2831  @': 34}), 11: (1
-00019cf0: 2c20 7b27 4027 3a20 3334 7d29 2c20 393a  , {'@': 34}), 9:
-00019d00: 2028 312c 207b 2740 273a 2033 347d 292c   (1, {'@': 34}),
-00019d10: 2031 333a 2028 312c 207b 2740 273a 2033   13: (1, {'@': 3
-00019d20: 347d 292c 2031 343a 2028 312c 207b 2740  4}), 14: (1, {'@
-00019d30: 273a 2033 347d 297d 2c20 3136 3a20 7b30  ': 34})}, 16: {0
-00019d40: 3a20 2831 2c20 7b27 4027 3a20 3432 7d29  : (1, {'@': 42})
-00019d50: 2c20 313a 2028 312c 207b 2740 273a 2034  , 1: (1, {'@': 4
-00019d60: 327d 292c 2032 3a20 2831 2c20 7b27 4027  2}), 2: (1, {'@'
-00019d70: 3a20 3432 7d29 2c20 333a 2028 312c 207b  : 42}), 3: (1, {
-00019d80: 2740 273a 2034 327d 292c 2034 3a20 2831  '@': 42}), 4: (1
-00019d90: 2c20 7b27 4027 3a20 3432 7d29 2c20 353a  , {'@': 42}), 5:
-00019da0: 2028 312c 207b 2740 273a 2034 327d 292c   (1, {'@': 42}),
-00019db0: 2036 3a20 2831 2c20 7b27 4027 3a20 3432   6: (1, {'@': 42
-00019dc0: 7d29 2c20 373a 2028 312c 207b 2740 273a  }), 7: (1, {'@':
-00019dd0: 2034 327d 292c 2038 3a20 2831 2c20 7b27   42}), 8: (1, {'
-00019de0: 4027 3a20 3432 7d29 2c20 393a 2028 312c  @': 42}), 9: (1,
-00019df0: 207b 2740 273a 2034 327d 292c 2031 303a   {'@': 42}), 10:
-00019e00: 2028 312c 207b 2740 273a 2034 327d 292c   (1, {'@': 42}),
-00019e10: 2031 313a 2028 312c 207b 2740 273a 2034   11: (1, {'@': 4
-00019e20: 327d 292c 2031 323a 2028 312c 207b 2740  2}), 12: (1, {'@
-00019e30: 273a 2034 327d 292c 2031 333a 2028 312c  ': 42}), 13: (1,
-00019e40: 207b 2740 273a 2034 327d 292c 2031 343a   {'@': 42}), 14:
-00019e50: 2028 312c 207b 2740 273a 2034 327d 297d   (1, {'@': 42})}
-00019e60: 2c20 3137 3a20 7b31 373a 2028 302c 2030  , 17: {17: (0, 0
-00019e70: 292c 2031 383a 2028 302c 2036 292c 2037  ), 18: (0, 6), 7
-00019e80: 3a20 2830 2c20 3529 2c20 3231 3a20 2830  : (0, 5), 21: (0
-00019e90: 2c20 3829 2c20 313a 2028 302c 2033 3629  , 8), 1: (0, 36)
-00019ea0: 2c20 3232 3a20 2830 2c20 3239 292c 2032  , 22: (0, 29), 2
-00019eb0: 3a20 2830 2c20 3331 292c 2039 3a20 2830  : (0, 31), 9: (0
-00019ec0: 2c20 3136 292c 2033 3a20 2830 2c20 3233  , 16), 3: (0, 23
-00019ed0: 292c 2032 333a 2028 302c 2033 3029 2c20  ), 23: (0, 30), 
-00019ee0: 3133 3a20 2830 2c20 3532 292c 2032 373a  13: (0, 52), 27:
-00019ef0: 2028 302c 2034 3729 2c20 3131 3a20 2830   (0, 47), 11: (0
-00019f00: 2c20 3132 292c 2032 353a 2028 302c 2035  , 12), 25: (0, 5
-00019f10: 3629 2c20 3132 3a20 2830 2c20 3332 292c  6), 12: (0, 32),
-00019f20: 2031 303a 2028 312c 207b 2740 273a 2032   10: (1, {'@': 2
-00019f30: 377d 292c 2036 3a20 2831 2c20 7b27 4027  7}), 6: (1, {'@'
-00019f40: 3a20 3237 7d29 2c20 3134 3a20 2831 2c20  : 27}), 14: (1, 
-00019f50: 7b27 4027 3a20 3237 7d29 7d2c 2031 383a  {'@': 27})}, 18:
-00019f60: 207b 7d2c 2031 393a 207b 3132 3a20 2831   {}, 19: {12: (1
-00019f70: 2c20 7b27 4027 3a20 3336 7d29 2c20 313a  , {'@': 36}), 1:
-00019f80: 2028 312c 207b 2740 273a 2033 367d 292c   (1, {'@': 36}),
-00019f90: 2032 3a20 2831 2c20 7b27 4027 3a20 3336   2: (1, {'@': 36
-00019fa0: 7d29 2c20 333a 2028 312c 207b 2740 273a  }), 3: (1, {'@':
-00019fb0: 2033 367d 292c 2036 3a20 2831 2c20 7b27   36}), 6: (1, {'
-00019fc0: 4027 3a20 3336 7d29 2c20 373a 2028 312c  @': 36}), 7: (1,
-00019fd0: 207b 2740 273a 2033 367d 292c 2031 303a   {'@': 36}), 10:
-00019fe0: 2028 312c 207b 2740 273a 2033 367d 292c   (1, {'@': 36}),
-00019ff0: 2031 313a 2028 312c 207b 2740 273a 2033   11: (1, {'@': 3
-0001a000: 367d 292c 2039 3a20 2831 2c20 7b27 4027  6}), 9: (1, {'@'
-0001a010: 3a20 3336 7d29 2c20 3133 3a20 2831 2c20  : 36}), 13: (1, 
-0001a020: 7b27 4027 3a20 3336 7d29 2c20 3134 3a20  {'@': 36}), 14: 
-0001a030: 2831 2c20 7b27 4027 3a20 3336 7d29 7d2c  (1, {'@': 36})},
-0001a040: 2032 303a 207b 303a 2028 312c 207b 2740   20: {0: (1, {'@
-0001a050: 273a 2034 357d 292c 2031 3a20 2831 2c20  ': 45}), 1: (1, 
-0001a060: 7b27 4027 3a20 3435 7d29 2c20 323a 2028  {'@': 45}), 2: (
-0001a070: 312c 207b 2740 273a 2034 357d 292c 2033  1, {'@': 45}), 3
-0001a080: 3a20 2831 2c20 7b27 4027 3a20 3435 7d29  : (1, {'@': 45})
-0001a090: 2c20 343a 2028 312c 207b 2740 273a 2034  , 4: (1, {'@': 4
-0001a0a0: 357d 292c 2035 3a20 2831 2c20 7b27 4027  5}), 5: (1, {'@'
-0001a0b0: 3a20 3435 7d29 2c20 363a 2028 312c 207b  : 45}), 6: (1, {
-0001a0c0: 2740 273a 2034 357d 292c 2037 3a20 2831  '@': 45}), 7: (1
-0001a0d0: 2c20 7b27 4027 3a20 3435 7d29 2c20 383a  , {'@': 45}), 8:
-0001a0e0: 2028 312c 207b 2740 273a 2034 357d 292c   (1, {'@': 45}),
-0001a0f0: 2039 3a20 2831 2c20 7b27 4027 3a20 3435   9: (1, {'@': 45
-0001a100: 7d29 2c20 3130 3a20 2831 2c20 7b27 4027  }), 10: (1, {'@'
-0001a110: 3a20 3435 7d29 2c20 3131 3a20 2831 2c20  : 45}), 11: (1, 
-0001a120: 7b27 4027 3a20 3435 7d29 2c20 3132 3a20  {'@': 45}), 12: 
-0001a130: 2831 2c20 7b27 4027 3a20 3435 7d29 2c20  (1, {'@': 45}), 
-0001a140: 3133 3a20 2831 2c20 7b27 4027 3a20 3435  13: (1, {'@': 45
-0001a150: 7d29 2c20 3134 3a20 2831 2c20 7b27 4027  }), 14: (1, {'@'
-0001a160: 3a20 3435 7d29 7d2c 2032 313a 207b 3132  : 45})}, 21: {12
-0001a170: 3a20 2831 2c20 7b27 4027 3a20 3539 7d29  : (1, {'@': 59})
-0001a180: 2c20 313a 2028 312c 207b 2740 273a 2035  , 1: (1, {'@': 5
-0001a190: 397d 292c 2032 3a20 2831 2c20 7b27 4027  9}), 2: (1, {'@'
-0001a1a0: 3a20 3539 7d29 2c20 363a 2028 312c 207b  : 59}), 6: (1, {
-0001a1b0: 2740 273a 2035 397d 292c 2033 3a20 2831  '@': 59}), 3: (1
-0001a1c0: 2c20 7b27 4027 3a20 3539 7d29 2c20 3130  , {'@': 59}), 10
-0001a1d0: 3a20 2831 2c20 7b27 4027 3a20 3539 7d29  : (1, {'@': 59})
-0001a1e0: 2c20 373a 2028 312c 207b 2740 273a 2035  , 7: (1, {'@': 5
-0001a1f0: 397d 292c 2031 343a 2028 312c 207b 2740  9}), 14: (1, {'@
-0001a200: 273a 2035 397d 292c 2031 313a 2028 312c  ': 59}), 11: (1,
-0001a210: 207b 2740 273a 2035 397d 292c 2039 3a20   {'@': 59}), 9: 
-0001a220: 2831 2c20 7b27 4027 3a20 3539 7d29 2c20  (1, {'@': 59}), 
-0001a230: 3133 3a20 2831 2c20 7b27 4027 3a20 3539  13: (1, {'@': 59
-0001a240: 7d29 7d2c 2032 323a 207b 3135 3a20 2830  })}, 22: {15: (0
-0001a250: 2c20 3436 297d 2c20 3233 3a20 7b31 383a  , 46)}, 23: {18:
-0001a260: 2028 302c 2034 3029 2c20 3332 3a20 2830   (0, 40), 32: (0
-0001a270: 2c20 3439 292c 2033 333a 2028 302c 2034  , 49), 33: (0, 4
-0001a280: 3329 2c20 323a 2028 302c 2035 3529 2c20  3), 2: (0, 55), 
-0001a290: 3334 3a20 2830 2c20 3539 292c 2033 353a  34: (0, 59), 35:
-0001a2a0: 2028 302c 2032 3629 2c20 393a 2028 302c   (0, 26), 9: (0,
-0001a2b0: 2033 3729 2c20 3132 3a20 2830 2c20 3332   37), 12: (0, 32
-0001a2c0: 297d 2c20 3234 3a20 7b31 323a 2028 312c  )}, 24: {12: (1,
-0001a2d0: 207b 2740 273a 2035 337d 292c 2031 3a20   {'@': 53}), 1: 
-0001a2e0: 2831 2c20 7b27 4027 3a20 3533 7d29 2c20  (1, {'@': 53}), 
-0001a2f0: 323a 2028 312c 207b 2740 273a 2035 337d  2: (1, {'@': 53}
-0001a300: 292c 2036 3a20 2831 2c20 7b27 4027 3a20  ), 6: (1, {'@': 
-0001a310: 3533 7d29 2c20 333a 2028 312c 207b 2740  53}), 3: (1, {'@
-0001a320: 273a 2035 337d 292c 2031 303a 2028 312c  ': 53}), 10: (1,
-0001a330: 207b 2740 273a 2035 337d 292c 2037 3a20   {'@': 53}), 7: 
-0001a340: 2831 2c20 7b27 4027 3a20 3533 7d29 2c20  (1, {'@': 53}), 
-0001a350: 3134 3a20 2831 2c20 7b27 4027 3a20 3533  14: (1, {'@': 53
-0001a360: 7d29 2c20 3131 3a20 2831 2c20 7b27 4027  }), 11: (1, {'@'
-0001a370: 3a20 3533 7d29 2c20 393a 2028 312c 207b  : 53}), 9: (1, {
-0001a380: 2740 273a 2035 337d 292c 2031 333a 2028  '@': 53}), 13: (
-0001a390: 312c 207b 2740 273a 2035 337d 297d 2c20  1, {'@': 53})}, 
-0001a3a0: 3235 3a20 7b31 323a 2028 312c 207b 2740  25: {12: (1, {'@
-0001a3b0: 273a 2035 367d 292c 2031 3a20 2831 2c20  ': 56}), 1: (1, 
-0001a3c0: 7b27 4027 3a20 3536 7d29 2c20 323a 2028  {'@': 56}), 2: (
-0001a3d0: 312c 207b 2740 273a 2035 367d 292c 2036  1, {'@': 56}), 6
-0001a3e0: 3a20 2831 2c20 7b27 4027 3a20 3536 7d29  : (1, {'@': 56})
-0001a3f0: 2c20 333a 2028 312c 207b 2740 273a 2035  , 3: (1, {'@': 5
-0001a400: 367d 292c 2031 303a 2028 312c 207b 2740  6}), 10: (1, {'@
-0001a410: 273a 2035 367d 292c 2037 3a20 2831 2c20  ': 56}), 7: (1, 
-0001a420: 7b27 4027 3a20 3536 7d29 2c20 3134 3a20  {'@': 56}), 14: 
-0001a430: 2831 2c20 7b27 4027 3a20 3536 7d29 2c20  (1, {'@': 56}), 
-0001a440: 3131 3a20 2831 2c20 7b27 4027 3a20 3536  11: (1, {'@': 56
-0001a450: 7d29 2c20 393a 2028 312c 207b 2740 273a  }), 9: (1, {'@':
-0001a460: 2035 367d 292c 2031 333a 2028 312c 207b   56}), 13: (1, {
-0001a470: 2740 273a 2035 367d 297d 2c20 3236 3a20  '@': 56})}, 26: 
-0001a480: 7b31 383a 2028 302c 2034 3029 2c20 3332  {18: (0, 40), 32
-0001a490: 3a20 2830 2c20 3439 292c 2033 333a 2028  : (0, 49), 33: (
-0001a4a0: 302c 2035 3429 2c20 323a 2028 302c 2035  0, 54), 2: (0, 5
-0001a4b0: 3529 2c20 3334 3a20 2830 2c20 3539 292c  5), 34: (0, 59),
-0001a4c0: 2039 3a20 2830 2c20 3337 292c 2031 323a   9: (0, 37), 12:
-0001a4d0: 2028 302c 2033 3229 7d2c 2032 373a 207b   (0, 32)}, 27: {
-0001a4e0: 323a 2028 302c 2033 3929 7d2c 2032 383a  2: (0, 39)}, 28:
-0001a4f0: 207b 363a 2028 302c 2031 3329 2c20 3130   {6: (0, 13), 10
-0001a500: 3a20 2831 2c20 7b27 4027 3a20 3236 7d29  : (1, {'@': 26})
-0001a510: 2c20 3134 3a20 2831 2c20 7b27 4027 3a20  , 14: (1, {'@': 
-0001a520: 3236 7d29 7d2c 2032 393a 207b 303a 2028  26})}, 29: {0: (
-0001a530: 302c 2032 3229 2c20 3239 3a20 2830 2c20  0, 22), 29: (0, 
-0001a540: 3333 292c 2038 3a20 2830 2c20 3234 292c  33), 8: (0, 24),
-0001a550: 2033 313a 2028 302c 2031 3929 2c20 343a   31: (0, 19), 4:
-0001a560: 2028 302c 2031 3429 2c20 3330 3a20 2830   (0, 14), 30: (0
-0001a570: 2c20 3235 292c 2035 3a20 2830 2c20 3334  , 25), 5: (0, 34
-0001a580: 292c 2031 323a 2028 312c 207b 2740 273a  ), 12: (1, {'@':
-0001a590: 2033 377d 292c 2031 3a20 2831 2c20 7b27   37}), 1: (1, {'
-0001a5a0: 4027 3a20 3337 7d29 2c20 323a 2028 312c  @': 37}), 2: (1,
-0001a5b0: 207b 2740 273a 2033 377d 292c 2033 3a20   {'@': 37}), 3: 
-0001a5c0: 2831 2c20 7b27 4027 3a20 3337 7d29 2c20  (1, {'@': 37}), 
-0001a5d0: 363a 2028 312c 207b 2740 273a 2033 377d  6: (1, {'@': 37}
-0001a5e0: 292c 2037 3a20 2831 2c20 7b27 4027 3a20  ), 7: (1, {'@': 
-0001a5f0: 3337 7d29 2c20 3130 3a20 2831 2c20 7b27  37}), 10: (1, {'
-0001a600: 4027 3a20 3337 7d29 2c20 3131 3a20 2831  @': 37}), 11: (1
-0001a610: 2c20 7b27 4027 3a20 3337 7d29 2c20 393a  , {'@': 37}), 9:
-0001a620: 2028 312c 207b 2740 273a 2033 377d 292c   (1, {'@': 37}),
-0001a630: 2031 333a 2028 312c 207b 2740 273a 2033   13: (1, {'@': 3
-0001a640: 377d 292c 2031 343a 2028 312c 207b 2740  7}), 14: (1, {'@
-0001a650: 273a 2033 377d 297d 2c20 3330 3a20 7b30  ': 37})}, 30: {0
-0001a660: 3a20 2831 2c20 7b27 4027 3a20 3339 7d29  : (1, {'@': 39})
-0001a670: 2c20 313a 2028 312c 207b 2740 273a 2033  , 1: (1, {'@': 3
-0001a680: 397d 292c 2032 3a20 2831 2c20 7b27 4027  9}), 2: (1, {'@'
-0001a690: 3a20 3339 7d29 2c20 333a 2028 312c 207b  : 39}), 3: (1, {
-0001a6a0: 2740 273a 2033 397d 292c 2034 3a20 2831  '@': 39}), 4: (1
-0001a6b0: 2c20 7b27 4027 3a20 3339 7d29 2c20 353a  , {'@': 39}), 5:
-0001a6c0: 2028 312c 207b 2740 273a 2033 397d 292c   (1, {'@': 39}),
-0001a6d0: 2036 3a20 2831 2c20 7b27 4027 3a20 3339   6: (1, {'@': 39
-0001a6e0: 7d29 2c20 373a 2028 312c 207b 2740 273a  }), 7: (1, {'@':
-0001a6f0: 2033 397d 292c 2038 3a20 2831 2c20 7b27   39}), 8: (1, {'
-0001a700: 4027 3a20 3339 7d29 2c20 393a 2028 312c  @': 39}), 9: (1,
-0001a710: 207b 2740 273a 2033 397d 292c 2031 303a   {'@': 39}), 10:
-0001a720: 2028 312c 207b 2740 273a 2033 397d 292c   (1, {'@': 39}),
-0001a730: 2031 313a 2028 312c 207b 2740 273a 2033   11: (1, {'@': 3
-0001a740: 397d 292c 2031 323a 2028 312c 207b 2740  9}), 12: (1, {'@
-0001a750: 273a 2033 397d 292c 2031 333a 2028 312c  ': 39}), 13: (1,
-0001a760: 207b 2740 273a 2033 397d 292c 2031 343a   {'@': 39}), 14:
-0001a770: 2028 312c 207b 2740 273a 2033 397d 297d   (1, {'@': 39})}
-0001a780: 2c20 3331 3a20 7b30 3a20 2831 2c20 7b27  , 31: {0: (1, {'
-0001a790: 4027 3a20 3430 7d29 2c20 313a 2028 312c  @': 40}), 1: (1,
-0001a7a0: 207b 2740 273a 2034 307d 292c 2032 3a20   {'@': 40}), 2: 
-0001a7b0: 2831 2c20 7b27 4027 3a20 3430 7d29 2c20  (1, {'@': 40}), 
-0001a7c0: 333a 2028 312c 207b 2740 273a 2034 307d  3: (1, {'@': 40}
-0001a7d0: 292c 2034 3a20 2831 2c20 7b27 4027 3a20  ), 4: (1, {'@': 
-0001a7e0: 3430 7d29 2c20 353a 2028 312c 207b 2740  40}), 5: (1, {'@
-0001a7f0: 273a 2034 307d 292c 2036 3a20 2831 2c20  ': 40}), 6: (1, 
-0001a800: 7b27 4027 3a20 3430 7d29 2c20 373a 2028  {'@': 40}), 7: (
-0001a810: 312c 207b 2740 273a 2034 307d 292c 2038  1, {'@': 40}), 8
-0001a820: 3a20 2831 2c20 7b27 4027 3a20 3430 7d29  : (1, {'@': 40})
-0001a830: 2c20 393a 2028 312c 207b 2740 273a 2034  , 9: (1, {'@': 4
-0001a840: 307d 292c 2031 303a 2028 312c 207b 2740  0}), 10: (1, {'@
-0001a850: 273a 2034 307d 292c 2031 313a 2028 312c  ': 40}), 11: (1,
-0001a860: 207b 2740 273a 2034 307d 292c 2031 323a   {'@': 40}), 12:
-0001a870: 2028 312c 207b 2740 273a 2034 307d 292c   (1, {'@': 40}),
-0001a880: 2031 333a 2028 312c 207b 2740 273a 2034   13: (1, {'@': 4
-0001a890: 307d 292c 2031 343a 2028 312c 207b 2740  0}), 14: (1, {'@
-0001a8a0: 273a 2034 307d 297d 2c20 3332 3a20 7b33  ': 40})}, 32: {3
-0001a8b0: 363a 2028 302c 2033 3829 7d2c 2033 333a  6: (0, 38)}, 33:
-0001a8c0: 207b 313a 2028 312c 207b 2740 273a 2035   {1: (1, {'@': 5
-0001a8d0: 327d 292c 2032 3a20 2831 2c20 7b27 4027  2}), 2: (1, {'@'
-0001a8e0: 3a20 3532 7d29 2c20 3134 3a20 2831 2c20  : 52}), 14: (1, 
-0001a8f0: 7b27 4027 3a20 3532 7d29 2c20 3130 3a20  {'@': 52}), 10: 
-0001a900: 2831 2c20 7b27 4027 3a20 3532 7d29 2c20  (1, {'@': 52}), 
-0001a910: 393a 2028 312c 207b 2740 273a 2035 327d  9: (1, {'@': 52}
-0001a920: 292c 2036 3a20 2831 2c20 7b27 4027 3a20  ), 6: (1, {'@': 
-0001a930: 3532 7d29 2c20 333a 2028 312c 207b 2740  52}), 3: (1, {'@
-0001a940: 273a 2035 327d 292c 2037 3a20 2831 2c20  ': 52}), 7: (1, 
-0001a950: 7b27 4027 3a20 3532 7d29 2c20 3131 3a20  {'@': 52}), 11: 
-0001a960: 2831 2c20 7b27 4027 3a20 3532 7d29 2c20  (1, {'@': 52}), 
-0001a970: 3132 3a20 2831 2c20 7b27 4027 3a20 3532  12: (1, {'@': 52
-0001a980: 7d29 2c20 3133 3a20 2831 2c20 7b27 4027  }), 13: (1, {'@'
-0001a990: 3a20 3532 7d29 7d2c 2033 343a 207b 3132  : 52})}, 34: {12
-0001a9a0: 3a20 2831 2c20 7b27 4027 3a20 3535 7d29  : (1, {'@': 55})
-0001a9b0: 2c20 313a 2028 312c 207b 2740 273a 2035  , 1: (1, {'@': 5
-0001a9c0: 357d 292c 2032 3a20 2831 2c20 7b27 4027  5}), 2: (1, {'@'
-0001a9d0: 3a20 3535 7d29 2c20 363a 2028 312c 207b  : 55}), 6: (1, {
-0001a9e0: 2740 273a 2035 357d 292c 2033 3a20 2831  '@': 55}), 3: (1
-0001a9f0: 2c20 7b27 4027 3a20 3535 7d29 2c20 3130  , {'@': 55}), 10
-0001aa00: 3a20 2831 2c20 7b27 4027 3a20 3535 7d29  : (1, {'@': 55})
-0001aa10: 2c20 373a 2028 312c 207b 2740 273a 2035  , 7: (1, {'@': 5
-0001aa20: 357d 292c 2031 343a 2028 312c 207b 2740  5}), 14: (1, {'@
-0001aa30: 273a 2035 357d 292c 2031 313a 2028 312c  ': 55}), 11: (1,
-0001aa40: 207b 2740 273a 2035 357d 292c 2039 3a20   {'@': 55}), 9: 
-0001aa50: 2831 2c20 7b27 4027 3a20 3535 7d29 2c20  (1, {'@': 55}), 
-0001aa60: 3133 3a20 2831 2c20 7b27 4027 3a20 3535  13: (1, {'@': 55
-0001aa70: 7d29 7d2c 2033 353a 207b 303a 2028 312c  })}, 35: {0: (1,
-0001aa80: 207b 2740 273a 2034 347d 292c 2031 3a20   {'@': 44}), 1: 
-0001aa90: 2831 2c20 7b27 4027 3a20 3434 7d29 2c20  (1, {'@': 44}), 
-0001aaa0: 323a 2028 312c 207b 2740 273a 2034 347d  2: (1, {'@': 44}
-0001aab0: 292c 2033 3a20 2831 2c20 7b27 4027 3a20  ), 3: (1, {'@': 
-0001aac0: 3434 7d29 2c20 343a 2028 312c 207b 2740  44}), 4: (1, {'@
-0001aad0: 273a 2034 347d 292c 2035 3a20 2831 2c20  ': 44}), 5: (1, 
-0001aae0: 7b27 4027 3a20 3434 7d29 2c20 363a 2028  {'@': 44}), 6: (
-0001aaf0: 312c 207b 2740 273a 2034 347d 292c 2037  1, {'@': 44}), 7
-0001ab00: 3a20 2831 2c20 7b27 4027 3a20 3434 7d29  : (1, {'@': 44})
-0001ab10: 2c20 383a 2028 312c 207b 2740 273a 2034  , 8: (1, {'@': 4
-0001ab20: 347d 292c 2039 3a20 2831 2c20 7b27 4027  4}), 9: (1, {'@'
-0001ab30: 3a20 3434 7d29 2c20 3130 3a20 2831 2c20  : 44}), 10: (1, 
-0001ab40: 7b27 4027 3a20 3434 7d29 2c20 3131 3a20  {'@': 44}), 11: 
-0001ab50: 2831 2c20 7b27 4027 3a20 3434 7d29 2c20  (1, {'@': 44}), 
-0001ab60: 3132 3a20 2831 2c20 7b27 4027 3a20 3434  12: (1, {'@': 44
-0001ab70: 7d29 2c20 3133 3a20 2831 2c20 7b27 4027  }), 13: (1, {'@'
-0001ab80: 3a20 3434 7d29 2c20 3134 3a20 2831 2c20  : 44}), 14: (1, 
-0001ab90: 7b27 4027 3a20 3434 7d29 7d2c 2033 363a  {'@': 44})}, 36:
-0001aba0: 207b 3137 3a20 2830 2c20 3029 2c20 3138   {17: (0, 0), 18
-0001abb0: 3a20 2830 2c20 3629 2c20 373a 2028 302c  : (0, 6), 7: (0,
-0001abc0: 2035 292c 2031 393a 2028 302c 2032 3829   5), 19: (0, 28)
-0001abd0: 2c20 3231 3a20 2830 2c20 3829 2c20 3230  , 21: (0, 8), 20
-0001abe0: 3a20 2830 2c20 3435 292c 2031 3a20 2830  : (0, 45), 1: (0
-0001abf0: 2c20 3336 292c 2032 323a 2028 302c 2032  , 36), 22: (0, 2
-0001ac00: 3929 2c20 323a 2028 302c 2033 3129 2c20  9), 2: (0, 31), 
-0001ac10: 393a 2028 302c 2031 3629 2c20 3337 3a20  9: (0, 16), 37: 
-0001ac20: 2830 2c20 3729 2c20 333a 2028 302c 2032  (0, 7), 3: (0, 2
-0001ac30: 3329 2c20 3233 3a20 2830 2c20 3330 292c  3), 23: (0, 30),
-0001ac40: 2031 333a 2028 302c 2035 3229 2c20 3234   13: (0, 52), 24
-0001ac50: 3a20 2830 2c20 3137 292c 2032 353a 2028  : (0, 17), 25: (
-0001ac60: 302c 2035 3829 2c20 3237 3a20 2830 2c20  0, 58), 27: (0, 
-0001ac70: 3437 292c 2031 323a 2028 302c 2033 3229  47), 12: (0, 32)
-0001ac80: 2c20 3131 3a20 2830 2c20 3132 297d 2c20  , 11: (0, 12)}, 
-0001ac90: 3337 3a20 7b31 323a 2028 312c 207b 2740  37: {12: (1, {'@
-0001aca0: 273a 2034 367d 292c 2039 3a20 2831 2c20  ': 46}), 9: (1, 
-0001acb0: 7b27 4027 3a20 3436 7d29 2c20 3338 3a20  {'@': 46}), 38: 
-0001acc0: 2831 2c20 7b27 4027 3a20 3436 7d29 2c20  (1, {'@': 46}), 
-0001acd0: 323a 2028 312c 207b 2740 273a 2034 367d  2: (1, {'@': 46}
-0001ace0: 297d 2c20 3338 3a20 7b31 363a 2028 302c  )}, 38: {16: (0,
-0001acf0: 2035 3329 7d2c 2033 393a 207b 3132 3a20   53)}, 39: {12: 
-0001ad00: 2831 2c20 7b27 4027 3a20 3531 7d29 2c20  (1, {'@': 51}), 
-0001ad10: 393a 2028 312c 207b 2740 273a 2035 317d  9: (1, {'@': 51}
-0001ad20: 292c 2033 383a 2028 312c 207b 2740 273a  ), 38: (1, {'@':
-0001ad30: 2035 317d 292c 2032 3a20 2831 2c20 7b27   51}), 2: (1, {'
-0001ad40: 4027 3a20 3531 7d29 7d2c 2034 303a 207b  @': 51})}, 40: {
-0001ad50: 3132 3a20 2831 2c20 7b27 4027 3a20 3437  12: (1, {'@': 47
-0001ad60: 7d29 2c20 393a 2028 312c 207b 2740 273a  }), 9: (1, {'@':
-0001ad70: 2034 377d 292c 2033 383a 2028 312c 207b   47}), 38: (1, {
-0001ad80: 2740 273a 2034 377d 292c 2032 3a20 2831  '@': 47}), 2: (1
-0001ad90: 2c20 7b27 4027 3a20 3437 7d29 7d2c 2034  , {'@': 47})}, 4
-0001ada0: 313a 207b 303a 2028 302c 2032 3229 2c20  1: {0: (0, 22), 
-0001adb0: 3239 3a20 2830 2c20 3333 292c 2038 3a20  29: (0, 33), 8: 
-0001adc0: 2830 2c20 3234 292c 2034 3a20 2830 2c20  (0, 24), 4: (0, 
-0001add0: 3134 292c 2033 303a 2028 302c 2032 3529  14), 30: (0, 25)
-0001ade0: 2c20 353a 2028 302c 2033 3429 2c20 3331  , 5: (0, 34), 31
-0001adf0: 3a20 2830 2c20 3135 292c 2031 323a 2028  : (0, 15), 12: (
-0001ae00: 312c 207b 2740 273a 2033 357d 292c 2031  1, {'@': 35}), 1
-0001ae10: 3a20 2831 2c20 7b27 4027 3a20 3335 7d29  : (1, {'@': 35})
-0001ae20: 2c20 323a 2028 312c 207b 2740 273a 2033  , 2: (1, {'@': 3
-0001ae30: 357d 292c 2033 3a20 2831 2c20 7b27 4027  5}), 3: (1, {'@'
-0001ae40: 3a20 3335 7d29 2c20 363a 2028 312c 207b  : 35}), 6: (1, {
-0001ae50: 2740 273a 2033 357d 292c 2037 3a20 2831  '@': 35}), 7: (1
-0001ae60: 2c20 7b27 4027 3a20 3335 7d29 2c20 3130  , {'@': 35}), 10
-0001ae70: 3a20 2831 2c20 7b27 4027 3a20 3335 7d29  : (1, {'@': 35})
-0001ae80: 2c20 3131 3a20 2831 2c20 7b27 4027 3a20  , 11: (1, {'@': 
-0001ae90: 3335 7d29 2c20 393a 2028 312c 207b 2740  35}), 9: (1, {'@
-0001aea0: 273a 2033 357d 292c 2031 333a 2028 312c  ': 35}), 13: (1,
-0001aeb0: 207b 2740 273a 2033 357d 292c 2031 343a   {'@': 35}), 14:
-0001aec0: 2028 312c 207b 2740 273a 2033 357d 297d   (1, {'@': 35})}
-0001aed0: 2c20 3432 3a20 7b31 323a 2028 312c 207b  , 42: {12: (1, {
-0001aee0: 2740 273a 2035 387d 292c 2031 3a20 2831  '@': 58}), 1: (1
-0001aef0: 2c20 7b27 4027 3a20 3538 7d29 2c20 323a  , {'@': 58}), 2:
-0001af00: 2028 312c 207b 2740 273a 2035 387d 292c   (1, {'@': 58}),
-0001af10: 2036 3a20 2831 2c20 7b27 4027 3a20 3538   6: (1, {'@': 58
-0001af20: 7d29 2c20 333a 2028 312c 207b 2740 273a  }), 3: (1, {'@':
-0001af30: 2035 387d 292c 2031 303a 2028 312c 207b   58}), 10: (1, {
-0001af40: 2740 273a 2035 387d 292c 2037 3a20 2831  '@': 58}), 7: (1
-0001af50: 2c20 7b27 4027 3a20 3538 7d29 2c20 3134  , {'@': 58}), 14
-0001af60: 3a20 2831 2c20 7b27 4027 3a20 3538 7d29  : (1, {'@': 58})
-0001af70: 2c20 3131 3a20 2831 2c20 7b27 4027 3a20  , 11: (1, {'@': 
-0001af80: 3538 7d29 2c20 393a 2028 312c 207b 2740  58}), 9: (1, {'@
-0001af90: 273a 2035 387d 292c 2031 333a 2028 312c  ': 58}), 13: (1,
-0001afa0: 207b 2740 273a 2035 387d 297d 2c20 3433   {'@': 58})}, 43
-0001afb0: 3a20 7b31 383a 2028 302c 2034 3029 2c20  : {18: (0, 40), 
-0001afc0: 323a 2028 302c 2035 3529 2c20 3338 3a20  2: (0, 55), 38: 
-0001afd0: 2830 2c20 3230 292c 2033 323a 2028 302c  (0, 20), 32: (0,
-0001afe0: 2034 3429 2c20 3334 3a20 2830 2c20 3539   44), 34: (0, 59
-0001aff0: 292c 2039 3a20 2830 2c20 3337 292c 2031  ), 9: (0, 37), 1
-0001b000: 323a 2028 302c 2033 3229 7d2c 2034 343a  2: (0, 32)}, 44:
-0001b010: 207b 3132 3a20 2831 2c20 7b27 4027 3a20   {12: (1, {'@': 
-0001b020: 3633 7d29 2c20 393a 2028 312c 207b 2740  63}), 9: (1, {'@
-0001b030: 273a 2036 337d 292c 2033 383a 2028 312c  ': 63}), 38: (1,
-0001b040: 207b 2740 273a 2036 337d 292c 2032 3a20   {'@': 63}), 2: 
-0001b050: 2831 2c20 7b27 4027 3a20 3633 7d29 7d2c  (1, {'@': 63})},
-0001b060: 2034 353a 207b 3134 3a20 2830 2c20 3431   45: {14: (0, 41
-0001b070: 297d 2c20 3436 3a20 7b33 393a 2028 302c  )}, 46: {39: (0,
-0001b080: 2033 292c 2031 363a 2028 302c 2032 3129   3), 16: (0, 21)
-0001b090: 7d2c 2034 373a 207b 3132 3a20 2831 2c20  }, 47: {12: (1, 
-0001b0a0: 7b27 4027 3a20 3239 7d29 2c20 313a 2028  {'@': 29}), 1: (
-0001b0b0: 312c 207b 2740 273a 2032 397d 292c 2032  1, {'@': 29}), 2
-0001b0c0: 3a20 2831 2c20 7b27 4027 3a20 3239 7d29  : (1, {'@': 29})
-0001b0d0: 2c20 333a 2028 312c 207b 2740 273a 2032  , 3: (1, {'@': 2
-0001b0e0: 397d 292c 2036 3a20 2831 2c20 7b27 4027  9}), 6: (1, {'@'
-0001b0f0: 3a20 3239 7d29 2c20 373a 2028 312c 207b  : 29}), 7: (1, {
-0001b100: 2740 273a 2032 397d 292c 2031 303a 2028  '@': 29}), 10: (
-0001b110: 312c 207b 2740 273a 2032 397d 292c 2031  1, {'@': 29}), 1
-0001b120: 313a 2028 312c 207b 2740 273a 2032 397d  1: (1, {'@': 29}
-0001b130: 292c 2039 3a20 2831 2c20 7b27 4027 3a20  ), 9: (1, {'@': 
-0001b140: 3239 7d29 2c20 3133 3a20 2831 2c20 7b27  29}), 13: (1, {'
-0001b150: 4027 3a20 3239 7d29 2c20 3134 3a20 2831  @': 29}), 14: (1
-0001b160: 2c20 7b27 4027 3a20 3239 7d29 7d2c 2034  , {'@': 29})}, 4
-0001b170: 383a 207b 3132 3a20 2831 2c20 7b27 4027  8: {12: (1, {'@'
-0001b180: 3a20 3332 7d29 2c20 313a 2028 312c 207b  : 32}), 1: (1, {
-0001b190: 2740 273a 2033 327d 292c 2032 3a20 2831  '@': 32}), 2: (1
-0001b1a0: 2c20 7b27 4027 3a20 3332 7d29 2c20 333a  , {'@': 32}), 3:
-0001b1b0: 2028 312c 207b 2740 273a 2033 327d 292c   (1, {'@': 32}),
-0001b1c0: 2036 3a20 2831 2c20 7b27 4027 3a20 3332   6: (1, {'@': 32
-0001b1d0: 7d29 2c20 373a 2028 312c 207b 2740 273a  }), 7: (1, {'@':
-0001b1e0: 2033 327d 292c 2031 303a 2028 312c 207b   32}), 10: (1, {
-0001b1f0: 2740 273a 2033 327d 292c 2031 313a 2028  '@': 32}), 11: (
-0001b200: 312c 207b 2740 273a 2033 327d 292c 2039  1, {'@': 32}), 9
-0001b210: 3a20 2831 2c20 7b27 4027 3a20 3332 7d29  : (1, {'@': 32})
-0001b220: 2c20 3133 3a20 2831 2c20 7b27 4027 3a20  , 13: (1, {'@': 
-0001b230: 3332 7d29 2c20 3134 3a20 2831 2c20 7b27  32}), 14: (1, {'
-0001b240: 4027 3a20 3332 7d29 7d2c 2034 393a 207b  @': 32})}, 49: {
-0001b250: 3132 3a20 2831 2c20 7b27 4027 3a20 3632  12: (1, {'@': 62
-0001b260: 7d29 2c20 393a 2028 312c 207b 2740 273a  }), 9: (1, {'@':
-0001b270: 2036 327d 292c 2033 383a 2028 312c 207b   62}), 38: (1, {
-0001b280: 2740 273a 2036 327d 292c 2032 3a20 2831  '@': 62}), 2: (1
-0001b290: 2c20 7b27 4027 3a20 3632 7d29 7d2c 2035  , {'@': 62})}, 5
-0001b2a0: 303a 207b 3136 3a20 2830 2c20 3229 7d2c  0: {16: (0, 2)},
-0001b2b0: 2035 313a 207b 3130 3a20 2831 2c20 7b27   51: {10: (1, {'
-0001b2c0: 4027 3a20 3234 7d29 7d2c 2035 323a 207b  @': 24})}, 52: {
-0001b2d0: 3132 3a20 2831 2c20 7b27 4027 3a20 3330  12: (1, {'@': 30
-0001b2e0: 7d29 2c20 313a 2028 312c 207b 2740 273a  }), 1: (1, {'@':
-0001b2f0: 2033 307d 292c 2032 3a20 2831 2c20 7b27   30}), 2: (1, {'
-0001b300: 4027 3a20 3330 7d29 2c20 333a 2028 312c  @': 30}), 3: (1,
-0001b310: 207b 2740 273a 2033 307d 292c 2036 3a20   {'@': 30}), 6: 
-0001b320: 2831 2c20 7b27 4027 3a20 3330 7d29 2c20  (1, {'@': 30}), 
-0001b330: 373a 2028 312c 207b 2740 273a 2033 307d  7: (1, {'@': 30}
-0001b340: 292c 2031 303a 2028 312c 207b 2740 273a  ), 10: (1, {'@':
-0001b350: 2033 307d 292c 2031 313a 2028 312c 207b   30}), 11: (1, {
-0001b360: 2740 273a 2033 307d 292c 2039 3a20 2831  '@': 30}), 9: (1
-0001b370: 2c20 7b27 4027 3a20 3330 7d29 2c20 3133  , {'@': 30}), 13
-0001b380: 3a20 2831 2c20 7b27 4027 3a20 3330 7d29  : (1, {'@': 30})
-0001b390: 2c20 3134 3a20 2831 2c20 7b27 4027 3a20  , 14: (1, {'@': 
-0001b3a0: 3330 7d29 7d2c 2035 333a 207b 303a 2028  30})}, 53: {0: (
-0001b3b0: 312c 207b 2740 273a 2035 307d 292c 2031  1, {'@': 50}), 1
-0001b3c0: 3a20 2831 2c20 7b27 4027 3a20 3530 7d29  : (1, {'@': 50})
-0001b3d0: 2c20 323a 2028 312c 207b 2740 273a 2035  , 2: (1, {'@': 5
-0001b3e0: 307d 292c 2033 3a20 2831 2c20 7b27 4027  0}), 3: (1, {'@'
-0001b3f0: 3a20 3530 7d29 2c20 343a 2028 312c 207b  : 50}), 4: (1, {
-0001b400: 2740 273a 2035 307d 292c 2035 3a20 2831  '@': 50}), 5: (1
-0001b410: 2c20 7b27 4027 3a20 3530 7d29 2c20 363a  , {'@': 50}), 6:
-0001b420: 2028 312c 207b 2740 273a 2035 307d 292c   (1, {'@': 50}),
-0001b430: 2037 3a20 2831 2c20 7b27 4027 3a20 3530   7: (1, {'@': 50
-0001b440: 7d29 2c20 383a 2028 312c 207b 2740 273a  }), 8: (1, {'@':
-0001b450: 2035 307d 292c 2039 3a20 2831 2c20 7b27   50}), 9: (1, {'
-0001b460: 4027 3a20 3530 7d29 2c20 3130 3a20 2831  @': 50}), 10: (1
-0001b470: 2c20 7b27 4027 3a20 3530 7d29 2c20 3131  , {'@': 50}), 11
-0001b480: 3a20 2831 2c20 7b27 4027 3a20 3530 7d29  : (1, {'@': 50})
-0001b490: 2c20 3132 3a20 2831 2c20 7b27 4027 3a20  , 12: (1, {'@': 
-0001b4a0: 3530 7d29 2c20 3133 3a20 2831 2c20 7b27  50}), 13: (1, {'
-0001b4b0: 4027 3a20 3530 7d29 2c20 3134 3a20 2831  @': 50}), 14: (1
-0001b4c0: 2c20 7b27 4027 3a20 3530 7d29 2c20 3338  , {'@': 50}), 38
-0001b4d0: 3a20 2831 2c20 7b27 4027 3a20 3530 7d29  : (1, {'@': 50})
-0001b4e0: 7d2c 2035 343a 207b 3138 3a20 2830 2c20  }, 54: {18: (0, 
-0001b4f0: 3430 292c 2032 3a20 2830 2c20 3535 292c  40), 2: (0, 55),
-0001b500: 2033 323a 2028 302c 2034 3429 2c20 3334   32: (0, 44), 34
-0001b510: 3a20 2830 2c20 3539 292c 2039 3a20 2830  : (0, 59), 9: (0
-0001b520: 2c20 3337 292c 2031 323a 2028 302c 2033  , 37), 12: (0, 3
-0001b530: 3229 2c20 3338 3a20 2830 2c20 3335 297d  2), 38: (0, 35)}
-0001b540: 2c20 3535 3a20 7b34 303a 2028 302c 2032  , 55: {40: (0, 2
-0001b550: 3729 2c20 3132 3a20 2831 2c20 7b27 4027  7), 12: (1, {'@'
-0001b560: 3a20 3439 7d29 2c20 393a 2028 312c 207b  : 49}), 9: (1, {
-0001b570: 2740 273a 2034 397d 292c 2033 383a 2028  '@': 49}), 38: (
-0001b580: 312c 207b 2740 273a 2034 397d 292c 2032  1, {'@': 49}), 2
-0001b590: 3a20 2831 2c20 7b27 4027 3a20 3439 7d29  : (1, {'@': 49})
-0001b5a0: 7d2c 2035 363a 207b 3132 3a20 2831 2c20  }, 56: {12: (1, 
-0001b5b0: 7b27 4027 3a20 3631 7d29 2c20 313a 2028  {'@': 61}), 1: (
-0001b5c0: 312c 207b 2740 273a 2036 317d 292c 2032  1, {'@': 61}), 2
-0001b5d0: 3a20 2831 2c20 7b27 4027 3a20 3631 7d29  : (1, {'@': 61})
-0001b5e0: 2c20 333a 2028 312c 207b 2740 273a 2036  , 3: (1, {'@': 6
-0001b5f0: 317d 292c 2036 3a20 2831 2c20 7b27 4027  1}), 6: (1, {'@'
-0001b600: 3a20 3631 7d29 2c20 373a 2028 312c 207b  : 61}), 7: (1, {
-0001b610: 2740 273a 2036 317d 292c 2031 303a 2028  '@': 61}), 10: (
-0001b620: 312c 207b 2740 273a 2036 317d 292c 2031  1, {'@': 61}), 1
-0001b630: 313a 2028 312c 207b 2740 273a 2036 317d  1: (1, {'@': 61}
-0001b640: 292c 2039 3a20 2831 2c20 7b27 4027 3a20  ), 9: (1, {'@': 
-0001b650: 3631 7d29 2c20 3133 3a20 2831 2c20 7b27  61}), 13: (1, {'
-0001b660: 4027 3a20 3631 7d29 2c20 3134 3a20 2831  @': 61}), 14: (1
-0001b670: 2c20 7b27 4027 3a20 3631 7d29 7d2c 2035  , {'@': 61})}, 5
-0001b680: 373a 207b 3134 3a20 2830 2c20 3131 297d  7: {14: (0, 11)}
-0001b690: 2c20 3538 3a20 7b31 323a 2028 312c 207b  , 58: {12: (1, {
-0001b6a0: 2740 273a 2036 307d 292c 2031 3a20 2831  '@': 60}), 1: (1
-0001b6b0: 2c20 7b27 4027 3a20 3630 7d29 2c20 323a  , {'@': 60}), 2:
-0001b6c0: 2028 312c 207b 2740 273a 2036 307d 292c   (1, {'@': 60}),
-0001b6d0: 2033 3a20 2831 2c20 7b27 4027 3a20 3630   3: (1, {'@': 60
-0001b6e0: 7d29 2c20 363a 2028 312c 207b 2740 273a  }), 6: (1, {'@':
-0001b6f0: 2036 307d 292c 2037 3a20 2831 2c20 7b27   60}), 7: (1, {'
-0001b700: 4027 3a20 3630 7d29 2c20 3130 3a20 2831  @': 60}), 10: (1
-0001b710: 2c20 7b27 4027 3a20 3630 7d29 2c20 3131  , {'@': 60}), 11
-0001b720: 3a20 2831 2c20 7b27 4027 3a20 3630 7d29  : (1, {'@': 60})
-0001b730: 2c20 393a 2028 312c 207b 2740 273a 2036  , 9: (1, {'@': 6
-0001b740: 307d 292c 2031 333a 2028 312c 207b 2740  0}), 13: (1, {'@
-0001b750: 273a 2036 307d 292c 2031 343a 2028 312c  ': 60}), 14: (1,
-0001b760: 207b 2740 273a 2036 307d 297d 2c20 3539   {'@': 60})}, 59
-0001b770: 3a20 7b31 323a 2028 312c 207b 2740 273a  : {12: (1, {'@':
-0001b780: 2034 387d 292c 2039 3a20 2831 2c20 7b27   48}), 9: (1, {'
-0001b790: 4027 3a20 3438 7d29 2c20 3338 3a20 2831  @': 48}), 38: (1
-0001b7a0: 2c20 7b27 4027 3a20 3438 7d29 2c20 323a  , {'@': 48}), 2:
-0001b7b0: 2028 312c 207b 2740 273a 2034 387d 297d   (1, {'@': 48})}
-0001b7c0: 7d2c 2027 7374 6172 745f 7374 6174 6573  }, 'start_states
-0001b7d0: 273a 207b 2773 7461 7274 273a 2034 7d2c  ': {'start': 4},
-0001b7e0: 2027 656e 645f 7374 6174 6573 273a 207b   'end_states': {
-0001b7f0: 2773 7461 7274 273a 2031 387d 7d2c 2027  'start': 18}}, '
-0001b800: 5f5f 7479 7065 5f5f 273a 2027 5061 7273  __type__': 'Pars
-0001b810: 696e 6746 726f 6e74 656e 6427 7d2c 2027  ingFrontend'}, '
-0001b820: 7275 6c65 7327 3a20 5b7b 2740 273a 2032  rules': [{'@': 2
-0001b830: 337d 2c20 7b27 4027 3a20 3234 7d2c 207b  3}, {'@': 24}, {
-0001b840: 2740 273a 2032 357d 2c20 7b27 4027 3a20  '@': 25}, {'@': 
-0001b850: 3236 7d2c 207b 2740 273a 2032 377d 2c20  26}, {'@': 27}, 
-0001b860: 7b27 4027 3a20 3238 7d2c 207b 2740 273a  {'@': 28}, {'@':
-0001b870: 2032 397d 2c20 7b27 4027 3a20 3330 7d2c   29}, {'@': 30},
-0001b880: 207b 2740 273a 2033 317d 2c20 7b27 4027   {'@': 31}, {'@'
-0001b890: 3a20 3332 7d2c 207b 2740 273a 2033 337d  : 32}, {'@': 33}
-0001b8a0: 2c20 7b27 4027 3a20 3334 7d2c 207b 2740  , {'@': 34}, {'@
-0001b8b0: 273a 2033 357d 2c20 7b27 4027 3a20 3336  ': 35}, {'@': 36
-0001b8c0: 7d2c 207b 2740 273a 2033 377d 2c20 7b27  }, {'@': 37}, {'
-0001b8d0: 4027 3a20 3338 7d2c 207b 2740 273a 2033  @': 38}, {'@': 3
-0001b8e0: 397d 2c20 7b27 4027 3a20 3430 7d2c 207b  9}, {'@': 40}, {
-0001b8f0: 2740 273a 2034 317d 2c20 7b27 4027 3a20  '@': 41}, {'@': 
-0001b900: 3432 7d2c 207b 2740 273a 2034 337d 2c20  42}, {'@': 43}, 
-0001b910: 7b27 4027 3a20 3434 7d2c 207b 2740 273a  {'@': 44}, {'@':
-0001b920: 2034 357d 2c20 7b27 4027 3a20 3436 7d2c   45}, {'@': 46},
-0001b930: 207b 2740 273a 2034 377d 2c20 7b27 4027   {'@': 47}, {'@'
-0001b940: 3a20 3438 7d2c 207b 2740 273a 2034 397d  : 48}, {'@': 49}
-0001b950: 2c20 7b27 4027 3a20 3530 7d2c 207b 2740  , {'@': 50}, {'@
-0001b960: 273a 2035 317d 2c20 7b27 4027 3a20 3532  ': 51}, {'@': 52
-0001b970: 7d2c 207b 2740 273a 2035 337d 2c20 7b27  }, {'@': 53}, {'
-0001b980: 4027 3a20 3534 7d2c 207b 2740 273a 2035  @': 54}, {'@': 5
-0001b990: 357d 2c20 7b27 4027 3a20 3536 7d2c 207b  5}, {'@': 56}, {
-0001b9a0: 2740 273a 2035 377d 2c20 7b27 4027 3a20  '@': 57}, {'@': 
-0001b9b0: 3538 7d2c 207b 2740 273a 2035 397d 2c20  58}, {'@': 59}, 
-0001b9c0: 7b27 4027 3a20 3630 7d2c 207b 2740 273a  {'@': 60}, {'@':
-0001b9d0: 2036 317d 2c20 7b27 4027 3a20 3632 7d2c   61}, {'@': 62},
-0001b9e0: 207b 2740 273a 2036 337d 5d2c 2027 6f70   {'@': 63}], 'op
-0001b9f0: 7469 6f6e 7327 3a20 7b27 6465 6275 6727  tions': {'debug'
-0001ba00: 3a20 4661 6c73 652c 2027 6b65 6570 5f61  : False, 'keep_a
-0001ba10: 6c6c 5f74 6f6b 656e 7327 3a20 4661 6c73  ll_tokens': Fals
-0001ba20: 652c 2027 7472 6565 5f63 6c61 7373 273a  e, 'tree_class':
-0001ba30: 204e 6f6e 652c 2027 6361 6368 6527 3a20   None, 'cache': 
-0001ba40: 4661 6c73 652c 2027 706f 7374 6c65 7827  False, 'postlex'
-0001ba50: 3a20 4e6f 6e65 2c20 2770 6172 7365 7227  : None, 'parser'
-0001ba60: 3a20 276c 616c 7227 2c20 276c 6578 6572  : 'lalr', 'lexer
-0001ba70: 273a 2027 636f 6e74 6578 7475 616c 272c  ': 'contextual',
-0001ba80: 2027 7472 616e 7366 6f72 6d65 7227 3a20   'transformer': 
-0001ba90: 4e6f 6e65 2c20 2773 7461 7274 273a 205b  None, 'start': [
-0001baa0: 2773 7461 7274 275d 2c20 2770 7269 6f72  'start'], 'prior
-0001bab0: 6974 7927 3a20 276e 6f72 6d61 6c27 2c20  ity': 'normal', 
-0001bac0: 2761 6d62 6967 7569 7479 273a 2027 6175  'ambiguity': 'au
-0001bad0: 746f 272c 2027 7265 6765 7827 3a20 4661  to', 'regex': Fa
-0001bae0: 6c73 652c 2027 7072 6f70 6167 6174 655f  lse, 'propagate_
-0001baf0: 706f 7369 7469 6f6e 7327 3a20 4661 6c73  positions': Fals
-0001bb00: 652c 2027 6c65 7865 725f 6361 6c6c 6261  e, 'lexer_callba
-0001bb10: 636b 7327 3a20 7b7d 2c20 276d 6179 6265  cks': {}, 'maybe
-0001bb20: 5f70 6c61 6365 686f 6c64 6572 7327 3a20  _placeholders': 
-0001bb30: 4661 6c73 652c 2027 6564 6974 5f74 6572  False, 'edit_ter
-0001bb40: 6d69 6e61 6c73 273a 204e 6f6e 652c 2027  minals': None, '
-0001bb50: 675f 7265 6765 785f 666c 6167 7327 3a20  g_regex_flags': 
-0001bb60: 302c 2027 7573 655f 6279 7465 7327 3a20  0, 'use_bytes': 
-0001bb70: 4661 6c73 652c 2027 696d 706f 7274 5f70  False, 'import_p
-0001bb80: 6174 6873 273a 205b 5d2c 2027 736f 7572  aths': [], 'sour
-0001bb90: 6365 5f70 6174 6827 3a20 4e6f 6e65 2c20  ce_path': None, 
-0001bba0: 275f 706c 7567 696e 7327 3a20 7b7d 7d2c  '_plugins': {}},
-0001bbb0: 2027 5f5f 7479 7065 5f5f 273a 2027 4c61   '__type__': 'La
-0001bbc0: 726b 277d 0a29 0a4d 454d 4f20 3d20 280a  rk'}.).MEMO = (.
-0001bbd0: 7b30 3a20 7b27 6e61 6d65 273a 2027 4752  {0: {'name': 'GR
-0001bbe0: 4f55 505f 4e4f 4e5f 4341 5054 5552 494e  OUP_NON_CAPTURIN
-0001bbf0: 475f 4d4f 4449 4649 4552 272c 2027 7061  G_MODIFIER', 'pa
-0001bc00: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
-0001bc10: 3a20 273f 3a27 2c20 2766 6c61 6773 273a  : '?:', 'flags':
-0001bc20: 205b 5d2c 2027 5f5f 7479 7065 5f5f 273a   [], '__type__':
-0001bc30: 2027 5061 7474 6572 6e53 7472 277d 2c20   'PatternStr'}, 
-0001bc40: 2770 7269 6f72 6974 7927 3a20 302c 2027  'priority': 0, '
-0001bc50: 5f5f 7479 7065 5f5f 273a 2027 5465 726d  __type__': 'Term
-0001bc60: 696e 616c 4465 6627 7d2c 2031 3a20 7b27  inalDef'}, 1: {'
-0001bc70: 6e61 6d65 273a 2027 4d41 5443 485f 414e  name': 'MATCH_AN
-0001bc80: 595f 4348 4152 4143 5445 5227 2c20 2770  Y_CHARACTER', 'p
-0001bc90: 6174 7465 726e 273a 207b 2776 616c 7565  attern': {'value
-0001bca0: 273a 2027 2e27 2c20 2766 6c61 6773 273a  ': '.', 'flags':
-0001bcb0: 205b 5d2c 2027 5f5f 7479 7065 5f5f 273a   [], '__type__':
-0001bcc0: 2027 5061 7474 6572 6e53 7472 277d 2c20   'PatternStr'}, 
-0001bcd0: 2770 7269 6f72 6974 7927 3a20 302c 2027  'priority': 0, '
-0001bce0: 5f5f 7479 7065 5f5f 273a 2027 5465 726d  __type__': 'Term
-0001bcf0: 696e 616c 4465 6627 7d2c 2032 3a20 7b27  inalDef'}, 2: {'
-0001bd00: 6e61 6d65 273a 2027 4348 4152 4143 5445  name': 'CHARACTE
-0001bd10: 525f 4752 4f55 505f 4e45 4741 5449 5645  R_GROUP_NEGATIVE
-0001bd20: 5f4d 4f44 4946 4945 5227 2c20 2770 6174  _MODIFIER', 'pat
-0001bd30: 7465 726e 273a 207b 2776 616c 7565 273a  tern': {'value':
-0001bd40: 2027 5e27 2c20 2766 6c61 6773 273a 205b   '^', 'flags': [
-0001bd50: 5d2c 2027 5f5f 7479 7065 5f5f 273a 2027  ], '__type__': '
-0001bd60: 5061 7474 6572 6e53 7472 277d 2c20 2770  PatternStr'}, 'p
-0001bd70: 7269 6f72 6974 7927 3a20 302c 2027 5f5f  riority': 0, '__
-0001bd80: 7479 7065 5f5f 273a 2027 5465 726d 696e  type__': 'Termin
-0001bd90: 616c 4465 6627 7d2c 2033 3a20 7b27 6e61  alDef'}, 3: {'na
-0001bda0: 6d65 273a 2027 4348 4152 4143 5445 525f  me': 'CHARACTER_
-0001bdb0: 434c 4153 5327 2c20 2770 6174 7465 726e  CLASS', 'pattern
-0001bdc0: 273a 207b 2776 616c 7565 273a 2027 283f  ': {'value': '(?
-0001bdd0: 3a5c 5c5c 5c77 7c5c 5c5c 5c57 7c5c 5c5c  :\\\\w|\\\\W|\\\
-0001bde0: 5c64 7c5c 5c5c 5c44 2927 2c20 2766 6c61  \d|\\\\D)', 'fla
-0001bdf0: 6773 273a 205b 5d2c 2027 5f77 6964 7468  gs': [], '_width
-0001be00: 273a 205b 322c 2032 5d2c 2027 5f5f 7479  ': [2, 2], '__ty
-0001be10: 7065 5f5f 273a 2027 5061 7474 6572 6e52  pe__': 'PatternR
-0001be20: 4527 7d2c 2027 7072 696f 7269 7479 273a  E'}, 'priority':
-0001be30: 2030 2c20 275f 5f74 7970 655f 5f27 3a20   0, '__type__': 
-0001be40: 2754 6572 6d69 6e61 6c44 6566 277d 2c20  'TerminalDef'}, 
-0001be50: 343a 207b 276e 616d 6527 3a20 275a 4552  4: {'name': 'ZER
-0001be60: 4f5f 4f52 5f4d 4f52 455f 5155 414e 5449  O_OR_MORE_QUANTI
-0001be70: 4649 4552 272c 2027 7061 7474 6572 6e27  FIER', 'pattern'
-0001be80: 3a20 7b27 7661 6c75 6527 3a20 272a 272c  : {'value': '*',
-0001be90: 2027 666c 6167 7327 3a20 5b5d 2c20 275f   'flags': [], '_
-0001bea0: 5f74 7970 655f 5f27 3a20 2750 6174 7465  _type__': 'Patte
-0001beb0: 726e 5374 7227 7d2c 2027 7072 696f 7269  rnStr'}, 'priori
-0001bec0: 7479 273a 2030 2c20 275f 5f74 7970 655f  ty': 0, '__type_
-0001bed0: 5f27 3a20 2754 6572 6d69 6e61 6c44 6566  _': 'TerminalDef
-0001bee0: 277d 2c20 353a 207b 276e 616d 6527 3a20  '}, 5: {'name': 
-0001bef0: 274f 4e45 5f4f 525f 4d4f 5245 5f51 5541  'ONE_OR_MORE_QUA
-0001bf00: 4e54 4946 4945 5227 2c20 2770 6174 7465  NTIFIER', 'patte
-0001bf10: 726e 273a 207b 2776 616c 7565 273a 2027  rn': {'value': '
-0001bf20: 2b27 2c20 2766 6c61 6773 273a 205b 5d2c  +', 'flags': [],
-0001bf30: 2027 5f5f 7479 7065 5f5f 273a 2027 5061   '__type__': 'Pa
-0001bf40: 7474 6572 6e53 7472 277d 2c20 2770 7269  tternStr'}, 'pri
-0001bf50: 6f72 6974 7927 3a20 302c 2027 5f5f 7479  ority': 0, '__ty
-0001bf60: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001bf70: 4465 6627 7d2c 2036 3a20 7b27 6e61 6d65  Def'}, 6: {'name
-0001bf80: 273a 2027 5a45 524f 5f4f 525f 4f4e 455f  ': 'ZERO_OR_ONE_
-0001bf90: 5155 414e 5449 4649 4552 272c 2027 7061  QUANTIFIER', 'pa
-0001bfa0: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
-0001bfb0: 3a20 273f 272c 2027 666c 6167 7327 3a20  : '?', 'flags': 
-0001bfc0: 5b5d 2c20 275f 5f74 7970 655f 5f27 3a20  [], '__type__': 
-0001bfd0: 2750 6174 7465 726e 5374 7227 7d2c 2027  'PatternStr'}, '
-0001bfe0: 7072 696f 7269 7479 273a 2030 2c20 275f  priority': 0, '_
-0001bff0: 5f74 7970 655f 5f27 3a20 2754 6572 6d69  _type__': 'Termi
-0001c000: 6e61 6c44 6566 277d 2c20 373a 207b 276e  nalDef'}, 7: {'n
-0001c010: 616d 6527 3a20 2742 4143 4b52 4546 4552  ame': 'BACKREFER
-0001c020: 454e 4345 272c 2027 7061 7474 6572 6e27  ENCE', 'pattern'
-0001c030: 3a20 7b27 7661 6c75 6527 3a20 275c 5c5c  : {'value': '\\\
-0001c040: 5c5b 302d 395d 2b27 2c20 2766 6c61 6773  \[0-9]+', 'flags
-0001c050: 273a 205b 5d2c 2027 5f77 6964 7468 273a  ': [], '_width':
-0001c060: 205b 322c 2034 3239 3439 3637 3239 355d   [2, 4294967295]
-0001c070: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
-0001c080: 6174 7465 726e 5245 277d 2c20 2770 7269  atternRE'}, 'pri
-0001c090: 6f72 6974 7927 3a20 302c 2027 5f5f 7479  ority': 0, '__ty
-0001c0a0: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001c0b0: 4465 6627 7d2c 2038 3a20 7b27 6e61 6d65  Def'}, 8: {'name
-0001c0c0: 273a 2027 5354 4152 545f 4f46 5f53 5452  ': 'START_OF_STR
-0001c0d0: 494e 475f 414e 4348 4f52 272c 2027 7061  ING_ANCHOR', 'pa
-0001c0e0: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
-0001c0f0: 3a20 275e 272c 2027 666c 6167 7327 3a20  : '^', 'flags': 
-0001c100: 5b5d 2c20 275f 5f74 7970 655f 5f27 3a20  [], '__type__': 
-0001c110: 2750 6174 7465 726e 5374 7227 7d2c 2027  'PatternStr'}, '
-0001c120: 7072 696f 7269 7479 273a 2030 2c20 275f  priority': 0, '_
-0001c130: 5f74 7970 655f 5f27 3a20 2754 6572 6d69  _type__': 'Termi
-0001c140: 6e61 6c44 6566 277d 2c20 393a 207b 276e  nalDef'}, 9: {'n
-0001c150: 616d 6527 3a20 2741 4e43 484f 5227 2c20  ame': 'ANCHOR', 
-0001c160: 2770 6174 7465 726e 273a 207b 2776 616c  'pattern': {'val
-0001c170: 7565 273a 2027 283f 3a5c 5c5c 5c62 7c5c  ue': '(?:\\\\b|\
-0001c180: 5c5c 5c42 7c5c 5c5c 5c41 7c5c 5c5c 5c7a  \\\B|\\\\A|\\\\z
-0001c190: 7c5c 5c5c 5c5a 7c5c 5c5c 5c47 7c5c 5c24  |\\\\Z|\\\\G|\\$
-0001c1a0: 2927 2c20 2766 6c61 6773 273a 205b 5d2c  )', 'flags': [],
-0001c1b0: 2027 5f77 6964 7468 273a 205b 312c 2032   '_width': [1, 2
-0001c1c0: 5d2c 2027 5f5f 7479 7065 5f5f 273a 2027  ], '__type__': '
-0001c1d0: 5061 7474 6572 6e52 4527 7d2c 2027 7072  PatternRE'}, 'pr
-0001c1e0: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
-0001c1f0: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
-0001c200: 6c44 6566 277d 2c20 3130 3a20 7b27 6e61  lDef'}, 10: {'na
-0001c210: 6d65 273a 2027 494e 5445 4745 5227 2c20  me': 'INTEGER', 
-0001c220: 2770 6174 7465 726e 273a 207b 2776 616c  'pattern': {'val
-0001c230: 7565 273a 2027 5b30 2d39 5d2b 272c 2027  ue': '[0-9]+', '
-0001c240: 666c 6167 7327 3a20 5b5d 2c20 275f 7769  flags': [], '_wi
-0001c250: 6474 6827 3a20 5b31 2c20 3432 3934 3936  dth': [1, 429496
-0001c260: 3732 3935 5d2c 2027 5f5f 7479 7065 5f5f  7295], '__type__
-0001c270: 273a 2027 5061 7474 6572 6e52 4527 7d2c  ': 'PatternRE'},
-0001c280: 2027 7072 696f 7269 7479 273a 2030 2c20   'priority': 0, 
-0001c290: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
-0001c2a0: 6d69 6e61 6c44 6566 277d 2c20 3131 3a20  minalDef'}, 11: 
-0001c2b0: 7b27 6e61 6d65 273a 2027 4c45 5454 4552  {'name': 'LETTER
-0001c2c0: 5327 2c20 2770 6174 7465 726e 273a 207b  S', 'pattern': {
-0001c2d0: 2776 616c 7565 273a 2027 5b61 2d7a 412d  'value': '[a-zA-
-0001c2e0: 5a5d 2b27 2c20 2766 6c61 6773 273a 205b  Z]+', 'flags': [
-0001c2f0: 5d2c 2027 5f77 6964 7468 273a 205b 312c  ], '_width': [1,
-0001c300: 2034 3239 3439 3637 3239 355d 2c20 275f   4294967295], '_
-0001c310: 5f74 7970 655f 5f27 3a20 2750 6174 7465  _type__': 'Patte
-0001c320: 726e 5245 277d 2c20 2770 7269 6f72 6974  rnRE'}, 'priorit
-0001c330: 7927 3a20 302c 2027 5f5f 7479 7065 5f5f  y': 0, '__type__
-0001c340: 273a 2027 5465 726d 696e 616c 4465 6627  ': 'TerminalDef'
-0001c350: 7d2c 2031 323a 207b 276e 616d 6527 3a20  }, 12: {'name': 
-0001c360: 2743 4841 5227 2c20 2770 6174 7465 726e  'CHAR', 'pattern
-0001c370: 273a 207b 2776 616c 7565 273a 2027 5c74  ': {'value': '\t
-0001c380: 7c5c 6e7c 5c72 7c5b 202d 5c75 6437 6666  |\n|\r|[ -\ud7ff
-0001c390: 5d7c 5b5c 7565 3030 302d efbf bd5d 7c5b  ]|[\ue000-...]|[
-0001c3a0: e180 8030 2de1 83bf 4646 5d27 2c20 2766  ...0-...FF]', 'f
-0001c3b0: 6c61 6773 273a 205b 5d2c 2027 5f77 6964  lags': [], '_wid
-0001c3c0: 7468 273a 205b 312c 2031 5d2c 2027 5f5f  th': [1, 1], '__
-0001c3d0: 7479 7065 5f5f 273a 2027 5061 7474 6572  type__': 'Patter
-0001c3e0: 6e52 4527 7d2c 2027 7072 696f 7269 7479  nRE'}, 'priority
-0001c3f0: 273a 2030 2c20 275f 5f74 7970 655f 5f27  ': 0, '__type__'
-0001c400: 3a20 2754 6572 6d69 6e61 6c44 6566 277d  : 'TerminalDef'}
-0001c410: 2c20 3133 3a20 7b27 6e61 6d65 273a 2027  , 13: {'name': '
-0001c420: 5642 4152 272c 2027 7061 7474 6572 6e27  VBAR', 'pattern'
-0001c430: 3a20 7b27 7661 6c75 6527 3a20 277c 272c  : {'value': '|',
-0001c440: 2027 666c 6167 7327 3a20 5b5d 2c20 275f   'flags': [], '_
-0001c450: 5f74 7970 655f 5f27 3a20 2750 6174 7465  _type__': 'Patte
-0001c460: 726e 5374 7227 7d2c 2027 7072 696f 7269  rnStr'}, 'priori
-0001c470: 7479 273a 2030 2c20 275f 5f74 7970 655f  ty': 0, '__type_
-0001c480: 5f27 3a20 2754 6572 6d69 6e61 6c44 6566  _': 'TerminalDef
-0001c490: 277d 2c20 3134 3a20 7b27 6e61 6d65 273a  '}, 14: {'name':
-0001c4a0: 2027 4c50 4152 272c 2027 7061 7474 6572   'LPAR', 'patter
-0001c4b0: 6e27 3a20 7b27 7661 6c75 6527 3a20 2728  n': {'value': '(
-0001c4c0: 272c 2027 666c 6167 7327 3a20 5b5d 2c20  ', 'flags': [], 
-0001c4d0: 275f 5f74 7970 655f 5f27 3a20 2750 6174  '__type__': 'Pat
-0001c4e0: 7465 726e 5374 7227 7d2c 2027 7072 696f  ternStr'}, 'prio
-0001c4f0: 7269 7479 273a 2030 2c20 275f 5f74 7970  rity': 0, '__typ
-0001c500: 655f 5f27 3a20 2754 6572 6d69 6e61 6c44  e__': 'TerminalD
-0001c510: 6566 277d 2c20 3135 3a20 7b27 6e61 6d65  ef'}, 15: {'name
-0001c520: 273a 2027 5250 4152 272c 2027 7061 7474  ': 'RPAR', 'patt
-0001c530: 6572 6e27 3a20 7b27 7661 6c75 6527 3a20  ern': {'value': 
-0001c540: 2729 272c 2027 666c 6167 7327 3a20 5b5d  ')', 'flags': []
-0001c550: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
-0001c560: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
-0001c570: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
-0001c580: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
-0001c590: 6c44 6566 277d 2c20 3136 3a20 7b27 6e61  lDef'}, 16: {'na
-0001c5a0: 6d65 273a 2027 4c53 5142 272c 2027 7061  me': 'LSQB', 'pa
-0001c5b0: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
-0001c5c0: 3a20 275b 272c 2027 666c 6167 7327 3a20  : '[', 'flags': 
-0001c5d0: 5b5d 2c20 275f 5f74 7970 655f 5f27 3a20  [], '__type__': 
-0001c5e0: 2750 6174 7465 726e 5374 7227 7d2c 2027  'PatternStr'}, '
-0001c5f0: 7072 696f 7269 7479 273a 2030 2c20 275f  priority': 0, '_
-0001c600: 5f74 7970 655f 5f27 3a20 2754 6572 6d69  _type__': 'Termi
-0001c610: 6e61 6c44 6566 277d 2c20 3137 3a20 7b27  nalDef'}, 17: {'
-0001c620: 6e61 6d65 273a 2027 5253 5142 272c 2027  name': 'RSQB', '
-0001c630: 7061 7474 6572 6e27 3a20 7b27 7661 6c75  pattern': {'valu
-0001c640: 6527 3a20 275d 272c 2027 666c 6167 7327  e': ']', 'flags'
-0001c650: 3a20 5b5d 2c20 275f 5f74 7970 655f 5f27  : [], '__type__'
-0001c660: 3a20 2750 6174 7465 726e 5374 7227 7d2c  : 'PatternStr'},
-0001c670: 2027 7072 696f 7269 7479 273a 2030 2c20   'priority': 0, 
-0001c680: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
-0001c690: 6d69 6e61 6c44 6566 277d 2c20 3138 3a20  minalDef'}, 18: 
-0001c6a0: 7b27 6e61 6d65 273a 2027 5f5f 414e 4f4e  {'name': '__ANON
-0001c6b0: 5f30 272c 2027 7061 7474 6572 6e27 3a20  _0', 'pattern': 
-0001c6c0: 7b27 7661 6c75 6527 3a20 275c 5c70 7b27  {'value': '\\p{'
-0001c6d0: 2c20 2766 6c61 6773 273a 205b 5d2c 2027  , 'flags': [], '
-0001c6e0: 5f5f 7479 7065 5f5f 273a 2027 5061 7474  __type__': 'Patt
-0001c6f0: 6572 6e53 7472 277d 2c20 2770 7269 6f72  ernStr'}, 'prior
-0001c700: 6974 7927 3a20 302c 2027 5f5f 7479 7065  ity': 0, '__type
-0001c710: 5f5f 273a 2027 5465 726d 696e 616c 4465  __': 'TerminalDe
-0001c720: 6627 7d2c 2031 393a 207b 276e 616d 6527  f'}, 19: {'name'
-0001c730: 3a20 2752 4252 4143 4527 2c20 2770 6174  : 'RBRACE', 'pat
-0001c740: 7465 726e 273a 207b 2776 616c 7565 273a  tern': {'value':
-0001c750: 2027 7d27 2c20 2766 6c61 6773 273a 205b   '}', 'flags': [
-0001c760: 5d2c 2027 5f5f 7479 7065 5f5f 273a 2027  ], '__type__': '
-0001c770: 5061 7474 6572 6e53 7472 277d 2c20 2770  PatternStr'}, 'p
-0001c780: 7269 6f72 6974 7927 3a20 302c 2027 5f5f  riority': 0, '__
-0001c790: 7479 7065 5f5f 273a 2027 5465 726d 696e  type__': 'Termin
-0001c7a0: 616c 4465 6627 7d2c 2032 303a 207b 276e  alDef'}, 20: {'n
-0001c7b0: 616d 6527 3a20 274d 494e 5553 272c 2027  ame': 'MINUS', '
-0001c7c0: 7061 7474 6572 6e27 3a20 7b27 7661 6c75  pattern': {'valu
-0001c7d0: 6527 3a20 272d 272c 2027 666c 6167 7327  e': '-', 'flags'
-0001c7e0: 3a20 5b5d 2c20 275f 5f74 7970 655f 5f27  : [], '__type__'
-0001c7f0: 3a20 2750 6174 7465 726e 5374 7227 7d2c  : 'PatternStr'},
-0001c800: 2027 7072 696f 7269 7479 273a 2030 2c20   'priority': 0, 
-0001c810: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
-0001c820: 6d69 6e61 6c44 6566 277d 2c20 3231 3a20  minalDef'}, 21: 
-0001c830: 7b27 6e61 6d65 273a 2027 434f 4d4d 4127  {'name': 'COMMA'
-0001c840: 2c20 2770 6174 7465 726e 273a 207b 2776  , 'pattern': {'v
-0001c850: 616c 7565 273a 2027 2c27 2c20 2766 6c61  alue': ',', 'fla
-0001c860: 6773 273a 205b 5d2c 2027 5f5f 7479 7065  gs': [], '__type
-0001c870: 5f5f 273a 2027 5061 7474 6572 6e53 7472  __': 'PatternStr
-0001c880: 277d 2c20 2770 7269 6f72 6974 7927 3a20  '}, 'priority': 
-0001c890: 302c 2027 5f5f 7479 7065 5f5f 273a 2027  0, '__type__': '
-0001c8a0: 5465 726d 696e 616c 4465 6627 7d2c 2032  TerminalDef'}, 2
-0001c8b0: 323a 207b 276e 616d 6527 3a20 274c 4252  2: {'name': 'LBR
-0001c8c0: 4143 4527 2c20 2770 6174 7465 726e 273a  ACE', 'pattern':
-0001c8d0: 207b 2776 616c 7565 273a 2027 7b27 2c20   {'value': '{', 
-0001c8e0: 2766 6c61 6773 273a 205b 5d2c 2027 5f5f  'flags': [], '__
-0001c8f0: 7479 7065 5f5f 273a 2027 5061 7474 6572  type__': 'Patter
-0001c900: 6e53 7472 277d 2c20 2770 7269 6f72 6974  nStr'}, 'priorit
-0001c910: 7927 3a20 302c 2027 5f5f 7479 7065 5f5f  y': 0, '__type__
-0001c920: 273a 2027 5465 726d 696e 616c 4465 6627  ': 'TerminalDef'
-0001c930: 7d2c 2032 333a 207b 276f 7269 6769 6e27  }, 23: {'origin'
-0001c940: 3a20 7b27 6e61 6d65 273a 2054 6f6b 656e  : {'name': Token
-0001c950: 2827 5255 4c45 272c 2027 7374 6172 7427  ('RULE', 'start'
-0001c960: 292c 2027 5f5f 7479 7065 5f5f 273a 2027  ), '__type__': '
-0001c970: 4e6f 6e54 6572 6d69 6e61 6c27 7d2c 2027  NonTerminal'}, '
-0001c980: 6578 7061 6e73 696f 6e27 3a20 5b7b 276e  expansion': [{'n
-0001c990: 616d 6527 3a20 2753 5441 5254 5f4f 465f  ame': 'START_OF_
-0001c9a0: 5354 5249 4e47 5f41 4e43 484f 5227 2c20  STRING_ANCHOR', 
-0001c9b0: 2766 696c 7465 725f 6f75 7427 3a20 4661  'filter_out': Fa
-0001c9c0: 6c73 652c 2027 5f5f 7479 7065 5f5f 273a  lse, '__type__':
-0001c9d0: 2027 5465 726d 696e 616c 277d 2c20 7b27   'Terminal'}, {'
-0001c9e0: 6e61 6d65 273a 2027 6578 7072 6573 7369  name': 'expressi
-0001c9f0: 6f6e 272c 2027 5f5f 7479 7065 5f5f 273a  on', '__type__':
-0001ca00: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d5d   'NonTerminal'}]
-0001ca10: 2c20 276f 7264 6572 273a 2030 2c20 2761  , 'order': 0, 'a
-0001ca20: 6c69 6173 273a 204e 6f6e 652c 2027 6f70  lias': None, 'op
-0001ca30: 7469 6f6e 7327 3a20 7b27 6b65 6570 5f61  tions': {'keep_a
-0001ca40: 6c6c 5f74 6f6b 656e 7327 3a20 4661 6c73  ll_tokens': Fals
-0001ca50: 652c 2027 6578 7061 6e64 3127 3a20 4661  e, 'expand1': Fa
-0001ca60: 6c73 652c 2027 7072 696f 7269 7479 273a  lse, 'priority':
-0001ca70: 204e 6f6e 652c 2027 7465 6d70 6c61 7465   None, 'template
-0001ca80: 5f73 6f75 7263 6527 3a20 4e6f 6e65 2c20  _source': None, 
-0001ca90: 2765 6d70 7479 5f69 6e64 6963 6573 273a  'empty_indices':
-0001caa0: 2028 292c 2027 5f5f 7479 7065 5f5f 273a   (), '__type__':
-0001cab0: 2027 5275 6c65 4f70 7469 6f6e 7327 7d2c   'RuleOptions'},
-0001cac0: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-0001cad0: 6c65 277d 2c20 3234 3a20 7b27 6f72 6967  le'}, 24: {'orig
-0001cae0: 696e 273a 207b 276e 616d 6527 3a20 546f  in': {'name': To
-0001caf0: 6b65 6e28 2752 554c 4527 2c20 2773 7461  ken('RULE', 'sta
-0001cb00: 7274 2729 2c20 275f 5f74 7970 655f 5f27  rt'), '__type__'
-0001cb10: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
-0001cb20: 2c20 2765 7870 616e 7369 6f6e 273a 205b  , 'expansion': [
-0001cb30: 7b27 6e61 6d65 273a 2027 6578 7072 6573  {'name': 'expres
-0001cb40: 7369 6f6e 272c 2027 5f5f 7479 7065 5f5f  sion', '__type__
-0001cb50: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
-0001cb60: 7d5d 2c20 276f 7264 6572 273a 2031 2c20  }], 'order': 1, 
-0001cb70: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
-0001cb80: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
-0001cb90: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
-0001cba0: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
-0001cbb0: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
-0001cbc0: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
-0001cbd0: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
-0001cbe0: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
-0001cbf0: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
-0001cc00: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
-0001cc10: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
-0001cc20: 5275 6c65 277d 2c20 3235 3a20 7b27 6f72  Rule'}, 25: {'or
-0001cc30: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
-0001cc40: 546f 6b65 6e28 2752 554c 4527 2c20 2765  Token('RULE', 'e
-0001cc50: 7870 7265 7373 696f 6e27 292c 2027 5f5f  xpression'), '__
-0001cc60: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
-0001cc70: 6d69 6e61 6c27 7d2c 2027 6578 7061 6e73  minal'}, 'expans
-0001cc80: 696f 6e27 3a20 5b7b 276e 616d 6527 3a20  ion': [{'name': 
-0001cc90: 2773 7562 6578 7072 6573 7369 6f6e 272c  'subexpression',
-0001cca0: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
-0001ccb0: 6e54 6572 6d69 6e61 6c27 7d2c 207b 276e  nTerminal'}, {'n
-0001ccc0: 616d 6527 3a20 2756 4241 5227 2c20 2766  ame': 'VBAR', 'f
-0001ccd0: 696c 7465 725f 6f75 7427 3a20 5472 7565  ilter_out': True
-0001cce0: 2c20 275f 5f74 7970 655f 5f27 3a20 2754  , '__type__': 'T
-0001ccf0: 6572 6d69 6e61 6c27 7d2c 207b 276e 616d  erminal'}, {'nam
-0001cd00: 6527 3a20 2765 7870 7265 7373 696f 6e27  e': 'expression'
-0001cd10: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-0001cd20: 6f6e 5465 726d 696e 616c 277d 5d2c 2027  onTerminal'}], '
-0001cd30: 6f72 6465 7227 3a20 302c 2027 616c 6961  order': 0, 'alia
-0001cd40: 7327 3a20 4e6f 6e65 2c20 276f 7074 696f  s': None, 'optio
-0001cd50: 6e73 273a 207b 276b 6565 705f 616c 6c5f  ns': {'keep_all_
-0001cd60: 746f 6b65 6e73 273a 2046 616c 7365 2c20  tokens': False, 
-0001cd70: 2765 7870 616e 6431 273a 2046 616c 7365  'expand1': False
-0001cd80: 2c20 2770 7269 6f72 6974 7927 3a20 4e6f  , 'priority': No
-0001cd90: 6e65 2c20 2774 656d 706c 6174 655f 736f  ne, 'template_so
-0001cda0: 7572 6365 273a 204e 6f6e 652c 2027 656d  urce': None, 'em
-0001cdb0: 7074 795f 696e 6469 6365 7327 3a20 2829  pty_indices': ()
-0001cdc0: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
-0001cdd0: 756c 654f 7074 696f 6e73 277d 2c20 275f  uleOptions'}, '_
-0001cde0: 5f74 7970 655f 5f27 3a20 2752 756c 6527  _type__': 'Rule'
-0001cdf0: 7d2c 2032 363a 207b 276f 7269 6769 6e27  }, 26: {'origin'
-0001ce00: 3a20 7b27 6e61 6d65 273a 2054 6f6b 656e  : {'name': Token
-0001ce10: 2827 5255 4c45 272c 2027 6578 7072 6573  ('RULE', 'expres
-0001ce20: 7369 6f6e 2729 2c20 275f 5f74 7970 655f  sion'), '__type_
-0001ce30: 5f27 3a20 274e 6f6e 5465 726d 696e 616c  _': 'NonTerminal
-0001ce40: 277d 2c20 2765 7870 616e 7369 6f6e 273a  '}, 'expansion':
-0001ce50: 205b 7b27 6e61 6d65 273a 2027 7375 6265   [{'name': 'sube
-0001ce60: 7870 7265 7373 696f 6e27 2c20 275f 5f74  xpression', '__t
-0001ce70: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
-0001ce80: 696e 616c 277d 5d2c 2027 6f72 6465 7227  inal'}], 'order'
-0001ce90: 3a20 312c 2027 616c 6961 7327 3a20 4e6f  : 1, 'alias': No
-0001cea0: 6e65 2c20 276f 7074 696f 6e73 273a 207b  ne, 'options': {
-0001ceb0: 276b 6565 705f 616c 6c5f 746f 6b65 6e73  'keep_all_tokens
-0001cec0: 273a 2046 616c 7365 2c20 2765 7870 616e  ': False, 'expan
-0001ced0: 6431 273a 2046 616c 7365 2c20 2770 7269  d1': False, 'pri
-0001cee0: 6f72 6974 7927 3a20 4e6f 6e65 2c20 2774  ority': None, 't
-0001cef0: 656d 706c 6174 655f 736f 7572 6365 273a  emplate_source':
-0001cf00: 204e 6f6e 652c 2027 656d 7074 795f 696e   None, 'empty_in
-0001cf10: 6469 6365 7327 3a20 2829 2c20 275f 5f74  dices': (), '__t
-0001cf20: 7970 655f 5f27 3a20 2752 756c 654f 7074  ype__': 'RuleOpt
-0001cf30: 696f 6e73 277d 2c20 275f 5f74 7970 655f  ions'}, '__type_
-0001cf40: 5f27 3a20 2752 756c 6527 7d2c 2032 373a  _': 'Rule'}, 27:
-0001cf50: 207b 276f 7269 6769 6e27 3a20 7b27 6e61   {'origin': {'na
-0001cf60: 6d65 273a 2054 6f6b 656e 2827 5255 4c45  me': Token('RULE
-0001cf70: 272c 2027 7375 6265 7870 7265 7373 696f  ', 'subexpressio
-0001cf80: 6e27 292c 2027 5f5f 7479 7065 5f5f 273a  n'), '__type__':
-0001cf90: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
-0001cfa0: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
-0001cfb0: 276e 616d 6527 3a20 275f 5f73 7562 6578  'name': '__subex
-0001cfc0: 7072 6573 7369 6f6e 5f70 6c75 735f 3027  pression_plus_0'
-0001cfd0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-0001cfe0: 6f6e 5465 726d 696e 616c 277d 5d2c 2027  onTerminal'}], '
-0001cff0: 6f72 6465 7227 3a20 302c 2027 616c 6961  order': 0, 'alia
-0001d000: 7327 3a20 4e6f 6e65 2c20 276f 7074 696f  s': None, 'optio
-0001d010: 6e73 273a 207b 276b 6565 705f 616c 6c5f  ns': {'keep_all_
-0001d020: 746f 6b65 6e73 273a 2046 616c 7365 2c20  tokens': False, 
-0001d030: 2765 7870 616e 6431 273a 2046 616c 7365  'expand1': False
-0001d040: 2c20 2770 7269 6f72 6974 7927 3a20 4e6f  , 'priority': No
-0001d050: 6e65 2c20 2774 656d 706c 6174 655f 736f  ne, 'template_so
-0001d060: 7572 6365 273a 204e 6f6e 652c 2027 656d  urce': None, 'em
-0001d070: 7074 795f 696e 6469 6365 7327 3a20 2829  pty_indices': ()
-0001d080: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
-0001d090: 756c 654f 7074 696f 6e73 277d 2c20 275f  uleOptions'}, '_
-0001d0a0: 5f74 7970 655f 5f27 3a20 2752 756c 6527  _type__': 'Rule'
-0001d0b0: 7d2c 2032 383a 207b 276f 7269 6769 6e27  }, 28: {'origin'
-0001d0c0: 3a20 7b27 6e61 6d65 273a 2054 6f6b 656e  : {'name': Token
-0001d0d0: 2827 5255 4c45 272c 2027 7375 6265 7870  ('RULE', 'subexp
-0001d0e0: 7265 7373 696f 6e69 7465 6d27 292c 2027  ressionitem'), '
-0001d0f0: 5f5f 7479 7065 5f5f 273a 2027 4e6f 6e54  __type__': 'NonT
-0001d100: 6572 6d69 6e61 6c27 7d2c 2027 6578 7061  erminal'}, 'expa
-0001d110: 6e73 696f 6e27 3a20 5b7b 276e 616d 6527  nsion': [{'name'
-0001d120: 3a20 276d 6174 6368 272c 2027 5f5f 7479  : 'match', '__ty
-0001d130: 7065 5f5f 273a 2027 4e6f 6e54 6572 6d69  pe__': 'NonTermi
-0001d140: 6e61 6c27 7d5d 2c20 276f 7264 6572 273a  nal'}], 'order':
-0001d150: 2030 2c20 2761 6c69 6173 273a 204e 6f6e   0, 'alias': Non
-0001d160: 652c 2027 6f70 7469 6f6e 7327 3a20 7b27  e, 'options': {'
-0001d170: 6b65 6570 5f61 6c6c 5f74 6f6b 656e 7327  keep_all_tokens'
-0001d180: 3a20 4661 6c73 652c 2027 6578 7061 6e64  : False, 'expand
-0001d190: 3127 3a20 4661 6c73 652c 2027 7072 696f  1': False, 'prio
-0001d1a0: 7269 7479 273a 204e 6f6e 652c 2027 7465  rity': None, 'te
-0001d1b0: 6d70 6c61 7465 5f73 6f75 7263 6527 3a20  mplate_source': 
-0001d1c0: 4e6f 6e65 2c20 2765 6d70 7479 5f69 6e64  None, 'empty_ind
-0001d1d0: 6963 6573 273a 2028 292c 2027 5f5f 7479  ices': (), '__ty
-0001d1e0: 7065 5f5f 273a 2027 5275 6c65 4f70 7469  pe__': 'RuleOpti
-0001d1f0: 6f6e 7327 7d2c 2027 5f5f 7479 7065 5f5f  ons'}, '__type__
-0001d200: 273a 2027 5275 6c65 277d 2c20 3239 3a20  ': 'Rule'}, 29: 
-0001d210: 7b27 6f72 6967 696e 273a 207b 276e 616d  {'origin': {'nam
-0001d220: 6527 3a20 546f 6b65 6e28 2752 554c 4527  e': Token('RULE'
-0001d230: 2c20 2773 7562 6578 7072 6573 7369 6f6e  , 'subexpression
-0001d240: 6974 656d 2729 2c20 275f 5f74 7970 655f  item'), '__type_
-0001d250: 5f27 3a20 274e 6f6e 5465 726d 696e 616c  _': 'NonTerminal
-0001d260: 277d 2c20 2765 7870 616e 7369 6f6e 273a  '}, 'expansion':
-0001d270: 205b 7b27 6e61 6d65 273a 2027 6772 6f75   [{'name': 'grou
-0001d280: 7027 2c20 275f 5f74 7970 655f 5f27 3a20  p', '__type__': 
-0001d290: 274e 6f6e 5465 726d 696e 616c 277d 5d2c  'NonTerminal'}],
-0001d2a0: 2027 6f72 6465 7227 3a20 312c 2027 616c   'order': 1, 'al
-0001d2b0: 6961 7327 3a20 4e6f 6e65 2c20 276f 7074  ias': None, 'opt
-0001d2c0: 696f 6e73 273a 207b 276b 6565 705f 616c  ions': {'keep_al
-0001d2d0: 6c5f 746f 6b65 6e73 273a 2046 616c 7365  l_tokens': False
-0001d2e0: 2c20 2765 7870 616e 6431 273a 2046 616c  , 'expand1': Fal
-0001d2f0: 7365 2c20 2770 7269 6f72 6974 7927 3a20  se, 'priority': 
-0001d300: 4e6f 6e65 2c20 2774 656d 706c 6174 655f  None, 'template_
-0001d310: 736f 7572 6365 273a 204e 6f6e 652c 2027  source': None, '
-0001d320: 656d 7074 795f 696e 6469 6365 7327 3a20  empty_indices': 
-0001d330: 2829 2c20 275f 5f74 7970 655f 5f27 3a20  (), '__type__': 
-0001d340: 2752 756c 654f 7074 696f 6e73 277d 2c20  'RuleOptions'}, 
-0001d350: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
-0001d360: 6527 7d2c 2033 303a 207b 276f 7269 6769  e'}, 30: {'origi
-0001d370: 6e27 3a20 7b27 6e61 6d65 273a 2054 6f6b  n': {'name': Tok
-0001d380: 656e 2827 5255 4c45 272c 2027 7375 6265  en('RULE', 'sube
-0001d390: 7870 7265 7373 696f 6e69 7465 6d27 292c  xpressionitem'),
-0001d3a0: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
-0001d3b0: 6e54 6572 6d69 6e61 6c27 7d2c 2027 6578  nTerminal'}, 'ex
-0001d3c0: 7061 6e73 696f 6e27 3a20 5b7b 276e 616d  pansion': [{'nam
-0001d3d0: 6527 3a20 2741 4e43 484f 5227 2c20 2766  e': 'ANCHOR', 'f
-0001d3e0: 696c 7465 725f 6f75 7427 3a20 4661 6c73  ilter_out': Fals
-0001d3f0: 652c 2027 5f5f 7479 7065 5f5f 273a 2027  e, '__type__': '
-0001d400: 5465 726d 696e 616c 277d 5d2c 2027 6f72  Terminal'}], 'or
-0001d410: 6465 7227 3a20 322c 2027 616c 6961 7327  der': 2, 'alias'
-0001d420: 3a20 4e6f 6e65 2c20 276f 7074 696f 6e73  : None, 'options
-0001d430: 273a 207b 276b 6565 705f 616c 6c5f 746f  ': {'keep_all_to
-0001d440: 6b65 6e73 273a 2046 616c 7365 2c20 2765  kens': False, 'e
-0001d450: 7870 616e 6431 273a 2046 616c 7365 2c20  xpand1': False, 
-0001d460: 2770 7269 6f72 6974 7927 3a20 4e6f 6e65  'priority': None
-0001d470: 2c20 2774 656d 706c 6174 655f 736f 7572  , 'template_sour
-0001d480: 6365 273a 204e 6f6e 652c 2027 656d 7074  ce': None, 'empt
-0001d490: 795f 696e 6469 6365 7327 3a20 2829 2c20  y_indices': (), 
-0001d4a0: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
-0001d4b0: 654f 7074 696f 6e73 277d 2c20 275f 5f74  eOptions'}, '__t
-0001d4c0: 7970 655f 5f27 3a20 2752 756c 6527 7d2c  ype__': 'Rule'},
-0001d4d0: 2033 313a 207b 276f 7269 6769 6e27 3a20   31: {'origin': 
-0001d4e0: 7b27 6e61 6d65 273a 2054 6f6b 656e 2827  {'name': Token('
-0001d4f0: 5255 4c45 272c 2027 7375 6265 7870 7265  RULE', 'subexpre
-0001d500: 7373 696f 6e69 7465 6d27 292c 2027 5f5f  ssionitem'), '__
-0001d510: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
-0001d520: 6d69 6e61 6c27 7d2c 2027 6578 7061 6e73  minal'}, 'expans
-0001d530: 696f 6e27 3a20 5b7b 276e 616d 6527 3a20  ion': [{'name': 
-0001d540: 2742 4143 4b52 4546 4552 454e 4345 272c  'BACKREFERENCE',
-0001d550: 2027 6669 6c74 6572 5f6f 7574 273a 2046   'filter_out': F
-0001d560: 616c 7365 2c20 275f 5f74 7970 655f 5f27  alse, '__type__'
-0001d570: 3a20 2754 6572 6d69 6e61 6c27 7d5d 2c20  : 'Terminal'}], 
-0001d580: 276f 7264 6572 273a 2033 2c20 2761 6c69  'order': 3, 'ali
-0001d590: 6173 273a 204e 6f6e 652c 2027 6f70 7469  as': None, 'opti
-0001d5a0: 6f6e 7327 3a20 7b27 6b65 6570 5f61 6c6c  ons': {'keep_all
-0001d5b0: 5f74 6f6b 656e 7327 3a20 4661 6c73 652c  _tokens': False,
-0001d5c0: 2027 6578 7061 6e64 3127 3a20 4661 6c73   'expand1': Fals
-0001d5d0: 652c 2027 7072 696f 7269 7479 273a 204e  e, 'priority': N
-0001d5e0: 6f6e 652c 2027 7465 6d70 6c61 7465 5f73  one, 'template_s
-0001d5f0: 6f75 7263 6527 3a20 4e6f 6e65 2c20 2765  ource': None, 'e
-0001d600: 6d70 7479 5f69 6e64 6963 6573 273a 2028  mpty_indices': (
-0001d610: 292c 2027 5f5f 7479 7065 5f5f 273a 2027  ), '__type__': '
-0001d620: 5275 6c65 4f70 7469 6f6e 7327 7d2c 2027  RuleOptions'}, '
-0001d630: 5f5f 7479 7065 5f5f 273a 2027 5275 6c65  __type__': 'Rule
-0001d640: 277d 2c20 3332 3a20 7b27 6f72 6967 696e  '}, 32: {'origin
-0001d650: 273a 207b 276e 616d 6527 3a20 546f 6b65  ': {'name': Toke
-0001d660: 6e28 2752 554c 4527 2c20 2767 726f 7570  n('RULE', 'group
-0001d670: 2729 2c20 275f 5f74 7970 655f 5f27 3a20  '), '__type__': 
-0001d680: 274e 6f6e 5465 726d 696e 616c 277d 2c20  'NonTerminal'}, 
-0001d690: 2765 7870 616e 7369 6f6e 273a 205b 7b27  'expansion': [{'
-0001d6a0: 6e61 6d65 273a 2027 4c50 4152 272c 2027  name': 'LPAR', '
-0001d6b0: 6669 6c74 6572 5f6f 7574 273a 2054 7275  filter_out': Tru
-0001d6c0: 652c 2027 5f5f 7479 7065 5f5f 273a 2027  e, '__type__': '
-0001d6d0: 5465 726d 696e 616c 277d 2c20 7b27 6e61  Terminal'}, {'na
-0001d6e0: 6d65 273a 2027 4752 4f55 505f 4e4f 4e5f  me': 'GROUP_NON_
-0001d6f0: 4341 5054 5552 494e 475f 4d4f 4449 4649  CAPTURING_MODIFI
-0001d700: 4552 272c 2027 6669 6c74 6572 5f6f 7574  ER', 'filter_out
-0001d710: 273a 2046 616c 7365 2c20 275f 5f74 7970  ': False, '__typ
-0001d720: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
-0001d730: 7d2c 207b 276e 616d 6527 3a20 2765 7870  }, {'name': 'exp
-0001d740: 7265 7373 696f 6e27 2c20 275f 5f74 7970  ression', '__typ
-0001d750: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
-0001d760: 616c 277d 2c20 7b27 6e61 6d65 273a 2027  al'}, {'name': '
-0001d770: 5250 4152 272c 2027 6669 6c74 6572 5f6f  RPAR', 'filter_o
-0001d780: 7574 273a 2054 7275 652c 2027 5f5f 7479  ut': True, '__ty
-0001d790: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001d7a0: 277d 2c20 7b27 6e61 6d65 273a 2027 7265  '}, {'name': 're
-0001d7b0: 7065 7469 7469 6f6e 272c 2027 5f5f 7479  petition', '__ty
-0001d7c0: 7065 5f5f 273a 2027 4e6f 6e54 6572 6d69  pe__': 'NonTermi
-0001d7d0: 6e61 6c27 7d5d 2c20 276f 7264 6572 273a  nal'}], 'order':
-0001d7e0: 2030 2c20 2761 6c69 6173 273a 204e 6f6e   0, 'alias': Non
-0001d7f0: 652c 2027 6f70 7469 6f6e 7327 3a20 7b27  e, 'options': {'
-0001d800: 6b65 6570 5f61 6c6c 5f74 6f6b 656e 7327  keep_all_tokens'
-0001d810: 3a20 4661 6c73 652c 2027 6578 7061 6e64  : False, 'expand
-0001d820: 3127 3a20 4661 6c73 652c 2027 7072 696f  1': False, 'prio
-0001d830: 7269 7479 273a 204e 6f6e 652c 2027 7465  rity': None, 'te
-0001d840: 6d70 6c61 7465 5f73 6f75 7263 6527 3a20  mplate_source': 
-0001d850: 4e6f 6e65 2c20 2765 6d70 7479 5f69 6e64  None, 'empty_ind
-0001d860: 6963 6573 273a 2028 292c 2027 5f5f 7479  ices': (), '__ty
-0001d870: 7065 5f5f 273a 2027 5275 6c65 4f70 7469  pe__': 'RuleOpti
-0001d880: 6f6e 7327 7d2c 2027 5f5f 7479 7065 5f5f  ons'}, '__type__
-0001d890: 273a 2027 5275 6c65 277d 2c20 3333 3a20  ': 'Rule'}, 33: 
-0001d8a0: 7b27 6f72 6967 696e 273a 207b 276e 616d  {'origin': {'nam
-0001d8b0: 6527 3a20 546f 6b65 6e28 2752 554c 4527  e': Token('RULE'
-0001d8c0: 2c20 2767 726f 7570 2729 2c20 275f 5f74  , 'group'), '__t
-0001d8d0: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
-0001d8e0: 696e 616c 277d 2c20 2765 7870 616e 7369  inal'}, 'expansi
-0001d8f0: 6f6e 273a 205b 7b27 6e61 6d65 273a 2027  on': [{'name': '
-0001d900: 4c50 4152 272c 2027 6669 6c74 6572 5f6f  LPAR', 'filter_o
-0001d910: 7574 273a 2054 7275 652c 2027 5f5f 7479  ut': True, '__ty
-0001d920: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001d930: 277d 2c20 7b27 6e61 6d65 273a 2027 4752  '}, {'name': 'GR
-0001d940: 4f55 505f 4e4f 4e5f 4341 5054 5552 494e  OUP_NON_CAPTURIN
-0001d950: 475f 4d4f 4449 4649 4552 272c 2027 6669  G_MODIFIER', 'fi
-0001d960: 6c74 6572 5f6f 7574 273a 2046 616c 7365  lter_out': False
-0001d970: 2c20 275f 5f74 7970 655f 5f27 3a20 2754  , '__type__': 'T
-0001d980: 6572 6d69 6e61 6c27 7d2c 207b 276e 616d  erminal'}, {'nam
-0001d990: 6527 3a20 2765 7870 7265 7373 696f 6e27  e': 'expression'
-0001d9a0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-0001d9b0: 6f6e 5465 726d 696e 616c 277d 2c20 7b27  onTerminal'}, {'
-0001d9c0: 6e61 6d65 273a 2027 5250 4152 272c 2027  name': 'RPAR', '
-0001d9d0: 6669 6c74 6572 5f6f 7574 273a 2054 7275  filter_out': Tru
-0001d9e0: 652c 2027 5f5f 7479 7065 5f5f 273a 2027  e, '__type__': '
-0001d9f0: 5465 726d 696e 616c 277d 5d2c 2027 6f72  Terminal'}], 'or
-0001da00: 6465 7227 3a20 312c 2027 616c 6961 7327  der': 1, 'alias'
-0001da10: 3a20 4e6f 6e65 2c20 276f 7074 696f 6e73  : None, 'options
-0001da20: 273a 207b 276b 6565 705f 616c 6c5f 746f  ': {'keep_all_to
-0001da30: 6b65 6e73 273a 2046 616c 7365 2c20 2765  kens': False, 'e
-0001da40: 7870 616e 6431 273a 2046 616c 7365 2c20  xpand1': False, 
-0001da50: 2770 7269 6f72 6974 7927 3a20 4e6f 6e65  'priority': None
-0001da60: 2c20 2774 656d 706c 6174 655f 736f 7572  , 'template_sour
-0001da70: 6365 273a 204e 6f6e 652c 2027 656d 7074  ce': None, 'empt
-0001da80: 795f 696e 6469 6365 7327 3a20 2829 2c20  y_indices': (), 
-0001da90: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
-0001daa0: 654f 7074 696f 6e73 277d 2c20 275f 5f74  eOptions'}, '__t
-0001dab0: 7970 655f 5f27 3a20 2752 756c 6527 7d2c  ype__': 'Rule'},
-0001dac0: 2033 343a 207b 276f 7269 6769 6e27 3a20   34: {'origin': 
-0001dad0: 7b27 6e61 6d65 273a 2054 6f6b 656e 2827  {'name': Token('
-0001dae0: 5255 4c45 272c 2027 6772 6f75 7027 292c  RULE', 'group'),
-0001daf0: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
-0001db00: 6e54 6572 6d69 6e61 6c27 7d2c 2027 6578  nTerminal'}, 'ex
-0001db10: 7061 6e73 696f 6e27 3a20 5b7b 276e 616d  pansion': [{'nam
-0001db20: 6527 3a20 274c 5041 5227 2c20 2766 696c  e': 'LPAR', 'fil
-0001db30: 7465 725f 6f75 7427 3a20 5472 7565 2c20  ter_out': True, 
-0001db40: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
-0001db50: 6d69 6e61 6c27 7d2c 207b 276e 616d 6527  minal'}, {'name'
-0001db60: 3a20 2765 7870 7265 7373 696f 6e27 2c20  : 'expression', 
-0001db70: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
-0001db80: 5465 726d 696e 616c 277d 2c20 7b27 6e61  Terminal'}, {'na
-0001db90: 6d65 273a 2027 5250 4152 272c 2027 6669  me': 'RPAR', 'fi
-0001dba0: 6c74 6572 5f6f 7574 273a 2054 7275 652c  lter_out': True,
-0001dbb0: 2027 5f5f 7479 7065 5f5f 273a 2027 5465   '__type__': 'Te
-0001dbc0: 726d 696e 616c 277d 2c20 7b27 6e61 6d65  rminal'}, {'name
-0001dbd0: 273a 2027 7265 7065 7469 7469 6f6e 272c  ': 'repetition',
-0001dbe0: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
-0001dbf0: 6e54 6572 6d69 6e61 6c27 7d5d 2c20 276f  nTerminal'}], 'o
-0001dc00: 7264 6572 273a 2032 2c20 2761 6c69 6173  rder': 2, 'alias
-0001dc10: 273a 204e 6f6e 652c 2027 6f70 7469 6f6e  ': None, 'option
-0001dc20: 7327 3a20 7b27 6b65 6570 5f61 6c6c 5f74  s': {'keep_all_t
-0001dc30: 6f6b 656e 7327 3a20 4661 6c73 652c 2027  okens': False, '
-0001dc40: 6578 7061 6e64 3127 3a20 4661 6c73 652c  expand1': False,
-0001dc50: 2027 7072 696f 7269 7479 273a 204e 6f6e   'priority': Non
-0001dc60: 652c 2027 7465 6d70 6c61 7465 5f73 6f75  e, 'template_sou
-0001dc70: 7263 6527 3a20 4e6f 6e65 2c20 2765 6d70  rce': None, 'emp
-0001dc80: 7479 5f69 6e64 6963 6573 273a 2028 292c  ty_indices': (),
-0001dc90: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-0001dca0: 6c65 4f70 7469 6f6e 7327 7d2c 2027 5f5f  leOptions'}, '__
-0001dcb0: 7479 7065 5f5f 273a 2027 5275 6c65 277d  type__': 'Rule'}
-0001dcc0: 2c20 3335 3a20 7b27 6f72 6967 696e 273a  , 35: {'origin':
-0001dcd0: 207b 276e 616d 6527 3a20 546f 6b65 6e28   {'name': Token(
-0001dce0: 2752 554c 4527 2c20 2767 726f 7570 2729  'RULE', 'group')
-0001dcf0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-0001dd00: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
-0001dd10: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
-0001dd20: 6d65 273a 2027 4c50 4152 272c 2027 6669  me': 'LPAR', 'fi
-0001dd30: 6c74 6572 5f6f 7574 273a 2054 7275 652c  lter_out': True,
-0001dd40: 2027 5f5f 7479 7065 5f5f 273a 2027 5465   '__type__': 'Te
-0001dd50: 726d 696e 616c 277d 2c20 7b27 6e61 6d65  rminal'}, {'name
-0001dd60: 273a 2027 6578 7072 6573 7369 6f6e 272c  ': 'expression',
-0001dd70: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
-0001dd80: 6e54 6572 6d69 6e61 6c27 7d2c 207b 276e  nTerminal'}, {'n
-0001dd90: 616d 6527 3a20 2752 5041 5227 2c20 2766  ame': 'RPAR', 'f
-0001dda0: 696c 7465 725f 6f75 7427 3a20 5472 7565  ilter_out': True
-0001ddb0: 2c20 275f 5f74 7970 655f 5f27 3a20 2754  , '__type__': 'T
-0001ddc0: 6572 6d69 6e61 6c27 7d5d 2c20 276f 7264  erminal'}], 'ord
-0001ddd0: 6572 273a 2033 2c20 2761 6c69 6173 273a  er': 3, 'alias':
-0001dde0: 204e 6f6e 652c 2027 6f70 7469 6f6e 7327   None, 'options'
-0001ddf0: 3a20 7b27 6b65 6570 5f61 6c6c 5f74 6f6b  : {'keep_all_tok
-0001de00: 656e 7327 3a20 4661 6c73 652c 2027 6578  ens': False, 'ex
-0001de10: 7061 6e64 3127 3a20 4661 6c73 652c 2027  pand1': False, '
-0001de20: 7072 696f 7269 7479 273a 204e 6f6e 652c  priority': None,
-0001de30: 2027 7465 6d70 6c61 7465 5f73 6f75 7263   'template_sourc
-0001de40: 6527 3a20 4e6f 6e65 2c20 2765 6d70 7479  e': None, 'empty
-0001de50: 5f69 6e64 6963 6573 273a 2028 292c 2027  _indices': (), '
-0001de60: 5f5f 7479 7065 5f5f 273a 2027 5275 6c65  __type__': 'Rule
-0001de70: 4f70 7469 6f6e 7327 7d2c 2027 5f5f 7479  Options'}, '__ty
-0001de80: 7065 5f5f 273a 2027 5275 6c65 277d 2c20  pe__': 'Rule'}, 
-0001de90: 3336 3a20 7b27 6f72 6967 696e 273a 207b  36: {'origin': {
-0001dea0: 276e 616d 6527 3a20 546f 6b65 6e28 2752  'name': Token('R
-0001deb0: 554c 4527 2c20 276d 6174 6368 2729 2c20  ULE', 'match'), 
-0001dec0: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
-0001ded0: 5465 726d 696e 616c 277d 2c20 2765 7870  Terminal'}, 'exp
-0001dee0: 616e 7369 6f6e 273a 205b 7b27 6e61 6d65  ansion': [{'name
-0001def0: 273a 2027 6d61 7463 6869 7465 6d27 2c20  ': 'matchitem', 
-0001df00: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
-0001df10: 5465 726d 696e 616c 277d 2c20 7b27 6e61  Terminal'}, {'na
-0001df20: 6d65 273a 2027 7265 7065 7469 7469 6f6e  me': 'repetition
-0001df30: 272c 2027 5f5f 7479 7065 5f5f 273a 2027  ', '__type__': '
-0001df40: 4e6f 6e54 6572 6d69 6e61 6c27 7d5d 2c20  NonTerminal'}], 
-0001df50: 276f 7264 6572 273a 2030 2c20 2761 6c69  'order': 0, 'ali
-0001df60: 6173 273a 204e 6f6e 652c 2027 6f70 7469  as': None, 'opti
-0001df70: 6f6e 7327 3a20 7b27 6b65 6570 5f61 6c6c  ons': {'keep_all
-0001df80: 5f74 6f6b 656e 7327 3a20 4661 6c73 652c  _tokens': False,
-0001df90: 2027 6578 7061 6e64 3127 3a20 4661 6c73   'expand1': Fals
-0001dfa0: 652c 2027 7072 696f 7269 7479 273a 204e  e, 'priority': N
-0001dfb0: 6f6e 652c 2027 7465 6d70 6c61 7465 5f73  one, 'template_s
-0001dfc0: 6f75 7263 6527 3a20 4e6f 6e65 2c20 2765  ource': None, 'e
-0001dfd0: 6d70 7479 5f69 6e64 6963 6573 273a 2028  mpty_indices': (
-0001dfe0: 292c 2027 5f5f 7479 7065 5f5f 273a 2027  ), '__type__': '
-0001dff0: 5275 6c65 4f70 7469 6f6e 7327 7d2c 2027  RuleOptions'}, '
-0001e000: 5f5f 7479 7065 5f5f 273a 2027 5275 6c65  __type__': 'Rule
-0001e010: 277d 2c20 3337 3a20 7b27 6f72 6967 696e  '}, 37: {'origin
-0001e020: 273a 207b 276e 616d 6527 3a20 546f 6b65  ': {'name': Toke
-0001e030: 6e28 2752 554c 4527 2c20 276d 6174 6368  n('RULE', 'match
-0001e040: 2729 2c20 275f 5f74 7970 655f 5f27 3a20  '), '__type__': 
-0001e050: 274e 6f6e 5465 726d 696e 616c 277d 2c20  'NonTerminal'}, 
-0001e060: 2765 7870 616e 7369 6f6e 273a 205b 7b27  'expansion': [{'
-0001e070: 6e61 6d65 273a 2027 6d61 7463 6869 7465  name': 'matchite
-0001e080: 6d27 2c20 275f 5f74 7970 655f 5f27 3a20  m', '__type__': 
-0001e090: 274e 6f6e 5465 726d 696e 616c 277d 5d2c  'NonTerminal'}],
-0001e0a0: 2027 6f72 6465 7227 3a20 312c 2027 616c   'order': 1, 'al
-0001e0b0: 6961 7327 3a20 4e6f 6e65 2c20 276f 7074  ias': None, 'opt
-0001e0c0: 696f 6e73 273a 207b 276b 6565 705f 616c  ions': {'keep_al
-0001e0d0: 6c5f 746f 6b65 6e73 273a 2046 616c 7365  l_tokens': False
-0001e0e0: 2c20 2765 7870 616e 6431 273a 2046 616c  , 'expand1': Fal
-0001e0f0: 7365 2c20 2770 7269 6f72 6974 7927 3a20  se, 'priority': 
-0001e100: 4e6f 6e65 2c20 2774 656d 706c 6174 655f  None, 'template_
-0001e110: 736f 7572 6365 273a 204e 6f6e 652c 2027  source': None, '
-0001e120: 656d 7074 795f 696e 6469 6365 7327 3a20  empty_indices': 
-0001e130: 2829 2c20 275f 5f74 7970 655f 5f27 3a20  (), '__type__': 
-0001e140: 2752 756c 654f 7074 696f 6e73 277d 2c20  'RuleOptions'}, 
-0001e150: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
-0001e160: 6527 7d2c 2033 383a 207b 276f 7269 6769  e'}, 38: {'origi
-0001e170: 6e27 3a20 7b27 6e61 6d65 273a 2054 6f6b  n': {'name': Tok
-0001e180: 656e 2827 5255 4c45 272c 2027 6d61 7463  en('RULE', 'matc
-0001e190: 6869 7465 6d27 292c 2027 5f5f 7479 7065  hitem'), '__type
-0001e1a0: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
-0001e1b0: 6c27 7d2c 2027 6578 7061 6e73 696f 6e27  l'}, 'expansion'
-0001e1c0: 3a20 5b7b 276e 616d 6527 3a20 274d 4154  : [{'name': 'MAT
-0001e1d0: 4348 5f41 4e59 5f43 4841 5241 4354 4552  CH_ANY_CHARACTER
-0001e1e0: 272c 2027 6669 6c74 6572 5f6f 7574 273a  ', 'filter_out':
-0001e1f0: 2046 616c 7365 2c20 275f 5f74 7970 655f   False, '__type_
-0001e200: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d5d  _': 'Terminal'}]
-0001e210: 2c20 276f 7264 6572 273a 2030 2c20 2761  , 'order': 0, 'a
-0001e220: 6c69 6173 273a 204e 6f6e 652c 2027 6f70  lias': None, 'op
-0001e230: 7469 6f6e 7327 3a20 7b27 6b65 6570 5f61  tions': {'keep_a
-0001e240: 6c6c 5f74 6f6b 656e 7327 3a20 4661 6c73  ll_tokens': Fals
-0001e250: 652c 2027 6578 7061 6e64 3127 3a20 4661  e, 'expand1': Fa
-0001e260: 6c73 652c 2027 7072 696f 7269 7479 273a  lse, 'priority':
-0001e270: 204e 6f6e 652c 2027 7465 6d70 6c61 7465   None, 'template
-0001e280: 5f73 6f75 7263 6527 3a20 4e6f 6e65 2c20  _source': None, 
-0001e290: 2765 6d70 7479 5f69 6e64 6963 6573 273a  'empty_indices':
-0001e2a0: 2028 292c 2027 5f5f 7479 7065 5f5f 273a   (), '__type__':
-0001e2b0: 2027 5275 6c65 4f70 7469 6f6e 7327 7d2c   'RuleOptions'},
-0001e2c0: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-0001e2d0: 6c65 277d 2c20 3339 3a20 7b27 6f72 6967  le'}, 39: {'orig
-0001e2e0: 696e 273a 207b 276e 616d 6527 3a20 546f  in': {'name': To
-0001e2f0: 6b65 6e28 2752 554c 4527 2c20 276d 6174  ken('RULE', 'mat
-0001e300: 6368 6974 656d 2729 2c20 275f 5f74 7970  chitem'), '__typ
-0001e310: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
-0001e320: 616c 277d 2c20 2765 7870 616e 7369 6f6e  al'}, 'expansion
-0001e330: 273a 205b 7b27 6e61 6d65 273a 2027 6d61  ': [{'name': 'ma
-0001e340: 7463 685f 6368 6172 6163 7465 725f 636c  tch_character_cl
-0001e350: 6173 7327 2c20 275f 5f74 7970 655f 5f27  ass', '__type__'
-0001e360: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
-0001e370: 5d2c 2027 6f72 6465 7227 3a20 312c 2027  ], 'order': 1, '
-0001e380: 616c 6961 7327 3a20 4e6f 6e65 2c20 276f  alias': None, 'o
-0001e390: 7074 696f 6e73 273a 207b 276b 6565 705f  ptions': {'keep_
-0001e3a0: 616c 6c5f 746f 6b65 6e73 273a 2046 616c  all_tokens': Fal
-0001e3b0: 7365 2c20 2765 7870 616e 6431 273a 2046  se, 'expand1': F
-0001e3c0: 616c 7365 2c20 2770 7269 6f72 6974 7927  alse, 'priority'
-0001e3d0: 3a20 4e6f 6e65 2c20 2774 656d 706c 6174  : None, 'templat
-0001e3e0: 655f 736f 7572 6365 273a 204e 6f6e 652c  e_source': None,
-0001e3f0: 2027 656d 7074 795f 696e 6469 6365 7327   'empty_indices'
-0001e400: 3a20 2829 2c20 275f 5f74 7970 655f 5f27  : (), '__type__'
-0001e410: 3a20 2752 756c 654f 7074 696f 6e73 277d  : 'RuleOptions'}
-0001e420: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
-0001e430: 756c 6527 7d2c 2034 303a 207b 276f 7269  ule'}, 40: {'ori
-0001e440: 6769 6e27 3a20 7b27 6e61 6d65 273a 2054  gin': {'name': T
-0001e450: 6f6b 656e 2827 5255 4c45 272c 2027 6d61  oken('RULE', 'ma
-0001e460: 7463 6869 7465 6d27 292c 2027 5f5f 7479  tchitem'), '__ty
-0001e470: 7065 5f5f 273a 2027 4e6f 6e54 6572 6d69  pe__': 'NonTermi
-0001e480: 6e61 6c27 7d2c 2027 6578 7061 6e73 696f  nal'}, 'expansio
-0001e490: 6e27 3a20 5b7b 276e 616d 6527 3a20 2743  n': [{'name': 'C
-0001e4a0: 4841 5227 2c20 2766 696c 7465 725f 6f75  HAR', 'filter_ou
-0001e4b0: 7427 3a20 4661 6c73 652c 2027 5f5f 7479  t': False, '__ty
-0001e4c0: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001e4d0: 277d 5d2c 2027 6f72 6465 7227 3a20 322c  '}], 'order': 2,
-0001e4e0: 2027 616c 6961 7327 3a20 4e6f 6e65 2c20   'alias': None, 
-0001e4f0: 276f 7074 696f 6e73 273a 207b 276b 6565  'options': {'kee
-0001e500: 705f 616c 6c5f 746f 6b65 6e73 273a 2046  p_all_tokens': F
-0001e510: 616c 7365 2c20 2765 7870 616e 6431 273a  alse, 'expand1':
-0001e520: 2046 616c 7365 2c20 2770 7269 6f72 6974   False, 'priorit
-0001e530: 7927 3a20 4e6f 6e65 2c20 2774 656d 706c  y': None, 'templ
-0001e540: 6174 655f 736f 7572 6365 273a 204e 6f6e  ate_source': Non
-0001e550: 652c 2027 656d 7074 795f 696e 6469 6365  e, 'empty_indice
-0001e560: 7327 3a20 2829 2c20 275f 5f74 7970 655f  s': (), '__type_
-0001e570: 5f27 3a20 2752 756c 654f 7074 696f 6e73  _': 'RuleOptions
-0001e580: 277d 2c20 275f 5f74 7970 655f 5f27 3a20  '}, '__type__': 
-0001e590: 2752 756c 6527 7d2c 2034 313a 207b 276f  'Rule'}, 41: {'o
-0001e5a0: 7269 6769 6e27 3a20 7b27 6e61 6d65 273a  rigin': {'name':
-0001e5b0: 2054 6f6b 656e 2827 5255 4c45 272c 2027   Token('RULE', '
-0001e5c0: 6d61 7463 685f 6368 6172 6163 7465 725f  match_character_
-0001e5d0: 636c 6173 7327 292c 2027 5f5f 7479 7065  class'), '__type
-0001e5e0: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
-0001e5f0: 6c27 7d2c 2027 6578 7061 6e73 696f 6e27  l'}, 'expansion'
-0001e600: 3a20 5b7b 276e 616d 6527 3a20 2763 6861  : [{'name': 'cha
-0001e610: 7261 6374 6572 5f67 726f 7570 272c 2027  racter_group', '
-0001e620: 5f5f 7479 7065 5f5f 273a 2027 4e6f 6e54  __type__': 'NonT
-0001e630: 6572 6d69 6e61 6c27 7d5d 2c20 276f 7264  erminal'}], 'ord
-0001e640: 6572 273a 2030 2c20 2761 6c69 6173 273a  er': 0, 'alias':
-0001e650: 204e 6f6e 652c 2027 6f70 7469 6f6e 7327   None, 'options'
-0001e660: 3a20 7b27 6b65 6570 5f61 6c6c 5f74 6f6b  : {'keep_all_tok
-0001e670: 656e 7327 3a20 4661 6c73 652c 2027 6578  ens': False, 'ex
-0001e680: 7061 6e64 3127 3a20 4661 6c73 652c 2027  pand1': False, '
-0001e690: 7072 696f 7269 7479 273a 204e 6f6e 652c  priority': None,
-0001e6a0: 2027 7465 6d70 6c61 7465 5f73 6f75 7263   'template_sourc
-0001e6b0: 6527 3a20 4e6f 6e65 2c20 2765 6d70 7479  e': None, 'empty
-0001e6c0: 5f69 6e64 6963 6573 273a 2028 292c 2027  _indices': (), '
-0001e6d0: 5f5f 7479 7065 5f5f 273a 2027 5275 6c65  __type__': 'Rule
-0001e6e0: 4f70 7469 6f6e 7327 7d2c 2027 5f5f 7479  Options'}, '__ty
-0001e6f0: 7065 5f5f 273a 2027 5275 6c65 277d 2c20  pe__': 'Rule'}, 
-0001e700: 3432 3a20 7b27 6f72 6967 696e 273a 207b  42: {'origin': {
-0001e710: 276e 616d 6527 3a20 546f 6b65 6e28 2752  'name': Token('R
-0001e720: 554c 4527 2c20 276d 6174 6368 5f63 6861  ULE', 'match_cha
-0001e730: 7261 6374 6572 5f63 6c61 7373 2729 2c20  racter_class'), 
-0001e740: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
-0001e750: 5465 726d 696e 616c 277d 2c20 2765 7870  Terminal'}, 'exp
-0001e760: 616e 7369 6f6e 273a 205b 7b27 6e61 6d65  ansion': [{'name
-0001e770: 273a 2027 4348 4152 4143 5445 525f 434c  ': 'CHARACTER_CL
-0001e780: 4153 5327 2c20 2766 696c 7465 725f 6f75  ASS', 'filter_ou
-0001e790: 7427 3a20 4661 6c73 652c 2027 5f5f 7479  t': False, '__ty
-0001e7a0: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001e7b0: 277d 5d2c 2027 6f72 6465 7227 3a20 312c  '}], 'order': 1,
-0001e7c0: 2027 616c 6961 7327 3a20 4e6f 6e65 2c20   'alias': None, 
-0001e7d0: 276f 7074 696f 6e73 273a 207b 276b 6565  'options': {'kee
-0001e7e0: 705f 616c 6c5f 746f 6b65 6e73 273a 2046  p_all_tokens': F
-0001e7f0: 616c 7365 2c20 2765 7870 616e 6431 273a  alse, 'expand1':
-0001e800: 2046 616c 7365 2c20 2770 7269 6f72 6974   False, 'priorit
-0001e810: 7927 3a20 4e6f 6e65 2c20 2774 656d 706c  y': None, 'templ
-0001e820: 6174 655f 736f 7572 6365 273a 204e 6f6e  ate_source': Non
-0001e830: 652c 2027 656d 7074 795f 696e 6469 6365  e, 'empty_indice
-0001e840: 7327 3a20 2829 2c20 275f 5f74 7970 655f  s': (), '__type_
-0001e850: 5f27 3a20 2752 756c 654f 7074 696f 6e73  _': 'RuleOptions
-0001e860: 277d 2c20 275f 5f74 7970 655f 5f27 3a20  '}, '__type__': 
-0001e870: 2752 756c 6527 7d2c 2034 333a 207b 276f  'Rule'}, 43: {'o
-0001e880: 7269 6769 6e27 3a20 7b27 6e61 6d65 273a  rigin': {'name':
-0001e890: 2054 6f6b 656e 2827 5255 4c45 272c 2027   Token('RULE', '
-0001e8a0: 6d61 7463 685f 6368 6172 6163 7465 725f  match_character_
-0001e8b0: 636c 6173 7327 292c 2027 5f5f 7479 7065  class'), '__type
-0001e8c0: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
-0001e8d0: 6c27 7d2c 2027 6578 7061 6e73 696f 6e27  l'}, 'expansion'
-0001e8e0: 3a20 5b7b 276e 616d 6527 3a20 2763 6861  : [{'name': 'cha
-0001e8f0: 7261 6374 6572 5f63 6c61 7373 5f66 726f  racter_class_fro
-0001e900: 6d5f 756e 6963 6f64 655f 6361 7465 676f  m_unicode_catego
-0001e910: 7279 272c 2027 5f5f 7479 7065 5f5f 273a  ry', '__type__':
-0001e920: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d5d   'NonTerminal'}]
-0001e930: 2c20 276f 7264 6572 273a 2032 2c20 2761  , 'order': 2, 'a
-0001e940: 6c69 6173 273a 204e 6f6e 652c 2027 6f70  lias': None, 'op
-0001e950: 7469 6f6e 7327 3a20 7b27 6b65 6570 5f61  tions': {'keep_a
-0001e960: 6c6c 5f74 6f6b 656e 7327 3a20 4661 6c73  ll_tokens': Fals
-0001e970: 652c 2027 6578 7061 6e64 3127 3a20 4661  e, 'expand1': Fa
-0001e980: 6c73 652c 2027 7072 696f 7269 7479 273a  lse, 'priority':
-0001e990: 204e 6f6e 652c 2027 7465 6d70 6c61 7465   None, 'template
-0001e9a0: 5f73 6f75 7263 6527 3a20 4e6f 6e65 2c20  _source': None, 
-0001e9b0: 2765 6d70 7479 5f69 6e64 6963 6573 273a  'empty_indices':
-0001e9c0: 2028 292c 2027 5f5f 7479 7065 5f5f 273a   (), '__type__':
-0001e9d0: 2027 5275 6c65 4f70 7469 6f6e 7327 7d2c   'RuleOptions'},
-0001e9e0: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-0001e9f0: 6c65 277d 2c20 3434 3a20 7b27 6f72 6967  le'}, 44: {'orig
-0001ea00: 696e 273a 207b 276e 616d 6527 3a20 546f  in': {'name': To
-0001ea10: 6b65 6e28 2752 554c 4527 2c20 2763 6861  ken('RULE', 'cha
-0001ea20: 7261 6374 6572 5f67 726f 7570 2729 2c20  racter_group'), 
-0001ea30: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
-0001ea40: 5465 726d 696e 616c 277d 2c20 2765 7870  Terminal'}, 'exp
-0001ea50: 616e 7369 6f6e 273a 205b 7b27 6e61 6d65  ansion': [{'name
-0001ea60: 273a 2027 4c53 5142 272c 2027 6669 6c74  ': 'LSQB', 'filt
-0001ea70: 6572 5f6f 7574 273a 2054 7275 652c 2027  er_out': True, '
-0001ea80: 5f5f 7479 7065 5f5f 273a 2027 5465 726d  __type__': 'Term
-0001ea90: 696e 616c 277d 2c20 7b27 6e61 6d65 273a  inal'}, {'name':
-0001eaa0: 2027 4348 4152 4143 5445 525f 4752 4f55   'CHARACTER_GROU
-0001eab0: 505f 4e45 4741 5449 5645 5f4d 4f44 4946  P_NEGATIVE_MODIF
-0001eac0: 4945 5227 2c20 2766 696c 7465 725f 6f75  IER', 'filter_ou
-0001ead0: 7427 3a20 4661 6c73 652c 2027 5f5f 7479  t': False, '__ty
-0001eae0: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001eaf0: 277d 2c20 7b27 6e61 6d65 273a 2027 5f5f  '}, {'name': '__
-0001eb00: 6368 6172 6163 7465 725f 6772 6f75 705f  character_group_
-0001eb10: 706c 7573 5f31 272c 2027 5f5f 7479 7065  plus_1', '__type
-0001eb20: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
-0001eb30: 6c27 7d2c 207b 276e 616d 6527 3a20 2752  l'}, {'name': 'R
-0001eb40: 5351 4227 2c20 2766 696c 7465 725f 6f75  SQB', 'filter_ou
-0001eb50: 7427 3a20 5472 7565 2c20 275f 5f74 7970  t': True, '__typ
-0001eb60: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
-0001eb70: 7d5d 2c20 276f 7264 6572 273a 2030 2c20  }], 'order': 0, 
-0001eb80: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
-0001eb90: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
-0001eba0: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
-0001ebb0: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
-0001ebc0: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
-0001ebd0: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
-0001ebe0: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
-0001ebf0: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
-0001ec00: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
-0001ec10: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
-0001ec20: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
-0001ec30: 5275 6c65 277d 2c20 3435 3a20 7b27 6f72  Rule'}, 45: {'or
-0001ec40: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
-0001ec50: 546f 6b65 6e28 2752 554c 4527 2c20 2763  Token('RULE', 'c
-0001ec60: 6861 7261 6374 6572 5f67 726f 7570 2729  haracter_group')
-0001ec70: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-0001ec80: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
-0001ec90: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
-0001eca0: 6d65 273a 2027 4c53 5142 272c 2027 6669  me': 'LSQB', 'fi
-0001ecb0: 6c74 6572 5f6f 7574 273a 2054 7275 652c  lter_out': True,
-0001ecc0: 2027 5f5f 7479 7065 5f5f 273a 2027 5465   '__type__': 'Te
-0001ecd0: 726d 696e 616c 277d 2c20 7b27 6e61 6d65  rminal'}, {'name
-0001ece0: 273a 2027 5f5f 6368 6172 6163 7465 725f  ': '__character_
-0001ecf0: 6772 6f75 705f 706c 7573 5f31 272c 2027  group_plus_1', '
-0001ed00: 5f5f 7479 7065 5f5f 273a 2027 4e6f 6e54  __type__': 'NonT
-0001ed10: 6572 6d69 6e61 6c27 7d2c 207b 276e 616d  erminal'}, {'nam
-0001ed20: 6527 3a20 2752 5351 4227 2c20 2766 696c  e': 'RSQB', 'fil
-0001ed30: 7465 725f 6f75 7427 3a20 5472 7565 2c20  ter_out': True, 
-0001ed40: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
-0001ed50: 6d69 6e61 6c27 7d5d 2c20 276f 7264 6572  minal'}], 'order
-0001ed60: 273a 2031 2c20 2761 6c69 6173 273a 204e  ': 1, 'alias': N
-0001ed70: 6f6e 652c 2027 6f70 7469 6f6e 7327 3a20  one, 'options': 
-0001ed80: 7b27 6b65 6570 5f61 6c6c 5f74 6f6b 656e  {'keep_all_token
-0001ed90: 7327 3a20 4661 6c73 652c 2027 6578 7061  s': False, 'expa
-0001eda0: 6e64 3127 3a20 4661 6c73 652c 2027 7072  nd1': False, 'pr
-0001edb0: 696f 7269 7479 273a 204e 6f6e 652c 2027  iority': None, '
-0001edc0: 7465 6d70 6c61 7465 5f73 6f75 7263 6527  template_source'
-0001edd0: 3a20 4e6f 6e65 2c20 2765 6d70 7479 5f69  : None, 'empty_i
-0001ede0: 6e64 6963 6573 273a 2028 292c 2027 5f5f  ndices': (), '__
-0001edf0: 7479 7065 5f5f 273a 2027 5275 6c65 4f70  type__': 'RuleOp
-0001ee00: 7469 6f6e 7327 7d2c 2027 5f5f 7479 7065  tions'}, '__type
-0001ee10: 5f5f 273a 2027 5275 6c65 277d 2c20 3436  __': 'Rule'}, 46
-0001ee20: 3a20 7b27 6f72 6967 696e 273a 207b 276e  : {'origin': {'n
-0001ee30: 616d 6527 3a20 546f 6b65 6e28 2752 554c  ame': Token('RUL
-0001ee40: 4527 2c20 2763 6861 7261 6374 6572 5f67  E', 'character_g
-0001ee50: 726f 7570 5f69 7465 6d27 292c 2027 5f5f  roup_item'), '__
-0001ee60: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
-0001ee70: 6d69 6e61 6c27 7d2c 2027 6578 7061 6e73  minal'}, 'expans
-0001ee80: 696f 6e27 3a20 5b7b 276e 616d 6527 3a20  ion': [{'name': 
-0001ee90: 2743 4841 5241 4354 4552 5f43 4c41 5353  'CHARACTER_CLASS
-0001eea0: 272c 2027 6669 6c74 6572 5f6f 7574 273a  ', 'filter_out':
-0001eeb0: 2046 616c 7365 2c20 275f 5f74 7970 655f   False, '__type_
-0001eec0: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d5d  _': 'Terminal'}]
-0001eed0: 2c20 276f 7264 6572 273a 2030 2c20 2761  , 'order': 0, 'a
-0001eee0: 6c69 6173 273a 204e 6f6e 652c 2027 6f70  lias': None, 'op
-0001eef0: 7469 6f6e 7327 3a20 7b27 6b65 6570 5f61  tions': {'keep_a
-0001ef00: 6c6c 5f74 6f6b 656e 7327 3a20 4661 6c73  ll_tokens': Fals
-0001ef10: 652c 2027 6578 7061 6e64 3127 3a20 4661  e, 'expand1': Fa
-0001ef20: 6c73 652c 2027 7072 696f 7269 7479 273a  lse, 'priority':
-0001ef30: 204e 6f6e 652c 2027 7465 6d70 6c61 7465   None, 'template
-0001ef40: 5f73 6f75 7263 6527 3a20 4e6f 6e65 2c20  _source': None, 
-0001ef50: 2765 6d70 7479 5f69 6e64 6963 6573 273a  'empty_indices':
-0001ef60: 2028 292c 2027 5f5f 7479 7065 5f5f 273a   (), '__type__':
-0001ef70: 2027 5275 6c65 4f70 7469 6f6e 7327 7d2c   'RuleOptions'},
-0001ef80: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-0001ef90: 6c65 277d 2c20 3437 3a20 7b27 6f72 6967  le'}, 47: {'orig
-0001efa0: 696e 273a 207b 276e 616d 6527 3a20 546f  in': {'name': To
-0001efb0: 6b65 6e28 2752 554c 4527 2c20 2763 6861  ken('RULE', 'cha
-0001efc0: 7261 6374 6572 5f67 726f 7570 5f69 7465  racter_group_ite
-0001efd0: 6d27 292c 2027 5f5f 7479 7065 5f5f 273a  m'), '__type__':
-0001efe0: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
-0001eff0: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
-0001f000: 276e 616d 6527 3a20 2763 6861 7261 6374  'name': 'charact
-0001f010: 6572 5f63 6c61 7373 5f66 726f 6d5f 756e  er_class_from_un
-0001f020: 6963 6f64 655f 6361 7465 676f 7279 272c  icode_category',
-0001f030: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
-0001f040: 6e54 6572 6d69 6e61 6c27 7d5d 2c20 276f  nTerminal'}], 'o
-0001f050: 7264 6572 273a 2031 2c20 2761 6c69 6173  rder': 1, 'alias
-0001f060: 273a 204e 6f6e 652c 2027 6f70 7469 6f6e  ': None, 'option
-0001f070: 7327 3a20 7b27 6b65 6570 5f61 6c6c 5f74  s': {'keep_all_t
-0001f080: 6f6b 656e 7327 3a20 4661 6c73 652c 2027  okens': False, '
-0001f090: 6578 7061 6e64 3127 3a20 4661 6c73 652c  expand1': False,
-0001f0a0: 2027 7072 696f 7269 7479 273a 204e 6f6e   'priority': Non
-0001f0b0: 652c 2027 7465 6d70 6c61 7465 5f73 6f75  e, 'template_sou
-0001f0c0: 7263 6527 3a20 4e6f 6e65 2c20 2765 6d70  rce': None, 'emp
-0001f0d0: 7479 5f69 6e64 6963 6573 273a 2028 292c  ty_indices': (),
-0001f0e0: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-0001f0f0: 6c65 4f70 7469 6f6e 7327 7d2c 2027 5f5f  leOptions'}, '__
-0001f100: 7479 7065 5f5f 273a 2027 5275 6c65 277d  type__': 'Rule'}
-0001f110: 2c20 3438 3a20 7b27 6f72 6967 696e 273a  , 48: {'origin':
-0001f120: 207b 276e 616d 6527 3a20 546f 6b65 6e28   {'name': Token(
-0001f130: 2752 554c 4527 2c20 2763 6861 7261 6374  'RULE', 'charact
-0001f140: 6572 5f67 726f 7570 5f69 7465 6d27 292c  er_group_item'),
-0001f150: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
-0001f160: 6e54 6572 6d69 6e61 6c27 7d2c 2027 6578  nTerminal'}, 'ex
-0001f170: 7061 6e73 696f 6e27 3a20 5b7b 276e 616d  pansion': [{'nam
-0001f180: 6527 3a20 2763 6861 7261 6374 6572 5f72  e': 'character_r
-0001f190: 616e 6765 272c 2027 5f5f 7479 7065 5f5f  ange', '__type__
-0001f1a0: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
-0001f1b0: 7d5d 2c20 276f 7264 6572 273a 2032 2c20  }], 'order': 2, 
-0001f1c0: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
-0001f1d0: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
-0001f1e0: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
-0001f1f0: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
-0001f200: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
-0001f210: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
-0001f220: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
-0001f230: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
-0001f240: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
-0001f250: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
-0001f260: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
-0001f270: 5275 6c65 277d 2c20 3439 3a20 7b27 6f72  Rule'}, 49: {'or
-0001f280: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
-0001f290: 546f 6b65 6e28 2752 554c 4527 2c20 2763  Token('RULE', 'c
-0001f2a0: 6861 7261 6374 6572 5f67 726f 7570 5f69  haracter_group_i
-0001f2b0: 7465 6d27 292c 2027 5f5f 7479 7065 5f5f  tem'), '__type__
-0001f2c0: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
-0001f2d0: 7d2c 2027 6578 7061 6e73 696f 6e27 3a20  }, 'expansion': 
-0001f2e0: 5b7b 276e 616d 6527 3a20 2743 4841 5227  [{'name': 'CHAR'
-0001f2f0: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
-0001f300: 4661 6c73 652c 2027 5f5f 7479 7065 5f5f  False, '__type__
-0001f310: 273a 2027 5465 726d 696e 616c 277d 5d2c  ': 'Terminal'}],
-0001f320: 2027 6f72 6465 7227 3a20 332c 2027 616c   'order': 3, 'al
-0001f330: 6961 7327 3a20 4e6f 6e65 2c20 276f 7074  ias': None, 'opt
-0001f340: 696f 6e73 273a 207b 276b 6565 705f 616c  ions': {'keep_al
-0001f350: 6c5f 746f 6b65 6e73 273a 2046 616c 7365  l_tokens': False
-0001f360: 2c20 2765 7870 616e 6431 273a 2046 616c  , 'expand1': Fal
-0001f370: 7365 2c20 2770 7269 6f72 6974 7927 3a20  se, 'priority': 
-0001f380: 4e6f 6e65 2c20 2774 656d 706c 6174 655f  None, 'template_
-0001f390: 736f 7572 6365 273a 204e 6f6e 652c 2027  source': None, '
-0001f3a0: 656d 7074 795f 696e 6469 6365 7327 3a20  empty_indices': 
-0001f3b0: 2829 2c20 275f 5f74 7970 655f 5f27 3a20  (), '__type__': 
-0001f3c0: 2752 756c 654f 7074 696f 6e73 277d 2c20  'RuleOptions'}, 
-0001f3d0: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
-0001f3e0: 6527 7d2c 2035 303a 207b 276f 7269 6769  e'}, 50: {'origi
-0001f3f0: 6e27 3a20 7b27 6e61 6d65 273a 2054 6f6b  n': {'name': Tok
-0001f400: 656e 2827 5255 4c45 272c 2027 6368 6172  en('RULE', 'char
-0001f410: 6163 7465 725f 636c 6173 735f 6672 6f6d  acter_class_from
-0001f420: 5f75 6e69 636f 6465 5f63 6174 6567 6f72  _unicode_categor
-0001f430: 7927 292c 2027 5f5f 7479 7065 5f5f 273a  y'), '__type__':
-0001f440: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
-0001f450: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
-0001f460: 276e 616d 6527 3a20 275f 5f41 4e4f 4e5f  'name': '__ANON_
-0001f470: 3027 2c20 2766 696c 7465 725f 6f75 7427  0', 'filter_out'
-0001f480: 3a20 5472 7565 2c20 275f 5f74 7970 655f  : True, '__type_
-0001f490: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d2c  _': 'Terminal'},
-0001f4a0: 207b 276e 616d 6527 3a20 274c 4554 5445   {'name': 'LETTE
-0001f4b0: 5253 272c 2027 6669 6c74 6572 5f6f 7574  RS', 'filter_out
-0001f4c0: 273a 2046 616c 7365 2c20 275f 5f74 7970  ': False, '__typ
-0001f4d0: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
-0001f4e0: 7d2c 207b 276e 616d 6527 3a20 2752 4252  }, {'name': 'RBR
-0001f4f0: 4143 4527 2c20 2766 696c 7465 725f 6f75  ACE', 'filter_ou
-0001f500: 7427 3a20 5472 7565 2c20 275f 5f74 7970  t': True, '__typ
-0001f510: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
-0001f520: 7d5d 2c20 276f 7264 6572 273a 2030 2c20  }], 'order': 0, 
-0001f530: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
-0001f540: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
-0001f550: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
-0001f560: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
-0001f570: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
-0001f580: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
-0001f590: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
-0001f5a0: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
-0001f5b0: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
-0001f5c0: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
-0001f5d0: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
-0001f5e0: 5275 6c65 277d 2c20 3531 3a20 7b27 6f72  Rule'}, 51: {'or
-0001f5f0: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
-0001f600: 546f 6b65 6e28 2752 554c 4527 2c20 2763  Token('RULE', 'c
-0001f610: 6861 7261 6374 6572 5f72 616e 6765 2729  haracter_range')
-0001f620: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-0001f630: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
-0001f640: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
-0001f650: 6d65 273a 2027 4348 4152 272c 2027 6669  me': 'CHAR', 'fi
-0001f660: 6c74 6572 5f6f 7574 273a 2046 616c 7365  lter_out': False
-0001f670: 2c20 275f 5f74 7970 655f 5f27 3a20 2754  , '__type__': 'T
-0001f680: 6572 6d69 6e61 6c27 7d2c 207b 276e 616d  erminal'}, {'nam
-0001f690: 6527 3a20 274d 494e 5553 272c 2027 6669  e': 'MINUS', 'fi
-0001f6a0: 6c74 6572 5f6f 7574 273a 2054 7275 652c  lter_out': True,
-0001f6b0: 2027 5f5f 7479 7065 5f5f 273a 2027 5465   '__type__': 'Te
-0001f6c0: 726d 696e 616c 277d 2c20 7b27 6e61 6d65  rminal'}, {'name
-0001f6d0: 273a 2027 4348 4152 272c 2027 6669 6c74  ': 'CHAR', 'filt
-0001f6e0: 6572 5f6f 7574 273a 2046 616c 7365 2c20  er_out': False, 
-0001f6f0: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
-0001f700: 6d69 6e61 6c27 7d5d 2c20 276f 7264 6572  minal'}], 'order
-0001f710: 273a 2030 2c20 2761 6c69 6173 273a 204e  ': 0, 'alias': N
-0001f720: 6f6e 652c 2027 6f70 7469 6f6e 7327 3a20  one, 'options': 
-0001f730: 7b27 6b65 6570 5f61 6c6c 5f74 6f6b 656e  {'keep_all_token
-0001f740: 7327 3a20 4661 6c73 652c 2027 6578 7061  s': False, 'expa
-0001f750: 6e64 3127 3a20 4661 6c73 652c 2027 7072  nd1': False, 'pr
-0001f760: 696f 7269 7479 273a 204e 6f6e 652c 2027  iority': None, '
-0001f770: 7465 6d70 6c61 7465 5f73 6f75 7263 6527  template_source'
-0001f780: 3a20 4e6f 6e65 2c20 2765 6d70 7479 5f69  : None, 'empty_i
-0001f790: 6e64 6963 6573 273a 2028 292c 2027 5f5f  ndices': (), '__
-0001f7a0: 7479 7065 5f5f 273a 2027 5275 6c65 4f70  type__': 'RuleOp
-0001f7b0: 7469 6f6e 7327 7d2c 2027 5f5f 7479 7065  tions'}, '__type
-0001f7c0: 5f5f 273a 2027 5275 6c65 277d 2c20 3532  __': 'Rule'}, 52
-0001f7d0: 3a20 7b27 6f72 6967 696e 273a 207b 276e  : {'origin': {'n
-0001f7e0: 616d 6527 3a20 546f 6b65 6e28 2752 554c  ame': Token('RUL
-0001f7f0: 4527 2c20 2772 6570 6574 6974 696f 6e27  E', 'repetition'
-0001f800: 292c 2027 5f5f 7479 7065 5f5f 273a 2027  ), '__type__': '
-0001f810: 4e6f 6e54 6572 6d69 6e61 6c27 7d2c 2027  NonTerminal'}, '
-0001f820: 6578 7061 6e73 696f 6e27 3a20 5b7b 276e  expansion': [{'n
-0001f830: 616d 6527 3a20 2772 6570 6574 6974 696f  ame': 'repetitio
-0001f840: 6e5f 7479 7065 272c 2027 5f5f 7479 7065  n_type', '__type
-0001f850: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
-0001f860: 6c27 7d5d 2c20 276f 7264 6572 273a 2030  l'}], 'order': 0
-0001f870: 2c20 2761 6c69 6173 273a 204e 6f6e 652c  , 'alias': None,
-0001f880: 2027 6f70 7469 6f6e 7327 3a20 7b27 6b65   'options': {'ke
-0001f890: 6570 5f61 6c6c 5f74 6f6b 656e 7327 3a20  ep_all_tokens': 
-0001f8a0: 4661 6c73 652c 2027 6578 7061 6e64 3127  False, 'expand1'
-0001f8b0: 3a20 4661 6c73 652c 2027 7072 696f 7269  : False, 'priori
-0001f8c0: 7479 273a 204e 6f6e 652c 2027 7465 6d70  ty': None, 'temp
-0001f8d0: 6c61 7465 5f73 6f75 7263 6527 3a20 4e6f  late_source': No
-0001f8e0: 6e65 2c20 2765 6d70 7479 5f69 6e64 6963  ne, 'empty_indic
-0001f8f0: 6573 273a 2028 292c 2027 5f5f 7479 7065  es': (), '__type
-0001f900: 5f5f 273a 2027 5275 6c65 4f70 7469 6f6e  __': 'RuleOption
-0001f910: 7327 7d2c 2027 5f5f 7479 7065 5f5f 273a  s'}, '__type__':
-0001f920: 2027 5275 6c65 277d 2c20 3533 3a20 7b27   'Rule'}, 53: {'
-0001f930: 6f72 6967 696e 273a 207b 276e 616d 6527  origin': {'name'
-0001f940: 3a20 546f 6b65 6e28 2752 554c 4527 2c20  : Token('RULE', 
-0001f950: 2772 6570 6574 6974 696f 6e5f 7479 7065  'repetition_type
-0001f960: 2729 2c20 275f 5f74 7970 655f 5f27 3a20  '), '__type__': 
-0001f970: 274e 6f6e 5465 726d 696e 616c 277d 2c20  'NonTerminal'}, 
-0001f980: 2765 7870 616e 7369 6f6e 273a 205b 7b27  'expansion': [{'
-0001f990: 6e61 6d65 273a 2027 5a45 524f 5f4f 525f  name': 'ZERO_OR_
-0001f9a0: 4d4f 5245 5f51 5541 4e54 4946 4945 5227  MORE_QUANTIFIER'
-0001f9b0: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
-0001f9c0: 4661 6c73 652c 2027 5f5f 7479 7065 5f5f  False, '__type__
-0001f9d0: 273a 2027 5465 726d 696e 616c 277d 5d2c  ': 'Terminal'}],
-0001f9e0: 2027 6f72 6465 7227 3a20 302c 2027 616c   'order': 0, 'al
-0001f9f0: 6961 7327 3a20 4e6f 6e65 2c20 276f 7074  ias': None, 'opt
-0001fa00: 696f 6e73 273a 207b 276b 6565 705f 616c  ions': {'keep_al
-0001fa10: 6c5f 746f 6b65 6e73 273a 2046 616c 7365  l_tokens': False
-0001fa20: 2c20 2765 7870 616e 6431 273a 2046 616c  , 'expand1': Fal
-0001fa30: 7365 2c20 2770 7269 6f72 6974 7927 3a20  se, 'priority': 
-0001fa40: 4e6f 6e65 2c20 2774 656d 706c 6174 655f  None, 'template_
-0001fa50: 736f 7572 6365 273a 204e 6f6e 652c 2027  source': None, '
-0001fa60: 656d 7074 795f 696e 6469 6365 7327 3a20  empty_indices': 
-0001fa70: 2829 2c20 275f 5f74 7970 655f 5f27 3a20  (), '__type__': 
-0001fa80: 2752 756c 654f 7074 696f 6e73 277d 2c20  'RuleOptions'}, 
-0001fa90: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
-0001faa0: 6527 7d2c 2035 343a 207b 276f 7269 6769  e'}, 54: {'origi
-0001fab0: 6e27 3a20 7b27 6e61 6d65 273a 2054 6f6b  n': {'name': Tok
-0001fac0: 656e 2827 5255 4c45 272c 2027 7265 7065  en('RULE', 'repe
-0001fad0: 7469 7469 6f6e 5f74 7970 6527 292c 2027  tition_type'), '
-0001fae0: 5f5f 7479 7065 5f5f 273a 2027 4e6f 6e54  __type__': 'NonT
-0001faf0: 6572 6d69 6e61 6c27 7d2c 2027 6578 7061  erminal'}, 'expa
-0001fb00: 6e73 696f 6e27 3a20 5b7b 276e 616d 6527  nsion': [{'name'
-0001fb10: 3a20 274f 4e45 5f4f 525f 4d4f 5245 5f51  : 'ONE_OR_MORE_Q
-0001fb20: 5541 4e54 4946 4945 5227 2c20 2766 696c  UANTIFIER', 'fil
-0001fb30: 7465 725f 6f75 7427 3a20 4661 6c73 652c  ter_out': False,
-0001fb40: 2027 5f5f 7479 7065 5f5f 273a 2027 5465   '__type__': 'Te
-0001fb50: 726d 696e 616c 277d 5d2c 2027 6f72 6465  rminal'}], 'orde
-0001fb60: 7227 3a20 312c 2027 616c 6961 7327 3a20  r': 1, 'alias': 
-0001fb70: 4e6f 6e65 2c20 276f 7074 696f 6e73 273a  None, 'options':
-0001fb80: 207b 276b 6565 705f 616c 6c5f 746f 6b65   {'keep_all_toke
-0001fb90: 6e73 273a 2046 616c 7365 2c20 2765 7870  ns': False, 'exp
-0001fba0: 616e 6431 273a 2046 616c 7365 2c20 2770  and1': False, 'p
-0001fbb0: 7269 6f72 6974 7927 3a20 4e6f 6e65 2c20  riority': None, 
-0001fbc0: 2774 656d 706c 6174 655f 736f 7572 6365  'template_source
-0001fbd0: 273a 204e 6f6e 652c 2027 656d 7074 795f  ': None, 'empty_
-0001fbe0: 696e 6469 6365 7327 3a20 2829 2c20 275f  indices': (), '_
-0001fbf0: 5f74 7970 655f 5f27 3a20 2752 756c 654f  _type__': 'RuleO
-0001fc00: 7074 696f 6e73 277d 2c20 275f 5f74 7970  ptions'}, '__typ
-0001fc10: 655f 5f27 3a20 2752 756c 6527 7d2c 2035  e__': 'Rule'}, 5
-0001fc20: 353a 207b 276f 7269 6769 6e27 3a20 7b27  5: {'origin': {'
-0001fc30: 6e61 6d65 273a 2054 6f6b 656e 2827 5255  name': Token('RU
-0001fc40: 4c45 272c 2027 7265 7065 7469 7469 6f6e  LE', 'repetition
-0001fc50: 5f74 7970 6527 292c 2027 5f5f 7479 7065  _type'), '__type
-0001fc60: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
-0001fc70: 6c27 7d2c 2027 6578 7061 6e73 696f 6e27  l'}, 'expansion'
-0001fc80: 3a20 5b7b 276e 616d 6527 3a20 275a 4552  : [{'name': 'ZER
-0001fc90: 4f5f 4f52 5f4f 4e45 5f51 5541 4e54 4946  O_OR_ONE_QUANTIF
-0001fca0: 4945 5227 2c20 2766 696c 7465 725f 6f75  IER', 'filter_ou
-0001fcb0: 7427 3a20 4661 6c73 652c 2027 5f5f 7479  t': False, '__ty
-0001fcc0: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
-0001fcd0: 277d 5d2c 2027 6f72 6465 7227 3a20 322c  '}], 'order': 2,
-0001fce0: 2027 616c 6961 7327 3a20 4e6f 6e65 2c20   'alias': None, 
-0001fcf0: 276f 7074 696f 6e73 273a 207b 276b 6565  'options': {'kee
-0001fd00: 705f 616c 6c5f 746f 6b65 6e73 273a 2046  p_all_tokens': F
-0001fd10: 616c 7365 2c20 2765 7870 616e 6431 273a  alse, 'expand1':
-0001fd20: 2046 616c 7365 2c20 2770 7269 6f72 6974   False, 'priorit
-0001fd30: 7927 3a20 4e6f 6e65 2c20 2774 656d 706c  y': None, 'templ
-0001fd40: 6174 655f 736f 7572 6365 273a 204e 6f6e  ate_source': Non
-0001fd50: 652c 2027 656d 7074 795f 696e 6469 6365  e, 'empty_indice
-0001fd60: 7327 3a20 2829 2c20 275f 5f74 7970 655f  s': (), '__type_
-0001fd70: 5f27 3a20 2752 756c 654f 7074 696f 6e73  _': 'RuleOptions
-0001fd80: 277d 2c20 275f 5f74 7970 655f 5f27 3a20  '}, '__type__': 
-0001fd90: 2752 756c 6527 7d2c 2035 363a 207b 276f  'Rule'}, 56: {'o
-0001fda0: 7269 6769 6e27 3a20 7b27 6e61 6d65 273a  rigin': {'name':
-0001fdb0: 2054 6f6b 656e 2827 5255 4c45 272c 2027   Token('RULE', '
-0001fdc0: 7265 7065 7469 7469 6f6e 5f74 7970 6527  repetition_type'
-0001fdd0: 292c 2027 5f5f 7479 7065 5f5f 273a 2027  ), '__type__': '
-0001fde0: 4e6f 6e54 6572 6d69 6e61 6c27 7d2c 2027  NonTerminal'}, '
-0001fdf0: 6578 7061 6e73 696f 6e27 3a20 5b7b 276e  expansion': [{'n
-0001fe00: 616d 6527 3a20 2772 616e 6765 272c 2027  ame': 'range', '
-0001fe10: 5f5f 7479 7065 5f5f 273a 2027 4e6f 6e54  __type__': 'NonT
-0001fe20: 6572 6d69 6e61 6c27 7d5d 2c20 276f 7264  erminal'}], 'ord
-0001fe30: 6572 273a 2033 2c20 2761 6c69 6173 273a  er': 3, 'alias':
-0001fe40: 204e 6f6e 652c 2027 6f70 7469 6f6e 7327   None, 'options'
-0001fe50: 3a20 7b27 6b65 6570 5f61 6c6c 5f74 6f6b  : {'keep_all_tok
-0001fe60: 656e 7327 3a20 4661 6c73 652c 2027 6578  ens': False, 'ex
-0001fe70: 7061 6e64 3127 3a20 4661 6c73 652c 2027  pand1': False, '
-0001fe80: 7072 696f 7269 7479 273a 204e 6f6e 652c  priority': None,
-0001fe90: 2027 7465 6d70 6c61 7465 5f73 6f75 7263   'template_sourc
-0001fea0: 6527 3a20 4e6f 6e65 2c20 2765 6d70 7479  e': None, 'empty
-0001feb0: 5f69 6e64 6963 6573 273a 2028 292c 2027  _indices': (), '
-0001fec0: 5f5f 7479 7065 5f5f 273a 2027 5275 6c65  __type__': 'Rule
-0001fed0: 4f70 7469 6f6e 7327 7d2c 2027 5f5f 7479  Options'}, '__ty
-0001fee0: 7065 5f5f 273a 2027 5275 6c65 277d 2c20  pe__': 'Rule'}, 
-0001fef0: 3537 3a20 7b27 6f72 6967 696e 273a 207b  57: {'origin': {
-0001ff00: 276e 616d 6527 3a20 546f 6b65 6e28 2752  'name': Token('R
-0001ff10: 554c 4527 2c20 2772 616e 6765 2729 2c20  ULE', 'range'), 
-0001ff20: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
-0001ff30: 5465 726d 696e 616c 277d 2c20 2765 7870  Terminal'}, 'exp
-0001ff40: 616e 7369 6f6e 273a 205b 7b27 6e61 6d65  ansion': [{'name
-0001ff50: 273a 2027 4c42 5241 4345 272c 2027 6669  ': 'LBRACE', 'fi
-0001ff60: 6c74 6572 5f6f 7574 273a 2054 7275 652c  lter_out': True,
-0001ff70: 2027 5f5f 7479 7065 5f5f 273a 2027 5465   '__type__': 'Te
-0001ff80: 726d 696e 616c 277d 2c20 7b27 6e61 6d65  rminal'}, {'name
-0001ff90: 273a 2027 494e 5445 4745 5227 2c20 2766  ': 'INTEGER', 'f
-0001ffa0: 696c 7465 725f 6f75 7427 3a20 4661 6c73  ilter_out': Fals
-0001ffb0: 652c 2027 5f5f 7479 7065 5f5f 273a 2027  e, '__type__': '
-0001ffc0: 5465 726d 696e 616c 277d 2c20 7b27 6e61  Terminal'}, {'na
-0001ffd0: 6d65 273a 2027 434f 4d4d 4127 2c20 2766  me': 'COMMA', 'f
-0001ffe0: 696c 7465 725f 6f75 7427 3a20 5472 7565  ilter_out': True
-0001fff0: 2c20 275f 5f74 7970 655f 5f27 3a20 2754  , '__type__': 'T
-00020000: 6572 6d69 6e61 6c27 7d2c 207b 276e 616d  erminal'}, {'nam
-00020010: 6527 3a20 2749 4e54 4547 4552 272c 2027  e': 'INTEGER', '
-00020020: 6669 6c74 6572 5f6f 7574 273a 2046 616c  filter_out': Fal
-00020030: 7365 2c20 275f 5f74 7970 655f 5f27 3a20  se, '__type__': 
-00020040: 2754 6572 6d69 6e61 6c27 7d2c 207b 276e  'Terminal'}, {'n
-00020050: 616d 6527 3a20 2752 4252 4143 4527 2c20  ame': 'RBRACE', 
-00020060: 2766 696c 7465 725f 6f75 7427 3a20 5472  'filter_out': Tr
-00020070: 7565 2c20 275f 5f74 7970 655f 5f27 3a20  ue, '__type__': 
-00020080: 2754 6572 6d69 6e61 6c27 7d5d 2c20 276f  'Terminal'}], 'o
-00020090: 7264 6572 273a 2030 2c20 2761 6c69 6173  rder': 0, 'alias
-000200a0: 273a 204e 6f6e 652c 2027 6f70 7469 6f6e  ': None, 'option
-000200b0: 7327 3a20 7b27 6b65 6570 5f61 6c6c 5f74  s': {'keep_all_t
-000200c0: 6f6b 656e 7327 3a20 4661 6c73 652c 2027  okens': False, '
-000200d0: 6578 7061 6e64 3127 3a20 4661 6c73 652c  expand1': False,
-000200e0: 2027 7072 696f 7269 7479 273a 204e 6f6e   'priority': Non
-000200f0: 652c 2027 7465 6d70 6c61 7465 5f73 6f75  e, 'template_sou
-00020100: 7263 6527 3a20 4e6f 6e65 2c20 2765 6d70  rce': None, 'emp
-00020110: 7479 5f69 6e64 6963 6573 273a 2028 292c  ty_indices': (),
-00020120: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-00020130: 6c65 4f70 7469 6f6e 7327 7d2c 2027 5f5f  leOptions'}, '__
-00020140: 7479 7065 5f5f 273a 2027 5275 6c65 277d  type__': 'Rule'}
-00020150: 2c20 3538 3a20 7b27 6f72 6967 696e 273a  , 58: {'origin':
-00020160: 207b 276e 616d 6527 3a20 546f 6b65 6e28   {'name': Token(
-00020170: 2752 554c 4527 2c20 2772 616e 6765 2729  'RULE', 'range')
-00020180: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-00020190: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
-000201a0: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
-000201b0: 6d65 273a 2027 4c42 5241 4345 272c 2027  me': 'LBRACE', '
-000201c0: 6669 6c74 6572 5f6f 7574 273a 2054 7275  filter_out': Tru
-000201d0: 652c 2027 5f5f 7479 7065 5f5f 273a 2027  e, '__type__': '
-000201e0: 5465 726d 696e 616c 277d 2c20 7b27 6e61  Terminal'}, {'na
-000201f0: 6d65 273a 2027 494e 5445 4745 5227 2c20  me': 'INTEGER', 
-00020200: 2766 696c 7465 725f 6f75 7427 3a20 4661  'filter_out': Fa
-00020210: 6c73 652c 2027 5f5f 7479 7065 5f5f 273a  lse, '__type__':
-00020220: 2027 5465 726d 696e 616c 277d 2c20 7b27   'Terminal'}, {'
-00020230: 6e61 6d65 273a 2027 434f 4d4d 4127 2c20  name': 'COMMA', 
-00020240: 2766 696c 7465 725f 6f75 7427 3a20 5472  'filter_out': Tr
-00020250: 7565 2c20 275f 5f74 7970 655f 5f27 3a20  ue, '__type__': 
-00020260: 2754 6572 6d69 6e61 6c27 7d2c 207b 276e  'Terminal'}, {'n
-00020270: 616d 6527 3a20 2752 4252 4143 4527 2c20  ame': 'RBRACE', 
-00020280: 2766 696c 7465 725f 6f75 7427 3a20 5472  'filter_out': Tr
-00020290: 7565 2c20 275f 5f74 7970 655f 5f27 3a20  ue, '__type__': 
-000202a0: 2754 6572 6d69 6e61 6c27 7d5d 2c20 276f  'Terminal'}], 'o
-000202b0: 7264 6572 273a 2031 2c20 2761 6c69 6173  rder': 1, 'alias
-000202c0: 273a 204e 6f6e 652c 2027 6f70 7469 6f6e  ': None, 'option
-000202d0: 7327 3a20 7b27 6b65 6570 5f61 6c6c 5f74  s': {'keep_all_t
-000202e0: 6f6b 656e 7327 3a20 4661 6c73 652c 2027  okens': False, '
-000202f0: 6578 7061 6e64 3127 3a20 4661 6c73 652c  expand1': False,
-00020300: 2027 7072 696f 7269 7479 273a 204e 6f6e   'priority': Non
-00020310: 652c 2027 7465 6d70 6c61 7465 5f73 6f75  e, 'template_sou
-00020320: 7263 6527 3a20 4e6f 6e65 2c20 2765 6d70  rce': None, 'emp
-00020330: 7479 5f69 6e64 6963 6573 273a 2028 292c  ty_indices': (),
-00020340: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
-00020350: 6c65 4f70 7469 6f6e 7327 7d2c 2027 5f5f  leOptions'}, '__
-00020360: 7479 7065 5f5f 273a 2027 5275 6c65 277d  type__': 'Rule'}
-00020370: 2c20 3539 3a20 7b27 6f72 6967 696e 273a  , 59: {'origin':
-00020380: 207b 276e 616d 6527 3a20 546f 6b65 6e28   {'name': Token(
-00020390: 2752 554c 4527 2c20 2772 616e 6765 2729  'RULE', 'range')
-000203a0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
-000203b0: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
-000203c0: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
-000203d0: 6d65 273a 2027 4c42 5241 4345 272c 2027  me': 'LBRACE', '
-000203e0: 6669 6c74 6572 5f6f 7574 273a 2054 7275  filter_out': Tru
-000203f0: 652c 2027 5f5f 7479 7065 5f5f 273a 2027  e, '__type__': '
-00020400: 5465 726d 696e 616c 277d 2c20 7b27 6e61  Terminal'}, {'na
-00020410: 6d65 273a 2027 494e 5445 4745 5227 2c20  me': 'INTEGER', 
-00020420: 2766 696c 7465 725f 6f75 7427 3a20 4661  'filter_out': Fa
-00020430: 6c73 652c 2027 5f5f 7479 7065 5f5f 273a  lse, '__type__':
-00020440: 2027 5465 726d 696e 616c 277d 2c20 7b27   'Terminal'}, {'
-00020450: 6e61 6d65 273a 2027 5242 5241 4345 272c  name': 'RBRACE',
-00020460: 2027 6669 6c74 6572 5f6f 7574 273a 2054   'filter_out': T
-00020470: 7275 652c 2027 5f5f 7479 7065 5f5f 273a  rue, '__type__':
-00020480: 2027 5465 726d 696e 616c 277d 5d2c 2027   'Terminal'}], '
-00020490: 6f72 6465 7227 3a20 322c 2027 616c 6961  order': 2, 'alia
-000204a0: 7327 3a20 4e6f 6e65 2c20 276f 7074 696f  s': None, 'optio
-000204b0: 6e73 273a 207b 276b 6565 705f 616c 6c5f  ns': {'keep_all_
-000204c0: 746f 6b65 6e73 273a 2046 616c 7365 2c20  tokens': False, 
-000204d0: 2765 7870 616e 6431 273a 2046 616c 7365  'expand1': False
-000204e0: 2c20 2770 7269 6f72 6974 7927 3a20 4e6f  , 'priority': No
-000204f0: 6e65 2c20 2774 656d 706c 6174 655f 736f  ne, 'template_so
-00020500: 7572 6365 273a 204e 6f6e 652c 2027 656d  urce': None, 'em
-00020510: 7074 795f 696e 6469 6365 7327 3a20 2829  pty_indices': ()
-00020520: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
-00020530: 756c 654f 7074 696f 6e73 277d 2c20 275f  uleOptions'}, '_
-00020540: 5f74 7970 655f 5f27 3a20 2752 756c 6527  _type__': 'Rule'
-00020550: 7d2c 2036 303a 207b 276f 7269 6769 6e27  }, 60: {'origin'
-00020560: 3a20 7b27 6e61 6d65 273a 2027 5f5f 7375  : {'name': '__su
-00020570: 6265 7870 7265 7373 696f 6e5f 706c 7573  bexpression_plus
-00020580: 5f30 272c 2027 5f5f 7479 7065 5f5f 273a  _0', '__type__':
-00020590: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
-000205a0: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
-000205b0: 276e 616d 6527 3a20 2773 7562 6578 7072  'name': 'subexpr
-000205c0: 6573 7369 6f6e 6974 656d 272c 2027 5f5f  essionitem', '__
-000205d0: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
-000205e0: 6d69 6e61 6c27 7d5d 2c20 276f 7264 6572  minal'}], 'order
-000205f0: 273a 2030 2c20 2761 6c69 6173 273a 204e  ': 0, 'alias': N
-00020600: 6f6e 652c 2027 6f70 7469 6f6e 7327 3a20  one, 'options': 
-00020610: 7b27 6b65 6570 5f61 6c6c 5f74 6f6b 656e  {'keep_all_token
-00020620: 7327 3a20 4661 6c73 652c 2027 6578 7061  s': False, 'expa
-00020630: 6e64 3127 3a20 4661 6c73 652c 2027 7072  nd1': False, 'pr
-00020640: 696f 7269 7479 273a 204e 6f6e 652c 2027  iority': None, '
-00020650: 7465 6d70 6c61 7465 5f73 6f75 7263 6527  template_source'
-00020660: 3a20 4e6f 6e65 2c20 2765 6d70 7479 5f69  : None, 'empty_i
-00020670: 6e64 6963 6573 273a 2028 292c 2027 5f5f  ndices': (), '__
-00020680: 7479 7065 5f5f 273a 2027 5275 6c65 4f70  type__': 'RuleOp
-00020690: 7469 6f6e 7327 7d2c 2027 5f5f 7479 7065  tions'}, '__type
-000206a0: 5f5f 273a 2027 5275 6c65 277d 2c20 3631  __': 'Rule'}, 61
-000206b0: 3a20 7b27 6f72 6967 696e 273a 207b 276e  : {'origin': {'n
-000206c0: 616d 6527 3a20 275f 5f73 7562 6578 7072  ame': '__subexpr
-000206d0: 6573 7369 6f6e 5f70 6c75 735f 3027 2c20  ession_plus_0', 
-000206e0: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
-000206f0: 5465 726d 696e 616c 277d 2c20 2765 7870  Terminal'}, 'exp
-00020700: 616e 7369 6f6e 273a 205b 7b27 6e61 6d65  ansion': [{'name
-00020710: 273a 2027 5f5f 7375 6265 7870 7265 7373  ': '__subexpress
-00020720: 696f 6e5f 706c 7573 5f30 272c 2027 5f5f  ion_plus_0', '__
-00020730: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
-00020740: 6d69 6e61 6c27 7d2c 207b 276e 616d 6527  minal'}, {'name'
-00020750: 3a20 2773 7562 6578 7072 6573 7369 6f6e  : 'subexpression
-00020760: 6974 656d 272c 2027 5f5f 7479 7065 5f5f  item', '__type__
-00020770: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
-00020780: 7d5d 2c20 276f 7264 6572 273a 2031 2c20  }], 'order': 1, 
-00020790: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
-000207a0: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
-000207b0: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
-000207c0: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
-000207d0: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
-000207e0: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
-000207f0: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
-00020800: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
-00020810: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
-00020820: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
-00020830: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
-00020840: 5275 6c65 277d 2c20 3632 3a20 7b27 6f72  Rule'}, 62: {'or
-00020850: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
-00020860: 275f 5f63 6861 7261 6374 6572 5f67 726f  '__character_gro
-00020870: 7570 5f70 6c75 735f 3127 2c20 275f 5f74  up_plus_1', '__t
-00020880: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
-00020890: 696e 616c 277d 2c20 2765 7870 616e 7369  inal'}, 'expansi
-000208a0: 6f6e 273a 205b 7b27 6e61 6d65 273a 2027  on': [{'name': '
-000208b0: 6368 6172 6163 7465 725f 6772 6f75 705f  character_group_
-000208c0: 6974 656d 272c 2027 5f5f 7479 7065 5f5f  item', '__type__
-000208d0: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
-000208e0: 7d5d 2c20 276f 7264 6572 273a 2030 2c20  }], 'order': 0, 
-000208f0: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
-00020900: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
-00020910: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
-00020920: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
-00020930: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
-00020940: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
-00020950: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
-00020960: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
-00020970: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
-00020980: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
-00020990: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
-000209a0: 5275 6c65 277d 2c20 3633 3a20 7b27 6f72  Rule'}, 63: {'or
-000209b0: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
-000209c0: 275f 5f63 6861 7261 6374 6572 5f67 726f  '__character_gro
-000209d0: 7570 5f70 6c75 735f 3127 2c20 275f 5f74  up_plus_1', '__t
-000209e0: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
-000209f0: 696e 616c 277d 2c20 2765 7870 616e 7369  inal'}, 'expansi
-00020a00: 6f6e 273a 205b 7b27 6e61 6d65 273a 2027  on': [{'name': '
-00020a10: 5f5f 6368 6172 6163 7465 725f 6772 6f75  __character_grou
-00020a20: 705f 706c 7573 5f31 272c 2027 5f5f 7479  p_plus_1', '__ty
-00020a30: 7065 5f5f 273a 2027 4e6f 6e54 6572 6d69  pe__': 'NonTermi
-00020a40: 6e61 6c27 7d2c 207b 276e 616d 6527 3a20  nal'}, {'name': 
-00020a50: 2763 6861 7261 6374 6572 5f67 726f 7570  'character_group
-00020a60: 5f69 7465 6d27 2c20 275f 5f74 7970 655f  _item', '__type_
-00020a70: 5f27 3a20 274e 6f6e 5465 726d 696e 616c  _': 'NonTerminal
-00020a80: 277d 5d2c 2027 6f72 6465 7227 3a20 312c  '}], 'order': 1,
-00020a90: 2027 616c 6961 7327 3a20 4e6f 6e65 2c20   'alias': None, 
-00020aa0: 276f 7074 696f 6e73 273a 207b 276b 6565  'options': {'kee
-00020ab0: 705f 616c 6c5f 746f 6b65 6e73 273a 2046  p_all_tokens': F
-00020ac0: 616c 7365 2c20 2765 7870 616e 6431 273a  alse, 'expand1':
-00020ad0: 2046 616c 7365 2c20 2770 7269 6f72 6974   False, 'priorit
-00020ae0: 7927 3a20 4e6f 6e65 2c20 2774 656d 706c  y': None, 'templ
-00020af0: 6174 655f 736f 7572 6365 273a 204e 6f6e  ate_source': Non
-00020b00: 652c 2027 656d 7074 795f 696e 6469 6365  e, 'empty_indice
-00020b10: 7327 3a20 2829 2c20 275f 5f74 7970 655f  s': (), '__type_
-00020b20: 5f27 3a20 2752 756c 654f 7074 696f 6e73  _': 'RuleOptions
-00020b30: 277d 2c20 275f 5f74 7970 655f 5f27 3a20  '}, '__type__': 
-00020b40: 2752 756c 6527 7d7d 0a29 0a53 6869 6674  'Rule'}}.).Shift
-00020b50: 203d 2030 0a52 6564 7563 6520 3d20 310a   = 0.Reduce = 1.
-00020b60: 6465 6620 4c61 726b 5f53 7461 6e64 416c  def Lark_StandAl
-00020b70: 6f6e 6528 2a2a 6b77 6172 6773 293a 0a20  one(**kwargs):. 
-00020b80: 2072 6574 7572 6e20 4c61 726b 2e5f 6c6f   return Lark._lo
-00020b90: 6164 5f66 726f 6d5f 6469 6374 2844 4154  ad_from_dict(DAT
-00020ba0: 412c 204d 454d 4f2c 202a 2a6b 7761 7267  A, MEMO, **kwarg
-00020bb0: 7329 0a                                  s).
+0000b3d0: 2073 656c 662e 7265 2e63 6f6d 7069 6c65   self.re.compile
+0000b3e0: 2872 6567 6578 702c 2063 6f6e 662e 675f  (regexp, conf.g_
+0000b3f0: 7265 6765 785f 666c 6167 7329 0a20 2020  regex_flags).   
+0000b400: 2020 2020 2020 2020 2020 2020 2065 7863               exc
+0000b410: 6570 7420 7365 6c66 2e72 652e 6572 726f  ept self.re.erro
+0000b420: 723a 0a20 2020 2020 2020 2020 2020 2020  r:.             
+0000b430: 2020 2020 2020 2072 6169 7365 204c 6578         raise Lex
+0000b440: 4572 726f 7228 2243 616e 6e6f 7420 636f  Error("Cannot co
+0000b450: 6d70 696c 6520 746f 6b65 6e20 2573 3a20  mpile token %s: 
+0000b460: 2573 2220 2520 2874 2e6e 616d 652c 2074  %s" % (t.name, t
+0000b470: 2e70 6174 7465 726e 2929 0a0a 2020 2020  .pattern))..    
+0000b480: 2020 2020 2020 2020 2020 2020 6966 2074              if t
+0000b490: 2e70 6174 7465 726e 2e6d 696e 5f77 6964  .pattern.min_wid
+0000b4a0: 7468 203d 3d20 303a 0a20 2020 2020 2020  th == 0:.       
+0000b4b0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+0000b4c0: 7365 204c 6578 4572 726f 7228 224c 6578  se LexError("Lex
+0000b4d0: 6572 2064 6f65 7320 6e6f 7420 616c 6c6f  er does not allo
+0000b4e0: 7720 7a65 726f 2d77 6964 7468 2074 6572  w zero-width ter
+0000b4f0: 6d69 6e61 6c73 2e20 2825 733a 2025 7329  minals. (%s: %s)
+0000b500: 2220 2520 2874 2e6e 616d 652c 2074 2e70  " % (t.name, t.p
+0000b510: 6174 7465 726e 2929 0a20 2020 2020 2020  attern)).       
+0000b520: 2020 2020 2020 2020 2069 6620 742e 7061           if t.pa
+0000b530: 7474 6572 6e2e 7479 7065 203d 3d20 2272  ttern.type == "r
+0000b540: 6522 3a0a 2020 2020 2020 2020 2020 2020  e":.            
+0000b550: 2020 2020 2020 2020 7465 726d 696e 616c          terminal
+0000b560: 5f74 6f5f 7265 6765 7870 5b74 5d20 3d20  _to_regexp[t] = 
+0000b570: 7265 6765 7870 0a0a 2020 2020 2020 2020  regexp..        
+0000b580: 2020 2020 6966 206e 6f74 2028 7365 7428      if not (set(
+0000b590: 636f 6e66 2e69 676e 6f72 6529 203c 3d20  conf.ignore) <= 
+0000b5a0: 7b74 2e6e 616d 6520 666f 7220 7420 696e  {t.name for t in
+0000b5b0: 2074 6572 6d69 6e61 6c73 7d29 3a0a 2020   terminals}):.  
+0000b5c0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+0000b5d0: 6973 6520 4c65 7845 7272 6f72 2822 4967  ise LexError("Ig
+0000b5e0: 6e6f 7265 2074 6572 6d69 6e61 6c73 2061  nore terminals a
+0000b5f0: 7265 206e 6f74 2064 6566 696e 6564 3a20  re not defined: 
+0000b600: 2573 2220 2520 2873 6574 2863 6f6e 662e  %s" % (set(conf.
+0000b610: 6967 6e6f 7265 2920 2d20 7b74 2e6e 616d  ignore) - {t.nam
+0000b620: 6520 666f 7220 7420 696e 2074 6572 6d69  e for t in termi
+0000b630: 6e61 6c73 7d29 290a 0a20 2020 2020 2020  nals}))..       
+0000b640: 2020 2020 2069 6620 6861 735f 696e 7465       if has_inte
+0000b650: 7265 6775 6c61 723a 0a20 2020 2020 2020  regular:.       
+0000b660: 2020 2020 2020 2020 205f 6368 6563 6b5f           _check_
+0000b670: 7265 6765 785f 636f 6c6c 6973 696f 6e73  regex_collisions
+0000b680: 2874 6572 6d69 6e61 6c5f 746f 5f72 6567  (terminal_to_reg
+0000b690: 6578 702c 2063 6f6d 7061 7261 746f 722c  exp, comparator,
+0000b6a0: 2063 6f6e 662e 7374 7269 6374 290a 2020   conf.strict).  
+0000b6b0: 2020 2020 2020 2020 2020 656c 6966 2063            elif c
+0000b6c0: 6f6e 662e 7374 7269 6374 3a0a 2020 2020  onf.strict:.    
+0000b6d0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0000b6e0: 6520 4c65 7845 7272 6f72 2822 696e 7465  e LexError("inte
+0000b6f0: 7265 6775 6c61 7220 6d75 7374 2062 6520  regular must be 
+0000b700: 696e 7374 616c 6c65 6420 666f 7220 7374  installed for st
+0000b710: 7269 6374 206d 6f64 652e 2055 7365 2060  rict mode. Use `
+0000b720: 7069 7020 696e 7374 616c 6c20 276c 6172  pip install 'lar
+0000b730: 6b5b 696e 7465 7265 6775 6c61 725d 2760  k[interegular]'`
+0000b740: 2e22 290a 0a20 2020 2020 2020 2023 230a  .")..        ##.
+0000b750: 0a20 2020 2020 2020 2073 656c 662e 6e65  .        self.ne
+0000b760: 776c 696e 655f 7479 7065 7320 3d20 6672  wline_types = fr
+0000b770: 6f7a 656e 7365 7428 742e 6e61 6d65 2066  ozenset(t.name f
+0000b780: 6f72 2074 2069 6e20 7465 726d 696e 616c  or t in terminal
+0000b790: 7320 6966 205f 7265 6765 7870 5f68 6173  s if _regexp_has
+0000b7a0: 5f6e 6577 6c69 6e65 2874 2e70 6174 7465  _newline(t.patte
+0000b7b0: 726e 2e74 6f5f 7265 6765 7870 2829 2929  rn.to_regexp()))
+0000b7c0: 0a20 2020 2020 2020 2073 656c 662e 6967  .        self.ig
+0000b7d0: 6e6f 7265 5f74 7970 6573 203d 2066 726f  nore_types = fro
+0000b7e0: 7a65 6e73 6574 2863 6f6e 662e 6967 6e6f  zenset(conf.igno
+0000b7f0: 7265 290a 0a20 2020 2020 2020 2074 6572  re)..        ter
+0000b800: 6d69 6e61 6c73 2e73 6f72 7428 6b65 793d  minals.sort(key=
+0000b810: 6c61 6d62 6461 2078 3a20 282d 782e 7072  lambda x: (-x.pr
+0000b820: 696f 7269 7479 2c20 2d78 2e70 6174 7465  iority, -x.patte
+0000b830: 726e 2e6d 6178 5f77 6964 7468 2c20 2d6c  rn.max_width, -l
+0000b840: 656e 2878 2e70 6174 7465 726e 2e76 616c  en(x.pattern.val
+0000b850: 7565 292c 2078 2e6e 616d 6529 290a 2020  ue), x.name)).  
+0000b860: 2020 2020 2020 7365 6c66 2e74 6572 6d69        self.termi
+0000b870: 6e61 6c73 203d 2074 6572 6d69 6e61 6c73  nals = terminals
+0000b880: 0a20 2020 2020 2020 2073 656c 662e 7573  .        self.us
+0000b890: 6572 5f63 616c 6c62 6163 6b73 203d 2063  er_callbacks = c
+0000b8a0: 6f6e 662e 6361 6c6c 6261 636b 730a 2020  onf.callbacks.  
+0000b8b0: 2020 2020 2020 7365 6c66 2e67 5f72 6567        self.g_reg
+0000b8c0: 6578 5f66 6c61 6773 203d 2063 6f6e 662e  ex_flags = conf.
+0000b8d0: 675f 7265 6765 785f 666c 6167 730a 2020  g_regex_flags.  
+0000b8e0: 2020 2020 2020 7365 6c66 2e75 7365 5f62        self.use_b
+0000b8f0: 7974 6573 203d 2063 6f6e 662e 7573 655f  ytes = conf.use_
+0000b900: 6279 7465 730a 2020 2020 2020 2020 7365  bytes.        se
+0000b910: 6c66 2e74 6572 6d69 6e61 6c73 5f62 795f  lf.terminals_by_
+0000b920: 6e61 6d65 203d 2063 6f6e 662e 7465 726d  name = conf.term
+0000b930: 696e 616c 735f 6279 5f6e 616d 650a 0a20  inals_by_name.. 
+0000b940: 2020 2020 2020 2073 656c 662e 5f73 6361         self._sca
+0000b950: 6e6e 6572 203d 204e 6f6e 650a 0a20 2020  nner = None..   
+0000b960: 2064 6566 205f 6275 696c 645f 7363 616e   def _build_scan
+0000b970: 6e65 7228 7365 6c66 293a 0a20 2020 2020  ner(self):.     
+0000b980: 2020 2074 6572 6d69 6e61 6c73 2c20 7365     terminals, se
+0000b990: 6c66 2e63 616c 6c62 6163 6b20 3d20 5f63  lf.callback = _c
+0000b9a0: 7265 6174 655f 756e 6c65 7373 2873 656c  reate_unless(sel
+0000b9b0: 662e 7465 726d 696e 616c 732c 2073 656c  f.terminals, sel
+0000b9c0: 662e 675f 7265 6765 785f 666c 6167 732c  f.g_regex_flags,
+0000b9d0: 2073 656c 662e 7265 2c20 7365 6c66 2e75   self.re, self.u
+0000b9e0: 7365 5f62 7974 6573 290a 2020 2020 2020  se_bytes).      
+0000b9f0: 2020 6173 7365 7274 2061 6c6c 2873 656c    assert all(sel
+0000ba00: 662e 6361 6c6c 6261 636b 2e76 616c 7565  f.callback.value
+0000ba10: 7328 2929 0a0a 2020 2020 2020 2020 666f  s())..        fo
+0000ba20: 7220 7479 7065 5f2c 2066 2069 6e20 7365  r type_, f in se
+0000ba30: 6c66 2e75 7365 725f 6361 6c6c 6261 636b  lf.user_callback
+0000ba40: 732e 6974 656d 7328 293a 0a20 2020 2020  s.items():.     
+0000ba50: 2020 2020 2020 2069 6620 7479 7065 5f20         if type_ 
+0000ba60: 696e 2073 656c 662e 6361 6c6c 6261 636b  in self.callback
+0000ba70: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000ba80: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
+0000ba90: 2020 2020 2020 7365 6c66 2e63 616c 6c62        self.callb
+0000baa0: 6163 6b5b 7479 7065 5f5d 203d 2043 616c  ack[type_] = Cal
+0000bab0: 6c43 6861 696e 2873 656c 662e 6361 6c6c  lChain(self.call
+0000bac0: 6261 636b 5b74 7970 655f 5d2c 2066 2c20  back[type_], f, 
+0000bad0: 6c61 6d62 6461 2074 3a20 742e 7479 7065  lambda t: t.type
+0000bae0: 203d 3d20 7479 7065 5f29 0a20 2020 2020   == type_).     
+0000baf0: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+0000bb00: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+0000bb10: 662e 6361 6c6c 6261 636b 5b74 7970 655f  f.callback[type_
+0000bb20: 5d20 3d20 660a 0a20 2020 2020 2020 2073  ] = f..        s
+0000bb30: 656c 662e 5f73 6361 6e6e 6572 203d 2053  elf._scanner = S
+0000bb40: 6361 6e6e 6572 2874 6572 6d69 6e61 6c73  canner(terminals
+0000bb50: 2c20 7365 6c66 2e67 5f72 6567 6578 5f66  , self.g_regex_f
+0000bb60: 6c61 6773 2c20 7365 6c66 2e72 652c 2073  lags, self.re, s
+0000bb70: 656c 662e 7573 655f 6279 7465 7329 0a0a  elf.use_bytes)..
+0000bb80: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+0000bb90: 2020 6465 6620 7363 616e 6e65 7228 7365    def scanner(se
+0000bba0: 6c66 293a 0a20 2020 2020 2020 2069 6620  lf):.        if 
+0000bbb0: 7365 6c66 2e5f 7363 616e 6e65 7220 6973  self._scanner is
+0000bbc0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+0000bbd0: 2020 2073 656c 662e 5f62 7569 6c64 5f73     self._build_s
+0000bbe0: 6361 6e6e 6572 2829 0a20 2020 2020 2020  canner().       
+0000bbf0: 2072 6574 7572 6e20 7365 6c66 2e5f 7363   return self._sc
+0000bc00: 616e 6e65 720a 0a20 2020 2064 6566 206d  anner..    def m
+0000bc10: 6174 6368 2873 656c 662c 2074 6578 742c  atch(self, text,
+0000bc20: 2070 6f73 293a 0a20 2020 2020 2020 2072   pos):.        r
+0000bc30: 6574 7572 6e20 7365 6c66 2e73 6361 6e6e  eturn self.scann
+0000bc40: 6572 2e6d 6174 6368 2874 6578 742c 2070  er.match(text, p
+0000bc50: 6f73 290a 0a20 2020 2064 6566 206e 6578  os)..    def nex
+0000bc60: 745f 746f 6b65 6e28 7365 6c66 2c20 6c65  t_token(self, le
+0000bc70: 785f 7374 6174 653a 204c 6578 6572 5374  x_state: LexerSt
+0000bc80: 6174 652c 2070 6172 7365 725f 7374 6174  ate, parser_stat
+0000bc90: 653a 2041 6e79 203d 204e 6f6e 6529 202d  e: Any = None) -
+0000bca0: 3e20 546f 6b65 6e3a 0a20 2020 2020 2020  > Token:.       
+0000bcb0: 206c 696e 655f 6374 7220 3d20 6c65 785f   line_ctr = lex_
+0000bcc0: 7374 6174 652e 6c69 6e65 5f63 7472 0a20  state.line_ctr. 
+0000bcd0: 2020 2020 2020 2077 6869 6c65 206c 696e         while lin
+0000bce0: 655f 6374 722e 6368 6172 5f70 6f73 203c  e_ctr.char_pos <
+0000bcf0: 206c 656e 286c 6578 5f73 7461 7465 2e74   len(lex_state.t
+0000bd00: 6578 7429 3a0a 2020 2020 2020 2020 2020  ext):.          
+0000bd10: 2020 7265 7320 3d20 7365 6c66 2e6d 6174    res = self.mat
+0000bd20: 6368 286c 6578 5f73 7461 7465 2e74 6578  ch(lex_state.tex
+0000bd30: 742c 206c 696e 655f 6374 722e 6368 6172  t, line_ctr.char
+0000bd40: 5f70 6f73 290a 2020 2020 2020 2020 2020  _pos).          
+0000bd50: 2020 6966 206e 6f74 2072 6573 3a0a 2020    if not res:.  
+0000bd60: 2020 2020 2020 2020 2020 2020 2020 616c                al
+0000bd70: 6c6f 7765 6420 3d20 7365 6c66 2e73 6361  lowed = self.sca
+0000bd80: 6e6e 6572 2e61 6c6c 6f77 6564 5f74 7970  nner.allowed_typ
+0000bd90: 6573 202d 2073 656c 662e 6967 6e6f 7265  es - self.ignore
+0000bda0: 5f74 7970 6573 0a20 2020 2020 2020 2020  _types.         
+0000bdb0: 2020 2020 2020 2069 6620 6e6f 7420 616c         if not al
+0000bdc0: 6c6f 7765 643a 0a20 2020 2020 2020 2020  lowed:.         
+0000bdd0: 2020 2020 2020 2020 2020 2061 6c6c 6f77             allow
+0000bde0: 6564 203d 207b 223c 454e 442d 4f46 2d46  ed = {"<END-OF-F
+0000bdf0: 494c 453e 227d 0a20 2020 2020 2020 2020  ILE>"}.         
+0000be00: 2020 2020 2020 2072 6169 7365 2055 6e65         raise Une
+0000be10: 7870 6563 7465 6443 6861 7261 6374 6572  xpectedCharacter
+0000be20: 7328 6c65 785f 7374 6174 652e 7465 7874  s(lex_state.text
+0000be30: 2c20 6c69 6e65 5f63 7472 2e63 6861 725f  , line_ctr.char_
+0000be40: 706f 732c 206c 696e 655f 6374 722e 6c69  pos, line_ctr.li
+0000be50: 6e65 2c20 6c69 6e65 5f63 7472 2e63 6f6c  ne, line_ctr.col
+0000be60: 756d 6e2c 0a20 2020 2020 2020 2020 2020  umn,.           
+0000be70: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000be90: 616c 6c6f 7765 643d 616c 6c6f 7765 642c  allowed=allowed,
+0000bea0: 2074 6f6b 656e 5f68 6973 746f 7279 3d6c   token_history=l
+0000beb0: 6578 5f73 7461 7465 2e6c 6173 745f 746f  ex_state.last_to
+0000bec0: 6b65 6e20 616e 6420 5b6c 6578 5f73 7461  ken and [lex_sta
+0000bed0: 7465 2e6c 6173 745f 746f 6b65 6e5d 2c0a  te.last_token],.
+0000bee0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000bf00: 2020 2020 2020 2020 2020 2073 7461 7465             state
+0000bf10: 3d70 6172 7365 725f 7374 6174 652c 2074  =parser_state, t
+0000bf20: 6572 6d69 6e61 6c73 5f62 795f 6e61 6d65  erminals_by_name
+0000bf30: 3d73 656c 662e 7465 726d 696e 616c 735f  =self.terminals_
+0000bf40: 6279 5f6e 616d 6529 0a0a 2020 2020 2020  by_name)..      
+0000bf50: 2020 2020 2020 7661 6c75 652c 2074 7970        value, typ
+0000bf60: 655f 203d 2072 6573 0a0a 2020 2020 2020  e_ = res..      
+0000bf70: 2020 2020 2020 6967 6e6f 7265 6420 3d20        ignored = 
+0000bf80: 7479 7065 5f20 696e 2073 656c 662e 6967  type_ in self.ig
+0000bf90: 6e6f 7265 5f74 7970 6573 0a20 2020 2020  nore_types.     
+0000bfa0: 2020 2020 2020 2074 203d 204e 6f6e 650a         t = None.
+0000bfb0: 2020 2020 2020 2020 2020 2020 6966 206e              if n
+0000bfc0: 6f74 2069 676e 6f72 6564 206f 7220 7479  ot ignored or ty
+0000bfd0: 7065 5f20 696e 2073 656c 662e 6361 6c6c  pe_ in self.call
+0000bfe0: 6261 636b 3a0a 2020 2020 2020 2020 2020  back:.          
+0000bff0: 2020 2020 2020 7420 3d20 546f 6b65 6e28        t = Token(
+0000c000: 7479 7065 5f2c 2076 616c 7565 2c20 6c69  type_, value, li
+0000c010: 6e65 5f63 7472 2e63 6861 725f 706f 732c  ne_ctr.char_pos,
+0000c020: 206c 696e 655f 6374 722e 6c69 6e65 2c20   line_ctr.line, 
+0000c030: 6c69 6e65 5f63 7472 2e63 6f6c 756d 6e29  line_ctr.column)
+0000c040: 0a20 2020 2020 2020 2020 2020 206c 696e  .            lin
+0000c050: 655f 6374 722e 6665 6564 2876 616c 7565  e_ctr.feed(value
+0000c060: 2c20 7479 7065 5f20 696e 2073 656c 662e  , type_ in self.
+0000c070: 6e65 776c 696e 655f 7479 7065 7329 0a20  newline_types). 
+0000c080: 2020 2020 2020 2020 2020 2069 6620 7420             if t 
+0000c090: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000c0a0: 2020 2020 2020 2020 2020 2020 2074 2e65               t.e
+0000c0b0: 6e64 5f6c 696e 6520 3d20 6c69 6e65 5f63  nd_line = line_c
+0000c0c0: 7472 2e6c 696e 650a 2020 2020 2020 2020  tr.line.        
+0000c0d0: 2020 2020 2020 2020 742e 656e 645f 636f          t.end_co
+0000c0e0: 6c75 6d6e 203d 206c 696e 655f 6374 722e  lumn = line_ctr.
+0000c0f0: 636f 6c75 6d6e 0a20 2020 2020 2020 2020  column.         
+0000c100: 2020 2020 2020 2074 2e65 6e64 5f70 6f73         t.end_pos
+0000c110: 203d 206c 696e 655f 6374 722e 6368 6172   = line_ctr.char
+0000c120: 5f70 6f73 0a20 2020 2020 2020 2020 2020  _pos.           
+0000c130: 2020 2020 2069 6620 742e 7479 7065 2069       if t.type i
+0000c140: 6e20 7365 6c66 2e63 616c 6c62 6163 6b3a  n self.callback:
+0000c150: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000c160: 2020 2020 2074 203d 2073 656c 662e 6361       t = self.ca
+0000c170: 6c6c 6261 636b 5b74 2e74 7970 655d 2874  llback[t.type](t
+0000c180: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+0000c190: 2020 6966 206e 6f74 2069 676e 6f72 6564    if not ignored
+0000c1a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000c1b0: 2020 2020 2020 6966 206e 6f74 2069 7369        if not isi
+0000c1c0: 6e73 7461 6e63 6528 742c 2054 6f6b 656e  nstance(t, Token
+0000c1d0: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000c1e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0000c1f0: 204c 6578 4572 726f 7228 2243 616c 6c62   LexError("Callb
+0000c200: 6163 6b73 206d 7573 7420 7265 7475 726e  acks must return
+0000c210: 2061 2074 6f6b 656e 2028 7265 7475 726e   a token (return
+0000c220: 6564 2025 7229 2220 2520 7429 0a20 2020  ed %r)" % t).   
+0000c230: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c240: 206c 6578 5f73 7461 7465 2e6c 6173 745f   lex_state.last_
+0000c250: 746f 6b65 6e20 3d20 740a 2020 2020 2020  token = t.      
+0000c260: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000c270: 7475 726e 2074 0a0a 2020 2020 2020 2020  turn t..        
+0000c280: 2323 0a0a 2020 2020 2020 2020 7261 6973  ##..        rais
+0000c290: 6520 454f 4645 7272 6f72 2873 656c 6629  e EOFError(self)
+0000c2a0: 0a0a 0a63 6c61 7373 2043 6f6e 7465 7874  ...class Context
+0000c2b0: 7561 6c4c 6578 6572 284c 6578 6572 293a  ualLexer(Lexer):
+0000c2c0: 0a20 2020 206c 6578 6572 733a 2044 6963  .    lexers: Dic
+0000c2d0: 745b 696e 742c 2041 6273 7472 6163 7442  t[int, AbstractB
+0000c2e0: 6173 6963 4c65 7865 725d 0a20 2020 2072  asicLexer].    r
+0000c2f0: 6f6f 745f 6c65 7865 723a 2041 6273 7472  oot_lexer: Abstr
+0000c300: 6163 7442 6173 6963 4c65 7865 720a 0a20  actBasicLexer.. 
+0000c310: 2020 2042 6173 6963 4c65 7865 723a 2054     BasicLexer: T
+0000c320: 7970 655b 4162 7374 7261 6374 4261 7369  ype[AbstractBasi
+0000c330: 634c 6578 6572 5d20 3d20 4261 7369 634c  cLexer] = BasicL
+0000c340: 6578 6572 0a0a 2020 2020 6465 6620 5f5f  exer..    def __
+0000c350: 696e 6974 5f5f 2873 656c 662c 2063 6f6e  init__(self, con
+0000c360: 663a 2027 4c65 7865 7243 6f6e 6627 2c20  f: 'LexerConf', 
+0000c370: 7374 6174 6573 3a20 4469 6374 5b69 6e74  states: Dict[int
+0000c380: 2c20 436f 6c6c 6563 7469 6f6e 5b73 7472  , Collection[str
+0000c390: 5d5d 2c20 616c 7761 7973 5f61 6363 6570  ]], always_accep
+0000c3a0: 743a 2043 6f6c 6c65 6374 696f 6e5b 7374  t: Collection[st
+0000c3b0: 725d 3d28 2929 202d 3e20 4e6f 6e65 3a0a  r]=()) -> None:.
+0000c3c0: 2020 2020 2020 2020 7465 726d 696e 616c          terminal
+0000c3d0: 7320 3d20 6c69 7374 2863 6f6e 662e 7465  s = list(conf.te
+0000c3e0: 726d 696e 616c 7329 0a20 2020 2020 2020  rminals).       
+0000c3f0: 2074 6572 6d69 6e61 6c73 5f62 795f 6e61   terminals_by_na
+0000c400: 6d65 203d 2063 6f6e 662e 7465 726d 696e  me = conf.termin
+0000c410: 616c 735f 6279 5f6e 616d 650a 0a20 2020  als_by_name..   
+0000c420: 2020 2020 2074 7261 645f 636f 6e66 203d       trad_conf =
+0000c430: 2063 6f70 7928 636f 6e66 290a 2020 2020   copy(conf).    
+0000c440: 2020 2020 7472 6164 5f63 6f6e 662e 7465      trad_conf.te
+0000c450: 726d 696e 616c 7320 3d20 7465 726d 696e  rminals = termin
+0000c460: 616c 730a 0a20 2020 2020 2020 2069 6620  als..        if 
+0000c470: 6861 735f 696e 7465 7265 6775 6c61 7220  has_interegular 
+0000c480: 616e 6420 6e6f 7420 636f 6e66 2e73 6b69  and not conf.ski
+0000c490: 705f 7661 6c69 6461 7469 6f6e 3a0a 2020  p_validation:.  
+0000c4a0: 2020 2020 2020 2020 2020 636f 6d70 6172            compar
+0000c4b0: 6174 6f72 203d 2069 6e74 6572 6567 756c  ator = interegul
+0000c4c0: 6172 2e43 6f6d 7061 7261 746f 722e 6672  ar.Comparator.fr
+0000c4d0: 6f6d 5f72 6567 6578 6573 287b 743a 2074  om_regexes({t: t
+0000c4e0: 2e70 6174 7465 726e 2e74 6f5f 7265 6765  .pattern.to_rege
+0000c4f0: 7870 2829 2066 6f72 2074 2069 6e20 7465  xp() for t in te
+0000c500: 726d 696e 616c 737d 290a 2020 2020 2020  rminals}).      
+0000c510: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+0000c520: 2020 2020 636f 6d70 6172 6174 6f72 203d      comparator =
+0000c530: 204e 6f6e 650a 2020 2020 2020 2020 6c65   None.        le
+0000c540: 7865 725f 6279 5f74 6f6b 656e 733a 2044  xer_by_tokens: D
+0000c550: 6963 745b 4672 6f7a 656e 5365 745b 7374  ict[FrozenSet[st
+0000c560: 725d 2c20 4162 7374 7261 6374 4261 7369  r], AbstractBasi
+0000c570: 634c 6578 6572 5d20 3d20 7b7d 0a20 2020  cLexer] = {}.   
+0000c580: 2020 2020 2073 656c 662e 6c65 7865 7273       self.lexers
+0000c590: 203d 207b 7d0a 2020 2020 2020 2020 666f   = {}.        fo
+0000c5a0: 7220 7374 6174 652c 2061 6363 6570 7473  r state, accepts
+0000c5b0: 2069 6e20 7374 6174 6573 2e69 7465 6d73   in states.items
+0000c5c0: 2829 3a0a 2020 2020 2020 2020 2020 2020  ():.            
+0000c5d0: 6b65 7920 3d20 6672 6f7a 656e 7365 7428  key = frozenset(
+0000c5e0: 6163 6365 7074 7329 0a20 2020 2020 2020  accepts).       
+0000c5f0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+0000c600: 2020 2020 2020 2020 2020 6c65 7865 7220            lexer 
+0000c610: 3d20 6c65 7865 725f 6279 5f74 6f6b 656e  = lexer_by_token
+0000c620: 735b 6b65 795d 0a20 2020 2020 2020 2020  s[key].         
+0000c630: 2020 2065 7863 6570 7420 4b65 7945 7272     except KeyErr
+0000c640: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
+0000c650: 2020 2020 6163 6365 7074 7320 3d20 7365      accepts = se
+0000c660: 7428 6163 6365 7074 7329 207c 2073 6574  t(accepts) | set
+0000c670: 2863 6f6e 662e 6967 6e6f 7265 2920 7c20  (conf.ignore) | 
+0000c680: 7365 7428 616c 7761 7973 5f61 6363 6570  set(always_accep
+0000c690: 7429 0a20 2020 2020 2020 2020 2020 2020  t).             
+0000c6a0: 2020 206c 6578 6572 5f63 6f6e 6620 3d20     lexer_conf = 
+0000c6b0: 636f 7079 2874 7261 645f 636f 6e66 290a  copy(trad_conf).
+0000c6c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c6d0: 6c65 7865 725f 636f 6e66 2e74 6572 6d69  lexer_conf.termi
+0000c6e0: 6e61 6c73 203d 205b 7465 726d 696e 616c  nals = [terminal
+0000c6f0: 735f 6279 5f6e 616d 655b 6e5d 2066 6f72  s_by_name[n] for
+0000c700: 206e 2069 6e20 6163 6365 7074 7320 6966   n in accepts if
+0000c710: 206e 2069 6e20 7465 726d 696e 616c 735f   n in terminals_
+0000c720: 6279 5f6e 616d 655d 0a20 2020 2020 2020  by_name].       
+0000c730: 2020 2020 2020 2020 206c 6578 6572 203d           lexer =
+0000c740: 2073 656c 662e 4261 7369 634c 6578 6572   self.BasicLexer
+0000c750: 286c 6578 6572 5f63 6f6e 662c 2063 6f6d  (lexer_conf, com
+0000c760: 7061 7261 746f 7229 0a20 2020 2020 2020  parator).       
+0000c770: 2020 2020 2020 2020 206c 6578 6572 5f62           lexer_b
+0000c780: 795f 746f 6b65 6e73 5b6b 6579 5d20 3d20  y_tokens[key] = 
+0000c790: 6c65 7865 720a 0a20 2020 2020 2020 2020  lexer..         
+0000c7a0: 2020 2073 656c 662e 6c65 7865 7273 5b73     self.lexers[s
+0000c7b0: 7461 7465 5d20 3d20 6c65 7865 720a 0a20  tate] = lexer.. 
+0000c7c0: 2020 2020 2020 2061 7373 6572 7420 7472         assert tr
+0000c7d0: 6164 5f63 6f6e 662e 7465 726d 696e 616c  ad_conf.terminal
+0000c7e0: 7320 6973 2074 6572 6d69 6e61 6c73 0a20  s is terminals. 
+0000c7f0: 2020 2020 2020 2074 7261 645f 636f 6e66         trad_conf
+0000c800: 2e73 6b69 705f 7661 6c69 6461 7469 6f6e  .skip_validation
+0000c810: 203d 2054 7275 6520 2023 230a 0a20 2020   = True  ##..   
+0000c820: 2020 2020 2073 656c 662e 726f 6f74 5f6c       self.root_l
+0000c830: 6578 6572 203d 2073 656c 662e 4261 7369  exer = self.Basi
+0000c840: 634c 6578 6572 2874 7261 645f 636f 6e66  cLexer(trad_conf
+0000c850: 2c20 636f 6d70 6172 6174 6f72 290a 0a20  , comparator).. 
+0000c860: 2020 2064 6566 206c 6578 2873 656c 662c     def lex(self,
+0000c870: 206c 6578 6572 5f73 7461 7465 3a20 4c65   lexer_state: Le
+0000c880: 7865 7253 7461 7465 2c20 7061 7273 6572  xerState, parser
+0000c890: 5f73 7461 7465 3a20 2750 6172 7365 7253  _state: 'ParserS
+0000c8a0: 7461 7465 2729 202d 3e20 4974 6572 6174  tate') -> Iterat
+0000c8b0: 6f72 5b54 6f6b 656e 5d3a 0a20 2020 2020  or[Token]:.     
+0000c8c0: 2020 2074 7279 3a0a 2020 2020 2020 2020     try:.        
+0000c8d0: 2020 2020 7768 696c 6520 5472 7565 3a0a      while True:.
+0000c8e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000c8f0: 6c65 7865 7220 3d20 7365 6c66 2e6c 6578  lexer = self.lex
+0000c900: 6572 735b 7061 7273 6572 5f73 7461 7465  ers[parser_state
+0000c910: 2e70 6f73 6974 696f 6e5d 0a20 2020 2020  .position].     
+0000c920: 2020 2020 2020 2020 2020 2079 6965 6c64             yield
+0000c930: 206c 6578 6572 2e6e 6578 745f 746f 6b65   lexer.next_toke
+0000c940: 6e28 6c65 7865 725f 7374 6174 652c 2070  n(lexer_state, p
+0000c950: 6172 7365 725f 7374 6174 6529 0a20 2020  arser_state).   
+0000c960: 2020 2020 2065 7863 6570 7420 454f 4645       except EOFE
+0000c970: 7272 6f72 3a0a 2020 2020 2020 2020 2020  rror:.          
+0000c980: 2020 7061 7373 0a20 2020 2020 2020 2065    pass.        e
+0000c990: 7863 6570 7420 556e 6578 7065 6374 6564  xcept Unexpected
+0000c9a0: 4368 6172 6163 7465 7273 2061 7320 653a  Characters as e:
+0000c9b0: 0a20 2020 2020 2020 2020 2020 2023 230a  .            ##.
+0000c9c0: 0a20 2020 2020 2020 2020 2020 2023 230a  .            ##.
+0000c9d0: 0a20 2020 2020 2020 2020 2020 2074 7279  .            try
+0000c9e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000c9f0: 2020 6c61 7374 5f74 6f6b 656e 203d 206c    last_token = l
+0000ca00: 6578 6572 5f73 7461 7465 2e6c 6173 745f  exer_state.last_
+0000ca10: 746f 6b65 6e20 2023 230a 0a20 2020 2020  token  ##..     
+0000ca20: 2020 2020 2020 2020 2020 2074 6f6b 656e             token
+0000ca30: 203d 2073 656c 662e 726f 6f74 5f6c 6578   = self.root_lex
+0000ca40: 6572 2e6e 6578 745f 746f 6b65 6e28 6c65  er.next_token(le
+0000ca50: 7865 725f 7374 6174 652c 2070 6172 7365  xer_state, parse
+0000ca60: 725f 7374 6174 6529 0a20 2020 2020 2020  r_state).       
+0000ca70: 2020 2020 2020 2020 2072 6169 7365 2055           raise U
+0000ca80: 6e65 7870 6563 7465 6454 6f6b 656e 2874  nexpectedToken(t
+0000ca90: 6f6b 656e 2c20 652e 616c 6c6f 7765 642c  oken, e.allowed,
+0000caa0: 2073 7461 7465 3d70 6172 7365 725f 7374   state=parser_st
+0000cab0: 6174 652c 2074 6f6b 656e 5f68 6973 746f  ate, token_histo
+0000cac0: 7279 3d5b 6c61 7374 5f74 6f6b 656e 5d2c  ry=[last_token],
+0000cad0: 2074 6572 6d69 6e61 6c73 5f62 795f 6e61   terminals_by_na
+0000cae0: 6d65 3d73 656c 662e 726f 6f74 5f6c 6578  me=self.root_lex
+0000caf0: 6572 2e74 6572 6d69 6e61 6c73 5f62 795f  er.terminals_by_
+0000cb00: 6e61 6d65 290a 2020 2020 2020 2020 2020  name).          
+0000cb10: 2020 6578 6365 7074 2055 6e65 7870 6563    except Unexpec
+0000cb20: 7465 6443 6861 7261 6374 6572 733a 0a20  tedCharacters:. 
+0000cb30: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0000cb40: 6169 7365 2065 2020 2323 0a0a 0a0a 0a5f  aise e  ##....._
+0000cb50: 5061 7273 6572 4172 6754 7970 653a 2027  ParserArgType: '
+0000cb60: 5479 7065 416c 6961 7327 203d 2027 4c69  TypeAlias' = 'Li
+0000cb70: 7465 7261 6c5b 2265 6172 6c65 7922 2c20  teral["earley", 
+0000cb80: 226c 616c 7222 2c20 2263 796b 222c 2022  "lalr", "cyk", "
+0000cb90: 6175 746f 225d 270a 5f4c 6578 6572 4172  auto"]'._LexerAr
+0000cba0: 6754 7970 653a 2027 5479 7065 416c 6961  gType: 'TypeAlia
+0000cbb0: 7327 203d 2027 556e 696f 6e5b 4c69 7465  s' = 'Union[Lite
+0000cbc0: 7261 6c5b 2261 7574 6f22 2c20 2262 6173  ral["auto", "bas
+0000cbd0: 6963 222c 2022 636f 6e74 6578 7475 616c  ic", "contextual
+0000cbe0: 222c 2022 6479 6e61 6d69 6322 2c20 2264  ", "dynamic", "d
+0000cbf0: 796e 616d 6963 5f63 6f6d 706c 6574 6522  ynamic_complete"
+0000cc00: 5d2c 2054 7970 655b 4c65 7865 725d 5d27  ], Type[Lexer]]'
+0000cc10: 0a5f 4c65 7865 7243 616c 6c62 6163 6b20  ._LexerCallback 
+0000cc20: 3d20 4361 6c6c 6162 6c65 5b5b 546f 6b65  = Callable[[Toke
+0000cc30: 6e5d 2c20 546f 6b65 6e5d 0a50 6172 7365  n], Token].Parse
+0000cc40: 7243 616c 6c62 6163 6b73 203d 2044 6963  rCallbacks = Dic
+0000cc50: 745b 7374 722c 2043 616c 6c61 626c 655d  t[str, Callable]
+0000cc60: 0a0a 636c 6173 7320 4c65 7865 7243 6f6e  ..class LexerCon
+0000cc70: 6628 5365 7269 616c 697a 6529 3a0a 2020  f(Serialize):.  
+0000cc80: 2020 5f5f 7365 7269 616c 697a 655f 6669    __serialize_fi
+0000cc90: 656c 6473 5f5f 203d 2027 7465 726d 696e  elds__ = 'termin
+0000cca0: 616c 7327 2c20 2769 676e 6f72 6527 2c20  als', 'ignore', 
+0000ccb0: 2767 5f72 6567 6578 5f66 6c61 6773 272c  'g_regex_flags',
+0000ccc0: 2027 7573 655f 6279 7465 7327 2c20 276c   'use_bytes', 'l
+0000ccd0: 6578 6572 5f74 7970 6527 0a20 2020 205f  exer_type'.    _
+0000cce0: 5f73 6572 6961 6c69 7a65 5f6e 616d 6573  _serialize_names
+0000ccf0: 7061 6365 5f5f 203d 2054 6572 6d69 6e61  pace__ = Termina
+0000cd00: 6c44 6566 2c0a 0a20 2020 2074 6572 6d69  lDef,..    termi
+0000cd10: 6e61 6c73 3a20 436f 6c6c 6563 7469 6f6e  nals: Collection
+0000cd20: 5b54 6572 6d69 6e61 6c44 6566 5d0a 2020  [TerminalDef].  
+0000cd30: 2020 7265 5f6d 6f64 756c 653a 204d 6f64    re_module: Mod
+0000cd40: 756c 6554 7970 650a 2020 2020 6967 6e6f  uleType.    igno
+0000cd50: 7265 3a20 436f 6c6c 6563 7469 6f6e 5b73  re: Collection[s
+0000cd60: 7472 5d0a 2020 2020 706f 7374 6c65 783a  tr].    postlex:
+0000cd70: 2027 4f70 7469 6f6e 616c 5b50 6f73 744c   'Optional[PostL
+0000cd80: 6578 5d27 0a20 2020 2063 616c 6c62 6163  ex]'.    callbac
+0000cd90: 6b73 3a20 4469 6374 5b73 7472 2c20 5f4c  ks: Dict[str, _L
+0000cda0: 6578 6572 4361 6c6c 6261 636b 5d0a 2020  exerCallback].  
+0000cdb0: 2020 675f 7265 6765 785f 666c 6167 733a    g_regex_flags:
+0000cdc0: 2069 6e74 0a20 2020 2073 6b69 705f 7661   int.    skip_va
+0000cdd0: 6c69 6461 7469 6f6e 3a20 626f 6f6c 0a20  lidation: bool. 
+0000cde0: 2020 2075 7365 5f62 7974 6573 3a20 626f     use_bytes: bo
+0000cdf0: 6f6c 0a20 2020 206c 6578 6572 5f74 7970  ol.    lexer_typ
+0000ce00: 653a 204f 7074 696f 6e61 6c5b 5f4c 6578  e: Optional[_Lex
+0000ce10: 6572 4172 6754 7970 655d 0a20 2020 2073  erArgType].    s
+0000ce20: 7472 6963 743a 2062 6f6f 6c0a 0a20 2020  trict: bool..   
+0000ce30: 2064 6566 205f 5f69 6e69 745f 5f28 7365   def __init__(se
+0000ce40: 6c66 2c20 7465 726d 696e 616c 733a 2043  lf, terminals: C
+0000ce50: 6f6c 6c65 6374 696f 6e5b 5465 726d 696e  ollection[Termin
+0000ce60: 616c 4465 665d 2c20 7265 5f6d 6f64 756c  alDef], re_modul
+0000ce70: 653a 204d 6f64 756c 6554 7970 652c 2069  e: ModuleType, i
+0000ce80: 676e 6f72 653a 2043 6f6c 6c65 6374 696f  gnore: Collectio
+0000ce90: 6e5b 7374 725d 3d28 292c 2070 6f73 746c  n[str]=(), postl
+0000cea0: 6578 3a20 274f 7074 696f 6e61 6c5b 506f  ex: 'Optional[Po
+0000ceb0: 7374 4c65 785d 273d 4e6f 6e65 2c0a 2020  stLex]'=None,.  
+0000cec0: 2020 2020 2020 2020 2020 2020 2020 2063                 c
+0000ced0: 616c 6c62 6163 6b73 3a20 4f70 7469 6f6e  allbacks: Option
+0000cee0: 616c 5b44 6963 745b 7374 722c 205f 4c65  al[Dict[str, _Le
+0000cef0: 7865 7243 616c 6c62 6163 6b5d 5d3d 4e6f  xerCallback]]=No
+0000cf00: 6e65 2c20 675f 7265 6765 785f 666c 6167  ne, g_regex_flag
+0000cf10: 733a 2069 6e74 3d30 2c20 736b 6970 5f76  s: int=0, skip_v
+0000cf20: 616c 6964 6174 696f 6e3a 2062 6f6f 6c3d  alidation: bool=
+0000cf30: 4661 6c73 652c 2075 7365 5f62 7974 6573  False, use_bytes
+0000cf40: 3a20 626f 6f6c 3d46 616c 7365 2c20 7374  : bool=False, st
+0000cf50: 7269 6374 3a20 626f 6f6c 3d46 616c 7365  rict: bool=False
+0000cf60: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0000cf70: 7465 726d 696e 616c 7320 3d20 7465 726d  terminals = term
+0000cf80: 696e 616c 730a 2020 2020 2020 2020 7365  inals.        se
+0000cf90: 6c66 2e74 6572 6d69 6e61 6c73 5f62 795f  lf.terminals_by_
+0000cfa0: 6e61 6d65 203d 207b 742e 6e61 6d65 3a20  name = {t.name: 
+0000cfb0: 7420 666f 7220 7420 696e 2073 656c 662e  t for t in self.
+0000cfc0: 7465 726d 696e 616c 737d 0a20 2020 2020  terminals}.     
+0000cfd0: 2020 2061 7373 6572 7420 6c65 6e28 7365     assert len(se
+0000cfe0: 6c66 2e74 6572 6d69 6e61 6c73 2920 3d3d  lf.terminals) ==
+0000cff0: 206c 656e 2873 656c 662e 7465 726d 696e   len(self.termin
+0000d000: 616c 735f 6279 5f6e 616d 6529 0a20 2020  als_by_name).   
+0000d010: 2020 2020 2073 656c 662e 6967 6e6f 7265       self.ignore
+0000d020: 203d 2069 676e 6f72 650a 2020 2020 2020   = ignore.      
+0000d030: 2020 7365 6c66 2e70 6f73 746c 6578 203d    self.postlex =
+0000d040: 2070 6f73 746c 6578 0a20 2020 2020 2020   postlex.       
+0000d050: 2073 656c 662e 6361 6c6c 6261 636b 7320   self.callbacks 
+0000d060: 3d20 6361 6c6c 6261 636b 7320 6f72 207b  = callbacks or {
+0000d070: 7d0a 2020 2020 2020 2020 7365 6c66 2e67  }.        self.g
+0000d080: 5f72 6567 6578 5f66 6c61 6773 203d 2067  _regex_flags = g
+0000d090: 5f72 6567 6578 5f66 6c61 6773 0a20 2020  _regex_flags.   
+0000d0a0: 2020 2020 2073 656c 662e 7265 5f6d 6f64       self.re_mod
+0000d0b0: 756c 6520 3d20 7265 5f6d 6f64 756c 650a  ule = re_module.
+0000d0c0: 2020 2020 2020 2020 7365 6c66 2e73 6b69          self.ski
+0000d0d0: 705f 7661 6c69 6461 7469 6f6e 203d 2073  p_validation = s
+0000d0e0: 6b69 705f 7661 6c69 6461 7469 6f6e 0a20  kip_validation. 
+0000d0f0: 2020 2020 2020 2073 656c 662e 7573 655f         self.use_
+0000d100: 6279 7465 7320 3d20 7573 655f 6279 7465  bytes = use_byte
+0000d110: 730a 2020 2020 2020 2020 7365 6c66 2e73  s.        self.s
+0000d120: 7472 6963 7420 3d20 7374 7269 6374 0a20  trict = strict. 
+0000d130: 2020 2020 2020 2073 656c 662e 6c65 7865         self.lexe
+0000d140: 725f 7479 7065 203d 204e 6f6e 650a 0a20  r_type = None.. 
+0000d150: 2020 2064 6566 205f 6465 7365 7269 616c     def _deserial
+0000d160: 697a 6528 7365 6c66 293a 0a20 2020 2020  ize(self):.     
+0000d170: 2020 2073 656c 662e 7465 726d 696e 616c     self.terminal
+0000d180: 735f 6279 5f6e 616d 6520 3d20 7b74 2e6e  s_by_name = {t.n
+0000d190: 616d 653a 2074 2066 6f72 2074 2069 6e20  ame: t for t in 
+0000d1a0: 7365 6c66 2e74 6572 6d69 6e61 6c73 7d0a  self.terminals}.
+0000d1b0: 0a20 2020 2064 6566 205f 5f64 6565 7063  .    def __deepc
+0000d1c0: 6f70 795f 5f28 7365 6c66 2c20 6d65 6d6f  opy__(self, memo
+0000d1d0: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+0000d1e0: 7265 7475 726e 2074 7970 6528 7365 6c66  return type(self
+0000d1f0: 2928 0a20 2020 2020 2020 2020 2020 2064  )(.            d
+0000d200: 6565 7063 6f70 7928 7365 6c66 2e74 6572  eepcopy(self.ter
+0000d210: 6d69 6e61 6c73 2c20 6d65 6d6f 292c 0a20  minals, memo),. 
+0000d220: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+0000d230: 7265 5f6d 6f64 756c 652c 0a20 2020 2020  re_module,.     
+0000d240: 2020 2020 2020 2064 6565 7063 6f70 7928         deepcopy(
+0000d250: 7365 6c66 2e69 676e 6f72 652c 206d 656d  self.ignore, mem
+0000d260: 6f29 2c0a 2020 2020 2020 2020 2020 2020  o),.            
+0000d270: 6465 6570 636f 7079 2873 656c 662e 706f  deepcopy(self.po
+0000d280: 7374 6c65 782c 206d 656d 6f29 2c0a 2020  stlex, memo),.  
+0000d290: 2020 2020 2020 2020 2020 6465 6570 636f            deepco
+0000d2a0: 7079 2873 656c 662e 6361 6c6c 6261 636b  py(self.callback
+0000d2b0: 732c 206d 656d 6f29 2c0a 2020 2020 2020  s, memo),.      
+0000d2c0: 2020 2020 2020 6465 6570 636f 7079 2873        deepcopy(s
+0000d2d0: 656c 662e 675f 7265 6765 785f 666c 6167  elf.g_regex_flag
+0000d2e0: 732c 206d 656d 6f29 2c0a 2020 2020 2020  s, memo),.      
+0000d2f0: 2020 2020 2020 6465 6570 636f 7079 2873        deepcopy(s
+0000d300: 656c 662e 736b 6970 5f76 616c 6964 6174  elf.skip_validat
+0000d310: 696f 6e2c 206d 656d 6f29 2c0a 2020 2020  ion, memo),.    
+0000d320: 2020 2020 2020 2020 6465 6570 636f 7079          deepcopy
+0000d330: 2873 656c 662e 7573 655f 6279 7465 732c  (self.use_bytes,
+0000d340: 206d 656d 6f29 2c0a 2020 2020 2020 2020   memo),.        
+0000d350: 290a 0a63 6c61 7373 2050 6172 7365 7243  )..class ParserC
+0000d360: 6f6e 6628 5365 7269 616c 697a 6529 3a0a  onf(Serialize):.
+0000d370: 2020 2020 5f5f 7365 7269 616c 697a 655f      __serialize_
+0000d380: 6669 656c 6473 5f5f 203d 2027 7275 6c65  fields__ = 'rule
+0000d390: 7327 2c20 2773 7461 7274 272c 2027 7061  s', 'start', 'pa
+0000d3a0: 7273 6572 5f74 7970 6527 0a0a 2020 2020  rser_type'..    
+0000d3b0: 7275 6c65 733a 204c 6973 745b 2752 756c  rules: List['Rul
+0000d3c0: 6527 5d0a 2020 2020 6361 6c6c 6261 636b  e'].    callback
+0000d3d0: 733a 2050 6172 7365 7243 616c 6c62 6163  s: ParserCallbac
+0000d3e0: 6b73 0a20 2020 2073 7461 7274 3a20 4c69  ks.    start: Li
+0000d3f0: 7374 5b73 7472 5d0a 2020 2020 7061 7273  st[str].    pars
+0000d400: 6572 5f74 7970 653a 205f 5061 7273 6572  er_type: _Parser
+0000d410: 4172 6754 7970 650a 0a20 2020 2064 6566  ArgType..    def
+0000d420: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+0000d430: 7275 6c65 733a 204c 6973 745b 2752 756c  rules: List['Rul
+0000d440: 6527 5d2c 2063 616c 6c62 6163 6b73 3a20  e'], callbacks: 
+0000d450: 5061 7273 6572 4361 6c6c 6261 636b 732c  ParserCallbacks,
+0000d460: 2073 7461 7274 3a20 4c69 7374 5b73 7472   start: List[str
+0000d470: 5d29 3a0a 2020 2020 2020 2020 6173 7365  ]):.        asse
+0000d480: 7274 2069 7369 6e73 7461 6e63 6528 7374  rt isinstance(st
+0000d490: 6172 742c 206c 6973 7429 0a20 2020 2020  art, list).     
+0000d4a0: 2020 2073 656c 662e 7275 6c65 7320 3d20     self.rules = 
+0000d4b0: 7275 6c65 730a 2020 2020 2020 2020 7365  rules.        se
+0000d4c0: 6c66 2e63 616c 6c62 6163 6b73 203d 2063  lf.callbacks = c
+0000d4d0: 616c 6c62 6163 6b73 0a20 2020 2020 2020  allbacks.       
+0000d4e0: 2073 656c 662e 7374 6172 7420 3d20 7374   self.start = st
+0000d4f0: 6172 740a 0a0a 6672 6f6d 2066 756e 6374  art...from funct
+0000d500: 6f6f 6c73 2069 6d70 6f72 7420 7061 7274  ools import part
+0000d510: 6961 6c2c 2077 7261 7073 0a66 726f 6d20  ial, wraps.from 
+0000d520: 6974 6572 746f 6f6c 7320 696d 706f 7274  itertools import
+0000d530: 2070 726f 6475 6374 0a0a 0a63 6c61 7373   product...class
+0000d540: 2045 7870 616e 6453 696e 676c 6543 6869   ExpandSingleChi
+0000d550: 6c64 3a0a 2020 2020 6465 6620 5f5f 696e  ld:.    def __in
+0000d560: 6974 5f5f 2873 656c 662c 206e 6f64 655f  it__(self, node_
+0000d570: 6275 696c 6465 7229 3a0a 2020 2020 2020  builder):.      
+0000d580: 2020 7365 6c66 2e6e 6f64 655f 6275 696c    self.node_buil
+0000d590: 6465 7220 3d20 6e6f 6465 5f62 7569 6c64  der = node_build
+0000d5a0: 6572 0a0a 2020 2020 6465 6620 5f5f 6361  er..    def __ca
+0000d5b0: 6c6c 5f5f 2873 656c 662c 2063 6869 6c64  ll__(self, child
+0000d5c0: 7265 6e29 3a0a 2020 2020 2020 2020 6966  ren):.        if
+0000d5d0: 206c 656e 2863 6869 6c64 7265 6e29 203d   len(children) =
+0000d5e0: 3d20 313a 0a20 2020 2020 2020 2020 2020  = 1:.           
+0000d5f0: 2072 6574 7572 6e20 6368 696c 6472 656e   return children
+0000d600: 5b30 5d0a 2020 2020 2020 2020 656c 7365  [0].        else
+0000d610: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0000d620: 7475 726e 2073 656c 662e 6e6f 6465 5f62  turn self.node_b
+0000d630: 7569 6c64 6572 2863 6869 6c64 7265 6e29  uilder(children)
+0000d640: 0a0a 0a0a 636c 6173 7320 5072 6f70 6167  ....class Propag
+0000d650: 6174 6550 6f73 6974 696f 6e73 3a0a 2020  atePositions:.  
+0000d660: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+0000d670: 656c 662c 206e 6f64 655f 6275 696c 6465  elf, node_builde
+0000d680: 722c 206e 6f64 655f 6669 6c74 6572 3d4e  r, node_filter=N
+0000d690: 6f6e 6529 3a0a 2020 2020 2020 2020 7365  one):.        se
+0000d6a0: 6c66 2e6e 6f64 655f 6275 696c 6465 7220  lf.node_builder 
+0000d6b0: 3d20 6e6f 6465 5f62 7569 6c64 6572 0a20  = node_builder. 
+0000d6c0: 2020 2020 2020 2073 656c 662e 6e6f 6465         self.node
+0000d6d0: 5f66 696c 7465 7220 3d20 6e6f 6465 5f66  _filter = node_f
+0000d6e0: 696c 7465 720a 0a20 2020 2064 6566 205f  ilter..    def _
+0000d6f0: 5f63 616c 6c5f 5f28 7365 6c66 2c20 6368  _call__(self, ch
+0000d700: 696c 6472 656e 293a 0a20 2020 2020 2020  ildren):.       
+0000d710: 2072 6573 203d 2073 656c 662e 6e6f 6465   res = self.node
+0000d720: 5f62 7569 6c64 6572 2863 6869 6c64 7265  _builder(childre
+0000d730: 6e29 0a0a 2020 2020 2020 2020 6966 2069  n)..        if i
+0000d740: 7369 6e73 7461 6e63 6528 7265 732c 2054  sinstance(res, T
+0000d750: 7265 6529 3a0a 2020 2020 2020 2020 2020  ree):.          
+0000d760: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
+0000d770: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
+0000d780: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
+0000d790: 2020 2323 0a0a 0a20 2020 2020 2020 2020    ##...         
+0000d7a0: 2020 2072 6573 5f6d 6574 6120 3d20 7265     res_meta = re
+0000d7b0: 732e 6d65 7461 0a0a 2020 2020 2020 2020  s.meta..        
+0000d7c0: 2020 2020 6669 7273 745f 6d65 7461 203d      first_meta =
+0000d7d0: 2073 656c 662e 5f70 705f 6765 745f 6d65   self._pp_get_me
+0000d7e0: 7461 2863 6869 6c64 7265 6e29 0a20 2020  ta(children).   
+0000d7f0: 2020 2020 2020 2020 2069 6620 6669 7273           if firs
+0000d800: 745f 6d65 7461 2069 7320 6e6f 7420 4e6f  t_meta is not No
+0000d810: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+0000d820: 2020 2020 6966 206e 6f74 2068 6173 6174      if not hasat
+0000d830: 7472 2872 6573 5f6d 6574 612c 2027 6c69  tr(res_meta, 'li
+0000d840: 6e65 2729 3a0a 2020 2020 2020 2020 2020  ne'):.          
+0000d850: 2020 2020 2020 2020 2020 2323 0a0a 2020            ##..  
+0000d860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d870: 2020 7265 735f 6d65 7461 2e6c 696e 6520    res_meta.line 
+0000d880: 3d20 6765 7461 7474 7228 6669 7273 745f  = getattr(first_
+0000d890: 6d65 7461 2c20 2763 6f6e 7461 696e 6572  meta, 'container
+0000d8a0: 5f6c 696e 6527 2c20 6669 7273 745f 6d65  _line', first_me
+0000d8b0: 7461 2e6c 696e 6529 0a20 2020 2020 2020  ta.line).       
+0000d8c0: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0000d8d0: 5f6d 6574 612e 636f 6c75 6d6e 203d 2067  _meta.column = g
+0000d8e0: 6574 6174 7472 2866 6972 7374 5f6d 6574  etattr(first_met
+0000d8f0: 612c 2027 636f 6e74 6169 6e65 725f 636f  a, 'container_co
+0000d900: 6c75 6d6e 272c 2066 6972 7374 5f6d 6574  lumn', first_met
+0000d910: 612e 636f 6c75 6d6e 290a 2020 2020 2020  a.column).      
+0000d920: 2020 2020 2020 2020 2020 2020 2020 7265                re
+0000d930: 735f 6d65 7461 2e73 7461 7274 5f70 6f73  s_meta.start_pos
+0000d940: 203d 2067 6574 6174 7472 2866 6972 7374   = getattr(first
+0000d950: 5f6d 6574 612c 2027 636f 6e74 6169 6e65  _meta, 'containe
+0000d960: 725f 7374 6172 745f 706f 7327 2c20 6669  r_start_pos', fi
+0000d970: 7273 745f 6d65 7461 2e73 7461 7274 5f70  rst_meta.start_p
+0000d980: 6f73 290a 2020 2020 2020 2020 2020 2020  os).            
+0000d990: 2020 2020 2020 2020 7265 735f 6d65 7461          res_meta
+0000d9a0: 2e65 6d70 7479 203d 2046 616c 7365 0a0a  .empty = False..
+0000d9b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000d9c0: 7265 735f 6d65 7461 2e63 6f6e 7461 696e  res_meta.contain
+0000d9d0: 6572 5f6c 696e 6520 3d20 6765 7461 7474  er_line = getatt
+0000d9e0: 7228 6669 7273 745f 6d65 7461 2c20 2763  r(first_meta, 'c
+0000d9f0: 6f6e 7461 696e 6572 5f6c 696e 6527 2c20  ontainer_line', 
+0000da00: 6669 7273 745f 6d65 7461 2e6c 696e 6529  first_meta.line)
+0000da10: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000da20: 2072 6573 5f6d 6574 612e 636f 6e74 6169   res_meta.contai
+0000da30: 6e65 725f 636f 6c75 6d6e 203d 2067 6574  ner_column = get
+0000da40: 6174 7472 2866 6972 7374 5f6d 6574 612c  attr(first_meta,
+0000da50: 2027 636f 6e74 6169 6e65 725f 636f 6c75   'container_colu
+0000da60: 6d6e 272c 2066 6972 7374 5f6d 6574 612e  mn', first_meta.
+0000da70: 636f 6c75 6d6e 290a 2020 2020 2020 2020  column).        
+0000da80: 2020 2020 2020 2020 7265 735f 6d65 7461          res_meta
+0000da90: 2e63 6f6e 7461 696e 6572 5f73 7461 7274  .container_start
+0000daa0: 5f70 6f73 203d 2067 6574 6174 7472 2866  _pos = getattr(f
+0000dab0: 6972 7374 5f6d 6574 612c 2027 636f 6e74  irst_meta, 'cont
+0000dac0: 6169 6e65 725f 7374 6172 745f 706f 7327  ainer_start_pos'
+0000dad0: 2c20 6669 7273 745f 6d65 7461 2e73 7461  , first_meta.sta
+0000dae0: 7274 5f70 6f73 290a 0a20 2020 2020 2020  rt_pos)..       
+0000daf0: 2020 2020 206c 6173 745f 6d65 7461 203d       last_meta =
+0000db00: 2073 656c 662e 5f70 705f 6765 745f 6d65   self._pp_get_me
+0000db10: 7461 2872 6576 6572 7365 6428 6368 696c  ta(reversed(chil
+0000db20: 6472 656e 2929 0a20 2020 2020 2020 2020  dren)).         
+0000db30: 2020 2069 6620 6c61 7374 5f6d 6574 6120     if last_meta 
+0000db40: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
+0000db50: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+0000db60: 6e6f 7420 6861 7361 7474 7228 7265 735f  not hasattr(res_
+0000db70: 6d65 7461 2c20 2765 6e64 5f6c 696e 6527  meta, 'end_line'
+0000db80: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0000db90: 2020 2020 2020 2072 6573 5f6d 6574 612e         res_meta.
+0000dba0: 656e 645f 6c69 6e65 203d 2067 6574 6174  end_line = getat
+0000dbb0: 7472 286c 6173 745f 6d65 7461 2c20 2763  tr(last_meta, 'c
+0000dbc0: 6f6e 7461 696e 6572 5f65 6e64 5f6c 696e  ontainer_end_lin
+0000dbd0: 6527 2c20 6c61 7374 5f6d 6574 612e 656e  e', last_meta.en
+0000dbe0: 645f 6c69 6e65 290a 2020 2020 2020 2020  d_line).        
+0000dbf0: 2020 2020 2020 2020 2020 2020 7265 735f              res_
+0000dc00: 6d65 7461 2e65 6e64 5f63 6f6c 756d 6e20  meta.end_column 
+0000dc10: 3d20 6765 7461 7474 7228 6c61 7374 5f6d  = getattr(last_m
+0000dc20: 6574 612c 2027 636f 6e74 6169 6e65 725f  eta, 'container_
+0000dc30: 656e 645f 636f 6c75 6d6e 272c 206c 6173  end_column', las
+0000dc40: 745f 6d65 7461 2e65 6e64 5f63 6f6c 756d  t_meta.end_colum
+0000dc50: 6e29 0a20 2020 2020 2020 2020 2020 2020  n).             
+0000dc60: 2020 2020 2020 2072 6573 5f6d 6574 612e         res_meta.
+0000dc70: 656e 645f 706f 7320 3d20 6765 7461 7474  end_pos = getatt
+0000dc80: 7228 6c61 7374 5f6d 6574 612c 2027 636f  r(last_meta, 'co
+0000dc90: 6e74 6169 6e65 725f 656e 645f 706f 7327  ntainer_end_pos'
+0000dca0: 2c20 6c61 7374 5f6d 6574 612e 656e 645f  , last_meta.end_
+0000dcb0: 706f 7329 0a20 2020 2020 2020 2020 2020  pos).           
+0000dcc0: 2020 2020 2020 2020 2072 6573 5f6d 6574           res_met
+0000dcd0: 612e 656d 7074 7920 3d20 4661 6c73 650a  a.empty = False.
+0000dce0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000dcf0: 2072 6573 5f6d 6574 612e 636f 6e74 6169   res_meta.contai
+0000dd00: 6e65 725f 656e 645f 6c69 6e65 203d 2067  ner_end_line = g
+0000dd10: 6574 6174 7472 286c 6173 745f 6d65 7461  etattr(last_meta
+0000dd20: 2c20 2763 6f6e 7461 696e 6572 5f65 6e64  , 'container_end
+0000dd30: 5f6c 696e 6527 2c20 6c61 7374 5f6d 6574  _line', last_met
+0000dd40: 612e 656e 645f 6c69 6e65 290a 2020 2020  a.end_line).    
+0000dd50: 2020 2020 2020 2020 2020 2020 7265 735f              res_
+0000dd60: 6d65 7461 2e63 6f6e 7461 696e 6572 5f65  meta.container_e
+0000dd70: 6e64 5f63 6f6c 756d 6e20 3d20 6765 7461  nd_column = geta
+0000dd80: 7474 7228 6c61 7374 5f6d 6574 612c 2027  ttr(last_meta, '
+0000dd90: 636f 6e74 6169 6e65 725f 656e 645f 636f  container_end_co
+0000dda0: 6c75 6d6e 272c 206c 6173 745f 6d65 7461  lumn', last_meta
+0000ddb0: 2e65 6e64 5f63 6f6c 756d 6e29 0a20 2020  .end_column).   
+0000ddc0: 2020 2020 2020 2020 2020 2020 2072 6573               res
+0000ddd0: 5f6d 6574 612e 636f 6e74 6169 6e65 725f  _meta.container_
+0000dde0: 656e 645f 706f 7320 3d20 6765 7461 7474  end_pos = getatt
+0000ddf0: 7228 6c61 7374 5f6d 6574 612c 2027 636f  r(last_meta, 'co
+0000de00: 6e74 6169 6e65 725f 656e 645f 706f 7327  ntainer_end_pos'
+0000de10: 2c20 6c61 7374 5f6d 6574 612e 656e 645f  , last_meta.end_
+0000de20: 706f 7329 0a0a 2020 2020 2020 2020 7265  pos)..        re
+0000de30: 7475 726e 2072 6573 0a0a 2020 2020 6465  turn res..    de
+0000de40: 6620 5f70 705f 6765 745f 6d65 7461 2873  f _pp_get_meta(s
+0000de50: 656c 662c 2063 6869 6c64 7265 6e29 3a0a  elf, children):.
+0000de60: 2020 2020 2020 2020 666f 7220 6320 696e          for c in
+0000de70: 2063 6869 6c64 7265 6e3a 0a20 2020 2020   children:.     
+0000de80: 2020 2020 2020 2069 6620 7365 6c66 2e6e         if self.n
+0000de90: 6f64 655f 6669 6c74 6572 2069 7320 6e6f  ode_filter is no
+0000dea0: 7420 4e6f 6e65 2061 6e64 206e 6f74 2073  t None and not s
+0000deb0: 656c 662e 6e6f 6465 5f66 696c 7465 7228  elf.node_filter(
+0000dec0: 6329 3a0a 2020 2020 2020 2020 2020 2020  c):.            
+0000ded0: 2020 2020 636f 6e74 696e 7565 0a20 2020      continue.   
+0000dee0: 2020 2020 2020 2020 2069 6620 6973 696e           if isin
+0000def0: 7374 616e 6365 2863 2c20 5472 6565 293a  stance(c, Tree):
+0000df00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000df10: 2069 6620 6e6f 7420 632e 6d65 7461 2e65   if not c.meta.e
+0000df20: 6d70 7479 3a0a 2020 2020 2020 2020 2020  mpty:.          
+0000df30: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000df40: 2063 2e6d 6574 610a 2020 2020 2020 2020   c.meta.        
+0000df50: 2020 2020 656c 6966 2069 7369 6e73 7461      elif isinsta
+0000df60: 6e63 6528 632c 2054 6f6b 656e 293a 0a20  nce(c, Token):. 
+0000df70: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+0000df80: 6574 7572 6e20 630a 2020 2020 2020 2020  eturn c.        
+0000df90: 2020 2020 656c 6966 2068 6173 6174 7472      elif hasattr
+0000dfa0: 2863 2c20 275f 5f6c 6172 6b5f 6d65 7461  (c, '__lark_meta
+0000dfb0: 5f5f 2729 3a0a 2020 2020 2020 2020 2020  __'):.          
+0000dfc0: 2020 2020 2020 7265 7475 726e 2063 2e5f        return c._
+0000dfd0: 5f6c 6172 6b5f 6d65 7461 5f5f 2829 0a0a  _lark_meta__()..
+0000dfe0: 6465 6620 6d61 6b65 5f70 726f 7061 6761  def make_propaga
+0000dff0: 7465 5f70 6f73 6974 696f 6e73 286f 7074  te_positions(opt
+0000e000: 696f 6e29 3a0a 2020 2020 6966 2063 616c  ion):.    if cal
+0000e010: 6c61 626c 6528 6f70 7469 6f6e 293a 0a20  lable(option):. 
+0000e020: 2020 2020 2020 2072 6574 7572 6e20 7061         return pa
+0000e030: 7274 6961 6c28 5072 6f70 6167 6174 6550  rtial(PropagateP
+0000e040: 6f73 6974 696f 6e73 2c20 6e6f 6465 5f66  ositions, node_f
+0000e050: 696c 7465 723d 6f70 7469 6f6e 290a 2020  ilter=option).  
+0000e060: 2020 656c 6966 206f 7074 696f 6e20 6973    elif option is
+0000e070: 2054 7275 653a 0a20 2020 2020 2020 2072   True:.        r
+0000e080: 6574 7572 6e20 5072 6f70 6167 6174 6550  eturn PropagateP
+0000e090: 6f73 6974 696f 6e73 0a20 2020 2065 6c69  ositions.    eli
+0000e0a0: 6620 6f70 7469 6f6e 2069 7320 4661 6c73  f option is Fals
+0000e0b0: 653a 0a20 2020 2020 2020 2072 6574 7572  e:.        retur
+0000e0c0: 6e20 4e6f 6e65 0a0a 2020 2020 7261 6973  n None..    rais
+0000e0d0: 6520 436f 6e66 6967 7572 6174 696f 6e45  e ConfigurationE
+0000e0e0: 7272 6f72 2827 496e 7661 6c69 6420 6f70  rror('Invalid op
+0000e0f0: 7469 6f6e 2066 6f72 2070 726f 7061 6761  tion for propaga
+0000e100: 7465 5f70 6f73 6974 696f 6e73 3a20 2572  te_positions: %r
+0000e110: 2720 2520 6f70 7469 6f6e 290a 0a0a 636c  ' % option)...cl
+0000e120: 6173 7320 4368 696c 6446 696c 7465 723a  ass ChildFilter:
+0000e130: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0000e140: 5f28 7365 6c66 2c20 746f 5f69 6e63 6c75  _(self, to_inclu
+0000e150: 6465 2c20 6170 7065 6e64 5f6e 6f6e 652c  de, append_none,
+0000e160: 206e 6f64 655f 6275 696c 6465 7229 3a0a   node_builder):.
+0000e170: 2020 2020 2020 2020 7365 6c66 2e6e 6f64          self.nod
+0000e180: 655f 6275 696c 6465 7220 3d20 6e6f 6465  e_builder = node
+0000e190: 5f62 7569 6c64 6572 0a20 2020 2020 2020  _builder.       
+0000e1a0: 2073 656c 662e 746f 5f69 6e63 6c75 6465   self.to_include
+0000e1b0: 203d 2074 6f5f 696e 636c 7564 650a 2020   = to_include.  
+0000e1c0: 2020 2020 2020 7365 6c66 2e61 7070 656e        self.appen
+0000e1d0: 645f 6e6f 6e65 203d 2061 7070 656e 645f  d_none = append_
+0000e1e0: 6e6f 6e65 0a0a 2020 2020 6465 6620 5f5f  none..    def __
+0000e1f0: 6361 6c6c 5f5f 2873 656c 662c 2063 6869  call__(self, chi
+0000e200: 6c64 7265 6e29 3a0a 2020 2020 2020 2020  ldren):.        
+0000e210: 6669 6c74 6572 6564 203d 205b 5d0a 0a20  filtered = [].. 
+0000e220: 2020 2020 2020 2066 6f72 2069 2c20 746f         for i, to
+0000e230: 5f65 7870 616e 642c 2061 6464 5f6e 6f6e  _expand, add_non
+0000e240: 6520 696e 2073 656c 662e 746f 5f69 6e63  e in self.to_inc
+0000e250: 6c75 6465 3a0a 2020 2020 2020 2020 2020  lude:.          
+0000e260: 2020 6966 2061 6464 5f6e 6f6e 653a 0a20    if add_none:. 
+0000e270: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000e280: 696c 7465 7265 6420 2b3d 205b 4e6f 6e65  iltered += [None
+0000e290: 5d20 2a20 6164 645f 6e6f 6e65 0a20 2020  ] * add_none.   
+0000e2a0: 2020 2020 2020 2020 2069 6620 746f 5f65           if to_e
+0000e2b0: 7870 616e 643a 0a20 2020 2020 2020 2020  xpand:.         
+0000e2c0: 2020 2020 2020 2066 696c 7465 7265 6420         filtered 
+0000e2d0: 2b3d 2063 6869 6c64 7265 6e5b 695d 2e63  += children[i].c
+0000e2e0: 6869 6c64 7265 6e0a 2020 2020 2020 2020  hildren.        
+0000e2f0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+0000e300: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
+0000e310: 6564 2e61 7070 656e 6428 6368 696c 6472  ed.append(childr
+0000e320: 656e 5b69 5d29 0a0a 2020 2020 2020 2020  en[i])..        
+0000e330: 6966 2073 656c 662e 6170 7065 6e64 5f6e  if self.append_n
+0000e340: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+0000e350: 2066 696c 7465 7265 6420 2b3d 205b 4e6f   filtered += [No
+0000e360: 6e65 5d20 2a20 7365 6c66 2e61 7070 656e  ne] * self.appen
+0000e370: 645f 6e6f 6e65 0a0a 2020 2020 2020 2020  d_none..        
+0000e380: 7265 7475 726e 2073 656c 662e 6e6f 6465  return self.node
+0000e390: 5f62 7569 6c64 6572 2866 696c 7465 7265  _builder(filtere
+0000e3a0: 6429 0a0a 0a63 6c61 7373 2043 6869 6c64  d)...class Child
+0000e3b0: 4669 6c74 6572 4c41 4c52 2843 6869 6c64  FilterLALR(Child
+0000e3c0: 4669 6c74 6572 293a 0a20 2020 2023 2d2d  Filter):.    #--
+0000e3d0: 0a0a 2020 2020 6465 6620 5f5f 6361 6c6c  ..    def __call
+0000e3e0: 5f5f 2873 656c 662c 2063 6869 6c64 7265  __(self, childre
+0000e3f0: 6e29 3a0a 2020 2020 2020 2020 6669 6c74  n):.        filt
+0000e400: 6572 6564 203d 205b 5d0a 2020 2020 2020  ered = [].      
+0000e410: 2020 666f 7220 692c 2074 6f5f 6578 7061    for i, to_expa
+0000e420: 6e64 2c20 6164 645f 6e6f 6e65 2069 6e20  nd, add_none in 
+0000e430: 7365 6c66 2e74 6f5f 696e 636c 7564 653a  self.to_include:
+0000e440: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+0000e450: 6164 645f 6e6f 6e65 3a0a 2020 2020 2020  add_none:.      
+0000e460: 2020 2020 2020 2020 2020 6669 6c74 6572            filter
+0000e470: 6564 202b 3d20 5b4e 6f6e 655d 202a 2061  ed += [None] * a
+0000e480: 6464 5f6e 6f6e 650a 2020 2020 2020 2020  dd_none.        
+0000e490: 2020 2020 6966 2074 6f5f 6578 7061 6e64      if to_expand
+0000e4a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000e4b0: 2020 6966 2066 696c 7465 7265 643a 0a20    if filtered:. 
+0000e4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e4d0: 2020 2066 696c 7465 7265 6420 2b3d 2063     filtered += c
+0000e4e0: 6869 6c64 7265 6e5b 695d 2e63 6869 6c64  hildren[i].child
+0000e4f0: 7265 6e0a 2020 2020 2020 2020 2020 2020  ren.            
+0000e500: 2020 2020 656c 7365 3a20 2020 2323 0a0a      else:   ##..
+0000e510: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e520: 2020 2020 6669 6c74 6572 6564 203d 2063      filtered = c
+0000e530: 6869 6c64 7265 6e5b 695d 2e63 6869 6c64  hildren[i].child
+0000e540: 7265 6e0a 2020 2020 2020 2020 2020 2020  ren.            
+0000e550: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+0000e560: 2020 2020 2020 6669 6c74 6572 6564 2e61        filtered.a
+0000e570: 7070 656e 6428 6368 696c 6472 656e 5b69  ppend(children[i
+0000e580: 5d29 0a0a 2020 2020 2020 2020 6966 2073  ])..        if s
+0000e590: 656c 662e 6170 7065 6e64 5f6e 6f6e 653a  elf.append_none:
+0000e5a0: 0a20 2020 2020 2020 2020 2020 2066 696c  .            fil
+0000e5b0: 7465 7265 6420 2b3d 205b 4e6f 6e65 5d20  tered += [None] 
+0000e5c0: 2a20 7365 6c66 2e61 7070 656e 645f 6e6f  * self.append_no
+0000e5d0: 6e65 0a0a 2020 2020 2020 2020 7265 7475  ne..        retu
+0000e5e0: 726e 2073 656c 662e 6e6f 6465 5f62 7569  rn self.node_bui
+0000e5f0: 6c64 6572 2866 696c 7465 7265 6429 0a0a  lder(filtered)..
+0000e600: 0a63 6c61 7373 2043 6869 6c64 4669 6c74  .class ChildFilt
+0000e610: 6572 4c41 4c52 5f4e 6f50 6c61 6365 686f  erLALR_NoPlaceho
+0000e620: 6c64 6572 7328 4368 696c 6446 696c 7465  lders(ChildFilte
+0000e630: 7229 3a0a 2020 2020 232d 2d0a 2020 2020  r):.    #--.    
+0000e640: 6465 6620 5f5f 696e 6974 5f5f 2873 656c  def __init__(sel
+0000e650: 662c 2074 6f5f 696e 636c 7564 652c 206e  f, to_include, n
+0000e660: 6f64 655f 6275 696c 6465 7229 3a0a 2020  ode_builder):.  
+0000e670: 2020 2020 2020 7365 6c66 2e6e 6f64 655f        self.node_
+0000e680: 6275 696c 6465 7220 3d20 6e6f 6465 5f62  builder = node_b
+0000e690: 7569 6c64 6572 0a20 2020 2020 2020 2073  uilder.        s
+0000e6a0: 656c 662e 746f 5f69 6e63 6c75 6465 203d  elf.to_include =
+0000e6b0: 2074 6f5f 696e 636c 7564 650a 0a20 2020   to_include..   
+0000e6c0: 2064 6566 205f 5f63 616c 6c5f 5f28 7365   def __call__(se
+0000e6d0: 6c66 2c20 6368 696c 6472 656e 293a 0a20  lf, children):. 
+0000e6e0: 2020 2020 2020 2066 696c 7465 7265 6420         filtered 
+0000e6f0: 3d20 5b5d 0a20 2020 2020 2020 2066 6f72  = [].        for
+0000e700: 2069 2c20 746f 5f65 7870 616e 6420 696e   i, to_expand in
+0000e710: 2073 656c 662e 746f 5f69 6e63 6c75 6465   self.to_include
+0000e720: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+0000e730: 2074 6f5f 6578 7061 6e64 3a0a 2020 2020   to_expand:.    
+0000e740: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+0000e750: 696c 7465 7265 643a 0a20 2020 2020 2020  iltered:.       
+0000e760: 2020 2020 2020 2020 2020 2020 2066 696c               fil
+0000e770: 7465 7265 6420 2b3d 2063 6869 6c64 7265  tered += childre
+0000e780: 6e5b 695d 2e63 6869 6c64 7265 6e0a 2020  n[i].children.  
+0000e790: 2020 2020 2020 2020 2020 2020 2020 656c                el
+0000e7a0: 7365 3a20 2020 2323 0a0a 2020 2020 2020  se:   ##..      
+0000e7b0: 2020 2020 2020 2020 2020 2020 2020 6669                fi
+0000e7c0: 6c74 6572 6564 203d 2063 6869 6c64 7265  ltered = childre
+0000e7d0: 6e5b 695d 2e63 6869 6c64 7265 6e0a 2020  n[i].children.  
+0000e7e0: 2020 2020 2020 2020 2020 656c 7365 3a0a            else:.
+0000e7f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e800: 6669 6c74 6572 6564 2e61 7070 656e 6428  filtered.append(
+0000e810: 6368 696c 6472 656e 5b69 5d29 0a20 2020  children[i]).   
+0000e820: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0000e830: 2e6e 6f64 655f 6275 696c 6465 7228 6669  .node_builder(fi
+0000e840: 6c74 6572 6564 290a 0a0a 6465 6620 5f73  ltered)...def _s
+0000e850: 686f 756c 645f 6578 7061 6e64 2873 796d  hould_expand(sym
+0000e860: 293a 0a20 2020 2072 6574 7572 6e20 6e6f  ):.    return no
+0000e870: 7420 7379 6d2e 6973 5f74 6572 6d20 616e  t sym.is_term an
+0000e880: 6420 7379 6d2e 6e61 6d65 2e73 7461 7274  d sym.name.start
+0000e890: 7377 6974 6828 275f 2729 0a0a 0a64 6566  swith('_')...def
+0000e8a0: 206d 6179 6265 5f63 7265 6174 655f 6368   maybe_create_ch
+0000e8b0: 696c 645f 6669 6c74 6572 2865 7870 616e  ild_filter(expan
+0000e8c0: 7369 6f6e 2c20 6b65 6570 5f61 6c6c 5f74  sion, keep_all_t
+0000e8d0: 6f6b 656e 732c 2061 6d62 6967 756f 7573  okens, ambiguous
+0000e8e0: 2c20 5f65 6d70 7479 5f69 6e64 6963 6573  , _empty_indices
+0000e8f0: 3a20 4c69 7374 5b62 6f6f 6c5d 293a 0a20  : List[bool]):. 
+0000e900: 2020 2023 230a 0a20 2020 2069 6620 5f65     ##..    if _e
+0000e910: 6d70 7479 5f69 6e64 6963 6573 3a0a 2020  mpty_indices:.  
+0000e920: 2020 2020 2020 6173 7365 7274 205f 656d        assert _em
+0000e930: 7074 795f 696e 6469 6365 732e 636f 756e  pty_indices.coun
+0000e940: 7428 4661 6c73 6529 203d 3d20 6c65 6e28  t(False) == len(
+0000e950: 6578 7061 6e73 696f 6e29 0a20 2020 2020  expansion).     
+0000e960: 2020 2073 203d 2027 272e 6a6f 696e 2873     s = ''.join(s
+0000e970: 7472 2869 6e74 2862 2929 2066 6f72 2062  tr(int(b)) for b
+0000e980: 2069 6e20 5f65 6d70 7479 5f69 6e64 6963   in _empty_indic
+0000e990: 6573 290a 2020 2020 2020 2020 656d 7074  es).        empt
+0000e9a0: 795f 696e 6469 6365 7320 3d20 5b6c 656e  y_indices = [len
+0000e9b0: 286f 6e65 7329 2066 6f72 206f 6e65 7320  (ones) for ones 
+0000e9c0: 696e 2073 2e73 706c 6974 2827 3027 295d  in s.split('0')]
+0000e9d0: 0a20 2020 2020 2020 2061 7373 6572 7420  .        assert 
+0000e9e0: 6c65 6e28 656d 7074 795f 696e 6469 6365  len(empty_indice
+0000e9f0: 7329 203d 3d20 6c65 6e28 6578 7061 6e73  s) == len(expans
+0000ea00: 696f 6e29 2b31 2c20 2865 6d70 7479 5f69  ion)+1, (empty_i
+0000ea10: 6e64 6963 6573 2c20 6c65 6e28 6578 7061  ndices, len(expa
+0000ea20: 6e73 696f 6e29 290a 2020 2020 656c 7365  nsion)).    else
+0000ea30: 3a0a 2020 2020 2020 2020 656d 7074 795f  :.        empty_
+0000ea40: 696e 6469 6365 7320 3d20 5b30 5d20 2a20  indices = [0] * 
+0000ea50: 286c 656e 2865 7870 616e 7369 6f6e 292b  (len(expansion)+
+0000ea60: 3129 0a0a 2020 2020 746f 5f69 6e63 6c75  1)..    to_inclu
+0000ea70: 6465 203d 205b 5d0a 2020 2020 6e6f 6e65  de = [].    none
+0000ea80: 735f 746f 5f61 6464 203d 2030 0a20 2020  s_to_add = 0.   
+0000ea90: 2066 6f72 2069 2c20 7379 6d20 696e 2065   for i, sym in e
+0000eaa0: 6e75 6d65 7261 7465 2865 7870 616e 7369  numerate(expansi
+0000eab0: 6f6e 293a 0a20 2020 2020 2020 206e 6f6e  on):.        non
+0000eac0: 6573 5f74 6f5f 6164 6420 2b3d 2065 6d70  es_to_add += emp
+0000ead0: 7479 5f69 6e64 6963 6573 5b69 5d0a 2020  ty_indices[i].  
+0000eae0: 2020 2020 2020 6966 206b 6565 705f 616c        if keep_al
+0000eaf0: 6c5f 746f 6b65 6e73 206f 7220 6e6f 7420  l_tokens or not 
+0000eb00: 2873 796d 2e69 735f 7465 726d 2061 6e64  (sym.is_term and
+0000eb10: 2073 796d 2e66 696c 7465 725f 6f75 7429   sym.filter_out)
+0000eb20: 3a0a 2020 2020 2020 2020 2020 2020 746f  :.            to
+0000eb30: 5f69 6e63 6c75 6465 2e61 7070 656e 6428  _include.append(
+0000eb40: 2869 2c20 5f73 686f 756c 645f 6578 7061  (i, _should_expa
+0000eb50: 6e64 2873 796d 292c 206e 6f6e 6573 5f74  nd(sym), nones_t
+0000eb60: 6f5f 6164 6429 290a 2020 2020 2020 2020  o_add)).        
+0000eb70: 2020 2020 6e6f 6e65 735f 746f 5f61 6464      nones_to_add
+0000eb80: 203d 2030 0a0a 2020 2020 6e6f 6e65 735f   = 0..    nones_
+0000eb90: 746f 5f61 6464 202b 3d20 656d 7074 795f  to_add += empty_
+0000eba0: 696e 6469 6365 735b 6c65 6e28 6578 7061  indices[len(expa
+0000ebb0: 6e73 696f 6e29 5d0a 0a20 2020 2069 6620  nsion)]..    if 
+0000ebc0: 5f65 6d70 7479 5f69 6e64 6963 6573 206f  _empty_indices o
+0000ebd0: 7220 6c65 6e28 746f 5f69 6e63 6c75 6465  r len(to_include
+0000ebe0: 2920 3c20 6c65 6e28 6578 7061 6e73 696f  ) < len(expansio
+0000ebf0: 6e29 206f 7220 616e 7928 746f 5f65 7870  n) or any(to_exp
+0000ec00: 616e 6420 666f 7220 692c 2074 6f5f 6578  and for i, to_ex
+0000ec10: 7061 6e64 2c5f 2069 6e20 746f 5f69 6e63  pand,_ in to_inc
+0000ec20: 6c75 6465 293a 0a20 2020 2020 2020 2069  lude):.        i
+0000ec30: 6620 5f65 6d70 7479 5f69 6e64 6963 6573  f _empty_indices
+0000ec40: 206f 7220 616d 6269 6775 6f75 733a 0a20   or ambiguous:. 
+0000ec50: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000ec60: 6e20 7061 7274 6961 6c28 4368 696c 6446  n partial(ChildF
+0000ec70: 696c 7465 7220 6966 2061 6d62 6967 756f  ilter if ambiguo
+0000ec80: 7573 2065 6c73 6520 4368 696c 6446 696c  us else ChildFil
+0000ec90: 7465 724c 414c 522c 2074 6f5f 696e 636c  terLALR, to_incl
+0000eca0: 7564 652c 206e 6f6e 6573 5f74 6f5f 6164  ude, nones_to_ad
+0000ecb0: 6429 0a20 2020 2020 2020 2065 6c73 653a  d).        else:
+0000ecc0: 0a20 2020 2020 2020 2020 2020 2023 230a  .            ##.
+0000ecd0: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000ece0: 7572 6e20 7061 7274 6961 6c28 4368 696c  urn partial(Chil
+0000ecf0: 6446 696c 7465 724c 414c 525f 4e6f 506c  dFilterLALR_NoPl
+0000ed00: 6163 6568 6f6c 6465 7273 2c20 5b28 692c  aceholders, [(i,
+0000ed10: 2078 2920 666f 7220 692c 782c 5f20 696e   x) for i,x,_ in
+0000ed20: 2074 6f5f 696e 636c 7564 655d 290a 0a0a   to_include])...
+0000ed30: 636c 6173 7320 416d 6269 6775 6f75 7345  class AmbiguousE
+0000ed40: 7870 616e 6465 723a 0a20 2020 2023 2d2d  xpander:.    #--
+0000ed50: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0000ed60: 5f28 7365 6c66 2c20 746f 5f65 7870 616e  _(self, to_expan
+0000ed70: 642c 2074 7265 655f 636c 6173 732c 206e  d, tree_class, n
+0000ed80: 6f64 655f 6275 696c 6465 7229 3a0a 2020  ode_builder):.  
+0000ed90: 2020 2020 2020 7365 6c66 2e6e 6f64 655f        self.node_
+0000eda0: 6275 696c 6465 7220 3d20 6e6f 6465 5f62  builder = node_b
+0000edb0: 7569 6c64 6572 0a20 2020 2020 2020 2073  uilder.        s
+0000edc0: 656c 662e 7472 6565 5f63 6c61 7373 203d  elf.tree_class =
+0000edd0: 2074 7265 655f 636c 6173 730a 2020 2020   tree_class.    
+0000ede0: 2020 2020 7365 6c66 2e74 6f5f 6578 7061      self.to_expa
+0000edf0: 6e64 203d 2074 6f5f 6578 7061 6e64 0a0a  nd = to_expand..
+0000ee00: 2020 2020 6465 6620 5f5f 6361 6c6c 5f5f      def __call__
+0000ee10: 2873 656c 662c 2063 6869 6c64 7265 6e29  (self, children)
+0000ee20: 3a0a 2020 2020 2020 2020 6465 6620 5f69  :.        def _i
+0000ee30: 735f 616d 6269 675f 7472 6565 2874 293a  s_ambig_tree(t):
+0000ee40: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+0000ee50: 7572 6e20 6861 7361 7474 7228 742c 2027  urn hasattr(t, '
+0000ee60: 6461 7461 2729 2061 6e64 2074 2e64 6174  data') and t.dat
+0000ee70: 6120 3d3d 2027 5f61 6d62 6967 270a 0a20  a == '_ambig'.. 
+0000ee80: 2020 2020 2020 2023 230a 0a20 2020 2020         ##..     
+0000ee90: 2020 2023 230a 0a20 2020 2020 2020 2023     ##..        #
+0000eea0: 230a 0a20 2020 2020 2020 2023 230a 0a20  #..        ##.. 
+0000eeb0: 2020 2020 2020 2061 6d62 6967 756f 7573         ambiguous
+0000eec0: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
+0000eed0: 7220 692c 2063 6869 6c64 2069 6e20 656e  r i, child in en
+0000eee0: 756d 6572 6174 6528 6368 696c 6472 656e  umerate(children
+0000eef0: 293a 0a20 2020 2020 2020 2020 2020 2069  ):.            i
+0000ef00: 6620 5f69 735f 616d 6269 675f 7472 6565  f _is_ambig_tree
+0000ef10: 2863 6869 6c64 293a 0a20 2020 2020 2020  (child):.       
+0000ef20: 2020 2020 2020 2020 2069 6620 6920 696e           if i in
+0000ef30: 2073 656c 662e 746f 5f65 7870 616e 643a   self.to_expand:
+0000ef40: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0000ef50: 2020 2020 2061 6d62 6967 756f 7573 2e61       ambiguous.a
+0000ef60: 7070 656e 6428 6929 0a0a 2020 2020 2020  ppend(i)..      
+0000ef70: 2020 2020 2020 2020 2020 6368 696c 642e            child.
+0000ef80: 6578 7061 6e64 5f6b 6964 735f 6279 5f64  expand_kids_by_d
+0000ef90: 6174 6128 275f 616d 6269 6727 290a 0a20  ata('_ambig').. 
+0000efa0: 2020 2020 2020 2069 6620 6e6f 7420 616d         if not am
+0000efb0: 6269 6775 6f75 733a 0a20 2020 2020 2020  biguous:.       
+0000efc0: 2020 2020 2072 6574 7572 6e20 7365 6c66       return self
+0000efd0: 2e6e 6f64 655f 6275 696c 6465 7228 6368  .node_builder(ch
+0000efe0: 696c 6472 656e 290a 0a20 2020 2020 2020  ildren)..       
+0000eff0: 2065 7870 616e 6420 3d20 5b63 6869 6c64   expand = [child
+0000f000: 2e63 6869 6c64 7265 6e20 6966 2069 2069  .children if i i
+0000f010: 6e20 616d 6269 6775 6f75 7320 656c 7365  n ambiguous else
+0000f020: 2028 6368 696c 642c 2920 666f 7220 692c   (child,) for i,
+0000f030: 2063 6869 6c64 2069 6e20 656e 756d 6572   child in enumer
+0000f040: 6174 6528 6368 696c 6472 656e 295d 0a20  ate(children)]. 
+0000f050: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+0000f060: 6c66 2e74 7265 655f 636c 6173 7328 275f  lf.tree_class('_
+0000f070: 616d 6269 6727 2c20 5b73 656c 662e 6e6f  ambig', [self.no
+0000f080: 6465 5f62 7569 6c64 6572 286c 6973 7428  de_builder(list(
+0000f090: 6629 2920 666f 7220 6620 696e 2070 726f  f)) for f in pro
+0000f0a0: 6475 6374 282a 6578 7061 6e64 295d 290a  duct(*expand)]).
+0000f0b0: 0a0a 6465 6620 6d61 7962 655f 6372 6561  ..def maybe_crea
+0000f0c0: 7465 5f61 6d62 6967 756f 7573 5f65 7870  te_ambiguous_exp
+0000f0d0: 616e 6465 7228 7472 6565 5f63 6c61 7373  ander(tree_class
+0000f0e0: 2c20 6578 7061 6e73 696f 6e2c 206b 6565  , expansion, kee
+0000f0f0: 705f 616c 6c5f 746f 6b65 6e73 293a 0a20  p_all_tokens):. 
+0000f100: 2020 2074 6f5f 6578 7061 6e64 203d 205b     to_expand = [
+0000f110: 6920 666f 7220 692c 2073 796d 2069 6e20  i for i, sym in 
+0000f120: 656e 756d 6572 6174 6528 6578 7061 6e73  enumerate(expans
+0000f130: 696f 6e29 0a20 2020 2020 2020 2020 2020  ion).           
+0000f140: 2020 2020 2020 6966 206b 6565 705f 616c        if keep_al
+0000f150: 6c5f 746f 6b65 6e73 206f 7220 2828 6e6f  l_tokens or ((no
+0000f160: 7420 2873 796d 2e69 735f 7465 726d 2061  t (sym.is_term a
+0000f170: 6e64 2073 796d 2e66 696c 7465 725f 6f75  nd sym.filter_ou
+0000f180: 7429 2920 616e 6420 5f73 686f 756c 645f  t)) and _should_
+0000f190: 6578 7061 6e64 2873 796d 2929 5d0a 2020  expand(sym))].  
+0000f1a0: 2020 6966 2074 6f5f 6578 7061 6e64 3a0a    if to_expand:.
+0000f1b0: 2020 2020 2020 2020 7265 7475 726e 2070          return p
+0000f1c0: 6172 7469 616c 2841 6d62 6967 756f 7573  artial(Ambiguous
+0000f1d0: 4578 7061 6e64 6572 2c20 746f 5f65 7870  Expander, to_exp
+0000f1e0: 616e 642c 2074 7265 655f 636c 6173 7329  and, tree_class)
+0000f1f0: 0a0a 0a63 6c61 7373 2041 6d62 6967 756f  ...class Ambiguo
+0000f200: 7573 496e 7465 726d 6564 6961 7465 4578  usIntermediateEx
+0000f210: 7061 6e64 6572 3a0a 2020 2020 232d 2d0a  pander:.    #--.
+0000f220: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+0000f230: 5f28 7365 6c66 2c20 7472 6565 5f63 6c61  _(self, tree_cla
+0000f240: 7373 2c20 6e6f 6465 5f62 7569 6c64 6572  ss, node_builder
+0000f250: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0000f260: 6e6f 6465 5f62 7569 6c64 6572 203d 206e  node_builder = n
+0000f270: 6f64 655f 6275 696c 6465 720a 2020 2020  ode_builder.    
+0000f280: 2020 2020 7365 6c66 2e74 7265 655f 636c      self.tree_cl
+0000f290: 6173 7320 3d20 7472 6565 5f63 6c61 7373  ass = tree_class
+0000f2a0: 0a0a 2020 2020 6465 6620 5f5f 6361 6c6c  ..    def __call
+0000f2b0: 5f5f 2873 656c 662c 2063 6869 6c64 7265  __(self, childre
+0000f2c0: 6e29 3a0a 2020 2020 2020 2020 6465 6620  n):.        def 
+0000f2d0: 5f69 735f 6961 6d62 6967 5f74 7265 6528  _is_iambig_tree(
+0000f2e0: 6368 696c 6429 3a0a 2020 2020 2020 2020  child):.        
+0000f2f0: 2020 2020 7265 7475 726e 2068 6173 6174      return hasat
+0000f300: 7472 2863 6869 6c64 2c20 2764 6174 6127  tr(child, 'data'
+0000f310: 2920 616e 6420 6368 696c 642e 6461 7461  ) and child.data
+0000f320: 203d 3d20 275f 6961 6d62 6967 270a 0a20   == '_iambig'.. 
+0000f330: 2020 2020 2020 2064 6566 205f 636f 6c6c         def _coll
+0000f340: 6170 7365 5f69 616d 6269 6728 6368 696c  apse_iambig(chil
+0000f350: 6472 656e 293a 0a20 2020 2020 2020 2020  dren):.         
+0000f360: 2020 2023 2d2d 0a0a 2020 2020 2020 2020     #--..        
+0000f370: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
+0000f380: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
+0000f390: 2020 2020 6966 2063 6869 6c64 7265 6e20      if children 
+0000f3a0: 616e 6420 5f69 735f 6961 6d62 6967 5f74  and _is_iambig_t
+0000f3b0: 7265 6528 6368 696c 6472 656e 5b30 5d29  ree(children[0])
+0000f3c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000f3d0: 2020 6961 6d62 6967 5f6e 6f64 6520 3d20    iambig_node = 
+0000f3e0: 6368 696c 6472 656e 5b30 5d0a 2020 2020  children[0].    
+0000f3f0: 2020 2020 2020 2020 2020 2020 7265 7375              resu
+0000f400: 6c74 203d 205b 5d0a 2020 2020 2020 2020  lt = [].        
+0000f410: 2020 2020 2020 2020 666f 7220 6772 616e          for gran
+0000f420: 6463 6869 6c64 2069 6e20 6961 6d62 6967  dchild in iambig
+0000f430: 5f6e 6f64 652e 6368 696c 6472 656e 3a0a  _node.children:.
+0000f440: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f450: 2020 2020 636f 6c6c 6170 7365 6420 3d20      collapsed = 
+0000f460: 5f63 6f6c 6c61 7073 655f 6961 6d62 6967  _collapse_iambig
+0000f470: 2867 7261 6e64 6368 696c 642e 6368 696c  (grandchild.chil
+0000f480: 6472 656e 290a 2020 2020 2020 2020 2020  dren).          
+0000f490: 2020 2020 2020 2020 2020 6966 2063 6f6c            if col
+0000f4a0: 6c61 7073 6564 3a0a 2020 2020 2020 2020  lapsed:.        
+0000f4b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f4c0: 666f 7220 6368 696c 6420 696e 2063 6f6c  for child in col
+0000f4d0: 6c61 7073 6564 3a0a 2020 2020 2020 2020  lapsed:.        
+0000f4e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f4f0: 2020 2020 6368 696c 642e 6368 696c 6472      child.childr
+0000f500: 656e 202b 3d20 6368 696c 6472 656e 5b31  en += children[1
+0000f510: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
+0000f520: 2020 2020 2020 2020 2020 2072 6573 756c             resul
+0000f530: 7420 2b3d 2063 6f6c 6c61 7073 6564 0a20  t += collapsed. 
+0000f540: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f550: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0000f560: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f570: 206e 6577 5f74 7265 6520 3d20 7365 6c66   new_tree = self
+0000f580: 2e74 7265 655f 636c 6173 7328 275f 696e  .tree_class('_in
+0000f590: 7465 7227 2c20 6772 616e 6463 6869 6c64  ter', grandchild
+0000f5a0: 2e63 6869 6c64 7265 6e20 2b20 6368 696c  .children + chil
+0000f5b0: 6472 656e 5b31 3a5d 290a 2020 2020 2020  dren[1:]).      
+0000f5c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000f5d0: 2020 7265 7375 6c74 2e61 7070 656e 6428    result.append(
+0000f5e0: 6e65 775f 7472 6565 290a 2020 2020 2020  new_tree).      
+0000f5f0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+0000f600: 2072 6573 756c 740a 0a20 2020 2020 2020   result..       
+0000f610: 2063 6f6c 6c61 7073 6564 203d 205f 636f   collapsed = _co
+0000f620: 6c6c 6170 7365 5f69 616d 6269 6728 6368  llapse_iambig(ch
+0000f630: 696c 6472 656e 290a 2020 2020 2020 2020  ildren).        
+0000f640: 6966 2063 6f6c 6c61 7073 6564 3a0a 2020  if collapsed:.  
+0000f650: 2020 2020 2020 2020 2020 7072 6f63 6573            proces
+0000f660: 7365 645f 6e6f 6465 7320 3d20 5b73 656c  sed_nodes = [sel
+0000f670: 662e 6e6f 6465 5f62 7569 6c64 6572 2863  f.node_builder(c
+0000f680: 2e63 6869 6c64 7265 6e29 2066 6f72 2063  .children) for c
+0000f690: 2069 6e20 636f 6c6c 6170 7365 645d 0a20   in collapsed]. 
+0000f6a0: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+0000f6b0: 6e20 7365 6c66 2e74 7265 655f 636c 6173  n self.tree_clas
+0000f6c0: 7328 275f 616d 6269 6727 2c20 7072 6f63  s('_ambig', proc
+0000f6d0: 6573 7365 645f 6e6f 6465 7329 0a0a 2020  essed_nodes)..  
+0000f6e0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+0000f6f0: 662e 6e6f 6465 5f62 7569 6c64 6572 2863  f.node_builder(c
+0000f700: 6869 6c64 7265 6e29 0a0a 0a0a 6465 6620  hildren)....def 
+0000f710: 696e 706c 6163 655f 7472 616e 7366 6f72  inplace_transfor
+0000f720: 6d65 7228 6675 6e63 293a 0a20 2020 2040  mer(func):.    @
+0000f730: 7772 6170 7328 6675 6e63 290a 2020 2020  wraps(func).    
+0000f740: 6465 6620 6628 6368 696c 6472 656e 293a  def f(children):
+0000f750: 0a20 2020 2020 2020 2023 230a 0a20 2020  .        ##..   
+0000f760: 2020 2020 2074 7265 6520 3d20 5472 6565       tree = Tree
+0000f770: 2866 756e 632e 5f5f 6e61 6d65 5f5f 2c20  (func.__name__, 
+0000f780: 6368 696c 6472 656e 290a 2020 2020 2020  children).      
+0000f790: 2020 7265 7475 726e 2066 756e 6328 7472    return func(tr
+0000f7a0: 6565 290a 2020 2020 7265 7475 726e 2066  ee).    return f
+0000f7b0: 0a0a 0a64 6566 2061 7070 6c79 5f76 6973  ...def apply_vis
+0000f7c0: 6974 5f77 7261 7070 6572 2866 756e 632c  it_wrapper(func,
+0000f7d0: 206e 616d 652c 2077 7261 7070 6572 293a   name, wrapper):
+0000f7e0: 0a20 2020 2069 6620 7772 6170 7065 7220  .    if wrapper 
+0000f7f0: 6973 205f 7661 7267 735f 6d65 7461 206f  is _vargs_meta o
+0000f800: 7220 7772 6170 7065 7220 6973 205f 7661  r wrapper is _va
+0000f810: 7267 735f 6d65 7461 5f69 6e6c 696e 653a  rgs_meta_inline:
+0000f820: 0a20 2020 2020 2020 2072 6169 7365 204e  .        raise N
+0000f830: 6f74 496d 706c 656d 656e 7465 6445 7272  otImplementedErr
+0000f840: 6f72 2822 4d65 7461 2061 7267 7320 6e6f  or("Meta args no
+0000f850: 7420 7375 7070 6f72 7465 6420 666f 7220  t supported for 
+0000f860: 696e 7465 726e 616c 2074 7261 6e73 666f  internal transfo
+0000f870: 726d 6572 2229 0a0a 2020 2020 4077 7261  rmer")..    @wra
+0000f880: 7073 2866 756e 6329 0a20 2020 2064 6566  ps(func).    def
+0000f890: 2066 2863 6869 6c64 7265 6e29 3a0a 2020   f(children):.  
+0000f8a0: 2020 2020 2020 7265 7475 726e 2077 7261        return wra
+0000f8b0: 7070 6572 2866 756e 632c 206e 616d 652c  pper(func, name,
+0000f8c0: 2063 6869 6c64 7265 6e2c 204e 6f6e 6529   children, None)
+0000f8d0: 0a20 2020 2072 6574 7572 6e20 660a 0a0a  .    return f...
+0000f8e0: 636c 6173 7320 5061 7273 6554 7265 6542  class ParseTreeB
+0000f8f0: 7569 6c64 6572 3a0a 2020 2020 6465 6620  uilder:.    def 
+0000f900: 5f5f 696e 6974 5f5f 2873 656c 662c 2072  __init__(self, r
+0000f910: 756c 6573 2c20 7472 6565 5f63 6c61 7373  ules, tree_class
+0000f920: 2c20 7072 6f70 6167 6174 655f 706f 7369  , propagate_posi
+0000f930: 7469 6f6e 733d 4661 6c73 652c 2061 6d62  tions=False, amb
+0000f940: 6967 756f 7573 3d46 616c 7365 2c20 6d61  iguous=False, ma
+0000f950: 7962 655f 706c 6163 6568 6f6c 6465 7273  ybe_placeholders
+0000f960: 3d46 616c 7365 293a 0a20 2020 2020 2020  =False):.       
+0000f970: 2073 656c 662e 7472 6565 5f63 6c61 7373   self.tree_class
+0000f980: 203d 2074 7265 655f 636c 6173 730a 2020   = tree_class.  
+0000f990: 2020 2020 2020 7365 6c66 2e70 726f 7061        self.propa
+0000f9a0: 6761 7465 5f70 6f73 6974 696f 6e73 203d  gate_positions =
+0000f9b0: 2070 726f 7061 6761 7465 5f70 6f73 6974   propagate_posit
+0000f9c0: 696f 6e73 0a20 2020 2020 2020 2073 656c  ions.        sel
+0000f9d0: 662e 616d 6269 6775 6f75 7320 3d20 616d  f.ambiguous = am
+0000f9e0: 6269 6775 6f75 730a 2020 2020 2020 2020  biguous.        
+0000f9f0: 7365 6c66 2e6d 6179 6265 5f70 6c61 6365  self.maybe_place
+0000fa00: 686f 6c64 6572 7320 3d20 6d61 7962 655f  holders = maybe_
+0000fa10: 706c 6163 6568 6f6c 6465 7273 0a0a 2020  placeholders..  
+0000fa20: 2020 2020 2020 7365 6c66 2e72 756c 655f        self.rule_
+0000fa30: 6275 696c 6465 7273 203d 206c 6973 7428  builders = list(
+0000fa40: 7365 6c66 2e5f 696e 6974 5f62 7569 6c64  self._init_build
+0000fa50: 6572 7328 7275 6c65 7329 290a 0a20 2020  ers(rules))..   
+0000fa60: 2064 6566 205f 696e 6974 5f62 7569 6c64   def _init_build
+0000fa70: 6572 7328 7365 6c66 2c20 7275 6c65 7329  ers(self, rules)
+0000fa80: 3a0a 2020 2020 2020 2020 7072 6f70 6167  :.        propag
+0000fa90: 6174 655f 706f 7369 7469 6f6e 7320 3d20  ate_positions = 
+0000faa0: 6d61 6b65 5f70 726f 7061 6761 7465 5f70  make_propagate_p
+0000fab0: 6f73 6974 696f 6e73 2873 656c 662e 7072  ositions(self.pr
+0000fac0: 6f70 6167 6174 655f 706f 7369 7469 6f6e  opagate_position
+0000fad0: 7329 0a0a 2020 2020 2020 2020 666f 7220  s)..        for 
+0000fae0: 7275 6c65 2069 6e20 7275 6c65 733a 0a20  rule in rules:. 
+0000faf0: 2020 2020 2020 2020 2020 206f 7074 696f             optio
+0000fb00: 6e73 203d 2072 756c 652e 6f70 7469 6f6e  ns = rule.option
+0000fb10: 730a 2020 2020 2020 2020 2020 2020 6b65  s.            ke
+0000fb20: 6570 5f61 6c6c 5f74 6f6b 656e 7320 3d20  ep_all_tokens = 
+0000fb30: 6f70 7469 6f6e 732e 6b65 6570 5f61 6c6c  options.keep_all
+0000fb40: 5f74 6f6b 656e 730a 2020 2020 2020 2020  _tokens.        
+0000fb50: 2020 2020 6578 7061 6e64 5f73 696e 676c      expand_singl
+0000fb60: 655f 6368 696c 6420 3d20 6f70 7469 6f6e  e_child = option
+0000fb70: 732e 6578 7061 6e64 310a 0a20 2020 2020  s.expand1..     
+0000fb80: 2020 2020 2020 2077 7261 7070 6572 5f63         wrapper_c
+0000fb90: 6861 696e 203d 206c 6973 7428 6669 6c74  hain = list(filt
+0000fba0: 6572 284e 6f6e 652c 205b 0a20 2020 2020  er(None, [.     
+0000fbb0: 2020 2020 2020 2020 2020 2028 6578 7061             (expa
+0000fbc0: 6e64 5f73 696e 676c 655f 6368 696c 6420  nd_single_child 
+0000fbd0: 616e 6420 6e6f 7420 7275 6c65 2e61 6c69  and not rule.ali
+0000fbe0: 6173 2920 616e 6420 4578 7061 6e64 5369  as) and ExpandSi
+0000fbf0: 6e67 6c65 4368 696c 642c 0a20 2020 2020  ngleChild,.     
+0000fc00: 2020 2020 2020 2020 2020 206d 6179 6265             maybe
+0000fc10: 5f63 7265 6174 655f 6368 696c 645f 6669  _create_child_fi
+0000fc20: 6c74 6572 2872 756c 652e 6578 7061 6e73  lter(rule.expans
+0000fc30: 696f 6e2c 206b 6565 705f 616c 6c5f 746f  ion, keep_all_to
+0000fc40: 6b65 6e73 2c20 7365 6c66 2e61 6d62 6967  kens, self.ambig
+0000fc50: 756f 7573 2c20 6f70 7469 6f6e 732e 656d  uous, options.em
+0000fc60: 7074 795f 696e 6469 6365 7320 6966 2073  pty_indices if s
+0000fc70: 656c 662e 6d61 7962 655f 706c 6163 6568  elf.maybe_placeh
+0000fc80: 6f6c 6465 7273 2065 6c73 6520 4e6f 6e65  olders else None
+0000fc90: 292c 0a20 2020 2020 2020 2020 2020 2020  ),.             
+0000fca0: 2020 2070 726f 7061 6761 7465 5f70 6f73     propagate_pos
+0000fcb0: 6974 696f 6e73 2c0a 2020 2020 2020 2020  itions,.        
+0000fcc0: 2020 2020 2020 2020 7365 6c66 2e61 6d62          self.amb
+0000fcd0: 6967 756f 7573 2061 6e64 206d 6179 6265  iguous and maybe
+0000fce0: 5f63 7265 6174 655f 616d 6269 6775 6f75  _create_ambiguou
+0000fcf0: 735f 6578 7061 6e64 6572 2873 656c 662e  s_expander(self.
+0000fd00: 7472 6565 5f63 6c61 7373 2c20 7275 6c65  tree_class, rule
+0000fd10: 2e65 7870 616e 7369 6f6e 2c20 6b65 6570  .expansion, keep
+0000fd20: 5f61 6c6c 5f74 6f6b 656e 7329 2c0a 2020  _all_tokens),.  
+0000fd30: 2020 2020 2020 2020 2020 2020 2020 7365                se
+0000fd40: 6c66 2e61 6d62 6967 756f 7573 2061 6e64  lf.ambiguous and
+0000fd50: 2070 6172 7469 616c 2841 6d62 6967 756f   partial(Ambiguo
+0000fd60: 7573 496e 7465 726d 6564 6961 7465 4578  usIntermediateEx
+0000fd70: 7061 6e64 6572 2c20 7365 6c66 2e74 7265  pander, self.tre
+0000fd80: 655f 636c 6173 7329 0a20 2020 2020 2020  e_class).       
+0000fd90: 2020 2020 205d 2929 0a0a 2020 2020 2020       ]))..      
+0000fda0: 2020 2020 2020 7969 656c 6420 7275 6c65        yield rule
+0000fdb0: 2c20 7772 6170 7065 725f 6368 6169 6e0a  , wrapper_chain.
+0000fdc0: 0a20 2020 2064 6566 2063 7265 6174 655f  .    def create_
+0000fdd0: 6361 6c6c 6261 636b 2873 656c 662c 2074  callback(self, t
+0000fde0: 7261 6e73 666f 726d 6572 3d4e 6f6e 6529  ransformer=None)
+0000fdf0: 3a0a 2020 2020 2020 2020 6361 6c6c 6261  :.        callba
+0000fe00: 636b 7320 3d20 7b7d 0a0a 2020 2020 2020  cks = {}..      
+0000fe10: 2020 6465 6661 756c 745f 6861 6e64 6c65    default_handle
+0000fe20: 7220 3d20 6765 7461 7474 7228 7472 616e  r = getattr(tran
+0000fe30: 7366 6f72 6d65 722c 2027 5f5f 6465 6661  sformer, '__defa
+0000fe40: 756c 745f 5f27 2c20 4e6f 6e65 290a 2020  ult__', None).  
+0000fe50: 2020 2020 2020 6966 2064 6566 6175 6c74        if default
+0000fe60: 5f68 616e 646c 6572 3a0a 2020 2020 2020  _handler:.      
+0000fe70: 2020 2020 2020 6465 6620 6465 6661 756c        def defaul
+0000fe80: 745f 6361 6c6c 6261 636b 2864 6174 612c  t_callback(data,
+0000fe90: 2063 6869 6c64 7265 6e29 3a0a 2020 2020   children):.    
+0000fea0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+0000feb0: 726e 2064 6566 6175 6c74 5f68 616e 646c  rn default_handl
+0000fec0: 6572 2864 6174 612c 2063 6869 6c64 7265  er(data, childre
+0000fed0: 6e2c 204e 6f6e 6529 0a20 2020 2020 2020  n, None).       
+0000fee0: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+0000fef0: 2020 2064 6566 6175 6c74 5f63 616c 6c62     default_callb
+0000ff00: 6163 6b20 3d20 7365 6c66 2e74 7265 655f  ack = self.tree_
+0000ff10: 636c 6173 730a 0a20 2020 2020 2020 2066  class..        f
+0000ff20: 6f72 2072 756c 652c 2077 7261 7070 6572  or rule, wrapper
+0000ff30: 5f63 6861 696e 2069 6e20 7365 6c66 2e72  _chain in self.r
+0000ff40: 756c 655f 6275 696c 6465 7273 3a0a 0a20  ule_builders:.. 
+0000ff50: 2020 2020 2020 2020 2020 2075 7365 725f             user_
+0000ff60: 6361 6c6c 6261 636b 5f6e 616d 6520 3d20  callback_name = 
+0000ff70: 7275 6c65 2e61 6c69 6173 206f 7220 7275  rule.alias or ru
+0000ff80: 6c65 2e6f 7074 696f 6e73 2e74 656d 706c  le.options.templ
+0000ff90: 6174 655f 736f 7572 6365 206f 7220 7275  ate_source or ru
+0000ffa0: 6c65 2e6f 7269 6769 6e2e 6e61 6d65 0a20  le.origin.name. 
+0000ffb0: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+0000ffc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ffd0: 6620 3d20 6765 7461 7474 7228 7472 616e  f = getattr(tran
+0000ffe0: 7366 6f72 6d65 722c 2075 7365 725f 6361  sformer, user_ca
+0000fff0: 6c6c 6261 636b 5f6e 616d 6529 0a20 2020  llback_name).   
+00010000: 2020 2020 2020 2020 2020 2020 2077 7261               wra
+00010010: 7070 6572 203d 2067 6574 6174 7472 2866  pper = getattr(f
+00010020: 2c20 2776 6973 6974 5f77 7261 7070 6572  , 'visit_wrapper
+00010030: 272c 204e 6f6e 6529 0a20 2020 2020 2020  ', None).       
+00010040: 2020 2020 2020 2020 2069 6620 7772 6170           if wrap
+00010050: 7065 7220 6973 206e 6f74 204e 6f6e 653a  per is not None:
+00010060: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010070: 2020 2020 2066 203d 2061 7070 6c79 5f76       f = apply_v
+00010080: 6973 6974 5f77 7261 7070 6572 2866 2c20  isit_wrapper(f, 
+00010090: 7573 6572 5f63 616c 6c62 6163 6b5f 6e61  user_callback_na
+000100a0: 6d65 2c20 7772 6170 7065 7229 0a20 2020  me, wrapper).   
+000100b0: 2020 2020 2020 2020 2020 2020 2065 6c69               eli
+000100c0: 6620 6973 696e 7374 616e 6365 2874 7261  f isinstance(tra
+000100d0: 6e73 666f 726d 6572 2c20 5472 616e 7366  nsformer, Transf
+000100e0: 6f72 6d65 725f 496e 506c 6163 6529 3a0a  ormer_InPlace):.
+000100f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00010100: 2020 2020 6620 3d20 696e 706c 6163 655f      f = inplace_
+00010110: 7472 616e 7366 6f72 6d65 7228 6629 0a20  transformer(f). 
+00010120: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00010130: 7420 4174 7472 6962 7574 6545 7272 6f72  t AttributeError
+00010140: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00010150: 2020 6620 3d20 7061 7274 6961 6c28 6465    f = partial(de
+00010160: 6661 756c 745f 6361 6c6c 6261 636b 2c20  fault_callback, 
+00010170: 7573 6572 5f63 616c 6c62 6163 6b5f 6e61  user_callback_na
+00010180: 6d65 290a 0a20 2020 2020 2020 2020 2020  me)..           
+00010190: 2066 6f72 2077 2069 6e20 7772 6170 7065   for w in wrappe
+000101a0: 725f 6368 6169 6e3a 0a20 2020 2020 2020  r_chain:.       
+000101b0: 2020 2020 2020 2020 2066 203d 2077 2866           f = w(f
+000101c0: 290a 0a20 2020 2020 2020 2020 2020 2069  )..            i
+000101d0: 6620 7275 6c65 2069 6e20 6361 6c6c 6261  f rule in callba
+000101e0: 636b 733a 0a20 2020 2020 2020 2020 2020  cks:.           
+000101f0: 2020 2020 2072 6169 7365 2047 7261 6d6d       raise Gramm
+00010200: 6172 4572 726f 7228 2252 756c 6520 2725  arError("Rule '%
+00010210: 7327 2061 6c72 6561 6479 2065 7869 7374  s' already exist
+00010220: 7322 2025 2028 7275 6c65 2c29 290a 0a20  s" % (rule,)).. 
+00010230: 2020 2020 2020 2020 2020 2063 616c 6c62             callb
+00010240: 6163 6b73 5b72 756c 655d 203d 2066 0a0a  acks[rule] = f..
+00010250: 2020 2020 2020 2020 7265 7475 726e 2063          return c
+00010260: 616c 6c62 6163 6b73 0a0a 0a0a 636c 6173  allbacks....clas
+00010270: 7320 4163 7469 6f6e 3a0a 2020 2020 6465  s Action:.    de
+00010280: 6620 5f5f 696e 6974 5f5f 2873 656c 662c  f __init__(self,
+00010290: 206e 616d 6529 3a0a 2020 2020 2020 2020   name):.        
+000102a0: 7365 6c66 2e6e 616d 6520 3d20 6e61 6d65  self.name = name
+000102b0: 0a20 2020 2064 6566 205f 5f73 7472 5f5f  .    def __str__
+000102c0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+000102d0: 7265 7475 726e 2073 656c 662e 6e61 6d65  return self.name
+000102e0: 0a20 2020 2064 6566 205f 5f72 6570 725f  .    def __repr_
+000102f0: 5f28 7365 6c66 293a 0a20 2020 2020 2020  _(self):.       
+00010300: 2072 6574 7572 6e20 7374 7228 7365 6c66   return str(self
+00010310: 290a 0a53 6869 6674 203d 2041 6374 696f  )..Shift = Actio
+00010320: 6e28 2753 6869 6674 2729 0a52 6564 7563  n('Shift').Reduc
+00010330: 6520 3d20 4163 7469 6f6e 2827 5265 6475  e = Action('Redu
+00010340: 6365 2729 0a0a 5374 6174 6554 203d 2054  ce')..StateT = T
+00010350: 7970 6556 6172 2822 5374 6174 6554 2229  ypeVar("StateT")
+00010360: 0a0a 636c 6173 7320 5061 7273 6554 6162  ..class ParseTab
+00010370: 6c65 4261 7365 2847 656e 6572 6963 5b53  leBase(Generic[S
+00010380: 7461 7465 545d 293a 0a20 2020 2073 7461  tateT]):.    sta
+00010390: 7465 733a 2044 6963 745b 5374 6174 6554  tes: Dict[StateT
+000103a0: 2c20 4469 6374 5b73 7472 2c20 5475 706c  , Dict[str, Tupl
+000103b0: 655d 5d0a 2020 2020 7374 6172 745f 7374  e]].    start_st
+000103c0: 6174 6573 3a20 4469 6374 5b73 7472 2c20  ates: Dict[str, 
+000103d0: 5374 6174 6554 5d0a 2020 2020 656e 645f  StateT].    end_
+000103e0: 7374 6174 6573 3a20 4469 6374 5b73 7472  states: Dict[str
+000103f0: 2c20 5374 6174 6554 5d0a 0a20 2020 2064  , StateT]..    d
+00010400: 6566 205f 5f69 6e69 745f 5f28 7365 6c66  ef __init__(self
+00010410: 2c20 7374 6174 6573 2c20 7374 6172 745f  , states, start_
+00010420: 7374 6174 6573 2c20 656e 645f 7374 6174  states, end_stat
+00010430: 6573 293a 0a20 2020 2020 2020 2073 656c  es):.        sel
+00010440: 662e 7374 6174 6573 203d 2073 7461 7465  f.states = state
+00010450: 730a 2020 2020 2020 2020 7365 6c66 2e73  s.        self.s
+00010460: 7461 7274 5f73 7461 7465 7320 3d20 7374  tart_states = st
+00010470: 6172 745f 7374 6174 6573 0a20 2020 2020  art_states.     
+00010480: 2020 2073 656c 662e 656e 645f 7374 6174     self.end_stat
+00010490: 6573 203d 2065 6e64 5f73 7461 7465 730a  es = end_states.
+000104a0: 0a20 2020 2064 6566 2073 6572 6961 6c69  .    def seriali
+000104b0: 7a65 2873 656c 662c 206d 656d 6f29 3a0a  ze(self, memo):.
+000104c0: 2020 2020 2020 2020 746f 6b65 6e73 203d          tokens =
+000104d0: 2045 6e75 6d65 7261 746f 7228 290a 0a20   Enumerator().. 
+000104e0: 2020 2020 2020 2073 7461 7465 7320 3d20         states = 
+000104f0: 7b0a 2020 2020 2020 2020 2020 2020 7374  {.            st
+00010500: 6174 653a 207b 746f 6b65 6e73 2e67 6574  ate: {tokens.get
+00010510: 2874 6f6b 656e 293a 2028 2831 2c20 6172  (token): ((1, ar
+00010520: 672e 7365 7269 616c 697a 6528 6d65 6d6f  g.serialize(memo
+00010530: 2929 2069 6620 6163 7469 6f6e 2069 7320  )) if action is 
+00010540: 5265 6475 6365 2065 6c73 6520 2830 2c20  Reduce else (0, 
+00010550: 6172 6729 290a 2020 2020 2020 2020 2020  arg)).          
+00010560: 2020 2020 2020 2020 2020 666f 7220 746f            for to
+00010570: 6b65 6e2c 2028 6163 7469 6f6e 2c20 6172  ken, (action, ar
+00010580: 6729 2069 6e20 6163 7469 6f6e 732e 6974  g) in actions.it
+00010590: 656d 7328 297d 0a20 2020 2020 2020 2020  ems()}.         
+000105a0: 2020 2066 6f72 2073 7461 7465 2c20 6163     for state, ac
+000105b0: 7469 6f6e 7320 696e 2073 656c 662e 7374  tions in self.st
+000105c0: 6174 6573 2e69 7465 6d73 2829 0a20 2020  ates.items().   
+000105d0: 2020 2020 207d 0a0a 2020 2020 2020 2020       }..        
+000105e0: 7265 7475 726e 207b 0a20 2020 2020 2020  return {.       
+000105f0: 2020 2020 2027 746f 6b65 6e73 273a 2074       'tokens': t
+00010600: 6f6b 656e 732e 7265 7665 7273 6564 2829  okens.reversed()
+00010610: 2c0a 2020 2020 2020 2020 2020 2020 2773  ,.            's
+00010620: 7461 7465 7327 3a20 7374 6174 6573 2c0a  tates': states,.
+00010630: 2020 2020 2020 2020 2020 2020 2773 7461              'sta
+00010640: 7274 5f73 7461 7465 7327 3a20 7365 6c66  rt_states': self
+00010650: 2e73 7461 7274 5f73 7461 7465 732c 0a20  .start_states,. 
+00010660: 2020 2020 2020 2020 2020 2027 656e 645f             'end_
+00010670: 7374 6174 6573 273a 2073 656c 662e 656e  states': self.en
+00010680: 645f 7374 6174 6573 2c0a 2020 2020 2020  d_states,.      
+00010690: 2020 7d0a 0a20 2020 2040 636c 6173 736d    }..    @classm
+000106a0: 6574 686f 640a 2020 2020 6465 6620 6465  ethod.    def de
+000106b0: 7365 7269 616c 697a 6528 636c 732c 2064  serialize(cls, d
+000106c0: 6174 612c 206d 656d 6f29 3a0a 2020 2020  ata, memo):.    
+000106d0: 2020 2020 746f 6b65 6e73 203d 2064 6174      tokens = dat
+000106e0: 615b 2774 6f6b 656e 7327 5d0a 2020 2020  a['tokens'].    
+000106f0: 2020 2020 7374 6174 6573 203d 207b 0a20      states = {. 
+00010700: 2020 2020 2020 2020 2020 2073 7461 7465             state
+00010710: 3a20 7b74 6f6b 656e 735b 746f 6b65 6e5d  : {tokens[token]
+00010720: 3a20 2828 5265 6475 6365 2c20 5275 6c65  : ((Reduce, Rule
+00010730: 2e64 6573 6572 6961 6c69 7a65 2861 7267  .deserialize(arg
+00010740: 2c20 6d65 6d6f 2929 2069 6620 6163 7469  , memo)) if acti
+00010750: 6f6e 3d3d 3120 656c 7365 2028 5368 6966  on==1 else (Shif
+00010760: 742c 2061 7267 2929 0a20 2020 2020 2020  t, arg)).       
+00010770: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00010780: 2074 6f6b 656e 2c20 2861 6374 696f 6e2c   token, (action,
+00010790: 2061 7267 2920 696e 2061 6374 696f 6e73   arg) in actions
+000107a0: 2e69 7465 6d73 2829 7d0a 2020 2020 2020  .items()}.      
+000107b0: 2020 2020 2020 666f 7220 7374 6174 652c        for state,
+000107c0: 2061 6374 696f 6e73 2069 6e20 6461 7461   actions in data
+000107d0: 5b27 7374 6174 6573 275d 2e69 7465 6d73  ['states'].items
+000107e0: 2829 0a20 2020 2020 2020 207d 0a20 2020  ().        }.   
+000107f0: 2020 2020 2072 6574 7572 6e20 636c 7328       return cls(
+00010800: 7374 6174 6573 2c20 6461 7461 5b27 7374  states, data['st
+00010810: 6172 745f 7374 6174 6573 275d 2c20 6461  art_states'], da
+00010820: 7461 5b27 656e 645f 7374 6174 6573 275d  ta['end_states']
+00010830: 290a 0a63 6c61 7373 2050 6172 7365 5461  )..class ParseTa
+00010840: 626c 6528 5061 7273 6554 6162 6c65 4261  ble(ParseTableBa
+00010850: 7365 5b27 5374 6174 6527 5d29 3a0a 2020  se['State']):.  
+00010860: 2020 232d 2d0a 2020 2020 7061 7373 0a0a    #--.    pass..
+00010870: 0a63 6c61 7373 2049 6e74 5061 7273 6554  .class IntParseT
+00010880: 6162 6c65 2850 6172 7365 5461 626c 6542  able(ParseTableB
+00010890: 6173 655b 696e 745d 293a 0a20 2020 2023  ase[int]):.    #
+000108a0: 2d2d 0a0a 2020 2020 4063 6c61 7373 6d65  --..    @classme
+000108b0: 7468 6f64 0a20 2020 2064 6566 2066 726f  thod.    def fro
+000108c0: 6d5f 5061 7273 6554 6162 6c65 2863 6c73  m_ParseTable(cls
+000108d0: 2c20 7061 7273 655f 7461 626c 653a 2050  , parse_table: P
+000108e0: 6172 7365 5461 626c 6529 3a0a 2020 2020  arseTable):.    
+000108f0: 2020 2020 656e 756d 203d 206c 6973 7428      enum = list(
+00010900: 7061 7273 655f 7461 626c 652e 7374 6174  parse_table.stat
+00010910: 6573 290a 2020 2020 2020 2020 7374 6174  es).        stat
+00010920: 655f 746f 5f69 6478 3a20 4469 6374 5b27  e_to_idx: Dict['
+00010930: 5374 6174 6527 2c20 696e 745d 203d 207b  State', int] = {
+00010940: 733a 6920 666f 7220 692c 7320 696e 2065  s:i for i,s in e
+00010950: 6e75 6d65 7261 7465 2865 6e75 6d29 7d0a  numerate(enum)}.
+00010960: 2020 2020 2020 2020 696e 745f 7374 6174          int_stat
+00010970: 6573 203d 207b 7d0a 0a20 2020 2020 2020  es = {}..       
+00010980: 2066 6f72 2073 2c20 6c61 2069 6e20 7061   for s, la in pa
+00010990: 7273 655f 7461 626c 652e 7374 6174 6573  rse_table.states
+000109a0: 2e69 7465 6d73 2829 3a0a 2020 2020 2020  .items():.      
+000109b0: 2020 2020 2020 6c61 203d 207b 6b3a 2876        la = {k:(v
+000109c0: 5b30 5d2c 2073 7461 7465 5f74 6f5f 6964  [0], state_to_id
+000109d0: 785b 765b 315d 5d29 2069 6620 765b 305d  x[v[1]]) if v[0]
+000109e0: 2069 7320 5368 6966 7420 656c 7365 2076   is Shift else v
+000109f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00010a00: 2020 2066 6f72 206b 2c76 2069 6e20 6c61     for k,v in la
+00010a10: 2e69 7465 6d73 2829 7d0a 2020 2020 2020  .items()}.      
+00010a20: 2020 2020 2020 696e 745f 7374 6174 6573        int_states
+00010a30: 5b20 7374 6174 655f 746f 5f69 6478 5b73  [ state_to_idx[s
+00010a40: 5d20 5d20 3d20 6c61 0a0a 0a20 2020 2020  ] ] = la...     
+00010a50: 2020 2073 7461 7274 5f73 7461 7465 7320     start_states 
+00010a60: 3d20 7b73 7461 7274 3a73 7461 7465 5f74  = {start:state_t
+00010a70: 6f5f 6964 785b 735d 2066 6f72 2073 7461  o_idx[s] for sta
+00010a80: 7274 2c20 7320 696e 2070 6172 7365 5f74  rt, s in parse_t
+00010a90: 6162 6c65 2e73 7461 7274 5f73 7461 7465  able.start_state
+00010aa0: 732e 6974 656d 7328 297d 0a20 2020 2020  s.items()}.     
+00010ab0: 2020 2065 6e64 5f73 7461 7465 7320 3d20     end_states = 
+00010ac0: 7b73 7461 7274 3a73 7461 7465 5f74 6f5f  {start:state_to_
+00010ad0: 6964 785b 735d 2066 6f72 2073 7461 7274  idx[s] for start
+00010ae0: 2c20 7320 696e 2070 6172 7365 5f74 6162  , s in parse_tab
+00010af0: 6c65 2e65 6e64 5f73 7461 7465 732e 6974  le.end_states.it
+00010b00: 656d 7328 297d 0a20 2020 2020 2020 2072  ems()}.        r
+00010b10: 6574 7572 6e20 636c 7328 696e 745f 7374  eturn cls(int_st
+00010b20: 6174 6573 2c20 7374 6172 745f 7374 6174  ates, start_stat
+00010b30: 6573 2c20 656e 645f 7374 6174 6573 290a  es, end_states).
+00010b40: 0a0a 0a63 6c61 7373 2050 6172 7365 436f  ...class ParseCo
+00010b50: 6e66 2847 656e 6572 6963 5b53 7461 7465  nf(Generic[State
+00010b60: 545d 293a 0a20 2020 205f 5f73 6c6f 7473  T]):.    __slots
+00010b70: 5f5f 203d 2027 7061 7273 655f 7461 626c  __ = 'parse_tabl
+00010b80: 6527 2c20 2763 616c 6c62 6163 6b73 272c  e', 'callbacks',
+00010b90: 2027 7374 6172 7427 2c20 2773 7461 7274   'start', 'start
+00010ba0: 5f73 7461 7465 272c 2027 656e 645f 7374  _state', 'end_st
+00010bb0: 6174 6527 2c20 2773 7461 7465 7327 0a0a  ate', 'states'..
+00010bc0: 2020 2020 7061 7273 655f 7461 626c 653a      parse_table:
+00010bd0: 2050 6172 7365 5461 626c 6542 6173 655b   ParseTableBase[
+00010be0: 5374 6174 6554 5d0a 2020 2020 6361 6c6c  StateT].    call
+00010bf0: 6261 636b 733a 2050 6172 7365 7243 616c  backs: ParserCal
+00010c00: 6c62 6163 6b73 0a20 2020 2073 7461 7274  lbacks.    start
+00010c10: 3a20 7374 720a 0a20 2020 2073 7461 7274  : str..    start
+00010c20: 5f73 7461 7465 3a20 5374 6174 6554 0a20  _state: StateT. 
+00010c30: 2020 2065 6e64 5f73 7461 7465 3a20 5374     end_state: St
+00010c40: 6174 6554 0a20 2020 2073 7461 7465 733a  ateT.    states:
+00010c50: 2044 6963 745b 5374 6174 6554 2c20 4469   Dict[StateT, Di
+00010c60: 6374 5b73 7472 2c20 7475 706c 655d 5d0a  ct[str, tuple]].
+00010c70: 0a20 2020 2064 6566 205f 5f69 6e69 745f  .    def __init_
+00010c80: 5f28 7365 6c66 2c20 7061 7273 655f 7461  _(self, parse_ta
+00010c90: 626c 653a 2050 6172 7365 5461 626c 6542  ble: ParseTableB
+00010ca0: 6173 655b 5374 6174 6554 5d2c 2063 616c  ase[StateT], cal
+00010cb0: 6c62 6163 6b73 3a20 5061 7273 6572 4361  lbacks: ParserCa
+00010cc0: 6c6c 6261 636b 732c 2073 7461 7274 3a20  llbacks, start: 
+00010cd0: 7374 7229 3a0a 2020 2020 2020 2020 7365  str):.        se
+00010ce0: 6c66 2e70 6172 7365 5f74 6162 6c65 203d  lf.parse_table =
+00010cf0: 2070 6172 7365 5f74 6162 6c65 0a0a 2020   parse_table..  
+00010d00: 2020 2020 2020 7365 6c66 2e73 7461 7274        self.start
+00010d10: 5f73 7461 7465 203d 2073 656c 662e 7061  _state = self.pa
+00010d20: 7273 655f 7461 626c 652e 7374 6172 745f  rse_table.start_
+00010d30: 7374 6174 6573 5b73 7461 7274 5d0a 2020  states[start].  
+00010d40: 2020 2020 2020 7365 6c66 2e65 6e64 5f73        self.end_s
+00010d50: 7461 7465 203d 2073 656c 662e 7061 7273  tate = self.pars
+00010d60: 655f 7461 626c 652e 656e 645f 7374 6174  e_table.end_stat
+00010d70: 6573 5b73 7461 7274 5d0a 2020 2020 2020  es[start].      
+00010d80: 2020 7365 6c66 2e73 7461 7465 7320 3d20    self.states = 
+00010d90: 7365 6c66 2e70 6172 7365 5f74 6162 6c65  self.parse_table
+00010da0: 2e73 7461 7465 730a 0a20 2020 2020 2020  .states..       
+00010db0: 2073 656c 662e 6361 6c6c 6261 636b 7320   self.callbacks 
+00010dc0: 3d20 6361 6c6c 6261 636b 730a 2020 2020  = callbacks.    
+00010dd0: 2020 2020 7365 6c66 2e73 7461 7274 203d      self.start =
+00010de0: 2073 7461 7274 0a0a 636c 6173 7320 5061   start..class Pa
+00010df0: 7273 6572 5374 6174 6528 4765 6e65 7269  rserState(Generi
+00010e00: 635b 5374 6174 6554 5d29 3a0a 2020 2020  c[StateT]):.    
+00010e10: 5f5f 736c 6f74 735f 5f20 3d20 2770 6172  __slots__ = 'par
+00010e20: 7365 5f63 6f6e 6627 2c20 276c 6578 6572  se_conf', 'lexer
+00010e30: 272c 2027 7374 6174 655f 7374 6163 6b27  ', 'state_stack'
+00010e40: 2c20 2776 616c 7565 5f73 7461 636b 270a  , 'value_stack'.
+00010e50: 0a20 2020 2070 6172 7365 5f63 6f6e 663a  .    parse_conf:
+00010e60: 2050 6172 7365 436f 6e66 5b53 7461 7465   ParseConf[State
+00010e70: 545d 0a20 2020 206c 6578 6572 3a20 4c65  T].    lexer: Le
+00010e80: 7865 7254 6872 6561 640a 2020 2020 7374  xerThread.    st
+00010e90: 6174 655f 7374 6163 6b3a 204c 6973 745b  ate_stack: List[
+00010ea0: 5374 6174 6554 5d0a 2020 2020 7661 6c75  StateT].    valu
+00010eb0: 655f 7374 6163 6b3a 206c 6973 740a 0a20  e_stack: list.. 
+00010ec0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00010ed0: 7365 6c66 2c20 7061 7273 655f 636f 6e66  self, parse_conf
+00010ee0: 3a20 5061 7273 6543 6f6e 665b 5374 6174  : ParseConf[Stat
+00010ef0: 6554 5d2c 206c 6578 6572 3a20 4c65 7865  eT], lexer: Lexe
+00010f00: 7254 6872 6561 642c 2073 7461 7465 5f73  rThread, state_s
+00010f10: 7461 636b 3d4e 6f6e 652c 2076 616c 7565  tack=None, value
+00010f20: 5f73 7461 636b 3d4e 6f6e 6529 3a0a 2020  _stack=None):.  
+00010f30: 2020 2020 2020 7365 6c66 2e70 6172 7365        self.parse
+00010f40: 5f63 6f6e 6620 3d20 7061 7273 655f 636f  _conf = parse_co
+00010f50: 6e66 0a20 2020 2020 2020 2073 656c 662e  nf.        self.
+00010f60: 6c65 7865 7220 3d20 6c65 7865 720a 2020  lexer = lexer.  
+00010f70: 2020 2020 2020 7365 6c66 2e73 7461 7465        self.state
+00010f80: 5f73 7461 636b 203d 2073 7461 7465 5f73  _stack = state_s
+00010f90: 7461 636b 206f 7220 5b73 656c 662e 7061  tack or [self.pa
+00010fa0: 7273 655f 636f 6e66 2e73 7461 7274 5f73  rse_conf.start_s
+00010fb0: 7461 7465 5d0a 2020 2020 2020 2020 7365  tate].        se
+00010fc0: 6c66 2e76 616c 7565 5f73 7461 636b 203d  lf.value_stack =
+00010fd0: 2076 616c 7565 5f73 7461 636b 206f 7220   value_stack or 
+00010fe0: 5b5d 0a0a 2020 2020 4070 726f 7065 7274  []..    @propert
+00010ff0: 790a 2020 2020 6465 6620 706f 7369 7469  y.    def positi
+00011000: 6f6e 2873 656c 6629 202d 3e20 5374 6174  on(self) -> Stat
+00011010: 6554 3a0a 2020 2020 2020 2020 7265 7475  eT:.        retu
+00011020: 726e 2073 656c 662e 7374 6174 655f 7374  rn self.state_st
+00011030: 6163 6b5b 2d31 5d0a 0a20 2020 2023 230a  ack[-1]..    ##.
+00011040: 0a20 2020 2064 6566 205f 5f65 715f 5f28  .    def __eq__(
+00011050: 7365 6c66 2c20 6f74 6865 7229 202d 3e20  self, other) -> 
+00011060: 626f 6f6c 3a0a 2020 2020 2020 2020 6966  bool:.        if
+00011070: 206e 6f74 2069 7369 6e73 7461 6e63 6528   not isinstance(
+00011080: 6f74 6865 722c 2050 6172 7365 7253 7461  other, ParserSta
+00011090: 7465 293a 0a20 2020 2020 2020 2020 2020  te):.           
+000110a0: 2072 6574 7572 6e20 4e6f 7449 6d70 6c65   return NotImple
+000110b0: 6d65 6e74 6564 0a20 2020 2020 2020 2072  mented.        r
+000110c0: 6574 7572 6e20 6c65 6e28 7365 6c66 2e73  eturn len(self.s
+000110d0: 7461 7465 5f73 7461 636b 2920 3d3d 206c  tate_stack) == l
+000110e0: 656e 286f 7468 6572 2e73 7461 7465 5f73  en(other.state_s
+000110f0: 7461 636b 2920 616e 6420 7365 6c66 2e70  tack) and self.p
+00011100: 6f73 6974 696f 6e20 3d3d 206f 7468 6572  osition == other
+00011110: 2e70 6f73 6974 696f 6e0a 0a20 2020 2064  .position..    d
+00011120: 6566 205f 5f63 6f70 795f 5f28 7365 6c66  ef __copy__(self
+00011130: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00011140: 6e20 7479 7065 2873 656c 6629 280a 2020  n type(self)(.  
+00011150: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
+00011160: 6172 7365 5f63 6f6e 662c 0a20 2020 2020  arse_conf,.     
+00011170: 2020 2020 2020 2073 656c 662e 6c65 7865         self.lexe
+00011180: 722c 2023 230a 0a20 2020 2020 2020 2020  r, ##..         
+00011190: 2020 2063 6f70 7928 7365 6c66 2e73 7461     copy(self.sta
+000111a0: 7465 5f73 7461 636b 292c 0a20 2020 2020  te_stack),.     
+000111b0: 2020 2020 2020 2064 6565 7063 6f70 7928         deepcopy(
+000111c0: 7365 6c66 2e76 616c 7565 5f73 7461 636b  self.value_stack
+000111d0: 292c 0a20 2020 2020 2020 2029 0a0a 2020  ),.        )..  
+000111e0: 2020 6465 6620 636f 7079 2873 656c 6629    def copy(self)
+000111f0: 202d 3e20 2750 6172 7365 7253 7461 7465   -> 'ParserState
+00011200: 5b53 7461 7465 545d 273a 0a20 2020 2020  [StateT]':.     
+00011210: 2020 2072 6574 7572 6e20 636f 7079 2873     return copy(s
+00011220: 656c 6629 0a0a 2020 2020 6465 6620 6665  elf)..    def fe
+00011230: 6564 5f74 6f6b 656e 2873 656c 662c 2074  ed_token(self, t
+00011240: 6f6b 656e 3a20 546f 6b65 6e2c 2069 735f  oken: Token, is_
+00011250: 656e 643d 4661 6c73 6529 202d 3e20 416e  end=False) -> An
+00011260: 793a 0a20 2020 2020 2020 2073 7461 7465  y:.        state
+00011270: 5f73 7461 636b 203d 2073 656c 662e 7374  _stack = self.st
+00011280: 6174 655f 7374 6163 6b0a 2020 2020 2020  ate_stack.      
+00011290: 2020 7661 6c75 655f 7374 6163 6b20 3d20    value_stack = 
+000112a0: 7365 6c66 2e76 616c 7565 5f73 7461 636b  self.value_stack
+000112b0: 0a20 2020 2020 2020 2073 7461 7465 7320  .        states 
+000112c0: 3d20 7365 6c66 2e70 6172 7365 5f63 6f6e  = self.parse_con
+000112d0: 662e 7374 6174 6573 0a20 2020 2020 2020  f.states.       
+000112e0: 2065 6e64 5f73 7461 7465 203d 2073 656c   end_state = sel
+000112f0: 662e 7061 7273 655f 636f 6e66 2e65 6e64  f.parse_conf.end
+00011300: 5f73 7461 7465 0a20 2020 2020 2020 2063  _state.        c
+00011310: 616c 6c62 6163 6b73 203d 2073 656c 662e  allbacks = self.
+00011320: 7061 7273 655f 636f 6e66 2e63 616c 6c62  parse_conf.callb
+00011330: 6163 6b73 0a0a 2020 2020 2020 2020 7768  acks..        wh
+00011340: 696c 6520 5472 7565 3a0a 2020 2020 2020  ile True:.      
+00011350: 2020 2020 2020 7374 6174 6520 3d20 7374        state = st
+00011360: 6174 655f 7374 6163 6b5b 2d31 5d0a 2020  ate_stack[-1].  
+00011370: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00011380: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+00011390: 6374 696f 6e2c 2061 7267 203d 2073 7461  ction, arg = sta
+000113a0: 7465 735b 7374 6174 655d 5b74 6f6b 656e  tes[state][token
+000113b0: 2e74 7970 655d 0a20 2020 2020 2020 2020  .type].         
+000113c0: 2020 2065 7863 6570 7420 4b65 7945 7272     except KeyErr
+000113d0: 6f72 3a0a 2020 2020 2020 2020 2020 2020  or:.            
+000113e0: 2020 2020 6578 7065 6374 6564 203d 207b      expected = {
+000113f0: 7320 666f 7220 7320 696e 2073 7461 7465  s for s in state
+00011400: 735b 7374 6174 655d 2e6b 6579 7328 2920  s[state].keys() 
+00011410: 6966 2073 2e69 7375 7070 6572 2829 7d0a  if s.isupper()}.
+00011420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011430: 7261 6973 6520 556e 6578 7065 6374 6564  raise Unexpected
+00011440: 546f 6b65 6e28 746f 6b65 6e2c 2065 7870  Token(token, exp
+00011450: 6563 7465 642c 2073 7461 7465 3d73 656c  ected, state=sel
+00011460: 662c 2069 6e74 6572 6163 7469 7665 5f70  f, interactive_p
+00011470: 6172 7365 723d 4e6f 6e65 290a 0a20 2020  arser=None)..   
+00011480: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00011490: 6172 6720 213d 2065 6e64 5f73 7461 7465  arg != end_state
+000114a0: 0a0a 2020 2020 2020 2020 2020 2020 6966  ..            if
+000114b0: 2061 6374 696f 6e20 6973 2053 6869 6674   action is Shift
+000114c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000114d0: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
+000114e0: 2020 2020 2020 6173 7365 7274 206e 6f74        assert not
+000114f0: 2069 735f 656e 640a 2020 2020 2020 2020   is_end.        
+00011500: 2020 2020 2020 2020 7374 6174 655f 7374          state_st
+00011510: 6163 6b2e 6170 7065 6e64 2861 7267 290a  ack.append(arg).
+00011520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011530: 7661 6c75 655f 7374 6163 6b2e 6170 7065  value_stack.appe
+00011540: 6e64 2874 6f6b 656e 2069 6620 746f 6b65  nd(token if toke
+00011550: 6e2e 7479 7065 206e 6f74 2069 6e20 6361  n.type not in ca
+00011560: 6c6c 6261 636b 7320 656c 7365 2063 616c  llbacks else cal
+00011570: 6c62 6163 6b73 5b74 6f6b 656e 2e74 7970  lbacks[token.typ
+00011580: 655d 2874 6f6b 656e 2929 0a20 2020 2020  e](token)).     
+00011590: 2020 2020 2020 2020 2020 2072 6574 7572             retur
+000115a0: 6e0a 2020 2020 2020 2020 2020 2020 656c  n.            el
+000115b0: 7365 3a0a 2020 2020 2020 2020 2020 2020  se:.            
+000115c0: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
+000115d0: 2020 2020 2020 2020 7275 6c65 203d 2061          rule = a
+000115e0: 7267 0a20 2020 2020 2020 2020 2020 2020  rg.             
+000115f0: 2020 2073 697a 6520 3d20 6c65 6e28 7275     size = len(ru
+00011600: 6c65 2e65 7870 616e 7369 6f6e 290a 2020  le.expansion).  
+00011610: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00011620: 2073 697a 653a 0a20 2020 2020 2020 2020   size:.         
+00011630: 2020 2020 2020 2020 2020 2073 203d 2076             s = v
+00011640: 616c 7565 5f73 7461 636b 5b2d 7369 7a65  alue_stack[-size
+00011650: 3a5d 0a20 2020 2020 2020 2020 2020 2020  :].             
+00011660: 2020 2020 2020 2064 656c 2073 7461 7465         del state
+00011670: 5f73 7461 636b 5b2d 7369 7a65 3a5d 0a20  _stack[-size:]. 
+00011680: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011690: 2020 2064 656c 2076 616c 7565 5f73 7461     del value_sta
+000116a0: 636b 5b2d 7369 7a65 3a5d 0a20 2020 2020  ck[-size:].     
+000116b0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+000116c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000116d0: 2020 2020 2073 203d 205b 5d0a 0a20 2020       s = []..   
+000116e0: 2020 2020 2020 2020 2020 2020 2076 616c               val
+000116f0: 7565 203d 2063 616c 6c62 6163 6b73 5b72  ue = callbacks[r
+00011700: 756c 655d 2873 2920 6966 2063 616c 6c62  ule](s) if callb
+00011710: 6163 6b73 2065 6c73 6520 730a 0a20 2020  acks else s..   
+00011720: 2020 2020 2020 2020 2020 2020 205f 6163               _ac
+00011730: 7469 6f6e 2c20 6e65 775f 7374 6174 6520  tion, new_state 
+00011740: 3d20 7374 6174 6573 5b73 7461 7465 5f73  = states[state_s
+00011750: 7461 636b 5b2d 315d 5d5b 7275 6c65 2e6f  tack[-1]][rule.o
+00011760: 7269 6769 6e2e 6e61 6d65 5d0a 2020 2020  rigin.name].    
+00011770: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00011780: 7274 205f 6163 7469 6f6e 2069 7320 5368  rt _action is Sh
+00011790: 6966 740a 2020 2020 2020 2020 2020 2020  ift.            
+000117a0: 2020 2020 7374 6174 655f 7374 6163 6b2e      state_stack.
+000117b0: 6170 7065 6e64 286e 6577 5f73 7461 7465  append(new_state
+000117c0: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+000117d0: 2020 7661 6c75 655f 7374 6163 6b2e 6170    value_stack.ap
+000117e0: 7065 6e64 2876 616c 7565 290a 0a20 2020  pend(value)..   
+000117f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00011800: 6973 5f65 6e64 2061 6e64 2073 7461 7465  is_end and state
+00011810: 5f73 7461 636b 5b2d 315d 203d 3d20 656e  _stack[-1] == en
+00011820: 645f 7374 6174 653a 0a20 2020 2020 2020  d_state:.       
+00011830: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+00011840: 7572 6e20 7661 6c75 655f 7374 6163 6b5b  urn value_stack[
+00011850: 2d31 5d0a 0a0a 636c 6173 7320 4c41 4c52  -1]...class LALR
+00011860: 5f50 6172 7365 7228 5365 7269 616c 697a  _Parser(Serializ
+00011870: 6529 3a0a 2020 2020 6465 6620 5f5f 696e  e):.    def __in
+00011880: 6974 5f5f 2873 656c 662c 2070 6172 7365  it__(self, parse
+00011890: 725f 636f 6e66 3a20 5061 7273 6572 436f  r_conf: ParserCo
+000118a0: 6e66 2c20 6465 6275 673a 2062 6f6f 6c3d  nf, debug: bool=
+000118b0: 4661 6c73 652c 2073 7472 6963 743a 2062  False, strict: b
+000118c0: 6f6f 6c3d 4661 6c73 6529 3a0a 2020 2020  ool=False):.    
+000118d0: 2020 2020 616e 616c 7973 6973 203d 204c      analysis = L
+000118e0: 414c 525f 416e 616c 797a 6572 2870 6172  ALR_Analyzer(par
+000118f0: 7365 725f 636f 6e66 2c20 6465 6275 673d  ser_conf, debug=
+00011900: 6465 6275 672c 2073 7472 6963 743d 7374  debug, strict=st
+00011910: 7269 6374 290a 2020 2020 2020 2020 616e  rict).        an
+00011920: 616c 7973 6973 2e63 6f6d 7075 7465 5f6c  alysis.compute_l
+00011930: 616c 7228 290a 2020 2020 2020 2020 6361  alr().        ca
+00011940: 6c6c 6261 636b 7320 3d20 7061 7273 6572  llbacks = parser
+00011950: 5f63 6f6e 662e 6361 6c6c 6261 636b 730a  _conf.callbacks.
+00011960: 0a20 2020 2020 2020 2073 656c 662e 5f70  .        self._p
+00011970: 6172 7365 5f74 6162 6c65 203d 2061 6e61  arse_table = ana
+00011980: 6c79 7369 732e 7061 7273 655f 7461 626c  lysis.parse_tabl
+00011990: 650a 2020 2020 2020 2020 7365 6c66 2e70  e.        self.p
+000119a0: 6172 7365 725f 636f 6e66 203d 2070 6172  arser_conf = par
+000119b0: 7365 725f 636f 6e66 0a20 2020 2020 2020  ser_conf.       
+000119c0: 2073 656c 662e 7061 7273 6572 203d 205f   self.parser = _
+000119d0: 5061 7273 6572 2861 6e61 6c79 7369 732e  Parser(analysis.
+000119e0: 7061 7273 655f 7461 626c 652c 2063 616c  parse_table, cal
+000119f0: 6c62 6163 6b73 2c20 6465 6275 6729 0a0a  lbacks, debug)..
+00011a00: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
+00011a10: 0a20 2020 2064 6566 2064 6573 6572 6961  .    def deseria
+00011a20: 6c69 7a65 2863 6c73 2c20 6461 7461 2c20  lize(cls, data, 
+00011a30: 6d65 6d6f 2c20 6361 6c6c 6261 636b 732c  memo, callbacks,
+00011a40: 2064 6562 7567 3d46 616c 7365 293a 0a20   debug=False):. 
+00011a50: 2020 2020 2020 2069 6e73 7420 3d20 636c         inst = cl
+00011a60: 732e 5f5f 6e65 775f 5f28 636c 7329 0a20  s.__new__(cls). 
+00011a70: 2020 2020 2020 2069 6e73 742e 5f70 6172         inst._par
+00011a80: 7365 5f74 6162 6c65 203d 2049 6e74 5061  se_table = IntPa
+00011a90: 7273 6554 6162 6c65 2e64 6573 6572 6961  rseTable.deseria
+00011aa0: 6c69 7a65 2864 6174 612c 206d 656d 6f29  lize(data, memo)
+00011ab0: 0a20 2020 2020 2020 2069 6e73 742e 7061  .        inst.pa
+00011ac0: 7273 6572 203d 205f 5061 7273 6572 2869  rser = _Parser(i
+00011ad0: 6e73 742e 5f70 6172 7365 5f74 6162 6c65  nst._parse_table
+00011ae0: 2c20 6361 6c6c 6261 636b 732c 2064 6562  , callbacks, deb
+00011af0: 7567 290a 2020 2020 2020 2020 7265 7475  ug).        retu
+00011b00: 726e 2069 6e73 740a 0a20 2020 2064 6566  rn inst..    def
+00011b10: 2073 6572 6961 6c69 7a65 2873 656c 662c   serialize(self,
+00011b20: 206d 656d 6f3a 2041 6e79 203d 204e 6f6e   memo: Any = Non
+00011b30: 6529 202d 3e20 4469 6374 5b73 7472 2c20  e) -> Dict[str, 
+00011b40: 416e 795d 3a0a 2020 2020 2020 2020 7265  Any]:.        re
+00011b50: 7475 726e 2073 656c 662e 5f70 6172 7365  turn self._parse
+00011b60: 5f74 6162 6c65 2e73 6572 6961 6c69 7a65  _table.serialize
+00011b70: 286d 656d 6f29 0a0a 2020 2020 6465 6620  (memo)..    def 
+00011b80: 7061 7273 655f 696e 7465 7261 6374 6976  parse_interactiv
+00011b90: 6528 7365 6c66 2c20 6c65 7865 723a 204c  e(self, lexer: L
+00011ba0: 6578 6572 5468 7265 6164 2c20 7374 6172  exerThread, star
+00011bb0: 743a 2073 7472 293a 0a20 2020 2020 2020  t: str):.       
+00011bc0: 2072 6574 7572 6e20 7365 6c66 2e70 6172   return self.par
+00011bd0: 7365 722e 7061 7273 6528 6c65 7865 722c  ser.parse(lexer,
+00011be0: 2073 7461 7274 2c20 7374 6172 745f 696e   start, start_in
+00011bf0: 7465 7261 6374 6976 653d 5472 7565 290a  teractive=True).
+00011c00: 0a20 2020 2064 6566 2070 6172 7365 2873  .    def parse(s
+00011c10: 656c 662c 206c 6578 6572 2c20 7374 6172  elf, lexer, star
+00011c20: 742c 206f 6e5f 6572 726f 723d 4e6f 6e65  t, on_error=None
+00011c30: 293a 0a20 2020 2020 2020 2074 7279 3a0a  ):.        try:.
+00011c40: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00011c50: 726e 2073 656c 662e 7061 7273 6572 2e70  rn self.parser.p
+00011c60: 6172 7365 286c 6578 6572 2c20 7374 6172  arse(lexer, star
+00011c70: 7429 0a20 2020 2020 2020 2065 7863 6570  t).        excep
+00011c80: 7420 556e 6578 7065 6374 6564 496e 7075  t UnexpectedInpu
+00011c90: 7420 6173 2065 3a0a 2020 2020 2020 2020  t as e:.        
+00011ca0: 2020 2020 6966 206f 6e5f 6572 726f 7220      if on_error 
+00011cb0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00011cc0: 2020 2020 2020 2020 2072 6169 7365 0a0a           raise..
+00011cd0: 2020 2020 2020 2020 2020 2020 7768 696c              whil
+00011ce0: 6520 5472 7565 3a0a 2020 2020 2020 2020  e True:.        
+00011cf0: 2020 2020 2020 2020 6966 2069 7369 6e73          if isins
+00011d00: 7461 6e63 6528 652c 2055 6e65 7870 6563  tance(e, Unexpec
+00011d10: 7465 6443 6861 7261 6374 6572 7329 3a0a  tedCharacters):.
+00011d20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d30: 2020 2020 7320 3d20 652e 696e 7465 7261      s = e.intera
+00011d40: 6374 6976 655f 7061 7273 6572 2e6c 6578  ctive_parser.lex
+00011d50: 6572 5f74 6872 6561 642e 7374 6174 650a  er_thread.state.
+00011d60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011d70: 2020 2020 7020 3d20 732e 6c69 6e65 5f63      p = s.line_c
+00011d80: 7472 2e63 6861 725f 706f 730a 0a20 2020  tr.char_pos..   
+00011d90: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00011da0: 6e6f 7420 6f6e 5f65 7272 6f72 2865 293a  not on_error(e):
+00011db0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00011dc0: 2020 2020 2072 6169 7365 2065 0a0a 2020       raise e..  
+00011dd0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00011de0: 2069 7369 6e73 7461 6e63 6528 652c 2055   isinstance(e, U
+00011df0: 6e65 7870 6563 7465 6443 6861 7261 6374  nexpectedCharact
+00011e00: 6572 7329 3a0a 2020 2020 2020 2020 2020  ers):.          
+00011e10: 2020 2020 2020 2020 2020 2323 0a0a 2020            ##..  
+00011e20: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e30: 2020 6966 2070 203d 3d20 732e 6c69 6e65    if p == s.line
+00011e40: 5f63 7472 2e63 6861 725f 706f 733a 0a20  _ctr.char_pos:. 
+00011e50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011e60: 2020 2020 2020 2073 2e6c 696e 655f 6374         s.line_ct
+00011e70: 722e 6665 6564 2873 2e74 6578 745b 703a  r.feed(s.text[p:
+00011e80: 702b 315d 290a 0a20 2020 2020 2020 2020  p+1])..         
+00011e90: 2020 2020 2020 2074 7279 3a0a 2020 2020         try:.    
+00011ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011eb0: 7265 7475 726e 2065 2e69 6e74 6572 6163  return e.interac
+00011ec0: 7469 7665 5f70 6172 7365 722e 7265 7375  tive_parser.resu
+00011ed0: 6d65 5f70 6172 7365 2829 0a20 2020 2020  me_parse().     
+00011ee0: 2020 2020 2020 2020 2020 2065 7863 6570             excep
+00011ef0: 7420 556e 6578 7065 6374 6564 546f 6b65  t UnexpectedToke
+00011f00: 6e20 6173 2065 323a 0a20 2020 2020 2020  n as e2:.       
+00011f10: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00011f20: 2869 7369 6e73 7461 6e63 6528 652c 2055  (isinstance(e, U
+00011f30: 6e65 7870 6563 7465 6454 6f6b 656e 290a  nexpectedToken).
+00011f40: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011f50: 2020 2020 2020 2020 616e 6420 652e 746f          and e.to
+00011f60: 6b65 6e2e 7479 7065 203d 3d20 6532 2e74  ken.type == e2.t
+00011f70: 6f6b 656e 2e74 7970 6520 3d3d 2027 2445  oken.type == '$E
+00011f80: 4e44 270a 2020 2020 2020 2020 2020 2020  ND'.            
+00011f90: 2020 2020 2020 2020 2020 2020 616e 6420              and 
+00011fa0: 652e 696e 7465 7261 6374 6976 655f 7061  e.interactive_pa
+00011fb0: 7273 6572 203d 3d20 6532 2e69 6e74 6572  rser == e2.inter
+00011fc0: 6163 7469 7665 5f70 6172 7365 7229 3a0a  active_parser):.
+00011fd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011fe0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
+00011ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012000: 2020 2020 7261 6973 6520 6532 0a20 2020      raise e2.   
+00012010: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012020: 2065 203d 2065 320a 2020 2020 2020 2020   e = e2.        
+00012030: 2020 2020 2020 2020 6578 6365 7074 2055          except U
+00012040: 6e65 7870 6563 7465 6443 6861 7261 6374  nexpectedCharact
+00012050: 6572 7320 6173 2065 323a 0a20 2020 2020  ers as e2:.     
+00012060: 2020 2020 2020 2020 2020 2020 2020 2065                 e
+00012070: 203d 2065 320a 0a0a 636c 6173 7320 5f50   = e2...class _P
+00012080: 6172 7365 723a 0a20 2020 2070 6172 7365  arser:.    parse
+00012090: 5f74 6162 6c65 3a20 5061 7273 6554 6162  _table: ParseTab
+000120a0: 6c65 4261 7365 0a20 2020 2063 616c 6c62  leBase.    callb
+000120b0: 6163 6b73 3a20 5061 7273 6572 4361 6c6c  acks: ParserCall
+000120c0: 6261 636b 730a 2020 2020 6465 6275 673a  backs.    debug:
+000120d0: 2062 6f6f 6c0a 0a20 2020 2064 6566 205f   bool..    def _
+000120e0: 5f69 6e69 745f 5f28 7365 6c66 2c20 7061  _init__(self, pa
+000120f0: 7273 655f 7461 626c 653a 2050 6172 7365  rse_table: Parse
+00012100: 5461 626c 6542 6173 652c 2063 616c 6c62  TableBase, callb
+00012110: 6163 6b73 3a20 5061 7273 6572 4361 6c6c  acks: ParserCall
+00012120: 6261 636b 732c 2064 6562 7567 3a20 626f  backs, debug: bo
+00012130: 6f6c 3d46 616c 7365 293a 0a20 2020 2020  ol=False):.     
+00012140: 2020 2073 656c 662e 7061 7273 655f 7461     self.parse_ta
+00012150: 626c 6520 3d20 7061 7273 655f 7461 626c  ble = parse_tabl
+00012160: 650a 2020 2020 2020 2020 7365 6c66 2e63  e.        self.c
+00012170: 616c 6c62 6163 6b73 203d 2063 616c 6c62  allbacks = callb
+00012180: 6163 6b73 0a20 2020 2020 2020 2073 656c  acks.        sel
+00012190: 662e 6465 6275 6720 3d20 6465 6275 670a  f.debug = debug.
+000121a0: 0a20 2020 2064 6566 2070 6172 7365 2873  .    def parse(s
+000121b0: 656c 662c 206c 6578 6572 3a20 4c65 7865  elf, lexer: Lexe
+000121c0: 7254 6872 6561 642c 2073 7461 7274 3a20  rThread, start: 
+000121d0: 7374 722c 2076 616c 7565 5f73 7461 636b  str, value_stack
+000121e0: 3d4e 6f6e 652c 2073 7461 7465 5f73 7461  =None, state_sta
+000121f0: 636b 3d4e 6f6e 652c 2073 7461 7274 5f69  ck=None, start_i
+00012200: 6e74 6572 6163 7469 7665 3d46 616c 7365  nteractive=False
+00012210: 293a 0a20 2020 2020 2020 2070 6172 7365  ):.        parse
+00012220: 5f63 6f6e 6620 3d20 5061 7273 6543 6f6e  _conf = ParseCon
+00012230: 6628 7365 6c66 2e70 6172 7365 5f74 6162  f(self.parse_tab
+00012240: 6c65 2c20 7365 6c66 2e63 616c 6c62 6163  le, self.callbac
+00012250: 6b73 2c20 7374 6172 7429 0a20 2020 2020  ks, start).     
+00012260: 2020 2070 6172 7365 725f 7374 6174 6520     parser_state 
+00012270: 3d20 5061 7273 6572 5374 6174 6528 7061  = ParserState(pa
+00012280: 7273 655f 636f 6e66 2c20 6c65 7865 722c  rse_conf, lexer,
+00012290: 2073 7461 7465 5f73 7461 636b 2c20 7661   state_stack, va
+000122a0: 6c75 655f 7374 6163 6b29 0a20 2020 2020  lue_stack).     
+000122b0: 2020 2069 6620 7374 6172 745f 696e 7465     if start_inte
+000122c0: 7261 6374 6976 653a 0a20 2020 2020 2020  ractive:.       
+000122d0: 2020 2020 2072 6574 7572 6e20 496e 7465       return Inte
+000122e0: 7261 6374 6976 6550 6172 7365 7228 7365  ractiveParser(se
+000122f0: 6c66 2c20 7061 7273 6572 5f73 7461 7465  lf, parser_state
+00012300: 2c20 7061 7273 6572 5f73 7461 7465 2e6c  , parser_state.l
+00012310: 6578 6572 290a 2020 2020 2020 2020 7265  exer).        re
+00012320: 7475 726e 2073 656c 662e 7061 7273 655f  turn self.parse_
+00012330: 6672 6f6d 5f73 7461 7465 2870 6172 7365  from_state(parse
+00012340: 725f 7374 6174 6529 0a0a 0a20 2020 2064  r_state)...    d
+00012350: 6566 2070 6172 7365 5f66 726f 6d5f 7374  ef parse_from_st
+00012360: 6174 6528 7365 6c66 2c20 7374 6174 653a  ate(self, state:
+00012370: 2050 6172 7365 7253 7461 7465 2c20 6c61   ParserState, la
+00012380: 7374 5f74 6f6b 656e 3a20 4f70 7469 6f6e  st_token: Option
+00012390: 616c 5b54 6f6b 656e 5d3d 4e6f 6e65 293a  al[Token]=None):
+000123a0: 0a20 2020 2020 2020 2023 2d2d 0a20 2020  .        #--.   
+000123b0: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+000123c0: 2020 2020 2020 746f 6b65 6e20 3d20 6c61        token = la
+000123d0: 7374 5f74 6f6b 656e 0a20 2020 2020 2020  st_token.       
+000123e0: 2020 2020 2066 6f72 2074 6f6b 656e 2069       for token i
+000123f0: 6e20 7374 6174 652e 6c65 7865 722e 6c65  n state.lexer.le
+00012400: 7828 7374 6174 6529 3a0a 2020 2020 2020  x(state):.      
+00012410: 2020 2020 2020 2020 2020 6173 7365 7274            assert
+00012420: 2074 6f6b 656e 2069 7320 6e6f 7420 4e6f   token is not No
+00012430: 6e65 0a20 2020 2020 2020 2020 2020 2020  ne.             
+00012440: 2020 2073 7461 7465 2e66 6565 645f 746f     state.feed_to
+00012450: 6b65 6e28 746f 6b65 6e29 0a0a 2020 2020  ken(token)..    
+00012460: 2020 2020 2020 2020 656e 645f 746f 6b65          end_toke
+00012470: 6e20 3d20 546f 6b65 6e2e 6e65 775f 626f  n = Token.new_bo
+00012480: 7272 6f77 5f70 6f73 2827 2445 4e44 272c  rrow_pos('$END',
+00012490: 2027 272c 2074 6f6b 656e 2920 6966 2074   '', token) if t
+000124a0: 6f6b 656e 2065 6c73 6520 546f 6b65 6e28  oken else Token(
+000124b0: 2724 454e 4427 2c20 2727 2c20 302c 2031  '$END', '', 0, 1
+000124c0: 2c20 3129 0a20 2020 2020 2020 2020 2020  , 1).           
+000124d0: 2072 6574 7572 6e20 7374 6174 652e 6665   return state.fe
+000124e0: 6564 5f74 6f6b 656e 2865 6e64 5f74 6f6b  ed_token(end_tok
+000124f0: 656e 2c20 5472 7565 290a 2020 2020 2020  en, True).      
+00012500: 2020 6578 6365 7074 2055 6e65 7870 6563    except Unexpec
+00012510: 7465 6449 6e70 7574 2061 7320 653a 0a20  tedInput as e:. 
+00012520: 2020 2020 2020 2020 2020 2074 7279 3a0a             try:.
+00012530: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00012540: 652e 696e 7465 7261 6374 6976 655f 7061  e.interactive_pa
+00012550: 7273 6572 203d 2049 6e74 6572 6163 7469  rser = Interacti
+00012560: 7665 5061 7273 6572 2873 656c 662c 2073  veParser(self, s
+00012570: 7461 7465 2c20 7374 6174 652e 6c65 7865  tate, state.lexe
+00012580: 7229 0a20 2020 2020 2020 2020 2020 2065  r).            e
+00012590: 7863 6570 7420 4e61 6d65 4572 726f 723a  xcept NameError:
+000125a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000125b0: 2070 6173 730a 2020 2020 2020 2020 2020   pass.          
+000125c0: 2020 7261 6973 6520 650a 2020 2020 2020    raise e.      
+000125d0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
+000125e0: 6f6e 2061 7320 653a 0a20 2020 2020 2020  on as e:.       
+000125f0: 2020 2020 2069 6620 7365 6c66 2e64 6562       if self.deb
+00012600: 7567 3a0a 2020 2020 2020 2020 2020 2020  ug:.            
+00012610: 2020 2020 7072 696e 7428 2222 290a 2020      print("").  
+00012620: 2020 2020 2020 2020 2020 2020 2020 7072                pr
+00012630: 696e 7428 2253 5441 5445 2053 5441 434b  int("STATE STACK
+00012640: 2044 554d 5022 290a 2020 2020 2020 2020   DUMP").        
+00012650: 2020 2020 2020 2020 7072 696e 7428 222d          print("-
+00012660: 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d2d 2d22  ---------------"
+00012670: 290a 2020 2020 2020 2020 2020 2020 2020  ).              
+00012680: 2020 666f 7220 692c 2073 2069 6e20 656e    for i, s in en
+00012690: 756d 6572 6174 6528 7374 6174 652e 7374  umerate(state.st
+000126a0: 6174 655f 7374 6163 6b29 3a0a 2020 2020  ate_stack):.    
+000126b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000126c0: 7072 696e 7428 2725 6429 2720 2520 6920  print('%d)' % i 
+000126d0: 2c20 7329 0a20 2020 2020 2020 2020 2020  , s).           
+000126e0: 2020 2020 2070 7269 6e74 2822 2229 0a0a       print("")..
+000126f0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00012700: 650a 0a0a 636c 6173 7320 496e 7465 7261  e...class Intera
+00012710: 6374 6976 6550 6172 7365 723a 0a20 2020  ctiveParser:.   
+00012720: 2023 2d2d 0a20 2020 2064 6566 205f 5f69   #--.    def __i
+00012730: 6e69 745f 5f28 7365 6c66 2c20 7061 7273  nit__(self, pars
+00012740: 6572 2c20 7061 7273 6572 5f73 7461 7465  er, parser_state
+00012750: 2c20 6c65 7865 725f 7468 7265 6164 3a20  , lexer_thread: 
+00012760: 4c65 7865 7254 6872 6561 6429 3a0a 2020  LexerThread):.  
+00012770: 2020 2020 2020 7365 6c66 2e70 6172 7365        self.parse
+00012780: 7220 3d20 7061 7273 6572 0a20 2020 2020  r = parser.     
+00012790: 2020 2073 656c 662e 7061 7273 6572 5f73     self.parser_s
+000127a0: 7461 7465 203d 2070 6172 7365 725f 7374  tate = parser_st
+000127b0: 6174 650a 2020 2020 2020 2020 7365 6c66  ate.        self
+000127c0: 2e6c 6578 6572 5f74 6872 6561 6420 3d20  .lexer_thread = 
+000127d0: 6c65 7865 725f 7468 7265 6164 0a20 2020  lexer_thread.   
+000127e0: 2020 2020 2073 656c 662e 7265 7375 6c74       self.result
+000127f0: 203d 204e 6f6e 650a 0a20 2020 2040 7072   = None..    @pr
+00012800: 6f70 6572 7479 0a20 2020 2064 6566 206c  operty.    def l
+00012810: 6578 6572 5f73 7461 7465 2873 656c 6629  exer_state(self)
+00012820: 202d 3e20 4c65 7865 7254 6872 6561 643a   -> LexerThread:
+00012830: 0a20 2020 2020 2020 2077 6172 6e69 6e67  .        warning
+00012840: 732e 7761 726e 2822 6c65 7865 725f 7374  s.warn("lexer_st
+00012850: 6174 6520 7769 6c6c 2062 6520 7265 6d6f  ate will be remo
+00012860: 7665 6420 696e 2073 7562 7365 7175 656e  ved in subsequen
+00012870: 7420 7265 6c65 6173 6573 2e20 5573 6520  t releases. Use 
+00012880: 6c65 7865 725f 7468 7265 6164 2069 6e73  lexer_thread ins
+00012890: 7465 6164 2e22 2c20 4465 7072 6563 6174  tead.", Deprecat
+000128a0: 696f 6e57 6172 6e69 6e67 290a 2020 2020  ionWarning).    
+000128b0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000128c0: 6c65 7865 725f 7468 7265 6164 0a0a 2020  lexer_thread..  
+000128d0: 2020 6465 6620 6665 6564 5f74 6f6b 656e    def feed_token
+000128e0: 2873 656c 662c 2074 6f6b 656e 3a20 546f  (self, token: To
+000128f0: 6b65 6e29 3a0a 2020 2020 2020 2020 232d  ken):.        #-
+00012900: 2d0a 2020 2020 2020 2020 7265 7475 726e  -.        return
+00012910: 2073 656c 662e 7061 7273 6572 5f73 7461   self.parser_sta
+00012920: 7465 2e66 6565 645f 746f 6b65 6e28 746f  te.feed_token(to
+00012930: 6b65 6e2c 2074 6f6b 656e 2e74 7970 6520  ken, token.type 
+00012940: 3d3d 2027 2445 4e44 2729 0a0a 2020 2020  == '$END')..    
+00012950: 6465 6620 6974 6572 5f70 6172 7365 2873  def iter_parse(s
+00012960: 656c 6629 202d 3e20 4974 6572 6174 6f72  elf) -> Iterator
+00012970: 5b54 6f6b 656e 5d3a 0a20 2020 2020 2020  [Token]:.       
+00012980: 2023 2d2d 0a20 2020 2020 2020 2066 6f72   #--.        for
+00012990: 2074 6f6b 656e 2069 6e20 7365 6c66 2e6c   token in self.l
+000129a0: 6578 6572 5f74 6872 6561 642e 6c65 7828  exer_thread.lex(
+000129b0: 7365 6c66 2e70 6172 7365 725f 7374 6174  self.parser_stat
+000129c0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
+000129d0: 7969 656c 6420 746f 6b65 6e0a 2020 2020  yield token.    
+000129e0: 2020 2020 2020 2020 7365 6c66 2e72 6573          self.res
+000129f0: 756c 7420 3d20 7365 6c66 2e66 6565 645f  ult = self.feed_
+00012a00: 746f 6b65 6e28 746f 6b65 6e29 0a0a 2020  token(token)..  
+00012a10: 2020 6465 6620 6578 6861 7573 745f 6c65    def exhaust_le
+00012a20: 7865 7228 7365 6c66 2920 2d3e 204c 6973  xer(self) -> Lis
+00012a30: 745b 546f 6b65 6e5d 3a0a 2020 2020 2020  t[Token]:.      
+00012a40: 2020 232d 2d0a 2020 2020 2020 2020 7265    #--.        re
+00012a50: 7475 726e 206c 6973 7428 7365 6c66 2e69  turn list(self.i
+00012a60: 7465 725f 7061 7273 6528 2929 0a0a 0a20  ter_parse())... 
+00012a70: 2020 2064 6566 2066 6565 645f 656f 6628     def feed_eof(
+00012a80: 7365 6c66 2c20 6c61 7374 5f74 6f6b 656e  self, last_token
+00012a90: 3d4e 6f6e 6529 3a0a 2020 2020 2020 2020  =None):.        
+00012aa0: 232d 2d0a 2020 2020 2020 2020 656f 6620  #--.        eof 
+00012ab0: 3d20 546f 6b65 6e2e 6e65 775f 626f 7272  = Token.new_borr
+00012ac0: 6f77 5f70 6f73 2827 2445 4e44 272c 2027  ow_pos('$END', '
+00012ad0: 272c 206c 6173 745f 746f 6b65 6e29 2069  ', last_token) i
+00012ae0: 6620 6c61 7374 5f74 6f6b 656e 2069 7320  f last_token is 
+00012af0: 6e6f 7420 4e6f 6e65 2065 6c73 6520 7365  not None else se
+00012b00: 6c66 2e6c 6578 6572 5f74 6872 6561 642e  lf.lexer_thread.
+00012b10: 5f54 6f6b 656e 2827 2445 4e44 272c 2027  _Token('$END', '
+00012b20: 272c 2030 2c20 312c 2031 290a 2020 2020  ', 0, 1, 1).    
+00012b30: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+00012b40: 6665 6564 5f74 6f6b 656e 2865 6f66 290a  feed_token(eof).
+00012b50: 0a0a 2020 2020 6465 6620 5f5f 636f 7079  ..    def __copy
+00012b60: 5f5f 2873 656c 6629 3a0a 2020 2020 2020  __(self):.      
+00012b70: 2020 232d 2d0a 2020 2020 2020 2020 7265    #--.        re
+00012b80: 7475 726e 2074 7970 6528 7365 6c66 2928  turn type(self)(
+00012b90: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00012ba0: 662e 7061 7273 6572 2c0a 2020 2020 2020  f.parser,.      
+00012bb0: 2020 2020 2020 636f 7079 2873 656c 662e        copy(self.
+00012bc0: 7061 7273 6572 5f73 7461 7465 292c 0a20  parser_state),. 
+00012bd0: 2020 2020 2020 2020 2020 2063 6f70 7928             copy(
+00012be0: 7365 6c66 2e6c 6578 6572 5f74 6872 6561  self.lexer_threa
+00012bf0: 6429 2c0a 2020 2020 2020 2020 290a 0a20  d),.        ).. 
+00012c00: 2020 2064 6566 2063 6f70 7928 7365 6c66     def copy(self
+00012c10: 293a 0a20 2020 2020 2020 2072 6574 7572  ):.        retur
+00012c20: 6e20 636f 7079 2873 656c 6629 0a0a 2020  n copy(self)..  
+00012c30: 2020 6465 6620 5f5f 6571 5f5f 2873 656c    def __eq__(sel
+00012c40: 662c 206f 7468 6572 293a 0a20 2020 2020  f, other):.     
+00012c50: 2020 2069 6620 6e6f 7420 6973 696e 7374     if not isinst
+00012c60: 616e 6365 286f 7468 6572 2c20 496e 7465  ance(other, Inte
+00012c70: 7261 6374 6976 6550 6172 7365 7229 3a0a  ractiveParser):.
+00012c80: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00012c90: 726e 2046 616c 7365 0a0a 2020 2020 2020  rn False..      
+00012ca0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+00012cb0: 7273 6572 5f73 7461 7465 203d 3d20 6f74  rser_state == ot
+00012cc0: 6865 722e 7061 7273 6572 5f73 7461 7465  her.parser_state
+00012cd0: 2061 6e64 2073 656c 662e 6c65 7865 725f   and self.lexer_
+00012ce0: 7468 7265 6164 203d 3d20 6f74 6865 722e  thread == other.
+00012cf0: 6c65 7865 725f 7468 7265 6164 0a0a 2020  lexer_thread..  
+00012d00: 2020 6465 6620 6173 5f69 6d6d 7574 6162    def as_immutab
+00012d10: 6c65 2873 656c 6629 3a0a 2020 2020 2020  le(self):.      
+00012d20: 2020 232d 2d0a 2020 2020 2020 2020 7020    #--.        p 
+00012d30: 3d20 636f 7079 2873 656c 6629 0a20 2020  = copy(self).   
+00012d40: 2020 2020 2072 6574 7572 6e20 496d 6d75       return Immu
+00012d50: 7461 626c 6549 6e74 6572 6163 7469 7665  tableInteractive
+00012d60: 5061 7273 6572 2870 2e70 6172 7365 722c  Parser(p.parser,
+00012d70: 2070 2e70 6172 7365 725f 7374 6174 652c   p.parser_state,
+00012d80: 2070 2e6c 6578 6572 5f74 6872 6561 6429   p.lexer_thread)
+00012d90: 0a0a 2020 2020 6465 6620 7072 6574 7479  ..    def pretty
+00012da0: 2873 656c 6629 3a0a 2020 2020 2020 2020  (self):.        
+00012db0: 232d 2d0a 2020 2020 2020 2020 6f75 7420  #--.        out 
+00012dc0: 3d20 5b22 5061 7273 6572 2063 686f 6963  = ["Parser choic
+00012dd0: 6573 3a22 5d0a 2020 2020 2020 2020 666f  es:"].        fo
+00012de0: 7220 6b2c 2076 2069 6e20 7365 6c66 2e63  r k, v in self.c
+00012df0: 686f 6963 6573 2829 2e69 7465 6d73 2829  hoices().items()
+00012e00: 3a0a 2020 2020 2020 2020 2020 2020 6f75  :.            ou
+00012e10: 742e 6170 7065 6e64 2827 5c74 2d20 2573  t.append('\t- %s
+00012e20: 202d 3e20 2572 2720 2520 286b 2c20 7629   -> %r' % (k, v)
+00012e30: 290a 2020 2020 2020 2020 6f75 742e 6170  ).        out.ap
+00012e40: 7065 6e64 2827 7374 6163 6b20 7369 7a65  pend('stack size
+00012e50: 3a20 2573 2720 2520 6c65 6e28 7365 6c66  : %s' % len(self
+00012e60: 2e70 6172 7365 725f 7374 6174 652e 7374  .parser_state.st
+00012e70: 6174 655f 7374 6163 6b29 290a 2020 2020  ate_stack)).    
+00012e80: 2020 2020 7265 7475 726e 2027 5c6e 272e      return '\n'.
+00012e90: 6a6f 696e 286f 7574 290a 0a20 2020 2064  join(out)..    d
+00012ea0: 6566 2063 686f 6963 6573 2873 656c 6629  ef choices(self)
+00012eb0: 3a0a 2020 2020 2020 2020 232d 2d0a 2020  :.        #--.  
+00012ec0: 2020 2020 2020 7265 7475 726e 2073 656c        return sel
+00012ed0: 662e 7061 7273 6572 5f73 7461 7465 2e70  f.parser_state.p
+00012ee0: 6172 7365 5f63 6f6e 662e 7061 7273 655f  arse_conf.parse_
+00012ef0: 7461 626c 652e 7374 6174 6573 5b73 656c  table.states[sel
+00012f00: 662e 7061 7273 6572 5f73 7461 7465 2e70  f.parser_state.p
+00012f10: 6f73 6974 696f 6e5d 0a0a 2020 2020 6465  osition]..    de
+00012f20: 6620 6163 6365 7074 7328 7365 6c66 293a  f accepts(self):
+00012f30: 0a20 2020 2020 2020 2023 2d2d 0a20 2020  .        #--.   
+00012f40: 2020 2020 2061 6363 6570 7473 203d 2073       accepts = s
+00012f50: 6574 2829 0a20 2020 2020 2020 2063 6f6e  et().        con
+00012f60: 665f 6e6f 5f63 616c 6c62 6163 6b73 203d  f_no_callbacks =
+00012f70: 2063 6f70 7928 7365 6c66 2e70 6172 7365   copy(self.parse
+00012f80: 725f 7374 6174 652e 7061 7273 655f 636f  r_state.parse_co
+00012f90: 6e66 290a 2020 2020 2020 2020 2323 0a0a  nf).        ##..
+00012fa0: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
+00012fb0: 2020 2020 636f 6e66 5f6e 6f5f 6361 6c6c      conf_no_call
+00012fc0: 6261 636b 732e 6361 6c6c 6261 636b 7320  backs.callbacks 
+00012fd0: 3d20 7b7d 0a20 2020 2020 2020 2066 6f72  = {}.        for
+00012fe0: 2074 2069 6e20 7365 6c66 2e63 686f 6963   t in self.choic
+00012ff0: 6573 2829 3a0a 2020 2020 2020 2020 2020  es():.          
+00013000: 2020 6966 2074 2e69 7375 7070 6572 2829    if t.isupper()
+00013010: 3a20 2323 0a0a 2020 2020 2020 2020 2020  : ##..          
+00013020: 2020 2020 2020 6e65 775f 6375 7273 6f72        new_cursor
+00013030: 203d 2063 6f70 7928 7365 6c66 290a 2020   = copy(self).  
+00013040: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+00013050: 775f 6375 7273 6f72 2e70 6172 7365 725f  w_cursor.parser_
+00013060: 7374 6174 652e 7061 7273 655f 636f 6e66  state.parse_conf
+00013070: 203d 2063 6f6e 665f 6e6f 5f63 616c 6c62   = conf_no_callb
+00013080: 6163 6b73 0a20 2020 2020 2020 2020 2020  acks.           
+00013090: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
+000130a0: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+000130b0: 775f 6375 7273 6f72 2e66 6565 645f 746f  w_cursor.feed_to
+000130c0: 6b65 6e28 7365 6c66 2e6c 6578 6572 5f74  ken(self.lexer_t
+000130d0: 6872 6561 642e 5f54 6f6b 656e 2874 2c20  hread._Token(t, 
+000130e0: 2727 2929 0a20 2020 2020 2020 2020 2020  '')).           
+000130f0: 2020 2020 2065 7863 6570 7420 556e 6578       except Unex
+00013100: 7065 6374 6564 546f 6b65 6e3a 0a20 2020  pectedToken:.   
+00013110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013120: 2070 6173 730a 2020 2020 2020 2020 2020   pass.          
+00013130: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00013140: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00013150: 6163 6365 7074 732e 6164 6428 7429 0a20  accepts.add(t). 
+00013160: 2020 2020 2020 2072 6574 7572 6e20 6163         return ac
+00013170: 6365 7074 730a 0a20 2020 2064 6566 2072  cepts..    def r
+00013180: 6573 756d 655f 7061 7273 6528 7365 6c66  esume_parse(self
+00013190: 293a 0a20 2020 2020 2020 2023 2d2d 0a20  ):.        #--. 
+000131a0: 2020 2020 2020 2072 6574 7572 6e20 7365         return se
+000131b0: 6c66 2e70 6172 7365 722e 7061 7273 655f  lf.parser.parse_
+000131c0: 6672 6f6d 5f73 7461 7465 2873 656c 662e  from_state(self.
+000131d0: 7061 7273 6572 5f73 7461 7465 2c20 6c61  parser_state, la
+000131e0: 7374 5f74 6f6b 656e 3d73 656c 662e 6c65  st_token=self.le
+000131f0: 7865 725f 7468 7265 6164 2e73 7461 7465  xer_thread.state
+00013200: 2e6c 6173 745f 746f 6b65 6e29 0a0a 0a0a  .last_token)....
+00013210: 636c 6173 7320 496d 6d75 7461 626c 6549  class ImmutableI
+00013220: 6e74 6572 6163 7469 7665 5061 7273 6572  nteractiveParser
+00013230: 2849 6e74 6572 6163 7469 7665 5061 7273  (InteractivePars
+00013240: 6572 293a 0a20 2020 2023 2d2d 0a0a 2020  er):.    #--..  
+00013250: 2020 7265 7375 6c74 203d 204e 6f6e 650a    result = None.
+00013260: 0a20 2020 2064 6566 205f 5f68 6173 685f  .    def __hash_
+00013270: 5f28 7365 6c66 293a 0a20 2020 2020 2020  _(self):.       
+00013280: 2072 6574 7572 6e20 6861 7368 2828 7365   return hash((se
+00013290: 6c66 2e70 6172 7365 725f 7374 6174 652c  lf.parser_state,
+000132a0: 2073 656c 662e 6c65 7865 725f 7468 7265   self.lexer_thre
+000132b0: 6164 2929 0a0a 2020 2020 6465 6620 6665  ad))..    def fe
+000132c0: 6564 5f74 6f6b 656e 2873 656c 662c 2074  ed_token(self, t
+000132d0: 6f6b 656e 293a 0a20 2020 2020 2020 2063  oken):.        c
+000132e0: 203d 2063 6f70 7928 7365 6c66 290a 2020   = copy(self).  
+000132f0: 2020 2020 2020 632e 7265 7375 6c74 203d        c.result =
+00013300: 2049 6e74 6572 6163 7469 7665 5061 7273   InteractivePars
+00013310: 6572 2e66 6565 645f 746f 6b65 6e28 632c  er.feed_token(c,
+00013320: 2074 6f6b 656e 290a 2020 2020 2020 2020   token).        
+00013330: 7265 7475 726e 2063 0a0a 2020 2020 6465  return c..    de
+00013340: 6620 6578 6861 7573 745f 6c65 7865 7228  f exhaust_lexer(
+00013350: 7365 6c66 293a 0a20 2020 2020 2020 2023  self):.        #
+00013360: 2d2d 0a20 2020 2020 2020 2063 7572 736f  --.        curso
+00013370: 7220 3d20 7365 6c66 2e61 735f 6d75 7461  r = self.as_muta
+00013380: 626c 6528 290a 2020 2020 2020 2020 6375  ble().        cu
+00013390: 7273 6f72 2e65 7868 6175 7374 5f6c 6578  rsor.exhaust_lex
+000133a0: 6572 2829 0a20 2020 2020 2020 2072 6574  er().        ret
+000133b0: 7572 6e20 6375 7273 6f72 2e61 735f 696d  urn cursor.as_im
+000133c0: 6d75 7461 626c 6528 290a 0a20 2020 2064  mutable()..    d
+000133d0: 6566 2061 735f 6d75 7461 626c 6528 7365  ef as_mutable(se
+000133e0: 6c66 293a 0a20 2020 2020 2020 2023 2d2d  lf):.        #--
+000133f0: 0a20 2020 2020 2020 2070 203d 2063 6f70  .        p = cop
+00013400: 7928 7365 6c66 290a 2020 2020 2020 2020  y(self).        
+00013410: 7265 7475 726e 2049 6e74 6572 6163 7469  return Interacti
+00013420: 7665 5061 7273 6572 2870 2e70 6172 7365  veParser(p.parse
+00013430: 722c 2070 2e70 6172 7365 725f 7374 6174  r, p.parser_stat
+00013440: 652c 2070 2e6c 6578 6572 5f74 6872 6561  e, p.lexer_threa
+00013450: 6429 0a0a 0a0a 6465 6620 5f77 7261 705f  d)....def _wrap_
+00013460: 6c65 7865 7228 6c65 7865 725f 636c 6173  lexer(lexer_clas
+00013470: 7329 3a0a 2020 2020 6675 7475 7265 5f69  s):.    future_i
+00013480: 6e74 6572 6661 6365 203d 2067 6574 6174  nterface = getat
+00013490: 7472 286c 6578 6572 5f63 6c61 7373 2c20  tr(lexer_class, 
+000134a0: 275f 5f66 7574 7572 655f 696e 7465 7266  '__future_interf
+000134b0: 6163 655f 5f27 2c20 4661 6c73 6529 0a20  ace__', False). 
+000134c0: 2020 2069 6620 6675 7475 7265 5f69 6e74     if future_int
+000134d0: 6572 6661 6365 3a0a 2020 2020 2020 2020  erface:.        
+000134e0: 7265 7475 726e 206c 6578 6572 5f63 6c61  return lexer_cla
+000134f0: 7373 0a20 2020 2065 6c73 653a 0a20 2020  ss.    else:.   
+00013500: 2020 2020 2063 6c61 7373 2043 7573 746f       class Custo
+00013510: 6d4c 6578 6572 5772 6170 7065 7228 4c65  mLexerWrapper(Le
+00013520: 7865 7229 3a0a 2020 2020 2020 2020 2020  xer):.          
+00013530: 2020 6465 6620 5f5f 696e 6974 5f5f 2873    def __init__(s
+00013540: 656c 662c 206c 6578 6572 5f63 6f6e 6629  elf, lexer_conf)
+00013550: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00013560: 2020 7365 6c66 2e6c 6578 6572 203d 206c    self.lexer = l
+00013570: 6578 6572 5f63 6c61 7373 286c 6578 6572  exer_class(lexer
+00013580: 5f63 6f6e 6629 0a20 2020 2020 2020 2020  _conf).         
+00013590: 2020 2064 6566 206c 6578 2873 656c 662c     def lex(self,
+000135a0: 206c 6578 6572 5f73 7461 7465 2c20 7061   lexer_state, pa
+000135b0: 7273 6572 5f73 7461 7465 293a 0a20 2020  rser_state):.   
+000135c0: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+000135d0: 7572 6e20 7365 6c66 2e6c 6578 6572 2e6c  urn self.lexer.l
+000135e0: 6578 286c 6578 6572 5f73 7461 7465 2e74  ex(lexer_state.t
+000135f0: 6578 7429 0a20 2020 2020 2020 2072 6574  ext).        ret
+00013600: 7572 6e20 4375 7374 6f6d 4c65 7865 7257  urn CustomLexerW
+00013610: 7261 7070 6572 0a0a 0a64 6566 205f 6465  rapper...def _de
+00013620: 7365 7269 616c 697a 655f 7061 7273 696e  serialize_parsin
+00013630: 675f 6672 6f6e 7465 6e64 2864 6174 612c  g_frontend(data,
+00013640: 206d 656d 6f2c 206c 6578 6572 5f63 6f6e   memo, lexer_con
+00013650: 662c 2063 616c 6c62 6163 6b73 2c20 6f70  f, callbacks, op
+00013660: 7469 6f6e 7329 3a0a 2020 2020 7061 7273  tions):.    pars
+00013670: 6572 5f63 6f6e 6620 3d20 5061 7273 6572  er_conf = Parser
+00013680: 436f 6e66 2e64 6573 6572 6961 6c69 7a65  Conf.deserialize
+00013690: 2864 6174 615b 2770 6172 7365 725f 636f  (data['parser_co
+000136a0: 6e66 275d 2c20 6d65 6d6f 290a 2020 2020  nf'], memo).    
+000136b0: 636c 7320 3d20 286f 7074 696f 6e73 2061  cls = (options a
+000136c0: 6e64 206f 7074 696f 6e73 2e5f 706c 7567  nd options._plug
+000136d0: 696e 732e 6765 7428 274c 414c 525f 5061  ins.get('LALR_Pa
+000136e0: 7273 6572 2729 2920 6f72 204c 414c 525f  rser')) or LALR_
+000136f0: 5061 7273 6572 0a20 2020 2070 6172 7365  Parser.    parse
+00013700: 7220 3d20 636c 732e 6465 7365 7269 616c  r = cls.deserial
+00013710: 697a 6528 6461 7461 5b27 7061 7273 6572  ize(data['parser
+00013720: 275d 2c20 6d65 6d6f 2c20 6361 6c6c 6261  '], memo, callba
+00013730: 636b 732c 206f 7074 696f 6e73 2e64 6562  cks, options.deb
+00013740: 7567 290a 2020 2020 7061 7273 6572 5f63  ug).    parser_c
+00013750: 6f6e 662e 6361 6c6c 6261 636b 7320 3d20  onf.callbacks = 
+00013760: 6361 6c6c 6261 636b 730a 2020 2020 7265  callbacks.    re
+00013770: 7475 726e 2050 6172 7369 6e67 4672 6f6e  turn ParsingFron
+00013780: 7465 6e64 286c 6578 6572 5f63 6f6e 662c  tend(lexer_conf,
+00013790: 2070 6172 7365 725f 636f 6e66 2c20 6f70   parser_conf, op
+000137a0: 7469 6f6e 732c 2070 6172 7365 723d 7061  tions, parser=pa
+000137b0: 7273 6572 290a 0a0a 5f70 6172 7365 725f  rser)..._parser_
+000137c0: 6372 6561 746f 7273 3a20 2744 6963 745b  creators: 'Dict[
+000137d0: 7374 722c 2043 616c 6c61 626c 655b 5b4c  str, Callable[[L
+000137e0: 6578 6572 436f 6e66 2c20 416e 792c 2041  exerConf, Any, A
+000137f0: 6e79 5d2c 2041 6e79 5d5d 2720 3d20 7b7d  ny], Any]]' = {}
+00013800: 0a0a 0a63 6c61 7373 2050 6172 7369 6e67  ...class Parsing
+00013810: 4672 6f6e 7465 6e64 2853 6572 6961 6c69  Frontend(Seriali
+00013820: 7a65 293a 0a20 2020 205f 5f73 6572 6961  ze):.    __seria
+00013830: 6c69 7a65 5f66 6965 6c64 735f 5f20 3d20  lize_fields__ = 
+00013840: 276c 6578 6572 5f63 6f6e 6627 2c20 2770  'lexer_conf', 'p
+00013850: 6172 7365 725f 636f 6e66 272c 2027 7061  arser_conf', 'pa
+00013860: 7273 6572 270a 0a20 2020 206c 6578 6572  rser'..    lexer
+00013870: 5f63 6f6e 663a 204c 6578 6572 436f 6e66  _conf: LexerConf
+00013880: 0a20 2020 2070 6172 7365 725f 636f 6e66  .    parser_conf
+00013890: 3a20 5061 7273 6572 436f 6e66 0a20 2020  : ParserConf.   
+000138a0: 206f 7074 696f 6e73 3a20 416e 790a 0a20   options: Any.. 
+000138b0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+000138c0: 7365 6c66 2c20 6c65 7865 725f 636f 6e66  self, lexer_conf
+000138d0: 3a20 4c65 7865 7243 6f6e 662c 2070 6172  : LexerConf, par
+000138e0: 7365 725f 636f 6e66 3a20 5061 7273 6572  ser_conf: Parser
+000138f0: 436f 6e66 2c20 6f70 7469 6f6e 732c 2070  Conf, options, p
+00013900: 6172 7365 723d 4e6f 6e65 293a 0a20 2020  arser=None):.   
+00013910: 2020 2020 2073 656c 662e 7061 7273 6572       self.parser
+00013920: 5f63 6f6e 6620 3d20 7061 7273 6572 5f63  _conf = parser_c
+00013930: 6f6e 660a 2020 2020 2020 2020 7365 6c66  onf.        self
+00013940: 2e6c 6578 6572 5f63 6f6e 6620 3d20 6c65  .lexer_conf = le
+00013950: 7865 725f 636f 6e66 0a20 2020 2020 2020  xer_conf.       
+00013960: 2073 656c 662e 6f70 7469 6f6e 7320 3d20   self.options = 
+00013970: 6f70 7469 6f6e 730a 0a20 2020 2020 2020  options..       
+00013980: 2023 230a 0a20 2020 2020 2020 2069 6620   ##..        if 
+00013990: 7061 7273 6572 3a20 2023 230a 0a20 2020  parser:  ##..   
+000139a0: 2020 2020 2020 2020 2073 656c 662e 7061           self.pa
+000139b0: 7273 6572 203d 2070 6172 7365 720a 2020  rser = parser.  
+000139c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+000139d0: 2020 2020 2020 2020 6372 6561 7465 5f70          create_p
+000139e0: 6172 7365 7220 3d20 5f70 6172 7365 725f  arser = _parser_
+000139f0: 6372 6561 746f 7273 2e67 6574 2870 6172  creators.get(par
+00013a00: 7365 725f 636f 6e66 2e70 6172 7365 725f  ser_conf.parser_
+00013a10: 7479 7065 290a 2020 2020 2020 2020 2020  type).          
+00013a20: 2020 6173 7365 7274 2063 7265 6174 655f    assert create_
+00013a30: 7061 7273 6572 2069 7320 6e6f 7420 4e6f  parser is not No
+00013a40: 6e65 2c20 227b 7d20 6973 206e 6f74 2073  ne, "{} is not s
+00013a50: 7570 706f 7274 6564 2069 6e20 7374 616e  upported in stan
+00013a60: 6461 6c6f 6e65 206d 6f64 6522 2e66 6f72  dalone mode".for
+00013a70: 6d61 7428 0a20 2020 2020 2020 2020 2020  mat(.           
+00013a80: 2020 2020 2020 2020 2070 6172 7365 725f           parser_
+00013a90: 636f 6e66 2e70 6172 7365 725f 7479 7065  conf.parser_type
+00013aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00013ab0: 2029 0a20 2020 2020 2020 2020 2020 2073   ).            s
+00013ac0: 656c 662e 7061 7273 6572 203d 2063 7265  elf.parser = cre
+00013ad0: 6174 655f 7061 7273 6572 286c 6578 6572  ate_parser(lexer
+00013ae0: 5f63 6f6e 662c 2070 6172 7365 725f 636f  _conf, parser_co
+00013af0: 6e66 2c20 6f70 7469 6f6e 7329 0a0a 2020  nf, options)..  
+00013b00: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
+00013b10: 2020 6c65 7865 725f 7479 7065 203d 206c    lexer_type = l
+00013b20: 6578 6572 5f63 6f6e 662e 6c65 7865 725f  exer_conf.lexer_
+00013b30: 7479 7065 0a20 2020 2020 2020 2073 656c  type.        sel
+00013b40: 662e 736b 6970 5f6c 6578 6572 203d 2046  f.skip_lexer = F
+00013b50: 616c 7365 0a20 2020 2020 2020 2069 6620  alse.        if 
+00013b60: 6c65 7865 725f 7479 7065 2069 6e20 2827  lexer_type in ('
+00013b70: 6479 6e61 6d69 6327 2c20 2764 796e 616d  dynamic', 'dynam
+00013b80: 6963 5f63 6f6d 706c 6574 6527 293a 0a20  ic_complete'):. 
+00013b90: 2020 2020 2020 2020 2020 2061 7373 6572             asser
+00013ba0: 7420 6c65 7865 725f 636f 6e66 2e70 6f73  t lexer_conf.pos
+00013bb0: 746c 6578 2069 7320 4e6f 6e65 0a20 2020  tlex is None.   
+00013bc0: 2020 2020 2020 2020 2073 656c 662e 736b           self.sk
+00013bd0: 6970 5f6c 6578 6572 203d 2054 7275 650a  ip_lexer = True.
+00013be0: 2020 2020 2020 2020 2020 2020 7265 7475              retu
+00013bf0: 726e 0a0a 2020 2020 2020 2020 6966 2069  rn..        if i
+00013c00: 7369 6e73 7461 6e63 6528 6c65 7865 725f  sinstance(lexer_
+00013c10: 7479 7065 2c20 7479 7065 293a 0a20 2020  type, type):.   
+00013c20: 2020 2020 2020 2020 2061 7373 6572 7420           assert 
+00013c30: 6973 7375 6263 6c61 7373 286c 6578 6572  issubclass(lexer
+00013c40: 5f74 7970 652c 204c 6578 6572 290a 2020  _type, Lexer).  
+00013c50: 2020 2020 2020 2020 2020 7365 6c66 2e6c            self.l
+00013c60: 6578 6572 203d 205f 7772 6170 5f6c 6578  exer = _wrap_lex
+00013c70: 6572 286c 6578 6572 5f74 7970 6529 286c  er(lexer_type)(l
+00013c80: 6578 6572 5f63 6f6e 6629 0a20 2020 2020  exer_conf).     
+00013c90: 2020 2065 6c69 6620 6973 696e 7374 616e     elif isinstan
+00013ca0: 6365 286c 6578 6572 5f74 7970 652c 2073  ce(lexer_type, s
+00013cb0: 7472 293a 0a20 2020 2020 2020 2020 2020  tr):.           
+00013cc0: 2063 7265 6174 655f 6c65 7865 7220 3d20   create_lexer = 
+00013cd0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+00013ce0: 2020 2762 6173 6963 273a 2063 7265 6174    'basic': creat
+00013cf0: 655f 6261 7369 635f 6c65 7865 722c 0a20  e_basic_lexer,. 
+00013d00: 2020 2020 2020 2020 2020 2020 2020 2027                 '
+00013d10: 636f 6e74 6578 7475 616c 273a 2063 7265  contextual': cre
+00013d20: 6174 655f 636f 6e74 6578 7475 616c 5f6c  ate_contextual_l
+00013d30: 6578 6572 2c0a 2020 2020 2020 2020 2020  exer,.          
+00013d40: 2020 7d5b 6c65 7865 725f 7479 7065 5d0a    }[lexer_type].
+00013d50: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00013d60: 2e6c 6578 6572 203d 2063 7265 6174 655f  .lexer = create_
+00013d70: 6c65 7865 7228 6c65 7865 725f 636f 6e66  lexer(lexer_conf
+00013d80: 2c20 7365 6c66 2e70 6172 7365 722c 206c  , self.parser, l
+00013d90: 6578 6572 5f63 6f6e 662e 706f 7374 6c65  exer_conf.postle
+00013da0: 782c 206f 7074 696f 6e73 290a 2020 2020  x, options).    
+00013db0: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00013dc0: 2020 2020 2020 7261 6973 6520 5479 7065        raise Type
+00013dd0: 4572 726f 7228 2242 6164 2076 616c 7565  Error("Bad value
+00013de0: 2066 6f72 206c 6578 6572 5f74 7970 653a   for lexer_type:
+00013df0: 207b 6c65 7865 725f 7479 7065 7d22 290a   {lexer_type}").
+00013e00: 0a20 2020 2020 2020 2069 6620 6c65 7865  .        if lexe
+00013e10: 725f 636f 6e66 2e70 6f73 746c 6578 3a0a  r_conf.postlex:.
+00013e20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00013e30: 2e6c 6578 6572 203d 2050 6f73 744c 6578  .lexer = PostLex
+00013e40: 436f 6e6e 6563 746f 7228 7365 6c66 2e6c  Connector(self.l
+00013e50: 6578 6572 2c20 6c65 7865 725f 636f 6e66  exer, lexer_conf
+00013e60: 2e70 6f73 746c 6578 290a 0a20 2020 2064  .postlex)..    d
+00013e70: 6566 205f 7665 7269 6679 5f73 7461 7274  ef _verify_start
+00013e80: 2873 656c 662c 2073 7461 7274 3d4e 6f6e  (self, start=Non
+00013e90: 6529 3a0a 2020 2020 2020 2020 6966 2073  e):.        if s
+00013ea0: 7461 7274 2069 7320 4e6f 6e65 3a0a 2020  tart is None:.  
+00013eb0: 2020 2020 2020 2020 2020 7374 6172 745f            start_
+00013ec0: 6465 636c 7320 3d20 7365 6c66 2e70 6172  decls = self.par
+00013ed0: 7365 725f 636f 6e66 2e73 7461 7274 0a20  ser_conf.start. 
+00013ee0: 2020 2020 2020 2020 2020 2069 6620 6c65             if le
+00013ef0: 6e28 7374 6172 745f 6465 636c 7329 203e  n(start_decls) >
+00013f00: 2031 3a0a 2020 2020 2020 2020 2020 2020   1:.            
+00013f10: 2020 2020 7261 6973 6520 436f 6e66 6967      raise Config
+00013f20: 7572 6174 696f 6e45 7272 6f72 2822 4c61  urationError("La
+00013f30: 726b 2069 6e69 7469 616c 697a 6564 2077  rk initialized w
+00013f40: 6974 6820 6d6f 7265 2074 6861 6e20 3120  ith more than 1 
+00013f50: 706f 7373 6962 6c65 2073 7461 7274 2072  possible start r
+00013f60: 756c 652e 204d 7573 7420 7370 6563 6966  ule. Must specif
+00013f70: 7920 7768 6963 6820 7374 6172 7420 7275  y which start ru
+00013f80: 6c65 2074 6f20 7061 7273 6522 2c20 7374  le to parse", st
+00013f90: 6172 745f 6465 636c 7329 0a20 2020 2020  art_decls).     
+00013fa0: 2020 2020 2020 2073 7461 7274 202c 3d20         start ,= 
+00013fb0: 7374 6172 745f 6465 636c 730a 2020 2020  start_decls.    
+00013fc0: 2020 2020 656c 6966 2073 7461 7274 206e      elif start n
+00013fd0: 6f74 2069 6e20 7365 6c66 2e70 6172 7365  ot in self.parse
+00013fe0: 725f 636f 6e66 2e73 7461 7274 3a0a 2020  r_conf.start:.  
+00013ff0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00014000: 436f 6e66 6967 7572 6174 696f 6e45 7272  ConfigurationErr
+00014010: 6f72 2822 556e 6b6e 6f77 6e20 7374 6172  or("Unknown star
+00014020: 7420 7275 6c65 2025 732e 204d 7573 7420  t rule %s. Must 
+00014030: 6265 206f 6e65 206f 6620 2572 2220 2520  be one of %r" % 
+00014040: 2873 7461 7274 2c20 7365 6c66 2e70 6172  (start, self.par
+00014050: 7365 725f 636f 6e66 2e73 7461 7274 2929  ser_conf.start))
+00014060: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00014070: 7374 6172 740a 0a20 2020 2064 6566 205f  start..    def _
+00014080: 6d61 6b65 5f6c 6578 6572 5f74 6872 6561  make_lexer_threa
+00014090: 6428 7365 6c66 2c20 7465 7874 3a20 7374  d(self, text: st
+000140a0: 7229 202d 3e20 556e 696f 6e5b 7374 722c  r) -> Union[str,
+000140b0: 204c 6578 6572 5468 7265 6164 5d3a 0a20   LexerThread]:. 
+000140c0: 2020 2020 2020 2063 6c73 203d 2028 7365         cls = (se
+000140d0: 6c66 2e6f 7074 696f 6e73 2061 6e64 2073  lf.options and s
+000140e0: 656c 662e 6f70 7469 6f6e 732e 5f70 6c75  elf.options._plu
+000140f0: 6769 6e73 2e67 6574 2827 4c65 7865 7254  gins.get('LexerT
+00014100: 6872 6561 6427 2929 206f 7220 4c65 7865  hread')) or Lexe
+00014110: 7254 6872 6561 640a 2020 2020 2020 2020  rThread.        
+00014120: 7265 7475 726e 2074 6578 7420 6966 2073  return text if s
+00014130: 656c 662e 736b 6970 5f6c 6578 6572 2065  elf.skip_lexer e
+00014140: 6c73 6520 636c 732e 6672 6f6d 5f74 6578  lse cls.from_tex
+00014150: 7428 7365 6c66 2e6c 6578 6572 2c20 7465  t(self.lexer, te
+00014160: 7874 290a 0a20 2020 2064 6566 2070 6172  xt)..    def par
+00014170: 7365 2873 656c 662c 2074 6578 743a 2073  se(self, text: s
+00014180: 7472 2c20 7374 6172 743d 4e6f 6e65 2c20  tr, start=None, 
+00014190: 6f6e 5f65 7272 6f72 3d4e 6f6e 6529 3a0a  on_error=None):.
+000141a0: 2020 2020 2020 2020 6368 6f73 656e 5f73          chosen_s
+000141b0: 7461 7274 203d 2073 656c 662e 5f76 6572  tart = self._ver
+000141c0: 6966 795f 7374 6172 7428 7374 6172 7429  ify_start(start)
+000141d0: 0a20 2020 2020 2020 206b 7720 3d20 7b7d  .        kw = {}
+000141e0: 2069 6620 6f6e 5f65 7272 6f72 2069 7320   if on_error is 
+000141f0: 4e6f 6e65 2065 6c73 6520 7b27 6f6e 5f65  None else {'on_e
+00014200: 7272 6f72 273a 206f 6e5f 6572 726f 727d  rror': on_error}
+00014210: 0a20 2020 2020 2020 2073 7472 6561 6d20  .        stream 
+00014220: 3d20 7365 6c66 2e5f 6d61 6b65 5f6c 6578  = self._make_lex
+00014230: 6572 5f74 6872 6561 6428 7465 7874 290a  er_thread(text).
+00014240: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+00014250: 656c 662e 7061 7273 6572 2e70 6172 7365  elf.parser.parse
+00014260: 2873 7472 6561 6d2c 2063 686f 7365 6e5f  (stream, chosen_
+00014270: 7374 6172 742c 202a 2a6b 7729 0a0a 2020  start, **kw)..  
+00014280: 2020 6465 6620 7061 7273 655f 696e 7465    def parse_inte
+00014290: 7261 6374 6976 6528 7365 6c66 2c20 7465  ractive(self, te
+000142a0: 7874 3a20 4f70 7469 6f6e 616c 5b73 7472  xt: Optional[str
+000142b0: 5d3d 4e6f 6e65 2c20 7374 6172 743d 4e6f  ]=None, start=No
+000142c0: 6e65 293a 0a20 2020 2020 2020 2023 230a  ne):.        ##.
+000142d0: 0a20 2020 2020 2020 2023 230a 0a20 2020  .        ##..   
+000142e0: 2020 2020 2063 686f 7365 6e5f 7374 6172       chosen_star
+000142f0: 7420 3d20 7365 6c66 2e5f 7665 7269 6679  t = self._verify
+00014300: 5f73 7461 7274 2873 7461 7274 290a 2020  _start(start).  
+00014310: 2020 2020 2020 6966 2073 656c 662e 7061        if self.pa
+00014320: 7273 6572 5f63 6f6e 662e 7061 7273 6572  rser_conf.parser
+00014330: 5f74 7970 6520 213d 2027 6c61 6c72 273a  _type != 'lalr':
+00014340: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00014350: 7365 2043 6f6e 6669 6775 7261 7469 6f6e  se Configuration
+00014360: 4572 726f 7228 2270 6172 7365 5f69 6e74  Error("parse_int
+00014370: 6572 6163 7469 7665 2829 2063 7572 7265  eractive() curre
+00014380: 6e74 6c79 206f 6e6c 7920 776f 726b 7320  ntly only works 
+00014390: 7769 7468 2070 6172 7365 723d 276c 616c  with parser='lal
+000143a0: 7227 2022 290a 2020 2020 2020 2020 7374  r' ").        st
+000143b0: 7265 616d 203d 2073 656c 662e 5f6d 616b  ream = self._mak
+000143c0: 655f 6c65 7865 725f 7468 7265 6164 2874  e_lexer_thread(t
+000143d0: 6578 7429 2020 2323 0a0a 2020 2020 2020  ext)  ##..      
+000143e0: 2020 7265 7475 726e 2073 656c 662e 7061    return self.pa
+000143f0: 7273 6572 2e70 6172 7365 5f69 6e74 6572  rser.parse_inter
+00014400: 6163 7469 7665 2873 7472 6561 6d2c 2063  active(stream, c
+00014410: 686f 7365 6e5f 7374 6172 7429 0a0a 0a64  hosen_start)...d
+00014420: 6566 205f 7661 6c69 6461 7465 5f66 726f  ef _validate_fro
+00014430: 6e74 656e 645f 6172 6773 2870 6172 7365  ntend_args(parse
+00014440: 722c 206c 6578 6572 2920 2d3e 204e 6f6e  r, lexer) -> Non
+00014450: 653a 0a20 2020 2061 7373 6572 745f 636f  e:.    assert_co
+00014460: 6e66 6967 2870 6172 7365 722c 2028 276c  nfig(parser, ('l
+00014470: 616c 7227 2c20 2765 6172 6c65 7927 2c20  alr', 'earley', 
+00014480: 2763 796b 2729 290a 2020 2020 6966 206e  'cyk')).    if n
+00014490: 6f74 2069 7369 6e73 7461 6e63 6528 6c65  ot isinstance(le
+000144a0: 7865 722c 2074 7970 6529 3a20 2020 2020  xer, type):     
+000144b0: 2323 0a0a 2020 2020 2020 2020 6578 7065  ##..        expe
+000144c0: 6374 6564 203d 207b 0a20 2020 2020 2020  cted = {.       
+000144d0: 2020 2020 2027 6c61 6c72 273a 2028 2762       'lalr': ('b
+000144e0: 6173 6963 272c 2027 636f 6e74 6578 7475  asic', 'contextu
+000144f0: 616c 2729 2c0a 2020 2020 2020 2020 2020  al'),.          
+00014500: 2020 2765 6172 6c65 7927 3a20 2827 6261    'earley': ('ba
+00014510: 7369 6327 2c20 2764 796e 616d 6963 272c  sic', 'dynamic',
+00014520: 2027 6479 6e61 6d69 635f 636f 6d70 6c65   'dynamic_comple
+00014530: 7465 2729 2c0a 2020 2020 2020 2020 2020  te'),.          
+00014540: 2020 2763 796b 273a 2028 2762 6173 6963    'cyk': ('basic
+00014550: 272c 2029 2c0a 2020 2020 2020 2020 207d  ', ),.         }
+00014560: 5b70 6172 7365 725d 0a20 2020 2020 2020  [parser].       
+00014570: 2061 7373 6572 745f 636f 6e66 6967 286c   assert_config(l
+00014580: 6578 6572 2c20 6578 7065 6374 6564 2c20  exer, expected, 
+00014590: 2750 6172 7365 7220 2572 2064 6f65 7320  'Parser %r does 
+000145a0: 6e6f 7420 7375 7070 6f72 7420 6c65 7865  not support lexe
+000145b0: 7220 2525 722c 2065 7870 6563 7465 6420  r %%r, expected 
+000145c0: 6f6e 6520 6f66 2025 2573 2720 2520 7061  one of %%s' % pa
+000145d0: 7273 6572 290a 0a0a 6465 6620 5f67 6574  rser)...def _get
+000145e0: 5f6c 6578 6572 5f63 616c 6c62 6163 6b73  _lexer_callbacks
+000145f0: 2874 7261 6e73 666f 726d 6572 2c20 7465  (transformer, te
+00014600: 726d 696e 616c 7329 3a0a 2020 2020 7265  rminals):.    re
+00014610: 7375 6c74 203d 207b 7d0a 2020 2020 666f  sult = {}.    fo
+00014620: 7220 7465 726d 696e 616c 2069 6e20 7465  r terminal in te
+00014630: 726d 696e 616c 733a 0a20 2020 2020 2020  rminals:.       
+00014640: 2063 616c 6c62 6163 6b20 3d20 6765 7461   callback = geta
+00014650: 7474 7228 7472 616e 7366 6f72 6d65 722c  ttr(transformer,
+00014660: 2074 6572 6d69 6e61 6c2e 6e61 6d65 2c20   terminal.name, 
+00014670: 4e6f 6e65 290a 2020 2020 2020 2020 6966  None).        if
+00014680: 2063 616c 6c62 6163 6b20 6973 206e 6f74   callback is not
+00014690: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000146a0: 2020 2072 6573 756c 745b 7465 726d 696e     result[termin
+000146b0: 616c 2e6e 616d 655d 203d 2063 616c 6c62  al.name] = callb
+000146c0: 6163 6b0a 2020 2020 7265 7475 726e 2072  ack.    return r
+000146d0: 6573 756c 740a 0a63 6c61 7373 2050 6f73  esult..class Pos
+000146e0: 744c 6578 436f 6e6e 6563 746f 723a 0a20  tLexConnector:. 
+000146f0: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00014700: 7365 6c66 2c20 6c65 7865 722c 2070 6f73  self, lexer, pos
+00014710: 746c 6578 6572 293a 0a20 2020 2020 2020  tlexer):.       
+00014720: 2073 656c 662e 6c65 7865 7220 3d20 6c65   self.lexer = le
+00014730: 7865 720a 2020 2020 2020 2020 7365 6c66  xer.        self
+00014740: 2e70 6f73 746c 6578 6572 203d 2070 6f73  .postlexer = pos
+00014750: 746c 6578 6572 0a0a 2020 2020 6465 6620  tlexer..    def 
+00014760: 6c65 7828 7365 6c66 2c20 6c65 7865 725f  lex(self, lexer_
+00014770: 7374 6174 652c 2070 6172 7365 725f 7374  state, parser_st
+00014780: 6174 6529 3a0a 2020 2020 2020 2020 6920  ate):.        i 
+00014790: 3d20 7365 6c66 2e6c 6578 6572 2e6c 6578  = self.lexer.lex
+000147a0: 286c 6578 6572 5f73 7461 7465 2c20 7061  (lexer_state, pa
+000147b0: 7273 6572 5f73 7461 7465 290a 2020 2020  rser_state).    
+000147c0: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+000147d0: 706f 7374 6c65 7865 722e 7072 6f63 6573  postlexer.proces
+000147e0: 7328 6929 0a0a 0a0a 6465 6620 6372 6561  s(i)....def crea
+000147f0: 7465 5f62 6173 6963 5f6c 6578 6572 286c  te_basic_lexer(l
+00014800: 6578 6572 5f63 6f6e 662c 2070 6172 7365  exer_conf, parse
+00014810: 722c 2070 6f73 746c 6578 2c20 6f70 7469  r, postlex, opti
+00014820: 6f6e 7329 202d 3e20 4261 7369 634c 6578  ons) -> BasicLex
+00014830: 6572 3a0a 2020 2020 636c 7320 3d20 286f  er:.    cls = (o
+00014840: 7074 696f 6e73 2061 6e64 206f 7074 696f  ptions and optio
+00014850: 6e73 2e5f 706c 7567 696e 732e 6765 7428  ns._plugins.get(
+00014860: 2742 6173 6963 4c65 7865 7227 2929 206f  'BasicLexer')) o
+00014870: 7220 4261 7369 634c 6578 6572 0a20 2020  r BasicLexer.   
+00014880: 2072 6574 7572 6e20 636c 7328 6c65 7865   return cls(lexe
+00014890: 725f 636f 6e66 290a 0a64 6566 2063 7265  r_conf)..def cre
+000148a0: 6174 655f 636f 6e74 6578 7475 616c 5f6c  ate_contextual_l
+000148b0: 6578 6572 286c 6578 6572 5f63 6f6e 663a  exer(lexer_conf:
+000148c0: 204c 6578 6572 436f 6e66 2c20 7061 7273   LexerConf, pars
+000148d0: 6572 2c20 706f 7374 6c65 782c 206f 7074  er, postlex, opt
+000148e0: 696f 6e73 2920 2d3e 2043 6f6e 7465 7874  ions) -> Context
+000148f0: 7561 6c4c 6578 6572 3a0a 2020 2020 636c  ualLexer:.    cl
+00014900: 7320 3d20 286f 7074 696f 6e73 2061 6e64  s = (options and
+00014910: 206f 7074 696f 6e73 2e5f 706c 7567 696e   options._plugin
+00014920: 732e 6765 7428 2743 6f6e 7465 7874 7561  s.get('Contextua
+00014930: 6c4c 6578 6572 2729 2920 6f72 2043 6f6e  lLexer')) or Con
+00014940: 7465 7874 7561 6c4c 6578 6572 0a20 2020  textualLexer.   
+00014950: 2070 6172 7365 5f74 6162 6c65 3a20 5061   parse_table: Pa
+00014960: 7273 6554 6162 6c65 4261 7365 5b69 6e74  rseTableBase[int
+00014970: 5d20 3d20 7061 7273 6572 2e5f 7061 7273  ] = parser._pars
+00014980: 655f 7461 626c 650a 2020 2020 7374 6174  e_table.    stat
+00014990: 6573 3a20 4469 6374 5b69 6e74 2c20 436f  es: Dict[int, Co
+000149a0: 6c6c 6563 7469 6f6e 5b73 7472 5d5d 203d  llection[str]] =
+000149b0: 207b 6964 783a 6c69 7374 2874 2e6b 6579   {idx:list(t.key
+000149c0: 7328 2929 2066 6f72 2069 6478 2c20 7420  s()) for idx, t 
+000149d0: 696e 2070 6172 7365 5f74 6162 6c65 2e73  in parse_table.s
+000149e0: 7461 7465 732e 6974 656d 7328 297d 0a20  tates.items()}. 
+000149f0: 2020 2061 6c77 6179 735f 6163 6365 7074     always_accept
+00014a00: 3a20 436f 6c6c 6563 7469 6f6e 5b73 7472  : Collection[str
+00014a10: 5d20 3d20 706f 7374 6c65 782e 616c 7761  ] = postlex.alwa
+00014a20: 7973 5f61 6363 6570 7420 6966 2070 6f73  ys_accept if pos
+00014a30: 746c 6578 2065 6c73 6520 2829 0a20 2020  tlex else ().   
+00014a40: 2072 6574 7572 6e20 636c 7328 6c65 7865   return cls(lexe
+00014a50: 725f 636f 6e66 2c20 7374 6174 6573 2c20  r_conf, states, 
+00014a60: 616c 7761 7973 5f61 6363 6570 743d 616c  always_accept=al
+00014a70: 7761 7973 5f61 6363 6570 7429 0a0a 6465  ways_accept)..de
+00014a80: 6620 6372 6561 7465 5f6c 616c 725f 7061  f create_lalr_pa
+00014a90: 7273 6572 286c 6578 6572 5f63 6f6e 663a  rser(lexer_conf:
+00014aa0: 204c 6578 6572 436f 6e66 2c20 7061 7273   LexerConf, pars
+00014ab0: 6572 5f63 6f6e 663a 2050 6172 7365 7243  er_conf: ParserC
+00014ac0: 6f6e 662c 206f 7074 696f 6e73 3d4e 6f6e  onf, options=Non
+00014ad0: 6529 202d 3e20 4c41 4c52 5f50 6172 7365  e) -> LALR_Parse
+00014ae0: 723a 0a20 2020 2064 6562 7567 203d 206f  r:.    debug = o
+00014af0: 7074 696f 6e73 2e64 6562 7567 2069 6620  ptions.debug if 
+00014b00: 6f70 7469 6f6e 7320 656c 7365 2046 616c  options else Fal
+00014b10: 7365 0a20 2020 2073 7472 6963 7420 3d20  se.    strict = 
+00014b20: 6f70 7469 6f6e 732e 7374 7269 6374 2069  options.strict i
+00014b30: 6620 6f70 7469 6f6e 7320 656c 7365 2046  f options else F
+00014b40: 616c 7365 0a20 2020 2063 6c73 203d 2028  alse.    cls = (
+00014b50: 6f70 7469 6f6e 7320 616e 6420 6f70 7469  options and opti
+00014b60: 6f6e 732e 5f70 6c75 6769 6e73 2e67 6574  ons._plugins.get
+00014b70: 2827 4c41 4c52 5f50 6172 7365 7227 2929  ('LALR_Parser'))
+00014b80: 206f 7220 4c41 4c52 5f50 6172 7365 720a   or LALR_Parser.
+00014b90: 2020 2020 7265 7475 726e 2063 6c73 2870      return cls(p
+00014ba0: 6172 7365 725f 636f 6e66 2c20 6465 6275  arser_conf, debu
+00014bb0: 673d 6465 6275 672c 2073 7472 6963 743d  g=debug, strict=
+00014bc0: 7374 7269 6374 290a 0a5f 7061 7273 6572  strict).._parser
+00014bd0: 5f63 7265 6174 6f72 735b 276c 616c 7227  _creators['lalr'
+00014be0: 5d20 3d20 6372 6561 7465 5f6c 616c 725f  ] = create_lalr_
+00014bf0: 7061 7273 6572 0a0a 0a0a 0a63 6c61 7373  parser.....class
+00014c00: 2050 6f73 744c 6578 2841 4243 293a 0a20   PostLex(ABC):. 
+00014c10: 2020 2040 6162 7374 7261 6374 6d65 7468     @abstractmeth
+00014c20: 6f64 0a20 2020 2064 6566 2070 726f 6365  od.    def proce
+00014c30: 7373 2873 656c 662c 2073 7472 6561 6d3a  ss(self, stream:
+00014c40: 2049 7465 7261 746f 725b 546f 6b65 6e5d   Iterator[Token]
+00014c50: 2920 2d3e 2049 7465 7261 746f 725b 546f  ) -> Iterator[To
+00014c60: 6b65 6e5d 3a0a 2020 2020 2020 2020 7265  ken]:.        re
+00014c70: 7475 726e 2073 7472 6561 6d0a 0a20 2020  turn stream..   
+00014c80: 2061 6c77 6179 735f 6163 6365 7074 3a20   always_accept: 
+00014c90: 4974 6572 6162 6c65 5b73 7472 5d20 3d20  Iterable[str] = 
+00014ca0: 2829 0a0a 636c 6173 7320 4c61 726b 4f70  ()..class LarkOp
+00014cb0: 7469 6f6e 7328 5365 7269 616c 697a 6529  tions(Serialize)
+00014cc0: 3a0a 2020 2020 232d 2d0a 0a20 2020 2073  :.    #--..    s
+00014cd0: 7461 7274 3a20 4c69 7374 5b73 7472 5d0a  tart: List[str].
+00014ce0: 2020 2020 6465 6275 673a 2062 6f6f 6c0a      debug: bool.
+00014cf0: 2020 2020 7374 7269 6374 3a20 626f 6f6c      strict: bool
+00014d00: 0a20 2020 2074 7261 6e73 666f 726d 6572  .    transformer
+00014d10: 3a20 274f 7074 696f 6e61 6c5b 5472 616e  : 'Optional[Tran
+00014d20: 7366 6f72 6d65 725d 270a 2020 2020 7072  sformer]'.    pr
+00014d30: 6f70 6167 6174 655f 706f 7369 7469 6f6e  opagate_position
+00014d40: 733a 2055 6e69 6f6e 5b62 6f6f 6c2c 2073  s: Union[bool, s
+00014d50: 7472 5d0a 2020 2020 6d61 7962 655f 706c  tr].    maybe_pl
+00014d60: 6163 6568 6f6c 6465 7273 3a20 626f 6f6c  aceholders: bool
+00014d70: 0a20 2020 2063 6163 6865 3a20 556e 696f  .    cache: Unio
+00014d80: 6e5b 626f 6f6c 2c20 7374 725d 0a20 2020  n[bool, str].   
+00014d90: 2072 6567 6578 3a20 626f 6f6c 0a20 2020   regex: bool.   
+00014da0: 2067 5f72 6567 6578 5f66 6c61 6773 3a20   g_regex_flags: 
+00014db0: 696e 740a 2020 2020 6b65 6570 5f61 6c6c  int.    keep_all
+00014dc0: 5f74 6f6b 656e 733a 2062 6f6f 6c0a 2020  _tokens: bool.  
+00014dd0: 2020 7472 6565 5f63 6c61 7373 3a20 4f70    tree_class: Op
+00014de0: 7469 6f6e 616c 5b43 616c 6c61 626c 655b  tional[Callable[
+00014df0: 5b73 7472 2c20 4c69 7374 5d2c 2041 6e79  [str, List], Any
+00014e00: 5d5d 0a20 2020 2070 6172 7365 723a 205f  ]].    parser: _
+00014e10: 5061 7273 6572 4172 6754 7970 650a 2020  ParserArgType.  
+00014e20: 2020 6c65 7865 723a 205f 4c65 7865 7241    lexer: _LexerA
+00014e30: 7267 5479 7065 0a20 2020 2061 6d62 6967  rgType.    ambig
+00014e40: 7569 7479 3a20 274c 6974 6572 616c 5b22  uity: 'Literal["
+00014e50: 6175 746f 222c 2022 7265 736f 6c76 6522  auto", "resolve"
+00014e60: 2c20 2265 7870 6c69 6369 7422 2c20 2266  , "explicit", "f
+00014e70: 6f72 6573 7422 5d27 0a20 2020 2070 6f73  orest"]'.    pos
+00014e80: 746c 6578 3a20 4f70 7469 6f6e 616c 5b50  tlex: Optional[P
+00014e90: 6f73 744c 6578 5d0a 2020 2020 7072 696f  ostLex].    prio
+00014ea0: 7269 7479 3a20 274f 7074 696f 6e61 6c5b  rity: 'Optional[
+00014eb0: 4c69 7465 7261 6c5b 2261 7574 6f22 2c20  Literal["auto", 
+00014ec0: 226e 6f72 6d61 6c22 2c20 2269 6e76 6572  "normal", "inver
+00014ed0: 7422 5d5d 270a 2020 2020 6c65 7865 725f  t"]]'.    lexer_
+00014ee0: 6361 6c6c 6261 636b 733a 2044 6963 745b  callbacks: Dict[
+00014ef0: 7374 722c 2043 616c 6c61 626c 655b 5b54  str, Callable[[T
+00014f00: 6f6b 656e 5d2c 2054 6f6b 656e 5d5d 0a20  oken], Token]]. 
+00014f10: 2020 2075 7365 5f62 7974 6573 3a20 626f     use_bytes: bo
+00014f20: 6f6c 0a20 2020 206f 7264 6572 6564 5f73  ol.    ordered_s
+00014f30: 6574 733a 2062 6f6f 6c0a 2020 2020 6564  ets: bool.    ed
+00014f40: 6974 5f74 6572 6d69 6e61 6c73 3a20 4f70  it_terminals: Op
+00014f50: 7469 6f6e 616c 5b43 616c 6c61 626c 655b  tional[Callable[
+00014f60: 5b54 6572 6d69 6e61 6c44 6566 5d2c 2054  [TerminalDef], T
+00014f70: 6572 6d69 6e61 6c44 6566 5d5d 0a20 2020  erminalDef]].   
+00014f80: 2069 6d70 6f72 745f 7061 7468 733a 2027   import_paths: '
+00014f90: 4c69 7374 5b55 6e69 6f6e 5b73 7472 2c20  List[Union[str, 
+00014fa0: 4361 6c6c 6162 6c65 5b5b 556e 696f 6e5b  Callable[[Union[
+00014fb0: 4e6f 6e65 2c20 7374 722c 2050 6163 6b61  None, str, Packa
+00014fc0: 6765 5265 736f 7572 6365 5d2c 2073 7472  geResource], str
+00014fd0: 5d2c 2054 7570 6c65 5b73 7472 2c20 7374  ], Tuple[str, st
+00014fe0: 725d 5d5d 5d27 0a20 2020 2073 6f75 7263  r]]]]'.    sourc
+00014ff0: 655f 7061 7468 3a20 4f70 7469 6f6e 616c  e_path: Optional
+00015000: 5b73 7472 5d0a 0a20 2020 204f 5054 494f  [str]..    OPTIO
+00015010: 4e53 5f44 4f43 203d 2072 2222 220a 2020  NS_DOC = r""".  
+00015020: 2020 2a2a 3d3d 3d20 2047 656e 6572 616c    **===  General
+00015030: 204f 7074 696f 6e73 2020 3d3d 3d2a 2a0a   Options  ===**.
+00015040: 0a20 2020 2073 7461 7274 0a20 2020 2020  .    start.     
+00015050: 2020 2020 2020 2054 6865 2073 7461 7274         The start
+00015060: 2073 796d 626f 6c2e 2045 6974 6865 7220   symbol. Either 
+00015070: 6120 7374 7269 6e67 2c20 6f72 2061 206c  a string, or a l
+00015080: 6973 7420 6f66 2073 7472 696e 6773 2066  ist of strings f
+00015090: 6f72 206d 756c 7469 706c 6520 706f 7373  or multiple poss
+000150a0: 6962 6c65 2073 7461 7274 7320 2844 6566  ible starts (Def
+000150b0: 6175 6c74 3a20 2273 7461 7274 2229 0a20  ault: "start"). 
+000150c0: 2020 2064 6562 7567 0a20 2020 2020 2020     debug.       
+000150d0: 2020 2020 2044 6973 706c 6179 2064 6562       Display deb
+000150e0: 7567 2069 6e66 6f72 6d61 7469 6f6e 2061  ug information a
+000150f0: 6e64 2065 7874 7261 2077 6172 6e69 6e67  nd extra warning
+00015100: 732e 2055 7365 206f 6e6c 7920 7768 656e  s. Use only when
+00015110: 2064 6562 7567 6769 6e67 2028 4465 6661   debugging (Defa
+00015120: 756c 743a 2060 6046 616c 7365 6060 290a  ult: ``False``).
+00015130: 2020 2020 2020 2020 2020 2020 5768 656e              When
+00015140: 2075 7365 6420 7769 7468 2045 6172 6c65   used with Earle
+00015150: 792c 2069 7420 6765 6e65 7261 7465 7320  y, it generates 
+00015160: 6120 666f 7265 7374 2067 7261 7068 2061  a forest graph a
+00015170: 7320 2273 7070 662e 706e 6722 2c20 6966  s "sppf.png", if
+00015180: 2027 646f 7427 2069 7320 696e 7374 616c   'dot' is instal
+00015190: 6c65 642e 0a20 2020 2073 7472 6963 740a  led..    strict.
+000151a0: 2020 2020 2020 2020 2020 2020 5468 726f              Thro
+000151b0: 7720 616e 2065 7863 6570 7469 6f6e 206f  w an exception o
+000151c0: 6e20 616e 7920 706f 7465 6e74 6961 6c20  n any potential 
+000151d0: 616d 6269 6775 6974 792c 2069 6e63 6c75  ambiguity, inclu
+000151e0: 6469 6e67 2073 6869 6674 2f72 6564 7563  ding shift/reduc
+000151f0: 6520 636f 6e66 6c69 6374 732c 2061 6e64  e conflicts, and
+00015200: 2072 6567 6578 2063 6f6c 6c69 7369 6f6e   regex collision
+00015210: 732e 0a20 2020 2074 7261 6e73 666f 726d  s..    transform
+00015220: 6572 0a20 2020 2020 2020 2020 2020 2041  er.            A
+00015230: 7070 6c69 6573 2074 6865 2074 7261 6e73  pplies the trans
+00015240: 666f 726d 6572 2074 6f20 6576 6572 7920  former to every 
+00015250: 7061 7273 6520 7472 6565 2028 6571 7569  parse tree (equi
+00015260: 7661 6c65 6e74 2074 6f20 6170 706c 7969  valent to applyi
+00015270: 6e67 2069 7420 6166 7465 7220 7468 6520  ng it after the 
+00015280: 7061 7273 652c 2062 7574 2066 6173 7465  parse, but faste
+00015290: 7229 0a20 2020 2070 726f 7061 6761 7465  r).    propagate
+000152a0: 5f70 6f73 6974 696f 6e73 0a20 2020 2020  _positions.     
+000152b0: 2020 2020 2020 2050 726f 7061 6761 7465         Propagate
+000152c0: 7320 706f 7369 7469 6f6e 616c 2061 7474  s positional att
+000152d0: 7269 6275 7465 7320 696e 746f 2074 6865  ributes into the
+000152e0: 2027 6d65 7461 2720 6174 7472 6962 7574   'meta' attribut
+000152f0: 6520 6f66 2061 6c6c 2074 7265 6520 6272  e of all tree br
+00015300: 616e 6368 6573 2e0a 2020 2020 2020 2020  anches..        
+00015310: 2020 2020 5365 7473 2061 7474 7269 6275      Sets attribu
+00015320: 7465 733a 2028 6c69 6e65 2c20 636f 6c75  tes: (line, colu
+00015330: 6d6e 2c20 656e 645f 6c69 6e65 2c20 656e  mn, end_line, en
+00015340: 645f 636f 6c75 6d6e 2c20 7374 6172 745f  d_column, start_
+00015350: 706f 732c 2065 6e64 5f70 6f73 2c0a 2020  pos, end_pos,.  
+00015360: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015370: 2020 2020 2020 2020 2020 2020 636f 6e74              cont
+00015380: 6169 6e65 725f 6c69 6e65 2c20 636f 6e74  ainer_line, cont
+00015390: 6169 6e65 725f 636f 6c75 6d6e 2c20 636f  ainer_column, co
+000153a0: 6e74 6169 6e65 725f 656e 645f 6c69 6e65  ntainer_end_line
+000153b0: 2c20 636f 6e74 6169 6e65 725f 656e 645f  , container_end_
+000153c0: 636f 6c75 6d6e 290a 2020 2020 2020 2020  column).        
+000153d0: 2020 2020 4163 6365 7074 7320 6060 4661      Accepts ``Fa
+000153e0: 6c73 6560 602c 2060 6054 7275 6560 602c  lse``, ``True``,
+000153f0: 206f 7220 6120 6361 6c6c 6162 6c65 2c20   or a callable, 
+00015400: 7768 6963 6820 7769 6c6c 2066 696c 7465  which will filte
+00015410: 7220 7768 6963 6820 6e6f 6465 7320 746f  r which nodes to
+00015420: 2069 676e 6f72 6520 7768 656e 2070 726f   ignore when pro
+00015430: 7061 6761 7469 6e67 2e0a 2020 2020 6d61  pagating..    ma
+00015440: 7962 655f 706c 6163 6568 6f6c 6465 7273  ybe_placeholders
+00015450: 0a20 2020 2020 2020 2020 2020 2057 6865  .            Whe
+00015460: 6e20 6060 5472 7565 6060 2c20 7468 6520  n ``True``, the 
+00015470: 6060 5b5d 6060 206f 7065 7261 746f 7220  ``[]`` operator 
+00015480: 7265 7475 726e 7320 6060 4e6f 6e65 6060  returns ``None``
+00015490: 2077 6865 6e20 6e6f 7420 6d61 7463 6865   when not matche
+000154a0: 642e 0a20 2020 2020 2020 2020 2020 2057  d..            W
+000154b0: 6865 6e20 6060 4661 6c73 6560 602c 2020  hen ``False``,  
+000154c0: 6060 5b5d 6060 2062 6568 6176 6573 206c  ``[]`` behaves l
+000154d0: 696b 6520 7468 6520 6060 3f60 6020 6f70  ike the ``?`` op
+000154e0: 6572 6174 6f72 2c20 616e 6420 7265 7475  erator, and retu
+000154f0: 726e 7320 6e6f 2076 616c 7565 2061 7420  rns no value at 
+00015500: 616c 6c2e 0a20 2020 2020 2020 2020 2020  all..           
+00015510: 2028 6465 6661 756c 743d 2060 6054 7275   (default= ``Tru
+00015520: 6560 6029 0a20 2020 2063 6163 6865 0a20  e``).    cache. 
+00015530: 2020 2020 2020 2020 2020 2043 6163 6865             Cache
+00015540: 2074 6865 2072 6573 756c 7473 206f 6620   the results of 
+00015550: 7468 6520 4c61 726b 2067 7261 6d6d 6172  the Lark grammar
+00015560: 2061 6e61 6c79 7369 732c 2066 6f72 2078   analysis, for x
+00015570: 3220 746f 2078 3320 6661 7374 6572 206c  2 to x3 faster l
+00015580: 6f61 6469 6e67 2e20 4c41 4c52 206f 6e6c  oading. LALR onl
+00015590: 7920 666f 7220 6e6f 772e 0a0a 2020 2020  y for now...    
+000155a0: 2020 2020 2020 2020 2d20 5768 656e 2060          - When `
+000155b0: 6046 616c 7365 6060 2c20 646f 6573 206e  `False``, does n
+000155c0: 6f74 6869 6e67 2028 6465 6661 756c 7429  othing (default)
+000155d0: 0a20 2020 2020 2020 2020 2020 202d 2057  .            - W
+000155e0: 6865 6e20 6060 5472 7565 6060 2c20 6361  hen ``True``, ca
+000155f0: 6368 6573 2074 6f20 6120 7465 6d70 6f72  ches to a tempor
+00015600: 6172 7920 6669 6c65 2069 6e20 7468 6520  ary file in the 
+00015610: 6c6f 6361 6c20 6469 7265 6374 6f72 790a  local directory.
+00015620: 2020 2020 2020 2020 2020 2020 2d20 5768              - Wh
+00015630: 656e 2067 6976 656e 2061 2073 7472 696e  en given a strin
+00015640: 672c 2063 6163 6865 7320 746f 2074 6865  g, caches to the
+00015650: 2070 6174 6820 706f 696e 7465 6420 6279   path pointed by
+00015660: 2074 6865 2073 7472 696e 670a 2020 2020   the string.    
+00015670: 7265 6765 780a 2020 2020 2020 2020 2020  regex.          
+00015680: 2020 5768 656e 2054 7275 652c 2075 7365    When True, use
+00015690: 7320 7468 6520 6060 7265 6765 7860 6020  s the ``regex`` 
+000156a0: 6d6f 6475 6c65 2069 6e73 7465 6164 206f  module instead o
+000156b0: 6620 7468 6520 7374 646c 6962 2060 6072  f the stdlib ``r
+000156c0: 6560 602e 0a20 2020 2067 5f72 6567 6578  e``..    g_regex
+000156d0: 5f66 6c61 6773 0a20 2020 2020 2020 2020  _flags.         
+000156e0: 2020 2046 6c61 6773 2074 6861 7420 6172     Flags that ar
+000156f0: 6520 6170 706c 6965 6420 746f 2061 6c6c  e applied to all
+00015700: 2074 6572 6d69 6e61 6c73 2028 626f 7468   terminals (both
+00015710: 2072 6567 6578 2061 6e64 2073 7472 696e   regex and strin
+00015720: 6773 290a 2020 2020 6b65 6570 5f61 6c6c  gs).    keep_all
+00015730: 5f74 6f6b 656e 730a 2020 2020 2020 2020  _tokens.        
+00015740: 2020 2020 5072 6576 656e 7420 7468 6520      Prevent the 
+00015750: 7472 6565 2062 7569 6c64 6572 2066 726f  tree builder fro
+00015760: 6d20 6175 746f 6d61 6769 6361 6c6c 7920  m automagically 
+00015770: 7265 6d6f 7669 6e67 2022 7075 6e63 7475  removing "punctu
+00015780: 6174 696f 6e22 2074 6f6b 656e 7320 2844  ation" tokens (D
+00015790: 6566 6175 6c74 3a20 6060 4661 6c73 6560  efault: ``False`
+000157a0: 6029 0a20 2020 2074 7265 655f 636c 6173  `).    tree_clas
+000157b0: 730a 2020 2020 2020 2020 2020 2020 4c61  s.            La
+000157c0: 726b 2077 696c 6c20 7072 6f64 7563 6520  rk will produce 
+000157d0: 7472 6565 7320 636f 6d70 7269 7365 6420  trees comprised 
+000157e0: 6f66 2069 6e73 7461 6e63 6573 206f 6620  of instances of 
+000157f0: 7468 6973 2063 6c61 7373 2069 6e73 7465  this class inste
+00015800: 6164 206f 6620 7468 6520 6465 6661 756c  ad of the defaul
+00015810: 7420 6060 6c61 726b 2e54 7265 6560 602e  t ``lark.Tree``.
+00015820: 0a0a 2020 2020 2a2a 3d3d 3d20 416c 676f  ..    **=== Algo
+00015830: 7269 7468 6d20 4f70 7469 6f6e 7320 3d3d  rithm Options ==
+00015840: 3d2a 2a0a 0a20 2020 2070 6172 7365 720a  =**..    parser.
+00015850: 2020 2020 2020 2020 2020 2020 4465 6369              Deci
+00015860: 6465 7320 7768 6963 6820 7061 7273 6572  des which parser
+00015870: 2065 6e67 696e 6520 746f 2075 7365 2e20   engine to use. 
+00015880: 4163 6365 7074 7320 2265 6172 6c65 7922  Accepts "earley"
+00015890: 206f 7220 226c 616c 7222 2e20 2844 6566   or "lalr". (Def
+000158a0: 6175 6c74 3a20 2265 6172 6c65 7922 292e  ault: "earley").
+000158b0: 0a20 2020 2020 2020 2020 2020 2028 7468  .            (th
+000158c0: 6572 6520 6973 2061 6c73 6f20 6120 2263  ere is also a "c
+000158d0: 796b 2220 6f70 7469 6f6e 2066 6f72 206c  yk" option for l
+000158e0: 6567 6163 7929 0a20 2020 206c 6578 6572  egacy).    lexer
+000158f0: 0a20 2020 2020 2020 2020 2020 2044 6563  .            Dec
+00015900: 6964 6573 2077 6865 7468 6572 206f 7220  ides whether or 
+00015910: 6e6f 7420 746f 2075 7365 2061 206c 6578  not to use a lex
+00015920: 6572 2073 7461 6765 0a0a 2020 2020 2020  er stage..      
+00015930: 2020 2020 2020 2d20 2261 7574 6f22 2028        - "auto" (
+00015940: 6465 6661 756c 7429 3a20 4368 6f6f 7365  default): Choose
+00015950: 2066 6f72 206d 6520 6261 7365 6420 6f6e   for me based on
+00015960: 2074 6865 2070 6172 7365 720a 2020 2020   the parser.    
+00015970: 2020 2020 2020 2020 2d20 2262 6173 6963          - "basic
+00015980: 223a 2055 7365 2061 2062 6173 6963 206c  ": Use a basic l
+00015990: 6578 6572 0a20 2020 2020 2020 2020 2020  exer.           
+000159a0: 202d 2022 636f 6e74 6578 7475 616c 223a   - "contextual":
+000159b0: 2053 7472 6f6e 6765 7220 6c65 7865 7220   Stronger lexer 
+000159c0: 286f 6e6c 7920 776f 726b 7320 7769 7468  (only works with
+000159d0: 2070 6172 7365 723d 226c 616c 7222 290a   parser="lalr").
+000159e0: 2020 2020 2020 2020 2020 2020 2d20 2264              - "d
+000159f0: 796e 616d 6963 223a 2046 6c65 7869 626c  ynamic": Flexibl
+00015a00: 6520 616e 6420 706f 7765 7266 756c 2028  e and powerful (
+00015a10: 6f6e 6c79 2077 6974 6820 7061 7273 6572  only with parser
+00015a20: 3d22 6561 726c 6579 2229 0a20 2020 2020  ="earley").     
+00015a30: 2020 2020 2020 202d 2022 6479 6e61 6d69         - "dynami
+00015a40: 635f 636f 6d70 6c65 7465 223a 2053 616d  c_complete": Sam
+00015a50: 6520 6173 2064 796e 616d 6963 2c20 6275  e as dynamic, bu
+00015a60: 7420 7472 6965 7320 2a65 7665 7279 2a20  t tries *every* 
+00015a70: 7661 7269 6174 696f 6e20 6f66 2074 6f6b  variation of tok
+00015a80: 656e 697a 696e 6720 706f 7373 6962 6c65  enizing possible
+00015a90: 2e0a 2020 2020 616d 6269 6775 6974 790a  ..    ambiguity.
+00015aa0: 2020 2020 2020 2020 2020 2020 4465 6369              Deci
+00015ab0: 6465 7320 686f 7720 746f 2068 616e 646c  des how to handl
+00015ac0: 6520 616d 6269 6775 6974 7920 696e 2074  e ambiguity in t
+00015ad0: 6865 2070 6172 7365 2e20 4f6e 6c79 2072  he parse. Only r
+00015ae0: 656c 6576 616e 7420 6966 2070 6172 7365  elevant if parse
+00015af0: 723d 2265 6172 6c65 7922 0a0a 2020 2020  r="earley"..    
+00015b00: 2020 2020 2020 2020 2d20 2272 6573 6f6c          - "resol
+00015b10: 7665 223a 2054 6865 2070 6172 7365 7220  ve": The parser 
+00015b20: 7769 6c6c 2061 7574 6f6d 6174 6963 616c  will automatical
+00015b30: 6c79 2063 686f 6f73 6520 7468 6520 7369  ly choose the si
+00015b40: 6d70 6c65 7374 2064 6572 6976 6174 696f  mplest derivatio
+00015b50: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
+00015b60: 2869 7420 6368 6f6f 7365 7320 636f 6e73  (it chooses cons
+00015b70: 6973 7465 6e74 6c79 3a20 6772 6565 6479  istently: greedy
+00015b80: 2066 6f72 2074 6f6b 656e 732c 206e 6f6e   for tokens, non
+00015b90: 2d67 7265 6564 7920 666f 7220 7275 6c65  -greedy for rule
+00015ba0: 7329 0a20 2020 2020 2020 2020 2020 202d  s).            -
+00015bb0: 2022 6578 706c 6963 6974 223a 2054 6865   "explicit": The
+00015bc0: 2070 6172 7365 7220 7769 6c6c 2072 6574   parser will ret
+00015bd0: 7572 6e20 616c 6c20 6465 7269 7661 7469  urn all derivati
+00015be0: 6f6e 7320 7772 6170 7065 6420 696e 2022  ons wrapped in "
+00015bf0: 5f61 6d62 6967 2220 7472 6565 206e 6f64  _ambig" tree nod
+00015c00: 6573 2028 692e 652e 2061 2066 6f72 6573  es (i.e. a fores
+00015c10: 7429 2e0a 2020 2020 2020 2020 2020 2020  t)..            
+00015c20: 2d20 2266 6f72 6573 7422 3a20 5468 6520  - "forest": The 
+00015c30: 7061 7273 6572 2077 696c 6c20 7265 7475  parser will retu
+00015c40: 726e 2074 6865 2072 6f6f 7420 6f66 2074  rn the root of t
+00015c50: 6865 2073 6861 7265 6420 7061 636b 6564  he shared packed
+00015c60: 2070 6172 7365 2066 6f72 6573 742e 0a0a   parse forest...
+00015c70: 2020 2020 2a2a 3d3d 3d20 4d69 7363 2e20      **=== Misc. 
+00015c80: 2f20 446f 6d61 696e 2053 7065 6369 6669  / Domain Specifi
+00015c90: 6320 4f70 7469 6f6e 7320 3d3d 3d2a 2a0a  c Options ===**.
+00015ca0: 0a20 2020 2070 6f73 746c 6578 0a20 2020  .    postlex.   
+00015cb0: 2020 2020 2020 2020 204c 6578 6572 2070           Lexer p
+00015cc0: 6f73 742d 7072 6f63 6573 7369 6e67 2028  ost-processing (
+00015cd0: 4465 6661 756c 743a 2060 604e 6f6e 6560  Default: ``None`
+00015ce0: 6029 204f 6e6c 7920 776f 726b 7320 7769  `) Only works wi
+00015cf0: 7468 2074 6865 2062 6173 6963 2061 6e64  th the basic and
+00015d00: 2063 6f6e 7465 7874 7561 6c20 6c65 7865   contextual lexe
+00015d10: 7273 2e0a 2020 2020 7072 696f 7269 7479  rs..    priority
+00015d20: 0a20 2020 2020 2020 2020 2020 2048 6f77  .            How
+00015d30: 2070 7269 6f72 6974 6965 7320 7368 6f75   priorities shou
+00015d40: 6c64 2062 6520 6576 616c 7561 7465 6420  ld be evaluated 
+00015d50: 2d20 2261 7574 6f22 2c20 6060 4e6f 6e65  - "auto", ``None
+00015d60: 6060 2c20 226e 6f72 6d61 6c22 2c20 2269  ``, "normal", "i
+00015d70: 6e76 6572 7422 2028 4465 6661 756c 743a  nvert" (Default:
+00015d80: 2022 6175 746f 2229 0a20 2020 206c 6578   "auto").    lex
+00015d90: 6572 5f63 616c 6c62 6163 6b73 0a20 2020  er_callbacks.   
+00015da0: 2020 2020 2020 2020 2044 6963 7469 6f6e           Diction
+00015db0: 6172 7920 6f66 2063 616c 6c62 6163 6b73  ary of callbacks
+00015dc0: 2066 6f72 2074 6865 206c 6578 6572 2e20   for the lexer. 
+00015dd0: 4d61 7920 616c 7465 7220 746f 6b65 6e73  May alter tokens
+00015de0: 2064 7572 696e 6720 6c65 7869 6e67 2e20   during lexing. 
+00015df0: 5573 6520 7769 7468 2063 6175 7469 6f6e  Use with caution
+00015e00: 2e0a 2020 2020 7573 655f 6279 7465 730a  ..    use_bytes.
+00015e10: 2020 2020 2020 2020 2020 2020 4163 6365              Acce
+00015e20: 7074 2061 6e20 696e 7075 7420 6f66 2074  pt an input of t
+00015e30: 7970 6520 6060 6279 7465 7360 6020 696e  ype ``bytes`` in
+00015e40: 7374 6561 6420 6f66 2060 6073 7472 6060  stead of ``str``
+00015e50: 2e0a 2020 2020 6f72 6465 7265 645f 7365  ..    ordered_se
+00015e60: 7473 0a20 2020 2020 2020 2020 2020 2053  ts.            S
+00015e70: 686f 756c 6420 4561 726c 6579 2075 7365  hould Earley use
+00015e80: 206f 7264 6572 6564 2d73 6574 7320 746f   ordered-sets to
+00015e90: 2061 6368 6965 7665 2073 7461 626c 6520   achieve stable 
+00015ea0: 6f75 7470 7574 2028 7e31 3025 2073 6c6f  output (~10% slo
+00015eb0: 7765 7220 7468 616e 2072 6567 756c 6172  wer than regular
+00015ec0: 2073 6574 732e 2044 6566 6175 6c74 3a20   sets. Default: 
+00015ed0: 5472 7565 290a 2020 2020 6564 6974 5f74  True).    edit_t
+00015ee0: 6572 6d69 6e61 6c73 0a20 2020 2020 2020  erminals.       
+00015ef0: 2020 2020 2041 2063 616c 6c62 6163 6b20       A callback 
+00015f00: 666f 7220 6564 6974 696e 6720 7468 6520  for editing the 
+00015f10: 7465 726d 696e 616c 7320 6265 666f 7265  terminals before
+00015f20: 2070 6172 7365 2e0a 2020 2020 696d 706f   parse..    impo
+00015f30: 7274 5f70 6174 6873 0a20 2020 2020 2020  rt_paths.       
+00015f40: 2020 2020 2041 204c 6973 7420 6f66 2065       A List of e
+00015f50: 6974 6865 7220 7061 7468 7320 6f72 206c  ither paths or l
+00015f60: 6f61 6465 7220 6675 6e63 7469 6f6e 7320  oader functions 
+00015f70: 746f 2073 7065 6369 6679 2066 726f 6d20  to specify from 
+00015f80: 7768 6572 6520 6772 616d 6d61 7273 2061  where grammars a
+00015f90: 7265 2069 6d70 6f72 7465 640a 2020 2020  re imported.    
+00015fa0: 736f 7572 6365 5f70 6174 680a 2020 2020  source_path.    
+00015fb0: 2020 2020 2020 2020 4f76 6572 7269 6465          Override
+00015fc0: 2074 6865 2073 6f75 7263 6520 6f66 2066   the source of f
+00015fd0: 726f 6d20 7768 6572 6520 7468 6520 6772  rom where the gr
+00015fe0: 616d 6d61 7220 7761 7320 6c6f 6164 6564  ammar was loaded
+00015ff0: 2e20 5573 6566 756c 2066 6f72 2072 656c  . Useful for rel
+00016000: 6174 6976 6520 696d 706f 7274 7320 616e  ative imports an
+00016010: 6420 756e 636f 6e76 656e 7469 6f6e 616c  d unconventional
+00016020: 2067 7261 6d6d 6172 206c 6f61 6469 6e67   grammar loading
+00016030: 0a20 2020 202a 2a3d 3d3d 2045 6e64 206f  .    **=== End o
+00016040: 6620 4f70 7469 6f6e 7320 3d3d 3d2a 2a0a  f Options ===**.
+00016050: 2020 2020 2222 220a 2020 2020 6966 205f      """.    if _
+00016060: 5f64 6f63 5f5f 3a0a 2020 2020 2020 2020  _doc__:.        
+00016070: 5f5f 646f 635f 5f20 2b3d 204f 5054 494f  __doc__ += OPTIO
+00016080: 4e53 5f44 4f43 0a0a 0a20 2020 2023 230a  NS_DOC...    ##.
+00016090: 0a20 2020 2023 230a 0a20 2020 2023 230a  .    ##..    ##.
+000160a0: 0a20 2020 2023 230a 0a20 2020 2023 230a  .    ##..    ##.
+000160b0: 0a20 2020 2023 230a 0a20 2020 205f 6465  .    ##..    _de
+000160c0: 6661 756c 7473 3a20 4469 6374 5b73 7472  faults: Dict[str
+000160d0: 2c20 416e 795d 203d 207b 0a20 2020 2020  , Any] = {.     
+000160e0: 2020 2027 6465 6275 6727 3a20 4661 6c73     'debug': Fals
+000160f0: 652c 0a20 2020 2020 2020 2027 7374 7269  e,.        'stri
+00016100: 6374 273a 2046 616c 7365 2c0a 2020 2020  ct': False,.    
+00016110: 2020 2020 276b 6565 705f 616c 6c5f 746f      'keep_all_to
+00016120: 6b65 6e73 273a 2046 616c 7365 2c0a 2020  kens': False,.  
+00016130: 2020 2020 2020 2774 7265 655f 636c 6173        'tree_clas
+00016140: 7327 3a20 4e6f 6e65 2c0a 2020 2020 2020  s': None,.      
+00016150: 2020 2763 6163 6865 273a 2046 616c 7365    'cache': False
+00016160: 2c0a 2020 2020 2020 2020 2770 6f73 746c  ,.        'postl
+00016170: 6578 273a 204e 6f6e 652c 0a20 2020 2020  ex': None,.     
+00016180: 2020 2027 7061 7273 6572 273a 2027 6561     'parser': 'ea
+00016190: 726c 6579 272c 0a20 2020 2020 2020 2027  rley',.        '
+000161a0: 6c65 7865 7227 3a20 2761 7574 6f27 2c0a  lexer': 'auto',.
+000161b0: 2020 2020 2020 2020 2774 7261 6e73 666f          'transfo
+000161c0: 726d 6572 273a 204e 6f6e 652c 0a20 2020  rmer': None,.   
+000161d0: 2020 2020 2027 7374 6172 7427 3a20 2773       'start': 's
+000161e0: 7461 7274 272c 0a20 2020 2020 2020 2027  tart',.        '
+000161f0: 7072 696f 7269 7479 273a 2027 6175 746f  priority': 'auto
+00016200: 272c 0a20 2020 2020 2020 2027 616d 6269  ',.        'ambi
+00016210: 6775 6974 7927 3a20 2761 7574 6f27 2c0a  guity': 'auto',.
+00016220: 2020 2020 2020 2020 2772 6567 6578 273a          'regex':
+00016230: 2046 616c 7365 2c0a 2020 2020 2020 2020   False,.        
+00016240: 2770 726f 7061 6761 7465 5f70 6f73 6974  'propagate_posit
+00016250: 696f 6e73 273a 2046 616c 7365 2c0a 2020  ions': False,.  
+00016260: 2020 2020 2020 276c 6578 6572 5f63 616c        'lexer_cal
+00016270: 6c62 6163 6b73 273a 207b 7d2c 0a20 2020  lbacks': {},.   
+00016280: 2020 2020 2027 6d61 7962 655f 706c 6163       'maybe_plac
+00016290: 6568 6f6c 6465 7273 273a 2054 7275 652c  eholders': True,
+000162a0: 0a20 2020 2020 2020 2027 6564 6974 5f74  .        'edit_t
+000162b0: 6572 6d69 6e61 6c73 273a 204e 6f6e 652c  erminals': None,
+000162c0: 0a20 2020 2020 2020 2027 675f 7265 6765  .        'g_rege
+000162d0: 785f 666c 6167 7327 3a20 302c 0a20 2020  x_flags': 0,.   
+000162e0: 2020 2020 2027 7573 655f 6279 7465 7327       'use_bytes'
+000162f0: 3a20 4661 6c73 652c 0a20 2020 2020 2020  : False,.       
+00016300: 2027 6f72 6465 7265 645f 7365 7473 273a   'ordered_sets':
+00016310: 2054 7275 652c 0a20 2020 2020 2020 2027   True,.        '
+00016320: 696d 706f 7274 5f70 6174 6873 273a 205b  import_paths': [
+00016330: 5d2c 0a20 2020 2020 2020 2027 736f 7572  ],.        'sour
+00016340: 6365 5f70 6174 6827 3a20 4e6f 6e65 2c0a  ce_path': None,.
+00016350: 2020 2020 2020 2020 275f 706c 7567 696e          '_plugin
+00016360: 7327 3a20 7b7d 2c0a 2020 2020 7d0a 0a20  s': {},.    }.. 
+00016370: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+00016380: 7365 6c66 2c20 6f70 7469 6f6e 735f 6469  self, options_di
+00016390: 6374 3a20 4469 6374 5b73 7472 2c20 416e  ct: Dict[str, An
+000163a0: 795d 2920 2d3e 204e 6f6e 653a 0a20 2020  y]) -> None:.   
+000163b0: 2020 2020 206f 203d 2064 6963 7428 6f70       o = dict(op
+000163c0: 7469 6f6e 735f 6469 6374 290a 0a20 2020  tions_dict)..   
+000163d0: 2020 2020 206f 7074 696f 6e73 203d 207b       options = {
+000163e0: 7d0a 2020 2020 2020 2020 666f 7220 6e61  }.        for na
+000163f0: 6d65 2c20 6465 6661 756c 7420 696e 2073  me, default in s
+00016400: 656c 662e 5f64 6566 6175 6c74 732e 6974  elf._defaults.it
+00016410: 656d 7328 293a 0a20 2020 2020 2020 2020  ems():.         
+00016420: 2020 2069 6620 6e61 6d65 2069 6e20 6f3a     if name in o:
+00016430: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00016440: 2076 616c 7565 203d 206f 2e70 6f70 286e   value = o.pop(n
+00016450: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+00016460: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
+00016470: 6365 2864 6566 6175 6c74 2c20 626f 6f6c  ce(default, bool
+00016480: 2920 616e 6420 6e61 6d65 206e 6f74 2069  ) and name not i
+00016490: 6e20 2827 6361 6368 6527 2c20 2775 7365  n ('cache', 'use
+000164a0: 5f62 7974 6573 272c 2027 7072 6f70 6167  _bytes', 'propag
+000164b0: 6174 655f 706f 7369 7469 6f6e 7327 293a  ate_positions'):
+000164c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000164d0: 2020 2020 2076 616c 7565 203d 2062 6f6f       value = boo
+000164e0: 6c28 7661 6c75 6529 0a20 2020 2020 2020  l(value).       
+000164f0: 2020 2020 2065 6c73 653a 0a20 2020 2020       else:.     
+00016500: 2020 2020 2020 2020 2020 2076 616c 7565             value
+00016510: 203d 2064 6566 6175 6c74 0a0a 2020 2020   = default..    
+00016520: 2020 2020 2020 2020 6f70 7469 6f6e 735b          options[
+00016530: 6e61 6d65 5d20 3d20 7661 6c75 650a 0a20  name] = value.. 
+00016540: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00016550: 616e 6365 286f 7074 696f 6e73 5b27 7374  ance(options['st
+00016560: 6172 7427 5d2c 2073 7472 293a 0a20 2020  art'], str):.   
+00016570: 2020 2020 2020 2020 206f 7074 696f 6e73           options
+00016580: 5b27 7374 6172 7427 5d20 3d20 5b6f 7074  ['start'] = [opt
+00016590: 696f 6e73 5b27 7374 6172 7427 5d5d 0a0a  ions['start']]..
+000165a0: 2020 2020 2020 2020 7365 6c66 2e5f 5f64          self.__d
+000165b0: 6963 745f 5f5b 276f 7074 696f 6e73 275d  ict__['options']
+000165c0: 203d 206f 7074 696f 6e73 0a0a 0a20 2020   = options...   
+000165d0: 2020 2020 2061 7373 6572 745f 636f 6e66       assert_conf
+000165e0: 6967 2873 656c 662e 7061 7273 6572 2c20  ig(self.parser, 
+000165f0: 2827 6561 726c 6579 272c 2027 6c61 6c72  ('earley', 'lalr
+00016600: 272c 2027 6379 6b27 2c20 4e6f 6e65 2929  ', 'cyk', None))
+00016610: 0a0a 2020 2020 2020 2020 6966 2073 656c  ..        if sel
+00016620: 662e 7061 7273 6572 203d 3d20 2765 6172  f.parser == 'ear
+00016630: 6c65 7927 2061 6e64 2073 656c 662e 7472  ley' and self.tr
+00016640: 616e 7366 6f72 6d65 723a 0a20 2020 2020  ansformer:.     
+00016650: 2020 2020 2020 2072 6169 7365 2043 6f6e         raise Con
+00016660: 6669 6775 7261 7469 6f6e 4572 726f 7228  figurationError(
+00016670: 2743 616e 6e6f 7420 7370 6563 6966 7920  'Cannot specify 
+00016680: 616e 2065 6d62 6564 6465 6420 7472 616e  an embedded tran
+00016690: 7366 6f72 6d65 7220 7768 656e 2075 7369  sformer when usi
+000166a0: 6e67 2074 6865 2045 6172 6c65 7920 616c  ng the Earley al
+000166b0: 676f 7269 7468 6d2e 2027 0a20 2020 2020  gorithm. '.     
+000166c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000166d0: 2020 2020 2020 2020 2750 6c65 6173 6520          'Please 
+000166e0: 7573 6520 796f 7572 2074 7261 6e73 666f  use your transfo
+000166f0: 726d 6572 206f 6e20 7468 6520 7265 7375  rmer on the resu
+00016700: 6c74 696e 6720 7061 7273 6520 7472 6565  lting parse tree
+00016710: 2c20 6f72 2075 7365 2061 2064 6966 6665  , or use a diffe
+00016720: 7265 6e74 2061 6c67 6f72 6974 686d 2028  rent algorithm (
+00016730: 692e 652e 204c 414c 5229 2729 0a0a 2020  i.e. LALR)')..  
+00016740: 2020 2020 2020 6966 206f 3a0a 2020 2020        if o:.    
+00016750: 2020 2020 2020 2020 7261 6973 6520 436f          raise Co
+00016760: 6e66 6967 7572 6174 696f 6e45 7272 6f72  nfigurationError
+00016770: 2822 556e 6b6e 6f77 6e20 6f70 7469 6f6e  ("Unknown option
+00016780: 733a 2025 7322 2025 206f 2e6b 6579 7328  s: %s" % o.keys(
+00016790: 2929 0a0a 2020 2020 6465 6620 5f5f 6765  ))..    def __ge
+000167a0: 7461 7474 725f 5f28 7365 6c66 2c20 6e61  tattr__(self, na
+000167b0: 6d65 3a20 7374 7229 202d 3e20 416e 793a  me: str) -> Any:
+000167c0: 0a20 2020 2020 2020 2074 7279 3a0a 2020  .        try:.  
+000167d0: 2020 2020 2020 2020 2020 7265 7475 726e            return
+000167e0: 2073 656c 662e 5f5f 6469 6374 5f5f 5b27   self.__dict__['
+000167f0: 6f70 7469 6f6e 7327 5d5b 6e61 6d65 5d0a  options'][name].
+00016800: 2020 2020 2020 2020 6578 6365 7074 204b          except K
+00016810: 6579 4572 726f 7220 6173 2065 3a0a 2020  eyError as e:.  
+00016820: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00016830: 4174 7472 6962 7574 6545 7272 6f72 2865  AttributeError(e
+00016840: 290a 0a20 2020 2064 6566 205f 5f73 6574  )..    def __set
+00016850: 6174 7472 5f5f 2873 656c 662c 206e 616d  attr__(self, nam
+00016860: 653a 2073 7472 2c20 7661 6c75 653a 2073  e: str, value: s
+00016870: 7472 2920 2d3e 204e 6f6e 653a 0a20 2020  tr) -> None:.   
+00016880: 2020 2020 2061 7373 6572 745f 636f 6e66       assert_conf
+00016890: 6967 286e 616d 652c 2073 656c 662e 6f70  ig(name, self.op
+000168a0: 7469 6f6e 732e 6b65 7973 2829 2c20 2225  tions.keys(), "%
+000168b0: 7220 6973 6e27 7420 6120 7661 6c69 6420  r isn't a valid 
+000168c0: 6f70 7469 6f6e 2e20 4578 7065 6374 6564  option. Expected
+000168d0: 206f 6e65 206f 663a 2025 7322 290a 2020   one of: %s").  
+000168e0: 2020 2020 2020 7365 6c66 2e6f 7074 696f        self.optio
+000168f0: 6e73 5b6e 616d 655d 203d 2076 616c 7565  ns[name] = value
+00016900: 0a0a 2020 2020 6465 6620 7365 7269 616c  ..    def serial
+00016910: 697a 6528 7365 6c66 2c20 6d65 6d6f 203d  ize(self, memo =
+00016920: 204e 6f6e 6529 202d 3e20 4469 6374 5b73   None) -> Dict[s
+00016930: 7472 2c20 416e 795d 3a0a 2020 2020 2020  tr, Any]:.      
+00016940: 2020 7265 7475 726e 2073 656c 662e 6f70    return self.op
+00016950: 7469 6f6e 730a 0a20 2020 2040 636c 6173  tions..    @clas
+00016960: 736d 6574 686f 640a 2020 2020 6465 6620  smethod.    def 
+00016970: 6465 7365 7269 616c 697a 6528 636c 732c  deserialize(cls,
+00016980: 2064 6174 613a 2044 6963 745b 7374 722c   data: Dict[str,
+00016990: 2041 6e79 5d2c 206d 656d 6f3a 2044 6963   Any], memo: Dic
+000169a0: 745b 696e 742c 2055 6e69 6f6e 5b54 6572  t[int, Union[Ter
+000169b0: 6d69 6e61 6c44 6566 2c20 5275 6c65 5d5d  minalDef, Rule]]
+000169c0: 2920 2d3e 2022 4c61 726b 4f70 7469 6f6e  ) -> "LarkOption
+000169d0: 7322 3a0a 2020 2020 2020 2020 7265 7475  s":.        retu
+000169e0: 726e 2063 6c73 2864 6174 6129 0a0a 0a23  rn cls(data)...#
+000169f0: 230a 0a23 230a 0a5f 4c4f 4144 5f41 4c4c  #..##.._LOAD_ALL
+00016a00: 4f57 4544 5f4f 5054 494f 4e53 203d 207b  OWED_OPTIONS = {
+00016a10: 2770 6f73 746c 6578 272c 2027 7472 616e  'postlex', 'tran
+00016a20: 7366 6f72 6d65 7227 2c20 276c 6578 6572  sformer', 'lexer
+00016a30: 5f63 616c 6c62 6163 6b73 272c 2027 7573  _callbacks', 'us
+00016a40: 655f 6279 7465 7327 2c20 2764 6562 7567  e_bytes', 'debug
+00016a50: 272c 2027 675f 7265 6765 785f 666c 6167  ', 'g_regex_flag
+00016a60: 7327 2c20 2772 6567 6578 272c 2027 7072  s', 'regex', 'pr
+00016a70: 6f70 6167 6174 655f 706f 7369 7469 6f6e  opagate_position
+00016a80: 7327 2c20 2774 7265 655f 636c 6173 7327  s', 'tree_class'
+00016a90: 2c20 275f 706c 7567 696e 7327 7d0a 0a5f  , '_plugins'}.._
+00016aa0: 5641 4c49 445f 5052 494f 5249 5459 5f4f  VALID_PRIORITY_O
+00016ab0: 5054 494f 4e53 203d 2028 2761 7574 6f27  PTIONS = ('auto'
+00016ac0: 2c20 276e 6f72 6d61 6c27 2c20 2769 6e76  , 'normal', 'inv
+00016ad0: 6572 7427 2c20 4e6f 6e65 290a 5f56 414c  ert', None)._VAL
+00016ae0: 4944 5f41 4d42 4947 5549 5459 5f4f 5054  ID_AMBIGUITY_OPT
+00016af0: 494f 4e53 203d 2028 2761 7574 6f27 2c20  IONS = ('auto', 
+00016b00: 2772 6573 6f6c 7665 272c 2027 6578 706c  'resolve', 'expl
+00016b10: 6963 6974 272c 2027 666f 7265 7374 2729  icit', 'forest')
+00016b20: 0a0a 0a5f 5420 3d20 5479 7065 5661 7228  ..._T = TypeVar(
+00016b30: 275f 5427 2c20 626f 756e 643d 224c 6172  '_T', bound="Lar
+00016b40: 6b22 290a 0a63 6c61 7373 204c 6172 6b28  k")..class Lark(
+00016b50: 5365 7269 616c 697a 6529 3a0a 2020 2020  Serialize):.    
+00016b60: 232d 2d0a 0a20 2020 2073 6f75 7263 655f  #--..    source_
+00016b70: 7061 7468 3a20 7374 720a 2020 2020 736f  path: str.    so
+00016b80: 7572 6365 5f67 7261 6d6d 6172 3a20 7374  urce_grammar: st
+00016b90: 720a 2020 2020 6772 616d 6d61 723a 2027  r.    grammar: '
+00016ba0: 4772 616d 6d61 7227 0a20 2020 206f 7074  Grammar'.    opt
+00016bb0: 696f 6e73 3a20 4c61 726b 4f70 7469 6f6e  ions: LarkOption
+00016bc0: 730a 2020 2020 6c65 7865 723a 204c 6578  s.    lexer: Lex
+00016bd0: 6572 0a20 2020 2070 6172 7365 723a 2027  er.    parser: '
+00016be0: 5061 7273 696e 6746 726f 6e74 656e 6427  ParsingFrontend'
+00016bf0: 0a20 2020 2074 6572 6d69 6e61 6c73 3a20  .    terminals: 
+00016c00: 436f 6c6c 6563 7469 6f6e 5b54 6572 6d69  Collection[Termi
+00016c10: 6e61 6c44 6566 5d0a 0a20 2020 2064 6566  nalDef]..    def
+00016c20: 205f 5f69 6e69 745f 5f28 7365 6c66 2c20   __init__(self, 
+00016c30: 6772 616d 6d61 723a 2027 556e 696f 6e5b  grammar: 'Union[
+00016c40: 4772 616d 6d61 722c 2073 7472 2c20 494f  Grammar, str, IO
+00016c50: 5b73 7472 5d5d 272c 202a 2a6f 7074 696f  [str]]', **optio
+00016c60: 6e73 2920 2d3e 204e 6f6e 653a 0a20 2020  ns) -> None:.   
+00016c70: 2020 2020 2073 656c 662e 6f70 7469 6f6e       self.option
+00016c80: 7320 3d20 4c61 726b 4f70 7469 6f6e 7328  s = LarkOptions(
+00016c90: 6f70 7469 6f6e 7329 0a20 2020 2020 2020  options).       
+00016ca0: 2072 655f 6d6f 6475 6c65 3a20 7479 7065   re_module: type
+00016cb0: 732e 4d6f 6475 6c65 5479 7065 0a0a 2020  s.ModuleType..  
+00016cc0: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
+00016cd0: 2020 7573 655f 7265 6765 7820 3d20 7365    use_regex = se
+00016ce0: 6c66 2e6f 7074 696f 6e73 2e72 6567 6578  lf.options.regex
+00016cf0: 0a20 2020 2020 2020 2069 6620 7573 655f  .        if use_
+00016d00: 7265 6765 783a 0a20 2020 2020 2020 2020  regex:.         
+00016d10: 2020 2069 6620 5f68 6173 5f72 6567 6578     if _has_regex
+00016d20: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00016d30: 2020 7265 5f6d 6f64 756c 6520 3d20 7265    re_module = re
+00016d40: 6765 780a 2020 2020 2020 2020 2020 2020  gex.            
+00016d50: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00016d60: 2020 2020 2020 7261 6973 6520 496d 706f        raise Impo
+00016d70: 7274 4572 726f 7228 2760 7265 6765 7860  rtError('`regex`
+00016d80: 206d 6f64 756c 6520 6d75 7374 2062 6520   module must be 
+00016d90: 696e 7374 616c 6c65 6420 6966 2063 616c  installed if cal
+00016da0: 6c69 6e67 2060 4c61 726b 2872 6567 6578  ling `Lark(regex
+00016db0: 3d54 7275 6529 602e 2729 0a20 2020 2020  =True)`.').     
+00016dc0: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00016dd0: 2020 2020 2072 655f 6d6f 6475 6c65 203d       re_module =
+00016de0: 2072 650a 0a20 2020 2020 2020 2023 230a   re..        ##.
+00016df0: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+00016e00: 2e6f 7074 696f 6e73 2e73 6f75 7263 655f  .options.source_
+00016e10: 7061 7468 2069 7320 4e6f 6e65 3a0a 2020  path is None:.  
+00016e20: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00016e30: 2020 2020 2020 2020 2020 2020 2020 2073                 s
+00016e40: 656c 662e 736f 7572 6365 5f70 6174 6820  elf.source_path 
+00016e50: 3d20 6772 616d 6d61 722e 6e61 6d65 2020  = grammar.name  
+00016e60: 2323 0a0a 2020 2020 2020 2020 2020 2020  ##..            
+00016e70: 6578 6365 7074 2041 7474 7269 6275 7465  except Attribute
+00016e80: 4572 726f 723a 0a20 2020 2020 2020 2020  Error:.         
+00016e90: 2020 2020 2020 2073 656c 662e 736f 7572         self.sour
+00016ea0: 6365 5f70 6174 6820 3d20 273c 7374 7269  ce_path = '<stri
+00016eb0: 6e67 3e27 0a20 2020 2020 2020 2065 6c73  ng>'.        els
+00016ec0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
+00016ed0: 656c 662e 736f 7572 6365 5f70 6174 6820  elf.source_path 
+00016ee0: 3d20 7365 6c66 2e6f 7074 696f 6e73 2e73  = self.options.s
+00016ef0: 6f75 7263 655f 7061 7468 0a0a 2020 2020  ource_path..    
+00016f00: 2020 2020 2323 0a0a 2020 2020 2020 2020      ##..        
+00016f10: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+00016f20: 2072 6561 6420 3d20 6772 616d 6d61 722e   read = grammar.
+00016f30: 7265 6164 2020 2323 0a0a 2020 2020 2020  read  ##..      
+00016f40: 2020 6578 6365 7074 2041 7474 7269 6275    except Attribu
+00016f50: 7465 4572 726f 723a 0a20 2020 2020 2020  teError:.       
+00016f60: 2020 2020 2070 6173 730a 2020 2020 2020       pass.      
+00016f70: 2020 656c 7365 3a0a 2020 2020 2020 2020    else:.        
+00016f80: 2020 2020 6772 616d 6d61 7220 3d20 7265      grammar = re
+00016f90: 6164 2829 0a0a 2020 2020 2020 2020 6361  ad()..        ca
+00016fa0: 6368 655f 666e 203d 204e 6f6e 650a 2020  che_fn = None.  
+00016fb0: 2020 2020 2020 6361 6368 655f 7368 6132        cache_sha2
+00016fc0: 3536 203d 204e 6f6e 650a 2020 2020 2020  56 = None.      
+00016fd0: 2020 6966 2069 7369 6e73 7461 6e63 6528    if isinstance(
+00016fe0: 6772 616d 6d61 722c 2073 7472 293a 0a20  grammar, str):. 
+00016ff0: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00017000: 736f 7572 6365 5f67 7261 6d6d 6172 203d  source_grammar =
+00017010: 2067 7261 6d6d 6172 0a20 2020 2020 2020   grammar.       
+00017020: 2020 2020 2069 6620 7365 6c66 2e6f 7074       if self.opt
+00017030: 696f 6e73 2e75 7365 5f62 7974 6573 3a0a  ions.use_bytes:.
+00017040: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017050: 6966 206e 6f74 2069 7361 7363 6969 2867  if not isascii(g
+00017060: 7261 6d6d 6172 293a 0a20 2020 2020 2020  rammar):.       
+00017070: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00017080: 7365 2043 6f6e 6669 6775 7261 7469 6f6e  se Configuration
+00017090: 4572 726f 7228 2247 7261 6d6d 6172 206d  Error("Grammar m
+000170a0: 7573 7420 6265 2061 7363 6969 206f 6e6c  ust be ascii onl
+000170b0: 792c 2077 6865 6e20 7573 655f 6279 7465  y, when use_byte
+000170c0: 733d 5472 7565 2229 0a0a 2020 2020 2020  s=True")..      
+000170d0: 2020 2020 2020 6966 2073 656c 662e 6f70        if self.op
+000170e0: 7469 6f6e 732e 6361 6368 653a 0a20 2020  tions.cache:.   
+000170f0: 2020 2020 2020 2020 2020 2020 2069 6620               if 
+00017100: 7365 6c66 2e6f 7074 696f 6e73 2e70 6172  self.options.par
+00017110: 7365 7220 213d 2027 6c61 6c72 273a 0a20  ser != 'lalr':. 
+00017120: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017130: 2020 2072 6169 7365 2043 6f6e 6669 6775     raise Configu
+00017140: 7261 7469 6f6e 4572 726f 7228 2263 6163  rationError("cac
+00017150: 6865 206f 6e6c 7920 776f 726b 7320 7769  he only works wi
+00017160: 7468 2070 6172 7365 723d 276c 616c 7227  th parser='lalr'
+00017170: 2066 6f72 206e 6f77 2229 0a0a 2020 2020   for now")..    
+00017180: 2020 2020 2020 2020 2020 2020 756e 6861              unha
+00017190: 7368 6162 6c65 203d 2028 2774 7261 6e73  shable = ('trans
+000171a0: 666f 726d 6572 272c 2027 706f 7374 6c65  former', 'postle
+000171b0: 7827 2c20 276c 6578 6572 5f63 616c 6c62  x', 'lexer_callb
+000171c0: 6163 6b73 272c 2027 6564 6974 5f74 6572  acks', 'edit_ter
+000171d0: 6d69 6e61 6c73 272c 2027 5f70 6c75 6769  minals', '_plugi
+000171e0: 6e73 2729 0a20 2020 2020 2020 2020 2020  ns').           
+000171f0: 2020 2020 206f 7074 696f 6e73 5f73 7472       options_str
+00017200: 203d 2027 272e 6a6f 696e 286b 2b73 7472   = ''.join(k+str
+00017210: 2876 2920 666f 7220 6b2c 2076 2069 6e20  (v) for k, v in 
+00017220: 6f70 7469 6f6e 732e 6974 656d 7328 2920  options.items() 
+00017230: 6966 206b 206e 6f74 2069 6e20 756e 6861  if k not in unha
+00017240: 7368 6162 6c65 290a 2020 2020 2020 2020  shable).        
+00017250: 2020 2020 2020 2020 6672 6f6d 202e 2069          from . i
+00017260: 6d70 6f72 7420 5f5f 7665 7273 696f 6e5f  mport __version_
+00017270: 5f0a 2020 2020 2020 2020 2020 2020 2020  _.              
+00017280: 2020 7320 3d20 6772 616d 6d61 7220 2b20    s = grammar + 
+00017290: 6f70 7469 6f6e 735f 7374 7220 2b20 5f5f  options_str + __
+000172a0: 7665 7273 696f 6e5f 5f20 2b20 7374 7228  version__ + str(
+000172b0: 7379 732e 7665 7273 696f 6e5f 696e 666f  sys.version_info
+000172c0: 5b3a 325d 290a 2020 2020 2020 2020 2020  [:2]).          
+000172d0: 2020 2020 2020 6361 6368 655f 7368 6132        cache_sha2
+000172e0: 3536 203d 2073 6861 3235 365f 6469 6765  56 = sha256_dige
+000172f0: 7374 2873 290a 0a20 2020 2020 2020 2020  st(s)..         
+00017300: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00017310: 616e 6365 2873 656c 662e 6f70 7469 6f6e  ance(self.option
+00017320: 732e 6361 6368 652c 2073 7472 293a 0a20  s.cache, str):. 
+00017330: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017340: 2020 2063 6163 6865 5f66 6e20 3d20 7365     cache_fn = se
+00017350: 6c66 2e6f 7074 696f 6e73 2e63 6163 6865  lf.options.cache
+00017360: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017370: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+00017380: 2020 2020 2020 2020 2020 2069 6620 7365             if se
+00017390: 6c66 2e6f 7074 696f 6e73 2e63 6163 6865  lf.options.cache
+000173a0: 2069 7320 6e6f 7420 5472 7565 3a0a 2020   is not True:.  
+000173b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000173c0: 2020 2020 2020 7261 6973 6520 436f 6e66        raise Conf
+000173d0: 6967 7572 6174 696f 6e45 7272 6f72 2822  igurationError("
+000173e0: 6361 6368 6520 6172 6775 6d65 6e74 206d  cache argument m
+000173f0: 7573 7420 6265 2062 6f6f 6c20 6f72 2073  ust be bool or s
+00017400: 7472 2229 0a0a 2020 2020 2020 2020 2020  tr")..          
+00017410: 2020 2020 2020 2020 2020 7472 793a 0a20            try:. 
+00017420: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017430: 2020 2020 2020 2075 7365 726e 616d 6520         username 
+00017440: 3d20 6765 7470 6173 732e 6765 7475 7365  = getpass.getuse
+00017450: 7228 290a 2020 2020 2020 2020 2020 2020  r().            
+00017460: 2020 2020 2020 2020 6578 6365 7074 2045          except E
+00017470: 7863 6570 7469 6f6e 3a0a 2020 2020 2020  xception:.      
+00017480: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017490: 2020 2323 0a0a 2020 2020 2020 2020 2020    ##..          
+000174a0: 2020 2020 2020 2020 2020 2020 2020 2323                ##
+000174b0: 0a0a 2020 2020 2020 2020 2020 2020 2020  ..              
+000174c0: 2020 2020 2020 2020 2020 2323 0a0a 2020            ##..  
+000174d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000174e0: 2020 2020 2020 7573 6572 6e61 6d65 203d        username =
+000174f0: 2022 756e 6b6e 6f77 6e22 0a0a 2020 2020   "unknown"..    
+00017500: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017510: 6361 6368 655f 666e 203d 2074 656d 7066  cache_fn = tempf
+00017520: 696c 652e 6765 7474 656d 7064 6972 2829  ile.gettempdir()
+00017530: 202b 2022 2f2e 6c61 726b 5f63 6163 6865   + "/.lark_cache
+00017540: 5f25 735f 2573 5f25 735f 2573 2e74 6d70  _%s_%s_%s_%s.tmp
+00017550: 2220 2520 2875 7365 726e 616d 652c 2063  " % (username, c
+00017560: 6163 6865 5f73 6861 3235 362c 202a 7379  ache_sha256, *sy
+00017570: 732e 7665 7273 696f 6e5f 696e 666f 5b3a  s.version_info[:
+00017580: 325d 290a 0a20 2020 2020 2020 2020 2020  2])..           
+00017590: 2020 2020 206f 6c64 5f6f 7074 696f 6e73       old_options
+000175a0: 203d 2073 656c 662e 6f70 7469 6f6e 730a   = self.options.
+000175b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000175c0: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+000175d0: 2020 2020 2020 2020 2077 6974 6820 4653           with FS
+000175e0: 2e6f 7065 6e28 6361 6368 655f 666e 2c20  .open(cache_fn, 
+000175f0: 2772 6227 2920 6173 2066 3a0a 2020 2020  'rb') as f:.    
+00017600: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017610: 2020 2020 6c6f 6767 6572 2e64 6562 7567      logger.debug
+00017620: 2827 4c6f 6164 696e 6720 6772 616d 6d61  ('Loading gramma
+00017630: 7220 6672 6f6d 2063 6163 6865 3a20 2573  r from cache: %s
+00017640: 272c 2063 6163 6865 5f66 6e29 0a20 2020  ', cache_fn).   
+00017650: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017660: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
+00017670: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017680: 2066 6f72 206e 616d 6520 696e 2028 7365   for name in (se
+00017690: 7428 6f70 7469 6f6e 7329 202d 205f 4c4f  t(options) - _LO
+000176a0: 4144 5f41 4c4c 4f57 4544 5f4f 5054 494f  AD_ALLOWED_OPTIO
+000176b0: 4e53 293a 0a20 2020 2020 2020 2020 2020  NS):.           
+000176c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000176d0: 2064 656c 206f 7074 696f 6e73 5b6e 616d   del options[nam
+000176e0: 655d 0a20 2020 2020 2020 2020 2020 2020  e].             
+000176f0: 2020 2020 2020 2020 2020 2066 696c 655f             file_
+00017700: 7368 6132 3536 203d 2066 2e72 6561 646c  sha256 = f.readl
+00017710: 696e 6528 292e 7273 7472 6970 2862 275c  ine().rstrip(b'\
+00017720: 6e27 290a 2020 2020 2020 2020 2020 2020  n').            
+00017730: 2020 2020 2020 2020 2020 2020 6361 6368              cach
+00017740: 6564 5f75 7365 645f 6669 6c65 7320 3d20  ed_used_files = 
+00017750: 7069 636b 6c65 2e6c 6f61 6428 6629 0a20  pickle.load(f). 
+00017760: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017770: 2020 2020 2020 2069 6620 6669 6c65 5f73         if file_s
+00017780: 6861 3235 3620 3d3d 2063 6163 6865 5f73  ha256 == cache_s
+00017790: 6861 3235 362e 656e 636f 6465 2827 7574  ha256.encode('ut
+000177a0: 6638 2729 2061 6e64 2076 6572 6966 795f  f8') and verify_
+000177b0: 7573 6564 5f66 696c 6573 2863 6163 6865  used_files(cache
+000177c0: 645f 7573 6564 5f66 696c 6573 293a 0a20  d_used_files):. 
+000177d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000177e0: 2020 2020 2020 2020 2020 2063 6163 6865             cache
+000177f0: 645f 7061 7273 6572 5f64 6174 6120 3d20  d_parser_data = 
+00017800: 7069 636b 6c65 2e6c 6f61 6428 6629 0a20  pickle.load(f). 
+00017810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017820: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00017830: 5f6c 6f61 6428 6361 6368 6564 5f70 6172  _load(cached_par
+00017840: 7365 725f 6461 7461 2c20 2a2a 6f70 7469  ser_data, **opti
+00017850: 6f6e 7329 0a20 2020 2020 2020 2020 2020  ons).           
+00017860: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017870: 2072 6574 7572 6e0a 2020 2020 2020 2020   return.        
+00017880: 2020 2020 2020 2020 6578 6365 7074 2046          except F
+00017890: 696c 654e 6f74 466f 756e 6445 7272 6f72  ileNotFoundError
+000178a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000178b0: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
+000178c0: 2020 2020 2020 2020 2020 2020 2020 7061                pa
+000178d0: 7373 0a20 2020 2020 2020 2020 2020 2020  ss.             
+000178e0: 2020 2065 7863 6570 7420 4578 6365 7074     except Except
+000178f0: 696f 6e3a 2023 230a 0a20 2020 2020 2020  ion: ##..       
+00017900: 2020 2020 2020 2020 2020 2020 206c 6f67               log
+00017910: 6765 722e 6578 6365 7074 696f 6e28 2246  ger.exception("F
+00017920: 6169 6c65 6420 746f 206c 6f61 6420 4c61  ailed to load La
+00017930: 726b 2066 726f 6d20 6361 6368 653a 2025  rk from cache: %
+00017940: 722e 2057 6520 7769 6c6c 2074 7279 2074  r. We will try t
+00017950: 6f20 6361 7272 7920 6f6e 2e22 2c20 6361  o carry on.", ca
+00017960: 6368 655f 666e 290a 0a20 2020 2020 2020  che_fn)..       
+00017970: 2020 2020 2020 2020 2020 2020 2023 230a               ##.
+00017980: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017990: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
+000179a0: 2020 2020 2020 2020 2020 2020 2073 656c               sel
+000179b0: 662e 6f70 7469 6f6e 7320 3d20 6f6c 645f  f.options = old_
+000179c0: 6f70 7469 6f6e 730a 0a0a 2020 2020 2020  options...      
+000179d0: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
+000179e0: 2020 2020 2020 7365 6c66 2e67 7261 6d6d        self.gramm
+000179f0: 6172 2c20 7573 6564 5f66 696c 6573 203d  ar, used_files =
+00017a00: 206c 6f61 645f 6772 616d 6d61 7228 6772   load_grammar(gr
+00017a10: 616d 6d61 722c 2073 656c 662e 736f 7572  ammar, self.sour
+00017a20: 6365 5f70 6174 682c 2073 656c 662e 6f70  ce_path, self.op
+00017a30: 7469 6f6e 732e 696d 706f 7274 5f70 6174  tions.import_pat
+00017a40: 6873 2c20 7365 6c66 2e6f 7074 696f 6e73  hs, self.options
+00017a50: 2e6b 6565 705f 616c 6c5f 746f 6b65 6e73  .keep_all_tokens
+00017a60: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00017a70: 2020 2020 2020 2020 2020 2020 6173 7365              asse
+00017a80: 7274 2069 7369 6e73 7461 6e63 6528 6772  rt isinstance(gr
+00017a90: 616d 6d61 722c 2047 7261 6d6d 6172 290a  ammar, Grammar).
+00017aa0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00017ab0: 2e67 7261 6d6d 6172 203d 2067 7261 6d6d  .grammar = gramm
+00017ac0: 6172 0a0a 0a20 2020 2020 2020 2069 6620  ar...        if 
+00017ad0: 7365 6c66 2e6f 7074 696f 6e73 2e6c 6578  self.options.lex
+00017ae0: 6572 203d 3d20 2761 7574 6f27 3a0a 2020  er == 'auto':.  
+00017af0: 2020 2020 2020 2020 2020 6966 2073 656c            if sel
+00017b00: 662e 6f70 7469 6f6e 732e 7061 7273 6572  f.options.parser
+00017b10: 203d 3d20 276c 616c 7227 3a0a 2020 2020   == 'lalr':.    
+00017b20: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00017b30: 2e6f 7074 696f 6e73 2e6c 6578 6572 203d  .options.lexer =
+00017b40: 2027 636f 6e74 6578 7475 616c 270a 2020   'contextual'.  
+00017b50: 2020 2020 2020 2020 2020 656c 6966 2073            elif s
+00017b60: 656c 662e 6f70 7469 6f6e 732e 7061 7273  elf.options.pars
+00017b70: 6572 203d 3d20 2765 6172 6c65 7927 3a0a  er == 'earley':.
+00017b80: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017b90: 6966 2073 656c 662e 6f70 7469 6f6e 732e  if self.options.
+00017ba0: 706f 7374 6c65 7820 6973 206e 6f74 204e  postlex is not N
+00017bb0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00017bc0: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+00017bd0: 696e 666f 2822 706f 7374 6c65 7820 6361  info("postlex ca
+00017be0: 6e27 7420 6265 2075 7365 6420 7769 7468  n't be used with
+00017bf0: 2074 6865 2064 796e 616d 6963 206c 6578   the dynamic lex
+00017c00: 6572 2c20 736f 2077 6520 7573 6520 2762  er, so we use 'b
+00017c10: 6173 6963 2720 696e 7374 6561 642e 2022  asic' instead. "
+00017c20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017c30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017c40: 2022 436f 6e73 6964 6572 2075 7369 6e67   "Consider using
+00017c50: 206c 616c 7220 7769 7468 2063 6f6e 7465   lalr with conte
+00017c60: 7874 7561 6c20 696e 7374 6561 6420 6f66  xtual instead of
+00017c70: 2065 6172 6c65 7922 290a 2020 2020 2020   earley").      
+00017c80: 2020 2020 2020 2020 2020 2020 2020 7365                se
+00017c90: 6c66 2e6f 7074 696f 6e73 2e6c 6578 6572  lf.options.lexer
+00017ca0: 203d 2027 6261 7369 6327 0a20 2020 2020   = 'basic'.     
+00017cb0: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
+00017cc0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00017cd0: 2020 2020 2073 656c 662e 6f70 7469 6f6e       self.option
+00017ce0: 732e 6c65 7865 7220 3d20 2764 796e 616d  s.lexer = 'dynam
+00017cf0: 6963 270a 2020 2020 2020 2020 2020 2020  ic'.            
+00017d00: 656c 6966 2073 656c 662e 6f70 7469 6f6e  elif self.option
+00017d10: 732e 7061 7273 6572 203d 3d20 2763 796b  s.parser == 'cyk
+00017d20: 273a 0a20 2020 2020 2020 2020 2020 2020  ':.             
+00017d30: 2020 2073 656c 662e 6f70 7469 6f6e 732e     self.options.
+00017d40: 6c65 7865 7220 3d20 2762 6173 6963 270a  lexer = 'basic'.
+00017d50: 2020 2020 2020 2020 2020 2020 656c 7365              else
+00017d60: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00017d70: 2020 6173 7365 7274 2046 616c 7365 2c20    assert False, 
+00017d80: 7365 6c66 2e6f 7074 696f 6e73 2e70 6172  self.options.par
+00017d90: 7365 720a 2020 2020 2020 2020 6c65 7865  ser.        lexe
+00017da0: 7220 3d20 7365 6c66 2e6f 7074 696f 6e73  r = self.options
+00017db0: 2e6c 6578 6572 0a20 2020 2020 2020 2069  .lexer.        i
+00017dc0: 6620 6973 696e 7374 616e 6365 286c 6578  f isinstance(lex
+00017dd0: 6572 2c20 7479 7065 293a 0a20 2020 2020  er, type):.     
+00017de0: 2020 2020 2020 2061 7373 6572 7420 6973         assert is
+00017df0: 7375 6263 6c61 7373 286c 6578 6572 2c20  subclass(lexer, 
+00017e00: 4c65 7865 7229 2020 2020 2023 230a 0a20  Lexer)     ##.. 
+00017e10: 2020 2020 2020 2065 6c73 653a 0a20 2020         else:.   
+00017e20: 2020 2020 2020 2020 2061 7373 6572 745f           assert_
+00017e30: 636f 6e66 6967 286c 6578 6572 2c20 2827  config(lexer, ('
+00017e40: 6261 7369 6327 2c20 2763 6f6e 7465 7874  basic', 'context
+00017e50: 7561 6c27 2c20 2764 796e 616d 6963 272c  ual', 'dynamic',
+00017e60: 2027 6479 6e61 6d69 635f 636f 6d70 6c65   'dynamic_comple
+00017e70: 7465 2729 290a 2020 2020 2020 2020 2020  te')).          
+00017e80: 2020 6966 2073 656c 662e 6f70 7469 6f6e    if self.option
+00017e90: 732e 706f 7374 6c65 7820 6973 206e 6f74  s.postlex is not
+00017ea0: 204e 6f6e 6520 616e 6420 2764 796e 616d   None and 'dynam
+00017eb0: 6963 2720 696e 206c 6578 6572 3a0a 2020  ic' in lexer:.  
+00017ec0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00017ed0: 6973 6520 436f 6e66 6967 7572 6174 696f  ise Configuratio
+00017ee0: 6e45 7272 6f72 2822 4361 6e27 7420 7573  nError("Can't us
+00017ef0: 6520 706f 7374 6c65 7820 7769 7468 2061  e postlex with a
+00017f00: 2064 796e 616d 6963 206c 6578 6572 2e20   dynamic lexer. 
+00017f10: 5573 6520 6261 7369 6320 6f72 2063 6f6e  Use basic or con
+00017f20: 7465 7874 7561 6c20 696e 7374 6561 6422  textual instead"
+00017f30: 290a 0a20 2020 2020 2020 2069 6620 7365  )..        if se
+00017f40: 6c66 2e6f 7074 696f 6e73 2e61 6d62 6967  lf.options.ambig
+00017f50: 7569 7479 203d 3d20 2761 7574 6f27 3a0a  uity == 'auto':.
+00017f60: 2020 2020 2020 2020 2020 2020 6966 2073              if s
+00017f70: 656c 662e 6f70 7469 6f6e 732e 7061 7273  elf.options.pars
+00017f80: 6572 203d 3d20 2765 6172 6c65 7927 3a0a  er == 'earley':.
+00017f90: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00017fa0: 7365 6c66 2e6f 7074 696f 6e73 2e61 6d62  self.options.amb
+00017fb0: 6967 7569 7479 203d 2027 7265 736f 6c76  iguity = 'resolv
+00017fc0: 6527 0a20 2020 2020 2020 2065 6c73 653a  e'.        else:
+00017fd0: 0a20 2020 2020 2020 2020 2020 2061 7373  .            ass
+00017fe0: 6572 745f 636f 6e66 6967 2873 656c 662e  ert_config(self.
+00017ff0: 6f70 7469 6f6e 732e 7061 7273 6572 2c20  options.parser, 
+00018000: 2827 6561 726c 6579 272c 2027 6379 6b27  ('earley', 'cyk'
+00018010: 292c 2022 2572 2064 6f65 736e 2774 2073  ), "%r doesn't s
+00018020: 7570 706f 7274 2064 6973 616d 6269 6775  upport disambigu
+00018030: 6174 696f 6e2e 2055 7365 206f 6e65 206f  ation. Use one o
+00018040: 6620 7468 6573 6520 7061 7273 6572 7320  f these parsers 
+00018050: 696e 7374 6561 643a 2025 7322 290a 0a20  instead: %s").. 
+00018060: 2020 2020 2020 2069 6620 7365 6c66 2e6f         if self.o
+00018070: 7074 696f 6e73 2e70 7269 6f72 6974 7920  ptions.priority 
+00018080: 3d3d 2027 6175 746f 273a 0a20 2020 2020  == 'auto':.     
+00018090: 2020 2020 2020 2073 656c 662e 6f70 7469         self.opti
+000180a0: 6f6e 732e 7072 696f 7269 7479 203d 2027  ons.priority = '
+000180b0: 6e6f 726d 616c 270a 0a20 2020 2020 2020  normal'..       
+000180c0: 2069 6620 7365 6c66 2e6f 7074 696f 6e73   if self.options
+000180d0: 2e70 7269 6f72 6974 7920 6e6f 7420 696e  .priority not in
+000180e0: 205f 5641 4c49 445f 5052 494f 5249 5459   _VALID_PRIORITY
+000180f0: 5f4f 5054 494f 4e53 3a0a 2020 2020 2020  _OPTIONS:.      
+00018100: 2020 2020 2020 7261 6973 6520 436f 6e66        raise Conf
+00018110: 6967 7572 6174 696f 6e45 7272 6f72 2822  igurationError("
+00018120: 696e 7661 6c69 6420 7072 696f 7269 7479  invalid priority
+00018130: 206f 7074 696f 6e3a 2025 722e 204d 7573   option: %r. Mus
+00018140: 7420 6265 206f 6e65 206f 6620 2572 2220  t be one of %r" 
+00018150: 2520 2873 656c 662e 6f70 7469 6f6e 732e  % (self.options.
+00018160: 7072 696f 7269 7479 2c20 5f56 414c 4944  priority, _VALID
+00018170: 5f50 5249 4f52 4954 595f 4f50 5449 4f4e  _PRIORITY_OPTION
+00018180: 5329 290a 2020 2020 2020 2020 6966 2073  S)).        if s
+00018190: 656c 662e 6f70 7469 6f6e 732e 616d 6269  elf.options.ambi
+000181a0: 6775 6974 7920 6e6f 7420 696e 205f 5641  guity not in _VA
+000181b0: 4c49 445f 414d 4249 4755 4954 595f 4f50  LID_AMBIGUITY_OP
+000181c0: 5449 4f4e 533a 0a20 2020 2020 2020 2020  TIONS:.         
+000181d0: 2020 2072 6169 7365 2043 6f6e 6669 6775     raise Configu
+000181e0: 7261 7469 6f6e 4572 726f 7228 2269 6e76  rationError("inv
+000181f0: 616c 6964 2061 6d62 6967 7569 7479 206f  alid ambiguity o
+00018200: 7074 696f 6e3a 2025 722e 204d 7573 7420  ption: %r. Must 
+00018210: 6265 206f 6e65 206f 6620 2572 2220 2520  be one of %r" % 
+00018220: 2873 656c 662e 6f70 7469 6f6e 732e 616d  (self.options.am
+00018230: 6269 6775 6974 792c 205f 5641 4c49 445f  biguity, _VALID_
+00018240: 414d 4249 4755 4954 595f 4f50 5449 4f4e  AMBIGUITY_OPTION
+00018250: 5329 290a 0a20 2020 2020 2020 2069 6620  S))..        if 
+00018260: 7365 6c66 2e6f 7074 696f 6e73 2e70 6172  self.options.par
+00018270: 7365 7220 6973 204e 6f6e 653a 0a20 2020  ser is None:.   
+00018280: 2020 2020 2020 2020 2074 6572 6d69 6e61           termina
+00018290: 6c73 5f74 6f5f 6b65 6570 203d 2027 2a27  ls_to_keep = '*'
+000182a0: 0a20 2020 2020 2020 2065 6c69 6620 7365  .        elif se
+000182b0: 6c66 2e6f 7074 696f 6e73 2e70 6f73 746c  lf.options.postl
+000182c0: 6578 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ex is not None:.
+000182d0: 2020 2020 2020 2020 2020 2020 7465 726d              term
+000182e0: 696e 616c 735f 746f 5f6b 6565 7020 3d20  inals_to_keep = 
+000182f0: 7365 7428 7365 6c66 2e6f 7074 696f 6e73  set(self.options
+00018300: 2e70 6f73 746c 6578 2e61 6c77 6179 735f  .postlex.always_
+00018310: 6163 6365 7074 290a 2020 2020 2020 2020  accept).        
+00018320: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
+00018330: 2020 7465 726d 696e 616c 735f 746f 5f6b    terminals_to_k
+00018340: 6565 7020 3d20 7365 7428 290a 0a20 2020  eep = set()..   
+00018350: 2020 2020 2023 230a 0a20 2020 2020 2020       ##..       
+00018360: 2073 656c 662e 7465 726d 696e 616c 732c   self.terminals,
+00018370: 2073 656c 662e 7275 6c65 732c 2073 656c   self.rules, sel
+00018380: 662e 6967 6e6f 7265 5f74 6f6b 656e 7320  f.ignore_tokens 
+00018390: 3d20 7365 6c66 2e67 7261 6d6d 6172 2e63  = self.grammar.c
+000183a0: 6f6d 7069 6c65 2873 656c 662e 6f70 7469  ompile(self.opti
+000183b0: 6f6e 732e 7374 6172 742c 2074 6572 6d69  ons.start, termi
+000183c0: 6e61 6c73 5f74 6f5f 6b65 6570 290a 0a20  nals_to_keep).. 
+000183d0: 2020 2020 2020 2069 6620 7365 6c66 2e6f         if self.o
+000183e0: 7074 696f 6e73 2e65 6469 745f 7465 726d  ptions.edit_term
+000183f0: 696e 616c 733a 0a20 2020 2020 2020 2020  inals:.         
+00018400: 2020 2066 6f72 2074 2069 6e20 7365 6c66     for t in self
+00018410: 2e74 6572 6d69 6e61 6c73 3a0a 2020 2020  .terminals:.    
+00018420: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00018430: 2e6f 7074 696f 6e73 2e65 6469 745f 7465  .options.edit_te
+00018440: 726d 696e 616c 7328 7429 0a0a 2020 2020  rminals(t)..    
+00018450: 2020 2020 7365 6c66 2e5f 7465 726d 696e      self._termin
+00018460: 616c 735f 6469 6374 203d 207b 742e 6e61  als_dict = {t.na
+00018470: 6d65 3a20 7420 666f 7220 7420 696e 2073  me: t for t in s
+00018480: 656c 662e 7465 726d 696e 616c 737d 0a0a  elf.terminals}..
+00018490: 2020 2020 2020 2020 2323 0a0a 2020 2020          ##..    
+000184a0: 2020 2020 6966 2073 656c 662e 6f70 7469      if self.opti
+000184b0: 6f6e 732e 7072 696f 7269 7479 203d 3d20  ons.priority == 
+000184c0: 2769 6e76 6572 7427 3a0a 2020 2020 2020  'invert':.      
+000184d0: 2020 2020 2020 666f 7220 7275 6c65 2069        for rule i
+000184e0: 6e20 7365 6c66 2e72 756c 6573 3a0a 2020  n self.rules:.  
+000184f0: 2020 2020 2020 2020 2020 2020 2020 6966                if
+00018500: 2072 756c 652e 6f70 7469 6f6e 732e 7072   rule.options.pr
+00018510: 696f 7269 7479 2069 7320 6e6f 7420 4e6f  iority is not No
+00018520: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
+00018530: 2020 2020 2020 2020 7275 6c65 2e6f 7074          rule.opt
+00018540: 696f 6e73 2e70 7269 6f72 6974 7920 3d20  ions.priority = 
+00018550: 2d72 756c 652e 6f70 7469 6f6e 732e 7072  -rule.options.pr
+00018560: 696f 7269 7479 0a20 2020 2020 2020 2020  iority.         
+00018570: 2020 2066 6f72 2074 6572 6d20 696e 2073     for term in s
+00018580: 656c 662e 7465 726d 696e 616c 733a 0a20  elf.terminals:. 
+00018590: 2020 2020 2020 2020 2020 2020 2020 2074                 t
+000185a0: 6572 6d2e 7072 696f 7269 7479 203d 202d  erm.priority = -
+000185b0: 7465 726d 2e70 7269 6f72 6974 790a 2020  term.priority.  
+000185c0: 2020 2020 2020 2323 0a0a 2020 2020 2020        ##..      
+000185d0: 2020 2323 0a0a 2020 2020 2020 2020 2323    ##..        ##
+000185e0: 0a0a 2020 2020 2020 2020 656c 6966 2073  ..        elif s
+000185f0: 656c 662e 6f70 7469 6f6e 732e 7072 696f  elf.options.prio
+00018600: 7269 7479 2069 7320 4e6f 6e65 3a0a 2020  rity is None:.  
+00018610: 2020 2020 2020 2020 2020 666f 7220 7275            for ru
+00018620: 6c65 2069 6e20 7365 6c66 2e72 756c 6573  le in self.rules
+00018630: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+00018640: 2020 6966 2072 756c 652e 6f70 7469 6f6e    if rule.option
+00018650: 732e 7072 696f 7269 7479 2069 7320 6e6f  s.priority is no
+00018660: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+00018670: 2020 2020 2020 2020 2020 2020 7275 6c65              rule
+00018680: 2e6f 7074 696f 6e73 2e70 7269 6f72 6974  .options.priorit
+00018690: 7920 3d20 4e6f 6e65 0a20 2020 2020 2020  y = None.       
+000186a0: 2020 2020 2066 6f72 2074 6572 6d20 696e       for term in
+000186b0: 2073 656c 662e 7465 726d 696e 616c 733a   self.terminals:
+000186c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000186d0: 2074 6572 6d2e 7072 696f 7269 7479 203d   term.priority =
+000186e0: 2030 0a0a 2020 2020 2020 2020 2323 0a0a   0..        ##..
+000186f0: 2020 2020 2020 2020 7365 6c66 2e6c 6578          self.lex
+00018700: 6572 5f63 6f6e 6620 3d20 4c65 7865 7243  er_conf = LexerC
+00018710: 6f6e 6628 0a20 2020 2020 2020 2020 2020  onf(.           
+00018720: 2020 2020 2073 656c 662e 7465 726d 696e       self.termin
+00018730: 616c 732c 2072 655f 6d6f 6475 6c65 2c20  als, re_module, 
+00018740: 7365 6c66 2e69 676e 6f72 655f 746f 6b65  self.ignore_toke
+00018750: 6e73 2c20 7365 6c66 2e6f 7074 696f 6e73  ns, self.options
+00018760: 2e70 6f73 746c 6578 2c0a 2020 2020 2020  .postlex,.      
+00018770: 2020 2020 2020 2020 2020 7365 6c66 2e6f            self.o
+00018780: 7074 696f 6e73 2e6c 6578 6572 5f63 616c  ptions.lexer_cal
+00018790: 6c62 6163 6b73 2c20 7365 6c66 2e6f 7074  lbacks, self.opt
+000187a0: 696f 6e73 2e67 5f72 6567 6578 5f66 6c61  ions.g_regex_fla
+000187b0: 6773 2c20 7573 655f 6279 7465 733d 7365  gs, use_bytes=se
+000187c0: 6c66 2e6f 7074 696f 6e73 2e75 7365 5f62  lf.options.use_b
+000187d0: 7974 6573 2c20 7374 7269 6374 3d73 656c  ytes, strict=sel
+000187e0: 662e 6f70 7469 6f6e 732e 7374 7269 6374  f.options.strict
+000187f0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00018800: 2020 2020 2020 2020 6966 2073 656c 662e          if self.
+00018810: 6f70 7469 6f6e 732e 7061 7273 6572 3a0a  options.parser:.
+00018820: 2020 2020 2020 2020 2020 2020 7365 6c66              self
+00018830: 2e70 6172 7365 7220 3d20 7365 6c66 2e5f  .parser = self._
+00018840: 6275 696c 645f 7061 7273 6572 2829 0a20  build_parser(). 
+00018850: 2020 2020 2020 2065 6c69 6620 6c65 7865         elif lexe
+00018860: 723a 0a20 2020 2020 2020 2020 2020 2073  r:.            s
+00018870: 656c 662e 6c65 7865 7220 3d20 7365 6c66  elf.lexer = self
+00018880: 2e5f 6275 696c 645f 6c65 7865 7228 290a  ._build_lexer().
+00018890: 0a20 2020 2020 2020 2069 6620 6361 6368  .        if cach
+000188a0: 655f 666e 3a0a 2020 2020 2020 2020 2020  e_fn:.          
+000188b0: 2020 6c6f 6767 6572 2e64 6562 7567 2827    logger.debug('
+000188c0: 5361 7669 6e67 2067 7261 6d6d 6172 2074  Saving grammar t
+000188d0: 6f20 6361 6368 653a 2025 7327 2c20 6361  o cache: %s', ca
+000188e0: 6368 655f 666e 290a 2020 2020 2020 2020  che_fn).        
+000188f0: 2020 2020 7472 793a 0a20 2020 2020 2020      try:.       
+00018900: 2020 2020 2020 2020 2077 6974 6820 4653           with FS
+00018910: 2e6f 7065 6e28 6361 6368 655f 666e 2c20  .open(cache_fn, 
+00018920: 2777 6227 2920 6173 2066 3a0a 2020 2020  'wb') as f:.    
+00018930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018940: 6173 7365 7274 2063 6163 6865 5f73 6861  assert cache_sha
+00018950: 3235 3620 6973 206e 6f74 204e 6f6e 650a  256 is not None.
+00018960: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018970: 2020 2020 662e 7772 6974 6528 6361 6368      f.write(cach
+00018980: 655f 7368 6132 3536 2e65 6e63 6f64 6528  e_sha256.encode(
+00018990: 2775 7466 3827 2920 2b20 6227 5c6e 2729  'utf8') + b'\n')
+000189a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000189b0: 2020 2020 2070 6963 6b6c 652e 6475 6d70       pickle.dump
+000189c0: 2875 7365 645f 6669 6c65 732c 2066 290a  (used_files, f).
+000189d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000189e0: 2020 2020 7365 6c66 2e73 6176 6528 662c      self.save(f,
+000189f0: 205f 4c4f 4144 5f41 4c4c 4f57 4544 5f4f   _LOAD_ALLOWED_O
+00018a00: 5054 494f 4e53 290a 2020 2020 2020 2020  PTIONS).        
+00018a10: 2020 2020 6578 6365 7074 2049 4f45 7272      except IOErr
+00018a20: 6f72 2061 7320 653a 0a20 2020 2020 2020  or as e:.       
+00018a30: 2020 2020 2020 2020 206c 6f67 6765 722e           logger.
+00018a40: 6578 6365 7074 696f 6e28 2246 6169 6c65  exception("Faile
+00018a50: 6420 746f 2073 6176 6520 4c61 726b 2074  d to save Lark t
+00018a60: 6f20 6361 6368 653a 2025 722e 222c 2063  o cache: %r.", c
+00018a70: 6163 6865 5f66 6e2c 2065 290a 0a20 2020  ache_fn, e)..   
+00018a80: 2069 6620 5f5f 646f 635f 5f3a 0a20 2020   if __doc__:.   
+00018a90: 2020 2020 205f 5f64 6f63 5f5f 202b 3d20       __doc__ += 
+00018aa0: 225c 6e5c 6e22 202b 204c 6172 6b4f 7074  "\n\n" + LarkOpt
+00018ab0: 696f 6e73 2e4f 5054 494f 4e53 5f44 4f43  ions.OPTIONS_DOC
+00018ac0: 0a0a 2020 2020 5f5f 7365 7269 616c 697a  ..    __serializ
+00018ad0: 655f 6669 656c 6473 5f5f 203d 2027 7061  e_fields__ = 'pa
+00018ae0: 7273 6572 272c 2027 7275 6c65 7327 2c20  rser', 'rules', 
+00018af0: 276f 7074 696f 6e73 270a 0a20 2020 2064  'options'..    d
+00018b00: 6566 205f 6275 696c 645f 6c65 7865 7228  ef _build_lexer(
+00018b10: 7365 6c66 2c20 646f 6e74 5f69 676e 6f72  self, dont_ignor
+00018b20: 653a 2062 6f6f 6c3d 4661 6c73 6529 202d  e: bool=False) -
+00018b30: 3e20 4261 7369 634c 6578 6572 3a0a 2020  > BasicLexer:.  
+00018b40: 2020 2020 2020 6c65 7865 725f 636f 6e66        lexer_conf
+00018b50: 203d 2073 656c 662e 6c65 7865 725f 636f   = self.lexer_co
+00018b60: 6e66 0a20 2020 2020 2020 2069 6620 646f  nf.        if do
+00018b70: 6e74 5f69 676e 6f72 653a 0a20 2020 2020  nt_ignore:.     
+00018b80: 2020 2020 2020 2066 726f 6d20 636f 7079         from copy
+00018b90: 2069 6d70 6f72 7420 636f 7079 0a20 2020   import copy.   
+00018ba0: 2020 2020 2020 2020 206c 6578 6572 5f63           lexer_c
+00018bb0: 6f6e 6620 3d20 636f 7079 286c 6578 6572  onf = copy(lexer
+00018bc0: 5f63 6f6e 6629 0a20 2020 2020 2020 2020  _conf).         
+00018bd0: 2020 206c 6578 6572 5f63 6f6e 662e 6967     lexer_conf.ig
+00018be0: 6e6f 7265 203d 2028 290a 2020 2020 2020  nore = ().      
+00018bf0: 2020 7265 7475 726e 2042 6173 6963 4c65    return BasicLe
+00018c00: 7865 7228 6c65 7865 725f 636f 6e66 290a  xer(lexer_conf).
+00018c10: 0a20 2020 2064 6566 205f 7072 6570 6172  .    def _prepar
+00018c20: 655f 6361 6c6c 6261 636b 7328 7365 6c66  e_callbacks(self
+00018c30: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+00018c40: 2020 2073 656c 662e 5f63 616c 6c62 6163     self._callbac
+00018c50: 6b73 203d 207b 7d0a 2020 2020 2020 2020  ks = {}.        
+00018c60: 2323 0a0a 2020 2020 2020 2020 6966 2073  ##..        if s
+00018c70: 656c 662e 6f70 7469 6f6e 732e 616d 6269  elf.options.ambi
+00018c80: 6775 6974 7920 213d 2027 666f 7265 7374  guity != 'forest
+00018c90: 273a 0a20 2020 2020 2020 2020 2020 2073  ':.            s
+00018ca0: 656c 662e 5f70 6172 7365 5f74 7265 655f  elf._parse_tree_
+00018cb0: 6275 696c 6465 7220 3d20 5061 7273 6554  builder = ParseT
+00018cc0: 7265 6542 7569 6c64 6572 280a 2020 2020  reeBuilder(.    
+00018cd0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018ce0: 7365 6c66 2e72 756c 6573 2c0a 2020 2020  self.rules,.    
+00018cf0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018d00: 7365 6c66 2e6f 7074 696f 6e73 2e74 7265  self.options.tre
+00018d10: 655f 636c 6173 7320 6f72 2054 7265 652c  e_class or Tree,
+00018d20: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00018d30: 2020 2020 2073 656c 662e 6f70 7469 6f6e       self.option
+00018d40: 732e 7072 6f70 6167 6174 655f 706f 7369  s.propagate_posi
+00018d50: 7469 6f6e 732c 0a20 2020 2020 2020 2020  tions,.         
+00018d60: 2020 2020 2020 2020 2020 2073 656c 662e             self.
+00018d70: 6f70 7469 6f6e 732e 7061 7273 6572 2021  options.parser !
+00018d80: 3d20 276c 616c 7227 2061 6e64 2073 656c  = 'lalr' and sel
+00018d90: 662e 6f70 7469 6f6e 732e 616d 6269 6775  f.options.ambigu
+00018da0: 6974 7920 3d3d 2027 6578 706c 6963 6974  ity == 'explicit
+00018db0: 272c 0a20 2020 2020 2020 2020 2020 2020  ',.             
+00018dc0: 2020 2020 2020 2073 656c 662e 6f70 7469         self.opti
+00018dd0: 6f6e 732e 6d61 7962 655f 706c 6163 6568  ons.maybe_placeh
+00018de0: 6f6c 6465 7273 0a20 2020 2020 2020 2020  olders.         
+00018df0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00018e00: 2020 2020 2073 656c 662e 5f63 616c 6c62       self._callb
+00018e10: 6163 6b73 203d 2073 656c 662e 5f70 6172  acks = self._par
+00018e20: 7365 5f74 7265 655f 6275 696c 6465 722e  se_tree_builder.
+00018e30: 6372 6561 7465 5f63 616c 6c62 6163 6b28  create_callback(
+00018e40: 7365 6c66 2e6f 7074 696f 6e73 2e74 7261  self.options.tra
+00018e50: 6e73 666f 726d 6572 290a 2020 2020 2020  nsformer).      
+00018e60: 2020 7365 6c66 2e5f 6361 6c6c 6261 636b    self._callback
+00018e70: 732e 7570 6461 7465 285f 6765 745f 6c65  s.update(_get_le
+00018e80: 7865 725f 6361 6c6c 6261 636b 7328 7365  xer_callbacks(se
+00018e90: 6c66 2e6f 7074 696f 6e73 2e74 7261 6e73  lf.options.trans
+00018ea0: 666f 726d 6572 2c20 7365 6c66 2e74 6572  former, self.ter
+00018eb0: 6d69 6e61 6c73 2929 0a0a 2020 2020 6465  minals))..    de
+00018ec0: 6620 5f62 7569 6c64 5f70 6172 7365 7228  f _build_parser(
+00018ed0: 7365 6c66 2920 2d3e 2022 5061 7273 696e  self) -> "Parsin
+00018ee0: 6746 726f 6e74 656e 6422 3a0a 2020 2020  gFrontend":.    
+00018ef0: 2020 2020 7365 6c66 2e5f 7072 6570 6172      self._prepar
+00018f00: 655f 6361 6c6c 6261 636b 7328 290a 2020  e_callbacks().  
+00018f10: 2020 2020 2020 5f76 616c 6964 6174 655f        _validate_
+00018f20: 6672 6f6e 7465 6e64 5f61 7267 7328 7365  frontend_args(se
+00018f30: 6c66 2e6f 7074 696f 6e73 2e70 6172 7365  lf.options.parse
+00018f40: 722c 2073 656c 662e 6f70 7469 6f6e 732e  r, self.options.
+00018f50: 6c65 7865 7229 0a20 2020 2020 2020 2070  lexer).        p
+00018f60: 6172 7365 725f 636f 6e66 203d 2050 6172  arser_conf = Par
+00018f70: 7365 7243 6f6e 6628 7365 6c66 2e72 756c  serConf(self.rul
+00018f80: 6573 2c20 7365 6c66 2e5f 6361 6c6c 6261  es, self._callba
+00018f90: 636b 732c 2073 656c 662e 6f70 7469 6f6e  cks, self.option
+00018fa0: 732e 7374 6172 7429 0a20 2020 2020 2020  s.start).       
+00018fb0: 2072 6574 7572 6e20 5f63 6f6e 7374 7275   return _constru
+00018fc0: 6374 5f70 6172 7369 6e67 5f66 726f 6e74  ct_parsing_front
+00018fd0: 656e 6428 0a20 2020 2020 2020 2020 2020  end(.           
+00018fe0: 2073 656c 662e 6f70 7469 6f6e 732e 7061   self.options.pa
+00018ff0: 7273 6572 2c0a 2020 2020 2020 2020 2020  rser,.          
+00019000: 2020 7365 6c66 2e6f 7074 696f 6e73 2e6c    self.options.l
+00019010: 6578 6572 2c0a 2020 2020 2020 2020 2020  exer,.          
+00019020: 2020 7365 6c66 2e6c 6578 6572 5f63 6f6e    self.lexer_con
+00019030: 662c 0a20 2020 2020 2020 2020 2020 2070  f,.            p
+00019040: 6172 7365 725f 636f 6e66 2c0a 2020 2020  arser_conf,.    
+00019050: 2020 2020 2020 2020 6f70 7469 6f6e 733d          options=
+00019060: 7365 6c66 2e6f 7074 696f 6e73 0a20 2020  self.options.   
+00019070: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+00019080: 7361 7665 2873 656c 662c 2066 2c20 6578  save(self, f, ex
+00019090: 636c 7564 655f 6f70 7469 6f6e 733a 2043  clude_options: C
+000190a0: 6f6c 6c65 6374 696f 6e5b 7374 725d 203d  ollection[str] =
+000190b0: 2028 2929 202d 3e20 4e6f 6e65 3a0a 2020   ()) -> None:.  
+000190c0: 2020 2020 2020 232d 2d0a 2020 2020 2020        #--.      
+000190d0: 2020 6966 2073 656c 662e 6f70 7469 6f6e    if self.option
+000190e0: 732e 7061 7273 6572 2021 3d20 276c 616c  s.parser != 'lal
+000190f0: 7227 3a0a 2020 2020 2020 2020 2020 2020  r':.            
+00019100: 7261 6973 6520 4e6f 7449 6d70 6c65 6d65  raise NotImpleme
+00019110: 6e74 6564 4572 726f 7228 224c 6172 6b2e  ntedError("Lark.
+00019120: 7361 7665 2829 2069 7320 6f6e 6c79 2069  save() is only i
+00019130: 6d70 6c65 6d65 6e74 6564 2066 6f72 2074  mplemented for t
+00019140: 6865 204c 414c 5228 3129 2070 6172 7365  he LALR(1) parse
+00019150: 722e 2229 0a20 2020 2020 2020 2064 6174  r.").        dat
+00019160: 612c 206d 203d 2073 656c 662e 6d65 6d6f  a, m = self.memo
+00019170: 5f73 6572 6961 6c69 7a65 285b 5465 726d  _serialize([Term
+00019180: 696e 616c 4465 662c 2052 756c 655d 290a  inalDef, Rule]).
+00019190: 2020 2020 2020 2020 6966 2065 7863 6c75          if exclu
+000191a0: 6465 5f6f 7074 696f 6e73 3a0a 2020 2020  de_options:.    
+000191b0: 2020 2020 2020 2020 6461 7461 5b22 6f70          data["op
+000191c0: 7469 6f6e 7322 5d20 3d20 7b6e 3a20 7620  tions"] = {n: v 
+000191d0: 666f 7220 6e2c 2076 2069 6e20 6461 7461  for n, v in data
+000191e0: 5b22 6f70 7469 6f6e 7322 5d2e 6974 656d  ["options"].item
+000191f0: 7328 2920 6966 206e 206e 6f74 2069 6e20  s() if n not in 
+00019200: 6578 636c 7564 655f 6f70 7469 6f6e 737d  exclude_options}
+00019210: 0a20 2020 2020 2020 2070 6963 6b6c 652e  .        pickle.
+00019220: 6475 6d70 287b 2764 6174 6127 3a20 6461  dump({'data': da
+00019230: 7461 2c20 276d 656d 6f27 3a20 6d7d 2c20  ta, 'memo': m}, 
+00019240: 662c 2070 726f 746f 636f 6c3d 7069 636b  f, protocol=pick
+00019250: 6c65 2e48 4947 4845 5354 5f50 524f 544f  le.HIGHEST_PROTO
+00019260: 434f 4c29 0a0a 2020 2020 4063 6c61 7373  COL)..    @class
+00019270: 6d65 7468 6f64 0a20 2020 2064 6566 206c  method.    def l
+00019280: 6f61 6428 636c 733a 2054 7970 655b 5f54  oad(cls: Type[_T
+00019290: 5d2c 2066 2920 2d3e 205f 543a 0a20 2020  ], f) -> _T:.   
+000192a0: 2020 2020 2023 2d2d 0a20 2020 2020 2020       #--.       
+000192b0: 2069 6e73 7420 3d20 636c 732e 5f5f 6e65   inst = cls.__ne
+000192c0: 775f 5f28 636c 7329 0a20 2020 2020 2020  w__(cls).       
+000192d0: 2072 6574 7572 6e20 696e 7374 2e5f 6c6f   return inst._lo
+000192e0: 6164 2866 290a 0a20 2020 2064 6566 205f  ad(f)..    def _
+000192f0: 6465 7365 7269 616c 697a 655f 6c65 7865  deserialize_lexe
+00019300: 725f 636f 6e66 2873 656c 662c 2064 6174  r_conf(self, dat
+00019310: 613a 2044 6963 745b 7374 722c 2041 6e79  a: Dict[str, Any
+00019320: 5d2c 206d 656d 6f3a 2044 6963 745b 696e  ], memo: Dict[in
+00019330: 742c 2055 6e69 6f6e 5b54 6572 6d69 6e61  t, Union[Termina
+00019340: 6c44 6566 2c20 5275 6c65 5d5d 2c20 6f70  lDef, Rule]], op
+00019350: 7469 6f6e 733a 204c 6172 6b4f 7074 696f  tions: LarkOptio
+00019360: 6e73 2920 2d3e 204c 6578 6572 436f 6e66  ns) -> LexerConf
+00019370: 3a0a 2020 2020 2020 2020 6c65 7865 725f  :.        lexer_
+00019380: 636f 6e66 203d 204c 6578 6572 436f 6e66  conf = LexerConf
+00019390: 2e64 6573 6572 6961 6c69 7a65 2864 6174  .deserialize(dat
+000193a0: 615b 276c 6578 6572 5f63 6f6e 6627 5d2c  a['lexer_conf'],
+000193b0: 206d 656d 6f29 0a20 2020 2020 2020 206c   memo).        l
+000193c0: 6578 6572 5f63 6f6e 662e 6361 6c6c 6261  exer_conf.callba
+000193d0: 636b 7320 3d20 6f70 7469 6f6e 732e 6c65  cks = options.le
+000193e0: 7865 725f 6361 6c6c 6261 636b 7320 6f72  xer_callbacks or
+000193f0: 207b 7d0a 2020 2020 2020 2020 6c65 7865   {}.        lexe
+00019400: 725f 636f 6e66 2e72 655f 6d6f 6475 6c65  r_conf.re_module
+00019410: 203d 2072 6567 6578 2069 6620 6f70 7469   = regex if opti
+00019420: 6f6e 732e 7265 6765 7820 656c 7365 2072  ons.regex else r
+00019430: 650a 2020 2020 2020 2020 6c65 7865 725f  e.        lexer_
+00019440: 636f 6e66 2e75 7365 5f62 7974 6573 203d  conf.use_bytes =
+00019450: 206f 7074 696f 6e73 2e75 7365 5f62 7974   options.use_byt
+00019460: 6573 0a20 2020 2020 2020 206c 6578 6572  es.        lexer
+00019470: 5f63 6f6e 662e 675f 7265 6765 785f 666c  _conf.g_regex_fl
+00019480: 6167 7320 3d20 6f70 7469 6f6e 732e 675f  ags = options.g_
+00019490: 7265 6765 785f 666c 6167 730a 2020 2020  regex_flags.    
+000194a0: 2020 2020 6c65 7865 725f 636f 6e66 2e73      lexer_conf.s
+000194b0: 6b69 705f 7661 6c69 6461 7469 6f6e 203d  kip_validation =
+000194c0: 2054 7275 650a 2020 2020 2020 2020 6c65   True.        le
+000194d0: 7865 725f 636f 6e66 2e70 6f73 746c 6578  xer_conf.postlex
+000194e0: 203d 206f 7074 696f 6e73 2e70 6f73 746c   = options.postl
+000194f0: 6578 0a20 2020 2020 2020 2072 6574 7572  ex.        retur
+00019500: 6e20 6c65 7865 725f 636f 6e66 0a0a 2020  n lexer_conf..  
+00019510: 2020 6465 6620 5f6c 6f61 6428 7365 6c66    def _load(self
+00019520: 3a20 5f54 2c20 663a 2041 6e79 2c20 2a2a  : _T, f: Any, **
+00019530: 6b77 6172 6773 2920 2d3e 205f 543a 0a20  kwargs) -> _T:. 
+00019540: 2020 2020 2020 2069 6620 6973 696e 7374         if isinst
+00019550: 616e 6365 2866 2c20 6469 6374 293a 0a20  ance(f, dict):. 
+00019560: 2020 2020 2020 2020 2020 2064 203d 2066             d = f
+00019570: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
+00019580: 2020 2020 2020 2020 2020 2064 203d 2070             d = p
+00019590: 6963 6b6c 652e 6c6f 6164 2866 290a 2020  ickle.load(f).  
+000195a0: 2020 2020 2020 6d65 6d6f 5f6a 736f 6e20        memo_json 
+000195b0: 3d20 645b 276d 656d 6f27 5d0a 2020 2020  = d['memo'].    
+000195c0: 2020 2020 6461 7461 203d 2064 5b27 6461      data = d['da
+000195d0: 7461 275d 0a0a 2020 2020 2020 2020 6173  ta']..        as
+000195e0: 7365 7274 206d 656d 6f5f 6a73 6f6e 0a20  sert memo_json. 
+000195f0: 2020 2020 2020 206d 656d 6f20 3d20 5365         memo = Se
+00019600: 7269 616c 697a 654d 656d 6f69 7a65 722e  rializeMemoizer.
+00019610: 6465 7365 7269 616c 697a 6528 6d65 6d6f  deserialize(memo
+00019620: 5f6a 736f 6e2c 207b 2752 756c 6527 3a20  _json, {'Rule': 
+00019630: 5275 6c65 2c20 2754 6572 6d69 6e61 6c44  Rule, 'TerminalD
+00019640: 6566 273a 2054 6572 6d69 6e61 6c44 6566  ef': TerminalDef
+00019650: 7d2c 207b 7d29 0a20 2020 2020 2020 206f  }, {}).        o
+00019660: 7074 696f 6e73 203d 2064 6963 7428 6461  ptions = dict(da
+00019670: 7461 5b27 6f70 7469 6f6e 7327 5d29 0a20  ta['options']). 
+00019680: 2020 2020 2020 2069 6620 2873 6574 286b         if (set(k
+00019690: 7761 7267 7329 202d 205f 4c4f 4144 5f41  wargs) - _LOAD_A
+000196a0: 4c4c 4f57 4544 5f4f 5054 494f 4e53 2920  LLOWED_OPTIONS) 
+000196b0: 2620 7365 7428 4c61 726b 4f70 7469 6f6e  & set(LarkOption
+000196c0: 732e 5f64 6566 6175 6c74 7329 3a0a 2020  s._defaults):.  
+000196d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000196e0: 436f 6e66 6967 7572 6174 696f 6e45 7272  ConfigurationErr
+000196f0: 6f72 2822 536f 6d65 206f 7074 696f 6e73  or("Some options
+00019700: 2061 7265 206e 6f74 2061 6c6c 6f77 6564   are not allowed
+00019710: 2077 6865 6e20 6c6f 6164 696e 6720 6120   when loading a 
+00019720: 5061 7273 6572 3a20 7b7d 220a 2020 2020  Parser: {}".    
+00019730: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019740: 2020 2020 2020 2020 202e 666f 726d 6174           .format
+00019750: 2873 6574 286b 7761 7267 7329 202d 205f  (set(kwargs) - _
+00019760: 4c4f 4144 5f41 4c4c 4f57 4544 5f4f 5054  LOAD_ALLOWED_OPT
+00019770: 494f 4e53 2929 0a20 2020 2020 2020 206f  IONS)).        o
+00019780: 7074 696f 6e73 2e75 7064 6174 6528 6b77  ptions.update(kw
+00019790: 6172 6773 290a 2020 2020 2020 2020 7365  args).        se
+000197a0: 6c66 2e6f 7074 696f 6e73 203d 204c 6172  lf.options = Lar
+000197b0: 6b4f 7074 696f 6e73 2e64 6573 6572 6961  kOptions.deseria
+000197c0: 6c69 7a65 286f 7074 696f 6e73 2c20 6d65  lize(options, me
+000197d0: 6d6f 290a 2020 2020 2020 2020 7365 6c66  mo).        self
+000197e0: 2e72 756c 6573 203d 205b 5275 6c65 2e64  .rules = [Rule.d
+000197f0: 6573 6572 6961 6c69 7a65 2872 2c20 6d65  eserialize(r, me
+00019800: 6d6f 2920 666f 7220 7220 696e 2064 6174  mo) for r in dat
+00019810: 615b 2772 756c 6573 275d 5d0a 2020 2020  a['rules']].    
+00019820: 2020 2020 7365 6c66 2e73 6f75 7263 655f      self.source_
+00019830: 7061 7468 203d 2027 3c64 6573 6572 6961  path = '<deseria
+00019840: 6c69 7a65 643e 270a 2020 2020 2020 2020  lized>'.        
+00019850: 5f76 616c 6964 6174 655f 6672 6f6e 7465  _validate_fronte
+00019860: 6e64 5f61 7267 7328 7365 6c66 2e6f 7074  nd_args(self.opt
+00019870: 696f 6e73 2e70 6172 7365 722c 2073 656c  ions.parser, sel
+00019880: 662e 6f70 7469 6f6e 732e 6c65 7865 7229  f.options.lexer)
+00019890: 0a20 2020 2020 2020 2073 656c 662e 6c65  .        self.le
+000198a0: 7865 725f 636f 6e66 203d 2073 656c 662e  xer_conf = self.
+000198b0: 5f64 6573 6572 6961 6c69 7a65 5f6c 6578  _deserialize_lex
+000198c0: 6572 5f63 6f6e 6628 6461 7461 5b27 7061  er_conf(data['pa
+000198d0: 7273 6572 275d 2c20 6d65 6d6f 2c20 7365  rser'], memo, se
+000198e0: 6c66 2e6f 7074 696f 6e73 290a 2020 2020  lf.options).    
+000198f0: 2020 2020 7365 6c66 2e74 6572 6d69 6e61      self.termina
+00019900: 6c73 203d 2073 656c 662e 6c65 7865 725f  ls = self.lexer_
+00019910: 636f 6e66 2e74 6572 6d69 6e61 6c73 0a20  conf.terminals. 
+00019920: 2020 2020 2020 2073 656c 662e 5f70 7265         self._pre
+00019930: 7061 7265 5f63 616c 6c62 6163 6b73 2829  pare_callbacks()
+00019940: 0a20 2020 2020 2020 2073 656c 662e 5f74  .        self._t
+00019950: 6572 6d69 6e61 6c73 5f64 6963 7420 3d20  erminals_dict = 
+00019960: 7b74 2e6e 616d 653a 2074 2066 6f72 2074  {t.name: t for t
+00019970: 2069 6e20 7365 6c66 2e74 6572 6d69 6e61   in self.termina
+00019980: 6c73 7d0a 2020 2020 2020 2020 7365 6c66  ls}.        self
+00019990: 2e70 6172 7365 7220 3d20 5f64 6573 6572  .parser = _deser
+000199a0: 6961 6c69 7a65 5f70 6172 7369 6e67 5f66  ialize_parsing_f
+000199b0: 726f 6e74 656e 6428 0a20 2020 2020 2020  rontend(.       
+000199c0: 2020 2020 2064 6174 615b 2770 6172 7365       data['parse
+000199d0: 7227 5d2c 0a20 2020 2020 2020 2020 2020  r'],.           
+000199e0: 206d 656d 6f2c 0a20 2020 2020 2020 2020   memo,.         
+000199f0: 2020 2073 656c 662e 6c65 7865 725f 636f     self.lexer_co
+00019a00: 6e66 2c0a 2020 2020 2020 2020 2020 2020  nf,.            
+00019a10: 7365 6c66 2e5f 6361 6c6c 6261 636b 732c  self._callbacks,
+00019a20: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+00019a30: 662e 6f70 7469 6f6e 732c 2020 2323 0a0a  f.options,  ##..
+00019a40: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00019a50: 2020 7265 7475 726e 2073 656c 660a 0a20    return self.. 
+00019a60: 2020 2040 636c 6173 736d 6574 686f 640a     @classmethod.
+00019a70: 2020 2020 6465 6620 5f6c 6f61 645f 6672      def _load_fr
+00019a80: 6f6d 5f64 6963 7428 636c 732c 2064 6174  om_dict(cls, dat
+00019a90: 612c 206d 656d 6f2c 202a 2a6b 7761 7267  a, memo, **kwarg
+00019aa0: 7329 3a0a 2020 2020 2020 2020 696e 7374  s):.        inst
+00019ab0: 203d 2063 6c73 2e5f 5f6e 6577 5f5f 2863   = cls.__new__(c
+00019ac0: 6c73 290a 2020 2020 2020 2020 7265 7475  ls).        retu
+00019ad0: 726e 2069 6e73 742e 5f6c 6f61 6428 7b27  rn inst._load({'
+00019ae0: 6461 7461 273a 2064 6174 612c 2027 6d65  data': data, 'me
+00019af0: 6d6f 273a 206d 656d 6f7d 2c20 2a2a 6b77  mo': memo}, **kw
+00019b00: 6172 6773 290a 0a20 2020 2040 636c 6173  args)..    @clas
+00019b10: 736d 6574 686f 640a 2020 2020 6465 6620  smethod.    def 
+00019b20: 6f70 656e 2863 6c73 3a20 5479 7065 5b5f  open(cls: Type[_
+00019b30: 545d 2c20 6772 616d 6d61 725f 6669 6c65  T], grammar_file
+00019b40: 6e61 6d65 3a20 7374 722c 2072 656c 5f74  name: str, rel_t
+00019b50: 6f3a 204f 7074 696f 6e61 6c5b 7374 725d  o: Optional[str]
+00019b60: 3d4e 6f6e 652c 202a 2a6f 7074 696f 6e73  =None, **options
+00019b70: 2920 2d3e 205f 543a 0a20 2020 2020 2020  ) -> _T:.       
+00019b80: 2023 2d2d 0a20 2020 2020 2020 2069 6620   #--.        if 
+00019b90: 7265 6c5f 746f 3a0a 2020 2020 2020 2020  rel_to:.        
+00019ba0: 2020 2020 6261 7365 7061 7468 203d 206f      basepath = o
+00019bb0: 732e 7061 7468 2e64 6972 6e61 6d65 2872  s.path.dirname(r
+00019bc0: 656c 5f74 6f29 0a20 2020 2020 2020 2020  el_to).         
+00019bd0: 2020 2067 7261 6d6d 6172 5f66 696c 656e     grammar_filen
+00019be0: 616d 6520 3d20 6f73 2e70 6174 682e 6a6f  ame = os.path.jo
+00019bf0: 696e 2862 6173 6570 6174 682c 2067 7261  in(basepath, gra
+00019c00: 6d6d 6172 5f66 696c 656e 616d 6529 0a20  mmar_filename). 
+00019c10: 2020 2020 2020 2077 6974 6820 6f70 656e         with open
+00019c20: 2867 7261 6d6d 6172 5f66 696c 656e 616d  (grammar_filenam
+00019c30: 652c 2065 6e63 6f64 696e 673d 2775 7466  e, encoding='utf
+00019c40: 3827 2920 6173 2066 3a0a 2020 2020 2020  8') as f:.      
+00019c50: 2020 2020 2020 7265 7475 726e 2063 6c73        return cls
+00019c60: 2866 2c20 2a2a 6f70 7469 6f6e 7329 0a0a  (f, **options)..
+00019c70: 2020 2020 4063 6c61 7373 6d65 7468 6f64      @classmethod
+00019c80: 0a20 2020 2064 6566 206f 7065 6e5f 6672  .    def open_fr
+00019c90: 6f6d 5f70 6163 6b61 6765 2863 6c73 3a20  om_package(cls: 
+00019ca0: 5479 7065 5b5f 545d 2c20 7061 636b 6167  Type[_T], packag
+00019cb0: 653a 2073 7472 2c20 6772 616d 6d61 725f  e: str, grammar_
+00019cc0: 7061 7468 3a20 7374 722c 2073 6561 7263  path: str, searc
+00019cd0: 685f 7061 7468 733a 2027 5365 7175 656e  h_paths: 'Sequen
+00019ce0: 6365 5b73 7472 5d27 3d5b 2222 5d2c 202a  ce[str]'=[""], *
+00019cf0: 2a6f 7074 696f 6e73 2920 2d3e 205f 543a  *options) -> _T:
+00019d00: 0a20 2020 2020 2020 2023 2d2d 0a20 2020  .        #--.   
+00019d10: 2020 2020 2070 6163 6b61 6765 5f6c 6f61       package_loa
+00019d20: 6465 7220 3d20 4672 6f6d 5061 636b 6167  der = FromPackag
+00019d30: 654c 6f61 6465 7228 7061 636b 6167 652c  eLoader(package,
+00019d40: 2073 6561 7263 685f 7061 7468 7329 0a20   search_paths). 
+00019d50: 2020 2020 2020 2066 756c 6c5f 7061 7468         full_path
+00019d60: 2c20 7465 7874 203d 2070 6163 6b61 6765  , text = package
+00019d70: 5f6c 6f61 6465 7228 4e6f 6e65 2c20 6772  _loader(None, gr
+00019d80: 616d 6d61 725f 7061 7468 290a 2020 2020  ammar_path).    
+00019d90: 2020 2020 6f70 7469 6f6e 732e 7365 7464      options.setd
+00019da0: 6566 6175 6c74 2827 736f 7572 6365 5f70  efault('source_p
+00019db0: 6174 6827 2c20 6675 6c6c 5f70 6174 6829  ath', full_path)
+00019dc0: 0a20 2020 2020 2020 206f 7074 696f 6e73  .        options
+00019dd0: 2e73 6574 6465 6661 756c 7428 2769 6d70  .setdefault('imp
+00019de0: 6f72 745f 7061 7468 7327 2c20 5b5d 290a  ort_paths', []).
+00019df0: 2020 2020 2020 2020 6f70 7469 6f6e 735b          options[
+00019e00: 2769 6d70 6f72 745f 7061 7468 7327 5d2e  'import_paths'].
+00019e10: 6170 7065 6e64 2870 6163 6b61 6765 5f6c  append(package_l
+00019e20: 6f61 6465 7229 0a20 2020 2020 2020 2072  oader).        r
+00019e30: 6574 7572 6e20 636c 7328 7465 7874 2c20  eturn cls(text, 
+00019e40: 2a2a 6f70 7469 6f6e 7329 0a0a 2020 2020  **options)..    
+00019e50: 6465 6620 5f5f 7265 7072 5f5f 2873 656c  def __repr__(sel
+00019e60: 6629 3a0a 2020 2020 2020 2020 7265 7475  f):.        retu
+00019e70: 726e 2027 4c61 726b 286f 7065 6e28 2572  rn 'Lark(open(%r
+00019e80: 292c 2070 6172 7365 723d 2572 2c20 6c65  ), parser=%r, le
+00019e90: 7865 723d 2572 2c20 2e2e 2e29 2720 2520  xer=%r, ...)' % 
+00019ea0: 2873 656c 662e 736f 7572 6365 5f70 6174  (self.source_pat
+00019eb0: 682c 2073 656c 662e 6f70 7469 6f6e 732e  h, self.options.
+00019ec0: 7061 7273 6572 2c20 7365 6c66 2e6f 7074  parser, self.opt
+00019ed0: 696f 6e73 2e6c 6578 6572 290a 0a0a 2020  ions.lexer)...  
+00019ee0: 2020 6465 6620 6c65 7828 7365 6c66 2c20    def lex(self, 
+00019ef0: 7465 7874 3a20 7374 722c 2064 6f6e 745f  text: str, dont_
+00019f00: 6967 6e6f 7265 3a20 626f 6f6c 3d46 616c  ignore: bool=Fal
+00019f10: 7365 2920 2d3e 2049 7465 7261 746f 725b  se) -> Iterator[
+00019f20: 546f 6b65 6e5d 3a0a 2020 2020 2020 2020  Token]:.        
+00019f30: 232d 2d0a 2020 2020 2020 2020 6c65 7865  #--.        lexe
+00019f40: 723a 204c 6578 6572 0a20 2020 2020 2020  r: Lexer.       
+00019f50: 2069 6620 6e6f 7420 6861 7361 7474 7228   if not hasattr(
+00019f60: 7365 6c66 2c20 276c 6578 6572 2729 206f  self, 'lexer') o
+00019f70: 7220 646f 6e74 5f69 676e 6f72 653a 0a20  r dont_ignore:. 
+00019f80: 2020 2020 2020 2020 2020 206c 6578 6572             lexer
+00019f90: 203d 2073 656c 662e 5f62 7569 6c64 5f6c   = self._build_l
+00019fa0: 6578 6572 2864 6f6e 745f 6967 6e6f 7265  exer(dont_ignore
+00019fb0: 290a 2020 2020 2020 2020 656c 7365 3a0a  ).        else:.
+00019fc0: 2020 2020 2020 2020 2020 2020 6c65 7865              lexe
+00019fd0: 7220 3d20 7365 6c66 2e6c 6578 6572 0a20  r = self.lexer. 
+00019fe0: 2020 2020 2020 206c 6578 6572 5f74 6872         lexer_thr
+00019ff0: 6561 6420 3d20 4c65 7865 7254 6872 6561  ead = LexerThrea
+0001a000: 642e 6672 6f6d 5f74 6578 7428 6c65 7865  d.from_text(lexe
+0001a010: 722c 2074 6578 7429 0a20 2020 2020 2020  r, text).       
+0001a020: 2073 7472 6561 6d20 3d20 6c65 7865 725f   stream = lexer_
+0001a030: 7468 7265 6164 2e6c 6578 284e 6f6e 6529  thread.lex(None)
+0001a040: 0a20 2020 2020 2020 2069 6620 7365 6c66  .        if self
+0001a050: 2e6f 7074 696f 6e73 2e70 6f73 746c 6578  .options.postlex
+0001a060: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
+0001a070: 7475 726e 2073 656c 662e 6f70 7469 6f6e  turn self.option
+0001a080: 732e 706f 7374 6c65 782e 7072 6f63 6573  s.postlex.proces
+0001a090: 7328 7374 7265 616d 290a 2020 2020 2020  s(stream).      
+0001a0a0: 2020 7265 7475 726e 2073 7472 6561 6d0a    return stream.
+0001a0b0: 0a20 2020 2064 6566 2067 6574 5f74 6572  .    def get_ter
+0001a0c0: 6d69 6e61 6c28 7365 6c66 2c20 6e61 6d65  minal(self, name
+0001a0d0: 3a20 7374 7229 202d 3e20 5465 726d 696e  : str) -> Termin
+0001a0e0: 616c 4465 663a 0a20 2020 2020 2020 2023  alDef:.        #
+0001a0f0: 2d2d 0a20 2020 2020 2020 2072 6574 7572  --.        retur
+0001a100: 6e20 7365 6c66 2e5f 7465 726d 696e 616c  n self._terminal
+0001a110: 735f 6469 6374 5b6e 616d 655d 0a0a 2020  s_dict[name]..  
+0001a120: 2020 6465 6620 7061 7273 655f 696e 7465    def parse_inte
+0001a130: 7261 6374 6976 6528 7365 6c66 2c20 7465  ractive(self, te
+0001a140: 7874 3a20 4f70 7469 6f6e 616c 5b73 7472  xt: Optional[str
+0001a150: 5d3d 4e6f 6e65 2c20 7374 6172 743a 204f  ]=None, start: O
+0001a160: 7074 696f 6e61 6c5b 7374 725d 3d4e 6f6e  ptional[str]=Non
+0001a170: 6529 202d 3e20 2749 6e74 6572 6163 7469  e) -> 'Interacti
+0001a180: 7665 5061 7273 6572 273a 0a20 2020 2020  veParser':.     
+0001a190: 2020 2023 2d2d 0a20 2020 2020 2020 2072     #--.        r
+0001a1a0: 6574 7572 6e20 7365 6c66 2e70 6172 7365  eturn self.parse
+0001a1b0: 722e 7061 7273 655f 696e 7465 7261 6374  r.parse_interact
+0001a1c0: 6976 6528 7465 7874 2c20 7374 6172 743d  ive(text, start=
+0001a1d0: 7374 6172 7429 0a0a 2020 2020 6465 6620  start)..    def 
+0001a1e0: 7061 7273 6528 7365 6c66 2c20 7465 7874  parse(self, text
+0001a1f0: 3a20 7374 722c 2073 7461 7274 3a20 4f70  : str, start: Op
+0001a200: 7469 6f6e 616c 5b73 7472 5d3d 4e6f 6e65  tional[str]=None
+0001a210: 2c20 6f6e 5f65 7272 6f72 3a20 274f 7074  , on_error: 'Opt
+0001a220: 696f 6e61 6c5b 4361 6c6c 6162 6c65 5b5b  ional[Callable[[
+0001a230: 556e 6578 7065 6374 6564 496e 7075 745d  UnexpectedInput]
+0001a240: 2c20 626f 6f6c 5d5d 273d 4e6f 6e65 2920  , bool]]'=None) 
+0001a250: 2d3e 2027 5061 7273 6554 7265 6527 3a0a  -> 'ParseTree':.
+0001a260: 2020 2020 2020 2020 232d 2d0a 2020 2020          #--.    
+0001a270: 2020 2020 7265 7475 726e 2073 656c 662e      return self.
+0001a280: 7061 7273 6572 2e70 6172 7365 2874 6578  parser.parse(tex
+0001a290: 742c 2073 7461 7274 3d73 7461 7274 2c20  t, start=start, 
+0001a2a0: 6f6e 5f65 7272 6f72 3d6f 6e5f 6572 726f  on_error=on_erro
+0001a2b0: 7229 0a0a 0a0a 0a63 6c61 7373 2044 6564  r).....class Ded
+0001a2c0: 656e 7445 7272 6f72 284c 6172 6b45 7272  entError(LarkErr
+0001a2d0: 6f72 293a 0a20 2020 2070 6173 730a 0a63  or):.    pass..c
+0001a2e0: 6c61 7373 2049 6e64 656e 7465 7228 506f  lass Indenter(Po
+0001a2f0: 7374 4c65 782c 2041 4243 293a 0a20 2020  stLex, ABC):.   
+0001a300: 2070 6172 656e 5f6c 6576 656c 3a20 696e   paren_level: in
+0001a310: 740a 2020 2020 696e 6465 6e74 5f6c 6576  t.    indent_lev
+0001a320: 656c 3a20 4c69 7374 5b69 6e74 5d0a 0a20  el: List[int].. 
+0001a330: 2020 2064 6566 205f 5f69 6e69 745f 5f28     def __init__(
+0001a340: 7365 6c66 2920 2d3e 204e 6f6e 653a 0a20  self) -> None:. 
+0001a350: 2020 2020 2020 2073 656c 662e 7061 7265         self.pare
+0001a360: 6e5f 6c65 7665 6c20 3d20 300a 2020 2020  n_level = 0.    
+0001a370: 2020 2020 7365 6c66 2e69 6e64 656e 745f      self.indent_
+0001a380: 6c65 7665 6c20 3d20 5b30 5d0a 2020 2020  level = [0].    
+0001a390: 2020 2020 6173 7365 7274 2073 656c 662e      assert self.
+0001a3a0: 7461 625f 6c65 6e20 3e20 300a 0a20 2020  tab_len > 0..   
+0001a3b0: 2064 6566 2068 616e 646c 655f 4e4c 2873   def handle_NL(s
+0001a3c0: 656c 662c 2074 6f6b 656e 3a20 546f 6b65  elf, token: Toke
+0001a3d0: 6e29 202d 3e20 4974 6572 6174 6f72 5b54  n) -> Iterator[T
+0001a3e0: 6f6b 656e 5d3a 0a20 2020 2020 2020 2069  oken]:.        i
+0001a3f0: 6620 7365 6c66 2e70 6172 656e 5f6c 6576  f self.paren_lev
+0001a400: 656c 203e 2030 3a0a 2020 2020 2020 2020  el > 0:.        
+0001a410: 2020 2020 7265 7475 726e 0a0a 2020 2020      return..    
+0001a420: 2020 2020 7969 656c 6420 746f 6b65 6e0a      yield token.
+0001a430: 0a20 2020 2020 2020 2069 6e64 656e 745f  .        indent_
+0001a440: 7374 7220 3d20 746f 6b65 6e2e 7273 706c  str = token.rspl
+0001a450: 6974 2827 5c6e 272c 2031 295b 315d 2023  it('\n', 1)[1] #
+0001a460: 230a 0a20 2020 2020 2020 2069 6e64 656e  #..        inden
+0001a470: 7420 3d20 696e 6465 6e74 5f73 7472 2e63  t = indent_str.c
+0001a480: 6f75 6e74 2827 2027 2920 2b20 696e 6465  ount(' ') + inde
+0001a490: 6e74 5f73 7472 2e63 6f75 6e74 2827 5c74  nt_str.count('\t
+0001a4a0: 2729 202a 2073 656c 662e 7461 625f 6c65  ') * self.tab_le
+0001a4b0: 6e0a 0a20 2020 2020 2020 2069 6620 696e  n..        if in
+0001a4c0: 6465 6e74 203e 2073 656c 662e 696e 6465  dent > self.inde
+0001a4d0: 6e74 5f6c 6576 656c 5b2d 315d 3a0a 2020  nt_level[-1]:.  
+0001a4e0: 2020 2020 2020 2020 2020 7365 6c66 2e69            self.i
+0001a4f0: 6e64 656e 745f 6c65 7665 6c2e 6170 7065  ndent_level.appe
+0001a500: 6e64 2869 6e64 656e 7429 0a20 2020 2020  nd(indent).     
+0001a510: 2020 2020 2020 2079 6965 6c64 2054 6f6b         yield Tok
+0001a520: 656e 2e6e 6577 5f62 6f72 726f 775f 706f  en.new_borrow_po
+0001a530: 7328 7365 6c66 2e49 4e44 454e 545f 7479  s(self.INDENT_ty
+0001a540: 7065 2c20 696e 6465 6e74 5f73 7472 2c20  pe, indent_str, 
+0001a550: 746f 6b65 6e29 0a20 2020 2020 2020 2065  token).        e
+0001a560: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001a570: 2077 6869 6c65 2069 6e64 656e 7420 3c20   while indent < 
+0001a580: 7365 6c66 2e69 6e64 656e 745f 6c65 7665  self.indent_leve
+0001a590: 6c5b 2d31 5d3a 0a20 2020 2020 2020 2020  l[-1]:.         
+0001a5a0: 2020 2020 2020 2073 656c 662e 696e 6465         self.inde
+0001a5b0: 6e74 5f6c 6576 656c 2e70 6f70 2829 0a20  nt_level.pop(). 
+0001a5c0: 2020 2020 2020 2020 2020 2020 2020 2079                 y
+0001a5d0: 6965 6c64 2054 6f6b 656e 2e6e 6577 5f62  ield Token.new_b
+0001a5e0: 6f72 726f 775f 706f 7328 7365 6c66 2e44  orrow_pos(self.D
+0001a5f0: 4544 454e 545f 7479 7065 2c20 696e 6465  EDENT_type, inde
+0001a600: 6e74 5f73 7472 2c20 746f 6b65 6e29 0a0a  nt_str, token)..
+0001a610: 2020 2020 2020 2020 2020 2020 6966 2069              if i
+0001a620: 6e64 656e 7420 213d 2073 656c 662e 696e  ndent != self.in
+0001a630: 6465 6e74 5f6c 6576 656c 5b2d 315d 3a0a  dent_level[-1]:.
+0001a640: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a650: 7261 6973 6520 4465 6465 6e74 4572 726f  raise DedentErro
+0001a660: 7228 2755 6e65 7870 6563 7465 6420 6465  r('Unexpected de
+0001a670: 6465 6e74 2074 6f20 636f 6c75 6d6e 2025  dent to column %
+0001a680: 732e 2045 7870 6563 7465 6420 6465 6465  s. Expected dede
+0001a690: 6e74 2074 6f20 2573 2720 2520 2869 6e64  nt to %s' % (ind
+0001a6a0: 656e 742c 2073 656c 662e 696e 6465 6e74  ent, self.indent
+0001a6b0: 5f6c 6576 656c 5b2d 315d 2929 0a0a 2020  _level[-1]))..  
+0001a6c0: 2020 6465 6620 5f70 726f 6365 7373 2873    def _process(s
+0001a6d0: 656c 662c 2073 7472 6561 6d29 3a0a 2020  elf, stream):.  
+0001a6e0: 2020 2020 2020 666f 7220 746f 6b65 6e20        for token 
+0001a6f0: 696e 2073 7472 6561 6d3a 0a20 2020 2020  in stream:.     
+0001a700: 2020 2020 2020 2069 6620 746f 6b65 6e2e         if token.
+0001a710: 7479 7065 203d 3d20 7365 6c66 2e4e 4c5f  type == self.NL_
+0001a720: 7479 7065 3a0a 2020 2020 2020 2020 2020  type:.          
+0001a730: 2020 2020 2020 7969 656c 6420 6672 6f6d        yield from
+0001a740: 2073 656c 662e 6861 6e64 6c65 5f4e 4c28   self.handle_NL(
+0001a750: 746f 6b65 6e29 0a20 2020 2020 2020 2020  token).         
+0001a760: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+0001a770: 2020 2020 2020 2020 2079 6965 6c64 2074           yield t
+0001a780: 6f6b 656e 0a0a 2020 2020 2020 2020 2020  oken..          
+0001a790: 2020 6966 2074 6f6b 656e 2e74 7970 6520    if token.type 
+0001a7a0: 696e 2073 656c 662e 4f50 454e 5f50 4152  in self.OPEN_PAR
+0001a7b0: 454e 5f74 7970 6573 3a0a 2020 2020 2020  EN_types:.      
+0001a7c0: 2020 2020 2020 2020 2020 7365 6c66 2e70            self.p
+0001a7d0: 6172 656e 5f6c 6576 656c 202b 3d20 310a  aren_level += 1.
+0001a7e0: 2020 2020 2020 2020 2020 2020 656c 6966              elif
+0001a7f0: 2074 6f6b 656e 2e74 7970 6520 696e 2073   token.type in s
+0001a800: 656c 662e 434c 4f53 455f 5041 5245 4e5f  elf.CLOSE_PAREN_
+0001a810: 7479 7065 733a 0a20 2020 2020 2020 2020  types:.         
+0001a820: 2020 2020 2020 2073 656c 662e 7061 7265         self.pare
+0001a830: 6e5f 6c65 7665 6c20 2d3d 2031 0a20 2020  n_level -= 1.   
+0001a840: 2020 2020 2020 2020 2020 2020 2061 7373               ass
+0001a850: 6572 7420 7365 6c66 2e70 6172 656e 5f6c  ert self.paren_l
+0001a860: 6576 656c 203e 3d20 300a 0a20 2020 2020  evel >= 0..     
+0001a870: 2020 2077 6869 6c65 206c 656e 2873 656c     while len(sel
+0001a880: 662e 696e 6465 6e74 5f6c 6576 656c 2920  f.indent_level) 
+0001a890: 3e20 313a 0a20 2020 2020 2020 2020 2020  > 1:.           
+0001a8a0: 2073 656c 662e 696e 6465 6e74 5f6c 6576   self.indent_lev
+0001a8b0: 656c 2e70 6f70 2829 0a20 2020 2020 2020  el.pop().       
+0001a8c0: 2020 2020 2079 6965 6c64 2054 6f6b 656e       yield Token
+0001a8d0: 2873 656c 662e 4445 4445 4e54 5f74 7970  (self.DEDENT_typ
+0001a8e0: 652c 2027 2729 0a0a 2020 2020 2020 2020  e, '')..        
+0001a8f0: 6173 7365 7274 2073 656c 662e 696e 6465  assert self.inde
+0001a900: 6e74 5f6c 6576 656c 203d 3d20 5b30 5d2c  nt_level == [0],
+0001a910: 2073 656c 662e 696e 6465 6e74 5f6c 6576   self.indent_lev
+0001a920: 656c 0a0a 2020 2020 6465 6620 7072 6f63  el..    def proc
+0001a930: 6573 7328 7365 6c66 2c20 7374 7265 616d  ess(self, stream
+0001a940: 293a 0a20 2020 2020 2020 2073 656c 662e  ):.        self.
+0001a950: 7061 7265 6e5f 6c65 7665 6c20 3d20 300a  paren_level = 0.
+0001a960: 2020 2020 2020 2020 7365 6c66 2e69 6e64          self.ind
+0001a970: 656e 745f 6c65 7665 6c20 3d20 5b30 5d0a  ent_level = [0].
+0001a980: 2020 2020 2020 2020 7265 7475 726e 2073          return s
+0001a990: 656c 662e 5f70 726f 6365 7373 2873 7472  elf._process(str
+0001a9a0: 6561 6d29 0a0a 2020 2020 2323 0a0a 2020  eam)..    ##..  
+0001a9b0: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
+0001a9c0: 6465 6620 616c 7761 7973 5f61 6363 6570  def always_accep
+0001a9d0: 7428 7365 6c66 293a 0a20 2020 2020 2020  t(self):.       
+0001a9e0: 2072 6574 7572 6e20 2873 656c 662e 4e4c   return (self.NL
+0001a9f0: 5f74 7970 652c 290a 0a20 2020 2040 7072  _type,)..    @pr
+0001aa00: 6f70 6572 7479 0a20 2020 2040 6162 7374  operty.    @abst
+0001aa10: 7261 6374 6d65 7468 6f64 0a20 2020 2064  ractmethod.    d
+0001aa20: 6566 204e 4c5f 7479 7065 2873 656c 6629  ef NL_type(self)
+0001aa30: 202d 3e20 7374 723a 0a20 2020 2020 2020   -> str:.       
+0001aa40: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
+0001aa50: 656e 7465 6445 7272 6f72 2829 0a0a 2020  entedError()..  
+0001aa60: 2020 4070 726f 7065 7274 790a 2020 2020    @property.    
+0001aa70: 4061 6273 7472 6163 746d 6574 686f 640a  @abstractmethod.
+0001aa80: 2020 2020 6465 6620 4f50 454e 5f50 4152      def OPEN_PAR
+0001aa90: 454e 5f74 7970 6573 2873 656c 6629 202d  EN_types(self) -
+0001aaa0: 3e20 4c69 7374 5b73 7472 5d3a 0a20 2020  > List[str]:.   
+0001aab0: 2020 2020 2072 6169 7365 204e 6f74 496d       raise NotIm
+0001aac0: 706c 656d 656e 7465 6445 7272 6f72 2829  plementedError()
+0001aad0: 0a0a 2020 2020 4070 726f 7065 7274 790a  ..    @property.
+0001aae0: 2020 2020 4061 6273 7472 6163 746d 6574      @abstractmet
+0001aaf0: 686f 640a 2020 2020 6465 6620 434c 4f53  hod.    def CLOS
+0001ab00: 455f 5041 5245 4e5f 7479 7065 7328 7365  E_PAREN_types(se
+0001ab10: 6c66 2920 2d3e 204c 6973 745b 7374 725d  lf) -> List[str]
+0001ab20: 3a0a 2020 2020 2020 2020 7261 6973 6520  :.        raise 
+0001ab30: 4e6f 7449 6d70 6c65 6d65 6e74 6564 4572  NotImplementedEr
+0001ab40: 726f 7228 290a 0a20 2020 2040 7072 6f70  ror()..    @prop
+0001ab50: 6572 7479 0a20 2020 2040 6162 7374 7261  erty.    @abstra
+0001ab60: 6374 6d65 7468 6f64 0a20 2020 2064 6566  ctmethod.    def
+0001ab70: 2049 4e44 454e 545f 7479 7065 2873 656c   INDENT_type(sel
+0001ab80: 6629 202d 3e20 7374 723a 0a20 2020 2020  f) -> str:.     
+0001ab90: 2020 2072 6169 7365 204e 6f74 496d 706c     raise NotImpl
+0001aba0: 656d 656e 7465 6445 7272 6f72 2829 0a0a  ementedError()..
+0001abb0: 2020 2020 4070 726f 7065 7274 790a 2020      @property.  
+0001abc0: 2020 4061 6273 7472 6163 746d 6574 686f    @abstractmetho
+0001abd0: 640a 2020 2020 6465 6620 4445 4445 4e54  d.    def DEDENT
+0001abe0: 5f74 7970 6528 7365 6c66 2920 2d3e 2073  _type(self) -> s
+0001abf0: 7472 3a0a 2020 2020 2020 2020 7261 6973  tr:.        rais
+0001ac00: 6520 4e6f 7449 6d70 6c65 6d65 6e74 6564  e NotImplemented
+0001ac10: 4572 726f 7228 290a 0a20 2020 2040 7072  Error()..    @pr
+0001ac20: 6f70 6572 7479 0a20 2020 2040 6162 7374  operty.    @abst
+0001ac30: 7261 6374 6d65 7468 6f64 0a20 2020 2064  ractmethod.    d
+0001ac40: 6566 2074 6162 5f6c 656e 2873 656c 6629  ef tab_len(self)
+0001ac50: 202d 3e20 696e 743a 0a20 2020 2020 2020   -> int:.       
+0001ac60: 2072 6169 7365 204e 6f74 496d 706c 656d   raise NotImplem
+0001ac70: 656e 7465 6445 7272 6f72 2829 0a0a 0a63  entedError()...c
+0001ac80: 6c61 7373 2050 7974 686f 6e49 6e64 656e  lass PythonInden
+0001ac90: 7465 7228 496e 6465 6e74 6572 293a 0a20  ter(Indenter):. 
+0001aca0: 2020 204e 4c5f 7479 7065 203d 2027 5f4e     NL_type = '_N
+0001acb0: 4557 4c49 4e45 270a 2020 2020 4f50 454e  EWLINE'.    OPEN
+0001acc0: 5f50 4152 454e 5f74 7970 6573 203d 205b  _PAREN_types = [
+0001acd0: 274c 5041 5227 2c20 274c 5351 4227 2c20  'LPAR', 'LSQB', 
+0001ace0: 274c 4252 4143 4527 5d0a 2020 2020 434c  'LBRACE'].    CL
+0001acf0: 4f53 455f 5041 5245 4e5f 7479 7065 7320  OSE_PAREN_types 
+0001ad00: 3d20 5b27 5250 4152 272c 2027 5253 5142  = ['RPAR', 'RSQB
+0001ad10: 272c 2027 5242 5241 4345 275d 0a20 2020  ', 'RBRACE'].   
+0001ad20: 2049 4e44 454e 545f 7479 7065 203d 2027   INDENT_type = '
+0001ad30: 5f49 4e44 454e 5427 0a20 2020 2044 4544  _INDENT'.    DED
+0001ad40: 454e 545f 7479 7065 203d 2027 5f44 4544  ENT_type = '_DED
+0001ad50: 454e 5427 0a20 2020 2074 6162 5f6c 656e  ENT'.    tab_len
+0001ad60: 203d 2038 0a0a 0a69 6d70 6f72 7420 7069   = 8...import pi
+0001ad70: 636b 6c65 2c20 7a6c 6962 2c20 6261 7365  ckle, zlib, base
+0001ad80: 3634 0a44 4154 4120 3d20 280a 7b27 7061  64.DATA = (.{'pa
+0001ad90: 7273 6572 273a 207b 276c 6578 6572 5f63  rser': {'lexer_c
+0001ada0: 6f6e 6627 3a20 7b27 7465 726d 696e 616c  onf': {'terminal
+0001adb0: 7327 3a20 5b7b 2740 273a 2030 7d2c 207b  s': [{'@': 0}, {
+0001adc0: 2740 273a 2031 7d2c 207b 2740 273a 2032  '@': 1}, {'@': 2
+0001add0: 7d2c 207b 2740 273a 2033 7d2c 207b 2740  }, {'@': 3}, {'@
+0001ade0: 273a 2034 7d2c 207b 2740 273a 2035 7d2c  ': 4}, {'@': 5},
+0001adf0: 207b 2740 273a 2036 7d2c 207b 2740 273a   {'@': 6}, {'@':
+0001ae00: 2037 7d2c 207b 2740 273a 2038 7d2c 207b   7}, {'@': 8}, {
+0001ae10: 2740 273a 2039 7d2c 207b 2740 273a 2031  '@': 9}, {'@': 1
+0001ae20: 307d 2c20 7b27 4027 3a20 3131 7d2c 207b  0}, {'@': 11}, {
+0001ae30: 2740 273a 2031 327d 2c20 7b27 4027 3a20  '@': 12}, {'@': 
+0001ae40: 3133 7d2c 207b 2740 273a 2031 347d 2c20  13}, {'@': 14}, 
+0001ae50: 7b27 4027 3a20 3135 7d2c 207b 2740 273a  {'@': 15}, {'@':
+0001ae60: 2031 367d 2c20 7b27 4027 3a20 3137 7d2c   16}, {'@': 17},
+0001ae70: 207b 2740 273a 2031 387d 2c20 7b27 4027   {'@': 18}, {'@'
+0001ae80: 3a20 3139 7d2c 207b 2740 273a 2032 307d  : 19}, {'@': 20}
+0001ae90: 2c20 7b27 4027 3a20 3231 7d2c 207b 2740  , {'@': 21}, {'@
+0001aea0: 273a 2032 327d 5d2c 2027 6967 6e6f 7265  ': 22}], 'ignore
+0001aeb0: 273a 205b 5d2c 2027 675f 7265 6765 785f  ': [], 'g_regex_
+0001aec0: 666c 6167 7327 3a20 302c 2027 7573 655f  flags': 0, 'use_
+0001aed0: 6279 7465 7327 3a20 4661 6c73 652c 2027  bytes': False, '
+0001aee0: 6c65 7865 725f 7479 7065 273a 2027 636f  lexer_type': 'co
+0001aef0: 6e74 6578 7475 616c 272c 2027 5f5f 7479  ntextual', '__ty
+0001af00: 7065 5f5f 273a 2027 4c65 7865 7243 6f6e  pe__': 'LexerCon
+0001af10: 6627 7d2c 2027 7061 7273 6572 5f63 6f6e  f'}, 'parser_con
+0001af20: 6627 3a20 7b27 7275 6c65 7327 3a20 5b7b  f': {'rules': [{
+0001af30: 2740 273a 2032 337d 2c20 7b27 4027 3a20  '@': 23}, {'@': 
+0001af40: 3234 7d2c 207b 2740 273a 2032 357d 2c20  24}, {'@': 25}, 
+0001af50: 7b27 4027 3a20 3236 7d2c 207b 2740 273a  {'@': 26}, {'@':
+0001af60: 2032 377d 2c20 7b27 4027 3a20 3238 7d2c   27}, {'@': 28},
+0001af70: 207b 2740 273a 2032 397d 2c20 7b27 4027   {'@': 29}, {'@'
+0001af80: 3a20 3330 7d2c 207b 2740 273a 2033 317d  : 30}, {'@': 31}
+0001af90: 2c20 7b27 4027 3a20 3332 7d2c 207b 2740  , {'@': 32}, {'@
+0001afa0: 273a 2033 337d 2c20 7b27 4027 3a20 3334  ': 33}, {'@': 34
+0001afb0: 7d2c 207b 2740 273a 2033 357d 2c20 7b27  }, {'@': 35}, {'
+0001afc0: 4027 3a20 3336 7d2c 207b 2740 273a 2033  @': 36}, {'@': 3
+0001afd0: 377d 2c20 7b27 4027 3a20 3338 7d2c 207b  7}, {'@': 38}, {
+0001afe0: 2740 273a 2033 397d 2c20 7b27 4027 3a20  '@': 39}, {'@': 
+0001aff0: 3430 7d2c 207b 2740 273a 2034 317d 2c20  40}, {'@': 41}, 
+0001b000: 7b27 4027 3a20 3432 7d2c 207b 2740 273a  {'@': 42}, {'@':
+0001b010: 2034 337d 2c20 7b27 4027 3a20 3434 7d2c   43}, {'@': 44},
+0001b020: 207b 2740 273a 2034 357d 2c20 7b27 4027   {'@': 45}, {'@'
+0001b030: 3a20 3436 7d2c 207b 2740 273a 2034 377d  : 46}, {'@': 47}
+0001b040: 2c20 7b27 4027 3a20 3438 7d2c 207b 2740  , {'@': 48}, {'@
+0001b050: 273a 2034 397d 2c20 7b27 4027 3a20 3530  ': 49}, {'@': 50
+0001b060: 7d2c 207b 2740 273a 2035 317d 2c20 7b27  }, {'@': 51}, {'
+0001b070: 4027 3a20 3532 7d2c 207b 2740 273a 2035  @': 52}, {'@': 5
+0001b080: 337d 2c20 7b27 4027 3a20 3534 7d2c 207b  3}, {'@': 54}, {
+0001b090: 2740 273a 2035 357d 2c20 7b27 4027 3a20  '@': 55}, {'@': 
+0001b0a0: 3536 7d2c 207b 2740 273a 2035 377d 2c20  56}, {'@': 57}, 
+0001b0b0: 7b27 4027 3a20 3538 7d2c 207b 2740 273a  {'@': 58}, {'@':
+0001b0c0: 2035 397d 2c20 7b27 4027 3a20 3630 7d2c   59}, {'@': 60},
+0001b0d0: 207b 2740 273a 2036 317d 2c20 7b27 4027   {'@': 61}, {'@'
+0001b0e0: 3a20 3632 7d2c 207b 2740 273a 2036 337d  : 62}, {'@': 63}
+0001b0f0: 5d2c 2027 7374 6172 7427 3a20 5b27 7374  ], 'start': ['st
+0001b100: 6172 7427 5d2c 2027 7061 7273 6572 5f74  art'], 'parser_t
+0001b110: 7970 6527 3a20 276c 616c 7227 2c20 275f  ype': 'lalr', '_
+0001b120: 5f74 7970 655f 5f27 3a20 2750 6172 7365  _type__': 'Parse
+0001b130: 7243 6f6e 6627 7d2c 2027 7061 7273 6572  rConf'}, 'parser
+0001b140: 273a 207b 2774 6f6b 656e 7327 3a20 7b30  ': {'tokens': {0
+0001b150: 3a20 274c 5041 5227 2c20 313a 2027 4348  : 'LPAR', 1: 'CH
+0001b160: 4152 4143 5445 525f 434c 4153 5327 2c20  ARACTER_CLASS', 
+0001b170: 323a 2027 4241 434b 5245 4645 5245 4e43  2: 'BACKREFERENC
+0001b180: 4527 2c20 333a 2027 7375 6265 7870 7265  E', 3: 'subexpre
+0001b190: 7373 696f 6e27 2c20 343a 2027 6d61 7463  ssion', 4: 'matc
+0001b1a0: 6869 7465 6d27 2c20 353a 2027 6d61 7463  hitem', 5: 'matc
+0001b1b0: 6827 2c20 363a 2027 4d41 5443 485f 414e  h', 6: 'MATCH_AN
+0001b1c0: 595f 4348 4152 4143 5445 5227 2c20 373a  Y_CHARACTER', 7:
+0001b1d0: 2027 7375 6265 7870 7265 7373 696f 6e69   'subexpressioni
+0001b1e0: 7465 6d27 2c20 383a 2027 4c53 5142 272c  tem', 8: 'LSQB',
+0001b1f0: 2039 3a20 276d 6174 6368 5f63 6861 7261   9: 'match_chara
+0001b200: 6374 6572 5f63 6c61 7373 272c 2031 303a  cter_class', 10:
+0001b210: 2027 6578 7072 6573 7369 6f6e 272c 2031   'expression', 1
+0001b220: 313a 2027 6772 6f75 7027 2c20 3132 3a20  1: 'group', 12: 
+0001b230: 2741 4e43 484f 5227 2c20 3133 3a20 2763  'ANCHOR', 13: 'c
+0001b240: 6861 7261 6374 6572 5f63 6c61 7373 5f66  haracter_class_f
+0001b250: 726f 6d5f 756e 6963 6f64 655f 6361 7465  rom_unicode_cate
+0001b260: 676f 7279 272c 2031 343a 2027 4348 4152  gory', 14: 'CHAR
+0001b270: 272c 2031 353a 2027 5f5f 7375 6265 7870  ', 15: '__subexp
+0001b280: 7265 7373 696f 6e5f 706c 7573 5f30 272c  ression_plus_0',
+0001b290: 2031 363a 2027 5f5f 414e 4f4e 5f30 272c   16: '__ANON_0',
+0001b2a0: 2031 373a 2027 6368 6172 6163 7465 725f   17: 'character_
+0001b2b0: 6772 6f75 7027 2c20 3138 3a20 2724 454e  group', 18: '$EN
+0001b2c0: 4427 2c20 3139 3a20 2752 4252 4143 4527  D', 19: 'RBRACE'
+0001b2d0: 2c20 3230 3a20 2749 4e54 4547 4552 272c  , 20: 'INTEGER',
+0001b2e0: 2032 313a 2027 5250 4152 272c 2032 323a   21: 'RPAR', 22:
+0001b2f0: 2027 5642 4152 272c 2032 333a 2027 5a45   'VBAR', 23: 'ZE
+0001b300: 524f 5f4f 525f 4d4f 5245 5f51 5541 4e54  RO_OR_MORE_QUANT
+0001b310: 4946 4945 5227 2c20 3234 3a20 274c 4252  IFIER', 24: 'LBR
+0001b320: 4143 4527 2c20 3235 3a20 275a 4552 4f5f  ACE', 25: 'ZERO_
+0001b330: 4f52 5f4f 4e45 5f51 5541 4e54 4946 4945  OR_ONE_QUANTIFIE
+0001b340: 5227 2c20 3236 3a20 274f 4e45 5f4f 525f  R', 26: 'ONE_OR_
+0001b350: 4d4f 5245 5f51 5541 4e54 4946 4945 5227  MORE_QUANTIFIER'
+0001b360: 2c20 3237 3a20 2752 5351 4227 2c20 3238  , 27: 'RSQB', 28
+0001b370: 3a20 274d 494e 5553 272c 2032 393a 2027  : 'MINUS', 29: '
+0001b380: 6368 6172 6163 7465 725f 7261 6e67 6527  character_range'
+0001b390: 2c20 3330 3a20 2763 6861 7261 6374 6572  , 30: 'character
+0001b3a0: 5f67 726f 7570 5f69 7465 6d27 2c20 3331  _group_item', 31
+0001b3b0: 3a20 2772 6570 6574 6974 696f 6e27 2c20  : 'repetition', 
+0001b3c0: 3332 3a20 2772 6570 6574 6974 696f 6e5f  32: 'repetition_
+0001b3d0: 7479 7065 272c 2033 333a 2027 7261 6e67  type', 33: 'rang
+0001b3e0: 6527 2c20 3334 3a20 274c 4554 5445 5253  e', 34: 'LETTERS
+0001b3f0: 272c 2033 353a 2027 434f 4d4d 4127 2c20  ', 35: 'COMMA', 
+0001b400: 3336 3a20 275f 5f63 6861 7261 6374 6572  36: '__character
+0001b410: 5f67 726f 7570 5f70 6c75 735f 3127 2c20  _group_plus_1', 
+0001b420: 3337 3a20 2753 5441 5254 5f4f 465f 5354  37: 'START_OF_ST
+0001b430: 5249 4e47 5f41 4e43 484f 5227 2c20 3338  RING_ANCHOR', 38
+0001b440: 3a20 2773 7461 7274 272c 2033 393a 2027  : 'start', 39: '
+0001b450: 4752 4f55 505f 4e4f 4e5f 4341 5054 5552  GROUP_NON_CAPTUR
+0001b460: 494e 475f 4d4f 4449 4649 4552 272c 2034  ING_MODIFIER', 4
+0001b470: 303a 2027 4348 4152 4143 5445 525f 4752  0: 'CHARACTER_GR
+0001b480: 4f55 505f 4e45 4741 5449 5645 5f4d 4f44  OUP_NEGATIVE_MOD
+0001b490: 4946 4945 5227 7d2c 2027 7374 6174 6573  IFIER'}, 'states
+0001b4a0: 273a 207b 303a 207b 303a 2028 302c 2034  ': {0: {0: (0, 4
+0001b4b0: 3429 2c20 313a 2028 302c 2033 3329 2c20  4), 1: (0, 33), 
+0001b4c0: 323a 2028 302c 2035 3529 2c20 333a 2028  2: (0, 55), 3: (
+0001b4d0: 302c 2034 3329 2c20 343a 2028 302c 2035  0, 43), 4: (0, 5
+0001b4e0: 3029 2c20 353a 2028 302c 2032 3829 2c20  0), 5: (0, 28), 
+0001b4f0: 363a 2028 302c 2031 3529 2c20 373a 2028  6: (0, 15), 7: (
+0001b500: 302c 2032 3529 2c20 383a 2028 302c 2035  0, 25), 8: (0, 5
+0001b510: 3829 2c20 393a 2028 302c 2032 3429 2c20  8), 9: (0, 24), 
+0001b520: 3130 3a20 2830 2c20 3539 292c 2031 313a  10: (0, 59), 11:
+0001b530: 2028 302c 2035 3229 2c20 3132 3a20 2830   (0, 52), 12: (0
+0001b540: 2c20 3436 292c 2031 333a 2028 302c 2034  , 46), 13: (0, 4
+0001b550: 3129 2c20 3134 3a20 2830 2c20 3334 292c  1), 14: (0, 34),
+0001b560: 2031 353a 2028 302c 2034 3829 2c20 3136   15: (0, 48), 16
+0001b570: 3a20 2830 2c20 3236 292c 2031 373a 2028  : (0, 26), 17: (
+0001b580: 302c 2034 297d 2c20 313a 207b 3138 3a20  0, 4)}, 1: {18: 
+0001b590: 2831 2c20 7b27 4027 3a20 3234 7d29 7d2c  (1, {'@': 24})},
+0001b5a0: 2032 3a20 7b31 393a 2028 302c 2033 292c   2: {19: (0, 3),
+0001b5b0: 2032 303a 2028 302c 2032 3929 7d2c 2033   20: (0, 29)}, 3
+0001b5c0: 3a20 7b32 313a 2028 312c 207b 2740 273a  : {21: (1, {'@':
+0001b5d0: 2035 387d 292c 2031 323a 2028 312c 207b   58}), 12: (1, {
+0001b5e0: 2740 273a 2035 387d 292c 2036 3a20 2831  '@': 58}), 6: (1
+0001b5f0: 2c20 7b27 4027 3a20 3538 7d29 2c20 3232  , {'@': 58}), 22
+0001b600: 3a20 2831 2c20 7b27 4027 3a20 3538 7d29  : (1, {'@': 58})
+0001b610: 2c20 303a 2028 312c 207b 2740 273a 2035  , 0: (1, {'@': 5
+0001b620: 387d 292c 2031 363a 2028 312c 207b 2740  8}), 16: (1, {'@
+0001b630: 273a 2035 387d 292c 2038 3a20 2831 2c20  ': 58}), 8: (1, 
+0001b640: 7b27 4027 3a20 3538 7d29 2c20 323a 2028  {'@': 58}), 2: (
+0001b650: 312c 207b 2740 273a 2035 387d 292c 2031  1, {'@': 58}), 1
+0001b660: 383a 2028 312c 207b 2740 273a 2035 387d  8: (1, {'@': 58}
+0001b670: 292c 2031 343a 2028 312c 207b 2740 273a  ), 14: (1, {'@':
+0001b680: 2035 387d 292c 2031 3a20 2831 2c20 7b27   58}), 1: (1, {'
+0001b690: 4027 3a20 3538 7d29 7d2c 2034 3a20 7b31  @': 58})}, 4: {1
+0001b6a0: 323a 2028 312c 207b 2740 273a 2034 317d  2: (1, {'@': 41}
+0001b6b0: 292c 2032 333a 2028 312c 207b 2740 273a  ), 23: (1, {'@':
+0001b6c0: 2034 317d 292c 2036 3a20 2831 2c20 7b27   41}), 6: (1, {'
+0001b6d0: 4027 3a20 3431 7d29 2c20 3232 3a20 2831  @': 41}), 22: (1
+0001b6e0: 2c20 7b27 4027 3a20 3431 7d29 2c20 303a  , {'@': 41}), 0:
+0001b6f0: 2028 312c 207b 2740 273a 2034 317d 292c   (1, {'@': 41}),
+0001b700: 2031 363a 2028 312c 207b 2740 273a 2034   16: (1, {'@': 4
+0001b710: 317d 292c 2032 343a 2028 312c 207b 2740  1}), 24: (1, {'@
+0001b720: 273a 2034 317d 292c 2031 3a20 2831 2c20  ': 41}), 1: (1, 
+0001b730: 7b27 4027 3a20 3431 7d29 2c20 3235 3a20  {'@': 41}), 25: 
+0001b740: 2831 2c20 7b27 4027 3a20 3431 7d29 2c20  (1, {'@': 41}), 
+0001b750: 383a 2028 312c 207b 2740 273a 2034 317d  8: (1, {'@': 41}
+0001b760: 292c 2032 3a20 2831 2c20 7b27 4027 3a20  ), 2: (1, {'@': 
+0001b770: 3431 7d29 2c20 3138 3a20 2831 2c20 7b27  41}), 18: (1, {'
+0001b780: 4027 3a20 3431 7d29 2c20 3134 3a20 2831  @': 41}), 14: (1
+0001b790: 2c20 7b27 4027 3a20 3431 7d29 2c20 3236  , {'@': 41}), 26
+0001b7a0: 3a20 2831 2c20 7b27 4027 3a20 3431 7d29  : (1, {'@': 41})
+0001b7b0: 2c20 3231 3a20 2831 2c20 7b27 4027 3a20  , 21: (1, {'@': 
+0001b7c0: 3431 7d29 7d2c 2035 3a20 7b30 3a20 2830  41})}, 5: {0: (0
+0001b7d0: 2c20 3434 292c 2031 3a20 2830 2c20 3333  , 44), 1: (0, 33
+0001b7e0: 292c 2032 3a20 2830 2c20 3535 292c 2033  ), 2: (0, 55), 3
+0001b7f0: 3a20 2830 2c20 3433 292c 2034 3a20 2830  : (0, 43), 4: (0
+0001b800: 2c20 3530 292c 2035 3a20 2830 2c20 3238  , 50), 5: (0, 28
+0001b810: 292c 2036 3a20 2830 2c20 3135 292c 2037  ), 6: (0, 15), 7
+0001b820: 3a20 2830 2c20 3235 292c 2038 3a20 2830  : (0, 25), 8: (0
+0001b830: 2c20 3538 292c 2039 3a20 2830 2c20 3234  , 58), 9: (0, 24
+0001b840: 292c 2031 313a 2028 302c 2035 3229 2c20  ), 11: (0, 52), 
+0001b850: 3130 3a20 2830 2c20 3531 292c 2031 333a  10: (0, 51), 13:
+0001b860: 2028 302c 2034 3129 2c20 3132 3a20 2830   (0, 41), 12: (0
+0001b870: 2c20 3436 292c 2031 343a 2028 302c 2033  , 46), 14: (0, 3
+0001b880: 3429 2c20 3135 3a20 2830 2c20 3438 292c  4), 15: (0, 48),
+0001b890: 2031 363a 2028 302c 2032 3629 2c20 3137   16: (0, 26), 17
+0001b8a0: 3a20 2830 2c20 3429 7d2c 2036 3a20 7b32  : (0, 4)}, 6: {2
+0001b8b0: 313a 2028 312c 207b 2740 273a 2035 397d  1: (1, {'@': 59}
+0001b8c0: 292c 2031 323a 2028 312c 207b 2740 273a  ), 12: (1, {'@':
+0001b8d0: 2035 397d 292c 2036 3a20 2831 2c20 7b27   59}), 6: (1, {'
+0001b8e0: 4027 3a20 3539 7d29 2c20 3232 3a20 2831  @': 59}), 22: (1
+0001b8f0: 2c20 7b27 4027 3a20 3539 7d29 2c20 303a  , {'@': 59}), 0:
+0001b900: 2028 312c 207b 2740 273a 2035 397d 292c   (1, {'@': 59}),
+0001b910: 2031 363a 2028 312c 207b 2740 273a 2035   16: (1, {'@': 5
+0001b920: 397d 292c 2038 3a20 2831 2c20 7b27 4027  9}), 8: (1, {'@'
+0001b930: 3a20 3539 7d29 2c20 323a 2028 312c 207b  : 59}), 2: (1, {
+0001b940: 2740 273a 2035 397d 292c 2031 383a 2028  '@': 59}), 18: (
+0001b950: 312c 207b 2740 273a 2035 397d 292c 2031  1, {'@': 59}), 1
+0001b960: 343a 2028 312c 207b 2740 273a 2035 397d  4: (1, {'@': 59}
+0001b970: 292c 2031 3a20 2831 2c20 7b27 4027 3a20  ), 1: (1, {'@': 
+0001b980: 3539 7d29 7d2c 2037 3a20 7b32 373a 2028  59})}, 7: {27: (
+0001b990: 312c 207b 2740 273a 2036 337d 292c 2031  1, {'@': 63}), 1
+0001b9a0: 3a20 2831 2c20 7b27 4027 3a20 3633 7d29  : (1, {'@': 63})
+0001b9b0: 2c20 3134 3a20 2831 2c20 7b27 4027 3a20  , 14: (1, {'@': 
+0001b9c0: 3633 7d29 2c20 3136 3a20 2831 2c20 7b27  63}), 16: (1, {'
+0001b9d0: 4027 3a20 3633 7d29 7d2c 2038 3a20 7b32  @': 63})}, 8: {2
+0001b9e0: 313a 2028 312c 207b 2740 273a 2035 337d  1: (1, {'@': 53}
+0001b9f0: 292c 2031 323a 2028 312c 207b 2740 273a  ), 12: (1, {'@':
+0001ba00: 2035 337d 292c 2036 3a20 2831 2c20 7b27   53}), 6: (1, {'
+0001ba10: 4027 3a20 3533 7d29 2c20 3232 3a20 2831  @': 53}), 22: (1
+0001ba20: 2c20 7b27 4027 3a20 3533 7d29 2c20 303a  , {'@': 53}), 0:
+0001ba30: 2028 312c 207b 2740 273a 2035 337d 292c   (1, {'@': 53}),
+0001ba40: 2031 363a 2028 312c 207b 2740 273a 2035   16: (1, {'@': 5
+0001ba50: 337d 292c 2038 3a20 2831 2c20 7b27 4027  3}), 8: (1, {'@'
+0001ba60: 3a20 3533 7d29 2c20 323a 2028 312c 207b  : 53}), 2: (1, {
+0001ba70: 2740 273a 2035 337d 292c 2031 383a 2028  '@': 53}), 18: (
+0001ba80: 312c 207b 2740 273a 2035 337d 292c 2031  1, {'@': 53}), 1
+0001ba90: 343a 2028 312c 207b 2740 273a 2035 337d  4: (1, {'@': 53}
+0001baa0: 292c 2031 3a20 2831 2c20 7b27 4027 3a20  ), 1: (1, {'@': 
+0001bab0: 3533 7d29 7d2c 2039 3a20 7b31 323a 2028  53})}, 9: {12: (
+0001bac0: 312c 207b 2740 273a 2034 347d 292c 2032  1, {'@': 44}), 2
+0001bad0: 333a 2028 312c 207b 2740 273a 2034 347d  3: (1, {'@': 44}
+0001bae0: 292c 2036 3a20 2831 2c20 7b27 4027 3a20  ), 6: (1, {'@': 
+0001baf0: 3434 7d29 2c20 3232 3a20 2831 2c20 7b27  44}), 22: (1, {'
+0001bb00: 4027 3a20 3434 7d29 2c20 303a 2028 312c  @': 44}), 0: (1,
+0001bb10: 207b 2740 273a 2034 347d 292c 2031 363a   {'@': 44}), 16:
+0001bb20: 2028 312c 207b 2740 273a 2034 347d 292c   (1, {'@': 44}),
+0001bb30: 2032 343a 2028 312c 207b 2740 273a 2034   24: (1, {'@': 4
+0001bb40: 347d 292c 2031 3a20 2831 2c20 7b27 4027  4}), 1: (1, {'@'
+0001bb50: 3a20 3434 7d29 2c20 3235 3a20 2831 2c20  : 44}), 25: (1, 
+0001bb60: 7b27 4027 3a20 3434 7d29 2c20 383a 2028  {'@': 44}), 8: (
+0001bb70: 312c 207b 2740 273a 2034 347d 292c 2032  1, {'@': 44}), 2
+0001bb80: 3a20 2831 2c20 7b27 4027 3a20 3434 7d29  : (1, {'@': 44})
+0001bb90: 2c20 3138 3a20 2831 2c20 7b27 4027 3a20  , 18: (1, {'@': 
+0001bba0: 3434 7d29 2c20 3134 3a20 2831 2c20 7b27  44}), 14: (1, {'
+0001bbb0: 4027 3a20 3434 7d29 2c20 3236 3a20 2831  @': 44}), 26: (1
+0001bbc0: 2c20 7b27 4027 3a20 3434 7d29 2c20 3231  , {'@': 44}), 21
+0001bbd0: 3a20 2831 2c20 7b27 4027 3a20 3434 7d29  : (1, {'@': 44})
+0001bbe0: 7d2c 2031 303a 207b 3238 3a20 2830 2c20  }, 10: {28: (0, 
+0001bbf0: 3136 292c 2032 373a 2028 312c 207b 2740  16), 27: (1, {'@
+0001bc00: 273a 2034 397d 292c 2031 3a20 2831 2c20  ': 49}), 1: (1, 
+0001bc10: 7b27 4027 3a20 3439 7d29 2c20 3134 3a20  {'@': 49}), 14: 
+0001bc20: 2831 2c20 7b27 4027 3a20 3439 7d29 2c20  (1, {'@': 49}), 
+0001bc30: 3136 3a20 2831 2c20 7b27 4027 3a20 3439  16: (1, {'@': 49
+0001bc40: 7d29 7d2c 2031 313a 207b 3237 3a20 2831  })}, 11: {27: (1
+0001bc50: 2c20 7b27 4027 3a20 3436 7d29 2c20 313a  , {'@': 46}), 1:
+0001bc60: 2028 312c 207b 2740 273a 2034 367d 292c   (1, {'@': 46}),
+0001bc70: 2031 343a 2028 312c 207b 2740 273a 2034   14: (1, {'@': 4
+0001bc80: 367d 292c 2031 363a 2028 312c 207b 2740  6}), 16: (1, {'@
+0001bc90: 273a 2034 367d 297d 2c20 3132 3a20 7b32  ': 46})}, 12: {2
+0001bca0: 393a 2028 302c 2032 3029 2c20 3330 3a20  9: (0, 20), 30: 
+0001bcb0: 2830 2c20 3729 2c20 3237 3a20 2830 2c20  (0, 7), 27: (0, 
+0001bcc0: 3534 292c 2031 343a 2028 302c 2031 3029  54), 14: (0, 10)
+0001bcd0: 2c20 3133 3a20 2830 2c20 3237 292c 2031  , 13: (0, 27), 1
+0001bce0: 363a 2028 302c 2032 3629 2c20 313a 2028  6: (0, 26), 1: (
+0001bcf0: 302c 2031 3129 7d2c 2031 333a 207b 3235  0, 11)}, 13: {25
+0001bd00: 3a20 2830 2c20 3338 292c 2032 343a 2028  : (0, 38), 24: (
+0001bd10: 302c 2033 3529 2c20 3331 3a20 2830 2c20  0, 35), 31: (0, 
+0001bd20: 3232 292c 2033 323a 2028 302c 2031 3929  22), 32: (0, 19)
+0001bd30: 2c20 3333 3a20 2830 2c20 3336 292c 2032  , 33: (0, 36), 2
+0001bd40: 333a 2028 302c 2038 292c 2032 363a 2028  3: (0, 8), 26: (
+0001bd50: 302c 2034 3229 2c20 3132 3a20 2831 2c20  0, 42), 12: (1, 
+0001bd60: 7b27 4027 3a20 3333 7d29 2c20 363a 2028  {'@': 33}), 6: (
+0001bd70: 312c 207b 2740 273a 2033 337d 292c 2032  1, {'@': 33}), 2
+0001bd80: 323a 2028 312c 207b 2740 273a 2033 337d  2: (1, {'@': 33}
+0001bd90: 292c 2030 3a20 2831 2c20 7b27 4027 3a20  ), 0: (1, {'@': 
+0001bda0: 3333 7d29 2c20 3136 3a20 2831 2c20 7b27  33}), 16: (1, {'
+0001bdb0: 4027 3a20 3333 7d29 2c20 383a 2028 312c  @': 33}), 8: (1,
+0001bdc0: 207b 2740 273a 2033 337d 292c 2032 3a20   {'@': 33}), 2: 
+0001bdd0: 2831 2c20 7b27 4027 3a20 3333 7d29 2c20  (1, {'@': 33}), 
+0001bde0: 3138 3a20 2831 2c20 7b27 4027 3a20 3333  18: (1, {'@': 33
+0001bdf0: 7d29 2c20 3134 3a20 2831 2c20 7b27 4027  }), 14: (1, {'@'
+0001be00: 3a20 3333 7d29 2c20 313a 2028 312c 207b  : 33}), 1: (1, {
+0001be10: 2740 273a 2033 337d 292c 2032 313a 2028  '@': 33}), 21: (
+0001be20: 312c 207b 2740 273a 2033 337d 297d 2c20  1, {'@': 33})}, 
+0001be30: 3134 3a20 7b31 323a 2028 312c 207b 2740  14: {12: (1, {'@
+0001be40: 273a 2036 317d 292c 2036 3a20 2831 2c20  ': 61}), 6: (1, 
+0001be50: 7b27 4027 3a20 3631 7d29 2c20 3232 3a20  {'@': 61}), 22: 
+0001be60: 2831 2c20 7b27 4027 3a20 3631 7d29 2c20  (1, {'@': 61}), 
+0001be70: 303a 2028 312c 207b 2740 273a 2036 317d  0: (1, {'@': 61}
+0001be80: 292c 2031 363a 2028 312c 207b 2740 273a  ), 16: (1, {'@':
+0001be90: 2036 317d 292c 2038 3a20 2831 2c20 7b27   61}), 8: (1, {'
+0001bea0: 4027 3a20 3631 7d29 2c20 323a 2028 312c  @': 61}), 2: (1,
+0001beb0: 207b 2740 273a 2036 317d 292c 2031 383a   {'@': 61}), 18:
+0001bec0: 2028 312c 207b 2740 273a 2036 317d 292c   (1, {'@': 61}),
+0001bed0: 2031 343a 2028 312c 207b 2740 273a 2036   14: (1, {'@': 6
+0001bee0: 317d 292c 2031 3a20 2831 2c20 7b27 4027  1}), 1: (1, {'@'
+0001bef0: 3a20 3631 7d29 2c20 3231 3a20 2831 2c20  : 61}), 21: (1, 
+0001bf00: 7b27 4027 3a20 3631 7d29 7d2c 2031 353a  {'@': 61})}, 15:
+0001bf10: 207b 3132 3a20 2831 2c20 7b27 4027 3a20   {12: (1, {'@': 
+0001bf20: 3338 7d29 2c20 3233 3a20 2831 2c20 7b27  38}), 23: (1, {'
+0001bf30: 4027 3a20 3338 7d29 2c20 363a 2028 312c  @': 38}), 6: (1,
+0001bf40: 207b 2740 273a 2033 387d 292c 2032 323a   {'@': 38}), 22:
+0001bf50: 2028 312c 207b 2740 273a 2033 387d 292c   (1, {'@': 38}),
+0001bf60: 2030 3a20 2831 2c20 7b27 4027 3a20 3338   0: (1, {'@': 38
+0001bf70: 7d29 2c20 3136 3a20 2831 2c20 7b27 4027  }), 16: (1, {'@'
+0001bf80: 3a20 3338 7d29 2c20 3234 3a20 2831 2c20  : 38}), 24: (1, 
+0001bf90: 7b27 4027 3a20 3338 7d29 2c20 313a 2028  {'@': 38}), 1: (
+0001bfa0: 312c 207b 2740 273a 2033 387d 292c 2032  1, {'@': 38}), 2
+0001bfb0: 353a 2028 312c 207b 2740 273a 2033 387d  5: (1, {'@': 38}
+0001bfc0: 292c 2038 3a20 2831 2c20 7b27 4027 3a20  ), 8: (1, {'@': 
+0001bfd0: 3338 7d29 2c20 323a 2028 312c 207b 2740  38}), 2: (1, {'@
+0001bfe0: 273a 2033 387d 292c 2031 383a 2028 312c  ': 38}), 18: (1,
+0001bff0: 207b 2740 273a 2033 387d 292c 2031 343a   {'@': 38}), 14:
+0001c000: 2028 312c 207b 2740 273a 2033 387d 292c   (1, {'@': 38}),
+0001c010: 2032 363a 2028 312c 207b 2740 273a 2033   26: (1, {'@': 3
+0001c020: 387d 292c 2032 313a 2028 312c 207b 2740  8}), 21: (1, {'@
+0001c030: 273a 2033 387d 297d 2c20 3136 3a20 7b31  ': 38})}, 16: {1
+0001c040: 343a 2028 302c 2032 3129 7d2c 2031 373a  4: (0, 21)}, 17:
+0001c050: 207b 3139 3a20 2830 2c20 3537 297d 2c20   {19: (0, 57)}, 
+0001c060: 3138 3a20 7b31 323a 2028 312c 207b 2740  18: {12: (1, {'@
+0001c070: 273a 2033 347d 292c 2036 3a20 2831 2c20  ': 34}), 6: (1, 
+0001c080: 7b27 4027 3a20 3334 7d29 2c20 3232 3a20  {'@': 34}), 22: 
+0001c090: 2831 2c20 7b27 4027 3a20 3334 7d29 2c20  (1, {'@': 34}), 
+0001c0a0: 303a 2028 312c 207b 2740 273a 2033 347d  0: (1, {'@': 34}
+0001c0b0: 292c 2031 363a 2028 312c 207b 2740 273a  ), 16: (1, {'@':
+0001c0c0: 2033 347d 292c 2038 3a20 2831 2c20 7b27   34}), 8: (1, {'
+0001c0d0: 4027 3a20 3334 7d29 2c20 323a 2028 312c  @': 34}), 2: (1,
+0001c0e0: 207b 2740 273a 2033 347d 292c 2031 383a   {'@': 34}), 18:
+0001c0f0: 2028 312c 207b 2740 273a 2033 347d 292c   (1, {'@': 34}),
+0001c100: 2031 343a 2028 312c 207b 2740 273a 2033   14: (1, {'@': 3
+0001c110: 347d 292c 2031 3a20 2831 2c20 7b27 4027  4}), 1: (1, {'@'
+0001c120: 3a20 3334 7d29 2c20 3231 3a20 2831 2c20  : 34}), 21: (1, 
+0001c130: 7b27 4027 3a20 3334 7d29 7d2c 2031 393a  {'@': 34})}, 19:
+0001c140: 207b 3132 3a20 2831 2c20 7b27 4027 3a20   {12: (1, {'@': 
+0001c150: 3532 7d29 2c20 363a 2028 312c 207b 2740  52}), 6: (1, {'@
+0001c160: 273a 2035 327d 292c 2030 3a20 2831 2c20  ': 52}), 0: (1, 
+0001c170: 7b27 4027 3a20 3532 7d29 2c20 383a 2028  {'@': 52}), 8: (
+0001c180: 312c 207b 2740 273a 2035 327d 292c 2032  1, {'@': 52}), 2
+0001c190: 3a20 2831 2c20 7b27 4027 3a20 3532 7d29  : (1, {'@': 52})
+0001c1a0: 2c20 3231 3a20 2831 2c20 7b27 4027 3a20  , 21: (1, {'@': 
+0001c1b0: 3532 7d29 2c20 3232 3a20 2831 2c20 7b27  52}), 22: (1, {'
+0001c1c0: 4027 3a20 3532 7d29 2c20 3136 3a20 2831  @': 52}), 16: (1
+0001c1d0: 2c20 7b27 4027 3a20 3532 7d29 2c20 3138  , {'@': 52}), 18
+0001c1e0: 3a20 2831 2c20 7b27 4027 3a20 3532 7d29  : (1, {'@': 52})
+0001c1f0: 2c20 3134 3a20 2831 2c20 7b27 4027 3a20  , 14: (1, {'@': 
+0001c200: 3532 7d29 2c20 313a 2028 312c 207b 2740  52}), 1: (1, {'@
+0001c210: 273a 2035 327d 297d 2c20 3230 3a20 7b32  ': 52})}, 20: {2
+0001c220: 373a 2028 312c 207b 2740 273a 2034 387d  7: (1, {'@': 48}
+0001c230: 292c 2031 3a20 2831 2c20 7b27 4027 3a20  ), 1: (1, {'@': 
+0001c240: 3438 7d29 2c20 3134 3a20 2831 2c20 7b27  48}), 14: (1, {'
+0001c250: 4027 3a20 3438 7d29 2c20 3136 3a20 2831  @': 48}), 16: (1
+0001c260: 2c20 7b27 4027 3a20 3438 7d29 7d2c 2032  , {'@': 48})}, 2
+0001c270: 313a 207b 3237 3a20 2831 2c20 7b27 4027  1: {27: (1, {'@'
+0001c280: 3a20 3531 7d29 2c20 313a 2028 312c 207b  : 51}), 1: (1, {
+0001c290: 2740 273a 2035 317d 292c 2031 343a 2028  '@': 51}), 14: (
+0001c2a0: 312c 207b 2740 273a 2035 317d 292c 2031  1, {'@': 51}), 1
+0001c2b0: 363a 2028 312c 207b 2740 273a 2035 317d  6: (1, {'@': 51}
+0001c2c0: 297d 2c20 3232 3a20 7b31 323a 2028 312c  )}, 22: {12: (1,
+0001c2d0: 207b 2740 273a 2033 327d 292c 2036 3a20   {'@': 32}), 6: 
+0001c2e0: 2831 2c20 7b27 4027 3a20 3332 7d29 2c20  (1, {'@': 32}), 
+0001c2f0: 3232 3a20 2831 2c20 7b27 4027 3a20 3332  22: (1, {'@': 32
+0001c300: 7d29 2c20 303a 2028 312c 207b 2740 273a  }), 0: (1, {'@':
+0001c310: 2033 327d 292c 2031 363a 2028 312c 207b   32}), 16: (1, {
+0001c320: 2740 273a 2033 327d 292c 2038 3a20 2831  '@': 32}), 8: (1
+0001c330: 2c20 7b27 4027 3a20 3332 7d29 2c20 323a  , {'@': 32}), 2:
+0001c340: 2028 312c 207b 2740 273a 2033 327d 292c   (1, {'@': 32}),
+0001c350: 2031 383a 2028 312c 207b 2740 273a 2033   18: (1, {'@': 3
+0001c360: 327d 292c 2031 343a 2028 312c 207b 2740  2}), 14: (1, {'@
+0001c370: 273a 2033 327d 292c 2031 3a20 2831 2c20  ': 32}), 1: (1, 
+0001c380: 7b27 4027 3a20 3332 7d29 2c20 3231 3a20  {'@': 32}), 21: 
+0001c390: 2831 2c20 7b27 4027 3a20 3332 7d29 7d2c  (1, {'@': 32})},
+0001c3a0: 2032 333a 207b 3235 3a20 2830 2c20 3338   23: {25: (0, 38
+0001c3b0: 292c 2032 343a 2028 302c 2033 3529 2c20  ), 24: (0, 35), 
+0001c3c0: 3331 3a20 2830 2c20 3138 292c 2033 323a  31: (0, 18), 32:
+0001c3d0: 2028 302c 2031 3929 2c20 3333 3a20 2830   (0, 19), 33: (0
+0001c3e0: 2c20 3336 292c 2032 333a 2028 302c 2038  , 36), 23: (0, 8
+0001c3f0: 292c 2032 363a 2028 302c 2034 3229 2c20  ), 26: (0, 42), 
+0001c400: 3132 3a20 2831 2c20 7b27 4027 3a20 3335  12: (1, {'@': 35
+0001c410: 7d29 2c20 363a 2028 312c 207b 2740 273a  }), 6: (1, {'@':
+0001c420: 2033 357d 292c 2032 323a 2028 312c 207b   35}), 22: (1, {
+0001c430: 2740 273a 2033 357d 292c 2030 3a20 2831  '@': 35}), 0: (1
+0001c440: 2c20 7b27 4027 3a20 3335 7d29 2c20 3136  , {'@': 35}), 16
+0001c450: 3a20 2831 2c20 7b27 4027 3a20 3335 7d29  : (1, {'@': 35})
+0001c460: 2c20 383a 2028 312c 207b 2740 273a 2033  , 8: (1, {'@': 3
+0001c470: 357d 292c 2032 3a20 2831 2c20 7b27 4027  5}), 2: (1, {'@'
+0001c480: 3a20 3335 7d29 2c20 3138 3a20 2831 2c20  : 35}), 18: (1, 
+0001c490: 7b27 4027 3a20 3335 7d29 2c20 3134 3a20  {'@': 35}), 14: 
+0001c4a0: 2831 2c20 7b27 4027 3a20 3335 7d29 2c20  (1, {'@': 35}), 
+0001c4b0: 313a 2028 312c 207b 2740 273a 2033 357d  1: (1, {'@': 35}
+0001c4c0: 292c 2032 313a 2028 312c 207b 2740 273a  ), 21: (1, {'@':
+0001c4d0: 2033 357d 297d 2c20 3234 3a20 7b31 323a   35})}, 24: {12:
+0001c4e0: 2028 312c 207b 2740 273a 2033 397d 292c   (1, {'@': 39}),
+0001c4f0: 2032 333a 2028 312c 207b 2740 273a 2033   23: (1, {'@': 3
+0001c500: 397d 292c 2036 3a20 2831 2c20 7b27 4027  9}), 6: (1, {'@'
+0001c510: 3a20 3339 7d29 2c20 3232 3a20 2831 2c20  : 39}), 22: (1, 
+0001c520: 7b27 4027 3a20 3339 7d29 2c20 303a 2028  {'@': 39}), 0: (
+0001c530: 312c 207b 2740 273a 2033 397d 292c 2031  1, {'@': 39}), 1
+0001c540: 363a 2028 312c 207b 2740 273a 2033 397d  6: (1, {'@': 39}
+0001c550: 292c 2032 343a 2028 312c 207b 2740 273a  ), 24: (1, {'@':
+0001c560: 2033 397d 292c 2031 3a20 2831 2c20 7b27   39}), 1: (1, {'
+0001c570: 4027 3a20 3339 7d29 2c20 3235 3a20 2831  @': 39}), 25: (1
+0001c580: 2c20 7b27 4027 3a20 3339 7d29 2c20 383a  , {'@': 39}), 8:
+0001c590: 2028 312c 207b 2740 273a 2033 397d 292c   (1, {'@': 39}),
+0001c5a0: 2032 3a20 2831 2c20 7b27 4027 3a20 3339   2: (1, {'@': 39
+0001c5b0: 7d29 2c20 3138 3a20 2831 2c20 7b27 4027  }), 18: (1, {'@'
+0001c5c0: 3a20 3339 7d29 2c20 3134 3a20 2831 2c20  : 39}), 14: (1, 
+0001c5d0: 7b27 4027 3a20 3339 7d29 2c20 3236 3a20  {'@': 39}), 26: 
+0001c5e0: 2831 2c20 7b27 4027 3a20 3339 7d29 2c20  (1, {'@': 39}), 
+0001c5f0: 3231 3a20 2831 2c20 7b27 4027 3a20 3339  21: (1, {'@': 39
+0001c600: 7d29 7d2c 2032 353a 207b 3132 3a20 2831  })}, 25: {12: (1
+0001c610: 2c20 7b27 4027 3a20 3630 7d29 2c20 363a  , {'@': 60}), 6:
+0001c620: 2028 312c 207b 2740 273a 2036 307d 292c   (1, {'@': 60}),
+0001c630: 2032 323a 2028 312c 207b 2740 273a 2036   22: (1, {'@': 6
+0001c640: 307d 292c 2030 3a20 2831 2c20 7b27 4027  0}), 0: (1, {'@'
+0001c650: 3a20 3630 7d29 2c20 3136 3a20 2831 2c20  : 60}), 16: (1, 
+0001c660: 7b27 4027 3a20 3630 7d29 2c20 383a 2028  {'@': 60}), 8: (
+0001c670: 312c 207b 2740 273a 2036 307d 292c 2032  1, {'@': 60}), 2
+0001c680: 3a20 2831 2c20 7b27 4027 3a20 3630 7d29  : (1, {'@': 60})
+0001c690: 2c20 3138 3a20 2831 2c20 7b27 4027 3a20  , 18: (1, {'@': 
+0001c6a0: 3630 7d29 2c20 3134 3a20 2831 2c20 7b27  60}), 14: (1, {'
+0001c6b0: 4027 3a20 3630 7d29 2c20 313a 2028 312c  @': 60}), 1: (1,
+0001c6c0: 207b 2740 273a 2036 307d 292c 2032 313a   {'@': 60}), 21:
+0001c6d0: 2028 312c 207b 2740 273a 2036 307d 297d   (1, {'@': 60})}
+0001c6e0: 2c20 3236 3a20 7b33 343a 2028 302c 2031  , 26: {34: (0, 1
+0001c6f0: 3729 7d2c 2032 373a 207b 3237 3a20 2831  7)}, 27: {27: (1
+0001c700: 2c20 7b27 4027 3a20 3437 7d29 2c20 313a  , {'@': 47}), 1:
+0001c710: 2028 312c 207b 2740 273a 2034 377d 292c   (1, {'@': 47}),
+0001c720: 2031 343a 2028 312c 207b 2740 273a 2034   14: (1, {'@': 4
+0001c730: 377d 292c 2031 363a 2028 312c 207b 2740  7}), 16: (1, {'@
+0001c740: 273a 2034 377d 297d 2c20 3238 3a20 7b31  ': 47})}, 28: {1
+0001c750: 323a 2028 312c 207b 2740 273a 2032 387d  2: (1, {'@': 28}
+0001c760: 292c 2036 3a20 2831 2c20 7b27 4027 3a20  ), 6: (1, {'@': 
+0001c770: 3238 7d29 2c20 3232 3a20 2831 2c20 7b27  28}), 22: (1, {'
+0001c780: 4027 3a20 3238 7d29 2c20 303a 2028 312c  @': 28}), 0: (1,
+0001c790: 207b 2740 273a 2032 387d 292c 2031 363a   {'@': 28}), 16:
+0001c7a0: 2028 312c 207b 2740 273a 2032 387d 292c   (1, {'@': 28}),
+0001c7b0: 2038 3a20 2831 2c20 7b27 4027 3a20 3238   8: (1, {'@': 28
+0001c7c0: 7d29 2c20 323a 2028 312c 207b 2740 273a  }), 2: (1, {'@':
+0001c7d0: 2032 387d 292c 2031 383a 2028 312c 207b   28}), 18: (1, {
+0001c7e0: 2740 273a 2032 387d 292c 2031 343a 2028  '@': 28}), 14: (
+0001c7f0: 312c 207b 2740 273a 2032 387d 292c 2031  1, {'@': 28}), 1
+0001c800: 3a20 2831 2c20 7b27 4027 3a20 3238 7d29  : (1, {'@': 28})
+0001c810: 2c20 3231 3a20 2831 2c20 7b27 4027 3a20  , 21: (1, {'@': 
+0001c820: 3238 7d29 7d2c 2032 393a 207b 3139 3a20  28})}, 29: {19: 
+0001c830: 2830 2c20 3435 297d 2c20 3330 3a20 7b32  (0, 45)}, 30: {2
+0001c840: 313a 2028 302c 2032 3329 7d2c 2033 313a  1: (0, 23)}, 31:
+0001c850: 207b 3132 3a20 2831 2c20 7b27 4027 3a20   {12: (1, {'@': 
+0001c860: 3336 7d29 2c20 363a 2028 312c 207b 2740  36}), 6: (1, {'@
+0001c870: 273a 2033 367d 292c 2032 323a 2028 312c  ': 36}), 22: (1,
+0001c880: 207b 2740 273a 2033 367d 292c 2030 3a20   {'@': 36}), 0: 
+0001c890: 2831 2c20 7b27 4027 3a20 3336 7d29 2c20  (1, {'@': 36}), 
+0001c8a0: 3136 3a20 2831 2c20 7b27 4027 3a20 3336  16: (1, {'@': 36
+0001c8b0: 7d29 2c20 383a 2028 312c 207b 2740 273a  }), 8: (1, {'@':
+0001c8c0: 2033 367d 292c 2032 3a20 2831 2c20 7b27   36}), 2: (1, {'
+0001c8d0: 4027 3a20 3336 7d29 2c20 3138 3a20 2831  @': 36}), 18: (1
+0001c8e0: 2c20 7b27 4027 3a20 3336 7d29 2c20 3134  , {'@': 36}), 14
+0001c8f0: 3a20 2831 2c20 7b27 4027 3a20 3336 7d29  : (1, {'@': 36})
+0001c900: 2c20 313a 2028 312c 207b 2740 273a 2033  , 1: (1, {'@': 3
+0001c910: 367d 292c 2032 313a 2028 312c 207b 2740  6}), 21: (1, {'@
+0001c920: 273a 2033 367d 297d 2c20 3332 3a20 7b33  ': 36})}, 32: {3
+0001c930: 353a 2028 302c 2032 292c 2031 393a 2028  5: (0, 2), 19: (
+0001c940: 302c 2036 297d 2c20 3333 3a20 7b31 323a  0, 6)}, 33: {12:
+0001c950: 2028 312c 207b 2740 273a 2034 327d 292c   (1, {'@': 42}),
+0001c960: 2032 333a 2028 312c 207b 2740 273a 2034   23: (1, {'@': 4
+0001c970: 327d 292c 2036 3a20 2831 2c20 7b27 4027  2}), 6: (1, {'@'
+0001c980: 3a20 3432 7d29 2c20 3232 3a20 2831 2c20  : 42}), 22: (1, 
+0001c990: 7b27 4027 3a20 3432 7d29 2c20 303a 2028  {'@': 42}), 0: (
+0001c9a0: 312c 207b 2740 273a 2034 327d 292c 2031  1, {'@': 42}), 1
+0001c9b0: 363a 2028 312c 207b 2740 273a 2034 327d  6: (1, {'@': 42}
+0001c9c0: 292c 2032 343a 2028 312c 207b 2740 273a  ), 24: (1, {'@':
+0001c9d0: 2034 327d 292c 2031 3a20 2831 2c20 7b27   42}), 1: (1, {'
+0001c9e0: 4027 3a20 3432 7d29 2c20 3235 3a20 2831  @': 42}), 25: (1
+0001c9f0: 2c20 7b27 4027 3a20 3432 7d29 2c20 383a  , {'@': 42}), 8:
+0001ca00: 2028 312c 207b 2740 273a 2034 327d 292c   (1, {'@': 42}),
+0001ca10: 2032 3a20 2831 2c20 7b27 4027 3a20 3432   2: (1, {'@': 42
+0001ca20: 7d29 2c20 3138 3a20 2831 2c20 7b27 4027  }), 18: (1, {'@'
+0001ca30: 3a20 3432 7d29 2c20 3134 3a20 2831 2c20  : 42}), 14: (1, 
+0001ca40: 7b27 4027 3a20 3432 7d29 2c20 3236 3a20  {'@': 42}), 26: 
+0001ca50: 2831 2c20 7b27 4027 3a20 3432 7d29 2c20  (1, {'@': 42}), 
+0001ca60: 3231 3a20 2831 2c20 7b27 4027 3a20 3432  21: (1, {'@': 42
+0001ca70: 7d29 7d2c 2033 343a 207b 3132 3a20 2831  })}, 34: {12: (1
+0001ca80: 2c20 7b27 4027 3a20 3430 7d29 2c20 3233  , {'@': 40}), 23
+0001ca90: 3a20 2831 2c20 7b27 4027 3a20 3430 7d29  : (1, {'@': 40})
+0001caa0: 2c20 363a 2028 312c 207b 2740 273a 2034  , 6: (1, {'@': 4
+0001cab0: 307d 292c 2032 323a 2028 312c 207b 2740  0}), 22: (1, {'@
+0001cac0: 273a 2034 307d 292c 2030 3a20 2831 2c20  ': 40}), 0: (1, 
+0001cad0: 7b27 4027 3a20 3430 7d29 2c20 3136 3a20  {'@': 40}), 16: 
+0001cae0: 2831 2c20 7b27 4027 3a20 3430 7d29 2c20  (1, {'@': 40}), 
+0001caf0: 3234 3a20 2831 2c20 7b27 4027 3a20 3430  24: (1, {'@': 40
+0001cb00: 7d29 2c20 313a 2028 312c 207b 2740 273a  }), 1: (1, {'@':
+0001cb10: 2034 307d 292c 2032 353a 2028 312c 207b   40}), 25: (1, {
+0001cb20: 2740 273a 2034 307d 292c 2038 3a20 2831  '@': 40}), 8: (1
+0001cb30: 2c20 7b27 4027 3a20 3430 7d29 2c20 323a  , {'@': 40}), 2:
+0001cb40: 2028 312c 207b 2740 273a 2034 307d 292c   (1, {'@': 40}),
+0001cb50: 2031 383a 2028 312c 207b 2740 273a 2034   18: (1, {'@': 4
+0001cb60: 307d 292c 2031 343a 2028 312c 207b 2740  0}), 14: (1, {'@
+0001cb70: 273a 2034 307d 292c 2032 363a 2028 312c  ': 40}), 26: (1,
+0001cb80: 207b 2740 273a 2034 307d 292c 2032 313a   {'@': 40}), 21:
+0001cb90: 2028 312c 207b 2740 273a 2034 307d 297d   (1, {'@': 40})}
+0001cba0: 2c20 3335 3a20 7b32 303a 2028 302c 2033  , 35: {20: (0, 3
+0001cbb0: 3229 7d2c 2033 363a 207b 3231 3a20 2831  2)}, 36: {21: (1
+0001cbc0: 2c20 7b27 4027 3a20 3536 7d29 2c20 3132  , {'@': 56}), 12
+0001cbd0: 3a20 2831 2c20 7b27 4027 3a20 3536 7d29  : (1, {'@': 56})
+0001cbe0: 2c20 363a 2028 312c 207b 2740 273a 2035  , 6: (1, {'@': 5
+0001cbf0: 367d 292c 2032 323a 2028 312c 207b 2740  6}), 22: (1, {'@
+0001cc00: 273a 2035 367d 292c 2030 3a20 2831 2c20  ': 56}), 0: (1, 
+0001cc10: 7b27 4027 3a20 3536 7d29 2c20 3136 3a20  {'@': 56}), 16: 
+0001cc20: 2831 2c20 7b27 4027 3a20 3536 7d29 2c20  (1, {'@': 56}), 
+0001cc30: 383a 2028 312c 207b 2740 273a 2035 367d  8: (1, {'@': 56}
+0001cc40: 292c 2032 3a20 2831 2c20 7b27 4027 3a20  ), 2: (1, {'@': 
+0001cc50: 3536 7d29 2c20 3138 3a20 2831 2c20 7b27  56}), 18: (1, {'
+0001cc60: 4027 3a20 3536 7d29 2c20 3134 3a20 2831  @': 56}), 14: (1
+0001cc70: 2c20 7b27 4027 3a20 3536 7d29 2c20 313a  , {'@': 56}), 1:
+0001cc80: 2028 312c 207b 2740 273a 2035 367d 297d   (1, {'@': 56})}
+0001cc90: 2c20 3337 3a20 7b30 3a20 2830 2c20 3434  , 37: {0: (0, 44
+0001cca0: 292c 2031 3a20 2830 2c20 3333 292c 2032  ), 1: (0, 33), 2
+0001ccb0: 3a20 2830 2c20 3535 292c 2033 3a20 2830  : (0, 55), 3: (0
+0001ccc0: 2c20 3433 292c 2034 3a20 2830 2c20 3530  , 43), 4: (0, 50
+0001ccd0: 292c 2035 3a20 2830 2c20 3238 292c 2031  ), 5: (0, 28), 1
+0001cce0: 303a 2028 302c 2035 3329 2c20 363a 2028  0: (0, 53), 6: (
+0001ccf0: 302c 2031 3529 2c20 373a 2028 302c 2032  0, 15), 7: (0, 2
+0001cd00: 3529 2c20 383a 2028 302c 2035 3829 2c20  5), 8: (0, 58), 
+0001cd10: 393a 2028 302c 2032 3429 2c20 3131 3a20  9: (0, 24), 11: 
+0001cd20: 2830 2c20 3532 292c 2031 323a 2028 302c  (0, 52), 12: (0,
+0001cd30: 2034 3629 2c20 3133 3a20 2830 2c20 3431   46), 13: (0, 41
+0001cd40: 292c 2031 343a 2028 302c 2033 3429 2c20  ), 14: (0, 34), 
+0001cd50: 3135 3a20 2830 2c20 3438 292c 2031 363a  15: (0, 48), 16:
+0001cd60: 2028 302c 2032 3629 2c20 3137 3a20 2830   (0, 26), 17: (0
+0001cd70: 2c20 3429 7d2c 2033 383a 207b 3231 3a20  , 4)}, 38: {21: 
+0001cd80: 2831 2c20 7b27 4027 3a20 3535 7d29 2c20  (1, {'@': 55}), 
+0001cd90: 3132 3a20 2831 2c20 7b27 4027 3a20 3535  12: (1, {'@': 55
+0001cda0: 7d29 2c20 363a 2028 312c 207b 2740 273a  }), 6: (1, {'@':
+0001cdb0: 2035 357d 292c 2032 323a 2028 312c 207b   55}), 22: (1, {
+0001cdc0: 2740 273a 2035 357d 292c 2030 3a20 2831  '@': 55}), 0: (1
+0001cdd0: 2c20 7b27 4027 3a20 3535 7d29 2c20 3136  , {'@': 55}), 16
+0001cde0: 3a20 2831 2c20 7b27 4027 3a20 3535 7d29  : (1, {'@': 55})
+0001cdf0: 2c20 383a 2028 312c 207b 2740 273a 2035  , 8: (1, {'@': 5
+0001ce00: 357d 292c 2032 3a20 2831 2c20 7b27 4027  5}), 2: (1, {'@'
+0001ce10: 3a20 3535 7d29 2c20 3138 3a20 2831 2c20  : 55}), 18: (1, 
+0001ce20: 7b27 4027 3a20 3535 7d29 2c20 3134 3a20  {'@': 55}), 14: 
+0001ce30: 2831 2c20 7b27 4027 3a20 3535 7d29 2c20  (1, {'@': 55}), 
+0001ce40: 313a 2028 312c 207b 2740 273a 2035 357d  1: (1, {'@': 55}
+0001ce50: 297d 2c20 3339 3a20 7b33 303a 2028 302c  )}, 39: {30: (0,
+0001ce60: 2034 3729 2c20 3239 3a20 2830 2c20 3230   47), 29: (0, 20
+0001ce70: 292c 2033 363a 2028 302c 2034 3929 2c20  ), 36: (0, 49), 
+0001ce80: 3134 3a20 2830 2c20 3130 292c 2031 333a  14: (0, 10), 13:
+0001ce90: 2028 302c 2032 3729 2c20 3136 3a20 2830   (0, 27), 16: (0
+0001cea0: 2c20 3236 292c 2031 3a20 2830 2c20 3131  , 26), 1: (0, 11
+0001ceb0: 297d 2c20 3430 3a20 7b30 3a20 2830 2c20  )}, 40: {0: (0, 
+0001cec0: 3434 292c 2033 373a 2028 302c 2030 292c  44), 37: (0, 0),
+0001ced0: 2031 3a20 2830 2c20 3333 292c 2032 3a20   1: (0, 33), 2: 
+0001cee0: 2830 2c20 3535 292c 2033 3a20 2830 2c20  (0, 55), 3: (0, 
+0001cef0: 3433 292c 2034 3a20 2830 2c20 3530 292c  43), 4: (0, 50),
+0001cf00: 2031 303a 2028 302c 2031 292c 2035 3a20   10: (0, 1), 5: 
+0001cf10: 2830 2c20 3238 292c 2033 383a 2028 302c  (0, 28), 38: (0,
+0001cf20: 2035 3629 2c20 363a 2028 302c 2031 3529   56), 6: (0, 15)
+0001cf30: 2c20 373a 2028 302c 2032 3529 2c20 383a  , 7: (0, 25), 8:
+0001cf40: 2028 302c 2035 3829 2c20 393a 2028 302c   (0, 58), 9: (0,
+0001cf50: 2032 3429 2c20 3131 3a20 2830 2c20 3532   24), 11: (0, 52
+0001cf60: 292c 2031 323a 2028 302c 2034 3629 2c20  ), 12: (0, 46), 
+0001cf70: 3133 3a20 2830 2c20 3431 292c 2031 343a  13: (0, 41), 14:
+0001cf80: 2028 302c 2033 3429 2c20 3135 3a20 2830   (0, 34), 15: (0
+0001cf90: 2c20 3438 292c 2031 363a 2028 302c 2032  , 48), 16: (0, 2
+0001cfa0: 3629 2c20 3137 3a20 2830 2c20 3429 7d2c  6), 17: (0, 4)},
+0001cfb0: 2034 313a 207b 3132 3a20 2831 2c20 7b27   41: {12: (1, {'
+0001cfc0: 4027 3a20 3433 7d29 2c20 3233 3a20 2831  @': 43}), 23: (1
+0001cfd0: 2c20 7b27 4027 3a20 3433 7d29 2c20 363a  , {'@': 43}), 6:
+0001cfe0: 2028 312c 207b 2740 273a 2034 337d 292c   (1, {'@': 43}),
+0001cff0: 2032 323a 2028 312c 207b 2740 273a 2034   22: (1, {'@': 4
+0001d000: 337d 292c 2030 3a20 2831 2c20 7b27 4027  3}), 0: (1, {'@'
+0001d010: 3a20 3433 7d29 2c20 3136 3a20 2831 2c20  : 43}), 16: (1, 
+0001d020: 7b27 4027 3a20 3433 7d29 2c20 3234 3a20  {'@': 43}), 24: 
+0001d030: 2831 2c20 7b27 4027 3a20 3433 7d29 2c20  (1, {'@': 43}), 
+0001d040: 313a 2028 312c 207b 2740 273a 2034 337d  1: (1, {'@': 43}
+0001d050: 292c 2032 353a 2028 312c 207b 2740 273a  ), 25: (1, {'@':
+0001d060: 2034 337d 292c 2038 3a20 2831 2c20 7b27   43}), 8: (1, {'
+0001d070: 4027 3a20 3433 7d29 2c20 323a 2028 312c  @': 43}), 2: (1,
+0001d080: 207b 2740 273a 2034 337d 292c 2031 383a   {'@': 43}), 18:
+0001d090: 2028 312c 207b 2740 273a 2034 337d 292c   (1, {'@': 43}),
+0001d0a0: 2031 343a 2028 312c 207b 2740 273a 2034   14: (1, {'@': 4
+0001d0b0: 337d 292c 2032 363a 2028 312c 207b 2740  3}), 26: (1, {'@
+0001d0c0: 273a 2034 337d 292c 2032 313a 2028 312c  ': 43}), 21: (1,
+0001d0d0: 207b 2740 273a 2034 337d 297d 2c20 3432   {'@': 43})}, 42
+0001d0e0: 3a20 7b32 313a 2028 312c 207b 2740 273a  : {21: (1, {'@':
+0001d0f0: 2035 347d 292c 2031 323a 2028 312c 207b   54}), 12: (1, {
+0001d100: 2740 273a 2035 347d 292c 2036 3a20 2831  '@': 54}), 6: (1
+0001d110: 2c20 7b27 4027 3a20 3534 7d29 2c20 3232  , {'@': 54}), 22
+0001d120: 3a20 2831 2c20 7b27 4027 3a20 3534 7d29  : (1, {'@': 54})
+0001d130: 2c20 303a 2028 312c 207b 2740 273a 2035  , 0: (1, {'@': 5
+0001d140: 347d 292c 2031 363a 2028 312c 207b 2740  4}), 16: (1, {'@
+0001d150: 273a 2035 347d 292c 2038 3a20 2831 2c20  ': 54}), 8: (1, 
+0001d160: 7b27 4027 3a20 3534 7d29 2c20 323a 2028  {'@': 54}), 2: (
+0001d170: 312c 207b 2740 273a 2035 347d 292c 2031  1, {'@': 54}), 1
+0001d180: 383a 2028 312c 207b 2740 273a 2035 347d  8: (1, {'@': 54}
+0001d190: 292c 2031 343a 2028 312c 207b 2740 273a  ), 14: (1, {'@':
+0001d1a0: 2035 347d 292c 2031 3a20 2831 2c20 7b27   54}), 1: (1, {'
+0001d1b0: 4027 3a20 3534 7d29 7d2c 2034 333a 207b  @': 54})}, 43: {
+0001d1c0: 3232 3a20 2830 2c20 3337 292c 2031 383a  22: (0, 37), 18:
+0001d1d0: 2028 312c 207b 2740 273a 2032 367d 292c   (1, {'@': 26}),
+0001d1e0: 2032 313a 2028 312c 207b 2740 273a 2032   21: (1, {'@': 2
+0001d1f0: 367d 297d 2c20 3434 3a20 7b30 3a20 2830  6})}, 44: {0: (0
+0001d200: 2c20 3434 292c 2031 3a20 2830 2c20 3333  , 44), 1: (0, 33
+0001d210: 292c 2032 3a20 2830 2c20 3535 292c 2033  ), 2: (0, 55), 3
+0001d220: 3a20 2830 2c20 3433 292c 2034 3a20 2830  : (0, 43), 4: (0
+0001d230: 2c20 3530 292c 2035 3a20 2830 2c20 3238  , 50), 5: (0, 28
+0001d240: 292c 2033 393a 2028 302c 2035 292c 2031  ), 39: (0, 5), 1
+0001d250: 303a 2028 302c 2033 3029 2c20 363a 2028  0: (0, 30), 6: (
+0001d260: 302c 2031 3529 2c20 373a 2028 302c 2032  0, 15), 7: (0, 2
+0001d270: 3529 2c20 383a 2028 302c 2035 3829 2c20  5), 8: (0, 58), 
+0001d280: 393a 2028 302c 2032 3429 2c20 3131 3a20  9: (0, 24), 11: 
+0001d290: 2830 2c20 3532 292c 2031 323a 2028 302c  (0, 52), 12: (0,
+0001d2a0: 2034 3629 2c20 3133 3a20 2830 2c20 3431   46), 13: (0, 41
+0001d2b0: 292c 2031 343a 2028 302c 2033 3429 2c20  ), 14: (0, 34), 
+0001d2c0: 3135 3a20 2830 2c20 3438 292c 2031 363a  15: (0, 48), 16:
+0001d2d0: 2028 302c 2032 3629 2c20 3137 3a20 2830   (0, 26), 17: (0
+0001d2e0: 2c20 3429 7d2c 2034 353a 207b 3231 3a20  , 4)}, 45: {21: 
+0001d2f0: 2831 2c20 7b27 4027 3a20 3537 7d29 2c20  (1, {'@': 57}), 
+0001d300: 3132 3a20 2831 2c20 7b27 4027 3a20 3537  12: (1, {'@': 57
+0001d310: 7d29 2c20 363a 2028 312c 207b 2740 273a  }), 6: (1, {'@':
+0001d320: 2035 377d 292c 2032 323a 2028 312c 207b   57}), 22: (1, {
+0001d330: 2740 273a 2035 377d 292c 2030 3a20 2831  '@': 57}), 0: (1
+0001d340: 2c20 7b27 4027 3a20 3537 7d29 2c20 3136  , {'@': 57}), 16
+0001d350: 3a20 2831 2c20 7b27 4027 3a20 3537 7d29  : (1, {'@': 57})
+0001d360: 2c20 383a 2028 312c 207b 2740 273a 2035  , 8: (1, {'@': 5
+0001d370: 377d 292c 2032 3a20 2831 2c20 7b27 4027  7}), 2: (1, {'@'
+0001d380: 3a20 3537 7d29 2c20 3138 3a20 2831 2c20  : 57}), 18: (1, 
+0001d390: 7b27 4027 3a20 3537 7d29 2c20 3134 3a20  {'@': 57}), 14: 
+0001d3a0: 2831 2c20 7b27 4027 3a20 3537 7d29 2c20  (1, {'@': 57}), 
+0001d3b0: 313a 2028 312c 207b 2740 273a 2035 377d  1: (1, {'@': 57}
+0001d3c0: 297d 2c20 3436 3a20 7b31 323a 2028 312c  )}, 46: {12: (1,
+0001d3d0: 207b 2740 273a 2033 307d 292c 2036 3a20   {'@': 30}), 6: 
+0001d3e0: 2831 2c20 7b27 4027 3a20 3330 7d29 2c20  (1, {'@': 30}), 
+0001d3f0: 3232 3a20 2831 2c20 7b27 4027 3a20 3330  22: (1, {'@': 30
+0001d400: 7d29 2c20 303a 2028 312c 207b 2740 273a  }), 0: (1, {'@':
+0001d410: 2033 307d 292c 2031 363a 2028 312c 207b   30}), 16: (1, {
+0001d420: 2740 273a 2033 307d 292c 2038 3a20 2831  '@': 30}), 8: (1
+0001d430: 2c20 7b27 4027 3a20 3330 7d29 2c20 323a  , {'@': 30}), 2:
+0001d440: 2028 312c 207b 2740 273a 2033 307d 292c   (1, {'@': 30}),
+0001d450: 2031 383a 2028 312c 207b 2740 273a 2033   18: (1, {'@': 3
+0001d460: 307d 292c 2031 343a 2028 312c 207b 2740  0}), 14: (1, {'@
+0001d470: 273a 2033 307d 292c 2031 3a20 2831 2c20  ': 30}), 1: (1, 
+0001d480: 7b27 4027 3a20 3330 7d29 2c20 3231 3a20  {'@': 30}), 21: 
+0001d490: 2831 2c20 7b27 4027 3a20 3330 7d29 7d2c  (1, {'@': 30})},
+0001d4a0: 2034 373a 207b 3237 3a20 2831 2c20 7b27   47: {27: (1, {'
+0001d4b0: 4027 3a20 3632 7d29 2c20 313a 2028 312c  @': 62}), 1: (1,
+0001d4c0: 207b 2740 273a 2036 327d 292c 2031 343a   {'@': 62}), 14:
+0001d4d0: 2028 312c 207b 2740 273a 2036 327d 292c   (1, {'@': 62}),
+0001d4e0: 2031 363a 2028 312c 207b 2740 273a 2036   16: (1, {'@': 6
+0001d4f0: 327d 297d 2c20 3438 3a20 7b30 3a20 2830  2})}, 48: {0: (0
+0001d500: 2c20 3434 292c 2037 3a20 2830 2c20 3134  , 44), 7: (0, 14
+0001d510: 292c 2031 3a20 2830 2c20 3333 292c 2032  ), 1: (0, 33), 2
+0001d520: 3a20 2830 2c20 3535 292c 2034 3a20 2830  : (0, 55), 4: (0
+0001d530: 2c20 3530 292c 2035 3a20 2830 2c20 3238  , 50), 5: (0, 28
+0001d540: 292c 2036 3a20 2830 2c20 3135 292c 2038  ), 6: (0, 15), 8
+0001d550: 3a20 2830 2c20 3538 292c 2039 3a20 2830  : (0, 58), 9: (0
+0001d560: 2c20 3234 292c 2031 313a 2028 302c 2035  , 24), 11: (0, 5
+0001d570: 3229 2c20 3132 3a20 2830 2c20 3436 292c  2), 12: (0, 46),
+0001d580: 2031 333a 2028 302c 2034 3129 2c20 3134   13: (0, 41), 14
+0001d590: 3a20 2830 2c20 3334 292c 2031 363a 2028  : (0, 34), 16: (
+0001d5a0: 302c 2032 3629 2c20 3137 3a20 2830 2c20  0, 26), 17: (0, 
+0001d5b0: 3429 2c20 3138 3a20 2831 2c20 7b27 4027  4), 18: (1, {'@'
+0001d5c0: 3a20 3237 7d29 2c20 3232 3a20 2831 2c20  : 27}), 22: (1, 
+0001d5d0: 7b27 4027 3a20 3237 7d29 2c20 3231 3a20  {'@': 27}), 21: 
+0001d5e0: 2831 2c20 7b27 4027 3a20 3237 7d29 7d2c  (1, {'@': 27})},
+0001d5f0: 2034 393a 207b 3239 3a20 2830 2c20 3230   49: {29: (0, 20
+0001d600: 292c 2033 303a 2028 302c 2037 292c 2031  ), 30: (0, 7), 1
+0001d610: 343a 2028 302c 2031 3029 2c20 3133 3a20  4: (0, 10), 13: 
+0001d620: 2830 2c20 3237 292c 2031 363a 2028 302c  (0, 27), 16: (0,
+0001d630: 2032 3629 2c20 313a 2028 302c 2031 3129   26), 1: (0, 11)
+0001d640: 2c20 3237 3a20 2830 2c20 3929 7d2c 2035  , 27: (0, 9)}, 5
+0001d650: 303a 207b 3331 3a20 2830 2c20 3331 292c  0: {31: (0, 31),
+0001d660: 2032 353a 2028 302c 2033 3829 2c20 3234   25: (0, 38), 24
+0001d670: 3a20 2830 2c20 3335 292c 2033 323a 2028  : (0, 35), 32: (
+0001d680: 302c 2031 3929 2c20 3333 3a20 2830 2c20  0, 19), 33: (0, 
+0001d690: 3336 292c 2032 333a 2028 302c 2038 292c  36), 23: (0, 8),
+0001d6a0: 2032 363a 2028 302c 2034 3229 2c20 3132   26: (0, 42), 12
+0001d6b0: 3a20 2831 2c20 7b27 4027 3a20 3337 7d29  : (1, {'@': 37})
+0001d6c0: 2c20 363a 2028 312c 207b 2740 273a 2033  , 6: (1, {'@': 3
+0001d6d0: 377d 292c 2032 323a 2028 312c 207b 2740  7}), 22: (1, {'@
+0001d6e0: 273a 2033 377d 292c 2030 3a20 2831 2c20  ': 37}), 0: (1, 
+0001d6f0: 7b27 4027 3a20 3337 7d29 2c20 3136 3a20  {'@': 37}), 16: 
+0001d700: 2831 2c20 7b27 4027 3a20 3337 7d29 2c20  (1, {'@': 37}), 
+0001d710: 383a 2028 312c 207b 2740 273a 2033 377d  8: (1, {'@': 37}
+0001d720: 292c 2032 3a20 2831 2c20 7b27 4027 3a20  ), 2: (1, {'@': 
+0001d730: 3337 7d29 2c20 3138 3a20 2831 2c20 7b27  37}), 18: (1, {'
+0001d740: 4027 3a20 3337 7d29 2c20 3134 3a20 2831  @': 37}), 14: (1
+0001d750: 2c20 7b27 4027 3a20 3337 7d29 2c20 313a  , {'@': 37}), 1:
+0001d760: 2028 312c 207b 2740 273a 2033 377d 292c   (1, {'@': 37}),
+0001d770: 2032 313a 2028 312c 207b 2740 273a 2033   21: (1, {'@': 3
+0001d780: 377d 297d 2c20 3531 3a20 7b32 313a 2028  7})}, 51: {21: (
+0001d790: 302c 2031 3329 7d2c 2035 323a 207b 3132  0, 13)}, 52: {12
+0001d7a0: 3a20 2831 2c20 7b27 4027 3a20 3239 7d29  : (1, {'@': 29})
+0001d7b0: 2c20 363a 2028 312c 207b 2740 273a 2032  , 6: (1, {'@': 2
+0001d7c0: 397d 292c 2032 323a 2028 312c 207b 2740  9}), 22: (1, {'@
+0001d7d0: 273a 2032 397d 292c 2030 3a20 2831 2c20  ': 29}), 0: (1, 
+0001d7e0: 7b27 4027 3a20 3239 7d29 2c20 3136 3a20  {'@': 29}), 16: 
+0001d7f0: 2831 2c20 7b27 4027 3a20 3239 7d29 2c20  (1, {'@': 29}), 
+0001d800: 383a 2028 312c 207b 2740 273a 2032 397d  8: (1, {'@': 29}
+0001d810: 292c 2032 3a20 2831 2c20 7b27 4027 3a20  ), 2: (1, {'@': 
+0001d820: 3239 7d29 2c20 3138 3a20 2831 2c20 7b27  29}), 18: (1, {'
+0001d830: 4027 3a20 3239 7d29 2c20 3134 3a20 2831  @': 29}), 14: (1
+0001d840: 2c20 7b27 4027 3a20 3239 7d29 2c20 313a  , {'@': 29}), 1:
+0001d850: 2028 312c 207b 2740 273a 2032 397d 292c   (1, {'@': 29}),
+0001d860: 2032 313a 2028 312c 207b 2740 273a 2032   21: (1, {'@': 2
+0001d870: 397d 297d 2c20 3533 3a20 7b31 383a 2028  9})}, 53: {18: (
+0001d880: 312c 207b 2740 273a 2032 357d 292c 2032  1, {'@': 25}), 2
+0001d890: 313a 2028 312c 207b 2740 273a 2032 357d  1: (1, {'@': 25}
+0001d8a0: 297d 2c20 3534 3a20 7b31 323a 2028 312c  )}, 54: {12: (1,
+0001d8b0: 207b 2740 273a 2034 357d 292c 2032 333a   {'@': 45}), 23:
+0001d8c0: 2028 312c 207b 2740 273a 2034 357d 292c   (1, {'@': 45}),
+0001d8d0: 2036 3a20 2831 2c20 7b27 4027 3a20 3435   6: (1, {'@': 45
+0001d8e0: 7d29 2c20 3232 3a20 2831 2c20 7b27 4027  }), 22: (1, {'@'
+0001d8f0: 3a20 3435 7d29 2c20 303a 2028 312c 207b  : 45}), 0: (1, {
+0001d900: 2740 273a 2034 357d 292c 2031 363a 2028  '@': 45}), 16: (
+0001d910: 312c 207b 2740 273a 2034 357d 292c 2032  1, {'@': 45}), 2
+0001d920: 343a 2028 312c 207b 2740 273a 2034 357d  4: (1, {'@': 45}
+0001d930: 292c 2031 3a20 2831 2c20 7b27 4027 3a20  ), 1: (1, {'@': 
+0001d940: 3435 7d29 2c20 3235 3a20 2831 2c20 7b27  45}), 25: (1, {'
+0001d950: 4027 3a20 3435 7d29 2c20 383a 2028 312c  @': 45}), 8: (1,
+0001d960: 207b 2740 273a 2034 357d 292c 2032 3a20   {'@': 45}), 2: 
+0001d970: 2831 2c20 7b27 4027 3a20 3435 7d29 2c20  (1, {'@': 45}), 
+0001d980: 3138 3a20 2831 2c20 7b27 4027 3a20 3435  18: (1, {'@': 45
+0001d990: 7d29 2c20 3134 3a20 2831 2c20 7b27 4027  }), 14: (1, {'@'
+0001d9a0: 3a20 3435 7d29 2c20 3236 3a20 2831 2c20  : 45}), 26: (1, 
+0001d9b0: 7b27 4027 3a20 3435 7d29 2c20 3231 3a20  {'@': 45}), 21: 
+0001d9c0: 2831 2c20 7b27 4027 3a20 3435 7d29 7d2c  (1, {'@': 45})},
+0001d9d0: 2035 353a 207b 3132 3a20 2831 2c20 7b27   55: {12: (1, {'
+0001d9e0: 4027 3a20 3331 7d29 2c20 363a 2028 312c  @': 31}), 6: (1,
+0001d9f0: 207b 2740 273a 2033 317d 292c 2032 323a   {'@': 31}), 22:
+0001da00: 2028 312c 207b 2740 273a 2033 317d 292c   (1, {'@': 31}),
+0001da10: 2030 3a20 2831 2c20 7b27 4027 3a20 3331   0: (1, {'@': 31
+0001da20: 7d29 2c20 3136 3a20 2831 2c20 7b27 4027  }), 16: (1, {'@'
+0001da30: 3a20 3331 7d29 2c20 383a 2028 312c 207b  : 31}), 8: (1, {
+0001da40: 2740 273a 2033 317d 292c 2032 3a20 2831  '@': 31}), 2: (1
+0001da50: 2c20 7b27 4027 3a20 3331 7d29 2c20 3138  , {'@': 31}), 18
+0001da60: 3a20 2831 2c20 7b27 4027 3a20 3331 7d29  : (1, {'@': 31})
+0001da70: 2c20 3134 3a20 2831 2c20 7b27 4027 3a20  , 14: (1, {'@': 
+0001da80: 3331 7d29 2c20 313a 2028 312c 207b 2740  31}), 1: (1, {'@
+0001da90: 273a 2033 317d 292c 2032 313a 2028 312c  ': 31}), 21: (1,
+0001daa0: 207b 2740 273a 2033 317d 297d 2c20 3536   {'@': 31})}, 56
+0001dab0: 3a20 7b7d 2c20 3537 3a20 7b31 323a 2028  : {}, 57: {12: (
+0001dac0: 312c 207b 2740 273a 2035 307d 292c 2032  1, {'@': 50}), 2
+0001dad0: 333a 2028 312c 207b 2740 273a 2035 307d  3: (1, {'@': 50}
+0001dae0: 292c 2036 3a20 2831 2c20 7b27 4027 3a20  ), 6: (1, {'@': 
+0001daf0: 3530 7d29 2c20 3232 3a20 2831 2c20 7b27  50}), 22: (1, {'
+0001db00: 4027 3a20 3530 7d29 2c20 303a 2028 312c  @': 50}), 0: (1,
+0001db10: 207b 2740 273a 2035 307d 292c 2031 363a   {'@': 50}), 16:
+0001db20: 2028 312c 207b 2740 273a 2035 307d 292c   (1, {'@': 50}),
+0001db30: 2032 343a 2028 312c 207b 2740 273a 2035   24: (1, {'@': 5
+0001db40: 307d 292c 2031 3a20 2831 2c20 7b27 4027  0}), 1: (1, {'@'
+0001db50: 3a20 3530 7d29 2c20 3235 3a20 2831 2c20  : 50}), 25: (1, 
+0001db60: 7b27 4027 3a20 3530 7d29 2c20 383a 2028  {'@': 50}), 8: (
+0001db70: 312c 207b 2740 273a 2035 307d 292c 2032  1, {'@': 50}), 2
+0001db80: 3a20 2831 2c20 7b27 4027 3a20 3530 7d29  : (1, {'@': 50})
+0001db90: 2c20 3138 3a20 2831 2c20 7b27 4027 3a20  , 18: (1, {'@': 
+0001dba0: 3530 7d29 2c20 3134 3a20 2831 2c20 7b27  50}), 14: (1, {'
+0001dbb0: 4027 3a20 3530 7d29 2c20 3236 3a20 2831  @': 50}), 26: (1
+0001dbc0: 2c20 7b27 4027 3a20 3530 7d29 2c20 3231  , {'@': 50}), 21
+0001dbd0: 3a20 2831 2c20 7b27 4027 3a20 3530 7d29  : (1, {'@': 50})
+0001dbe0: 2c20 3237 3a20 2831 2c20 7b27 4027 3a20  , 27: (1, {'@': 
+0001dbf0: 3530 7d29 7d2c 2035 383a 207b 3330 3a20  50})}, 58: {30: 
+0001dc00: 2830 2c20 3437 292c 2032 393a 2028 302c  (0, 47), 29: (0,
+0001dc10: 2032 3029 2c20 3134 3a20 2830 2c20 3130   20), 14: (0, 10
+0001dc20: 292c 2033 363a 2028 302c 2031 3229 2c20  ), 36: (0, 12), 
+0001dc30: 3430 3a20 2830 2c20 3339 292c 2031 333a  40: (0, 39), 13:
+0001dc40: 2028 302c 2032 3729 2c20 3136 3a20 2830   (0, 27), 16: (0
+0001dc50: 2c20 3236 292c 2031 3a20 2830 2c20 3131  , 26), 1: (0, 11
+0001dc60: 297d 2c20 3539 3a20 7b31 383a 2028 312c  )}, 59: {18: (1,
+0001dc70: 207b 2740 273a 2032 337d 297d 7d2c 2027   {'@': 23})}}, '
+0001dc80: 7374 6172 745f 7374 6174 6573 273a 207b  start_states': {
+0001dc90: 2773 7461 7274 273a 2034 307d 2c20 2765  'start': 40}, 'e
+0001dca0: 6e64 5f73 7461 7465 7327 3a20 7b27 7374  nd_states': {'st
+0001dcb0: 6172 7427 3a20 3536 7d7d 2c20 275f 5f74  art': 56}}, '__t
+0001dcc0: 7970 655f 5f27 3a20 2750 6172 7369 6e67  ype__': 'Parsing
+0001dcd0: 4672 6f6e 7465 6e64 277d 2c20 2772 756c  Frontend'}, 'rul
+0001dce0: 6573 273a 205b 7b27 4027 3a20 3233 7d2c  es': [{'@': 23},
+0001dcf0: 207b 2740 273a 2032 347d 2c20 7b27 4027   {'@': 24}, {'@'
+0001dd00: 3a20 3235 7d2c 207b 2740 273a 2032 367d  : 25}, {'@': 26}
+0001dd10: 2c20 7b27 4027 3a20 3237 7d2c 207b 2740  , {'@': 27}, {'@
+0001dd20: 273a 2032 387d 2c20 7b27 4027 3a20 3239  ': 28}, {'@': 29
+0001dd30: 7d2c 207b 2740 273a 2033 307d 2c20 7b27  }, {'@': 30}, {'
+0001dd40: 4027 3a20 3331 7d2c 207b 2740 273a 2033  @': 31}, {'@': 3
+0001dd50: 327d 2c20 7b27 4027 3a20 3333 7d2c 207b  2}, {'@': 33}, {
+0001dd60: 2740 273a 2033 347d 2c20 7b27 4027 3a20  '@': 34}, {'@': 
+0001dd70: 3335 7d2c 207b 2740 273a 2033 367d 2c20  35}, {'@': 36}, 
+0001dd80: 7b27 4027 3a20 3337 7d2c 207b 2740 273a  {'@': 37}, {'@':
+0001dd90: 2033 387d 2c20 7b27 4027 3a20 3339 7d2c   38}, {'@': 39},
+0001dda0: 207b 2740 273a 2034 307d 2c20 7b27 4027   {'@': 40}, {'@'
+0001ddb0: 3a20 3431 7d2c 207b 2740 273a 2034 327d  : 41}, {'@': 42}
+0001ddc0: 2c20 7b27 4027 3a20 3433 7d2c 207b 2740  , {'@': 43}, {'@
+0001ddd0: 273a 2034 347d 2c20 7b27 4027 3a20 3435  ': 44}, {'@': 45
+0001dde0: 7d2c 207b 2740 273a 2034 367d 2c20 7b27  }, {'@': 46}, {'
+0001ddf0: 4027 3a20 3437 7d2c 207b 2740 273a 2034  @': 47}, {'@': 4
+0001de00: 387d 2c20 7b27 4027 3a20 3439 7d2c 207b  8}, {'@': 49}, {
+0001de10: 2740 273a 2035 307d 2c20 7b27 4027 3a20  '@': 50}, {'@': 
+0001de20: 3531 7d2c 207b 2740 273a 2035 327d 2c20  51}, {'@': 52}, 
+0001de30: 7b27 4027 3a20 3533 7d2c 207b 2740 273a  {'@': 53}, {'@':
+0001de40: 2035 347d 2c20 7b27 4027 3a20 3535 7d2c   54}, {'@': 55},
+0001de50: 207b 2740 273a 2035 367d 2c20 7b27 4027   {'@': 56}, {'@'
+0001de60: 3a20 3537 7d2c 207b 2740 273a 2035 387d  : 57}, {'@': 58}
+0001de70: 2c20 7b27 4027 3a20 3539 7d2c 207b 2740  , {'@': 59}, {'@
+0001de80: 273a 2036 307d 2c20 7b27 4027 3a20 3631  ': 60}, {'@': 61
+0001de90: 7d2c 207b 2740 273a 2036 327d 2c20 7b27  }, {'@': 62}, {'
+0001dea0: 4027 3a20 3633 7d5d 2c20 276f 7074 696f  @': 63}], 'optio
+0001deb0: 6e73 273a 207b 2764 6562 7567 273a 2046  ns': {'debug': F
+0001dec0: 616c 7365 2c20 2773 7472 6963 7427 3a20  alse, 'strict': 
+0001ded0: 4661 6c73 652c 2027 6b65 6570 5f61 6c6c  False, 'keep_all
+0001dee0: 5f74 6f6b 656e 7327 3a20 4661 6c73 652c  _tokens': False,
+0001def0: 2027 7472 6565 5f63 6c61 7373 273a 204e   'tree_class': N
+0001df00: 6f6e 652c 2027 6361 6368 6527 3a20 4661  one, 'cache': Fa
+0001df10: 6c73 652c 2027 706f 7374 6c65 7827 3a20  lse, 'postlex': 
+0001df20: 4e6f 6e65 2c20 2770 6172 7365 7227 3a20  None, 'parser': 
+0001df30: 276c 616c 7227 2c20 276c 6578 6572 273a  'lalr', 'lexer':
+0001df40: 2027 636f 6e74 6578 7475 616c 272c 2027   'contextual', '
+0001df50: 7472 616e 7366 6f72 6d65 7227 3a20 4e6f  transformer': No
+0001df60: 6e65 2c20 2773 7461 7274 273a 205b 2773  ne, 'start': ['s
+0001df70: 7461 7274 275d 2c20 2770 7269 6f72 6974  tart'], 'priorit
+0001df80: 7927 3a20 276e 6f72 6d61 6c27 2c20 2761  y': 'normal', 'a
+0001df90: 6d62 6967 7569 7479 273a 2027 6175 746f  mbiguity': 'auto
+0001dfa0: 272c 2027 7265 6765 7827 3a20 4661 6c73  ', 'regex': Fals
+0001dfb0: 652c 2027 7072 6f70 6167 6174 655f 706f  e, 'propagate_po
+0001dfc0: 7369 7469 6f6e 7327 3a20 4661 6c73 652c  sitions': False,
+0001dfd0: 2027 6c65 7865 725f 6361 6c6c 6261 636b   'lexer_callback
+0001dfe0: 7327 3a20 7b7d 2c20 276d 6179 6265 5f70  s': {}, 'maybe_p
+0001dff0: 6c61 6365 686f 6c64 6572 7327 3a20 4661  laceholders': Fa
+0001e000: 6c73 652c 2027 6564 6974 5f74 6572 6d69  lse, 'edit_termi
+0001e010: 6e61 6c73 273a 204e 6f6e 652c 2027 675f  nals': None, 'g_
+0001e020: 7265 6765 785f 666c 6167 7327 3a20 302c  regex_flags': 0,
+0001e030: 2027 7573 655f 6279 7465 7327 3a20 4661   'use_bytes': Fa
+0001e040: 6c73 652c 2027 6f72 6465 7265 645f 7365  lse, 'ordered_se
+0001e050: 7473 273a 2054 7275 652c 2027 696d 706f  ts': True, 'impo
+0001e060: 7274 5f70 6174 6873 273a 205b 5d2c 2027  rt_paths': [], '
+0001e070: 736f 7572 6365 5f70 6174 6827 3a20 4e6f  source_path': No
+0001e080: 6e65 2c20 275f 706c 7567 696e 7327 3a20  ne, '_plugins': 
+0001e090: 7b7d 7d2c 2027 5f5f 7479 7065 5f5f 273a  {}}, '__type__':
+0001e0a0: 2027 4c61 726b 277d 0a29 0a4d 454d 4f20   'Lark'}.).MEMO 
+0001e0b0: 3d20 280a 7b30 3a20 7b27 6e61 6d65 273a  = (.{0: {'name':
+0001e0c0: 2027 4752 4f55 505f 4e4f 4e5f 4341 5054   'GROUP_NON_CAPT
+0001e0d0: 5552 494e 475f 4d4f 4449 4649 4552 272c  URING_MODIFIER',
+0001e0e0: 2027 7061 7474 6572 6e27 3a20 7b27 7661   'pattern': {'va
+0001e0f0: 6c75 6527 3a20 273f 3a27 2c20 2766 6c61  lue': '?:', 'fla
+0001e100: 6773 273a 205b 5d2c 2027 7261 7727 3a20  gs': [], 'raw': 
+0001e110: 2722 3f3a 2227 2c20 275f 5f74 7970 655f  '"?:"', '__type_
+0001e120: 5f27 3a20 2750 6174 7465 726e 5374 7227  _': 'PatternStr'
+0001e130: 7d2c 2027 7072 696f 7269 7479 273a 2030  }, 'priority': 0
+0001e140: 2c20 275f 5f74 7970 655f 5f27 3a20 2754  , '__type__': 'T
+0001e150: 6572 6d69 6e61 6c44 6566 277d 2c20 313a  erminalDef'}, 1:
+0001e160: 207b 276e 616d 6527 3a20 274d 4154 4348   {'name': 'MATCH
+0001e170: 5f41 4e59 5f43 4841 5241 4354 4552 272c  _ANY_CHARACTER',
+0001e180: 2027 7061 7474 6572 6e27 3a20 7b27 7661   'pattern': {'va
+0001e190: 6c75 6527 3a20 272e 272c 2027 666c 6167  lue': '.', 'flag
+0001e1a0: 7327 3a20 5b5d 2c20 2772 6177 273a 2027  s': [], 'raw': '
+0001e1b0: 222e 2227 2c20 275f 5f74 7970 655f 5f27  "."', '__type__'
+0001e1c0: 3a20 2750 6174 7465 726e 5374 7227 7d2c  : 'PatternStr'},
+0001e1d0: 2027 7072 696f 7269 7479 273a 2030 2c20   'priority': 0, 
+0001e1e0: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+0001e1f0: 6d69 6e61 6c44 6566 277d 2c20 323a 207b  minalDef'}, 2: {
+0001e200: 276e 616d 6527 3a20 2743 4841 5241 4354  'name': 'CHARACT
+0001e210: 4552 5f47 524f 5550 5f4e 4547 4154 4956  ER_GROUP_NEGATIV
+0001e220: 455f 4d4f 4449 4649 4552 272c 2027 7061  E_MODIFIER', 'pa
+0001e230: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001e240: 3a20 275e 272c 2027 666c 6167 7327 3a20  : '^', 'flags': 
+0001e250: 5b5d 2c20 2772 6177 273a 2027 225e 2227  [], 'raw': '"^"'
+0001e260: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
+0001e270: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
+0001e280: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001e290: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001e2a0: 6c44 6566 277d 2c20 333a 207b 276e 616d  lDef'}, 3: {'nam
+0001e2b0: 6527 3a20 2743 4841 5241 4354 4552 5f43  e': 'CHARACTER_C
+0001e2c0: 4c41 5353 272c 2027 7061 7474 6572 6e27  LASS', 'pattern'
+0001e2d0: 3a20 7b27 7661 6c75 6527 3a20 2728 3f3a  : {'value': '(?:
+0001e2e0: 5c5c 5c5c 777c 5c5c 5c5c 577c 5c5c 5c5c  \\\\w|\\\\W|\\\\
+0001e2f0: 647c 5c5c 5c5c 4429 272c 2027 666c 6167  d|\\\\D)', 'flag
+0001e300: 7327 3a20 5b5d 2c20 2772 6177 273a 204e  s': [], 'raw': N
+0001e310: 6f6e 652c 2027 5f77 6964 7468 273a 205b  one, '_width': [
+0001e320: 322c 2032 5d2c 2027 5f5f 7479 7065 5f5f  2, 2], '__type__
+0001e330: 273a 2027 5061 7474 6572 6e52 4527 7d2c  ': 'PatternRE'},
+0001e340: 2027 7072 696f 7269 7479 273a 2030 2c20   'priority': 0, 
+0001e350: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+0001e360: 6d69 6e61 6c44 6566 277d 2c20 343a 207b  minalDef'}, 4: {
+0001e370: 276e 616d 6527 3a20 275a 4552 4f5f 4f52  'name': 'ZERO_OR
+0001e380: 5f4d 4f52 455f 5155 414e 5449 4649 4552  _MORE_QUANTIFIER
+0001e390: 272c 2027 7061 7474 6572 6e27 3a20 7b27  ', 'pattern': {'
+0001e3a0: 7661 6c75 6527 3a20 272a 272c 2027 666c  value': '*', 'fl
+0001e3b0: 6167 7327 3a20 5b5d 2c20 2772 6177 273a  ags': [], 'raw':
+0001e3c0: 2027 222a 2227 2c20 275f 5f74 7970 655f   '"*"', '__type_
+0001e3d0: 5f27 3a20 2750 6174 7465 726e 5374 7227  _': 'PatternStr'
+0001e3e0: 7d2c 2027 7072 696f 7269 7479 273a 2030  }, 'priority': 0
+0001e3f0: 2c20 275f 5f74 7970 655f 5f27 3a20 2754  , '__type__': 'T
+0001e400: 6572 6d69 6e61 6c44 6566 277d 2c20 353a  erminalDef'}, 5:
+0001e410: 207b 276e 616d 6527 3a20 274f 4e45 5f4f   {'name': 'ONE_O
+0001e420: 525f 4d4f 5245 5f51 5541 4e54 4946 4945  R_MORE_QUANTIFIE
+0001e430: 5227 2c20 2770 6174 7465 726e 273a 207b  R', 'pattern': {
+0001e440: 2776 616c 7565 273a 2027 2b27 2c20 2766  'value': '+', 'f
+0001e450: 6c61 6773 273a 205b 5d2c 2027 7261 7727  lags': [], 'raw'
+0001e460: 3a20 2722 2b22 272c 2027 5f5f 7479 7065  : '"+"', '__type
+0001e470: 5f5f 273a 2027 5061 7474 6572 6e53 7472  __': 'PatternStr
+0001e480: 277d 2c20 2770 7269 6f72 6974 7927 3a20  '}, 'priority': 
+0001e490: 302c 2027 5f5f 7479 7065 5f5f 273a 2027  0, '__type__': '
+0001e4a0: 5465 726d 696e 616c 4465 6627 7d2c 2036  TerminalDef'}, 6
+0001e4b0: 3a20 7b27 6e61 6d65 273a 2027 5a45 524f  : {'name': 'ZERO
+0001e4c0: 5f4f 525f 4f4e 455f 5155 414e 5449 4649  _OR_ONE_QUANTIFI
+0001e4d0: 4552 272c 2027 7061 7474 6572 6e27 3a20  ER', 'pattern': 
+0001e4e0: 7b27 7661 6c75 6527 3a20 273f 272c 2027  {'value': '?', '
+0001e4f0: 666c 6167 7327 3a20 5b5d 2c20 2772 6177  flags': [], 'raw
+0001e500: 273a 2027 223f 2227 2c20 275f 5f74 7970  ': '"?"', '__typ
+0001e510: 655f 5f27 3a20 2750 6174 7465 726e 5374  e__': 'PatternSt
+0001e520: 7227 7d2c 2027 7072 696f 7269 7479 273a  r'}, 'priority':
+0001e530: 2030 2c20 275f 5f74 7970 655f 5f27 3a20   0, '__type__': 
+0001e540: 2754 6572 6d69 6e61 6c44 6566 277d 2c20  'TerminalDef'}, 
+0001e550: 373a 207b 276e 616d 6527 3a20 2742 4143  7: {'name': 'BAC
+0001e560: 4b52 4546 4552 454e 4345 272c 2027 7061  KREFERENCE', 'pa
+0001e570: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001e580: 3a20 275c 5c5c 5c5b 302d 395d 2b27 2c20  : '\\\\[0-9]+', 
+0001e590: 2766 6c61 6773 273a 205b 5d2c 2027 7261  'flags': [], 'ra
+0001e5a0: 7727 3a20 4e6f 6e65 2c20 275f 7769 6474  w': None, '_widt
+0001e5b0: 6827 3a20 5b32 2c20 3138 3434 3637 3434  h': [2, 18446744
+0001e5c0: 3037 3337 3039 3535 3136 3136 5d2c 2027  073709551616], '
+0001e5d0: 5f5f 7479 7065 5f5f 273a 2027 5061 7474  __type__': 'Patt
+0001e5e0: 6572 6e52 4527 7d2c 2027 7072 696f 7269  ernRE'}, 'priori
+0001e5f0: 7479 273a 2030 2c20 275f 5f74 7970 655f  ty': 0, '__type_
+0001e600: 5f27 3a20 2754 6572 6d69 6e61 6c44 6566  _': 'TerminalDef
+0001e610: 277d 2c20 383a 207b 276e 616d 6527 3a20  '}, 8: {'name': 
+0001e620: 2753 5441 5254 5f4f 465f 5354 5249 4e47  'START_OF_STRING
+0001e630: 5f41 4e43 484f 5227 2c20 2770 6174 7465  _ANCHOR', 'patte
+0001e640: 726e 273a 207b 2776 616c 7565 273a 2027  rn': {'value': '
+0001e650: 5e27 2c20 2766 6c61 6773 273a 205b 5d2c  ^', 'flags': [],
+0001e660: 2027 7261 7727 3a20 2722 5e22 272c 2027   'raw': '"^"', '
+0001e670: 5f5f 7479 7065 5f5f 273a 2027 5061 7474  __type__': 'Patt
+0001e680: 6572 6e53 7472 277d 2c20 2770 7269 6f72  ernStr'}, 'prior
+0001e690: 6974 7927 3a20 302c 2027 5f5f 7479 7065  ity': 0, '__type
+0001e6a0: 5f5f 273a 2027 5465 726d 696e 616c 4465  __': 'TerminalDe
+0001e6b0: 6627 7d2c 2039 3a20 7b27 6e61 6d65 273a  f'}, 9: {'name':
+0001e6c0: 2027 414e 4348 4f52 272c 2027 7061 7474   'ANCHOR', 'patt
+0001e6d0: 6572 6e27 3a20 7b27 7661 6c75 6527 3a20  ern': {'value': 
+0001e6e0: 2728 3f3a 5c5c 5c5c 627c 5c5c 5c5c 427c  '(?:\\\\b|\\\\B|
+0001e6f0: 5c5c 5c5c 417c 5c5c 5c5c 7a7c 5c5c 5c5c  \\\\A|\\\\z|\\\\
+0001e700: 5a7c 5c5c 5c5c 477c 5c5c 2429 272c 2027  Z|\\\\G|\\$)', '
+0001e710: 666c 6167 7327 3a20 5b5d 2c20 2772 6177  flags': [], 'raw
+0001e720: 273a 204e 6f6e 652c 2027 5f77 6964 7468  ': None, '_width
+0001e730: 273a 205b 312c 2032 5d2c 2027 5f5f 7479  ': [1, 2], '__ty
+0001e740: 7065 5f5f 273a 2027 5061 7474 6572 6e52  pe__': 'PatternR
+0001e750: 4527 7d2c 2027 7072 696f 7269 7479 273a  E'}, 'priority':
+0001e760: 2030 2c20 275f 5f74 7970 655f 5f27 3a20   0, '__type__': 
+0001e770: 2754 6572 6d69 6e61 6c44 6566 277d 2c20  'TerminalDef'}, 
+0001e780: 3130 3a20 7b27 6e61 6d65 273a 2027 494e  10: {'name': 'IN
+0001e790: 5445 4745 5227 2c20 2770 6174 7465 726e  TEGER', 'pattern
+0001e7a0: 273a 207b 2776 616c 7565 273a 2027 5b30  ': {'value': '[0
+0001e7b0: 2d39 5d2b 272c 2027 666c 6167 7327 3a20  -9]+', 'flags': 
+0001e7c0: 5b5d 2c20 2772 6177 273a 2027 2f5b 302d  [], 'raw': '/[0-
+0001e7d0: 395d 2b2f 272c 2027 5f77 6964 7468 273a  9]+/', '_width':
+0001e7e0: 205b 312c 2031 3834 3436 3734 3430 3733   [1, 18446744073
+0001e7f0: 3730 3935 3531 3631 365d 2c20 275f 5f74  709551616], '__t
+0001e800: 7970 655f 5f27 3a20 2750 6174 7465 726e  ype__': 'Pattern
+0001e810: 5245 277d 2c20 2770 7269 6f72 6974 7927  RE'}, 'priority'
+0001e820: 3a20 302c 2027 5f5f 7479 7065 5f5f 273a  : 0, '__type__':
+0001e830: 2027 5465 726d 696e 616c 4465 6627 7d2c   'TerminalDef'},
+0001e840: 2031 313a 207b 276e 616d 6527 3a20 274c   11: {'name': 'L
+0001e850: 4554 5445 5253 272c 2027 7061 7474 6572  ETTERS', 'patter
+0001e860: 6e27 3a20 7b27 7661 6c75 6527 3a20 275b  n': {'value': '[
+0001e870: 612d 7a41 2d5a 5d2b 272c 2027 666c 6167  a-zA-Z]+', 'flag
+0001e880: 7327 3a20 5b5d 2c20 2772 6177 273a 2027  s': [], 'raw': '
+0001e890: 2f5b 612d 7a41 2d5a 5d2b 2f27 2c20 275f  /[a-zA-Z]+/', '_
+0001e8a0: 7769 6474 6827 3a20 5b31 2c20 3138 3434  width': [1, 1844
+0001e8b0: 3637 3434 3037 3337 3039 3535 3136 3136  6744073709551616
+0001e8c0: 5d2c 2027 5f5f 7479 7065 5f5f 273a 2027  ], '__type__': '
+0001e8d0: 5061 7474 6572 6e52 4527 7d2c 2027 7072  PatternRE'}, 'pr
+0001e8e0: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001e8f0: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001e900: 6c44 6566 277d 2c20 3132 3a20 7b27 6e61  lDef'}, 12: {'na
+0001e910: 6d65 273a 2027 4348 4152 272c 2027 7061  me': 'CHAR', 'pa
+0001e920: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001e930: 3a20 275c 747c 5c6e 7c5c 727c 5b20 2d5c  : '\t|\n|\r|[ -\
+0001e940: 7564 3766 665d 7c5b 5c75 6530 3030 2def  ud7ff]|[\ue000-.
+0001e950: bfbd 5d7c 5be1 8080 302d e183 bf46 465d  ..]|[...0-...FF]
+0001e960: 272c 2027 666c 6167 7327 3a20 5b5d 2c20  ', 'flags': [], 
+0001e970: 2772 6177 273a 2027 2f5c 5c74 7c5c 5c6e  'raw': '/\\t|\\n
+0001e980: 7c5c 5c72 7c5b 5c5c 7530 3032 302d 5c5c  |\\r|[\\u0020-\\
+0001e990: 7544 3746 465d 7c5b 5c5c 7545 3030 302d  uD7FF]|[\\uE000-
+0001e9a0: 5c5c 7546 4646 445d 7c5b 5c5c 7531 3030  \\uFFFD]|[\\u100
+0001e9b0: 3030 2d5c 5c75 3130 4646 4646 5d2f 272c  00-\\u10FFFF]/',
+0001e9c0: 2027 5f77 6964 7468 273a 205b 312c 2031   '_width': [1, 1
+0001e9d0: 5d2c 2027 5f5f 7479 7065 5f5f 273a 2027  ], '__type__': '
+0001e9e0: 5061 7474 6572 6e52 4527 7d2c 2027 7072  PatternRE'}, 'pr
+0001e9f0: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001ea00: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001ea10: 6c44 6566 277d 2c20 3133 3a20 7b27 6e61  lDef'}, 13: {'na
+0001ea20: 6d65 273a 2027 5642 4152 272c 2027 7061  me': 'VBAR', 'pa
+0001ea30: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001ea40: 3a20 277c 272c 2027 666c 6167 7327 3a20  : '|', 'flags': 
+0001ea50: 5b5d 2c20 2772 6177 273a 2027 227c 2227  [], 'raw': '"|"'
+0001ea60: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
+0001ea70: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
+0001ea80: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001ea90: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001eaa0: 6c44 6566 277d 2c20 3134 3a20 7b27 6e61  lDef'}, 14: {'na
+0001eab0: 6d65 273a 2027 4c50 4152 272c 2027 7061  me': 'LPAR', 'pa
+0001eac0: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001ead0: 3a20 2728 272c 2027 666c 6167 7327 3a20  : '(', 'flags': 
+0001eae0: 5b5d 2c20 2772 6177 273a 2027 2228 2227  [], 'raw': '"("'
+0001eaf0: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
+0001eb00: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
+0001eb10: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001eb20: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001eb30: 6c44 6566 277d 2c20 3135 3a20 7b27 6e61  lDef'}, 15: {'na
+0001eb40: 6d65 273a 2027 5250 4152 272c 2027 7061  me': 'RPAR', 'pa
+0001eb50: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001eb60: 3a20 2729 272c 2027 666c 6167 7327 3a20  : ')', 'flags': 
+0001eb70: 5b5d 2c20 2772 6177 273a 2027 2229 2227  [], 'raw': '")"'
+0001eb80: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
+0001eb90: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
+0001eba0: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001ebb0: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001ebc0: 6c44 6566 277d 2c20 3136 3a20 7b27 6e61  lDef'}, 16: {'na
+0001ebd0: 6d65 273a 2027 4c53 5142 272c 2027 7061  me': 'LSQB', 'pa
+0001ebe0: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001ebf0: 3a20 275b 272c 2027 666c 6167 7327 3a20  : '[', 'flags': 
+0001ec00: 5b5d 2c20 2772 6177 273a 2027 225b 2227  [], 'raw': '"["'
+0001ec10: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
+0001ec20: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
+0001ec30: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001ec40: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001ec50: 6c44 6566 277d 2c20 3137 3a20 7b27 6e61  lDef'}, 17: {'na
+0001ec60: 6d65 273a 2027 5253 5142 272c 2027 7061  me': 'RSQB', 'pa
+0001ec70: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001ec80: 3a20 275d 272c 2027 666c 6167 7327 3a20  : ']', 'flags': 
+0001ec90: 5b5d 2c20 2772 6177 273a 2027 225d 2227  [], 'raw': '"]"'
+0001eca0: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
+0001ecb0: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
+0001ecc0: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001ecd0: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001ece0: 6c44 6566 277d 2c20 3138 3a20 7b27 6e61  lDef'}, 18: {'na
+0001ecf0: 6d65 273a 2027 5f5f 414e 4f4e 5f30 272c  me': '__ANON_0',
+0001ed00: 2027 7061 7474 6572 6e27 3a20 7b27 7661   'pattern': {'va
+0001ed10: 6c75 6527 3a20 275c 5c70 7b27 2c20 2766  lue': '\\p{', 'f
+0001ed20: 6c61 6773 273a 205b 5d2c 2027 7261 7727  lags': [], 'raw'
+0001ed30: 3a20 2722 5c5c 707b 2227 2c20 275f 5f74  : '"\\p{"', '__t
+0001ed40: 7970 655f 5f27 3a20 2750 6174 7465 726e  ype__': 'Pattern
+0001ed50: 5374 7227 7d2c 2027 7072 696f 7269 7479  Str'}, 'priority
+0001ed60: 273a 2030 2c20 275f 5f74 7970 655f 5f27  ': 0, '__type__'
+0001ed70: 3a20 2754 6572 6d69 6e61 6c44 6566 277d  : 'TerminalDef'}
+0001ed80: 2c20 3139 3a20 7b27 6e61 6d65 273a 2027  , 19: {'name': '
+0001ed90: 5242 5241 4345 272c 2027 7061 7474 6572  RBRACE', 'patter
+0001eda0: 6e27 3a20 7b27 7661 6c75 6527 3a20 277d  n': {'value': '}
+0001edb0: 272c 2027 666c 6167 7327 3a20 5b5d 2c20  ', 'flags': [], 
+0001edc0: 2772 6177 273a 2027 227d 2227 2c20 275f  'raw': '"}"', '_
+0001edd0: 5f74 7970 655f 5f27 3a20 2750 6174 7465  _type__': 'Patte
+0001ede0: 726e 5374 7227 7d2c 2027 7072 696f 7269  rnStr'}, 'priori
+0001edf0: 7479 273a 2030 2c20 275f 5f74 7970 655f  ty': 0, '__type_
+0001ee00: 5f27 3a20 2754 6572 6d69 6e61 6c44 6566  _': 'TerminalDef
+0001ee10: 277d 2c20 3230 3a20 7b27 6e61 6d65 273a  '}, 20: {'name':
+0001ee20: 2027 4d49 4e55 5327 2c20 2770 6174 7465   'MINUS', 'patte
+0001ee30: 726e 273a 207b 2776 616c 7565 273a 2027  rn': {'value': '
+0001ee40: 2d27 2c20 2766 6c61 6773 273a 205b 5d2c  -', 'flags': [],
+0001ee50: 2027 7261 7727 3a20 2722 2d22 272c 2027   'raw': '"-"', '
+0001ee60: 5f5f 7479 7065 5f5f 273a 2027 5061 7474  __type__': 'Patt
+0001ee70: 6572 6e53 7472 277d 2c20 2770 7269 6f72  ernStr'}, 'prior
+0001ee80: 6974 7927 3a20 302c 2027 5f5f 7479 7065  ity': 0, '__type
+0001ee90: 5f5f 273a 2027 5465 726d 696e 616c 4465  __': 'TerminalDe
+0001eea0: 6627 7d2c 2032 313a 207b 276e 616d 6527  f'}, 21: {'name'
+0001eeb0: 3a20 2743 4f4d 4d41 272c 2027 7061 7474  : 'COMMA', 'patt
+0001eec0: 6572 6e27 3a20 7b27 7661 6c75 6527 3a20  ern': {'value': 
+0001eed0: 272c 272c 2027 666c 6167 7327 3a20 5b5d  ',', 'flags': []
+0001eee0: 2c20 2772 6177 273a 2027 222c 2227 2c20  , 'raw': '","', 
+0001eef0: 275f 5f74 7970 655f 5f27 3a20 2750 6174  '__type__': 'Pat
+0001ef00: 7465 726e 5374 7227 7d2c 2027 7072 696f  ternStr'}, 'prio
+0001ef10: 7269 7479 273a 2030 2c20 275f 5f74 7970  rity': 0, '__typ
+0001ef20: 655f 5f27 3a20 2754 6572 6d69 6e61 6c44  e__': 'TerminalD
+0001ef30: 6566 277d 2c20 3232 3a20 7b27 6e61 6d65  ef'}, 22: {'name
+0001ef40: 273a 2027 4c42 5241 4345 272c 2027 7061  ': 'LBRACE', 'pa
+0001ef50: 7474 6572 6e27 3a20 7b27 7661 6c75 6527  ttern': {'value'
+0001ef60: 3a20 277b 272c 2027 666c 6167 7327 3a20  : '{', 'flags': 
+0001ef70: 5b5d 2c20 2772 6177 273a 2027 227b 2227  [], 'raw': '"{"'
+0001ef80: 2c20 275f 5f74 7970 655f 5f27 3a20 2750  , '__type__': 'P
+0001ef90: 6174 7465 726e 5374 7227 7d2c 2027 7072  atternStr'}, 'pr
+0001efa0: 696f 7269 7479 273a 2030 2c20 275f 5f74  iority': 0, '__t
+0001efb0: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+0001efc0: 6c44 6566 277d 2c20 3233 3a20 7b27 6f72  lDef'}, 23: {'or
+0001efd0: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
+0001efe0: 546f 6b65 6e28 2752 554c 4527 2c20 2773  Token('RULE', 's
+0001eff0: 7461 7274 2729 2c20 275f 5f74 7970 655f  tart'), '__type_
+0001f000: 5f27 3a20 274e 6f6e 5465 726d 696e 616c  _': 'NonTerminal
+0001f010: 277d 2c20 2765 7870 616e 7369 6f6e 273a  '}, 'expansion':
+0001f020: 205b 7b27 6e61 6d65 273a 2027 5354 4152   [{'name': 'STAR
+0001f030: 545f 4f46 5f53 5452 494e 475f 414e 4348  T_OF_STRING_ANCH
+0001f040: 4f52 272c 2027 6669 6c74 6572 5f6f 7574  OR', 'filter_out
+0001f050: 273a 2046 616c 7365 2c20 275f 5f74 7970  ': False, '__typ
+0001f060: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
+0001f070: 7d2c 207b 276e 616d 6527 3a20 2765 7870  }, {'name': 'exp
+0001f080: 7265 7373 696f 6e27 2c20 275f 5f74 7970  ression', '__typ
+0001f090: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
+0001f0a0: 616c 277d 5d2c 2027 6f72 6465 7227 3a20  al'}], 'order': 
+0001f0b0: 302c 2027 616c 6961 7327 3a20 4e6f 6e65  0, 'alias': None
+0001f0c0: 2c20 276f 7074 696f 6e73 273a 207b 276b  , 'options': {'k
+0001f0d0: 6565 705f 616c 6c5f 746f 6b65 6e73 273a  eep_all_tokens':
+0001f0e0: 2046 616c 7365 2c20 2765 7870 616e 6431   False, 'expand1
+0001f0f0: 273a 2046 616c 7365 2c20 2770 7269 6f72  ': False, 'prior
+0001f100: 6974 7927 3a20 4e6f 6e65 2c20 2774 656d  ity': None, 'tem
+0001f110: 706c 6174 655f 736f 7572 6365 273a 204e  plate_source': N
+0001f120: 6f6e 652c 2027 656d 7074 795f 696e 6469  one, 'empty_indi
+0001f130: 6365 7327 3a20 2829 2c20 275f 5f74 7970  ces': (), '__typ
+0001f140: 655f 5f27 3a20 2752 756c 654f 7074 696f  e__': 'RuleOptio
+0001f150: 6e73 277d 2c20 275f 5f74 7970 655f 5f27  ns'}, '__type__'
+0001f160: 3a20 2752 756c 6527 7d2c 2032 343a 207b  : 'Rule'}, 24: {
+0001f170: 276f 7269 6769 6e27 3a20 7b27 6e61 6d65  'origin': {'name
+0001f180: 273a 2054 6f6b 656e 2827 5255 4c45 272c  ': Token('RULE',
+0001f190: 2027 7374 6172 7427 292c 2027 5f5f 7479   'start'), '__ty
+0001f1a0: 7065 5f5f 273a 2027 4e6f 6e54 6572 6d69  pe__': 'NonTermi
+0001f1b0: 6e61 6c27 7d2c 2027 6578 7061 6e73 696f  nal'}, 'expansio
+0001f1c0: 6e27 3a20 5b7b 276e 616d 6527 3a20 2765  n': [{'name': 'e
+0001f1d0: 7870 7265 7373 696f 6e27 2c20 275f 5f74  xpression', '__t
+0001f1e0: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
+0001f1f0: 696e 616c 277d 5d2c 2027 6f72 6465 7227  inal'}], 'order'
+0001f200: 3a20 312c 2027 616c 6961 7327 3a20 4e6f  : 1, 'alias': No
+0001f210: 6e65 2c20 276f 7074 696f 6e73 273a 207b  ne, 'options': {
+0001f220: 276b 6565 705f 616c 6c5f 746f 6b65 6e73  'keep_all_tokens
+0001f230: 273a 2046 616c 7365 2c20 2765 7870 616e  ': False, 'expan
+0001f240: 6431 273a 2046 616c 7365 2c20 2770 7269  d1': False, 'pri
+0001f250: 6f72 6974 7927 3a20 4e6f 6e65 2c20 2774  ority': None, 't
+0001f260: 656d 706c 6174 655f 736f 7572 6365 273a  emplate_source':
+0001f270: 204e 6f6e 652c 2027 656d 7074 795f 696e   None, 'empty_in
+0001f280: 6469 6365 7327 3a20 2829 2c20 275f 5f74  dices': (), '__t
+0001f290: 7970 655f 5f27 3a20 2752 756c 654f 7074  ype__': 'RuleOpt
+0001f2a0: 696f 6e73 277d 2c20 275f 5f74 7970 655f  ions'}, '__type_
+0001f2b0: 5f27 3a20 2752 756c 6527 7d2c 2032 353a  _': 'Rule'}, 25:
+0001f2c0: 207b 276f 7269 6769 6e27 3a20 7b27 6e61   {'origin': {'na
+0001f2d0: 6d65 273a 2054 6f6b 656e 2827 5255 4c45  me': Token('RULE
+0001f2e0: 272c 2027 6578 7072 6573 7369 6f6e 2729  ', 'expression')
+0001f2f0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
+0001f300: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
+0001f310: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
+0001f320: 6d65 273a 2027 7375 6265 7870 7265 7373  me': 'subexpress
+0001f330: 696f 6e27 2c20 275f 5f74 7970 655f 5f27  ion', '__type__'
+0001f340: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
+0001f350: 2c20 7b27 6e61 6d65 273a 2027 5642 4152  , {'name': 'VBAR
+0001f360: 272c 2027 6669 6c74 6572 5f6f 7574 273a  ', 'filter_out':
+0001f370: 2054 7275 652c 2027 5f5f 7479 7065 5f5f   True, '__type__
+0001f380: 273a 2027 5465 726d 696e 616c 277d 2c20  ': 'Terminal'}, 
+0001f390: 7b27 6e61 6d65 273a 2027 6578 7072 6573  {'name': 'expres
+0001f3a0: 7369 6f6e 272c 2027 5f5f 7479 7065 5f5f  sion', '__type__
+0001f3b0: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+0001f3c0: 7d5d 2c20 276f 7264 6572 273a 2030 2c20  }], 'order': 0, 
+0001f3d0: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
+0001f3e0: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
+0001f3f0: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
+0001f400: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
+0001f410: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
+0001f420: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
+0001f430: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
+0001f440: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
+0001f450: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
+0001f460: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
+0001f470: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
+0001f480: 5275 6c65 277d 2c20 3236 3a20 7b27 6f72  Rule'}, 26: {'or
+0001f490: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
+0001f4a0: 546f 6b65 6e28 2752 554c 4527 2c20 2765  Token('RULE', 'e
+0001f4b0: 7870 7265 7373 696f 6e27 292c 2027 5f5f  xpression'), '__
+0001f4c0: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
+0001f4d0: 6d69 6e61 6c27 7d2c 2027 6578 7061 6e73  minal'}, 'expans
+0001f4e0: 696f 6e27 3a20 5b7b 276e 616d 6527 3a20  ion': [{'name': 
+0001f4f0: 2773 7562 6578 7072 6573 7369 6f6e 272c  'subexpression',
+0001f500: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
+0001f510: 6e54 6572 6d69 6e61 6c27 7d5d 2c20 276f  nTerminal'}], 'o
+0001f520: 7264 6572 273a 2031 2c20 2761 6c69 6173  rder': 1, 'alias
+0001f530: 273a 204e 6f6e 652c 2027 6f70 7469 6f6e  ': None, 'option
+0001f540: 7327 3a20 7b27 6b65 6570 5f61 6c6c 5f74  s': {'keep_all_t
+0001f550: 6f6b 656e 7327 3a20 4661 6c73 652c 2027  okens': False, '
+0001f560: 6578 7061 6e64 3127 3a20 4661 6c73 652c  expand1': False,
+0001f570: 2027 7072 696f 7269 7479 273a 204e 6f6e   'priority': Non
+0001f580: 652c 2027 7465 6d70 6c61 7465 5f73 6f75  e, 'template_sou
+0001f590: 7263 6527 3a20 4e6f 6e65 2c20 2765 6d70  rce': None, 'emp
+0001f5a0: 7479 5f69 6e64 6963 6573 273a 2028 292c  ty_indices': (),
+0001f5b0: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
+0001f5c0: 6c65 4f70 7469 6f6e 7327 7d2c 2027 5f5f  leOptions'}, '__
+0001f5d0: 7479 7065 5f5f 273a 2027 5275 6c65 277d  type__': 'Rule'}
+0001f5e0: 2c20 3237 3a20 7b27 6f72 6967 696e 273a  , 27: {'origin':
+0001f5f0: 207b 276e 616d 6527 3a20 546f 6b65 6e28   {'name': Token(
+0001f600: 2752 554c 4527 2c20 2773 7562 6578 7072  'RULE', 'subexpr
+0001f610: 6573 7369 6f6e 2729 2c20 275f 5f74 7970  ession'), '__typ
+0001f620: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
+0001f630: 616c 277d 2c20 2765 7870 616e 7369 6f6e  al'}, 'expansion
+0001f640: 273a 205b 7b27 6e61 6d65 273a 2027 5f5f  ': [{'name': '__
+0001f650: 7375 6265 7870 7265 7373 696f 6e5f 706c  subexpression_pl
+0001f660: 7573 5f30 272c 2027 5f5f 7479 7065 5f5f  us_0', '__type__
+0001f670: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+0001f680: 7d5d 2c20 276f 7264 6572 273a 2030 2c20  }], 'order': 0, 
+0001f690: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
+0001f6a0: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
+0001f6b0: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
+0001f6c0: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
+0001f6d0: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
+0001f6e0: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
+0001f6f0: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
+0001f700: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
+0001f710: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
+0001f720: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
+0001f730: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
+0001f740: 5275 6c65 277d 2c20 3238 3a20 7b27 6f72  Rule'}, 28: {'or
+0001f750: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
+0001f760: 546f 6b65 6e28 2752 554c 4527 2c20 2773  Token('RULE', 's
+0001f770: 7562 6578 7072 6573 7369 6f6e 6974 656d  ubexpressionitem
+0001f780: 2729 2c20 275f 5f74 7970 655f 5f27 3a20  '), '__type__': 
+0001f790: 274e 6f6e 5465 726d 696e 616c 277d 2c20  'NonTerminal'}, 
+0001f7a0: 2765 7870 616e 7369 6f6e 273a 205b 7b27  'expansion': [{'
+0001f7b0: 6e61 6d65 273a 2027 6d61 7463 6827 2c20  name': 'match', 
+0001f7c0: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
+0001f7d0: 5465 726d 696e 616c 277d 5d2c 2027 6f72  Terminal'}], 'or
+0001f7e0: 6465 7227 3a20 302c 2027 616c 6961 7327  der': 0, 'alias'
+0001f7f0: 3a20 4e6f 6e65 2c20 276f 7074 696f 6e73  : None, 'options
+0001f800: 273a 207b 276b 6565 705f 616c 6c5f 746f  ': {'keep_all_to
+0001f810: 6b65 6e73 273a 2046 616c 7365 2c20 2765  kens': False, 'e
+0001f820: 7870 616e 6431 273a 2046 616c 7365 2c20  xpand1': False, 
+0001f830: 2770 7269 6f72 6974 7927 3a20 4e6f 6e65  'priority': None
+0001f840: 2c20 2774 656d 706c 6174 655f 736f 7572  , 'template_sour
+0001f850: 6365 273a 204e 6f6e 652c 2027 656d 7074  ce': None, 'empt
+0001f860: 795f 696e 6469 6365 7327 3a20 2829 2c20  y_indices': (), 
+0001f870: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
+0001f880: 654f 7074 696f 6e73 277d 2c20 275f 5f74  eOptions'}, '__t
+0001f890: 7970 655f 5f27 3a20 2752 756c 6527 7d2c  ype__': 'Rule'},
+0001f8a0: 2032 393a 207b 276f 7269 6769 6e27 3a20   29: {'origin': 
+0001f8b0: 7b27 6e61 6d65 273a 2054 6f6b 656e 2827  {'name': Token('
+0001f8c0: 5255 4c45 272c 2027 7375 6265 7870 7265  RULE', 'subexpre
+0001f8d0: 7373 696f 6e69 7465 6d27 292c 2027 5f5f  ssionitem'), '__
+0001f8e0: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
+0001f8f0: 6d69 6e61 6c27 7d2c 2027 6578 7061 6e73  minal'}, 'expans
+0001f900: 696f 6e27 3a20 5b7b 276e 616d 6527 3a20  ion': [{'name': 
+0001f910: 2767 726f 7570 272c 2027 5f5f 7479 7065  'group', '__type
+0001f920: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
+0001f930: 6c27 7d5d 2c20 276f 7264 6572 273a 2031  l'}], 'order': 1
+0001f940: 2c20 2761 6c69 6173 273a 204e 6f6e 652c  , 'alias': None,
+0001f950: 2027 6f70 7469 6f6e 7327 3a20 7b27 6b65   'options': {'ke
+0001f960: 6570 5f61 6c6c 5f74 6f6b 656e 7327 3a20  ep_all_tokens': 
+0001f970: 4661 6c73 652c 2027 6578 7061 6e64 3127  False, 'expand1'
+0001f980: 3a20 4661 6c73 652c 2027 7072 696f 7269  : False, 'priori
+0001f990: 7479 273a 204e 6f6e 652c 2027 7465 6d70  ty': None, 'temp
+0001f9a0: 6c61 7465 5f73 6f75 7263 6527 3a20 4e6f  late_source': No
+0001f9b0: 6e65 2c20 2765 6d70 7479 5f69 6e64 6963  ne, 'empty_indic
+0001f9c0: 6573 273a 2028 292c 2027 5f5f 7479 7065  es': (), '__type
+0001f9d0: 5f5f 273a 2027 5275 6c65 4f70 7469 6f6e  __': 'RuleOption
+0001f9e0: 7327 7d2c 2027 5f5f 7479 7065 5f5f 273a  s'}, '__type__':
+0001f9f0: 2027 5275 6c65 277d 2c20 3330 3a20 7b27   'Rule'}, 30: {'
+0001fa00: 6f72 6967 696e 273a 207b 276e 616d 6527  origin': {'name'
+0001fa10: 3a20 546f 6b65 6e28 2752 554c 4527 2c20  : Token('RULE', 
+0001fa20: 2773 7562 6578 7072 6573 7369 6f6e 6974  'subexpressionit
+0001fa30: 656d 2729 2c20 275f 5f74 7970 655f 5f27  em'), '__type__'
+0001fa40: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
+0001fa50: 2c20 2765 7870 616e 7369 6f6e 273a 205b  , 'expansion': [
+0001fa60: 7b27 6e61 6d65 273a 2027 414e 4348 4f52  {'name': 'ANCHOR
+0001fa70: 272c 2027 6669 6c74 6572 5f6f 7574 273a  ', 'filter_out':
+0001fa80: 2046 616c 7365 2c20 275f 5f74 7970 655f   False, '__type_
+0001fa90: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d5d  _': 'Terminal'}]
+0001faa0: 2c20 276f 7264 6572 273a 2032 2c20 2761  , 'order': 2, 'a
+0001fab0: 6c69 6173 273a 204e 6f6e 652c 2027 6f70  lias': None, 'op
+0001fac0: 7469 6f6e 7327 3a20 7b27 6b65 6570 5f61  tions': {'keep_a
+0001fad0: 6c6c 5f74 6f6b 656e 7327 3a20 4661 6c73  ll_tokens': Fals
+0001fae0: 652c 2027 6578 7061 6e64 3127 3a20 4661  e, 'expand1': Fa
+0001faf0: 6c73 652c 2027 7072 696f 7269 7479 273a  lse, 'priority':
+0001fb00: 204e 6f6e 652c 2027 7465 6d70 6c61 7465   None, 'template
+0001fb10: 5f73 6f75 7263 6527 3a20 4e6f 6e65 2c20  _source': None, 
+0001fb20: 2765 6d70 7479 5f69 6e64 6963 6573 273a  'empty_indices':
+0001fb30: 2028 292c 2027 5f5f 7479 7065 5f5f 273a   (), '__type__':
+0001fb40: 2027 5275 6c65 4f70 7469 6f6e 7327 7d2c   'RuleOptions'},
+0001fb50: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
+0001fb60: 6c65 277d 2c20 3331 3a20 7b27 6f72 6967  le'}, 31: {'orig
+0001fb70: 696e 273a 207b 276e 616d 6527 3a20 546f  in': {'name': To
+0001fb80: 6b65 6e28 2752 554c 4527 2c20 2773 7562  ken('RULE', 'sub
+0001fb90: 6578 7072 6573 7369 6f6e 6974 656d 2729  expressionitem')
+0001fba0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
+0001fbb0: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
+0001fbc0: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
+0001fbd0: 6d65 273a 2027 4241 434b 5245 4645 5245  me': 'BACKREFERE
+0001fbe0: 4e43 4527 2c20 2766 696c 7465 725f 6f75  NCE', 'filter_ou
+0001fbf0: 7427 3a20 4661 6c73 652c 2027 5f5f 7479  t': False, '__ty
+0001fc00: 7065 5f5f 273a 2027 5465 726d 696e 616c  pe__': 'Terminal
+0001fc10: 277d 5d2c 2027 6f72 6465 7227 3a20 332c  '}], 'order': 3,
+0001fc20: 2027 616c 6961 7327 3a20 4e6f 6e65 2c20   'alias': None, 
+0001fc30: 276f 7074 696f 6e73 273a 207b 276b 6565  'options': {'kee
+0001fc40: 705f 616c 6c5f 746f 6b65 6e73 273a 2046  p_all_tokens': F
+0001fc50: 616c 7365 2c20 2765 7870 616e 6431 273a  alse, 'expand1':
+0001fc60: 2046 616c 7365 2c20 2770 7269 6f72 6974   False, 'priorit
+0001fc70: 7927 3a20 4e6f 6e65 2c20 2774 656d 706c  y': None, 'templ
+0001fc80: 6174 655f 736f 7572 6365 273a 204e 6f6e  ate_source': Non
+0001fc90: 652c 2027 656d 7074 795f 696e 6469 6365  e, 'empty_indice
+0001fca0: 7327 3a20 2829 2c20 275f 5f74 7970 655f  s': (), '__type_
+0001fcb0: 5f27 3a20 2752 756c 654f 7074 696f 6e73  _': 'RuleOptions
+0001fcc0: 277d 2c20 275f 5f74 7970 655f 5f27 3a20  '}, '__type__': 
+0001fcd0: 2752 756c 6527 7d2c 2033 323a 207b 276f  'Rule'}, 32: {'o
+0001fce0: 7269 6769 6e27 3a20 7b27 6e61 6d65 273a  rigin': {'name':
+0001fcf0: 2054 6f6b 656e 2827 5255 4c45 272c 2027   Token('RULE', '
+0001fd00: 6772 6f75 7027 292c 2027 5f5f 7479 7065  group'), '__type
+0001fd10: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
+0001fd20: 6c27 7d2c 2027 6578 7061 6e73 696f 6e27  l'}, 'expansion'
+0001fd30: 3a20 5b7b 276e 616d 6527 3a20 274c 5041  : [{'name': 'LPA
+0001fd40: 5227 2c20 2766 696c 7465 725f 6f75 7427  R', 'filter_out'
+0001fd50: 3a20 5472 7565 2c20 275f 5f74 7970 655f  : True, '__type_
+0001fd60: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d2c  _': 'Terminal'},
+0001fd70: 207b 276e 616d 6527 3a20 2747 524f 5550   {'name': 'GROUP
+0001fd80: 5f4e 4f4e 5f43 4150 5455 5249 4e47 5f4d  _NON_CAPTURING_M
+0001fd90: 4f44 4946 4945 5227 2c20 2766 696c 7465  ODIFIER', 'filte
+0001fda0: 725f 6f75 7427 3a20 4661 6c73 652c 2027  r_out': False, '
+0001fdb0: 5f5f 7479 7065 5f5f 273a 2027 5465 726d  __type__': 'Term
+0001fdc0: 696e 616c 277d 2c20 7b27 6e61 6d65 273a  inal'}, {'name':
+0001fdd0: 2027 6578 7072 6573 7369 6f6e 272c 2027   'expression', '
+0001fde0: 5f5f 7479 7065 5f5f 273a 2027 4e6f 6e54  __type__': 'NonT
+0001fdf0: 6572 6d69 6e61 6c27 7d2c 207b 276e 616d  erminal'}, {'nam
+0001fe00: 6527 3a20 2752 5041 5227 2c20 2766 696c  e': 'RPAR', 'fil
+0001fe10: 7465 725f 6f75 7427 3a20 5472 7565 2c20  ter_out': True, 
+0001fe20: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+0001fe30: 6d69 6e61 6c27 7d2c 207b 276e 616d 6527  minal'}, {'name'
+0001fe40: 3a20 2772 6570 6574 6974 696f 6e27 2c20  : 'repetition', 
+0001fe50: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
+0001fe60: 5465 726d 696e 616c 277d 5d2c 2027 6f72  Terminal'}], 'or
+0001fe70: 6465 7227 3a20 302c 2027 616c 6961 7327  der': 0, 'alias'
+0001fe80: 3a20 4e6f 6e65 2c20 276f 7074 696f 6e73  : None, 'options
+0001fe90: 273a 207b 276b 6565 705f 616c 6c5f 746f  ': {'keep_all_to
+0001fea0: 6b65 6e73 273a 2046 616c 7365 2c20 2765  kens': False, 'e
+0001feb0: 7870 616e 6431 273a 2046 616c 7365 2c20  xpand1': False, 
+0001fec0: 2770 7269 6f72 6974 7927 3a20 4e6f 6e65  'priority': None
+0001fed0: 2c20 2774 656d 706c 6174 655f 736f 7572  , 'template_sour
+0001fee0: 6365 273a 204e 6f6e 652c 2027 656d 7074  ce': None, 'empt
+0001fef0: 795f 696e 6469 6365 7327 3a20 2829 2c20  y_indices': (), 
+0001ff00: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
+0001ff10: 654f 7074 696f 6e73 277d 2c20 275f 5f74  eOptions'}, '__t
+0001ff20: 7970 655f 5f27 3a20 2752 756c 6527 7d2c  ype__': 'Rule'},
+0001ff30: 2033 333a 207b 276f 7269 6769 6e27 3a20   33: {'origin': 
+0001ff40: 7b27 6e61 6d65 273a 2054 6f6b 656e 2827  {'name': Token('
+0001ff50: 5255 4c45 272c 2027 6772 6f75 7027 292c  RULE', 'group'),
+0001ff60: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
+0001ff70: 6e54 6572 6d69 6e61 6c27 7d2c 2027 6578  nTerminal'}, 'ex
+0001ff80: 7061 6e73 696f 6e27 3a20 5b7b 276e 616d  pansion': [{'nam
+0001ff90: 6527 3a20 274c 5041 5227 2c20 2766 696c  e': 'LPAR', 'fil
+0001ffa0: 7465 725f 6f75 7427 3a20 5472 7565 2c20  ter_out': True, 
+0001ffb0: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+0001ffc0: 6d69 6e61 6c27 7d2c 207b 276e 616d 6527  minal'}, {'name'
+0001ffd0: 3a20 2747 524f 5550 5f4e 4f4e 5f43 4150  : 'GROUP_NON_CAP
+0001ffe0: 5455 5249 4e47 5f4d 4f44 4946 4945 5227  TURING_MODIFIER'
+0001fff0: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
+00020000: 4661 6c73 652c 2027 5f5f 7479 7065 5f5f  False, '__type__
+00020010: 273a 2027 5465 726d 696e 616c 277d 2c20  ': 'Terminal'}, 
+00020020: 7b27 6e61 6d65 273a 2027 6578 7072 6573  {'name': 'expres
+00020030: 7369 6f6e 272c 2027 5f5f 7479 7065 5f5f  sion', '__type__
+00020040: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+00020050: 7d2c 207b 276e 616d 6527 3a20 2752 5041  }, {'name': 'RPA
+00020060: 5227 2c20 2766 696c 7465 725f 6f75 7427  R', 'filter_out'
+00020070: 3a20 5472 7565 2c20 275f 5f74 7970 655f  : True, '__type_
+00020080: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d5d  _': 'Terminal'}]
+00020090: 2c20 276f 7264 6572 273a 2031 2c20 2761  , 'order': 1, 'a
+000200a0: 6c69 6173 273a 204e 6f6e 652c 2027 6f70  lias': None, 'op
+000200b0: 7469 6f6e 7327 3a20 7b27 6b65 6570 5f61  tions': {'keep_a
+000200c0: 6c6c 5f74 6f6b 656e 7327 3a20 4661 6c73  ll_tokens': Fals
+000200d0: 652c 2027 6578 7061 6e64 3127 3a20 4661  e, 'expand1': Fa
+000200e0: 6c73 652c 2027 7072 696f 7269 7479 273a  lse, 'priority':
+000200f0: 204e 6f6e 652c 2027 7465 6d70 6c61 7465   None, 'template
+00020100: 5f73 6f75 7263 6527 3a20 4e6f 6e65 2c20  _source': None, 
+00020110: 2765 6d70 7479 5f69 6e64 6963 6573 273a  'empty_indices':
+00020120: 2028 292c 2027 5f5f 7479 7065 5f5f 273a   (), '__type__':
+00020130: 2027 5275 6c65 4f70 7469 6f6e 7327 7d2c   'RuleOptions'},
+00020140: 2027 5f5f 7479 7065 5f5f 273a 2027 5275   '__type__': 'Ru
+00020150: 6c65 277d 2c20 3334 3a20 7b27 6f72 6967  le'}, 34: {'orig
+00020160: 696e 273a 207b 276e 616d 6527 3a20 546f  in': {'name': To
+00020170: 6b65 6e28 2752 554c 4527 2c20 2767 726f  ken('RULE', 'gro
+00020180: 7570 2729 2c20 275f 5f74 7970 655f 5f27  up'), '__type__'
+00020190: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
+000201a0: 2c20 2765 7870 616e 7369 6f6e 273a 205b  , 'expansion': [
+000201b0: 7b27 6e61 6d65 273a 2027 4c50 4152 272c  {'name': 'LPAR',
+000201c0: 2027 6669 6c74 6572 5f6f 7574 273a 2054   'filter_out': T
+000201d0: 7275 652c 2027 5f5f 7479 7065 5f5f 273a  rue, '__type__':
+000201e0: 2027 5465 726d 696e 616c 277d 2c20 7b27   'Terminal'}, {'
+000201f0: 6e61 6d65 273a 2027 6578 7072 6573 7369  name': 'expressi
+00020200: 6f6e 272c 2027 5f5f 7479 7065 5f5f 273a  on', '__type__':
+00020210: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
+00020220: 207b 276e 616d 6527 3a20 2752 5041 5227   {'name': 'RPAR'
+00020230: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
+00020240: 5472 7565 2c20 275f 5f74 7970 655f 5f27  True, '__type__'
+00020250: 3a20 2754 6572 6d69 6e61 6c27 7d2c 207b  : 'Terminal'}, {
+00020260: 276e 616d 6527 3a20 2772 6570 6574 6974  'name': 'repetit
+00020270: 696f 6e27 2c20 275f 5f74 7970 655f 5f27  ion', '__type__'
+00020280: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
+00020290: 5d2c 2027 6f72 6465 7227 3a20 322c 2027  ], 'order': 2, '
+000202a0: 616c 6961 7327 3a20 4e6f 6e65 2c20 276f  alias': None, 'o
+000202b0: 7074 696f 6e73 273a 207b 276b 6565 705f  ptions': {'keep_
+000202c0: 616c 6c5f 746f 6b65 6e73 273a 2046 616c  all_tokens': Fal
+000202d0: 7365 2c20 2765 7870 616e 6431 273a 2046  se, 'expand1': F
+000202e0: 616c 7365 2c20 2770 7269 6f72 6974 7927  alse, 'priority'
+000202f0: 3a20 4e6f 6e65 2c20 2774 656d 706c 6174  : None, 'templat
+00020300: 655f 736f 7572 6365 273a 204e 6f6e 652c  e_source': None,
+00020310: 2027 656d 7074 795f 696e 6469 6365 7327   'empty_indices'
+00020320: 3a20 2829 2c20 275f 5f74 7970 655f 5f27  : (), '__type__'
+00020330: 3a20 2752 756c 654f 7074 696f 6e73 277d  : 'RuleOptions'}
+00020340: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
+00020350: 756c 6527 7d2c 2033 353a 207b 276f 7269  ule'}, 35: {'ori
+00020360: 6769 6e27 3a20 7b27 6e61 6d65 273a 2054  gin': {'name': T
+00020370: 6f6b 656e 2827 5255 4c45 272c 2027 6772  oken('RULE', 'gr
+00020380: 6f75 7027 292c 2027 5f5f 7479 7065 5f5f  oup'), '__type__
+00020390: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+000203a0: 7d2c 2027 6578 7061 6e73 696f 6e27 3a20  }, 'expansion': 
+000203b0: 5b7b 276e 616d 6527 3a20 274c 5041 5227  [{'name': 'LPAR'
+000203c0: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
+000203d0: 5472 7565 2c20 275f 5f74 7970 655f 5f27  True, '__type__'
+000203e0: 3a20 2754 6572 6d69 6e61 6c27 7d2c 207b  : 'Terminal'}, {
+000203f0: 276e 616d 6527 3a20 2765 7870 7265 7373  'name': 'express
+00020400: 696f 6e27 2c20 275f 5f74 7970 655f 5f27  ion', '__type__'
+00020410: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
+00020420: 2c20 7b27 6e61 6d65 273a 2027 5250 4152  , {'name': 'RPAR
+00020430: 272c 2027 6669 6c74 6572 5f6f 7574 273a  ', 'filter_out':
+00020440: 2054 7275 652c 2027 5f5f 7479 7065 5f5f   True, '__type__
+00020450: 273a 2027 5465 726d 696e 616c 277d 5d2c  ': 'Terminal'}],
+00020460: 2027 6f72 6465 7227 3a20 332c 2027 616c   'order': 3, 'al
+00020470: 6961 7327 3a20 4e6f 6e65 2c20 276f 7074  ias': None, 'opt
+00020480: 696f 6e73 273a 207b 276b 6565 705f 616c  ions': {'keep_al
+00020490: 6c5f 746f 6b65 6e73 273a 2046 616c 7365  l_tokens': False
+000204a0: 2c20 2765 7870 616e 6431 273a 2046 616c  , 'expand1': Fal
+000204b0: 7365 2c20 2770 7269 6f72 6974 7927 3a20  se, 'priority': 
+000204c0: 4e6f 6e65 2c20 2774 656d 706c 6174 655f  None, 'template_
+000204d0: 736f 7572 6365 273a 204e 6f6e 652c 2027  source': None, '
+000204e0: 656d 7074 795f 696e 6469 6365 7327 3a20  empty_indices': 
+000204f0: 2829 2c20 275f 5f74 7970 655f 5f27 3a20  (), '__type__': 
+00020500: 2752 756c 654f 7074 696f 6e73 277d 2c20  'RuleOptions'}, 
+00020510: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
+00020520: 6527 7d2c 2033 363a 207b 276f 7269 6769  e'}, 36: {'origi
+00020530: 6e27 3a20 7b27 6e61 6d65 273a 2054 6f6b  n': {'name': Tok
+00020540: 656e 2827 5255 4c45 272c 2027 6d61 7463  en('RULE', 'matc
+00020550: 6827 292c 2027 5f5f 7479 7065 5f5f 273a  h'), '__type__':
+00020560: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
+00020570: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
+00020580: 276e 616d 6527 3a20 276d 6174 6368 6974  'name': 'matchit
+00020590: 656d 272c 2027 5f5f 7479 7065 5f5f 273a  em', '__type__':
+000205a0: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
+000205b0: 207b 276e 616d 6527 3a20 2772 6570 6574   {'name': 'repet
+000205c0: 6974 696f 6e27 2c20 275f 5f74 7970 655f  ition', '__type_
+000205d0: 5f27 3a20 274e 6f6e 5465 726d 696e 616c  _': 'NonTerminal
+000205e0: 277d 5d2c 2027 6f72 6465 7227 3a20 302c  '}], 'order': 0,
+000205f0: 2027 616c 6961 7327 3a20 4e6f 6e65 2c20   'alias': None, 
+00020600: 276f 7074 696f 6e73 273a 207b 276b 6565  'options': {'kee
+00020610: 705f 616c 6c5f 746f 6b65 6e73 273a 2046  p_all_tokens': F
+00020620: 616c 7365 2c20 2765 7870 616e 6431 273a  alse, 'expand1':
+00020630: 2046 616c 7365 2c20 2770 7269 6f72 6974   False, 'priorit
+00020640: 7927 3a20 4e6f 6e65 2c20 2774 656d 706c  y': None, 'templ
+00020650: 6174 655f 736f 7572 6365 273a 204e 6f6e  ate_source': Non
+00020660: 652c 2027 656d 7074 795f 696e 6469 6365  e, 'empty_indice
+00020670: 7327 3a20 2829 2c20 275f 5f74 7970 655f  s': (), '__type_
+00020680: 5f27 3a20 2752 756c 654f 7074 696f 6e73  _': 'RuleOptions
+00020690: 277d 2c20 275f 5f74 7970 655f 5f27 3a20  '}, '__type__': 
+000206a0: 2752 756c 6527 7d2c 2033 373a 207b 276f  'Rule'}, 37: {'o
+000206b0: 7269 6769 6e27 3a20 7b27 6e61 6d65 273a  rigin': {'name':
+000206c0: 2054 6f6b 656e 2827 5255 4c45 272c 2027   Token('RULE', '
+000206d0: 6d61 7463 6827 292c 2027 5f5f 7479 7065  match'), '__type
+000206e0: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
+000206f0: 6c27 7d2c 2027 6578 7061 6e73 696f 6e27  l'}, 'expansion'
+00020700: 3a20 5b7b 276e 616d 6527 3a20 276d 6174  : [{'name': 'mat
+00020710: 6368 6974 656d 272c 2027 5f5f 7479 7065  chitem', '__type
+00020720: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
+00020730: 6c27 7d5d 2c20 276f 7264 6572 273a 2031  l'}], 'order': 1
+00020740: 2c20 2761 6c69 6173 273a 204e 6f6e 652c  , 'alias': None,
+00020750: 2027 6f70 7469 6f6e 7327 3a20 7b27 6b65   'options': {'ke
+00020760: 6570 5f61 6c6c 5f74 6f6b 656e 7327 3a20  ep_all_tokens': 
+00020770: 4661 6c73 652c 2027 6578 7061 6e64 3127  False, 'expand1'
+00020780: 3a20 4661 6c73 652c 2027 7072 696f 7269  : False, 'priori
+00020790: 7479 273a 204e 6f6e 652c 2027 7465 6d70  ty': None, 'temp
+000207a0: 6c61 7465 5f73 6f75 7263 6527 3a20 4e6f  late_source': No
+000207b0: 6e65 2c20 2765 6d70 7479 5f69 6e64 6963  ne, 'empty_indic
+000207c0: 6573 273a 2028 292c 2027 5f5f 7479 7065  es': (), '__type
+000207d0: 5f5f 273a 2027 5275 6c65 4f70 7469 6f6e  __': 'RuleOption
+000207e0: 7327 7d2c 2027 5f5f 7479 7065 5f5f 273a  s'}, '__type__':
+000207f0: 2027 5275 6c65 277d 2c20 3338 3a20 7b27   'Rule'}, 38: {'
+00020800: 6f72 6967 696e 273a 207b 276e 616d 6527  origin': {'name'
+00020810: 3a20 546f 6b65 6e28 2752 554c 4527 2c20  : Token('RULE', 
+00020820: 276d 6174 6368 6974 656d 2729 2c20 275f  'matchitem'), '_
+00020830: 5f74 7970 655f 5f27 3a20 274e 6f6e 5465  _type__': 'NonTe
+00020840: 726d 696e 616c 277d 2c20 2765 7870 616e  rminal'}, 'expan
+00020850: 7369 6f6e 273a 205b 7b27 6e61 6d65 273a  sion': [{'name':
+00020860: 2027 4d41 5443 485f 414e 595f 4348 4152   'MATCH_ANY_CHAR
+00020870: 4143 5445 5227 2c20 2766 696c 7465 725f  ACTER', 'filter_
+00020880: 6f75 7427 3a20 4661 6c73 652c 2027 5f5f  out': False, '__
+00020890: 7479 7065 5f5f 273a 2027 5465 726d 696e  type__': 'Termin
+000208a0: 616c 277d 5d2c 2027 6f72 6465 7227 3a20  al'}], 'order': 
+000208b0: 302c 2027 616c 6961 7327 3a20 4e6f 6e65  0, 'alias': None
+000208c0: 2c20 276f 7074 696f 6e73 273a 207b 276b  , 'options': {'k
+000208d0: 6565 705f 616c 6c5f 746f 6b65 6e73 273a  eep_all_tokens':
+000208e0: 2046 616c 7365 2c20 2765 7870 616e 6431   False, 'expand1
+000208f0: 273a 2046 616c 7365 2c20 2770 7269 6f72  ': False, 'prior
+00020900: 6974 7927 3a20 4e6f 6e65 2c20 2774 656d  ity': None, 'tem
+00020910: 706c 6174 655f 736f 7572 6365 273a 204e  plate_source': N
+00020920: 6f6e 652c 2027 656d 7074 795f 696e 6469  one, 'empty_indi
+00020930: 6365 7327 3a20 2829 2c20 275f 5f74 7970  ces': (), '__typ
+00020940: 655f 5f27 3a20 2752 756c 654f 7074 696f  e__': 'RuleOptio
+00020950: 6e73 277d 2c20 275f 5f74 7970 655f 5f27  ns'}, '__type__'
+00020960: 3a20 2752 756c 6527 7d2c 2033 393a 207b  : 'Rule'}, 39: {
+00020970: 276f 7269 6769 6e27 3a20 7b27 6e61 6d65  'origin': {'name
+00020980: 273a 2054 6f6b 656e 2827 5255 4c45 272c  ': Token('RULE',
+00020990: 2027 6d61 7463 6869 7465 6d27 292c 2027   'matchitem'), '
+000209a0: 5f5f 7479 7065 5f5f 273a 2027 4e6f 6e54  __type__': 'NonT
+000209b0: 6572 6d69 6e61 6c27 7d2c 2027 6578 7061  erminal'}, 'expa
+000209c0: 6e73 696f 6e27 3a20 5b7b 276e 616d 6527  nsion': [{'name'
+000209d0: 3a20 276d 6174 6368 5f63 6861 7261 6374  : 'match_charact
+000209e0: 6572 5f63 6c61 7373 272c 2027 5f5f 7479  er_class', '__ty
+000209f0: 7065 5f5f 273a 2027 4e6f 6e54 6572 6d69  pe__': 'NonTermi
+00020a00: 6e61 6c27 7d5d 2c20 276f 7264 6572 273a  nal'}], 'order':
+00020a10: 2031 2c20 2761 6c69 6173 273a 204e 6f6e   1, 'alias': Non
+00020a20: 652c 2027 6f70 7469 6f6e 7327 3a20 7b27  e, 'options': {'
+00020a30: 6b65 6570 5f61 6c6c 5f74 6f6b 656e 7327  keep_all_tokens'
+00020a40: 3a20 4661 6c73 652c 2027 6578 7061 6e64  : False, 'expand
+00020a50: 3127 3a20 4661 6c73 652c 2027 7072 696f  1': False, 'prio
+00020a60: 7269 7479 273a 204e 6f6e 652c 2027 7465  rity': None, 'te
+00020a70: 6d70 6c61 7465 5f73 6f75 7263 6527 3a20  mplate_source': 
+00020a80: 4e6f 6e65 2c20 2765 6d70 7479 5f69 6e64  None, 'empty_ind
+00020a90: 6963 6573 273a 2028 292c 2027 5f5f 7479  ices': (), '__ty
+00020aa0: 7065 5f5f 273a 2027 5275 6c65 4f70 7469  pe__': 'RuleOpti
+00020ab0: 6f6e 7327 7d2c 2027 5f5f 7479 7065 5f5f  ons'}, '__type__
+00020ac0: 273a 2027 5275 6c65 277d 2c20 3430 3a20  ': 'Rule'}, 40: 
+00020ad0: 7b27 6f72 6967 696e 273a 207b 276e 616d  {'origin': {'nam
+00020ae0: 6527 3a20 546f 6b65 6e28 2752 554c 4527  e': Token('RULE'
+00020af0: 2c20 276d 6174 6368 6974 656d 2729 2c20  , 'matchitem'), 
+00020b00: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
+00020b10: 5465 726d 696e 616c 277d 2c20 2765 7870  Terminal'}, 'exp
+00020b20: 616e 7369 6f6e 273a 205b 7b27 6e61 6d65  ansion': [{'name
+00020b30: 273a 2027 4348 4152 272c 2027 6669 6c74  ': 'CHAR', 'filt
+00020b40: 6572 5f6f 7574 273a 2046 616c 7365 2c20  er_out': False, 
+00020b50: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+00020b60: 6d69 6e61 6c27 7d5d 2c20 276f 7264 6572  minal'}], 'order
+00020b70: 273a 2032 2c20 2761 6c69 6173 273a 204e  ': 2, 'alias': N
+00020b80: 6f6e 652c 2027 6f70 7469 6f6e 7327 3a20  one, 'options': 
+00020b90: 7b27 6b65 6570 5f61 6c6c 5f74 6f6b 656e  {'keep_all_token
+00020ba0: 7327 3a20 4661 6c73 652c 2027 6578 7061  s': False, 'expa
+00020bb0: 6e64 3127 3a20 4661 6c73 652c 2027 7072  nd1': False, 'pr
+00020bc0: 696f 7269 7479 273a 204e 6f6e 652c 2027  iority': None, '
+00020bd0: 7465 6d70 6c61 7465 5f73 6f75 7263 6527  template_source'
+00020be0: 3a20 4e6f 6e65 2c20 2765 6d70 7479 5f69  : None, 'empty_i
+00020bf0: 6e64 6963 6573 273a 2028 292c 2027 5f5f  ndices': (), '__
+00020c00: 7479 7065 5f5f 273a 2027 5275 6c65 4f70  type__': 'RuleOp
+00020c10: 7469 6f6e 7327 7d2c 2027 5f5f 7479 7065  tions'}, '__type
+00020c20: 5f5f 273a 2027 5275 6c65 277d 2c20 3431  __': 'Rule'}, 41
+00020c30: 3a20 7b27 6f72 6967 696e 273a 207b 276e  : {'origin': {'n
+00020c40: 616d 6527 3a20 546f 6b65 6e28 2752 554c  ame': Token('RUL
+00020c50: 4527 2c20 276d 6174 6368 5f63 6861 7261  E', 'match_chara
+00020c60: 6374 6572 5f63 6c61 7373 2729 2c20 275f  cter_class'), '_
+00020c70: 5f74 7970 655f 5f27 3a20 274e 6f6e 5465  _type__': 'NonTe
+00020c80: 726d 696e 616c 277d 2c20 2765 7870 616e  rminal'}, 'expan
+00020c90: 7369 6f6e 273a 205b 7b27 6e61 6d65 273a  sion': [{'name':
+00020ca0: 2027 6368 6172 6163 7465 725f 6772 6f75   'character_grou
+00020cb0: 7027 2c20 275f 5f74 7970 655f 5f27 3a20  p', '__type__': 
+00020cc0: 274e 6f6e 5465 726d 696e 616c 277d 5d2c  'NonTerminal'}],
+00020cd0: 2027 6f72 6465 7227 3a20 302c 2027 616c   'order': 0, 'al
+00020ce0: 6961 7327 3a20 4e6f 6e65 2c20 276f 7074  ias': None, 'opt
+00020cf0: 696f 6e73 273a 207b 276b 6565 705f 616c  ions': {'keep_al
+00020d00: 6c5f 746f 6b65 6e73 273a 2046 616c 7365  l_tokens': False
+00020d10: 2c20 2765 7870 616e 6431 273a 2046 616c  , 'expand1': Fal
+00020d20: 7365 2c20 2770 7269 6f72 6974 7927 3a20  se, 'priority': 
+00020d30: 4e6f 6e65 2c20 2774 656d 706c 6174 655f  None, 'template_
+00020d40: 736f 7572 6365 273a 204e 6f6e 652c 2027  source': None, '
+00020d50: 656d 7074 795f 696e 6469 6365 7327 3a20  empty_indices': 
+00020d60: 2829 2c20 275f 5f74 7970 655f 5f27 3a20  (), '__type__': 
+00020d70: 2752 756c 654f 7074 696f 6e73 277d 2c20  'RuleOptions'}, 
+00020d80: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
+00020d90: 6527 7d2c 2034 323a 207b 276f 7269 6769  e'}, 42: {'origi
+00020da0: 6e27 3a20 7b27 6e61 6d65 273a 2054 6f6b  n': {'name': Tok
+00020db0: 656e 2827 5255 4c45 272c 2027 6d61 7463  en('RULE', 'matc
+00020dc0: 685f 6368 6172 6163 7465 725f 636c 6173  h_character_clas
+00020dd0: 7327 292c 2027 5f5f 7479 7065 5f5f 273a  s'), '__type__':
+00020de0: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
+00020df0: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
+00020e00: 276e 616d 6527 3a20 2743 4841 5241 4354  'name': 'CHARACT
+00020e10: 4552 5f43 4c41 5353 272c 2027 6669 6c74  ER_CLASS', 'filt
+00020e20: 6572 5f6f 7574 273a 2046 616c 7365 2c20  er_out': False, 
+00020e30: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+00020e40: 6d69 6e61 6c27 7d5d 2c20 276f 7264 6572  minal'}], 'order
+00020e50: 273a 2031 2c20 2761 6c69 6173 273a 204e  ': 1, 'alias': N
+00020e60: 6f6e 652c 2027 6f70 7469 6f6e 7327 3a20  one, 'options': 
+00020e70: 7b27 6b65 6570 5f61 6c6c 5f74 6f6b 656e  {'keep_all_token
+00020e80: 7327 3a20 4661 6c73 652c 2027 6578 7061  s': False, 'expa
+00020e90: 6e64 3127 3a20 4661 6c73 652c 2027 7072  nd1': False, 'pr
+00020ea0: 696f 7269 7479 273a 204e 6f6e 652c 2027  iority': None, '
+00020eb0: 7465 6d70 6c61 7465 5f73 6f75 7263 6527  template_source'
+00020ec0: 3a20 4e6f 6e65 2c20 2765 6d70 7479 5f69  : None, 'empty_i
+00020ed0: 6e64 6963 6573 273a 2028 292c 2027 5f5f  ndices': (), '__
+00020ee0: 7479 7065 5f5f 273a 2027 5275 6c65 4f70  type__': 'RuleOp
+00020ef0: 7469 6f6e 7327 7d2c 2027 5f5f 7479 7065  tions'}, '__type
+00020f00: 5f5f 273a 2027 5275 6c65 277d 2c20 3433  __': 'Rule'}, 43
+00020f10: 3a20 7b27 6f72 6967 696e 273a 207b 276e  : {'origin': {'n
+00020f20: 616d 6527 3a20 546f 6b65 6e28 2752 554c  ame': Token('RUL
+00020f30: 4527 2c20 276d 6174 6368 5f63 6861 7261  E', 'match_chara
+00020f40: 6374 6572 5f63 6c61 7373 2729 2c20 275f  cter_class'), '_
+00020f50: 5f74 7970 655f 5f27 3a20 274e 6f6e 5465  _type__': 'NonTe
+00020f60: 726d 696e 616c 277d 2c20 2765 7870 616e  rminal'}, 'expan
+00020f70: 7369 6f6e 273a 205b 7b27 6e61 6d65 273a  sion': [{'name':
+00020f80: 2027 6368 6172 6163 7465 725f 636c 6173   'character_clas
+00020f90: 735f 6672 6f6d 5f75 6e69 636f 6465 5f63  s_from_unicode_c
+00020fa0: 6174 6567 6f72 7927 2c20 275f 5f74 7970  ategory', '__typ
+00020fb0: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
+00020fc0: 616c 277d 5d2c 2027 6f72 6465 7227 3a20  al'}], 'order': 
+00020fd0: 322c 2027 616c 6961 7327 3a20 4e6f 6e65  2, 'alias': None
+00020fe0: 2c20 276f 7074 696f 6e73 273a 207b 276b  , 'options': {'k
+00020ff0: 6565 705f 616c 6c5f 746f 6b65 6e73 273a  eep_all_tokens':
+00021000: 2046 616c 7365 2c20 2765 7870 616e 6431   False, 'expand1
+00021010: 273a 2046 616c 7365 2c20 2770 7269 6f72  ': False, 'prior
+00021020: 6974 7927 3a20 4e6f 6e65 2c20 2774 656d  ity': None, 'tem
+00021030: 706c 6174 655f 736f 7572 6365 273a 204e  plate_source': N
+00021040: 6f6e 652c 2027 656d 7074 795f 696e 6469  one, 'empty_indi
+00021050: 6365 7327 3a20 2829 2c20 275f 5f74 7970  ces': (), '__typ
+00021060: 655f 5f27 3a20 2752 756c 654f 7074 696f  e__': 'RuleOptio
+00021070: 6e73 277d 2c20 275f 5f74 7970 655f 5f27  ns'}, '__type__'
+00021080: 3a20 2752 756c 6527 7d2c 2034 343a 207b  : 'Rule'}, 44: {
+00021090: 276f 7269 6769 6e27 3a20 7b27 6e61 6d65  'origin': {'name
+000210a0: 273a 2054 6f6b 656e 2827 5255 4c45 272c  ': Token('RULE',
+000210b0: 2027 6368 6172 6163 7465 725f 6772 6f75   'character_grou
+000210c0: 7027 292c 2027 5f5f 7479 7065 5f5f 273a  p'), '__type__':
+000210d0: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
+000210e0: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
+000210f0: 276e 616d 6527 3a20 274c 5351 4227 2c20  'name': 'LSQB', 
+00021100: 2766 696c 7465 725f 6f75 7427 3a20 5472  'filter_out': Tr
+00021110: 7565 2c20 275f 5f74 7970 655f 5f27 3a20  ue, '__type__': 
+00021120: 2754 6572 6d69 6e61 6c27 7d2c 207b 276e  'Terminal'}, {'n
+00021130: 616d 6527 3a20 2743 4841 5241 4354 4552  ame': 'CHARACTER
+00021140: 5f47 524f 5550 5f4e 4547 4154 4956 455f  _GROUP_NEGATIVE_
+00021150: 4d4f 4449 4649 4552 272c 2027 6669 6c74  MODIFIER', 'filt
+00021160: 6572 5f6f 7574 273a 2046 616c 7365 2c20  er_out': False, 
+00021170: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+00021180: 6d69 6e61 6c27 7d2c 207b 276e 616d 6527  minal'}, {'name'
+00021190: 3a20 275f 5f63 6861 7261 6374 6572 5f67  : '__character_g
+000211a0: 726f 7570 5f70 6c75 735f 3127 2c20 275f  roup_plus_1', '_
+000211b0: 5f74 7970 655f 5f27 3a20 274e 6f6e 5465  _type__': 'NonTe
+000211c0: 726d 696e 616c 277d 2c20 7b27 6e61 6d65  rminal'}, {'name
+000211d0: 273a 2027 5253 5142 272c 2027 6669 6c74  ': 'RSQB', 'filt
+000211e0: 6572 5f6f 7574 273a 2054 7275 652c 2027  er_out': True, '
+000211f0: 5f5f 7479 7065 5f5f 273a 2027 5465 726d  __type__': 'Term
+00021200: 696e 616c 277d 5d2c 2027 6f72 6465 7227  inal'}], 'order'
+00021210: 3a20 302c 2027 616c 6961 7327 3a20 4e6f  : 0, 'alias': No
+00021220: 6e65 2c20 276f 7074 696f 6e73 273a 207b  ne, 'options': {
+00021230: 276b 6565 705f 616c 6c5f 746f 6b65 6e73  'keep_all_tokens
+00021240: 273a 2046 616c 7365 2c20 2765 7870 616e  ': False, 'expan
+00021250: 6431 273a 2046 616c 7365 2c20 2770 7269  d1': False, 'pri
+00021260: 6f72 6974 7927 3a20 4e6f 6e65 2c20 2774  ority': None, 't
+00021270: 656d 706c 6174 655f 736f 7572 6365 273a  emplate_source':
+00021280: 204e 6f6e 652c 2027 656d 7074 795f 696e   None, 'empty_in
+00021290: 6469 6365 7327 3a20 2829 2c20 275f 5f74  dices': (), '__t
+000212a0: 7970 655f 5f27 3a20 2752 756c 654f 7074  ype__': 'RuleOpt
+000212b0: 696f 6e73 277d 2c20 275f 5f74 7970 655f  ions'}, '__type_
+000212c0: 5f27 3a20 2752 756c 6527 7d2c 2034 353a  _': 'Rule'}, 45:
+000212d0: 207b 276f 7269 6769 6e27 3a20 7b27 6e61   {'origin': {'na
+000212e0: 6d65 273a 2054 6f6b 656e 2827 5255 4c45  me': Token('RULE
+000212f0: 272c 2027 6368 6172 6163 7465 725f 6772  ', 'character_gr
+00021300: 6f75 7027 292c 2027 5f5f 7479 7065 5f5f  oup'), '__type__
+00021310: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+00021320: 7d2c 2027 6578 7061 6e73 696f 6e27 3a20  }, 'expansion': 
+00021330: 5b7b 276e 616d 6527 3a20 274c 5351 4227  [{'name': 'LSQB'
+00021340: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
+00021350: 5472 7565 2c20 275f 5f74 7970 655f 5f27  True, '__type__'
+00021360: 3a20 2754 6572 6d69 6e61 6c27 7d2c 207b  : 'Terminal'}, {
+00021370: 276e 616d 6527 3a20 275f 5f63 6861 7261  'name': '__chara
+00021380: 6374 6572 5f67 726f 7570 5f70 6c75 735f  cter_group_plus_
+00021390: 3127 2c20 275f 5f74 7970 655f 5f27 3a20  1', '__type__': 
+000213a0: 274e 6f6e 5465 726d 696e 616c 277d 2c20  'NonTerminal'}, 
+000213b0: 7b27 6e61 6d65 273a 2027 5253 5142 272c  {'name': 'RSQB',
+000213c0: 2027 6669 6c74 6572 5f6f 7574 273a 2054   'filter_out': T
+000213d0: 7275 652c 2027 5f5f 7479 7065 5f5f 273a  rue, '__type__':
+000213e0: 2027 5465 726d 696e 616c 277d 5d2c 2027   'Terminal'}], '
+000213f0: 6f72 6465 7227 3a20 312c 2027 616c 6961  order': 1, 'alia
+00021400: 7327 3a20 4e6f 6e65 2c20 276f 7074 696f  s': None, 'optio
+00021410: 6e73 273a 207b 276b 6565 705f 616c 6c5f  ns': {'keep_all_
+00021420: 746f 6b65 6e73 273a 2046 616c 7365 2c20  tokens': False, 
+00021430: 2765 7870 616e 6431 273a 2046 616c 7365  'expand1': False
+00021440: 2c20 2770 7269 6f72 6974 7927 3a20 4e6f  , 'priority': No
+00021450: 6e65 2c20 2774 656d 706c 6174 655f 736f  ne, 'template_so
+00021460: 7572 6365 273a 204e 6f6e 652c 2027 656d  urce': None, 'em
+00021470: 7074 795f 696e 6469 6365 7327 3a20 2829  pty_indices': ()
+00021480: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
+00021490: 756c 654f 7074 696f 6e73 277d 2c20 275f  uleOptions'}, '_
+000214a0: 5f74 7970 655f 5f27 3a20 2752 756c 6527  _type__': 'Rule'
+000214b0: 7d2c 2034 363a 207b 276f 7269 6769 6e27  }, 46: {'origin'
+000214c0: 3a20 7b27 6e61 6d65 273a 2054 6f6b 656e  : {'name': Token
+000214d0: 2827 5255 4c45 272c 2027 6368 6172 6163  ('RULE', 'charac
+000214e0: 7465 725f 6772 6f75 705f 6974 656d 2729  ter_group_item')
+000214f0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
+00021500: 6f6e 5465 726d 696e 616c 277d 2c20 2765  onTerminal'}, 'e
+00021510: 7870 616e 7369 6f6e 273a 205b 7b27 6e61  xpansion': [{'na
+00021520: 6d65 273a 2027 4348 4152 4143 5445 525f  me': 'CHARACTER_
+00021530: 434c 4153 5327 2c20 2766 696c 7465 725f  CLASS', 'filter_
+00021540: 6f75 7427 3a20 4661 6c73 652c 2027 5f5f  out': False, '__
+00021550: 7479 7065 5f5f 273a 2027 5465 726d 696e  type__': 'Termin
+00021560: 616c 277d 5d2c 2027 6f72 6465 7227 3a20  al'}], 'order': 
+00021570: 302c 2027 616c 6961 7327 3a20 4e6f 6e65  0, 'alias': None
+00021580: 2c20 276f 7074 696f 6e73 273a 207b 276b  , 'options': {'k
+00021590: 6565 705f 616c 6c5f 746f 6b65 6e73 273a  eep_all_tokens':
+000215a0: 2046 616c 7365 2c20 2765 7870 616e 6431   False, 'expand1
+000215b0: 273a 2046 616c 7365 2c20 2770 7269 6f72  ': False, 'prior
+000215c0: 6974 7927 3a20 4e6f 6e65 2c20 2774 656d  ity': None, 'tem
+000215d0: 706c 6174 655f 736f 7572 6365 273a 204e  plate_source': N
+000215e0: 6f6e 652c 2027 656d 7074 795f 696e 6469  one, 'empty_indi
+000215f0: 6365 7327 3a20 2829 2c20 275f 5f74 7970  ces': (), '__typ
+00021600: 655f 5f27 3a20 2752 756c 654f 7074 696f  e__': 'RuleOptio
+00021610: 6e73 277d 2c20 275f 5f74 7970 655f 5f27  ns'}, '__type__'
+00021620: 3a20 2752 756c 6527 7d2c 2034 373a 207b  : 'Rule'}, 47: {
+00021630: 276f 7269 6769 6e27 3a20 7b27 6e61 6d65  'origin': {'name
+00021640: 273a 2054 6f6b 656e 2827 5255 4c45 272c  ': Token('RULE',
+00021650: 2027 6368 6172 6163 7465 725f 6772 6f75   'character_grou
+00021660: 705f 6974 656d 2729 2c20 275f 5f74 7970  p_item'), '__typ
+00021670: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
+00021680: 616c 277d 2c20 2765 7870 616e 7369 6f6e  al'}, 'expansion
+00021690: 273a 205b 7b27 6e61 6d65 273a 2027 6368  ': [{'name': 'ch
+000216a0: 6172 6163 7465 725f 636c 6173 735f 6672  aracter_class_fr
+000216b0: 6f6d 5f75 6e69 636f 6465 5f63 6174 6567  om_unicode_categ
+000216c0: 6f72 7927 2c20 275f 5f74 7970 655f 5f27  ory', '__type__'
+000216d0: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
+000216e0: 5d2c 2027 6f72 6465 7227 3a20 312c 2027  ], 'order': 1, '
+000216f0: 616c 6961 7327 3a20 4e6f 6e65 2c20 276f  alias': None, 'o
+00021700: 7074 696f 6e73 273a 207b 276b 6565 705f  ptions': {'keep_
+00021710: 616c 6c5f 746f 6b65 6e73 273a 2046 616c  all_tokens': Fal
+00021720: 7365 2c20 2765 7870 616e 6431 273a 2046  se, 'expand1': F
+00021730: 616c 7365 2c20 2770 7269 6f72 6974 7927  alse, 'priority'
+00021740: 3a20 4e6f 6e65 2c20 2774 656d 706c 6174  : None, 'templat
+00021750: 655f 736f 7572 6365 273a 204e 6f6e 652c  e_source': None,
+00021760: 2027 656d 7074 795f 696e 6469 6365 7327   'empty_indices'
+00021770: 3a20 2829 2c20 275f 5f74 7970 655f 5f27  : (), '__type__'
+00021780: 3a20 2752 756c 654f 7074 696f 6e73 277d  : 'RuleOptions'}
+00021790: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
+000217a0: 756c 6527 7d2c 2034 383a 207b 276f 7269  ule'}, 48: {'ori
+000217b0: 6769 6e27 3a20 7b27 6e61 6d65 273a 2054  gin': {'name': T
+000217c0: 6f6b 656e 2827 5255 4c45 272c 2027 6368  oken('RULE', 'ch
+000217d0: 6172 6163 7465 725f 6772 6f75 705f 6974  aracter_group_it
+000217e0: 656d 2729 2c20 275f 5f74 7970 655f 5f27  em'), '__type__'
+000217f0: 3a20 274e 6f6e 5465 726d 696e 616c 277d  : 'NonTerminal'}
+00021800: 2c20 2765 7870 616e 7369 6f6e 273a 205b  , 'expansion': [
+00021810: 7b27 6e61 6d65 273a 2027 6368 6172 6163  {'name': 'charac
+00021820: 7465 725f 7261 6e67 6527 2c20 275f 5f74  ter_range', '__t
+00021830: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
+00021840: 696e 616c 277d 5d2c 2027 6f72 6465 7227  inal'}], 'order'
+00021850: 3a20 322c 2027 616c 6961 7327 3a20 4e6f  : 2, 'alias': No
+00021860: 6e65 2c20 276f 7074 696f 6e73 273a 207b  ne, 'options': {
+00021870: 276b 6565 705f 616c 6c5f 746f 6b65 6e73  'keep_all_tokens
+00021880: 273a 2046 616c 7365 2c20 2765 7870 616e  ': False, 'expan
+00021890: 6431 273a 2046 616c 7365 2c20 2770 7269  d1': False, 'pri
+000218a0: 6f72 6974 7927 3a20 4e6f 6e65 2c20 2774  ority': None, 't
+000218b0: 656d 706c 6174 655f 736f 7572 6365 273a  emplate_source':
+000218c0: 204e 6f6e 652c 2027 656d 7074 795f 696e   None, 'empty_in
+000218d0: 6469 6365 7327 3a20 2829 2c20 275f 5f74  dices': (), '__t
+000218e0: 7970 655f 5f27 3a20 2752 756c 654f 7074  ype__': 'RuleOpt
+000218f0: 696f 6e73 277d 2c20 275f 5f74 7970 655f  ions'}, '__type_
+00021900: 5f27 3a20 2752 756c 6527 7d2c 2034 393a  _': 'Rule'}, 49:
+00021910: 207b 276f 7269 6769 6e27 3a20 7b27 6e61   {'origin': {'na
+00021920: 6d65 273a 2054 6f6b 656e 2827 5255 4c45  me': Token('RULE
+00021930: 272c 2027 6368 6172 6163 7465 725f 6772  ', 'character_gr
+00021940: 6f75 705f 6974 656d 2729 2c20 275f 5f74  oup_item'), '__t
+00021950: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
+00021960: 696e 616c 277d 2c20 2765 7870 616e 7369  inal'}, 'expansi
+00021970: 6f6e 273a 205b 7b27 6e61 6d65 273a 2027  on': [{'name': '
+00021980: 4348 4152 272c 2027 6669 6c74 6572 5f6f  CHAR', 'filter_o
+00021990: 7574 273a 2046 616c 7365 2c20 275f 5f74  ut': False, '__t
+000219a0: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+000219b0: 6c27 7d5d 2c20 276f 7264 6572 273a 2033  l'}], 'order': 3
+000219c0: 2c20 2761 6c69 6173 273a 204e 6f6e 652c  , 'alias': None,
+000219d0: 2027 6f70 7469 6f6e 7327 3a20 7b27 6b65   'options': {'ke
+000219e0: 6570 5f61 6c6c 5f74 6f6b 656e 7327 3a20  ep_all_tokens': 
+000219f0: 4661 6c73 652c 2027 6578 7061 6e64 3127  False, 'expand1'
+00021a00: 3a20 4661 6c73 652c 2027 7072 696f 7269  : False, 'priori
+00021a10: 7479 273a 204e 6f6e 652c 2027 7465 6d70  ty': None, 'temp
+00021a20: 6c61 7465 5f73 6f75 7263 6527 3a20 4e6f  late_source': No
+00021a30: 6e65 2c20 2765 6d70 7479 5f69 6e64 6963  ne, 'empty_indic
+00021a40: 6573 273a 2028 292c 2027 5f5f 7479 7065  es': (), '__type
+00021a50: 5f5f 273a 2027 5275 6c65 4f70 7469 6f6e  __': 'RuleOption
+00021a60: 7327 7d2c 2027 5f5f 7479 7065 5f5f 273a  s'}, '__type__':
+00021a70: 2027 5275 6c65 277d 2c20 3530 3a20 7b27   'Rule'}, 50: {'
+00021a80: 6f72 6967 696e 273a 207b 276e 616d 6527  origin': {'name'
+00021a90: 3a20 546f 6b65 6e28 2752 554c 4527 2c20  : Token('RULE', 
+00021aa0: 2763 6861 7261 6374 6572 5f63 6c61 7373  'character_class
+00021ab0: 5f66 726f 6d5f 756e 6963 6f64 655f 6361  _from_unicode_ca
+00021ac0: 7465 676f 7279 2729 2c20 275f 5f74 7970  tegory'), '__typ
+00021ad0: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
+00021ae0: 616c 277d 2c20 2765 7870 616e 7369 6f6e  al'}, 'expansion
+00021af0: 273a 205b 7b27 6e61 6d65 273a 2027 5f5f  ': [{'name': '__
+00021b00: 414e 4f4e 5f30 272c 2027 6669 6c74 6572  ANON_0', 'filter
+00021b10: 5f6f 7574 273a 2054 7275 652c 2027 5f5f  _out': True, '__
+00021b20: 7479 7065 5f5f 273a 2027 5465 726d 696e  type__': 'Termin
+00021b30: 616c 277d 2c20 7b27 6e61 6d65 273a 2027  al'}, {'name': '
+00021b40: 4c45 5454 4552 5327 2c20 2766 696c 7465  LETTERS', 'filte
+00021b50: 725f 6f75 7427 3a20 4661 6c73 652c 2027  r_out': False, '
+00021b60: 5f5f 7479 7065 5f5f 273a 2027 5465 726d  __type__': 'Term
+00021b70: 696e 616c 277d 2c20 7b27 6e61 6d65 273a  inal'}, {'name':
+00021b80: 2027 5242 5241 4345 272c 2027 6669 6c74   'RBRACE', 'filt
+00021b90: 6572 5f6f 7574 273a 2054 7275 652c 2027  er_out': True, '
+00021ba0: 5f5f 7479 7065 5f5f 273a 2027 5465 726d  __type__': 'Term
+00021bb0: 696e 616c 277d 5d2c 2027 6f72 6465 7227  inal'}], 'order'
+00021bc0: 3a20 302c 2027 616c 6961 7327 3a20 4e6f  : 0, 'alias': No
+00021bd0: 6e65 2c20 276f 7074 696f 6e73 273a 207b  ne, 'options': {
+00021be0: 276b 6565 705f 616c 6c5f 746f 6b65 6e73  'keep_all_tokens
+00021bf0: 273a 2046 616c 7365 2c20 2765 7870 616e  ': False, 'expan
+00021c00: 6431 273a 2046 616c 7365 2c20 2770 7269  d1': False, 'pri
+00021c10: 6f72 6974 7927 3a20 4e6f 6e65 2c20 2774  ority': None, 't
+00021c20: 656d 706c 6174 655f 736f 7572 6365 273a  emplate_source':
+00021c30: 204e 6f6e 652c 2027 656d 7074 795f 696e   None, 'empty_in
+00021c40: 6469 6365 7327 3a20 2829 2c20 275f 5f74  dices': (), '__t
+00021c50: 7970 655f 5f27 3a20 2752 756c 654f 7074  ype__': 'RuleOpt
+00021c60: 696f 6e73 277d 2c20 275f 5f74 7970 655f  ions'}, '__type_
+00021c70: 5f27 3a20 2752 756c 6527 7d2c 2035 313a  _': 'Rule'}, 51:
+00021c80: 207b 276f 7269 6769 6e27 3a20 7b27 6e61   {'origin': {'na
+00021c90: 6d65 273a 2054 6f6b 656e 2827 5255 4c45  me': Token('RULE
+00021ca0: 272c 2027 6368 6172 6163 7465 725f 7261  ', 'character_ra
+00021cb0: 6e67 6527 292c 2027 5f5f 7479 7065 5f5f  nge'), '__type__
+00021cc0: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+00021cd0: 7d2c 2027 6578 7061 6e73 696f 6e27 3a20  }, 'expansion': 
+00021ce0: 5b7b 276e 616d 6527 3a20 2743 4841 5227  [{'name': 'CHAR'
+00021cf0: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
+00021d00: 4661 6c73 652c 2027 5f5f 7479 7065 5f5f  False, '__type__
+00021d10: 273a 2027 5465 726d 696e 616c 277d 2c20  ': 'Terminal'}, 
+00021d20: 7b27 6e61 6d65 273a 2027 4d49 4e55 5327  {'name': 'MINUS'
+00021d30: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
+00021d40: 5472 7565 2c20 275f 5f74 7970 655f 5f27  True, '__type__'
+00021d50: 3a20 2754 6572 6d69 6e61 6c27 7d2c 207b  : 'Terminal'}, {
+00021d60: 276e 616d 6527 3a20 2743 4841 5227 2c20  'name': 'CHAR', 
+00021d70: 2766 696c 7465 725f 6f75 7427 3a20 4661  'filter_out': Fa
+00021d80: 6c73 652c 2027 5f5f 7479 7065 5f5f 273a  lse, '__type__':
+00021d90: 2027 5465 726d 696e 616c 277d 5d2c 2027   'Terminal'}], '
+00021da0: 6f72 6465 7227 3a20 302c 2027 616c 6961  order': 0, 'alia
+00021db0: 7327 3a20 4e6f 6e65 2c20 276f 7074 696f  s': None, 'optio
+00021dc0: 6e73 273a 207b 276b 6565 705f 616c 6c5f  ns': {'keep_all_
+00021dd0: 746f 6b65 6e73 273a 2046 616c 7365 2c20  tokens': False, 
+00021de0: 2765 7870 616e 6431 273a 2046 616c 7365  'expand1': False
+00021df0: 2c20 2770 7269 6f72 6974 7927 3a20 4e6f  , 'priority': No
+00021e00: 6e65 2c20 2774 656d 706c 6174 655f 736f  ne, 'template_so
+00021e10: 7572 6365 273a 204e 6f6e 652c 2027 656d  urce': None, 'em
+00021e20: 7074 795f 696e 6469 6365 7327 3a20 2829  pty_indices': ()
+00021e30: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
+00021e40: 756c 654f 7074 696f 6e73 277d 2c20 275f  uleOptions'}, '_
+00021e50: 5f74 7970 655f 5f27 3a20 2752 756c 6527  _type__': 'Rule'
+00021e60: 7d2c 2035 323a 207b 276f 7269 6769 6e27  }, 52: {'origin'
+00021e70: 3a20 7b27 6e61 6d65 273a 2054 6f6b 656e  : {'name': Token
+00021e80: 2827 5255 4c45 272c 2027 7265 7065 7469  ('RULE', 'repeti
+00021e90: 7469 6f6e 2729 2c20 275f 5f74 7970 655f  tion'), '__type_
+00021ea0: 5f27 3a20 274e 6f6e 5465 726d 696e 616c  _': 'NonTerminal
+00021eb0: 277d 2c20 2765 7870 616e 7369 6f6e 273a  '}, 'expansion':
+00021ec0: 205b 7b27 6e61 6d65 273a 2027 7265 7065   [{'name': 'repe
+00021ed0: 7469 7469 6f6e 5f74 7970 6527 2c20 275f  tition_type', '_
+00021ee0: 5f74 7970 655f 5f27 3a20 274e 6f6e 5465  _type__': 'NonTe
+00021ef0: 726d 696e 616c 277d 5d2c 2027 6f72 6465  rminal'}], 'orde
+00021f00: 7227 3a20 302c 2027 616c 6961 7327 3a20  r': 0, 'alias': 
+00021f10: 4e6f 6e65 2c20 276f 7074 696f 6e73 273a  None, 'options':
+00021f20: 207b 276b 6565 705f 616c 6c5f 746f 6b65   {'keep_all_toke
+00021f30: 6e73 273a 2046 616c 7365 2c20 2765 7870  ns': False, 'exp
+00021f40: 616e 6431 273a 2046 616c 7365 2c20 2770  and1': False, 'p
+00021f50: 7269 6f72 6974 7927 3a20 4e6f 6e65 2c20  riority': None, 
+00021f60: 2774 656d 706c 6174 655f 736f 7572 6365  'template_source
+00021f70: 273a 204e 6f6e 652c 2027 656d 7074 795f  ': None, 'empty_
+00021f80: 696e 6469 6365 7327 3a20 2829 2c20 275f  indices': (), '_
+00021f90: 5f74 7970 655f 5f27 3a20 2752 756c 654f  _type__': 'RuleO
+00021fa0: 7074 696f 6e73 277d 2c20 275f 5f74 7970  ptions'}, '__typ
+00021fb0: 655f 5f27 3a20 2752 756c 6527 7d2c 2035  e__': 'Rule'}, 5
+00021fc0: 333a 207b 276f 7269 6769 6e27 3a20 7b27  3: {'origin': {'
+00021fd0: 6e61 6d65 273a 2054 6f6b 656e 2827 5255  name': Token('RU
+00021fe0: 4c45 272c 2027 7265 7065 7469 7469 6f6e  LE', 'repetition
+00021ff0: 5f74 7970 6527 292c 2027 5f5f 7479 7065  _type'), '__type
+00022000: 5f5f 273a 2027 4e6f 6e54 6572 6d69 6e61  __': 'NonTermina
+00022010: 6c27 7d2c 2027 6578 7061 6e73 696f 6e27  l'}, 'expansion'
+00022020: 3a20 5b7b 276e 616d 6527 3a20 275a 4552  : [{'name': 'ZER
+00022030: 4f5f 4f52 5f4d 4f52 455f 5155 414e 5449  O_OR_MORE_QUANTI
+00022040: 4649 4552 272c 2027 6669 6c74 6572 5f6f  FIER', 'filter_o
+00022050: 7574 273a 2046 616c 7365 2c20 275f 5f74  ut': False, '__t
+00022060: 7970 655f 5f27 3a20 2754 6572 6d69 6e61  ype__': 'Termina
+00022070: 6c27 7d5d 2c20 276f 7264 6572 273a 2030  l'}], 'order': 0
+00022080: 2c20 2761 6c69 6173 273a 204e 6f6e 652c  , 'alias': None,
+00022090: 2027 6f70 7469 6f6e 7327 3a20 7b27 6b65   'options': {'ke
+000220a0: 6570 5f61 6c6c 5f74 6f6b 656e 7327 3a20  ep_all_tokens': 
+000220b0: 4661 6c73 652c 2027 6578 7061 6e64 3127  False, 'expand1'
+000220c0: 3a20 4661 6c73 652c 2027 7072 696f 7269  : False, 'priori
+000220d0: 7479 273a 204e 6f6e 652c 2027 7465 6d70  ty': None, 'temp
+000220e0: 6c61 7465 5f73 6f75 7263 6527 3a20 4e6f  late_source': No
+000220f0: 6e65 2c20 2765 6d70 7479 5f69 6e64 6963  ne, 'empty_indic
+00022100: 6573 273a 2028 292c 2027 5f5f 7479 7065  es': (), '__type
+00022110: 5f5f 273a 2027 5275 6c65 4f70 7469 6f6e  __': 'RuleOption
+00022120: 7327 7d2c 2027 5f5f 7479 7065 5f5f 273a  s'}, '__type__':
+00022130: 2027 5275 6c65 277d 2c20 3534 3a20 7b27   'Rule'}, 54: {'
+00022140: 6f72 6967 696e 273a 207b 276e 616d 6527  origin': {'name'
+00022150: 3a20 546f 6b65 6e28 2752 554c 4527 2c20  : Token('RULE', 
+00022160: 2772 6570 6574 6974 696f 6e5f 7479 7065  'repetition_type
+00022170: 2729 2c20 275f 5f74 7970 655f 5f27 3a20  '), '__type__': 
+00022180: 274e 6f6e 5465 726d 696e 616c 277d 2c20  'NonTerminal'}, 
+00022190: 2765 7870 616e 7369 6f6e 273a 205b 7b27  'expansion': [{'
+000221a0: 6e61 6d65 273a 2027 4f4e 455f 4f52 5f4d  name': 'ONE_OR_M
+000221b0: 4f52 455f 5155 414e 5449 4649 4552 272c  ORE_QUANTIFIER',
+000221c0: 2027 6669 6c74 6572 5f6f 7574 273a 2046   'filter_out': F
+000221d0: 616c 7365 2c20 275f 5f74 7970 655f 5f27  alse, '__type__'
+000221e0: 3a20 2754 6572 6d69 6e61 6c27 7d5d 2c20  : 'Terminal'}], 
+000221f0: 276f 7264 6572 273a 2031 2c20 2761 6c69  'order': 1, 'ali
+00022200: 6173 273a 204e 6f6e 652c 2027 6f70 7469  as': None, 'opti
+00022210: 6f6e 7327 3a20 7b27 6b65 6570 5f61 6c6c  ons': {'keep_all
+00022220: 5f74 6f6b 656e 7327 3a20 4661 6c73 652c  _tokens': False,
+00022230: 2027 6578 7061 6e64 3127 3a20 4661 6c73   'expand1': Fals
+00022240: 652c 2027 7072 696f 7269 7479 273a 204e  e, 'priority': N
+00022250: 6f6e 652c 2027 7465 6d70 6c61 7465 5f73  one, 'template_s
+00022260: 6f75 7263 6527 3a20 4e6f 6e65 2c20 2765  ource': None, 'e
+00022270: 6d70 7479 5f69 6e64 6963 6573 273a 2028  mpty_indices': (
+00022280: 292c 2027 5f5f 7479 7065 5f5f 273a 2027  ), '__type__': '
+00022290: 5275 6c65 4f70 7469 6f6e 7327 7d2c 2027  RuleOptions'}, '
+000222a0: 5f5f 7479 7065 5f5f 273a 2027 5275 6c65  __type__': 'Rule
+000222b0: 277d 2c20 3535 3a20 7b27 6f72 6967 696e  '}, 55: {'origin
+000222c0: 273a 207b 276e 616d 6527 3a20 546f 6b65  ': {'name': Toke
+000222d0: 6e28 2752 554c 4527 2c20 2772 6570 6574  n('RULE', 'repet
+000222e0: 6974 696f 6e5f 7479 7065 2729 2c20 275f  ition_type'), '_
+000222f0: 5f74 7970 655f 5f27 3a20 274e 6f6e 5465  _type__': 'NonTe
+00022300: 726d 696e 616c 277d 2c20 2765 7870 616e  rminal'}, 'expan
+00022310: 7369 6f6e 273a 205b 7b27 6e61 6d65 273a  sion': [{'name':
+00022320: 2027 5a45 524f 5f4f 525f 4f4e 455f 5155   'ZERO_OR_ONE_QU
+00022330: 414e 5449 4649 4552 272c 2027 6669 6c74  ANTIFIER', 'filt
+00022340: 6572 5f6f 7574 273a 2046 616c 7365 2c20  er_out': False, 
+00022350: 275f 5f74 7970 655f 5f27 3a20 2754 6572  '__type__': 'Ter
+00022360: 6d69 6e61 6c27 7d5d 2c20 276f 7264 6572  minal'}], 'order
+00022370: 273a 2032 2c20 2761 6c69 6173 273a 204e  ': 2, 'alias': N
+00022380: 6f6e 652c 2027 6f70 7469 6f6e 7327 3a20  one, 'options': 
+00022390: 7b27 6b65 6570 5f61 6c6c 5f74 6f6b 656e  {'keep_all_token
+000223a0: 7327 3a20 4661 6c73 652c 2027 6578 7061  s': False, 'expa
+000223b0: 6e64 3127 3a20 4661 6c73 652c 2027 7072  nd1': False, 'pr
+000223c0: 696f 7269 7479 273a 204e 6f6e 652c 2027  iority': None, '
+000223d0: 7465 6d70 6c61 7465 5f73 6f75 7263 6527  template_source'
+000223e0: 3a20 4e6f 6e65 2c20 2765 6d70 7479 5f69  : None, 'empty_i
+000223f0: 6e64 6963 6573 273a 2028 292c 2027 5f5f  ndices': (), '__
+00022400: 7479 7065 5f5f 273a 2027 5275 6c65 4f70  type__': 'RuleOp
+00022410: 7469 6f6e 7327 7d2c 2027 5f5f 7479 7065  tions'}, '__type
+00022420: 5f5f 273a 2027 5275 6c65 277d 2c20 3536  __': 'Rule'}, 56
+00022430: 3a20 7b27 6f72 6967 696e 273a 207b 276e  : {'origin': {'n
+00022440: 616d 6527 3a20 546f 6b65 6e28 2752 554c  ame': Token('RUL
+00022450: 4527 2c20 2772 6570 6574 6974 696f 6e5f  E', 'repetition_
+00022460: 7479 7065 2729 2c20 275f 5f74 7970 655f  type'), '__type_
+00022470: 5f27 3a20 274e 6f6e 5465 726d 696e 616c  _': 'NonTerminal
+00022480: 277d 2c20 2765 7870 616e 7369 6f6e 273a  '}, 'expansion':
+00022490: 205b 7b27 6e61 6d65 273a 2027 7261 6e67   [{'name': 'rang
+000224a0: 6527 2c20 275f 5f74 7970 655f 5f27 3a20  e', '__type__': 
+000224b0: 274e 6f6e 5465 726d 696e 616c 277d 5d2c  'NonTerminal'}],
+000224c0: 2027 6f72 6465 7227 3a20 332c 2027 616c   'order': 3, 'al
+000224d0: 6961 7327 3a20 4e6f 6e65 2c20 276f 7074  ias': None, 'opt
+000224e0: 696f 6e73 273a 207b 276b 6565 705f 616c  ions': {'keep_al
+000224f0: 6c5f 746f 6b65 6e73 273a 2046 616c 7365  l_tokens': False
+00022500: 2c20 2765 7870 616e 6431 273a 2046 616c  , 'expand1': Fal
+00022510: 7365 2c20 2770 7269 6f72 6974 7927 3a20  se, 'priority': 
+00022520: 4e6f 6e65 2c20 2774 656d 706c 6174 655f  None, 'template_
+00022530: 736f 7572 6365 273a 204e 6f6e 652c 2027  source': None, '
+00022540: 656d 7074 795f 696e 6469 6365 7327 3a20  empty_indices': 
+00022550: 2829 2c20 275f 5f74 7970 655f 5f27 3a20  (), '__type__': 
+00022560: 2752 756c 654f 7074 696f 6e73 277d 2c20  'RuleOptions'}, 
+00022570: 275f 5f74 7970 655f 5f27 3a20 2752 756c  '__type__': 'Rul
+00022580: 6527 7d2c 2035 373a 207b 276f 7269 6769  e'}, 57: {'origi
+00022590: 6e27 3a20 7b27 6e61 6d65 273a 2054 6f6b  n': {'name': Tok
+000225a0: 656e 2827 5255 4c45 272c 2027 7261 6e67  en('RULE', 'rang
+000225b0: 6527 292c 2027 5f5f 7479 7065 5f5f 273a  e'), '__type__':
+000225c0: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
+000225d0: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
+000225e0: 276e 616d 6527 3a20 274c 4252 4143 4527  'name': 'LBRACE'
+000225f0: 2c20 2766 696c 7465 725f 6f75 7427 3a20  , 'filter_out': 
+00022600: 5472 7565 2c20 275f 5f74 7970 655f 5f27  True, '__type__'
+00022610: 3a20 2754 6572 6d69 6e61 6c27 7d2c 207b  : 'Terminal'}, {
+00022620: 276e 616d 6527 3a20 2749 4e54 4547 4552  'name': 'INTEGER
+00022630: 272c 2027 6669 6c74 6572 5f6f 7574 273a  ', 'filter_out':
+00022640: 2046 616c 7365 2c20 275f 5f74 7970 655f   False, '__type_
+00022650: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d2c  _': 'Terminal'},
+00022660: 207b 276e 616d 6527 3a20 2743 4f4d 4d41   {'name': 'COMMA
+00022670: 272c 2027 6669 6c74 6572 5f6f 7574 273a  ', 'filter_out':
+00022680: 2054 7275 652c 2027 5f5f 7479 7065 5f5f   True, '__type__
+00022690: 273a 2027 5465 726d 696e 616c 277d 2c20  ': 'Terminal'}, 
+000226a0: 7b27 6e61 6d65 273a 2027 494e 5445 4745  {'name': 'INTEGE
+000226b0: 5227 2c20 2766 696c 7465 725f 6f75 7427  R', 'filter_out'
+000226c0: 3a20 4661 6c73 652c 2027 5f5f 7479 7065  : False, '__type
+000226d0: 5f5f 273a 2027 5465 726d 696e 616c 277d  __': 'Terminal'}
+000226e0: 2c20 7b27 6e61 6d65 273a 2027 5242 5241  , {'name': 'RBRA
+000226f0: 4345 272c 2027 6669 6c74 6572 5f6f 7574  CE', 'filter_out
+00022700: 273a 2054 7275 652c 2027 5f5f 7479 7065  ': True, '__type
+00022710: 5f5f 273a 2027 5465 726d 696e 616c 277d  __': 'Terminal'}
+00022720: 5d2c 2027 6f72 6465 7227 3a20 302c 2027  ], 'order': 0, '
+00022730: 616c 6961 7327 3a20 4e6f 6e65 2c20 276f  alias': None, 'o
+00022740: 7074 696f 6e73 273a 207b 276b 6565 705f  ptions': {'keep_
+00022750: 616c 6c5f 746f 6b65 6e73 273a 2046 616c  all_tokens': Fal
+00022760: 7365 2c20 2765 7870 616e 6431 273a 2046  se, 'expand1': F
+00022770: 616c 7365 2c20 2770 7269 6f72 6974 7927  alse, 'priority'
+00022780: 3a20 4e6f 6e65 2c20 2774 656d 706c 6174  : None, 'templat
+00022790: 655f 736f 7572 6365 273a 204e 6f6e 652c  e_source': None,
+000227a0: 2027 656d 7074 795f 696e 6469 6365 7327   'empty_indices'
+000227b0: 3a20 2829 2c20 275f 5f74 7970 655f 5f27  : (), '__type__'
+000227c0: 3a20 2752 756c 654f 7074 696f 6e73 277d  : 'RuleOptions'}
+000227d0: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
+000227e0: 756c 6527 7d2c 2035 383a 207b 276f 7269  ule'}, 58: {'ori
+000227f0: 6769 6e27 3a20 7b27 6e61 6d65 273a 2054  gin': {'name': T
+00022800: 6f6b 656e 2827 5255 4c45 272c 2027 7261  oken('RULE', 'ra
+00022810: 6e67 6527 292c 2027 5f5f 7479 7065 5f5f  nge'), '__type__
+00022820: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+00022830: 7d2c 2027 6578 7061 6e73 696f 6e27 3a20  }, 'expansion': 
+00022840: 5b7b 276e 616d 6527 3a20 274c 4252 4143  [{'name': 'LBRAC
+00022850: 4527 2c20 2766 696c 7465 725f 6f75 7427  E', 'filter_out'
+00022860: 3a20 5472 7565 2c20 275f 5f74 7970 655f  : True, '__type_
+00022870: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d2c  _': 'Terminal'},
+00022880: 207b 276e 616d 6527 3a20 2749 4e54 4547   {'name': 'INTEG
+00022890: 4552 272c 2027 6669 6c74 6572 5f6f 7574  ER', 'filter_out
+000228a0: 273a 2046 616c 7365 2c20 275f 5f74 7970  ': False, '__typ
+000228b0: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
+000228c0: 7d2c 207b 276e 616d 6527 3a20 2743 4f4d  }, {'name': 'COM
+000228d0: 4d41 272c 2027 6669 6c74 6572 5f6f 7574  MA', 'filter_out
+000228e0: 273a 2054 7275 652c 2027 5f5f 7479 7065  ': True, '__type
+000228f0: 5f5f 273a 2027 5465 726d 696e 616c 277d  __': 'Terminal'}
+00022900: 2c20 7b27 6e61 6d65 273a 2027 5242 5241  , {'name': 'RBRA
+00022910: 4345 272c 2027 6669 6c74 6572 5f6f 7574  CE', 'filter_out
+00022920: 273a 2054 7275 652c 2027 5f5f 7479 7065  ': True, '__type
+00022930: 5f5f 273a 2027 5465 726d 696e 616c 277d  __': 'Terminal'}
+00022940: 5d2c 2027 6f72 6465 7227 3a20 312c 2027  ], 'order': 1, '
+00022950: 616c 6961 7327 3a20 4e6f 6e65 2c20 276f  alias': None, 'o
+00022960: 7074 696f 6e73 273a 207b 276b 6565 705f  ptions': {'keep_
+00022970: 616c 6c5f 746f 6b65 6e73 273a 2046 616c  all_tokens': Fal
+00022980: 7365 2c20 2765 7870 616e 6431 273a 2046  se, 'expand1': F
+00022990: 616c 7365 2c20 2770 7269 6f72 6974 7927  alse, 'priority'
+000229a0: 3a20 4e6f 6e65 2c20 2774 656d 706c 6174  : None, 'templat
+000229b0: 655f 736f 7572 6365 273a 204e 6f6e 652c  e_source': None,
+000229c0: 2027 656d 7074 795f 696e 6469 6365 7327   'empty_indices'
+000229d0: 3a20 2829 2c20 275f 5f74 7970 655f 5f27  : (), '__type__'
+000229e0: 3a20 2752 756c 654f 7074 696f 6e73 277d  : 'RuleOptions'}
+000229f0: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
+00022a00: 756c 6527 7d2c 2035 393a 207b 276f 7269  ule'}, 59: {'ori
+00022a10: 6769 6e27 3a20 7b27 6e61 6d65 273a 2054  gin': {'name': T
+00022a20: 6f6b 656e 2827 5255 4c45 272c 2027 7261  oken('RULE', 'ra
+00022a30: 6e67 6527 292c 2027 5f5f 7479 7065 5f5f  nge'), '__type__
+00022a40: 273a 2027 4e6f 6e54 6572 6d69 6e61 6c27  ': 'NonTerminal'
+00022a50: 7d2c 2027 6578 7061 6e73 696f 6e27 3a20  }, 'expansion': 
+00022a60: 5b7b 276e 616d 6527 3a20 274c 4252 4143  [{'name': 'LBRAC
+00022a70: 4527 2c20 2766 696c 7465 725f 6f75 7427  E', 'filter_out'
+00022a80: 3a20 5472 7565 2c20 275f 5f74 7970 655f  : True, '__type_
+00022a90: 5f27 3a20 2754 6572 6d69 6e61 6c27 7d2c  _': 'Terminal'},
+00022aa0: 207b 276e 616d 6527 3a20 2749 4e54 4547   {'name': 'INTEG
+00022ab0: 4552 272c 2027 6669 6c74 6572 5f6f 7574  ER', 'filter_out
+00022ac0: 273a 2046 616c 7365 2c20 275f 5f74 7970  ': False, '__typ
+00022ad0: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
+00022ae0: 7d2c 207b 276e 616d 6527 3a20 2752 4252  }, {'name': 'RBR
+00022af0: 4143 4527 2c20 2766 696c 7465 725f 6f75  ACE', 'filter_ou
+00022b00: 7427 3a20 5472 7565 2c20 275f 5f74 7970  t': True, '__typ
+00022b10: 655f 5f27 3a20 2754 6572 6d69 6e61 6c27  e__': 'Terminal'
+00022b20: 7d5d 2c20 276f 7264 6572 273a 2032 2c20  }], 'order': 2, 
+00022b30: 2761 6c69 6173 273a 204e 6f6e 652c 2027  'alias': None, '
+00022b40: 6f70 7469 6f6e 7327 3a20 7b27 6b65 6570  options': {'keep
+00022b50: 5f61 6c6c 5f74 6f6b 656e 7327 3a20 4661  _all_tokens': Fa
+00022b60: 6c73 652c 2027 6578 7061 6e64 3127 3a20  lse, 'expand1': 
+00022b70: 4661 6c73 652c 2027 7072 696f 7269 7479  False, 'priority
+00022b80: 273a 204e 6f6e 652c 2027 7465 6d70 6c61  ': None, 'templa
+00022b90: 7465 5f73 6f75 7263 6527 3a20 4e6f 6e65  te_source': None
+00022ba0: 2c20 2765 6d70 7479 5f69 6e64 6963 6573  , 'empty_indices
+00022bb0: 273a 2028 292c 2027 5f5f 7479 7065 5f5f  ': (), '__type__
+00022bc0: 273a 2027 5275 6c65 4f70 7469 6f6e 7327  ': 'RuleOptions'
+00022bd0: 7d2c 2027 5f5f 7479 7065 5f5f 273a 2027  }, '__type__': '
+00022be0: 5275 6c65 277d 2c20 3630 3a20 7b27 6f72  Rule'}, 60: {'or
+00022bf0: 6967 696e 273a 207b 276e 616d 6527 3a20  igin': {'name': 
+00022c00: 275f 5f73 7562 6578 7072 6573 7369 6f6e  '__subexpression
+00022c10: 5f70 6c75 735f 3027 2c20 275f 5f74 7970  _plus_0', '__typ
+00022c20: 655f 5f27 3a20 274e 6f6e 5465 726d 696e  e__': 'NonTermin
+00022c30: 616c 277d 2c20 2765 7870 616e 7369 6f6e  al'}, 'expansion
+00022c40: 273a 205b 7b27 6e61 6d65 273a 2027 7375  ': [{'name': 'su
+00022c50: 6265 7870 7265 7373 696f 6e69 7465 6d27  bexpressionitem'
+00022c60: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
+00022c70: 6f6e 5465 726d 696e 616c 277d 5d2c 2027  onTerminal'}], '
+00022c80: 6f72 6465 7227 3a20 302c 2027 616c 6961  order': 0, 'alia
+00022c90: 7327 3a20 4e6f 6e65 2c20 276f 7074 696f  s': None, 'optio
+00022ca0: 6e73 273a 207b 276b 6565 705f 616c 6c5f  ns': {'keep_all_
+00022cb0: 746f 6b65 6e73 273a 2046 616c 7365 2c20  tokens': False, 
+00022cc0: 2765 7870 616e 6431 273a 2046 616c 7365  'expand1': False
+00022cd0: 2c20 2770 7269 6f72 6974 7927 3a20 4e6f  , 'priority': No
+00022ce0: 6e65 2c20 2774 656d 706c 6174 655f 736f  ne, 'template_so
+00022cf0: 7572 6365 273a 204e 6f6e 652c 2027 656d  urce': None, 'em
+00022d00: 7074 795f 696e 6469 6365 7327 3a20 2829  pty_indices': ()
+00022d10: 2c20 275f 5f74 7970 655f 5f27 3a20 2752  , '__type__': 'R
+00022d20: 756c 654f 7074 696f 6e73 277d 2c20 275f  uleOptions'}, '_
+00022d30: 5f74 7970 655f 5f27 3a20 2752 756c 6527  _type__': 'Rule'
+00022d40: 7d2c 2036 313a 207b 276f 7269 6769 6e27  }, 61: {'origin'
+00022d50: 3a20 7b27 6e61 6d65 273a 2027 5f5f 7375  : {'name': '__su
+00022d60: 6265 7870 7265 7373 696f 6e5f 706c 7573  bexpression_plus
+00022d70: 5f30 272c 2027 5f5f 7479 7065 5f5f 273a  _0', '__type__':
+00022d80: 2027 4e6f 6e54 6572 6d69 6e61 6c27 7d2c   'NonTerminal'},
+00022d90: 2027 6578 7061 6e73 696f 6e27 3a20 5b7b   'expansion': [{
+00022da0: 276e 616d 6527 3a20 275f 5f73 7562 6578  'name': '__subex
+00022db0: 7072 6573 7369 6f6e 5f70 6c75 735f 3027  pression_plus_0'
+00022dc0: 2c20 275f 5f74 7970 655f 5f27 3a20 274e  , '__type__': 'N
+00022dd0: 6f6e 5465 726d 696e 616c 277d 2c20 7b27  onTerminal'}, {'
+00022de0: 6e61 6d65 273a 2027 7375 6265 7870 7265  name': 'subexpre
+00022df0: 7373 696f 6e69 7465 6d27 2c20 275f 5f74  ssionitem', '__t
+00022e00: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
+00022e10: 696e 616c 277d 5d2c 2027 6f72 6465 7227  inal'}], 'order'
+00022e20: 3a20 312c 2027 616c 6961 7327 3a20 4e6f  : 1, 'alias': No
+00022e30: 6e65 2c20 276f 7074 696f 6e73 273a 207b  ne, 'options': {
+00022e40: 276b 6565 705f 616c 6c5f 746f 6b65 6e73  'keep_all_tokens
+00022e50: 273a 2046 616c 7365 2c20 2765 7870 616e  ': False, 'expan
+00022e60: 6431 273a 2046 616c 7365 2c20 2770 7269  d1': False, 'pri
+00022e70: 6f72 6974 7927 3a20 4e6f 6e65 2c20 2774  ority': None, 't
+00022e80: 656d 706c 6174 655f 736f 7572 6365 273a  emplate_source':
+00022e90: 204e 6f6e 652c 2027 656d 7074 795f 696e   None, 'empty_in
+00022ea0: 6469 6365 7327 3a20 2829 2c20 275f 5f74  dices': (), '__t
+00022eb0: 7970 655f 5f27 3a20 2752 756c 654f 7074  ype__': 'RuleOpt
+00022ec0: 696f 6e73 277d 2c20 275f 5f74 7970 655f  ions'}, '__type_
+00022ed0: 5f27 3a20 2752 756c 6527 7d2c 2036 323a  _': 'Rule'}, 62:
+00022ee0: 207b 276f 7269 6769 6e27 3a20 7b27 6e61   {'origin': {'na
+00022ef0: 6d65 273a 2027 5f5f 6368 6172 6163 7465  me': '__characte
+00022f00: 725f 6772 6f75 705f 706c 7573 5f31 272c  r_group_plus_1',
+00022f10: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
+00022f20: 6e54 6572 6d69 6e61 6c27 7d2c 2027 6578  nTerminal'}, 'ex
+00022f30: 7061 6e73 696f 6e27 3a20 5b7b 276e 616d  pansion': [{'nam
+00022f40: 6527 3a20 2763 6861 7261 6374 6572 5f67  e': 'character_g
+00022f50: 726f 7570 5f69 7465 6d27 2c20 275f 5f74  roup_item', '__t
+00022f60: 7970 655f 5f27 3a20 274e 6f6e 5465 726d  ype__': 'NonTerm
+00022f70: 696e 616c 277d 5d2c 2027 6f72 6465 7227  inal'}], 'order'
+00022f80: 3a20 302c 2027 616c 6961 7327 3a20 4e6f  : 0, 'alias': No
+00022f90: 6e65 2c20 276f 7074 696f 6e73 273a 207b  ne, 'options': {
+00022fa0: 276b 6565 705f 616c 6c5f 746f 6b65 6e73  'keep_all_tokens
+00022fb0: 273a 2046 616c 7365 2c20 2765 7870 616e  ': False, 'expan
+00022fc0: 6431 273a 2046 616c 7365 2c20 2770 7269  d1': False, 'pri
+00022fd0: 6f72 6974 7927 3a20 4e6f 6e65 2c20 2774  ority': None, 't
+00022fe0: 656d 706c 6174 655f 736f 7572 6365 273a  emplate_source':
+00022ff0: 204e 6f6e 652c 2027 656d 7074 795f 696e   None, 'empty_in
+00023000: 6469 6365 7327 3a20 2829 2c20 275f 5f74  dices': (), '__t
+00023010: 7970 655f 5f27 3a20 2752 756c 654f 7074  ype__': 'RuleOpt
+00023020: 696f 6e73 277d 2c20 275f 5f74 7970 655f  ions'}, '__type_
+00023030: 5f27 3a20 2752 756c 6527 7d2c 2036 333a  _': 'Rule'}, 63:
+00023040: 207b 276f 7269 6769 6e27 3a20 7b27 6e61   {'origin': {'na
+00023050: 6d65 273a 2027 5f5f 6368 6172 6163 7465  me': '__characte
+00023060: 725f 6772 6f75 705f 706c 7573 5f31 272c  r_group_plus_1',
+00023070: 2027 5f5f 7479 7065 5f5f 273a 2027 4e6f   '__type__': 'No
+00023080: 6e54 6572 6d69 6e61 6c27 7d2c 2027 6578  nTerminal'}, 'ex
+00023090: 7061 6e73 696f 6e27 3a20 5b7b 276e 616d  pansion': [{'nam
+000230a0: 6527 3a20 275f 5f63 6861 7261 6374 6572  e': '__character
+000230b0: 5f67 726f 7570 5f70 6c75 735f 3127 2c20  _group_plus_1', 
+000230c0: 275f 5f74 7970 655f 5f27 3a20 274e 6f6e  '__type__': 'Non
+000230d0: 5465 726d 696e 616c 277d 2c20 7b27 6e61  Terminal'}, {'na
+000230e0: 6d65 273a 2027 6368 6172 6163 7465 725f  me': 'character_
+000230f0: 6772 6f75 705f 6974 656d 272c 2027 5f5f  group_item', '__
+00023100: 7479 7065 5f5f 273a 2027 4e6f 6e54 6572  type__': 'NonTer
+00023110: 6d69 6e61 6c27 7d5d 2c20 276f 7264 6572  minal'}], 'order
+00023120: 273a 2031 2c20 2761 6c69 6173 273a 204e  ': 1, 'alias': N
+00023130: 6f6e 652c 2027 6f70 7469 6f6e 7327 3a20  one, 'options': 
+00023140: 7b27 6b65 6570 5f61 6c6c 5f74 6f6b 656e  {'keep_all_token
+00023150: 7327 3a20 4661 6c73 652c 2027 6578 7061  s': False, 'expa
+00023160: 6e64 3127 3a20 4661 6c73 652c 2027 7072  nd1': False, 'pr
+00023170: 696f 7269 7479 273a 204e 6f6e 652c 2027  iority': None, '
+00023180: 7465 6d70 6c61 7465 5f73 6f75 7263 6527  template_source'
+00023190: 3a20 4e6f 6e65 2c20 2765 6d70 7479 5f69  : None, 'empty_i
+000231a0: 6e64 6963 6573 273a 2028 292c 2027 5f5f  ndices': (), '__
+000231b0: 7479 7065 5f5f 273a 2027 5275 6c65 4f70  type__': 'RuleOp
+000231c0: 7469 6f6e 7327 7d2c 2027 5f5f 7479 7065  tions'}, '__type
+000231d0: 5f5f 273a 2027 5275 6c65 277d 7d0a 290a  __': 'Rule'}}.).
+000231e0: 5368 6966 7420 3d20 300a 5265 6475 6365  Shift = 0.Reduce
+000231f0: 203d 2031 0a64 6566 204c 6172 6b5f 5374   = 1.def Lark_St
+00023200: 616e 6441 6c6f 6e65 282a 2a6b 7761 7267  andAlone(**kwarg
+00023210: 7329 3a0a 2020 7265 7475 726e 204c 6172  s):.  return Lar
+00023220: 6b2e 5f6c 6f61 645f 6672 6f6d 5f64 6963  k._load_from_dic
+00023230: 7428 4441 5441 2c20 4d45 4d4f 2c20 2a2a  t(DATA, MEMO, **
+00023240: 6b77 6172 6773 290a                      kwargs).
```

### Comparing `fences-1.0.0/fences/regex/parse.py` & `fences-1.1.0/fences/regex/parse.py`

 * *Files 1% similar despite different names*

```diff
@@ -36,14 +36,34 @@
     def apply(self, data: any) -> any:
         return "".join(data)
 
     def description(self) -> str:
         return "Fetch output"
 
 
+class AppendCharsLeaf(Leaf):
+
+    def __init__(self, id: str, is_valid: bool, char: str) -> None:
+        super().__init__(id, is_valid)
+        self.char = char
+
+    def apply(self, data: list) -> any:
+        data.append(self.char)
+        return data
+
+    def mask(self, s: str) -> str:
+        allowed = string.ascii_letters + string.digits
+        return "".join([
+            (i if i in allowed else f"chr({ord(i)})") for i in s
+        ])
+
+    def description(self) -> str:
+        return f"Append {self.mask(self.char)}"
+
+
 def _parse_repetition(tree: Tree[Token]) -> "MatchConverter.Repetition":
     assert len(tree.children) in [1, 2]
     repetition_type = tree.children[0]
     assert isinstance(repetition_type, Tree)
     assert repetition_type.data == 'repetition_type'
     assert len(repetition_type.children) == 1
     qualifier = repetition_type.children[0]
@@ -100,34 +120,14 @@
     # TODO: invalid: rep.min-1 and rep.max+1
     if rep.min > 0:
         _add_repetition(root, item, rep.min)
     if rep.max != rep.min:
         _add_repetition(root, item, rep.max)
 
 
-class AppendCharsLeaf(Leaf):
-
-    def __init__(self, id: str, is_valid: bool, char: str) -> None:
-        super().__init__(id, is_valid)
-        self.char = char
-
-    def apply(self, data: list) -> any:
-        data.append(self.char)
-        return data
-
-    def mask(self, s: str) -> str:
-        allowed = string.ascii_letters + string.digits
-        return "".join([
-            (i if i in allowed else f"chr({ord(i)})") for i in s
-        ])
-
-    def description(self) -> str:
-        return f"Append {self.mask(self.char)}"
-
-
 class TreeConverter:
 
     children: Dict[str, "TreeConverter"] = {}
     all_transitions = False
 
     def __init__(self, tree: Tree[Token]) -> None:
         assert isinstance(tree, Tree)
@@ -333,14 +333,15 @@
 
 
 def unescape(s: str) -> str:
     for i in ['\\', '{', '}', '.', '(', ')', '[', ']']:
         s = s.replace('\\' + i, i)
     return s
 
+
 def parse(regex: str) -> Node:
     regex = unescape(regex)
     try:
         tree: Tree[Token] = _parser.parse(regex)
     except LarkError as e:
         raise RegexException(f"Cannot parse '{regex}' as regex: {e}")
     # print(tree.pretty())
```

### Comparing `fences-1.0.0/fences/xml_schema/config.py` & `fences-1.1.0/fences/xml_schema/config.py`

 * *Files identical despite different names*

### Comparing `fences-1.0.0/fences/xml_schema/parse.py` & `fences-1.1.0/fences/xml_schema/parse.py`

 * *Files identical despite different names*

### Comparing `fences-1.0.0/fences/xml_schema/xpath.py` & `fences-1.1.0/fences/xml_schema/xpath.py`

 * *Files identical despite different names*

### Comparing `fences-1.0.0/fences.egg-info/SOURCES.txt` & `fences-1.1.0/fences.egg-info/SOURCES.txt`

 * *Files 15% similar despite different names*

```diff
@@ -10,18 +10,23 @@
 fences/core/__init__.py
 fences/core/debug.py
 fences/core/exception.py
 fences/core/node.py
 fences/core/random.py
 fences/core/render.py
 fences/core/util.py
+fences/grammar/__ini__.py
+fences/grammar/convert.py
+fences/grammar/exceptions.py
+fences/grammar/types.py
 fences/json_schema/__init__.py
 fences/json_schema/config.py
 fences/json_schema/exceptions.py
 fences/json_schema/json_pointer.py
+fences/json_schema/normalize.py
 fences/json_schema/parse.py
 fences/regex/__init__.py
 fences/regex/exception.py
 fences/regex/grammar.py
 fences/regex/parse.py
 fences/xml_schema/__init__.py
 fences/xml_schema/config.py
```

### Comparing `fences-1.0.0/pyproject.toml` & `fences-1.1.0/pyproject.toml`

 * *Files 1% similar despite different names*

```diff
@@ -1,14 +1,14 @@
 [build-system]
 requires      = ["setuptools>=61.0.0", "wheel"]
 build-backend = "setuptools.build_meta"
 
 [project]
 name = "fences"
-version = "1.0.0"
+version = "1.1.0"
 description = "Generate samples for various schemas like json schema, xml schema and regex"
 readme = "README.md"
 license = { file = "LICENSE" }
 classifiers = [
     "License :: OSI Approved :: MIT License",
     "Programming Language :: Python",
     "Programming Language :: Python :: 3",
```

