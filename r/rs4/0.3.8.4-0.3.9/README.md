# Comparing `tmp/rs4-0.3.8.4-py3-none-any.whl.zip` & `tmp/rs4-0.3.9-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,9 +1,9 @@
-Zip file size: 971389 bytes, number of entries: 380
--rw-r--r--  2.0 unx     4833 b- defN 22-Sep-21 13:23 rs4/__init__.py
+Zip file size: 973731 bytes, number of entries: 384
+-rw-r--r--  2.0 unx     4831 b- defN 22-Sep-23 11:59 rs4/__init__.py
 -rw-rw-r--  2.0 unx     1035 b- defN 21-Nov-28 06:30 rs4/aio.py
 -rw-rw-r--  2.0 unx     1772 b- defN 21-Nov-28 06:30 rs4/annotations.py
 -rw-r--r--  2.0 unx     5223 b- defN 22-Sep-02 11:29 rs4/argopt.py
 -rw-rw-r--  2.0 unx    11407 b- defN 21-Nov-28 06:30 rs4/asynchat.py
 -rw-r--r--  2.0 unx    23368 b- defN 22-May-11 09:14 rs4/asyncore.py
 -rw-rw-r--  2.0 unx     3685 b- defN 21-Nov-28 06:30 rs4/attrdict.py
 -rw-rw-r--  2.0 unx      385 b- defN 21-Nov-28 06:30 rs4/cbutil.py
@@ -22,22 +22,26 @@
 -rw-rw-r--  2.0 unx    12155 b- defN 21-Nov-28 06:30 rs4/ssl_.py
 -rw-rw-r--  2.0 unx      430 b- defN 21-Nov-28 06:30 rs4/strutil.py
 -rw-rw-r--  2.0 unx     1724 b- defN 21-Nov-28 06:30 rs4/termcolor.py
 -rw-rw-r--  2.0 unx     1269 b- defN 21-Nov-28 06:30 rs4/timer.py
 -rw-rw-r--  2.0 unx      819 b- defN 21-Nov-28 06:30 rs4/unistr.py
 -rw-r--r--  2.0 unx        0 b- defN 22-Jul-15 01:07 rs4/apis/__init__.py
 -rw-r--r--  2.0 unx     1641 b- defN 22-Apr-25 20:15 rs4/apis/telegram.py
--rw-r--r--  2.0 unx     1264 b- defN 22-Jul-21 23:26 rs4/apis/aws/__init__.py
--rw-r--r--  2.0 unx     1036 b- defN 22-Jul-22 08:16 rs4/apis/aws/cloudwatch.py
--rw-rw-r--  2.0 unx    25663 b- defN 21-Nov-28 06:30 rs4/apis/aws/deploy.py
+-rw-r--r--  2.0 unx      432 b- defN 22-Sep-23 08:07 rs4/apis/aws/__init__.py
+-rw-r--r--  2.0 unx     1531 b- defN 22-Sep-23 07:21 rs4/apis/aws/cloudwatch.py
+-rw-r--r--  2.0 unx      948 b- defN 22-Sep-23 07:27 rs4/apis/aws/cost_explorer.py
+-rw-r--r--  2.0 unx    25667 b- defN 22-Sep-23 11:58 rs4/apis/aws/deploy.py
+-rw-r--r--  2.0 unx     1653 b- defN 22-Sep-23 08:23 rs4/apis/aws/ec2.py
+-rw-r--r--  2.0 unx     1584 b- defN 22-Sep-23 08:32 rs4/apis/aws/rds.py
 -rw-r--r--  2.0 unx     1447 b- defN 21-Dec-08 09:42 rs4/apis/aws/s3.py
 -rw-rw-r--  2.0 unx     1001 b- defN 21-Nov-28 06:30 rs4/apis/aws/speech.py
 -rw-rw-r--  2.0 unx     2835 b- defN 21-Nov-28 06:30 rs4/apis/aws/stream_transcribe.py
 -rw-rw-r--  2.0 unx     2055 b- defN 21-Nov-28 06:30 rs4/apis/aws/transcribe.py
 -rw-rw-r--  2.0 unx      880 b- defN 21-Nov-28 06:30 rs4/apis/aws/translate.py
+-rw-r--r--  2.0 unx        0 b- defN 22-Sep-23 07:31 rs4/apis/aws/ec2ops/__init__.py
 -rw-rw-r--  2.0 unx     4502 b- defN 21-Nov-28 06:30 rs4/apis/aws/ec2ops/autoscaler.py
 -rw-rw-r--  2.0 unx     1865 b- defN 21-Nov-28 06:30 rs4/apis/aws/ec2ops/elb.py
 -rw-rw-r--  2.0 unx     4552 b- defN 21-Nov-28 06:30 rs4/apis/aws/ec2ops/elbops3.py
 -rw-rw-r--  2.0 unx      791 b- defN 21-Nov-28 06:30 rs4/apis/aws/ec2ops/iquery.py
 -rw-rw-r--  2.0 unx     1912 b- defN 21-Nov-28 06:30 rs4/apis/aws/ec2ops/metrics.py
 -rw-rw-r--  2.0 unx      952 b- defN 21-Nov-28 06:30 rs4/apis/aws/ec2ops/ssh.py
 -rw-rw-r--  2.0 unx      410 b- defN 21-Nov-28 06:30 rs4/apis/aws/ec2ops/ssh3.py
@@ -370,13 +374,13 @@
 -rw-rw-r--  2.0 unx     1839 b- defN 21-Nov-28 06:30 rs4/webkit/jwt.py
 -rw-rw-r--  2.0 unx     4642 b- defN 21-Nov-28 06:30 rs4/webkit/markdown.py
 -rw-rw-r--  2.0 unx    17126 b- defN 21-Nov-28 06:30 rs4/webkit/nops.py
 -rw-rw-r--  2.0 unx      593 b- defN 21-Nov-28 06:30 rs4/webkit/otp.py
 -rw-r--r--  2.0 unx      777 b- defN 22-Apr-24 00:41 rs4/webkit/pools.py
 -rw-r--r--  2.0 unx    11735 b- defN 22-Apr-21 23:43 rs4/webkit/siesta.py
 -rw-r--r--  2.0 unx     9641 b- defN 22-Apr-22 00:27 rs4/webkit/webtest.py
--rw-rw-r--  2.0 unx     1083 b- defN 22-Sep-21 13:23 rs4-0.3.8.4.dist-info/LICENSE
--rw-r--r--  2.0 unx      835 b- defN 22-Sep-21 13:23 rs4-0.3.8.4.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 22-Sep-21 13:23 rs4-0.3.8.4.dist-info/WHEEL
--rw-rw-r--  2.0 unx        4 b- defN 22-Sep-21 13:23 rs4-0.3.8.4.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx    34742 b- defN 22-Sep-21 13:23 rs4-0.3.8.4.dist-info/RECORD
-380 files, 2542929 bytes uncompressed, 916021 bytes compressed:  64.0%
+-rw-rw-r--  2.0 unx     1083 b- defN 22-Sep-23 11:59 rs4-0.3.9.dist-info/LICENSE
+-rw-r--r--  2.0 unx      833 b- defN 22-Sep-23 11:59 rs4-0.3.9.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 22-Sep-23 11:59 rs4-0.3.9.dist-info/WHEEL
+-rw-rw-r--  2.0 unx        4 b- defN 22-Sep-23 11:59 rs4-0.3.9.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx    35053 b- defN 22-Sep-23 11:59 rs4-0.3.9.dist-info/RECORD
+384 files, 2547088 bytes uncompressed, 917883 bytes compressed:  64.0%
```

## zipnote {}

```diff
@@ -81,17 +81,26 @@
 
 Filename: rs4/apis/aws/__init__.py
 Comment: 
 
 Filename: rs4/apis/aws/cloudwatch.py
 Comment: 
 
+Filename: rs4/apis/aws/cost_explorer.py
+Comment: 
+
 Filename: rs4/apis/aws/deploy.py
 Comment: 
 
+Filename: rs4/apis/aws/ec2.py
+Comment: 
+
+Filename: rs4/apis/aws/rds.py
+Comment: 
+
 Filename: rs4/apis/aws/s3.py
 Comment: 
 
 Filename: rs4/apis/aws/speech.py
 Comment: 
 
 Filename: rs4/apis/aws/stream_transcribe.py
@@ -99,14 +108,17 @@
 
 Filename: rs4/apis/aws/transcribe.py
 Comment: 
 
 Filename: rs4/apis/aws/translate.py
 Comment: 
 
+Filename: rs4/apis/aws/ec2ops/__init__.py
+Comment: 
+
 Filename: rs4/apis/aws/ec2ops/autoscaler.py
 Comment: 
 
 Filename: rs4/apis/aws/ec2ops/elb.py
 Comment: 
 
 Filename: rs4/apis/aws/ec2ops/elbops3.py
@@ -1119,23 +1131,23 @@
 
 Filename: rs4/webkit/siesta.py
 Comment: 
 
 Filename: rs4/webkit/webtest.py
 Comment: 
 
-Filename: rs4-0.3.8.4.dist-info/LICENSE
+Filename: rs4-0.3.9.dist-info/LICENSE
 Comment: 
 
-Filename: rs4-0.3.8.4.dist-info/METADATA
+Filename: rs4-0.3.9.dist-info/METADATA
 Comment: 
 
-Filename: rs4-0.3.8.4.dist-info/WHEEL
+Filename: rs4-0.3.9.dist-info/WHEEL
 Comment: 
 
-Filename: rs4-0.3.8.4.dist-info/top_level.txt
+Filename: rs4-0.3.9.dist-info/top_level.txt
 Comment: 
 
-Filename: rs4-0.3.8.4.dist-info/RECORD
+Filename: rs4-0.3.9.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## rs4/__init__.py

```diff
@@ -1,10 +1,10 @@
 # 2016. 1. 10 by Hans Roh hansroh@gmail.com
 
-__version__ = "0.3.8.4"
+__version__ = "0.3.9"
 
 version_info = tuple (map (lambda x: not x.isdigit () and x or int (x),  __version__.split (".")))
 from io import IOBase
 from datetime import timezone, datetime
 import time
 
 # for lower version compatibles -------------
```

## rs4/apis/aws/__init__.py

```diff
@@ -2,40 +2,15 @@
 # aws configure
 
 import boto3
 import time
 from datetime import datetime, timedelta
 from calendar import monthrange
 
-ec2 = boto3.resource ('ec2')
+ec2r = boto3.resource ('ec2') # former ec2
 ec2cli = boto3.client ('ec2')
 elb = boto3.client('elb')
 cw = boto3.client('cloudwatch')
+logs = boto3.client('logs')
 elb2 = boto3.client('elbv2')
 autoscaling = boto3.client('autoscaling')
 rt53 = boto3.client('route53')
-ce = boto3.client ('ce')
-
-def get_cost ():
-    def last_day_of_month(date_value):
-        return monthrange(date_value.year, date_value.month)[1]
-
-    '''
-    {
-        "Version": "2012-10-17",
-        "Statement": [{
-            "Effect": "Allow",
-            "Action": ["ce:*"],
-            "Resource": ["*"]
-        }]
-    }
-    '''
-    now = datetime.now () - timedelta (days = 1)
-    r = ce.get_cost_and_usage (
-        TimePeriod = {
-            'Start': time.strftime ('%Y-%m-%d', time.localtime (time.mktime ((now.year, now.month, 1, 0, 0, 0, 0, 0, 0)))),
-            'End':   time.strftime ('%Y-%m-%d', time.localtime (time.mktime ((now.year, now.month, last_day_of_month (now), 0, 0, 0, 0, 0, 0))))
-        },
-        Granularity='MONTHLY',
-        Metrics = ['BlendedCost']
-    )
-    return r ['ResultsByTime'][0]['Total']['BlendedCost']
```

## rs4/apis/aws/cloudwatch.py

```diff
@@ -1,35 +1,48 @@
-from . import cw
+import boto3
 from datetime import datetime, timedelta
+import time
+
+cw = boto3.client('cloudwatch')
+
+# https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/viewing_metrics_with_cloudwatch.html
 
 INSTANCE_CREDITS = dict (
     nano = 72, micro = 144, small = 288, medium = 576, large = 864, xlarge = 1296
 )
 INSTANCE_CREDITS ["2xlarge"] = 1958
 
-def get_credit_balance (instance):
-    if not instance.instance_type.startswith ("t"):
-        return
+units = {
+    'CPUCreditBalance': 'Count',
+    'FreeableMemory': 'Bytes',
+    'FreeStorageSpace': 'Bytes',
+    'CPUUtilization': 'Percent'
+}
 
+def get_metric (kind, name, id, hours = 24, period = 3600):
     response = cw.get_metric_statistics (
-        Namespace='AWS/EC2',
-        MetricName='CPUCreditBalance',
+        Namespace='AWS/EC2' if kind == 'ec2' else 'AWS/RDS',
+        MetricName=name,
         Dimensions=[
             {
-                'Name': 'InstanceId',
-                'Value': instance.id
+                'Name': 'InstanceId' if kind == "ec2" else 'DBInstanceIdentifier',
+                'Value': id
             },
         ],
-        StartTime=datetime.utcnow () - timedelta (hours = 1),
+        StartTime=datetime.utcnow () - timedelta (hours = hours),
         EndTime=datetime.utcnow () - timedelta (hours = 0),
-        Period=300,
+        Period=period,
         Statistics=['Average', 'Minimum', 'Maximum'],
-        Unit='Count'
+        Unit=units [name]
     )
-    lastest = response ["Datapoints"][-1]
+    return response ["Datapoints"]
 
+def get_credit_balance (instance):
+    if not instance.instance_type.startswith ("t"):
+        return
+    response = get_metric ('ec2', 'CPUCreditBalance', instance.id, 1, 300)
+    lastest = response [-1]
     t, c = instance.instance_type.split (".")
     max_credits = INSTANCE_CREDITS [c]
     if t != 't2' and c in ('nano', 'micro', 'small'):
         max_credits *= 2
-
     return int (lastest ["Average"]), max_credits
```

## rs4/apis/aws/deploy.py

```diff
@@ -1,13 +1,13 @@
 # Hans Roh (Apr 5, 2020)
 
 import time
 import sys, os
 import fabric
-from rs4.apis.aws import ec2, elb2, ec2cli, rt53, autoscaling
+from rs4.apis import ec2r as ec2, elb2, ec2cli, rt53, autoscaling
 import threading
 import requests
 from pprint import pprint
 import botocore
 from urllib.parse import urlparse
 import base64
```

## Comparing `rs4-0.3.8.4.dist-info/LICENSE` & `rs4-0.3.9.dist-info/LICENSE`

 * *Files identical despite different names*

## Comparing `rs4-0.3.8.4.dist-info/METADATA` & `rs4-0.3.9.dist-info/METADATA`

 * *Files 17% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: rs4
-Version: 0.3.8.4
+Version: 0.3.9
 Summary: Utility Pack
 Home-page: https://gitlab.com/skitai/rs4
 Author: Hans Roh
 Author-email: hansroh@gmail.com
 License: MIT
 Download-URL: https://pypi.python.org/pypi/rs4
 Platform: posix
```

## Comparing `rs4-0.3.8.4.dist-info/RECORD` & `rs4-0.3.9.dist-info/RECORD`

 * *Files 2% similar despite different names*

```diff
@@ -1,8 +1,8 @@
-rs4/__init__.py,sha256=EBmDE2QJYIIeMDkX_6bsQbDGRRtd6G6j7bM_HrMlNP0,4833
+rs4/__init__.py,sha256=AuT4GFpGs4F63L2Biu_8TsIwgsu7u5wBbdEY3yQJTr8,4831
 rs4/aio.py,sha256=N97NQBoVtNFAL0fgVNbMXf-R7QtNR8wjr0X-mPgzlCU,1035
 rs4/annotations.py,sha256=7G5FJETMIekMKVWCoy6xMmD9xTXxM52S0OrmGHlicpM,1772
 rs4/argopt.py,sha256=ksMjEcmA_Iw4--ZfQh-P9d8jK5E805OV-lprrnXazNA,5223
 rs4/asynchat.py,sha256=Iu3ltJfrDhJzgdXtk_vZsQVk3fPE5TIZD9uWN3sG7Sc,11407
 rs4/asyncore.py,sha256=t4XoATiaeAUJXyYarfZWNBsmrM2XBqyfyraaqMgpgxM,23368
 rs4/attrdict.py,sha256=GQdEWApDnN5B-ZWqZebgeDV44cTb48k3VmZCYIXsiOM,3685
 rs4/cbutil.py,sha256=0IfNjGIOZSlor0my3JWF9cpk5eZJNZCXtQAA-CoD_88,385
@@ -21,22 +21,26 @@
 rs4/ssl_.py,sha256=DH_0PQGeW_n6sUnLZZok2-ns8p62yL2ywWfjpwTrxQ8,12155
 rs4/strutil.py,sha256=DYg4Z30f15yx6F2cp1Dpjn2qtU5pRg6yMw9EN8baRwM,430
 rs4/termcolor.py,sha256=3ABBoYd-KUrxw8mxm2iFQYCU8lgsrR5sHdt3KS6iSjs,1724
 rs4/timer.py,sha256=MtbZKv07FWsRkUhdbH8wGopBYjIVeJh3w7suFnBnG4I,1269
 rs4/unistr.py,sha256=8fp1C417WMMubvDI-O1mvo7GQaCoPjUbydf0Tp6ROxY,819
 rs4/apis/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 rs4/apis/telegram.py,sha256=Xa3kuZOaWqgUgRIcXTSyGDW30XtZMq8N7JLy-kPZe7E,1641
-rs4/apis/aws/__init__.py,sha256=1zDus2Lqf7ZzL_8EYklBA61qC0kPk9qncEMKYDcp3IU,1264
-rs4/apis/aws/cloudwatch.py,sha256=G2JyVBPW8lqbwTcpzkgJ5PayKjfVPeujOuaQK86il3o,1036
-rs4/apis/aws/deploy.py,sha256=qbOFt0PTkNFvb-YMN2QsQgskB_rvd7bKc8-EFTVGidw,25663
+rs4/apis/aws/__init__.py,sha256=m4Dfuk__eh3MWFon8ftixp3Dg-ey8pgvBtLNZG0-Eek,432
+rs4/apis/aws/cloudwatch.py,sha256=hDjotOyTaYg7Okpk4rBI-IclpUX5FgpDLQ8wnISBypg,1531
+rs4/apis/aws/cost_explorer.py,sha256=MmEX-DXp-r0M3pKjF4xP1cfPrvgHc1Tkm0BSv4p8Ss0,948
+rs4/apis/aws/deploy.py,sha256=Z08TeRsRunqyFo0oLdwxyErAMAhIq1_nmqFim80jCA0,25667
+rs4/apis/aws/ec2.py,sha256=pItX8WugsofGi9P0qxdkSKSS4ycfnw6bzh3DPGvS0VA,1653
+rs4/apis/aws/rds.py,sha256=3z7PPnADHFx51ET8TaFKuXNTN4hwqhBm4nzZQKVbrqM,1584
 rs4/apis/aws/s3.py,sha256=zdJJOodYp3uD414EMaSzBcjUSlOzmD8ZOxkdIYVvCXM,1447
 rs4/apis/aws/speech.py,sha256=gJflNcelfA3OL9qxIM8N9NO007OrVeVReNUUegWMsB0,1001
 rs4/apis/aws/stream_transcribe.py,sha256=nNt82cqZ_zvXe41LytPIPoXoawkbxBT8NFNReFFi-UI,2835
 rs4/apis/aws/transcribe.py,sha256=B6LTh2ZaN5gSqN-_lFoDUin2bT440wb7reu1sEJPDHU,2055
 rs4/apis/aws/translate.py,sha256=suNqL4zsDP9eq3U89664dOyysjKBu5MjmTyENk-7pHw,880
+rs4/apis/aws/ec2ops/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 rs4/apis/aws/ec2ops/autoscaler.py,sha256=ewZha6kqM5_ycSoZNsGO49LVlSgDeHKoeWl0mIIn77k,4502
 rs4/apis/aws/ec2ops/elb.py,sha256=vVi72H3KpLw3Y__wFIwbjJi5s24DedbDAJSdY0t9lpA,1865
 rs4/apis/aws/ec2ops/elbops3.py,sha256=Xn36Q-9FDDIRgmONiKkNMeXq3EqM2Fsdvk_5V-HrKns,4552
 rs4/apis/aws/ec2ops/iquery.py,sha256=oDGaBXAL58kK5BpVlZ92iqY0Od2x16CYKRyGSL4T9WU,791
 rs4/apis/aws/ec2ops/metrics.py,sha256=R9w7jQ3wYIcWU5DQvajZkp7nqe0WNqowrefNr41dcok,1912
 rs4/apis/aws/ec2ops/ssh.py,sha256=kA2zoPAQJ49STx1OF7XqTQZyBAwTSckYhDZ7SoBfrR0,952
 rs4/apis/aws/ec2ops/ssh3.py,sha256=U9VyOIigg6Z76edf3WigfA41gnxLW7SYdm_D9smCdrE,410
@@ -369,12 +373,12 @@
 rs4/webkit/jwt.py,sha256=IF8xo5GTMLmGMhaxid_Zgr1Bl1246d0lzMukDqLsoy4,1839
 rs4/webkit/markdown.py,sha256=u5D9igyhm4nvIFNuxTzY_5v_9TY9jFWnhEfM80epXnw,4642
 rs4/webkit/nops.py,sha256=ikUQkU_jpCBpbOtggpxPqgSyZP3egZ04crRjdGNy8qY,17126
 rs4/webkit/otp.py,sha256=XErWqgp94xgC6Vxnd9FKOb4MpxhIabbb8cCc2Wksb1k,593
 rs4/webkit/pools.py,sha256=sqzpcJX5xSqJ37TeYiVJSpicu52YQCubWCRn77FKbjc,777
 rs4/webkit/siesta.py,sha256=dknER3Txr1Fy5QahB4_9OObbHDPHibpyInXdEPn1XYY,11735
 rs4/webkit/webtest.py,sha256=weR69ERcvKRXAKUV5Cp04laLlG-0uLzFHzSeqM_F6DE,9641
-rs4-0.3.8.4.dist-info/LICENSE,sha256=jnLJXjDOhIGQzLUD2crd4PnZybhhrOFlLel_EznbVIA,1083
-rs4-0.3.8.4.dist-info/METADATA,sha256=uoIytdczKgkyXXhf9eEu5GHP4VY0N5w5mZIIPQG9hog,835
-rs4-0.3.8.4.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
-rs4-0.3.8.4.dist-info/top_level.txt,sha256=I0mgCovLLqn4633KqAooYPQVsJcrVYqGVsEWjqxCd_o,4
-rs4-0.3.8.4.dist-info/RECORD,,
+rs4-0.3.9.dist-info/LICENSE,sha256=jnLJXjDOhIGQzLUD2crd4PnZybhhrOFlLel_EznbVIA,1083
+rs4-0.3.9.dist-info/METADATA,sha256=XbxlENEbd9sPUyPJ26yssvtdYEieaVmkzJ-iZh-9MWk,833
+rs4-0.3.9.dist-info/WHEEL,sha256=ewwEueio1C2XeHTvT17n8dZUJgOvyCWCt0WVNLClP9o,92
+rs4-0.3.9.dist-info/top_level.txt,sha256=I0mgCovLLqn4633KqAooYPQVsJcrVYqGVsEWjqxCd_o,4
+rs4-0.3.9.dist-info/RECORD,,
```

